cscope 15 $HOME/project/assgn6/cbi/jpegtrans               0001028691
	@ansi2knr.c

232 #ià
HAVE_CONFIG_H


233 
	~<cÚfig.h
>

236 
	~<¡dio.h
>

237 
	~<ùy³.h
>

239 #ià
HAVE_CONFIG_H


246 #ià
STDC_HEADERS
 || 
HAVE_STRING_H


247 
	~<¡ršg.h
>

249 
	~<¡ršgs.h
>

256 #ifdeà
BSD


257 
	~<¡ršgs.h
>

259 #ifdeà
VMS


260 
¡¾’
(), 
¡ºcmp
();

262 
	~<¡ršg.h
>

268 #ià
STDC_HEADERS


269 
	~<¡dlib.h
>

275 #ifdeà
MSDOS


276 
	~<m®loc.h
>

278 #ifdeà
VMS


279 *
m®loc
();

280 
ä“
();

282 *
m®loc
();

283 
ä“
();

293 #ifdeà
i§scii


294 #undeà
HAVE_ISASCII


295 
	#HAVE_ISASCII
 1

	)

298 #ià
STDC_HEADERS
 || !
HAVE_ISASCII


299 
	#is_ascii
(
c
è1

	)

301 
	#is_ascii
(
c
è
	`i§scii
(c)

	)

304 
	#is_¥aû
(
c
è(
	`is_ascii
(cè&& 
	`is¥aû
(c))

	)

305 
	#is_®pha
(
c
è(
	`is_ascii
(cè&& 
	`i§Íha
(c))

	)

306 
	#is_®num
(
c
è(
	`is_ascii
(cè&& 
	`i§Êum
(c))

	)

309 
	#isidch¬
(
ch
è(
	`is_®num
(chè|| (chè=ğ'_')

	)

310 
	#isidfœ¡ch¬
(
ch
è(
	`is_®pha
(chè|| (chè=ğ'_')

	)

313 *
sk¥aû
();

314 
wr™ebÏnks
();

315 
‹¡1
();

316 
cÚv”t1
();

320 
	$maš
(
¬gc
, 
¬gv
)

321 
¬gc
;

322 *
¬gv
[];

323 { 
FILE
 *
š
, *
out
;

324 
	#bufsize
 5000

	)

325 *
buf
;

326 *
lše
;

327 *
mÜe
;

336 
cÚv”t_v¬¬gs
 = 1;

338 iàĞ
¬gc
 > 1 && 
¬gv
[1][0] == '-' )

339 { iàĞ!
	`¡rcmp
(
¬gv
[1], "--varargs") )

340 { 
cÚv”t_v¬¬gs
 = 1;

341 
¬gc
--;

342 
¬gv
++;

345 { 
	`årštf
(
¡d”r
, "UÄecognized sw™ch: %s\n", 
¬gv
[1]);

346 
	`ex™
(1);

349  
¬gc
 )

352 
	`´štf
("Usage:‡nsi2knr input_file [output_file]\n");

353 
	`ex™
(0);

355 
out
 = 
¡dout
;

358 
out
 = 
	`fİ’
(
¬gv
[2], "w");

359 iàĞ
out
 =ğ
NULL
 )

360 { 
	`årštf
(
¡d”r
, "CªnÙ o³Àouuˆf%s\n", 
¬gv
[2]);

361 
	`ex™
(1);

364 
š
 = 
	`fİ’
(
¬gv
[1], "r");

365 iàĞ
š
 =ğ
NULL
 )

366 { 
	`årštf
(
¡d”r
, "CªnÙ o³Àšpuˆf%s\n", 
¬gv
[1]);

367 
	`ex™
(1);

369 
	`årštf
(
out
, "#lš1 \"%s\"\n", 
¬gv
[1]);

370 
buf
 = 
	`m®loc
(
bufsize
);

371 
lše
 = 
buf
;

372  
	`fg‘s
(
lše
, ()(
buf
 + 
bufsize
 -†še), 
š
è!ğ
NULL
 )

374 
‹¡
: 
lše
 +ğ
	`¡¾’
(line);

375  
	`‹¡1
(
buf
) )

378 
	`cÚv”t1
(
buf
, 
out
, 1, 
cÚv”t_v¬¬gs
);

382 
mÜe
 = ++
lše
;

383 
f
: iàĞ
lše
 >ğ
buf
 + (
bufsize
 - 1) )

384 
wl
;

385 iàĞ
	`fg‘s
(
lše
, ()(
buf
 + 
bufsize
 -†še), 
š
è=ğ
NULL
 )

386 
wl
;

387  *
	`sk¥aû
(
mÜe
, 1) )

391 
	`cÚv”t1
(
buf
, 
out
, 0, 
cÚv”t_v¬¬gs
);

392 
	`åuts
(
mÜe
, 
out
);

397 
lše
 +ğ
	`¡¾’
(line);

398 
f
;

402 
	`åuts
(
buf
, 
out
);

403 
	`¡rıy
(
buf
, 
mÜe
);

404 
lše
 = 
buf
;

405 
‹¡
;

409 iàĞ
lše
 !ğ
buf
 + (
bufsize
 - 1) )

413 
wl
: 
	`åuts
(
buf
, 
out
);

416 
lše
 = 
buf
;

418 iàĞ
lše
 !ğ
buf
 )

419 
	`åuts
(
buf
, 
out
);

420 
	`ä“
(
buf
);

421 
	`fşo£
(
out
);

422 
	`fşo£
(
š
);

424 
	}
}

428 
	$sk¥aû
(
p
, 
dœ
)

429 *
p
;

430 
dœ
;

432 {  
	`is_¥aû
(*
p
) )

433 
p
 +ğ
dœ
;

434 iàĞ!(*
p
 =ğ'/' &&…[
dœ
] == '*') )

436 
p
 +ğ
dœ
;… += dir;

437  !(*
p
 =ğ'*' &&…[
dœ
] == '/') )

438 { iàĞ*
p
 == 0 )

439  
p
;

440 
p
 +ğ
dœ
;

442 
p
 +ğ
dœ
;… += dir;

444  
p
;

445 
	}
}

452 
	$wr™ebÏnks
(
¡¬t
, 
’d
)

453 *
¡¬t
;

454 *
’d
;

455 { *
p
;

456  
p
 = 
¡¬t
;… < 
’d
;…++ )

457 iàĞ*
p
 != '\r' && *p != '\n' )

458 *
p
 = ' ';

460 
	}
}

476 
	$‹¡1
(
buf
)

477 *
buf
;

478 { *
p
 = 
buf
;

479 *
b’d
;

480 *
’dâ
;

481 
cÚtš
;

483 iàĞ!
	`isidfœ¡ch¬
(*
p
) )

485 
b’d
 = 
	`sk¥aû
(
buf
 + 
	`¡¾’
(buf) - 1, -1);

486  *
b’d
 )

488 ';': 
cÚtš
 = 0 ; ;

489 ')': 
cÚtš
 = 1; ;

492 : 
cÚtš
 = -1;

494  
	`isidch¬
(*
p
) )

495 
p
++;

496 
’dâ
 = 
p
;

497 
p
 = 
	`sk¥aû
(p, 1);

498 iàĞ*
p
++ != '(' )

500 
p
 = 
	`sk¥aû
(p, 1);

501 iàĞ*
p
 == ')' )

506 { *
wÜds
[] =

513 **
key
 = 
wÜds
;

514 *
kp
;

515 
Ën
 = 
’dâ
 - 
buf
;

517  (
kp
 = *
key
) != 0 )

518 { iàĞ
	`¡¾’
(
kp
è=ğ
Ën
 && !
	`¡ºcmp
(kp, 
buf
,†en) )

520 
key
++;

523  
cÚtš
;

524 
	}
}

528 
	$cÚv”t1
(
buf
, 
out
, 
h—d”
, 
cÚv”t_v¬¬gs
)

529 *
buf
;

530 
FILE
 *
out
;

531 
h—d”
;

532 
cÚv”t_v¬¬gs
;

533 { *
’dâ
;

534 *
p
;

535 **
b»aks
;

536 
num_b»aks
 = 2;

537 **
btİ
;

538 **
bp
;

539 **
­
;

540 *
v¬¬g
 = 0;

544  
’dâ
 = 
buf
; *(endfn++) != '('; )

546 
tİ
: 
p
 = 
’dâ
;

547 
b»aks
 = (**)
	`m®loc
((*è* 
num_b»aks
 * 2);

548 iàĞ
b»aks
 == 0 )

550 
	`årštf
(
¡d”r
, "Unableo‡llocate breakable!\n");

551 
	`åuts
(
buf
, 
out
);

554 
btİ
 = 
b»aks
 + 
num_b»aks
 * 2 - 2;

555 
bp
 = 
b»aks
;

558 { 
Ëv–
 = 0;

559 *
Í
 = 
NULL
;

560 *
½
;

561 *
’d
 = 
NULL
;

563 iàĞ
bp
 >ğ
btİ
 )

566 
	`ä“
((*)
b»aks
);

567 
num_b»aks
 <<= 1;

568 
tİ
;

570 *
bp
++ = 
p
;

572  ; 
’d
 =ğ
NULL
; 
p
++ )

573 { *
p
)

576 iàĞ!
Ëv–
 ) 
’d
 = 
p
;

579 iàĞ!
Ëv–
 ) 
Í
 = 
p
;

580 
Ëv–
++;

583 iàĞ--
Ëv–
 < 0 ) 
’d
 = 
p
;

584 
½
 = 
p
;

587 
p
 = 
	`sk¥aû
(p, 1) - 1;

594 iàĞ
Í
 )

595 
	`wr™ebÏnks
(
Í
 + 1, 
½
);

596 
p
--;

601 { 
p
 = 
	`sk¥aû
(p - 1, -1);

602  *
p
 )

606 { 
Ëv–
 = 1;

607  
Ëv–
 )

608  *--
p
 )

610 ']': ')': 
Ëv–
++; ;

611 '[': '(': 
Ëv–
--; ;

612 '/': 
p
 = 
	`sk¥aû
(p, -1) + 1; ;

616 iàĞ*
p
 =ğ'(' && *
	`sk¥aû
(p + 1, 1) == '*' )

618  !
	`isidfœ¡ch¬
(*
p
) )

619 
p
 = 
	`sk¥aû
(p, 1) + 1;

620 
found
;

624 
found
;

627 
found
: iàĞ*
p
 == '.' &&…[-1] == '.' &&…[-2] == '.' )

628 { iàĞ
cÚv”t_v¬¬gs
 )

629 { *
bp
++ = "va_alist";

630 
v¬¬g
 = 
p
-2;

633 { 
p
++;

634 iàĞ
bp
 =ğ
b»aks
 + 1 )

635 
	`wr™ebÏnks
(
b»aks
[0], 
p
);

637 
	`wr™ebÏnks
(
bp
[-1] - 1, 
p
);

638 
bp
--;

642 {  
	`isidch¬
(*
p
) )…--;

643 *
bp
++ = 
p
+1;

645 
p
 = 
’d
;

647  *
p
++ == ',' );

648 *
bp
 = 
p
;

650 iàĞ
bp
 =ğ
b»aks
+2 )

651 { 
p
 = 
	`sk¥aû
(
b»aks
[0], 1);

652 iàĞ!
	`¡ºcmp
(
p
, "void", 4) )

653 { 
p
 = 
	`sk¥aû
(p+4, 1);

654 iàĞ
p
 =ğ
b»aks
[2] - 1 )

655 { 
bp
 = 
b»aks
;

656 
	`wr™ebÏnks
(
b»aks
[0], 
p
 + 1);

661 
p
 = 
buf
;

662  
p
 !ğ
’dâ
 ) 
	`putc
(*p, 
out
),…++;

664 iàĞ
h—d”
 )

665 { 
	`åuts
(");", 
out
);

666  
p
 = 
b»aks
[0]; *p;…++ )

667 iàĞ*
p
 == '\r' || *p == '\n' )

668 
	`putc
(*
p
, 
out
);

671 {  
­
 = 
b»aks
+1;‡°< 
bp
;‡p += 2 )

672 { 
p
 = *
­
;

673  
	`isidch¬
(*
p
) )

674 
	`putc
(*
p
, 
out
),…++;

675 iàĞ
­
 < 
bp
 - 1 )

676 
	`åuts
(", ", 
out
);

678 
	`åuts
("è ", 
out
);

680  
­
 = 
b»aks
+2;‡°<ğ
bp
;‡p += 2 )

681 (*
­
)[-1] = ';';

682 iàĞ
v¬¬g
 != 0 )

683 { *
v¬¬g
 = 0;

684 
	`åuts
(
b»aks
[0], 
out
);

685 
	`åuts
("va_dş", 
out
);

686 
	`åuts
(
bp
[0], 
out
);

689 
	`åuts
(
b»aks
[0], 
out
);

691 
	`ä“
((*)
b»aks
);

693 
	}
}

	@cderror.h

20 #iâdeà
JMESSAGE


21 #iâdeà
CDERROR_H


22 
	#CDERROR_H


	)

24 
	#JMAKE_ENUM_LIST


	)

27 
	#JMESSAGE
(
code
,
¡ršg
)

	)

31 #ifdeà
JMAKE_ENUM_LIST


35 
	#JMESSAGE
(
code
,
¡ršg
ècod,

	)

39 
JMESSAGE
(
JMSG_FIRSTADDONCODE
=1000, 
NULL
)

41 #ifdeà
BMP_SUPPORTED


42 
JMESSAGE
(
JERR_BMP_BADCMAP
, "Unsupported BMP colormap format")

43 
JMESSAGE
(
JERR_BMP_BADDEPTH
, "Only 8-‡nd 24-bit BMP files‡re supported")

44 
JMESSAGE
(
JERR_BMP_BADHEADER
, "Invalid BMP file: bad header†ength")

45 
JMESSAGE
(
JERR_BMP_BADPLANES
, "Invalid BMP file: biPlanes‚otƒqualo 1")

46 
JMESSAGE
(
JERR_BMP_COLORSPACE
, "BMP output must be grayscale or RGB")

47 
JMESSAGE
(
JERR_BMP_COMPRESSED
, "Sorry, compressed BMPs‚ot yet supported")

48 
JMESSAGE
(
JERR_BMP_NOT
, "Not‡ BMP file - does‚ot start with BM")

49 
JMESSAGE
(
JTRC_BMP
, "%ux%u 24-bit BMP image")

50 
JMESSAGE
(
JTRC_BMP_MAPPED
, "%ux%u 8-bit colormapped BMP image")

51 
JMESSAGE
(
JTRC_BMP_OS2
, "%ux%u 24-bit OS2 BMP image")

52 
JMESSAGE
(
JTRC_BMP_OS2_MAPPED
, "%ux%u 8-bit colormapped OS2 BMP image")

55 #ifdeà
GIF_SUPPORTED


56 
JMESSAGE
(
JERR_GIF_BUG
, "GIF output got confused")

57 
JMESSAGE
(
JERR_GIF_CODESIZE
, "Bogus GIF codesize %d")

58 
JMESSAGE
(
JERR_GIF_COLORSPACE
, "GIF output must be grayscale or RGB")

59 
JMESSAGE
(
JERR_GIF_IMAGENOTFOUND
, "Too few images in GIF file")

60 
JMESSAGE
(
JERR_GIF_NOT
, "Not‡ GIF file")

61 
JMESSAGE
(
JTRC_GIF
, "%ux%ux%d GIF image")

62 
JMESSAGE
(
JTRC_GIF_BADVERSION
,

64 
JMESSAGE
(
JTRC_GIF_EXTENSION
, "Ignoring GIFƒxtension block ofype 0x%02x")

65 
JMESSAGE
(
JTRC_GIF_NONSQUARE
, "Caution:‚onsquare…ixels in input")

66 
JMESSAGE
(
JWRN_GIF_BADDATA
, "Corrupt data in GIF file")

67 
JMESSAGE
(
JWRN_GIF_CHAR
, "Bogus char 0x%02x in GIF file, ignoring")

68 
JMESSAGE
(
JWRN_GIF_ENDCODE
, "Prematureƒnd of GIF image")

69 
JMESSAGE
(
JWRN_GIF_NOMOREDATA
, "Ran out of GIF bits")

72 #ifdeà
PPM_SUPPORTED


73 
JMESSAGE
(
JERR_PPM_COLORSPACE
, "PPM output must be grayscale or RGB")

74 
JMESSAGE
(
JERR_PPM_NONNUMERIC
, "Nonnumeric data in PPM file")

75 
JMESSAGE
(
JERR_PPM_NOT
, "Not‡ PPM/PGM file")

76 
JMESSAGE
(
JTRC_PGM
, "%ux%u PGM image")

77 
JMESSAGE
(
JTRC_PGM_TEXT
, "%ux%uext PGM image")

78 
JMESSAGE
(
JTRC_PPM
, "%ux%u PPM image")

79 
JMESSAGE
(
JTRC_PPM_TEXT
, "%ux%uext PPM image")

82 #ifdeà
RLE_SUPPORTED


83 
JMESSAGE
(
JERR_RLE_BADERROR
, "Bogusƒrror code from RLE†ibrary")

84 
JMESSAGE
(
JERR_RLE_COLORSPACE
, "RLE output must be grayscale or RGB")

85 
JMESSAGE
(
JERR_RLE_DIMENSIONS
, "Image dimensions (%ux%u)oo†arge for RLE")

86 
JMESSAGE
(
JERR_RLE_EMPTY
, "Empty RLE file")

87 
JMESSAGE
(
JERR_RLE_EOF
, "Premature EOF in RLE header")

88 
JMESSAGE
(
JERR_RLE_MEM
, "Insufficient memory for RLE header")

89 
JMESSAGE
(
JERR_RLE_NOT
, "Not‡n RLE file")

90 
JMESSAGE
(
JERR_RLE_TOOMANYCHANNELS
, "Cannot handle %d output channels for RLE")

91 
JMESSAGE
(
JERR_RLE_UNSUPPORTED
, "Cannot handlehis RLE setup")

92 
JMESSAGE
(
JTRC_RLE
, "%ux%u full-color RLE file")

93 
JMESSAGE
(
JTRC_RLE_FULLMAP
, "%ux%u full-color RLE file with map of†ength %d")

94 
JMESSAGE
(
JTRC_RLE_GRAY
, "%ux%u grayscale RLE file")

95 
JMESSAGE
(
JTRC_RLE_MAPGRAY
, "%ux%u grayscale RLE file with map of†ength %d")

96 
JMESSAGE
(
JTRC_RLE_MAPPED
, "%ux%u colormapped RLE file with map of†ength %d")

99 #ifdeà
TARGA_SUPPORTED


100 
JMESSAGE
(
JERR_TGA_BADCMAP
, "Unsupported Targa colormap format")

101 
JMESSAGE
(
JERR_TGA_BADPARMS
, "Invalid or unsupported Targa file")

102 
JMESSAGE
(
JERR_TGA_COLORSPACE
, "Targa output must be grayscale or RGB")

103 
JMESSAGE
(
JTRC_TGA
, "%ux%u RGB Targa image")

104 
JMESSAGE
(
JTRC_TGA_GRAY
, "%ux%u grayscale Targa image")

105 
JMESSAGE
(
JTRC_TGA_MAPPED
, "%ux%u colormapped Targa image")

107 
JMESSAGE
(
JERR_TGA_NOTCOMP
, "Targa support was‚ot compiled")

110 
JMESSAGE
(
JERR_BAD_CMAP_FILE
,

112 
JMESSAGE
(
JERR_TOO_MANY_COLORS
,

114 
JMESSAGE
(
JERR_UNGETC_FAILED
, "ungetc failed")

115 #ifdeà
TARGA_SUPPORTED


116 
JMESSAGE
(
JERR_UNKNOWN_FORMAT
,

119 
JMESSAGE
(
JERR_UNKNOWN_FORMAT
, "Unrecognized input file format")

121 
JMESSAGE
(
JERR_UNSUPPORTED_FORMAT
, "Unsupported output file format")

123 #ifdeà
JMAKE_ENUM_LIST


125 
	mJMSG_LASTADDONCODE


126 } 
	tADDON_MESSAGE_CODE
;

128 #undeà
JMAKE_ENUM_LIST


132 #undeà
JMESSAGE


	@cdjpeg.c

12 
	~"cdj³g.h
"

13 
	~<ùy³.h
>

14 #ifdeà
NEED_SIGNAL_CATCHER


15 
	~<sigÇl.h
>

17 #ifdeà
USE_SETMODE


18 
	~<fú.h
>

20 
	~<io.h
>

30 #ifdeà
NEED_SIGNAL_CATCHER


32 
j_commÚ_±r
 
	gsig_cšfo
;

35 
	$sigÇl_ÿtch”
 (
signum
)

37 ià(
sig_cšfo
 !ğ
NULL
) {

38 ià(
sig_cšfo
->
”r
 !ğ
NULL
)

39 
sig_cšfo
->
”r
->
Œaû_Ëv–
 = 0;

40 
	`j³g_de¡roy
(
sig_cšfo
);

42 
	`ex™
(
EXIT_FAILURE
);

43 
	}
}

46 
	$GLOBAL
()

47 
	$’abË_sigÇl_ÿtch”
 (
j_commÚ_±r
 
cšfo
)

49 
sig_cšfo
 = 
cšfo
;

50 #ifdeà
SIGINT


51 
	`sigÇl
(
SIGINT
, 
sigÇl_ÿtch”
);

53 #ifdeà
SIGTERM


54 
	`sigÇl
(
SIGTERM
, 
sigÇl_ÿtch”
);

56 
	}
}

65 #ifdeà
PROGRESS_REPORT


67 
	$METHODDEF
()

68 
	$´og»ss_mÚ™Ü
 (
j_commÚ_±r
 
cšfo
)

70 
cd_´og»ss_±r
 
´og
 = (cd_´og»ss_±rè
cšfo
->
´og»ss
;

71 
tÙ®_·s£s
 = 
´og
->
pub
.tÙ®_·s£ +…rog->
tÙ®_exŒa_·s£s
;

72 
³rûÁ_dÚe
 = (è(
´og
->
pub
.
·ss_couÁ”
*100L/´og->pub.
·ss_lim™
);

74 ià(
³rûÁ_dÚe
 !ğ
´og
->percent_done) {

75 
´og
->
³rûÁ_dÚe
 =…ercent_done;

76 ià(
tÙ®_·s£s
 > 1) {

77 
	`årštf
(
¡d”r
, "\rPass %d/%d: %3d%% ",

78 
´og
->
pub
.
com¶‘ed_·s£s
 +…rog->
com¶‘ed_exŒa_·s£s
 + 1,

79 
tÙ®_·s£s
, 
³rûÁ_dÚe
);

81 
	`årštf
(
¡d”r
, "\¸%3d%% ", 
³rûÁ_dÚe
);

83 
	`fæush
(
¡d”r
);

85 
	}
}

88 
	$GLOBAL
()

89 
	$¡¬t_´og»ss_mÚ™Ü
 (
j_commÚ_±r
 
cšfo
, 
cd_´og»ss_±r
 
´og»ss
)

92 ià(
cšfo
->
”r
->
Œaû_Ëv–
 == 0) {

93 
´og»ss
->
pub
.
´og»ss_mÚ™Ü
 =…rogress_monitor;

94 
´og»ss
->
com¶‘ed_exŒa_·s£s
 = 0;

95 
´og»ss
->
tÙ®_exŒa_·s£s
 = 0;

96 
´og»ss
->
³rûÁ_dÚe
 = -1;

97 
cšfo
->
´og»ss
 = &´og»ss->
pub
;

99 
	}
}

102 
	$GLOBAL
()

103 
	$’d_´og»ss_mÚ™Ü
 (
j_commÚ_±r
 
cšfo
)

106 ià(
cšfo
->
”r
->
Œaû_Ëv–
 == 0) {

107 
	`årštf
(
¡d”r
, "\r \r");

108 
	`fæush
(
¡d”r
);

110 
	}
}

121 
	$GLOBAL
(
boŞ—n
)

122 
	$keym©ch
 (* 
¬g
, cÚ¡ * 
keywÜd
, 
mšch¬s
)

124 
ÿ
, 
ck
;

125 
nm©ched
 = 0;

127 (
ÿ
 = *
¬g
++) != '\0') {

128 ià((
ck
 = *
keywÜd
++) == '\0')

129  
FALSE
;

130 ià(
	`isuµ”
(
ÿ
))

131 
ÿ
 = 
	`tŞow”
(ca);

132 ià(
ÿ
 !ğ
ck
)

133  
FALSE
;

134 
nm©ched
++;

137 ià(
nm©ched
 < 
mšch¬s
)

138  
FALSE
;

139  
TRUE
;

140 
	}
}

148 
	$GLOBAL
(
FILE
 *)

149 
	$»ad_¡dš
 ()

151 
FILE
 * 
šput_fe
 = 
¡dš
;

153 #ifdeà
USE_SETMODE


154 
	`£tmode
(
	`f’o
(
¡dš
), 
O_BINARY
);

156 #ifdeà
USE_FDOPEN


157 ià((
šput_fe
 = 
	`fdİ’
(
	`f’o
(
¡dš
), 
READ_BINARY
)è=ğ
NULL
) {

158 
	`årštf
(
¡d”r
, "Cannot„eopen stdin\n");

159 
	`ex™
(
EXIT_FAILURE
);

162  
šput_fe
;

163 
	}
}

166 
	$GLOBAL
(
FILE
 *)

167 
	$wr™e_¡dout
 ()

169 
FILE
 * 
ouut_fe
 = 
¡dout
;

171 #ifdeà
USE_SETMODE


172 
	`£tmode
(
	`f’o
(
¡dout
), 
O_BINARY
);

174 #ifdeà
USE_FDOPEN


175 ià((
ouut_fe
 = 
	`fdİ’
(
	`f’o
(
¡dout
), 
WRITE_BINARY
)è=ğ
NULL
) {

176 
	`årštf
(
¡d”r
, "Cannot„eopen stdout\n");

177 
	`ex™
(
EXIT_FAILURE
);

180  
ouut_fe
;

181 
	}
}

	@cdjpeg.h

12 
	#JPEG_CJPEG_DJPEG


	)

13 
	#JPEG_INTERNAL_OPTIONS


	)

14 
	~"jšşude.h
"

15 
	~"j³glib.h
"

16 
	~"j”rÜ.h
"

17 
	~"cd”rÜ.h
"

24 
cj³g_sourû_¡ruù
 * 
	tcj³g_sourû_±r
;

26 
	scj³g_sourû_¡ruù
 {

27 
JMETHOD
(, 
¡¬t_šput
, (
j_com´ess_±r
 
cšfo
,

28 
cj³g_sourû_±r
 
sšfo
));

29 
JMETHOD
(
JDIMENSION
, 
g‘_pix–_rows
, (
j_com´ess_±r
 
cšfo
,

30 
cj³g_sourû_±r
 
sšfo
));

31 
JMETHOD
(, 
fšish_šput
, (
j_com´ess_±r
 
cšfo
,

32 
cj³g_sourû_±r
 
sšfo
));

34 
FILE
 *
	mšput_fe
;

36 
JSAMPARRAY
 
	mbufãr
;

37 
JDIMENSION
 
	mbufãr_height
;

45 
dj³g_de¡_¡ruù
 * 
	tdj³g_de¡_±r
;

47 
	sdj³g_de¡_¡ruù
 {

51 
JMETHOD
(, 
¡¬t_ouut
, (
j_decom´ess_±r
 
cšfo
,

52 
dj³g_de¡_±r
 
dšfo
));

54 
JMETHOD
(, 
put_pix–_rows
, (
j_decom´ess_±r
 
cšfo
,

55 
dj³g_de¡_±r
 
dšfo
,

56 
JDIMENSION
 
rows_suµl›d
));

58 
JMETHOD
(, 
fšish_ouut
, (
j_decom´ess_±r
 
cšfo
,

59 
dj³g_de¡_±r
 
dšfo
));

62 
FILE
 * 
	mouut_fe
;

68 
JSAMPARRAY
 
	mbufãr
;

69 
JDIMENSION
 
	mbufãr_height
;

81 
	scdj³g_´og»ss_mgr
 {

82 
j³g_´og»ss_mgr
 
	mpub
;

83 
	mcom¶‘ed_exŒa_·s£s
;

84 
	mtÙ®_exŒa_·s£s
;

86 
	m³rûÁ_dÚe
;

89 
cdj³g_´og»ss_mgr
 * 
	tcd_´og»ss_±r
;

94 #ifdeà
NEED_SHORT_EXTERNAL_NAMES


95 
	#jš™_»ad_bmp
 
jIRdBMP


	)

96 
	#jš™_wr™e_bmp
 
jIWrBMP


	)

97 
	#jš™_»ad_gif
 
jIRdGIF


	)

98 
	#jš™_wr™e_gif
 
jIWrGIF


	)

99 
	#jš™_»ad_µm
 
jIRdPPM


	)

100 
	#jš™_wr™e_µm
 
jIWrPPM


	)

101 
	#jš™_»ad_¾e
 
jIRdRLE


	)

102 
	#jš™_wr™e_¾e
 
jIWrRLE


	)

103 
	#jš™_»ad_rga
 
jIRdT¬ga


	)

104 
	#jš™_wr™e_rga
 
jIWrT¬ga


	)

105 
	#»ad_quªt_bËs
 
RdQTabËs


	)

106 
	#»ad_sÿn_süt
 
RdSúSüt


	)

107 
	#£t_quªt_¦Ùs
 
S‘QSlÙs


	)

108 
	#£t_§m¶e_çùÜs
 
S‘SFaùs


	)

109 
	#»ad_cŞÜ_m­
 
RdCM­


	)

110 
	#’abË_sigÇl_ÿtch”
 
EnSigC©ch”


	)

111 
	#¡¬t_´og»ss_mÚ™Ü
 
StProgMÚ


	)

112 
	#’d_´og»ss_mÚ™Ü
 
EnProgMÚ


	)

113 
	#»ad_¡dš
 
RdStdš


	)

114 
	#wr™e_¡dout
 
WrStdout


	)

119 
	$EXTERN
(
cj³g_sourû_±r
è
jš™_»ad_bmp
 
	`JPP
((
j_com´ess_±r
 
cšfo
));

120 
	$EXTERN
(
dj³g_de¡_±r
è
jš™_wr™e_bmp
 
	`JPP
((
j_decom´ess_±r
 
cšfo
,

121 
boŞ—n
 
is_os2
));

122 
	$EXTERN
(
cj³g_sourû_±r
è
jš™_»ad_gif
 
	`JPP
((
j_com´ess_±r
 
cšfo
));

123 
	$EXTERN
(
dj³g_de¡_±r
è
jš™_wr™e_gif
 
	`JPP
((
j_decom´ess_±r
 
cšfo
));

124 
	$EXTERN
(
cj³g_sourû_±r
è
jš™_»ad_µm
 
	`JPP
((
j_com´ess_±r
 
cšfo
));

125 
	$EXTERN
(
dj³g_de¡_±r
è
jš™_wr™e_µm
 
	`JPP
((
j_decom´ess_±r
 
cšfo
));

126 
	$EXTERN
(
cj³g_sourû_±r
è
jš™_»ad_¾e
 
	`JPP
((
j_com´ess_±r
 
cšfo
));

127 
	$EXTERN
(
dj³g_de¡_±r
è
jš™_wr™e_¾e
 
	`JPP
((
j_decom´ess_±r
 
cšfo
));

128 
	$EXTERN
(
cj³g_sourû_±r
è
jš™_»ad_rga
 
	`JPP
((
j_com´ess_±r
 
cšfo
));

129 
	$EXTERN
(
dj³g_de¡_±r
è
jš™_wr™e_rga
 
	`JPP
((
j_decom´ess_±r
 
cšfo
));

133 
	$EXTERN
(
boŞ—n
è
»ad_quªt_bËs
 
	`JPP
((
j_com´ess_±r
 
cšfo
, * 
f’ame
,

134 
sÿË_çùÜ
, 
boŞ—n
 
fÜû_ba£lše
));

135 
	$EXTERN
(
boŞ—n
è
»ad_sÿn_süt
 
	`JPP
((
j_com´ess_±r
 
cšfo
, * 
f’ame
));

136 
	$EXTERN
(
boŞ—n
è
£t_quªt_¦Ùs
 
	`JPP
((
j_com´ess_±r
 
cšfo
, *
¬g
));

137 
	$EXTERN
(
boŞ—n
è
£t_§m¶e_çùÜs
 
	`JPP
((
j_com´ess_±r
 
cšfo
, *
¬g
));

141 
	$EXTERN
(è
»ad_cŞÜ_m­
 
	`JPP
((
j_decom´ess_±r
 
cšfo
, 
FILE
 * 
šfe
));

145 
	$EXTERN
(è
’abË_sigÇl_ÿtch”
 
	`JPP
((
j_commÚ_±r
 
cšfo
));

146 
	$EXTERN
(è
¡¬t_´og»ss_mÚ™Ü
 
	`JPP
((
j_commÚ_±r
 
cšfo
,

147 
cd_´og»ss_±r
 
´og»ss
));

148 
	$EXTERN
(è
’d_´og»ss_mÚ™Ü
 
	`JPP
((
j_commÚ_±r
 
cšfo
));

149 
	$EXTERN
(
boŞ—n
è
keym©ch
 
	`JPP
((* 
¬g
, cÚ¡ * 
keywÜd
, 
mšch¬s
));

150 
	$EXTERN
(
FILE
 *è
»ad_¡dš
 
	`JPP
(());

151 
	$EXTERN
(
FILE
 *è
wr™e_¡dout
 
	`JPP
(());

155 #ifdeà
DONT_USE_B_MODE


156 
	#READ_BINARY
 "r"

	)

157 
	#WRITE_BINARY
 "w"

	)

159 #ifdeà
VMS


160 
	#READ_BINARY
 "rb", "ùx=¡m"

	)

161 
	#WRITE_BINARY
 "wb", "ùx=¡m"

	)

163 
	#READ_BINARY
 "rb"

	)

164 
	#WRITE_BINARY
 "wb"

	)

168 #iâdeà
EXIT_FAILURE


169 
	#EXIT_FAILURE
 1

	)

171 #iâdeà
EXIT_SUCCESS


172 #ifdeà
VMS


173 
	#EXIT_SUCCESS
 1

	)

175 
	#EXIT_SUCCESS
 0

	)

178 #iâdeà
EXIT_WARNING


179 #ifdeà
VMS


180 
	#EXIT_WARNING
 1

	)

182 
	#EXIT_WARNING
 2

	)

	@cjpeg.c

26 
	~"cdj³g.h
"

27 
	~"jv”siÚ.h
"

29 #ifdeà
USE_CCOMMAND


30 #ifdeà
__MWERKS__


31 
	~<SIOUX.h
>

32 
	~<cÚsŞe.h
>

34 #ifdeà
THINK_C


35 
	~<cÚsŞe.h
>

42 
	#JMESSAGE
(
code
,
¡ršg
è¡ršg ,

	)

44 cÚ¡ * cÚ¡ 
	gcdj³g_mes§ge_bË
[] = {

45 
	~"cd”rÜ.h
"

46 
NULL


76 
boŞ—n
 
	gis_rga
;

79 
	$LOCAL
(
cj³g_sourû_±r
)

80 
	$£Ëù_fe_ty³
 (
j_com´ess_±r
 
cšfo
, 
FILE
 * 
šfe
)

82 
c
;

84 ià(
is_rga
) {

85 #ifdeà
TARGA_SUPPORTED


86  
	`jš™_»ad_rga
(
cšfo
);

88 
	`ERREXIT
(
cšfo
, 
JERR_TGA_NOTCOMP
);

92 ià((
c
 = 
	`g‘c
(
šfe
)è=ğ
EOF
)

93 
	`ERREXIT
(
cšfo
, 
JERR_INPUT_EMPTY
);

94 ià(
	`ung‘c
(
c
, 
šfe
è=ğ
EOF
)

95 
	`ERREXIT
(
cšfo
, 
JERR_UNGETC_FAILED
);

97 
c
) {

98 #ifdeà
BMP_SUPPORTED


100  
	`jš™_»ad_bmp
(
cšfo
);

102 #ifdeà
GIF_SUPPORTED


104  
	`jš™_»ad_gif
(
cšfo
);

106 #ifdeà
PPM_SUPPORTED


108  
	`jš™_»ad_µm
(
cšfo
);

110 #ifdeà
RLE_SUPPORTED


112  
	`jš™_»ad_¾e
(
cšfo
);

114 #ifdeà
TARGA_SUPPORTED


116  
	`jš™_»ad_rga
(
cšfo
);

119 
	`ERREXIT
(
cšfo
, 
JERR_UNKNOWN_FORMAT
);

123  
NULL
;

124 
	}
}

136 cÚ¡ * 
	g´ogÇme
;

137 * 
	goutf’ame
;

140 
	$LOCAL
()

141 
	$u§ge
 ()

144 
	`årštf
(
¡d”r
, "u§ge: % [sw™ches] ", 
´ogÇme
);

145 #ifdeà
TWO_FILE_COMMANDLINE


146 
	`årštf
(
¡d”r
, "inputfile outputfile\n");

148 
	`årštf
(
¡d”r
, "[inputfile]\n");

151 
	`årštf
(
¡d”r
, "Switches (names may be‡bbreviated):\n");

152 
	`årštf
(
¡d”r
, " -quality N Compression quality (0..100; 5-95 is useful„ange)\n");

153 
	`årštf
(
¡d”r
, " -grayscale Create monochrome JPEG file\n");

154 #ifdeà
ENTROPY_OPT_SUPPORTED


155 
	`årštf
(
¡d”r
, " -optimize Optimize Huffmanable (smaller file, but slow compression)\n");

157 #ifdeà
C_PROGRESSIVE_SUPPORTED


158 
	`årštf
(
¡d”r
, " -progressive Create…rogressive JPEG file\n");

160 #ifdeà
TARGA_SUPPORTED


161 
	`årštf
(
¡d”r
, " -targa Input file is Targa format (usually‚ot‚eeded)\n");

163 
	`årštf
(
¡d”r
, "Switches for‡dvanced users:\n");

164 #ifdeà
DCT_ISLOW_SUPPORTED


165 
	`årštf
(
¡d”r
, " -dct int Use integer DCT method%s\n",

166 (
JDCT_DEFAULT
 =ğ
JDCT_ISLOW
 ? " (default)" : ""));

168 #ifdeà
DCT_IFAST_SUPPORTED


169 
	`årštf
(
¡d”r
, " -dct fast Use fast integer DCT (less‡ccurate)%s\n",

170 (
JDCT_DEFAULT
 =ğ
JDCT_IFAST
 ? " (default)" : ""));

172 #ifdeà
DCT_FLOAT_SUPPORTED


173 
	`årštf
(
¡d”r
, " -dct float Use floating-point DCT method%s\n",

174 (
JDCT_DEFAULT
 =ğ
JDCT_FLOAT
 ? " (default)" : ""));

176 
	`årštf
(
¡d”r
, " -restart N Set„estart interval in„ows, or in blocks with B\n");

177 #ifdeà
INPUT_SMOOTHING_SUPPORTED


178 
	`årštf
(
¡d”r
, " -smooth N Smooth dithered input (N=1..100 is strength)\n");

180 
	`årštf
(
¡d”r
, " -maxmemory N Maximum memoryo use (in kbytes)\n");

181 
	`årštf
(
¡d”r
, " -outfile‚ame Specify‚ame for output file\n");

182 
	`årštf
(
¡d”r
, " -verbose or -debug Emit debug output\n");

183 
	`årštf
(
¡d”r
, "Switches for wizards:\n");

184 #ifdeà
C_ARITH_CODING_SUPPORTED


185 
	`årštf
(
¡d”r
, " -arithmetic Use‡rithmetic coding\n");

187 
	`årštf
(
¡d”r
, " -baseline Force baseline quantizationables\n");

188 
	`årštf
(
¡d”r
, " -qtables file Use quantizationables given in file\n");

189 
	`årštf
(
¡d”r
, " -qslots N[,...] Set component quantizationables\n");

190 
	`årštf
(
¡d”r
, " -sample HxV[,...] Set component sampling factors\n");

191 #ifdeà
C_MULTISCAN_FILES_SUPPORTED


192 
	`årštf
(
¡d”r
, " -scans file Create multi-scan JPEG…er script file\n");

194 
	`ex™
(
EXIT_FAILURE
);

195 
	}
}

198 
	$LOCAL
()

199 
	$·r£_sw™ches
 (
j_com´ess_±r
 
cšfo
, 
¬gc
, **
¬gv
,

200 
Ï¡_fe_¬g_£’
, 
boŞ—n
 
fÜ_»®
)

210 
¬gn
;

211 * 
¬g
;

212 
qu®™y
;

213 
q_sÿË_çùÜ
;

214 
boŞ—n
 
fÜû_ba£lše
;

215 
boŞ—n
 
sim¶e_´og»ssive
;

216 * 
qbËfe
 = 
NULL
;

217 * 
q¦Ù§rg
 = 
NULL
;

218 * 
§m¶—rg
 = 
NULL
;

219 * 
sÿn§rg
 = 
NULL
;

225 
qu®™y
 = 75;

226 
q_sÿË_çùÜ
 = 100;

227 
fÜû_ba£lše
 = 
FALSE
;

228 
sim¶e_´og»ssive
 = 
FALSE
;

229 
is_rga
 = 
FALSE
;

230 
outf’ame
 = 
NULL
;

231 
cšfo
->
”r
->
Œaû_Ëv–
 = 0;

235 
¬gn
 = 1;‡rgÀ< 
¬gc
;‡rgn++) {

236 
¬g
 = 
¬gv
[
¬gn
];

237 ià(*
¬g
 != '-') {

239 ià(
¬gn
 <ğ
Ï¡_fe_¬g_£’
) {

240 
outf’ame
 = 
NULL
;

245 
¬g
++;

247 ià(
	`keym©ch
(
¬g
, "arithmetic", 1)) {

249 #ifdeà
C_ARITH_CODING_SUPPORTED


250 
cšfo
->
¬™h_code
 = 
TRUE
;

252 
	`årštf
(
¡d”r
, "%s: sorry,‡rithmetic coding‚ot supported\n",

253 
´ogÇme
);

254 
	`ex™
(
EXIT_FAILURE
);

257 } ià(
	`keym©ch
(
¬g
, "baseline", 1)) {

259 
fÜû_ba£lše
 = 
TRUE
;

261 } ià(
	`keym©ch
(
¬g
, "dct", 2)) {

263 ià(++
¬gn
 >ğ
¬gc
)

264 
	`u§ge
();

265 ià(
	`keym©ch
(
¬gv
[
¬gn
], "int", 1)) {

266 
cšfo
->
dù_m‘hod
 = 
JDCT_ISLOW
;

267 } ià(
	`keym©ch
(
¬gv
[
¬gn
], "fast", 2)) {

268 
cšfo
->
dù_m‘hod
 = 
JDCT_IFAST
;

269 } ià(
	`keym©ch
(
¬gv
[
¬gn
], "float", 2)) {

270 
cšfo
->
dù_m‘hod
 = 
JDCT_FLOAT
;

272 
	`u§ge
();

274 } ià(
	`keym©ch
(
¬g
, "debug", 1) || keymatch(arg, "verbose", 1)) {

277 
boŞ—n
 
´š‹d_v”siÚ
 = 
FALSE
;

279 ià(! 
´š‹d_v”siÚ
) {

280 
	`årštf
(
¡d”r
, "Independent JPEG Group's CJPEG, version %s\n%s\n",

281 
JVERSION
, 
JCOPYRIGHT
);

282 
´š‹d_v”siÚ
 = 
TRUE
;

284 
cšfo
->
”r
->
Œaû_Ëv–
++;

286 } ià(
	`keym©ch
(
¬g
, "grayscale", 2) || keymatch(arg, "greyscale",2)) {

288 
	`j³g_£t_cŞÜ¥aû
(
cšfo
, 
JCS_GRAYSCALE
);

290 } ià(
	`keym©ch
(
¬g
, "maxmemory", 3)) {

292 
lv®
;

293 
ch
 = 'x';

295 ià(++
¬gn
 >ğ
¬gc
)

296 
	`u§ge
();

297 ià(
	`ssÿnf
(
¬gv
[
¬gn
], "%ld%c", &
lv®
, &
ch
) < 1)

298 
	`u§ge
();

299 ià(
ch
 == 'm' || ch == 'M')

300 
lv®
 *= 1000L;

301 
cšfo
->
mem
->
max_memÜy_to_u£
 = 
lv®
 * 1000L;

303 } ià(
	`keym©ch
(
¬g
, "optimize", 1) || keymatch(arg, "optimise", 1)) {

305 #ifdeà
ENTROPY_OPT_SUPPORTED


306 
cšfo
->
İtimize_codšg
 = 
TRUE
;

308 
	`årštf
(
¡d”r
, "%s: sorry,ƒntropy optimization was‚ot compiled\n",

309 
´ogÇme
);

310 
	`ex™
(
EXIT_FAILURE
);

313 } ià(
	`keym©ch
(
¬g
, "outfile", 4)) {

315 ià(++
¬gn
 >ğ
¬gc
)

316 
	`u§ge
();

317 
outf’ame
 = 
¬gv
[
¬gn
];

319 } ià(
	`keym©ch
(
¬g
, "progressive", 1)) {

321 #ifdeà
C_PROGRESSIVE_SUPPORTED


322 
sim¶e_´og»ssive
 = 
TRUE
;

325 
	`årštf
(
¡d”r
, "%s: sorry,…rogressive output was‚ot compiled\n",

326 
´ogÇme
);

327 
	`ex™
(
EXIT_FAILURE
);

330 } ià(
	`keym©ch
(
¬g
, "quality", 1)) {

332 ià(++
¬gn
 >ğ
¬gc
)

333 
	`u§ge
();

334 ià(
	`ssÿnf
(
¬gv
[
¬gn
], "%d", &
qu®™y
) != 1)

335 
	`u§ge
();

337 
q_sÿË_çùÜ
 = 
	`j³g_qu®™y_sÿlšg
(
qu®™y
);

339 } ià(
	`keym©ch
(
¬g
, "qslots", 2)) {

341 ià(++
¬gn
 >ğ
¬gc
)

342 
	`u§ge
();

343 
q¦Ù§rg
 = 
¬gv
[
¬gn
];

349 } ià(
	`keym©ch
(
¬g
, "qtables", 2)) {

351 ià(++
¬gn
 >ğ
¬gc
)

352 
	`u§ge
();

353 
qbËfe
 = 
¬gv
[
¬gn
];

356 } ià(
	`keym©ch
(
¬g
, "restart", 1)) {

358 
lv®
;

359 
ch
 = 'x';

361 ià(++
¬gn
 >ğ
¬gc
)

362 
	`u§ge
();

363 ià(
	`ssÿnf
(
¬gv
[
¬gn
], "%ld%c", &
lv®
, &
ch
) < 1)

364 
	`u§ge
();

365 ià(
lv®
 < 0 ||†val > 65535L)

366 
	`u§ge
();

367 ià(
ch
 == 'b' || ch == 'B') {

368 
cšfo
->
»¡¬t_š‹rv®
 = (è
lv®
;

369 
cšfo
->
»¡¬t_š_rows
 = 0;

371 
cšfo
->
»¡¬t_š_rows
 = (è
lv®
;

375 } ià(
	`keym©ch
(
¬g
, "sample", 2)) {

377 ià(++
¬gn
 >ğ
¬gc
)

378 
	`u§ge
();

379 
§m¶—rg
 = 
¬gv
[
¬gn
];

385 } ià(
	`keym©ch
(
¬g
, "scans", 2)) {

387 #ifdeà
C_MULTISCAN_FILES_SUPPORTED


388 ià(++
¬gn
 >ğ
¬gc
)

389 
	`u§ge
();

390 
sÿn§rg
 = 
¬gv
[
¬gn
];

393 
	`årštf
(
¡d”r
, "%s: sorry, multi-scan output was‚ot compiled\n",

394 
´ogÇme
);

395 
	`ex™
(
EXIT_FAILURE
);

398 } ià(
	`keym©ch
(
¬g
, "smooth", 2)) {

400 
v®
;

402 ià(++
¬gn
 >ğ
¬gc
)

403 
	`u§ge
();

404 ià(
	`ssÿnf
(
¬gv
[
¬gn
], "%d", &
v®
) != 1)

405 
	`u§ge
();

406 ià(
v®
 < 0 || val > 100)

407 
	`u§ge
();

408 
cšfo
->
smoÙhšg_çùÜ
 = 
v®
;

410 } ià(
	`keym©ch
(
¬g
, "targa", 1)) {

412 
is_rga
 = 
TRUE
;

415 
	`u§ge
();

421 ià(
fÜ_»®
) {

425 
	`j³g_£t_qu®™y
(
cšfo
, 
qu®™y
, 
fÜû_ba£lše
);

427 ià(
qbËfe
 !ğ
NULL
)

428 ià(! 
	`»ad_quªt_bËs
(
cšfo
, 
qbËfe
,

429 
q_sÿË_çùÜ
, 
fÜû_ba£lše
))

430 
	`u§ge
();

432 ià(
q¦Ù§rg
 !ğ
NULL
)

433 ià(! 
	`£t_quªt_¦Ùs
(
cšfo
, 
q¦Ù§rg
))

434 
	`u§ge
();

436 ià(
§m¶—rg
 !ğ
NULL
)

437 ià(! 
	`£t_§m¶e_çùÜs
(
cšfo
, 
§m¶—rg
))

438 
	`u§ge
();

440 #ifdeà
C_PROGRESSIVE_SUPPORTED


441 ià(
sim¶e_´og»ssive
)

442 
	`j³g_sim¶e_´og»ssiÚ
(
cšfo
);

445 #ifdeà
C_MULTISCAN_FILES_SUPPORTED


446 ià(
sÿn§rg
 !ğ
NULL
)

447 ià(! 
	`»ad_sÿn_süt
(
cšfo
, 
sÿn§rg
))

448 
	`u§ge
();

452  
¬gn
;

453 
	}
}

461 
	$maš
 (
¬gc
, **
¬gv
)

463 
j³g_com´ess_¡ruù
 
cšfo
;

464 
j³g_”rÜ_mgr
 
j”r
;

465 #ifdeà
PROGRESS_REPORT


466 
cdj³g_´og»ss_mgr
 
´og»ss
;

468 
fe_šdex
;

469 
cj³g_sourû_±r
 
¤c_mgr
;

470 
FILE
 * 
šput_fe
;

471 
FILE
 * 
ouut_fe
;

472 
JDIMENSION
 
num_sÿÆšes
;

475 #ifdeà
USE_CCOMMAND


476 
¬gc
 = 
	`ccommªd
(&
¬gv
);

479 
´ogÇme
 = 
¬gv
[0];

480 ià(
´ogÇme
 =ğ
NULL
 ||…rogname[0] == 0)

481 
´ogÇme
 = "cjpeg";

484 
cšfo
.
”r
 = 
	`j³g_¡d_”rÜ
(&
j”r
);

485 
	`j³g_ü—‹_com´ess
(&
cšfo
);

487 
j”r
.
addÚ_mes§ge_bË
 = 
cdj³g_mes§ge_bË
;

488 
j”r
.
fœ¡_addÚ_mes§ge
 = 
JMSG_FIRSTADDONCODE
;

489 
j”r
.
Ï¡_addÚ_mes§ge
 = 
JMSG_LASTADDONCODE
;

492 #ifdeà
NEED_SIGNAL_CATCHER


493 
	`’abË_sigÇl_ÿtch”
((
j_commÚ_±r
è&
cšfo
);

502 
cšfo
.
š_cŞÜ_¥aû
 = 
JCS_RGB
;

503 
	`j³g_£t_deçuÉs
(&
cšfo
);

511 
fe_šdex
 = 
	`·r£_sw™ches
(&
cšfo
, 
¬gc
, 
¬gv
, 0, 
FALSE
);

513 #ifdeà
TWO_FILE_COMMANDLINE


515 ià(
outf’ame
 =ğ
NULL
) {

516 ià(
fe_šdex
 !ğ
¬gc
-2) {

517 
	`årštf
(
¡d”r
, "%s: must‚ame one input‡nd one output file\n",

518 
´ogÇme
);

519 
	`u§ge
();

521 
outf’ame
 = 
¬gv
[
fe_šdex
+1];

523 ià(
fe_šdex
 !ğ
¬gc
-1) {

524 
	`årštf
(
¡d”r
, "%s: must‚ame one input‡nd one output file\n",

525 
´ogÇme
);

526 
	`u§ge
();

531 ià(
fe_šdex
 < 
¬gc
-1) {

532 
	`årštf
(
¡d”r
, "%s: oÆy oÃ iÅuˆfe\n", 
´ogÇme
);

533 
	`u§ge
();

538 ià(
fe_šdex
 < 
¬gc
) {

539 ià((
šput_fe
 = 
	`fİ’
(
¬gv
[
fe_šdex
], 
READ_BINARY
)è=ğ
NULL
) {

540 
	`årštf
(
¡d”r
, "%s: cª'ˆİ’ %s\n", 
´ogÇme
, 
¬gv
[
fe_šdex
]);

541 
	`ex™
(
EXIT_FAILURE
);

545 
šput_fe
 = 
	`»ad_¡dš
();

549 ià(
outf’ame
 !ğ
NULL
) {

550 ià((
ouut_fe
 = 
	`fİ’
(
outf’ame
, 
WRITE_BINARY
)è=ğ
NULL
) {

551 
	`årštf
(
¡d”r
, "%s: cª'ˆİ’ %s\n", 
´ogÇme
, 
outf’ame
);

552 
	`ex™
(
EXIT_FAILURE
);

556 
ouut_fe
 = 
	`wr™e_¡dout
();

559 #ifdeà
PROGRESS_REPORT


560 
	`¡¬t_´og»ss_mÚ™Ü
((
j_commÚ_±r
è&
cšfo
, &
´og»ss
);

564 
¤c_mgr
 = 
	`£Ëù_fe_ty³
(&
cšfo
, 
šput_fe
);

565 
¤c_mgr
->
šput_fe
 = input_file;

568 (*
¤c_mgr
->
¡¬t_šput
è(&
cšfo
, src_mgr);

571 
	`j³g_deçuÉ_cŞÜ¥aû
(&
cšfo
);

574 
fe_šdex
 = 
	`·r£_sw™ches
(&
cšfo
, 
¬gc
, 
¬gv
, 0, 
TRUE
);

577 
	`j³g_¡dio_de¡
(&
cšfo
, 
ouut_fe
);

580 
	`j³g_¡¬t_com´ess
(&
cšfo
, 
TRUE
);

583 
cšfo
.
Ãxt_sÿÆše
 < cšfo.
image_height
) {

584 
num_sÿÆšes
 = (*
¤c_mgr
->
g‘_pix–_rows
è(&
cšfo
, src_mgr);

585 (è
	`j³g_wr™e_sÿÆšes
(&
cšfo
, 
¤c_mgr
->
bufãr
, 
num_sÿÆšes
);

589 (*
¤c_mgr
->
fšish_šput
è(&
cšfo
, src_mgr);

590 
	`j³g_fšish_com´ess
(&
cšfo
);

591 
	`j³g_de¡roy_com´ess
(&
cšfo
);

594 ià(
šput_fe
 !ğ
¡dš
)

595 
	`fşo£
(
šput_fe
);

596 ià(
ouut_fe
 !ğ
¡dout
)

597 
	`fşo£
(
ouut_fe
);

599 #ifdeà
PROGRESS_REPORT


600 
	`’d_´og»ss_mÚ™Ü
((
j_commÚ_±r
è&
cšfo
);

604 
	`ex™
(
j”r
.
num_w¬nšgs
 ? 
EXIT_WARNING
 : 
EXIT_SUCCESS
);

606 
	}
}

	@ckconfig.c

35 
	#HAVE_STDDEF_H


	)

36 #ifdeà
HAVE_STDDEF_H


37 
	~<¡ddef.h
>

40 
	#HAVE_STDLIB_H


	)

41 #ifdeà
HAVE_STDLIB_H


42 
	~<¡dlib.h
>

45 
	~<¡dio.h
>

53 #undeà
NEED_BSD_STRINGS


55 #ifdeà
NEED_BSD_STRINGS


56 
	~<¡ršgs.h
>

58 
	~<¡ršg.h
>

66 #undeà
NEED_SYS_TYPES_H


67 #ifdeà
NEED_SYS_TYPES_H


68 
	~<sys/ty³s.h
>

84 #undeà
NEED_SPECIAL_INCLUDE


86 #ifdeà
NEED_SPECIAL_INCLUDE


87 
	~<somešşudefe.h
>

90 
size_t
 
	tmy_size_t
;

100 
	#HAVE_PROTOTYPES


	)

102 #ifdeà
HAVE_PROTOTYPES


103 
‹¡funùiÚ
 (
¬g1
, * 
¬g2
);

105 
	sm‘hods_¡ruù
 {

106 (*
	m”rÜ_ex™
è(*
	mmsg‹xt
);

107 (*
	mŒaû_mes§ge
è(*
	mmsg‹xt
);

108 (*
	mªÙh”_m‘hod
) ();

111 
	$‹¡funùiÚ
 (
¬g1
, * 
¬g2
)

113  
¬g2
[
¬g1
];

114 
	}
}

116 
	$‹¡2funùiÚ
 ()

119 
	}
}

128 
	#HAVE_UNSIGNED_CHAR


	)

130 #ifdeà
HAVE_UNSIGNED_CHAR


131 
	gun_ch¬
;

140 
	#HAVE_UNSIGNED_SHORT


	)

142 #ifdeà
HAVE_UNSIGNED_SHORT


143 
	gun_shÜt
;

151 
	#HAVE_VOID


	)

153 #ifdeà
HAVE_VOID


155 * 
	tvoid_±r
;

156 #ifdeà
HAVE_PROTOTYPES


157 (*
	tvoid_func
è(
	ta
, 
	tb
);

159 (*
	tvoid_func
) ();

162 #ifdeà
HAVE_PROTOTYPES


163 
	$‹¡3funùiÚ
 (
void_±r
 
¬g1
, 
void_func
 
¬g2
)

165 
	$‹¡3funùiÚ
 (
¬g1
, 
¬g2
)

166 
void_±r
 
¬g1
;

167 
void_func
 
¬g2
;

170 * 
loıŒ
 = (*è
¬g1
;

171 
¬g1
 = (*è
loıŒ
;

172 (*
¬g2
) (1, 2);

173 
	}
}

181 
	#HAVE_CONST


	)

183 #ifdeà
HAVE_CONST


184 cÚ¡ 
	gÿ¼ay
[3] = {1, 2, 3};

186 #ifdeà
HAVE_PROTOTYPES


187 
	$‹¡4funùiÚ
 (cÚ¡ 
¬g1
)

189 
	$‹¡4funùiÚ
 (
¬g1
)

190 cÚ¡ 
¬g1
;

193  
ÿ¼ay
[
¬g1
];

194 
	}
}

202 #undeà
INCOMPLETE_TYPES_BROKEN


204 #iâdeà
INCOMPLETE_TYPES_BROKEN


205 
undefšed_¡ruùu»
 * 
	tundef_¡ruù_±r
;

213 #undeà
NEED_SHORT_EXTERNAL_NAMES


215 #iâdeà
NEED_SHORT_EXTERNAL_NAMES


217 
	$possibly_du¶iÿ‹_funùiÚ
 ()

220 
	}
}

222 
	$possibly_du¶i_funùiÚ
 ()

225 
	}
}

242 #ifdeà
HAVE_PROTOTYPES


243 
	$is_ch¬_sigÃd
 (
¬g
)

245 
	$is_ch¬_sigÃd
 (
¬g
)

246 
¬g
;

249 ià(
¬g
 == 189) {

252 ià(
¬g
 != -67) {

253 
	`´štf
("Hmm, it seems 'char' is‚otƒight bits wide on your machine.\n");

254 
	`´štf
("I fearhe JPEG software will‚ot work‡t‡ll.\n\n");

257 
	}
}

260 #ifdeà
HAVE_PROTOTYPES


261 
	$is_shiášg_sigÃd
 (
¬g
)

263 
	$is_shiášg_sigÃd
 (
¬g
)

264 
¬g
;

268 
»s
 = 
¬g
 >> 4;

270 ià(
»s
 == -0x7F7E80CL) {

275 
»s
 |= (~0L) << (32-4);

276 ià(
»s
 == -0x7F7E80CL) {

279 
	`´štf
("Right shift isn't‡cting‡s Iƒxpect ito.\n");

280 
	`´štf
("I fearhe JPEG software will‚ot work‡t‡ll.\n\n");

282 
	}
}

285 #ifdeà
HAVE_PROTOTYPES


286 
	$maš
 (
¬gc
, ** 
¬gv
)

288 
	$maš
 (
¬gc
, 
¬gv
)

289 
¬gc
;

290 ** 
¬gv
;

293 
sigÃd_ch¬_check
 = () (-67);

294 
FILE
 *
outfe
;

297 ià((
outfe
 = 
	`fİ’
("jcÚfig.h", "w")è=ğ
NULL
) {

298 
	`´štf
("Failedo write jconfig.h\n");

303 
	`årštf
(
outfe
, "/* jconfig.h --- generated by ckconfig.c */\n");

304 
	`årštf
(
outfe
, "/* see jconfig.doc forƒxplanations */\n\n");

305 #ifdeà
HAVE_PROTOTYPES


306 
	`årštf
(
outfe
, "#define HAVE_PROTOTYPES\n");

308 
	`årštf
(
outfe
, "#undef HAVE_PROTOTYPES\n");

310 #ifdeà
HAVE_UNSIGNED_CHAR


311 
	`årštf
(
outfe
, "#define HAVE_UNSIGNED_CHAR\n");

313 
	`årštf
(
outfe
, "#undef HAVE_UNSIGNED_CHAR\n");

315 #ifdeà
HAVE_UNSIGNED_SHORT


316 
	`årštf
(
outfe
, "#define HAVE_UNSIGNED_SHORT\n");

318 
	`årštf
(
outfe
, "#undef HAVE_UNSIGNED_SHORT\n");

320 #ifdeà
HAVE_VOID


321 
	`årštf
(
outfe
, "/* #define void char */\n");

323 
	`årštf
(
outfe
, "#define void char\n");

325 #ifdeà
HAVE_CONST


326 
	`årštf
(
outfe
, "/* #define const */\n");

328 
	`årštf
(
outfe
, "#define const\n");

330 ià(
	`is_ch¬_sigÃd
((è
sigÃd_ch¬_check
))

331 
	`årštf
(
outfe
, "#undef CHAR_IS_UNSIGNED\n");

333 
	`årštf
(
outfe
, "#define CHAR_IS_UNSIGNED\n");

334 #ifdeà
HAVE_STDDEF_H


335 
	`årštf
(
outfe
, "#define HAVE_STDDEF_H\n");

337 
	`årštf
(
outfe
, "#undef HAVE_STDDEF_H\n");

339 #ifdeà
HAVE_STDLIB_H


340 
	`årštf
(
outfe
, "#define HAVE_STDLIB_H\n");

342 
	`årštf
(
outfe
, "#undef HAVE_STDLIB_H\n");

344 #ifdeà
NEED_BSD_STRINGS


345 
	`årštf
(
outfe
, "#define NEED_BSD_STRINGS\n");

347 
	`årštf
(
outfe
, "#undef NEED_BSD_STRINGS\n");

349 #ifdeà
NEED_SYS_TYPES_H


350 
	`årštf
(
outfe
, "#define NEED_SYS_TYPES_H\n");

352 
	`årštf
(
outfe
, "#undef NEED_SYS_TYPES_H\n");

354 
	`årštf
(
outfe
, "#undef NEED_FAR_POINTERS\n");

355 #ifdeà
NEED_SHORT_EXTERNAL_NAMES


356 
	`årštf
(
outfe
, "#define NEED_SHORT_EXTERNAL_NAMES\n");

358 
	`årštf
(
outfe
, "#undef NEED_SHORT_EXTERNAL_NAMES\n");

360 #ifdeà
INCOMPLETE_TYPES_BROKEN


361 
	`årštf
(
outfe
, "#define INCOMPLETE_TYPES_BROKEN\n");

363 
	`årštf
(
outfe
, "#undef INCOMPLETE_TYPES_BROKEN\n");

365 
	`årštf
(
outfe
, "\n#ifdef JPEG_INTERNALS\n\n");

366 ià(
	`is_shiášg_sigÃd
(-0x7F7E80B1L))

367 
	`årštf
(
outfe
, "#undef RIGHT_SHIFT_IS_UNSIGNED\n");

369 
	`årštf
(
outfe
, "#define RIGHT_SHIFT_IS_UNSIGNED\n");

370 
	`årštf
(
outfe
, "\n#endif /* JPEG_INTERNALS */\n");

371 
	`årštf
(
outfe
, "\n#ifdef JPEG_CJPEG_DJPEG\n\n");

372 
	`årštf
(
outfe
, "#define BMP_SUPPORTED /* BMP image file format */\n");

373 
	`årštf
(
outfe
, "#define GIF_SUPPORTED /* GIF image file format */\n");

374 
	`årštf
(
outfe
, "#define PPM_SUPPORTED /* PBMPLUS PPM/PGM image file format */\n");

375 
	`årštf
(
outfe
, "#undef RLE_SUPPORTED /* Utah RLE image file format */\n");

376 
	`årštf
(
outfe
, "#define TARGA_SUPPORTED /* Targa image file format */\n\n");

377 
	`årštf
(
outfe
, "#undef TWO_FILE_COMMANDLINE /* You may‚eedhis on‚on-Unix systems */\n");

378 
	`årštf
(
outfe
, "#undef NEED_SIGNAL_CATCHER /* Definehis if you use jmemname.c */\n");

379 
	`årštf
(
outfe
, "#undef DONT_USE_B_MODE\n");

380 
	`årštf
(
outfe
, "/* #define PROGRESS_REPORT */ /* optional */\n");

381 
	`årštf
(
outfe
, "\n#endif /* JPEG_CJPEG_DJPEG */\n");

384 
	`fşo£
(
outfe
);

387 
	`´štf
("Configuration check for Independent JPEG Group's software done.\n");

388 
	`´štf
("\nI have writtenhe jconfig.h file for you.\n\n");

389 #ifdeà
HAVE_PROTOTYPES


390 
	`´štf
("You should use makefile.ansi‡she starting…oint for your Makefile.\n");

392 
	`´štf
("You should use makefile.unix‡she starting…oint for your Makefile.\n");

395 #ifdeà
NEED_SPECIAL_INCLUDE


396 
	`´štf
("\nYou'll‚eedo change jconfig.ho includehe system include file\n");

397 
	`´štf
("that you foundype size_t in, or‡dd‡ direct definition ofype\n");

398 
	`´štf
("size_t ifhat's what you used. Just‡dd itoheƒnd.\n");

402 
	}
}

	@djpeg.c

26 
	~"cdj³g.h
"

27 
	~"jv”siÚ.h
"

29 
	~<ùy³.h
>

31 #ifdeà
USE_CCOMMAND


32 #ifdeà
__MWERKS__


33 
	~<SIOUX.h
>

34 
	~<cÚsŞe.h
>

36 #ifdeà
THINK_C


37 
	~<cÚsŞe.h
>

44 
	#JMESSAGE
(
code
,
¡ršg
è¡ršg ,

	)

46 cÚ¡ * cÚ¡ 
	gcdj³g_mes§ge_bË
[] = {

47 
	~"cd”rÜ.h
"

48 
NULL


60 
	mFMT_BMP
,

61 
	mFMT_GIF
,

62 
	mFMT_OS2
,

63 
	mFMT_PPM
,

64 
	mFMT_RLE
,

65 
	mFMT_TARGA
,

66 
	mFMT_TIFF


67 } 
	tIMAGE_FORMATS
;

69 #iâdeà
DEFAULT_FMT


70 
	#DEFAULT_FMT
 
FMT_PPM


	)

73 
IMAGE_FORMATS
 
	g»que¡ed_fmt
;

85 cÚ¡ * 
	g´ogÇme
;

86 * 
	goutf’ame
;

89 
	$LOCAL
()

90 
	$u§ge
 ()

93 
	`årštf
(
¡d”r
, "u§ge: % [sw™ches] ", 
´ogÇme
);

94 #ifdeà
TWO_FILE_COMMANDLINE


95 
	`årštf
(
¡d”r
, "inputfile outputfile\n");

97 
	`årštf
(
¡d”r
, "[inputfile]\n");

100 
	`årštf
(
¡d”r
, "Switches (names may be‡bbreviated):\n");

101 
	`årštf
(
¡d”r
, " -colors N Reduce imageo‚o morehan N colors\n");

102 
	`årštf
(
¡d”r
, " -fast Fast,†ow-quality…rocessing\n");

103 
	`årštf
(
¡d”r
, " -grayscale Force grayscale output\n");

104 #ifdeà
IDCT_SCALING_SUPPORTED


105 
	`årštf
(
¡d”r
, " -scale M/N Scale output image by fraction M/N,ƒg, 1/8\n");

107 #ifdeà
BMP_SUPPORTED


108 
	`årštf
(
¡d”r
, " -bmp Select BMP output format (Windows style)%s\n",

109 (
DEFAULT_FMT
 =ğ
FMT_BMP
 ? " (default)" : ""));

111 #ifdeà
GIF_SUPPORTED


112 
	`årštf
(
¡d”r
, " -gif Select GIF output format%s\n",

113 (
DEFAULT_FMT
 =ğ
FMT_GIF
 ? " (default)" : ""));

115 #ifdeà
BMP_SUPPORTED


116 
	`årštf
(
¡d”r
, " -os2 Select BMP output format (OS/2 style)%s\n",

117 (
DEFAULT_FMT
 =ğ
FMT_OS2
 ? " (default)" : ""));

119 #ifdeà
PPM_SUPPORTED


120 
	`årštf
(
¡d”r
, " -pnm Select PBMPLUS (PPM/PGM) output format%s\n",

121 (
DEFAULT_FMT
 =ğ
FMT_PPM
 ? " (default)" : ""));

123 #ifdeà
RLE_SUPPORTED


124 
	`årštf
(
¡d”r
, " -rle Select Utah RLE output format%s\n",

125 (
DEFAULT_FMT
 =ğ
FMT_RLE
 ? " (default)" : ""));

127 #ifdeà
TARGA_SUPPORTED


128 
	`årštf
(
¡d”r
, " -targa Select Targa output format%s\n",

129 (
DEFAULT_FMT
 =ğ
FMT_TARGA
 ? " (default)" : ""));

131 
	`årštf
(
¡d”r
, "Switches for‡dvanced users:\n");

132 #ifdeà
DCT_ISLOW_SUPPORTED


133 
	`årštf
(
¡d”r
, " -dct int Use integer DCT method%s\n",

134 (
JDCT_DEFAULT
 =ğ
JDCT_ISLOW
 ? " (default)" : ""));

136 #ifdeà
DCT_IFAST_SUPPORTED


137 
	`årštf
(
¡d”r
, " -dct fast Use fast integer DCT (less‡ccurate)%s\n",

138 (
JDCT_DEFAULT
 =ğ
JDCT_IFAST
 ? " (default)" : ""));

140 #ifdeà
DCT_FLOAT_SUPPORTED


141 
	`årštf
(
¡d”r
, " -dct float Use floating-point DCT method%s\n",

142 (
JDCT_DEFAULT
 =ğ
JDCT_FLOAT
 ? " (default)" : ""));

144 
	`årštf
(
¡d”r
, " -dither fs Use F-S dithering (default)\n");

145 
	`årštf
(
¡d”r
, " -dither‚one Don't use dithering in quantization\n");

146 
	`årštf
(
¡d”r
, " -dither ordered Use ordered dither (medium speed, quality)\n");

147 #ifdeà
QUANT_2PASS_SUPPORTED


148 
	`årštf
(
¡d”r
, " -map FILE Mapo colors used in‚amed image file\n");

150 
	`årštf
(
¡d”r
, " -nosmooth Don't use high-quality upsampling\n");

151 #ifdeà
QUANT_1PASS_SUPPORTED


152 
	`årštf
(
¡d”r
, " -onepass Use 1-pass quantization (fast,†ow quality)\n");

154 
	`årštf
(
¡d”r
, " -maxmemory N Maximum memoryo use (in kbytes)\n");

155 
	`årštf
(
¡d”r
, " -outfile‚ame Specify‚ame for output file\n");

156 
	`årštf
(
¡d”r
, " -verbose or -debug Emit debug output\n");

157 
	`ex™
(
EXIT_FAILURE
);

158 
	}
}

161 
	$LOCAL
()

162 
	$·r£_sw™ches
 (
j_decom´ess_±r
 
cšfo
, 
¬gc
, **
¬gv
,

163 
Ï¡_fe_¬g_£’
, 
boŞ—n
 
fÜ_»®
)

173 
¬gn
;

174 * 
¬g
;

177 
»que¡ed_fmt
 = 
DEFAULT_FMT
;

178 
outf’ame
 = 
NULL
;

179 
cšfo
->
”r
->
Œaû_Ëv–
 = 0;

183 
¬gn
 = 1;‡rgÀ< 
¬gc
;‡rgn++) {

184 
¬g
 = 
¬gv
[
¬gn
];

185 ià(*
¬g
 != '-') {

187 ià(
¬gn
 <ğ
Ï¡_fe_¬g_£’
) {

188 
outf’ame
 = 
NULL
;

193 
¬g
++;

195 ià(
	`keym©ch
(
¬g
, "bmp", 1)) {

197 
»que¡ed_fmt
 = 
FMT_BMP
;

199 } ià(
	`keym©ch
(
¬g
, "colors", 1) || keymatch(arg, "colours", 1) ||

200 
	`keym©ch
(
¬g
, "quantize", 1) || keymatch(arg, "quantise", 1)) {

202 
v®
;

204 ià(++
¬gn
 >ğ
¬gc
)

205 
	`u§ge
();

206 ià(
	`ssÿnf
(
¬gv
[
¬gn
], "%d", &
v®
) != 1)

207 
	`u§ge
();

208 
cšfo
->
desœed_numb”_of_cŞÜs
 = 
v®
;

209 
cšfo
->
quªtize_cŞÜs
 = 
TRUE
;

211 } ià(
	`keym©ch
(
¬g
, "dct", 2)) {

213 ià(++
¬gn
 >ğ
¬gc
)

214 
	`u§ge
();

215 ià(
	`keym©ch
(
¬gv
[
¬gn
], "int", 1)) {

216 
cšfo
->
dù_m‘hod
 = 
JDCT_ISLOW
;

217 } ià(
	`keym©ch
(
¬gv
[
¬gn
], "fast", 2)) {

218 
cšfo
->
dù_m‘hod
 = 
JDCT_IFAST
;

219 } ià(
	`keym©ch
(
¬gv
[
¬gn
], "float", 2)) {

220 
cšfo
->
dù_m‘hod
 = 
JDCT_FLOAT
;

222 
	`u§ge
();

224 } ià(
	`keym©ch
(
¬g
, "dither", 2)) {

226 ià(++
¬gn
 >ğ
¬gc
)

227 
	`u§ge
();

228 ià(
	`keym©ch
(
¬gv
[
¬gn
], "fs", 2)) {

229 
cšfo
->
d™h”_mode
 = 
JDITHER_FS
;

230 } ià(
	`keym©ch
(
¬gv
[
¬gn
], "none", 2)) {

231 
cšfo
->
d™h”_mode
 = 
JDITHER_NONE
;

232 } ià(
	`keym©ch
(
¬gv
[
¬gn
], "ordered", 2)) {

233 
cšfo
->
d™h”_mode
 = 
JDITHER_ORDERED
;

235 
	`u§ge
();

237 } ià(
	`keym©ch
(
¬g
, "debug", 1) || keymatch(arg, "verbose", 1)) {

240 
boŞ—n
 
´š‹d_v”siÚ
 = 
FALSE
;

242 ià(! 
´š‹d_v”siÚ
) {

243 
	`årštf
(
¡d”r
, "Independent JPEG Group's DJPEG, version %s\n%s\n",

244 
JVERSION
, 
JCOPYRIGHT
);

245 
´š‹d_v”siÚ
 = 
TRUE
;

247 
cšfo
->
”r
->
Œaû_Ëv–
++;

249 } ià(
	`keym©ch
(
¬g
, "fast", 1)) {

251 
cšfo
->
two_·ss_quªtize
 = 
FALSE
;

252 
cšfo
->
d™h”_mode
 = 
JDITHER_ORDERED
;

253 ià(! 
cšfo
->
quªtize_cŞÜs
)

254 
cšfo
->
desœed_numb”_of_cŞÜs
 = 216;

255 
cšfo
->
dù_m‘hod
 = 
JDCT_FASTEST
;

256 
cšfo
->
do_çncy_up§m¶šg
 = 
FALSE
;

258 } ià(
	`keym©ch
(
¬g
, "gif", 1)) {

260 
»que¡ed_fmt
 = 
FMT_GIF
;

262 } ià(
	`keym©ch
(
¬g
, "grayscale", 2) || keymatch(arg, "greyscale",2)) {

264 
cšfo
->
out_cŞÜ_¥aû
 = 
JCS_GRAYSCALE
;

266 } ià(
	`keym©ch
(
¬g
, "map", 3)) {

268 ià(++
¬gn
 >ğ
¬gc
)

269 
	`u§ge
();

270 ià(
fÜ_»®
) {

271 #ifdeà
QUANT_2PASS_SUPPORTED


272 
FILE
 * 
m­fe
;

274 ià((
m­fe
 = 
	`fİ’
(
¬gv
[
¬gn
], 
READ_BINARY
)è=ğ
NULL
) {

275 
	`årštf
(
¡d”r
, "%s: cª'ˆİ’ %s\n", 
´ogÇme
, 
¬gv
[
¬gn
]);

276 
	`ex™
(
EXIT_FAILURE
);

278 
	`»ad_cŞÜ_m­
(
cšfo
, 
m­fe
);

279 
	`fşo£
(
m­fe
);

280 
cšfo
->
quªtize_cŞÜs
 = 
TRUE
;

282 
	`ERREXIT
(
cšfo
, 
JERR_NOT_COMPILED
);

286 } ià(
	`keym©ch
(
¬g
, "maxmemory", 3)) {

288 
lv®
;

289 
ch
 = 'x';

291 ià(++
¬gn
 >ğ
¬gc
)

292 
	`u§ge
();

293 ià(
	`ssÿnf
(
¬gv
[
¬gn
], "%ld%c", &
lv®
, &
ch
) < 1)

294 
	`u§ge
();

295 ià(
ch
 == 'm' || ch == 'M')

296 
lv®
 *= 1000L;

297 
cšfo
->
mem
->
max_memÜy_to_u£
 = 
lv®
 * 1000L;

299 } ià(
	`keym©ch
(
¬g
, "nosmooth", 3)) {

301 
cšfo
->
do_çncy_up§m¶šg
 = 
FALSE
;

303 } ià(
	`keym©ch
(
¬g
, "onepass", 3)) {

305 
cšfo
->
two_·ss_quªtize
 = 
FALSE
;

307 } ià(
	`keym©ch
(
¬g
, "os2", 3)) {

309 
»que¡ed_fmt
 = 
FMT_OS2
;

311 } ià(
	`keym©ch
(
¬g
, "outfile", 4)) {

313 ià(++
¬gn
 >ğ
¬gc
)

314 
	`u§ge
();

315 
outf’ame
 = 
¬gv
[
¬gn
];

317 } ià(
	`keym©ch
(
¬g
, "pnm", 1) || keymatch(arg, "ppm", 1)) {

319 
»que¡ed_fmt
 = 
FMT_PPM
;

321 } ià(
	`keym©ch
(
¬g
, "rle", 1)) {

323 
»que¡ed_fmt
 = 
FMT_RLE
;

325 } ià(
	`keym©ch
(
¬g
, "scale", 1)) {

327 ià(++
¬gn
 >ğ
¬gc
)

328 
	`u§ge
();

329 ià(
	`ssÿnf
(
¬gv
[
¬gn
], "%d/%d",

330 &
cšfo
->
sÿË_num
, &cšfo->
sÿË_d’om
) != 2)

331 
	`u§ge
();

333 } ià(
	`keym©ch
(
¬g
, "targa", 1)) {

335 
»que¡ed_fmt
 = 
FMT_TARGA
;

338 
	`u§ge
();

342  
¬gn
;

343 
	}
}

353 
	$LOCAL
()

354 
	$j³g_g‘c
 (
j_decom´ess_±r
 
cšfo
)

357 
j³g_sourû_mgr
 * 
d©a¤c
 = 
cšfo
->
¤c
;

359 ià(
d©a¤c
->
by‹s_š_bufãr
 == 0) {

360 ià(! (*
d©a¤c
->
fl_šput_bufãr
è(
cšfo
))

361 
	`ERREXIT
(
cšfo
, 
JERR_CANT_SUSPEND
);

363 
d©a¤c
->
by‹s_š_bufãr
--;

364  
	`GETJOCTET
(*
d©a¤c
->
Ãxt_šput_by‹
++);

365 
	}
}

368 
	$METHODDEF
(
boŞ—n
)

369 
	$´št_‹xt_m¬k”
 (
j_decom´ess_±r
 
cšfo
)

371 
boŞ—n
 
Œaû™
 = (
cšfo
->
”r
->
Œaû_Ëv–
 >= 1);

372 
INT32
 
Ëngth
;

373 
ch
;

374 
Ï¡ch
 = 0;

376 
Ëngth
 = 
	`j³g_g‘c
(
cšfo
) << 8;

377 
Ëngth
 +ğ
	`j³g_g‘c
(
cšfo
);

378 
Ëngth
 -= 2;

380 ià(
Œaû™
) {

381 ià(
cšfo
->
uÄ—d_m¬k”
 =ğ
JPEG_COM
)

382 
	`årštf
(
¡d”r
, "Comm’t,†’gth %ld:\n", (è
Ëngth
);

384 
	`årštf
(
¡d”r
, "APP%d,†ength %ld:\n",

385 
cšfo
->
uÄ—d_m¬k”
 - 
JPEG_APP0
, (è
Ëngth
);

388 --
Ëngth
 >= 0) {

389 
ch
 = 
	`j³g_g‘c
(
cšfo
);

390 ià(
Œaû™
) {

396 ià(
ch
 == '\r') {

397 
	`årštf
(
¡d”r
, "\n");

398 } ià(
ch
 == '\n') {

399 ià(
Ï¡ch
 != '\r')

400 
	`årštf
(
¡d”r
, "\n");

401 } ià(
ch
 == '\\') {

402 
	`årštf
(
¡d”r
, "\\\\");

403 } ià(
	`i¥ršt
(
ch
)) {

404 
	`putc
(
ch
, 
¡d”r
);

406 
	`årštf
(
¡d”r
, "\\%03o", 
ch
);

408 
Ï¡ch
 = 
ch
;

412 ià(
Œaû™
)

413 
	`årštf
(
¡d”r
, "\n");

415  
TRUE
;

416 
	}
}

424 
	$maš
 (
¬gc
, **
¬gv
)

426 
j³g_decom´ess_¡ruù
 
cšfo
;

427 
j³g_”rÜ_mgr
 
j”r
;

428 #ifdeà
PROGRESS_REPORT


429 
cdj³g_´og»ss_mgr
 
´og»ss
;

431 
fe_šdex
;

432 
dj³g_de¡_±r
 
de¡_mgr
 = 
NULL
;

433 
FILE
 * 
šput_fe
;

434 
FILE
 * 
ouut_fe
;

435 
JDIMENSION
 
num_sÿÆšes
;

438 #ifdeà
USE_CCOMMAND


439 
¬gc
 = 
	`ccommªd
(&
¬gv
);

442 
´ogÇme
 = 
¬gv
[0];

443 ià(
´ogÇme
 =ğ
NULL
 ||…rogname[0] == 0)

444 
´ogÇme
 = "djpeg";

447 
cšfo
.
”r
 = 
	`j³g_¡d_”rÜ
(&
j”r
);

448 
	`j³g_ü—‹_decom´ess
(&
cšfo
);

450 
j”r
.
addÚ_mes§ge_bË
 = 
cdj³g_mes§ge_bË
;

451 
j”r
.
fœ¡_addÚ_mes§ge
 = 
JMSG_FIRSTADDONCODE
;

452 
j”r
.
Ï¡_addÚ_mes§ge
 = 
JMSG_LASTADDONCODE
;

460 
	`j³g_£t_m¬k”_´oûssÜ
(&
cšfo
, 
JPEG_COM
, 
´št_‹xt_m¬k”
);

461 
	`j³g_£t_m¬k”_´oûssÜ
(&
cšfo
, 
JPEG_APP0
+12, 
´št_‹xt_m¬k”
);

464 #ifdeà
NEED_SIGNAL_CATCHER


465 
	`’abË_sigÇl_ÿtch”
((
j_commÚ_±r
è&
cšfo
);

476 
fe_šdex
 = 
	`·r£_sw™ches
(&
cšfo
, 
¬gc
, 
¬gv
, 0, 
FALSE
);

478 #ifdeà
TWO_FILE_COMMANDLINE


480 ià(
outf’ame
 =ğ
NULL
) {

481 ià(
fe_šdex
 !ğ
¬gc
-2) {

482 
	`årštf
(
¡d”r
, "%s: must‚ame one input‡nd one output file\n",

483 
´ogÇme
);

484 
	`u§ge
();

486 
outf’ame
 = 
¬gv
[
fe_šdex
+1];

488 ià(
fe_šdex
 !ğ
¬gc
-1) {

489 
	`årštf
(
¡d”r
, "%s: must‚ame one input‡nd one output file\n",

490 
´ogÇme
);

491 
	`u§ge
();

496 ià(
fe_šdex
 < 
¬gc
-1) {

497 
	`årštf
(
¡d”r
, "%s: oÆy oÃ iÅuˆfe\n", 
´ogÇme
);

498 
	`u§ge
();

503 ià(
fe_šdex
 < 
¬gc
) {

504 ià((
šput_fe
 = 
	`fİ’
(
¬gv
[
fe_šdex
], 
READ_BINARY
)è=ğ
NULL
) {

505 
	`årštf
(
¡d”r
, "%s: cª'ˆİ’ %s\n", 
´ogÇme
, 
¬gv
[
fe_šdex
]);

506 
	`ex™
(
EXIT_FAILURE
);

510 
šput_fe
 = 
	`»ad_¡dš
();

514 ià(
outf’ame
 !ğ
NULL
) {

515 ià((
ouut_fe
 = 
	`fİ’
(
outf’ame
, 
WRITE_BINARY
)è=ğ
NULL
) {

516 
	`årštf
(
¡d”r
, "%s: cª'ˆİ’ %s\n", 
´ogÇme
, 
outf’ame
);

517 
	`ex™
(
EXIT_FAILURE
);

521 
ouut_fe
 = 
	`wr™e_¡dout
();

524 #ifdeà
PROGRESS_REPORT


525 
	`¡¬t_´og»ss_mÚ™Ü
((
j_commÚ_±r
è&
cšfo
, &
´og»ss
);

529 
	`j³g_¡dio_¤c
(&
cšfo
, 
šput_fe
);

532 (è
	`j³g_»ad_h—d”
(&
cšfo
, 
TRUE
);

535 
fe_šdex
 = 
	`·r£_sw™ches
(&
cšfo
, 
¬gc
, 
¬gv
, 0, 
TRUE
);

540 
»que¡ed_fmt
) {

541 #ifdeà
BMP_SUPPORTED


542 
FMT_BMP
:

543 
de¡_mgr
 = 
	`jš™_wr™e_bmp
(&
cšfo
, 
FALSE
);

545 
FMT_OS2
:

546 
de¡_mgr
 = 
	`jš™_wr™e_bmp
(&
cšfo
, 
TRUE
);

549 #ifdeà
GIF_SUPPORTED


550 
FMT_GIF
:

551 
de¡_mgr
 = 
	`jš™_wr™e_gif
(&
cšfo
);

554 #ifdeà
PPM_SUPPORTED


555 
FMT_PPM
:

556 
de¡_mgr
 = 
	`jš™_wr™e_µm
(&
cšfo
);

559 #ifdeà
RLE_SUPPORTED


560 
FMT_RLE
:

561 
de¡_mgr
 = 
	`jš™_wr™e_¾e
(&
cšfo
);

564 #ifdeà
TARGA_SUPPORTED


565 
FMT_TARGA
:

566 
de¡_mgr
 = 
	`jš™_wr™e_rga
(&
cšfo
);

570 
	`ERREXIT
(&
cšfo
, 
JERR_UNSUPPORTED_FORMAT
);

573 
de¡_mgr
->
ouut_fe
 = output_file;

576 (è
	`j³g_¡¬t_decom´ess
(&
cšfo
);

579 (*
de¡_mgr
->
¡¬t_ouut
è(&
cšfo
, dest_mgr);

582 
cšfo
.
ouut_sÿÆše
 < cšfo.
ouut_height
) {

583 
num_sÿÆšes
 = 
	`j³g_»ad_sÿÆšes
(&
cšfo
, 
de¡_mgr
->
bufãr
,

584 
de¡_mgr
->
bufãr_height
);

585 (*
de¡_mgr
->
put_pix–_rows
è(&
cšfo
, de¡_mgr, 
num_sÿÆšes
);

588 #ifdeà
PROGRESS_REPORT


592 
´og»ss
.
pub
.
com¶‘ed_·s£s
 =…rog»ss.pub.
tÙ®_·s£s
;

599 (*
de¡_mgr
->
fšish_ouut
è(&
cšfo
, dest_mgr);

600 (è
	`j³g_fšish_decom´ess
(&
cšfo
);

601 
	`j³g_de¡roy_decom´ess
(&
cšfo
);

604 ià(
šput_fe
 !ğ
¡dš
)

605 
	`fşo£
(
šput_fe
);

606 ià(
ouut_fe
 !ğ
¡dout
)

607 
	`fşo£
(
ouut_fe
);

609 #ifdeà
PROGRESS_REPORT


610 
	`’d_´og»ss_mÚ™Ü
((
j_commÚ_±r
è&
cšfo
);

614 
	`ex™
(
j”r
.
num_w¬nšgs
 ? 
EXIT_WARNING
 : 
EXIT_SUCCESS
);

616 
	}
}

	@example.c

16 
	~<¡dio.h
>

26 
	~"j³glib.h
"

33 
	~<£tjmp.h
>

61 
JSAMPLE
 * 
image_bufãr
;

62 
image_height
;

63 
image_width
;

71 
	$GLOBAL
()

72 
	$wr™e_JPEG_fe
 (* 
f’ame
, 
qu®™y
)

80 
j³g_com´ess_¡ruù
 
cšfo
;

89 
j³g_”rÜ_mgr
 
j”r
;

91 
FILE
 * 
outfe
;

92 
JSAMPROW
 
row_poš‹r
[1];

93 
row_¡ride
;

102 
cšfo
.
”r
 = 
	`j³g_¡d_”rÜ
(&
j”r
);

104 
	`j³g_ü—‹_com´ess
(&
cšfo
);

114 ià((
outfe
 = 
	`fİ’
(
f’ame
, "wb")è=ğ
NULL
) {

115 
	`årštf
(
¡d”r
, "ÿn'ˆİ’ %s\n", 
f’ame
);

116 
	`ex™
(1);

118 
	`j³g_¡dio_de¡
(&
cšfo
, 
outfe
);

125 
cšfo
.
image_width
 = image_width;

126 
cšfo
.
image_height
 = image_height;

127 
cšfo
.
šput_compÚ’ts
 = 3;

128 
cšfo
.
š_cŞÜ_¥aû
 = 
JCS_RGB
;

133 
	`j³g_£t_deçuÉs
(&
cšfo
);

137 
	`j³g_£t_qu®™y
(&
cšfo
, 
qu®™y
, 
TRUE
 );

144 
	`j³g_¡¬t_com´ess
(&
cšfo
, 
TRUE
);

154 
row_¡ride
 = 
image_width
 * 3;

156 
cšfo
.
Ãxt_sÿÆše
 < cšfo.
image_height
) {

161 
row_poš‹r
[0] = & 
image_bufãr
[
cšfo
.
Ãxt_sÿÆše
 * 
row_¡ride
];

162 (è
	`j³g_wr™e_sÿÆšes
(&
cšfo
, 
row_poš‹r
, 1);

167 
	`j³g_fšish_com´ess
(&
cšfo
);

169 
	`fşo£
(
outfe
);

174 
	`j³g_de¡roy_com´ess
(&
cšfo
);

177 
	}
}

250 
	smy_”rÜ_mgr
 {

251 
j³g_”rÜ_mgr
 
	mpub
;

253 
jmp_buf
 
	m£tjmp_bufãr
;

256 
my_”rÜ_mgr
 * 
	tmy_”rÜ_±r
;

262 
	$METHODDEF
()

263 
	$my_”rÜ_ex™
 (
j_commÚ_±r
 
cšfo
)

266 
my_”rÜ_±r
 
my”r
 = (my_”rÜ_±rè
cšfo
->
”r
;

270 (*
cšfo
->
”r
->
ouut_mes§ge
) (cinfo);

273 
	`lÚgjmp
(
my”r
->
£tjmp_bufãr
, 1);

274 
	}
}

283 
	$GLOBAL
()

284 
	$»ad_JPEG_fe
 (* 
f’ame
)

289 
j³g_decom´ess_¡ruù
 
cšfo
;

294 
my_”rÜ_mgr
 
j”r
;

296 
FILE
 * 
šfe
;

297 
JSAMPARRAY
 
bufãr
;

298 
row_¡ride
;

306 ià((
šfe
 = 
	`fİ’
(
f’ame
, "rb")è=ğ
NULL
) {

307 
	`årštf
(
¡d”r
, "ÿn'ˆİ’ %s\n", 
f’ame
);

314 
cšfo
.
”r
 = 
	`j³g_¡d_”rÜ
(&
j”r
.
pub
);

315 
j”r
.
pub
.
”rÜ_ex™
 = 
my_”rÜ_ex™
;

317 ià(
	`£tjmp
(
j”r
.
£tjmp_bufãr
)) {

321 
	`j³g_de¡roy_decom´ess
(&
cšfo
);

322 
	`fşo£
(
šfe
);

326 
	`j³g_ü—‹_decom´ess
(&
cšfo
);

330 
	`j³g_¡dio_¤c
(&
cšfo
, 
šfe
);

334 (è
	`j³g_»ad_h—d”
(&
cšfo
, 
TRUE
);

349 (è
	`j³g_¡¬t_decom´ess
(&
cšfo
);

361 
row_¡ride
 = 
cšfo
.
ouut_width
 * cšfo.
ouut_compÚ’ts
;

363 
bufãr
 = (*
cšfo
.
mem
->
®loc_§¼ay
)

364 ((
j_commÚ_±r
è&
cšfo
, 
JPOOL_IMAGE
, 
row_¡ride
, 1);

372 
cšfo
.
ouut_sÿÆše
 < cšfo.
ouut_height
) {

377 (è
	`j³g_»ad_sÿÆšes
(&
cšfo
, 
bufãr
, 1);

379 
	`put_sÿÆše_som•Ïû
(
bufãr
[0], 
row_¡ride
);

384 (è
	`j³g_fšish_decom´ess
(&
cšfo
);

392 
	`j³g_de¡roy_decom´ess
(&
cšfo
);

399 
	`fşo£
(
šfe
);

407 
	}
}

	@jcapimin.c

19 
	#JPEG_INTERNALS


	)

20 
	~"jšşude.h
"

21 
	~"j³glib.h
"

29 
	$GLOBAL
()

30 
	$j³g_C»©eCom´ess
 (
j_com´ess_±r
 
cšfo
, 
v”siÚ
, 
size_t
 
¡ruùsize
)

32 
i
;

35 
cšfo
->
mem
 = 
NULL
;

36 ià(
v”siÚ
 !ğ
JPEG_LIB_VERSION
)

37 
	`ERREXIT2
(
cšfo
, 
JERR_BAD_LIB_VERSION
, 
JPEG_LIB_VERSION
, 
v”siÚ
);

38 ià(
¡ruùsize
 !ğ
	`SIZEOF
(
j³g_com´ess_¡ruù
))

39 
	`ERREXIT2
(
cšfo
, 
JERR_BAD_STRUCT_SIZE
,

40 (è
	`SIZEOF
(
j³g_com´ess_¡ruù
), (è
¡ruùsize
);

49 
j³g_”rÜ_mgr
 * 
”r
 = 
cšfo
->err;

50 * 
ş›Á_d©a
 = 
cšfo
->client_data;

51 
	`MEMZERO
(
cšfo
, 
	`SIZEOF
(
j³g_com´ess_¡ruù
));

52 
cšfo
->
”r
 =ƒrr;

53 
cšfo
->
ş›Á_d©a
 = client_data;

55 
cšfo
->
is_decom´essÜ
 = 
FALSE
;

58 
	`jš™_memÜy_mgr
((
j_commÚ_±r
è
cšfo
);

61 
cšfo
->
´og»ss
 = 
NULL
;

62 
cšfo
->
de¡
 = 
NULL
;

64 
cšfo
->
comp_šfo
 = 
NULL
;

66 
i
 = 0; i < 
NUM_QUANT_TBLS
; i++)

67 
cšfo
->
quªt_tbl_±rs
[
i
] = 
NULL
;

69 
i
 = 0; i < 
NUM_HUFF_TBLS
; i++) {

70 
cšfo
->
dc_huff_tbl_±rs
[
i
] = 
NULL
;

71 
cšfo
->
ac_huff_tbl_±rs
[
i
] = 
NULL
;

74 
cšfo
->
süt_¥aû
 = 
NULL
;

76 
cšfo
->
šput_gamma
 = 1.0;

79 
cšfo
->
glob®_¡©e
 = 
CSTATE_START
;

80 
	}
}

87 
	$GLOBAL
()

88 
	$j³g_de¡roy_com´ess
 (
j_com´ess_±r
 
cšfo
)

90 
	`j³g_de¡roy
((
j_commÚ_±r
è
cšfo
);

91 
	}
}

99 
	$GLOBAL
()

100 
	$j³g_abÜt_com´ess
 (
j_com´ess_±r
 
cšfo
)

102 
	`j³g_abÜt
((
j_commÚ_±r
è
cšfo
);

103 
	}
}

118 
	$GLOBAL
()

119 
	$j³g_suµ»ss_bËs
 (
j_com´ess_±r
 
cšfo
, 
boŞ—n
 
suµ»ss
)

121 
i
;

122 
JQUANT_TBL
 * 
qtbl
;

123 
JHUFF_TBL
 * 
htbl
;

125 
i
 = 0; i < 
NUM_QUANT_TBLS
; i++) {

126 ià((
qtbl
 = 
cšfo
->
quªt_tbl_±rs
[
i
]è!ğ
NULL
)

127 
qtbl
->
£Á_bË
 = 
suµ»ss
;

130 
i
 = 0; i < 
NUM_HUFF_TBLS
; i++) {

131 ià((
htbl
 = 
cšfo
->
dc_huff_tbl_±rs
[
i
]è!ğ
NULL
)

132 
htbl
->
£Á_bË
 = 
suµ»ss
;

133 ià((
htbl
 = 
cšfo
->
ac_huff_tbl_±rs
[
i
]è!ğ
NULL
)

134 
htbl
->
£Á_bË
 = 
suµ»ss
;

136 
	}
}

146 
	$GLOBAL
()

147 
	$j³g_fšish_com´ess
 (
j_com´ess_±r
 
cšfo
)

149 
JDIMENSION
 
iMCU_row
;

151 ià(
cšfo
->
glob®_¡©e
 =ğ
CSTATE_SCANNING
 ||

152 
cšfo
->
glob®_¡©e
 =ğ
CSTATE_RAW_OK
) {

154 ià(
cšfo
->
Ãxt_sÿÆše
 < cšfo->
image_height
)

155 
	`ERREXIT
(
cšfo
, 
JERR_TOO_LITTLE_DATA
);

156 (*
cšfo
->
ma¡”
->
fšish_·ss
) (cinfo);

157 } ià(
cšfo
->
glob®_¡©e
 !ğ
CSTATE_WRCOEFS
)

158 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_STATE
, cšfo->
glob®_¡©e
);

160 ! 
cšfo
->
ma¡”
->
is_Ï¡_·ss
) {

161 (*
cšfo
->
ma¡”
->
´•¬e_fÜ_·ss
) (cinfo);

162 
iMCU_row
 = 0; iMCU_row < 
cšfo
->
tÙ®_iMCU_rows
; iMCU_row++) {

163 ià(
cšfo
->
´og»ss
 !ğ
NULL
) {

164 
cšfo
->
´og»ss
->
·ss_couÁ”
 = (è
iMCU_row
;

165 
cšfo
->
´og»ss
->
·ss_lim™
 = (ècšfo->
tÙ®_iMCU_rows
;

166 (*
cšfo
->
´og»ss
->
´og»ss_mÚ™Ü
è((
j_commÚ_±r
) cinfo);

171 ià(! (*
cšfo
->
cÛf
->
com´ess_d©a
è(cšfo, (
JSAMPIMAGE
è
NULL
))

172 
	`ERREXIT
(
cšfo
, 
JERR_CANT_SUSPEND
);

174 (*
cšfo
->
ma¡”
->
fšish_·ss
) (cinfo);

177 (*
cšfo
->
m¬k”
->
wr™e_fe_Œa”
) (cinfo);

178 (*
cšfo
->
de¡
->
‹rm_de¡š©iÚ
) (cinfo);

180 
	`j³g_abÜt
((
j_commÚ_±r
è
cšfo
);

181 
	}
}

191 
	$GLOBAL
()

192 
	$j³g_wr™e_m¬k”
 (
j_com´ess_±r
 
cšfo
, 
m¬k”
,

193 cÚ¡ 
JOCTET
 *
d©­Œ
, 
d©®’
)

195 
	`JMETHOD
(, 
wr™e_m¬k”_by‹
, (
j_com´ess_±r
 
šfo
, 
v®
));

197 ià(
cšfo
->
Ãxt_sÿÆše
 != 0 ||

198 (
cšfo
->
glob®_¡©e
 !ğ
CSTATE_SCANNING
 &&

199 
cšfo
->
glob®_¡©e
 !ğ
CSTATE_RAW_OK
 &&

200 
cšfo
->
glob®_¡©e
 !ğ
CSTATE_WRCOEFS
))

201 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_STATE
, cšfo->
glob®_¡©e
);

203 (*
cšfo
->
m¬k”
->
wr™e_m¬k”_h—d”
è(cšfo, m¬k”, 
d©®’
);

204 
wr™e_m¬k”_by‹
 = 
cšfo
->
m¬k”
->write_marker_byte;

205 
d©®’
--) {

206 (*
wr™e_m¬k”_by‹
è(
cšfo
, *
d©­Œ
);

207 
d©­Œ
++;

209 
	}
}

213 
	$GLOBAL
()

214 
	$j³g_wr™e_m_h—d”
 (
j_com´ess_±r
 
cšfo
, 
m¬k”
, 
d©®’
)

216 ià(
cšfo
->
Ãxt_sÿÆše
 != 0 ||

217 (
cšfo
->
glob®_¡©e
 !ğ
CSTATE_SCANNING
 &&

218 
cšfo
->
glob®_¡©e
 !ğ
CSTATE_RAW_OK
 &&

219 
cšfo
->
glob®_¡©e
 !ğ
CSTATE_WRCOEFS
))

220 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_STATE
, cšfo->
glob®_¡©e
);

222 (*
cšfo
->
m¬k”
->
wr™e_m¬k”_h—d”
è(cšfo, m¬k”, 
d©®’
);

223 
	}
}

225 
	$GLOBAL
()

226 
	$j³g_wr™e_m_by‹
 (
j_com´ess_±r
 
cšfo
, 
v®
)

228 (*
cšfo
->
m¬k”
->
wr™e_m¬k”_by‹
è(cšfo, 
v®
);

229 
	}
}

253 
	$GLOBAL
()

254 
	$j³g_wr™e_bËs
 (
j_com´ess_±r
 
cšfo
)

256 ià(
cšfo
->
glob®_¡©e
 !ğ
CSTATE_START
)

257 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_STATE
, cšfo->
glob®_¡©e
);

260 (*
cšfo
->
”r
->
»£t_”rÜ_mgr
è((
j_commÚ_±r
) cinfo);

261 (*
cšfo
->
de¡
->
š™_de¡š©iÚ
) (cinfo);

263 
	`jš™_m¬k”_wr™”
(
cšfo
);

265 (*
cšfo
->
m¬k”
->
wr™e_bËs_Úly
) (cinfo);

267 (*
cšfo
->
de¡
->
‹rm_de¡š©iÚ
) (cinfo);

280 
	}
}

	@jcapistd.c

17 
	#JPEG_INTERNALS


	)

18 
	~"jšşude.h
"

19 
	~"j³glib.h
"

37 
	$GLOBAL
()

38 
	$j³g_¡¬t_com´ess
 (
j_com´ess_±r
 
cšfo
, 
boŞ—n
 
wr™e_®l_bËs
)

40 ià(
cšfo
->
glob®_¡©e
 !ğ
CSTATE_START
)

41 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_STATE
, cšfo->
glob®_¡©e
);

43 ià(
wr™e_®l_bËs
)

44 
	`j³g_suµ»ss_bËs
(
cšfo
, 
FALSE
);

47 (*
cšfo
->
”r
->
»£t_”rÜ_mgr
è((
j_commÚ_±r
) cinfo);

48 (*
cšfo
->
de¡
->
š™_de¡š©iÚ
) (cinfo);

50 
	`jš™_com´ess_ma¡”
(
cšfo
);

52 (*
cšfo
->
ma¡”
->
´•¬e_fÜ_·ss
) (cinfo);

56 
cšfo
->
Ãxt_sÿÆše
 = 0;

57 
cšfo
->
glob®_¡©e
 = (cšfo->
¿w_d©a_š
 ? 
CSTATE_RAW_OK
 : 
CSTATE_SCANNING
);

58 
	}
}

76 
	$GLOBAL
(
JDIMENSION
)

77 
	$j³g_wr™e_sÿÆšes
 (
j_com´ess_±r
 
cšfo
, 
JSAMPARRAY
 
sÿÆšes
,

78 
JDIMENSION
 
num_lšes
)

80 
JDIMENSION
 
row_ùr
, 
rows_Ëá
;

82 ià(
cšfo
->
glob®_¡©e
 !ğ
CSTATE_SCANNING
)

83 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_STATE
, cšfo->
glob®_¡©e
);

84 ià(
cšfo
->
Ãxt_sÿÆše
 >ğcšfo->
image_height
)

85 
	`WARNMS
(
cšfo
, 
JWRN_TOO_MUCH_DATA
);

88 ià(
cšfo
->
´og»ss
 !ğ
NULL
) {

89 
cšfo
->
´og»ss
->
·ss_couÁ”
 = (ècšfo->
Ãxt_sÿÆše
;

90 
cšfo
->
´og»ss
->
·ss_lim™
 = (ècšfo->
image_height
;

91 (*
cšfo
->
´og»ss
->
´og»ss_mÚ™Ü
è((
j_commÚ_±r
) cinfo);

99 ià(
cšfo
->
ma¡”
->
ÿÎ_·ss_¡¬tup
)

100 (*
cšfo
->
ma¡”
->
·ss_¡¬tup
) (cinfo);

103 
rows_Ëá
 = 
cšfo
->
image_height
 - cšfo->
Ãxt_sÿÆše
;

104 ià(
num_lšes
 > 
rows_Ëá
)

105 
num_lšes
 = 
rows_Ëá
;

107 
row_ùr
 = 0;

108 (*
cšfo
->
maš
->
´oûss_d©a
è(cšfo, 
sÿÆšes
, &
row_ùr
, 
num_lšes
);

109 
cšfo
->
Ãxt_sÿÆše
 +ğ
row_ùr
;

110  
row_ùr
;

111 
	}
}

119 
	$GLOBAL
(
JDIMENSION
)

120 
	$j³g_wr™e_¿w_d©a
 (
j_com´ess_±r
 
cšfo
, 
JSAMPIMAGE
 
d©a
,

121 
JDIMENSION
 
num_lšes
)

123 
JDIMENSION
 
lšes_³r_iMCU_row
;

125 ià(
cšfo
->
glob®_¡©e
 !ğ
CSTATE_RAW_OK
)

126 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_STATE
, cšfo->
glob®_¡©e
);

127 ià(
cšfo
->
Ãxt_sÿÆše
 >ğcšfo->
image_height
) {

128 
	`WARNMS
(
cšfo
, 
JWRN_TOO_MUCH_DATA
);

133 ià(
cšfo
->
´og»ss
 !ğ
NULL
) {

134 
cšfo
->
´og»ss
->
·ss_couÁ”
 = (ècšfo->
Ãxt_sÿÆše
;

135 
cšfo
->
´og»ss
->
·ss_lim™
 = (ècšfo->
image_height
;

136 (*
cšfo
->
´og»ss
->
´og»ss_mÚ™Ü
è((
j_commÚ_±r
) cinfo);

144 ià(
cšfo
->
ma¡”
->
ÿÎ_·ss_¡¬tup
)

145 (*
cšfo
->
ma¡”
->
·ss_¡¬tup
) (cinfo);

148 
lšes_³r_iMCU_row
 = 
cšfo
->
max_v_§mp_çùÜ
 * 
DCTSIZE
;

149 ià(
num_lšes
 < 
lšes_³r_iMCU_row
)

150 
	`ERREXIT
(
cšfo
, 
JERR_BUFFER_SIZE
);

153 ià(! (*
cšfo
->
cÛf
->
com´ess_d©a
è(cšfo, 
d©a
)) {

159 
cšfo
->
Ãxt_sÿÆše
 +ğ
lšes_³r_iMCU_row
;

160  
lšes_³r_iMCU_row
;

161 
	}
}

	@jccoefct.c

13 
	#JPEG_INTERNALS


	)

14 
	~"jšşude.h
"

15 
	~"j³glib.h
"

23 #ifdeà
ENTROPY_OPT_SUPPORTED


24 
	#FULL_COEF_BUFFER_SUPPORTED


	)

26 #ifdeà
C_MULTISCAN_FILES_SUPPORTED


27 
	#FULL_COEF_BUFFER_SUPPORTED


	)

35 
j³g_c_cÛf_cÚŒŞËr
 
	mpub
;

37 
JDIMENSION
 
	miMCU_row_num
;

38 
JDIMENSION
 
	mmcu_ùr
;

39 
	mMCU_v”t_off£t
;

40 
	mMCU_rows_³r_iMCU_row
;

51 
JBLOCKROW
 
	mMCU_bufãr
[
C_MAX_BLOCKS_IN_MCU
];

54 
jvœt_b¬¿y_±r
 
	mwhŞe_image
[
MAX_COMPONENTS
];

55 } 
	tmy_cÛf_cÚŒŞËr
;

57 
my_cÛf_cÚŒŞËr
 * 
	tmy_cÛf_±r
;

61 
	$METHODDEF
(
boŞ—n
è
com´ess_d©a


62 
	`JPP
((
j_com´ess_±r
 
cšfo
, 
JSAMPIMAGE
 
šput_buf
));

63 #ifdeà
FULL_COEF_BUFFER_SUPPORTED


64 
	$METHODDEF
(
boŞ—n
è
com´ess_fœ¡_·ss


65 
	`JPP
((
j_com´ess_±r
 
cšfo
, 
JSAMPIMAGE
 
šput_buf
));

66 
	$METHODDEF
(
boŞ—n
è
com´ess_ouut


67 
	`JPP
((
j_com´ess_±r
 
cšfo
, 
JSAMPIMAGE
 
šput_buf
));

71 
	$LOCAL
()

72 
	$¡¬t_iMCU_row
 (
j_com´ess_±r
 
cšfo
)

75 
my_cÛf_±r
 
cÛf
 = (my_cÛf_±rè
cšfo
->coef;

81 ià(
cšfo
->
comps_š_sÿn
 > 1) {

82 
cÛf
->
MCU_rows_³r_iMCU_row
 = 1;

84 ià(
cÛf
->
iMCU_row_num
 < (
cšfo
->
tÙ®_iMCU_rows
-1))

85 
cÛf
->
MCU_rows_³r_iMCU_row
 = 
cšfo
->
cur_comp_šfo
[0]->
v_§mp_çùÜ
;

87 
cÛf
->
MCU_rows_³r_iMCU_row
 = 
cšfo
->
cur_comp_šfo
[0]->
Ï¡_row_height
;

90 
cÛf
->
mcu_ùr
 = 0;

91 
cÛf
->
MCU_v”t_off£t
 = 0;

92 
	}
}

99 
	$METHODDEF
()

100 
	$¡¬t_·ss_cÛf
 (
j_com´ess_±r
 
cšfo
, 
J_BUF_MODE
 
·ss_mode
)

102 
my_cÛf_±r
 
cÛf
 = (my_cÛf_±rè
cšfo
->coef;

104 
cÛf
->
iMCU_row_num
 = 0;

105 
	`¡¬t_iMCU_row
(
cšfo
);

107 
·ss_mode
) {

108 
JBUF_PASS_THRU
:

109 ià(
cÛf
->
whŞe_image
[0] !ğ
NULL
)

110 
	`ERREXIT
(
cšfo
, 
JERR_BAD_BUFFER_MODE
);

111 
cÛf
->
pub
.
com´ess_d©a
 = compress_data;

113 #ifdeà
FULL_COEF_BUFFER_SUPPORTED


114 
JBUF_SAVE_AND_PASS
:

115 ià(
cÛf
->
whŞe_image
[0] =ğ
NULL
)

116 
	`ERREXIT
(
cšfo
, 
JERR_BAD_BUFFER_MODE
);

117 
cÛf
->
pub
.
com´ess_d©a
 = 
com´ess_fœ¡_·ss
;

119 
JBUF_CRANK_DEST
:

120 ià(
cÛf
->
whŞe_image
[0] =ğ
NULL
)

121 
	`ERREXIT
(
cšfo
, 
JERR_BAD_BUFFER_MODE
);

122 
cÛf
->
pub
.
com´ess_d©a
 = 
com´ess_ouut
;

126 
	`ERREXIT
(
cšfo
, 
JERR_BAD_BUFFER_MODE
);

129 
	}
}

142 
	$METHODDEF
(
boŞ—n
)

143 
	$com´ess_d©a
 (
j_com´ess_±r
 
cšfo
, 
JSAMPIMAGE
 
šput_buf
)

145 
my_cÛf_±r
 
cÛf
 = (my_cÛf_±rè
cšfo
->coef;

146 
JDIMENSION
 
MCU_cŞ_num
;

147 
JDIMENSION
 
Ï¡_MCU_cŞ
 = 
cšfo
->
MCUs_³r_row
 - 1;

148 
JDIMENSION
 
Ï¡_iMCU_row
 = 
cšfo
->
tÙ®_iMCU_rows
 - 1;

149 
blkn
, 
bi
, 
ci
, 
yšdex
, 
yoff£t
, 
blockút
;

150 
JDIMENSION
 
ypos
, 
xpos
;

151 
j³g_compÚ’t_šfo
 *
comµŒ
;

154 
yoff£t
 = 
cÛf
->
MCU_v”t_off£t
; yoff£ˆ< cÛf->
MCU_rows_³r_iMCU_row
;

155 
yoff£t
++) {

156 
MCU_cŞ_num
 = 
cÛf
->
mcu_ùr
; MCU_cŞ_num <ğ
Ï¡_MCU_cŞ
;

157 
MCU_cŞ_num
++) {

167 
blkn
 = 0;

168 
ci
 = 0; c˜< 
cšfo
->
comps_š_sÿn
; ci++) {

169 
comµŒ
 = 
cšfo
->
cur_comp_šfo
[
ci
];

170 
blockút
 = (
MCU_cŞ_num
 < 
Ï¡_MCU_cŞ
è? 
comµŒ
->
MCU_width


171 : 
comµŒ
->
Ï¡_cŞ_width
;

172 
xpos
 = 
MCU_cŞ_num
 * 
comµŒ
->
MCU_§m¶e_width
;

173 
ypos
 = 
yoff£t
 * 
DCTSIZE
;

174 
yšdex
 = 0; yšdex < 
comµŒ
->
MCU_height
; yindex++) {

175 ià(
cÛf
->
iMCU_row_num
 < 
Ï¡_iMCU_row
 ||

176 
yoff£t
+
yšdex
 < 
comµŒ
->
Ï¡_row_height
) {

177 (*
cšfo
->
fdù
->
fÜw¬d_DCT
è(cšfo, 
comµŒ
,

178 
šput_buf
[
comµŒ
->
compÚ’t_šdex
],

179 
cÛf
->
MCU_bufãr
[
blkn
],

180 
ypos
, 
xpos
, (
JDIMENSION
è
blockút
);

181 ià(
blockút
 < 
comµŒ
->
MCU_width
) {

183 
	`jz”o_çr
((
FAR
 *è
cÛf
->
MCU_bufãr
[
blkn
 + 
blockút
],

184 (
comµŒ
->
MCU_width
 - 
blockút
è* 
	`SIZEOF
(
JBLOCK
));

185 
bi
 = 
blockút
; b˜< 
comµŒ
->
MCU_width
; bi++) {

186 
cÛf
->
MCU_bufãr
[
blkn
+
bi
][0][0] = coef->MCU_buffer[blkn+bi-1][0][0];

191 
	`jz”o_çr
((
FAR
 *è
cÛf
->
MCU_bufãr
[
blkn
],

192 
comµŒ
->
MCU_width
 * 
	`SIZEOF
(
JBLOCK
));

193 
bi
 = 0; b˜< 
comµŒ
->
MCU_width
; bi++) {

194 
cÛf
->
MCU_bufãr
[
blkn
+
bi
][0][0] = coef->MCU_buffer[blkn-1][0][0];

197 
blkn
 +ğ
comµŒ
->
MCU_width
;

198 
ypos
 +ğ
DCTSIZE
;

204 ià(! (*
cšfo
->
’Œİy
->
’code_mcu
è(cšfo, 
cÛf
->
MCU_bufãr
)) {

206 
cÛf
->
MCU_v”t_off£t
 = 
yoff£t
;

207 
cÛf
->
mcu_ùr
 = 
MCU_cŞ_num
;

208  
FALSE
;

212 
cÛf
->
mcu_ùr
 = 0;

215 
cÛf
->
iMCU_row_num
++;

216 
	`¡¬t_iMCU_row
(
cšfo
);

217  
TRUE
;

218 
	}
}

221 #ifdeà
FULL_COEF_BUFFER_SUPPORTED


244 
	$METHODDEF
(
boŞ—n
)

245 
	$com´ess_fœ¡_·ss
 (
j_com´ess_±r
 
cšfo
, 
JSAMPIMAGE
 
šput_buf
)

247 
my_cÛf_±r
 
cÛf
 = (my_cÛf_±rè
cšfo
->coef;

248 
JDIMENSION
 
Ï¡_iMCU_row
 = 
cšfo
->
tÙ®_iMCU_rows
 - 1;

249 
JDIMENSION
 
blocks_aüoss
, 
MCUs_aüoss
, 
MCUšdex
;

250 
bi
, 
ci
, 
h_§mp_çùÜ
, 
block_row
, 
block_rows
, 
ndummy
;

251 
JCOEF
 
Ï¡DC
;

252 
j³g_compÚ’t_šfo
 *
comµŒ
;

253 
JBLOCKARRAY
 
bufãr
;

254 
JBLOCKROW
 
thisblockrow
, 
Ï¡blockrow
;

256 
ci
 = 0, 
comµŒ
 = 
cšfo
->
comp_šfo
; c˜< cšfo->
num_compÚ’ts
;

257 
ci
++, 
comµŒ
++) {

259 
bufãr
 = (*
cšfo
->
mem
->
acûss_vœt_b¬¿y
)

260 ((
j_commÚ_±r
è
cšfo
, 
cÛf
->
whŞe_image
[
ci
],

261 
cÛf
->
iMCU_row_num
 * 
comµŒ
->
v_§mp_çùÜ
,

262 (
JDIMENSION
è
comµŒ
->
v_§mp_çùÜ
, 
TRUE
);

264 ià(
cÛf
->
iMCU_row_num
 < 
Ï¡_iMCU_row
)

265 
block_rows
 = 
comµŒ
->
v_§mp_çùÜ
;

268 
block_rows
 = (è(
comµŒ
->
height_š_blocks
 % comµŒ->
v_§mp_çùÜ
);

269 ià(
block_rows
 =ğ0èblock_row ğ
comµŒ
->
v_§mp_çùÜ
;

271 
blocks_aüoss
 = 
comµŒ
->
width_š_blocks
;

272 
h_§mp_çùÜ
 = 
comµŒ
->h_samp_factor;

274 
ndummy
 = (è(
blocks_aüoss
 % 
h_§mp_çùÜ
);

275 ià(
ndummy
 > 0)

276 
ndummy
 = 
h_§mp_çùÜ
 -‚dummy;

280 
block_row
 = 0; block_row < 
block_rows
; block_row++) {

281 
thisblockrow
 = 
bufãr
[
block_row
];

282 (*
cšfo
->
fdù
->
fÜw¬d_DCT
è(cšfo, 
comµŒ
,

283 
šput_buf
[
ci
], 
thisblockrow
,

284 (
JDIMENSION
è(
block_row
 * 
DCTSIZE
),

285 (
JDIMENSION
è0, 
blocks_aüoss
);

286 ià(
ndummy
 > 0) {

288 
thisblockrow
 +ğ
blocks_aüoss
;

289 
	`jz”o_çr
((
FAR
 *è
thisblockrow
, 
ndummy
 * 
	`SIZEOF
(
JBLOCK
));

290 
Ï¡DC
 = 
thisblockrow
[-1][0];

291 
bi
 = 0; b˜< 
ndummy
; bi++) {

292 
thisblockrow
[
bi
][0] = 
Ï¡DC
;

301 ià(
cÛf
->
iMCU_row_num
 =ğ
Ï¡_iMCU_row
) {

302 
blocks_aüoss
 +ğ
ndummy
;

303 
MCUs_aüoss
 = 
blocks_aüoss
 / 
h_§mp_çùÜ
;

304 
block_row
 = 
block_rows
; block_row < 
comµŒ
->
v_§mp_çùÜ
;

305 
block_row
++) {

306 
thisblockrow
 = 
bufãr
[
block_row
];

307 
Ï¡blockrow
 = 
bufãr
[
block_row
-1];

308 
	`jz”o_çr
((
FAR
 *è
thisblockrow
,

309 (
size_t
è(
blocks_aüoss
 * 
	`SIZEOF
(
JBLOCK
)));

310 
MCUšdex
 = 0; MCUšdex < 
MCUs_aüoss
; MCUindex++) {

311 
Ï¡DC
 = 
Ï¡blockrow
[
h_§mp_çùÜ
-1][0];

312 
bi
 = 0; b˜< 
h_§mp_çùÜ
; bi++) {

313 
thisblockrow
[
bi
][0] = 
Ï¡DC
;

315 
thisblockrow
 +ğ
h_§mp_çùÜ
;

316 
Ï¡blockrow
 +ğ
h_§mp_çùÜ
;

326  
	`com´ess_ouut
(
cšfo
, 
šput_buf
);

327 
	}
}

340 
	$METHODDEF
(
boŞ—n
)

341 
	$com´ess_ouut
 (
j_com´ess_±r
 
cšfo
, 
JSAMPIMAGE
 
šput_buf
)

343 
my_cÛf_±r
 
cÛf
 = (my_cÛf_±rè
cšfo
->coef;

344 
JDIMENSION
 
MCU_cŞ_num
;

345 
blkn
, 
ci
, 
xšdex
, 
yšdex
, 
yoff£t
;

346 
JDIMENSION
 
¡¬t_cŞ
;

347 
JBLOCKARRAY
 
bufãr
[
MAX_COMPS_IN_SCAN
];

348 
JBLOCKROW
 
bufãr_±r
;

349 
j³g_compÚ’t_šfo
 *
comµŒ
;

355 
ci
 = 0; c˜< 
cšfo
->
comps_š_sÿn
; ci++) {

356 
comµŒ
 = 
cšfo
->
cur_comp_šfo
[
ci
];

357 
bufãr
[
ci
] = (*
cšfo
->
mem
->
acûss_vœt_b¬¿y
)

358 ((
j_commÚ_±r
è
cšfo
, 
cÛf
->
whŞe_image
[
comµŒ
->
compÚ’t_šdex
],

359 
cÛf
->
iMCU_row_num
 * 
comµŒ
->
v_§mp_çùÜ
,

360 (
JDIMENSION
è
comµŒ
->
v_§mp_çùÜ
, 
FALSE
);

364 
yoff£t
 = 
cÛf
->
MCU_v”t_off£t
; yoff£ˆ< cÛf->
MCU_rows_³r_iMCU_row
;

365 
yoff£t
++) {

366 
MCU_cŞ_num
 = 
cÛf
->
mcu_ùr
; MCU_cŞ_num < 
cšfo
->
MCUs_³r_row
;

367 
MCU_cŞ_num
++) {

369 
blkn
 = 0;

370 
ci
 = 0; c˜< 
cšfo
->
comps_š_sÿn
; ci++) {

371 
comµŒ
 = 
cšfo
->
cur_comp_šfo
[
ci
];

372 
¡¬t_cŞ
 = 
MCU_cŞ_num
 * 
comµŒ
->
MCU_width
;

373 
yšdex
 = 0; yšdex < 
comµŒ
->
MCU_height
; yindex++) {

374 
bufãr_±r
 = 
bufãr
[
ci
][
yšdex
+
yoff£t
] + 
¡¬t_cŞ
;

375 
xšdex
 = 0; xšdex < 
comµŒ
->
MCU_width
; xindex++) {

376 
cÛf
->
MCU_bufãr
[
blkn
++] = 
bufãr_±r
++;

381 ià(! (*
cšfo
->
’Œİy
->
’code_mcu
è(cšfo, 
cÛf
->
MCU_bufãr
)) {

383 
cÛf
->
MCU_v”t_off£t
 = 
yoff£t
;

384 
cÛf
->
mcu_ùr
 = 
MCU_cŞ_num
;

385  
FALSE
;

389 
cÛf
->
mcu_ùr
 = 0;

392 
cÛf
->
iMCU_row_num
++;

393 
	`¡¬t_iMCU_row
(
cšfo
);

394  
TRUE
;

395 
	}
}

404 
	$GLOBAL
()

405 
	$jš™_c_cÛf_cÚŒŞËr
 (
j_com´ess_±r
 
cšfo
, 
boŞ—n
 
Ãed_fuÎ_bufãr
)

407 
my_cÛf_±r
 
cÛf
;

409 
cÛf
 = (
my_cÛf_±r
)

410 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

411 
	`SIZEOF
(
my_cÛf_cÚŒŞËr
));

412 
cšfo
->
cÛf
 = (
j³g_c_cÛf_cÚŒŞËr
 *) coef;

413 
cÛf
->
pub
.
¡¬t_·ss
 = 
¡¬t_·ss_cÛf
;

416 ià(
Ãed_fuÎ_bufãr
) {

417 #ifdeà
FULL_COEF_BUFFER_SUPPORTED


420 
ci
;

421 
j³g_compÚ’t_šfo
 *
comµŒ
;

423 
ci
 = 0, 
comµŒ
 = 
cšfo
->
comp_šfo
; c˜< cšfo->
num_compÚ’ts
;

424 
ci
++, 
comµŒ
++) {

425 
cÛf
->
whŞe_image
[
ci
] = (*
cšfo
->
mem
->
»que¡_vœt_b¬¿y
)

426 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
, 
FALSE
,

427 (
JDIMENSION
è
	`jround_up
((è
comµŒ
->
width_š_blocks
,

428 (è
comµŒ
->
h_§mp_çùÜ
),

429 (
JDIMENSION
è
	`jround_up
((è
comµŒ
->
height_š_blocks
,

430 (è
comµŒ
->
v_§mp_çùÜ
),

431 (
JDIMENSION
è
comµŒ
->
v_§mp_çùÜ
);

434 
	`ERREXIT
(
cšfo
, 
JERR_BAD_BUFFER_MODE
);

438 
JBLOCKROW
 
bufãr
;

439 
i
;

441 
bufãr
 = (
JBLOCKROW
)

442 (*
cšfo
->
mem
->
®loc_Ïrge
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

443 
C_MAX_BLOCKS_IN_MCU
 * 
	`SIZEOF
(
JBLOCK
));

444 
i
 = 0; i < 
C_MAX_BLOCKS_IN_MCU
; i++) {

445 
cÛf
->
MCU_bufãr
[
i
] = 
bufãr
 + i;

447 
cÛf
->
whŞe_image
[0] = 
NULL
;

449 
	}
}

	@jccolor.c

11 
	#JPEG_INTERNALS


	)

12 
	~"jšşude.h
"

13 
	~"j³glib.h
"

19 
j³g_cŞÜ_cÚv”‹r
 
	mpub
;

22 
INT32
 * 
	mrgb_ycc_b
;

23 } 
	tmy_cŞÜ_cÚv”‹r
;

25 
my_cŞÜ_cÚv”‹r
 * 
	tmy_ccÚv”t_±r
;

58 
	#SCALEBITS
 16

	)

59 
	#CBCR_OFFSET
 ((
INT32
è
CENTERJSAMPLE
 << 
SCALEBITS
)

	)

60 
	#ONE_HALF
 ((
INT32
è1 << (
SCALEBITS
-1))

	)

61 
	#FIX
(
x
è((
INT32
è((xè* (1L<<
SCALEBITS
è+ 0.5))

	)

69 
	#R_Y_OFF
 0

	)

70 
	#G_Y_OFF
 (1*(
MAXJSAMPLE
+1)è

	)

71 
	#B_Y_OFF
 (2*(
MAXJSAMPLE
+1)è

	)

72 
	#R_CB_OFF
 (3*(
MAXJSAMPLE
+1))

	)

73 
	#G_CB_OFF
 (4*(
MAXJSAMPLE
+1))

	)

74 
	#B_CB_OFF
 (5*(
MAXJSAMPLE
+1))

	)

75 
	#R_CR_OFF
 
B_CB_OFF


	)

76 
	#G_CR_OFF
 (6*(
MAXJSAMPLE
+1))

	)

77 
	#B_CR_OFF
 (7*(
MAXJSAMPLE
+1))

	)

78 
	#TABLE_SIZE
 (8*(
MAXJSAMPLE
+1))

	)

85 
	$METHODDEF
()

86 
	$rgb_ycc_¡¬t
 (
j_com´ess_±r
 
cšfo
)

88 
my_ccÚv”t_±r
 
ccÚv”t
 = (my_ccÚv”t_±rè
cšfo
->cconvert;

89 
INT32
 * 
rgb_ycc_b
;

90 
INT32
 
i
;

93 
ccÚv”t
->
rgb_ycc_b
 =„gb_ycc_b = (
INT32
 *)

94 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

95 (
TABLE_SIZE
 * 
	`SIZEOF
(
INT32
)));

97 
i
 = 0; i <ğ
MAXJSAMPLE
; i++) {

98 
rgb_ycc_b
[
i
+
R_Y_OFF
] = 
	`FIX
(0.29900) * i;

99 
rgb_ycc_b
[
i
+
G_Y_OFF
] = 
	`FIX
(0.58700) * i;

100 
rgb_ycc_b
[
i
+
B_Y_OFF
] = 
	`FIX
(0.11400è* i + 
ONE_HALF
;

101 
rgb_ycc_b
[
i
+
R_CB_OFF
] = (-
	`FIX
(0.16874)) * i;

102 
rgb_ycc_b
[
i
+
G_CB_OFF
] = (-
	`FIX
(0.33126)) * i;

107 
rgb_ycc_b
[
i
+
B_CB_OFF
] = 
	`FIX
(0.50000è* i + 
CBCR_OFFSET
 + 
ONE_HALF
-1;

111 
rgb_ycc_b
[
i
+
G_CR_OFF
] = (-
	`FIX
(0.41869)) * i;

112 
rgb_ycc_b
[
i
+
B_CR_OFF
] = (-
	`FIX
(0.08131)) * i;

114 
	}
}

129 
	$METHODDEF
()

130 
	$rgb_ycc_cÚv”t
 (
j_com´ess_±r
 
cšfo
,

131 
JSAMPARRAY
 
šput_buf
, 
JSAMPIMAGE
 
ouut_buf
,

132 
JDIMENSION
 
ouut_row
, 
num_rows
)

134 
my_ccÚv”t_±r
 
ccÚv”t
 = (my_ccÚv”t_±rè
cšfo
->cconvert;

135 
r
, 
g
, 
b
;

136 
INT32
 * 
ùab
 = 
ccÚv”t
->
rgb_ycc_b
;

137 
JSAMPROW
 
š±r
;

138 
JSAMPROW
 
ouŒ0
, 
ouŒ1
, 
ouŒ2
;

139 
JDIMENSION
 
cŞ
;

140 
JDIMENSION
 
num_cŞs
 = 
cšfo
->
image_width
;

142 --
num_rows
 >= 0) {

143 
š±r
 = *
šput_buf
++;

144 
ouŒ0
 = 
ouut_buf
[0][
ouut_row
];

145 
ouŒ1
 = 
ouut_buf
[1][
ouut_row
];

146 
ouŒ2
 = 
ouut_buf
[2][
ouut_row
];

147 
ouut_row
++;

148 
cŞ
 = 0; cŞ < 
num_cŞs
; col++) {

149 
r
 = 
	`GETJSAMPLE
(
š±r
[
RGB_RED
]);

150 
g
 = 
	`GETJSAMPLE
(
š±r
[
RGB_GREEN
]);

151 
b
 = 
	`GETJSAMPLE
(
š±r
[
RGB_BLUE
]);

152 
š±r
 +ğ
RGB_PIXELSIZE
;

159 
ouŒ0
[
cŞ
] = (
JSAMPLE
)

160 ((
ùab
[
r
+
R_Y_OFF
] + cb[
g
+
G_Y_OFF
] + cb[
b
+
B_Y_OFF
])

161 >> 
SCALEBITS
);

163 
ouŒ1
[
cŞ
] = (
JSAMPLE
)

164 ((
ùab
[
r
+
R_CB_OFF
] + cb[
g
+
G_CB_OFF
] + cb[
b
+
B_CB_OFF
])

165 >> 
SCALEBITS
);

167 
ouŒ2
[
cŞ
] = (
JSAMPLE
)

168 ((
ùab
[
r
+
R_CR_OFF
] + cb[
g
+
G_CR_OFF
] + cb[
b
+
B_CR_OFF
])

169 >> 
SCALEBITS
);

172 
	}
}

185 
	$METHODDEF
()

186 
	$rgb_g¿y_cÚv”t
 (
j_com´ess_±r
 
cšfo
,

187 
JSAMPARRAY
 
šput_buf
, 
JSAMPIMAGE
 
ouut_buf
,

188 
JDIMENSION
 
ouut_row
, 
num_rows
)

190 
my_ccÚv”t_±r
 
ccÚv”t
 = (my_ccÚv”t_±rè
cšfo
->cconvert;

191 
r
, 
g
, 
b
;

192 
INT32
 * 
ùab
 = 
ccÚv”t
->
rgb_ycc_b
;

193 
JSAMPROW
 
š±r
;

194 
JSAMPROW
 
ouŒ
;

195 
JDIMENSION
 
cŞ
;

196 
JDIMENSION
 
num_cŞs
 = 
cšfo
->
image_width
;

198 --
num_rows
 >= 0) {

199 
š±r
 = *
šput_buf
++;

200 
ouŒ
 = 
ouut_buf
[0][
ouut_row
];

201 
ouut_row
++;

202 
cŞ
 = 0; cŞ < 
num_cŞs
; col++) {

203 
r
 = 
	`GETJSAMPLE
(
š±r
[
RGB_RED
]);

204 
g
 = 
	`GETJSAMPLE
(
š±r
[
RGB_GREEN
]);

205 
b
 = 
	`GETJSAMPLE
(
š±r
[
RGB_BLUE
]);

206 
š±r
 +ğ
RGB_PIXELSIZE
;

208 
ouŒ
[
cŞ
] = (
JSAMPLE
)

209 ((
ùab
[
r
+
R_Y_OFF
] + cb[
g
+
G_Y_OFF
] + cb[
b
+
B_Y_OFF
])

210 >> 
SCALEBITS
);

213 
	}
}

224 
	$METHODDEF
()

225 
	$cmyk_ycck_cÚv”t
 (
j_com´ess_±r
 
cšfo
,

226 
JSAMPARRAY
 
šput_buf
, 
JSAMPIMAGE
 
ouut_buf
,

227 
JDIMENSION
 
ouut_row
, 
num_rows
)

229 
my_ccÚv”t_±r
 
ccÚv”t
 = (my_ccÚv”t_±rè
cšfo
->cconvert;

230 
r
, 
g
, 
b
;

231 
INT32
 * 
ùab
 = 
ccÚv”t
->
rgb_ycc_b
;

232 
JSAMPROW
 
š±r
;

233 
JSAMPROW
 
ouŒ0
, 
ouŒ1
, 
ouŒ2
, 
ouŒ3
;

234 
JDIMENSION
 
cŞ
;

235 
JDIMENSION
 
num_cŞs
 = 
cšfo
->
image_width
;

237 --
num_rows
 >= 0) {

238 
š±r
 = *
šput_buf
++;

239 
ouŒ0
 = 
ouut_buf
[0][
ouut_row
];

240 
ouŒ1
 = 
ouut_buf
[1][
ouut_row
];

241 
ouŒ2
 = 
ouut_buf
[2][
ouut_row
];

242 
ouŒ3
 = 
ouut_buf
[3][
ouut_row
];

243 
ouut_row
++;

244 
cŞ
 = 0; cŞ < 
num_cŞs
; col++) {

245 
r
 = 
MAXJSAMPLE
 - 
	`GETJSAMPLE
(
š±r
[0]);

246 
g
 = 
MAXJSAMPLE
 - 
	`GETJSAMPLE
(
š±r
[1]);

247 
b
 = 
MAXJSAMPLE
 - 
	`GETJSAMPLE
(
š±r
[2]);

249 
ouŒ3
[
cŞ
] = 
š±r
[3];

250 
š±r
 += 4;

257 
ouŒ0
[
cŞ
] = (
JSAMPLE
)

258 ((
ùab
[
r
+
R_Y_OFF
] + cb[
g
+
G_Y_OFF
] + cb[
b
+
B_Y_OFF
])

259 >> 
SCALEBITS
);

261 
ouŒ1
[
cŞ
] = (
JSAMPLE
)

262 ((
ùab
[
r
+
R_CB_OFF
] + cb[
g
+
G_CB_OFF
] + cb[
b
+
B_CB_OFF
])

263 >> 
SCALEBITS
);

265 
ouŒ2
[
cŞ
] = (
JSAMPLE
)

266 ((
ùab
[
r
+
R_CR_OFF
] + cb[
g
+
G_CR_OFF
] + cb[
b
+
B_CR_OFF
])

267 >> 
SCALEBITS
);

270 
	}
}

279 
	$METHODDEF
()

280 
	$g¿ysÿË_cÚv”t
 (
j_com´ess_±r
 
cšfo
,

281 
JSAMPARRAY
 
šput_buf
, 
JSAMPIMAGE
 
ouut_buf
,

282 
JDIMENSION
 
ouut_row
, 
num_rows
)

284 
JSAMPROW
 
š±r
;

285 
JSAMPROW
 
ouŒ
;

286 
JDIMENSION
 
cŞ
;

287 
JDIMENSION
 
num_cŞs
 = 
cšfo
->
image_width
;

288 
š¡ride
 = 
cšfo
->
šput_compÚ’ts
;

290 --
num_rows
 >= 0) {

291 
š±r
 = *
šput_buf
++;

292 
ouŒ
 = 
ouut_buf
[0][
ouut_row
];

293 
ouut_row
++;

294 
cŞ
 = 0; cŞ < 
num_cŞs
; col++) {

295 
ouŒ
[
cŞ
] = 
š±r
[0];

296 
š±r
 +ğ
š¡ride
;

299 
	}
}

308 
	$METHODDEF
()

309 
	$nuÎ_cÚv”t
 (
j_com´ess_±r
 
cšfo
,

310 
JSAMPARRAY
 
šput_buf
, 
JSAMPIMAGE
 
ouut_buf
,

311 
JDIMENSION
 
ouut_row
, 
num_rows
)

313 
JSAMPROW
 
š±r
;

314 
JSAMPROW
 
ouŒ
;

315 
JDIMENSION
 
cŞ
;

316 
ci
;

317 
nc
 = 
cšfo
->
num_compÚ’ts
;

318 
JDIMENSION
 
num_cŞs
 = 
cšfo
->
image_width
;

320 --
num_rows
 >= 0) {

322 
ci
 = 0; c˜< 
nc
; ci++) {

323 
š±r
 = *
šput_buf
;

324 
ouŒ
 = 
ouut_buf
[
ci
][
ouut_row
];

325 
cŞ
 = 0; cŞ < 
num_cŞs
; col++) {

326 
ouŒ
[
cŞ
] = 
š±r
[
ci
];

327 
š±r
 +ğ
nc
;

330 
šput_buf
++;

331 
ouut_row
++;

333 
	}
}

340 
	$METHODDEF
()

341 
	$nuÎ_m‘hod
 (
j_com´ess_±r
 
cšfo
)

344 
	}
}

351 
	$GLOBAL
()

352 
	$jš™_cŞÜ_cÚv”‹r
 (
j_com´ess_±r
 
cšfo
)

354 
my_ccÚv”t_±r
 
ccÚv”t
;

356 
ccÚv”t
 = (
my_ccÚv”t_±r
)

357 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

358 
	`SIZEOF
(
my_cŞÜ_cÚv”‹r
));

359 
cšfo
->
ccÚv”t
 = (
j³g_cŞÜ_cÚv”‹r
 *) cconvert;

361 
ccÚv”t
->
pub
.
¡¬t_·ss
 = 
nuÎ_m‘hod
;

364 
cšfo
->
š_cŞÜ_¥aû
) {

365 
JCS_GRAYSCALE
:

366 ià(
cšfo
->
šput_compÚ’ts
 != 1)

367 
	`ERREXIT
(
cšfo
, 
JERR_BAD_IN_COLORSPACE
);

370 
JCS_RGB
:

371 #ià
RGB_PIXELSIZE
 != 3

372 ià(
cšfo
->
šput_compÚ’ts
 !ğ
RGB_PIXELSIZE
)

373 
	`ERREXIT
(
cšfo
, 
JERR_BAD_IN_COLORSPACE
);

377 
JCS_YCbCr
:

378 ià(
cšfo
->
šput_compÚ’ts
 != 3)

379 
	`ERREXIT
(
cšfo
, 
JERR_BAD_IN_COLORSPACE
);

382 
JCS_CMYK
:

383 
JCS_YCCK
:

384 ià(
cšfo
->
šput_compÚ’ts
 != 4)

385 
	`ERREXIT
(
cšfo
, 
JERR_BAD_IN_COLORSPACE
);

389 ià(
cšfo
->
šput_compÚ’ts
 < 1)

390 
	`ERREXIT
(
cšfo
, 
JERR_BAD_IN_COLORSPACE
);

395 
cšfo
->
j³g_cŞÜ_¥aû
) {

396 
JCS_GRAYSCALE
:

397 ià(
cšfo
->
num_compÚ’ts
 != 1)

398 
	`ERREXIT
(
cšfo
, 
JERR_BAD_J_COLORSPACE
);

399 ià(
cšfo
->
š_cŞÜ_¥aû
 =ğ
JCS_GRAYSCALE
)

400 
ccÚv”t
->
pub
.
cŞÜ_cÚv”t
 = 
g¿ysÿË_cÚv”t
;

401 ià(
cšfo
->
š_cŞÜ_¥aû
 =ğ
JCS_RGB
) {

402 
ccÚv”t
->
pub
.
¡¬t_·ss
 = 
rgb_ycc_¡¬t
;

403 
ccÚv”t
->
pub
.
cŞÜ_cÚv”t
 = 
rgb_g¿y_cÚv”t
;

404 } ià(
cšfo
->
š_cŞÜ_¥aû
 =ğ
JCS_YCbCr
)

405 
ccÚv”t
->
pub
.
cŞÜ_cÚv”t
 = 
g¿ysÿË_cÚv”t
;

407 
	`ERREXIT
(
cšfo
, 
JERR_CONVERSION_NOTIMPL
);

410 
JCS_RGB
:

411 ià(
cšfo
->
num_compÚ’ts
 != 3)

412 
	`ERREXIT
(
cšfo
, 
JERR_BAD_J_COLORSPACE
);

413 ià(
cšfo
->
š_cŞÜ_¥aû
 =ğ
JCS_RGB
 && 
RGB_PIXELSIZE
 == 3)

414 
ccÚv”t
->
pub
.
cŞÜ_cÚv”t
 = 
nuÎ_cÚv”t
;

416 
	`ERREXIT
(
cšfo
, 
JERR_CONVERSION_NOTIMPL
);

419 
JCS_YCbCr
:

420 ià(
cšfo
->
num_compÚ’ts
 != 3)

421 
	`ERREXIT
(
cšfo
, 
JERR_BAD_J_COLORSPACE
);

422 ià(
cšfo
->
š_cŞÜ_¥aû
 =ğ
JCS_RGB
) {

423 
ccÚv”t
->
pub
.
¡¬t_·ss
 = 
rgb_ycc_¡¬t
;

424 
ccÚv”t
->
pub
.
cŞÜ_cÚv”t
 = 
rgb_ycc_cÚv”t
;

425 } ià(
cšfo
->
š_cŞÜ_¥aû
 =ğ
JCS_YCbCr
)

426 
ccÚv”t
->
pub
.
cŞÜ_cÚv”t
 = 
nuÎ_cÚv”t
;

428 
	`ERREXIT
(
cšfo
, 
JERR_CONVERSION_NOTIMPL
);

431 
JCS_CMYK
:

432 ià(
cšfo
->
num_compÚ’ts
 != 4)

433 
	`ERREXIT
(
cšfo
, 
JERR_BAD_J_COLORSPACE
);

434 ià(
cšfo
->
š_cŞÜ_¥aû
 =ğ
JCS_CMYK
)

435 
ccÚv”t
->
pub
.
cŞÜ_cÚv”t
 = 
nuÎ_cÚv”t
;

437 
	`ERREXIT
(
cšfo
, 
JERR_CONVERSION_NOTIMPL
);

440 
JCS_YCCK
:

441 ià(
cšfo
->
num_compÚ’ts
 != 4)

442 
	`ERREXIT
(
cšfo
, 
JERR_BAD_J_COLORSPACE
);

443 ià(
cšfo
->
š_cŞÜ_¥aû
 =ğ
JCS_CMYK
) {

444 
ccÚv”t
->
pub
.
¡¬t_·ss
 = 
rgb_ycc_¡¬t
;

445 
ccÚv”t
->
pub
.
cŞÜ_cÚv”t
 = 
cmyk_ycck_cÚv”t
;

446 } ià(
cšfo
->
š_cŞÜ_¥aû
 =ğ
JCS_YCCK
)

447 
ccÚv”t
->
pub
.
cŞÜ_cÚv”t
 = 
nuÎ_cÚv”t
;

449 
	`ERREXIT
(
cšfo
, 
JERR_CONVERSION_NOTIMPL
);

453 ià(
cšfo
->
j³g_cŞÜ_¥aû
 !ğcšfo->
š_cŞÜ_¥aû
 ||

454 
cšfo
->
num_compÚ’ts
 !ğcšfo->
šput_compÚ’ts
)

455 
	`ERREXIT
(
cšfo
, 
JERR_CONVERSION_NOTIMPL
);

456 
ccÚv”t
->
pub
.
cŞÜ_cÚv”t
 = 
nuÎ_cÚv”t
;

459 
	}
}

	@jcdctmgr.c

14 
	#JPEG_INTERNALS


	)

15 
	~"jšşude.h
"

16 
	~"j³glib.h
"

17 
	~"jdù.h
"

23 
j³g_fÜw¬d_dù
 
	mpub
;

26 
fÜw¬d_DCT_m‘hod_±r
 
	mdo_dù
;

32 
DCTELEM
 * 
	mdivisÜs
[
NUM_QUANT_TBLS
];

34 #ifdeà
DCT_FLOAT_SUPPORTED


36 
æßt_DCT_m‘hod_±r
 
	mdo_æßt_dù
;

37 
FAST_FLOAT
 * 
	mæßt_divisÜs
[
NUM_QUANT_TBLS
];

39 } 
	tmy_fdù_cÚŒŞËr
;

41 
my_fdù_cÚŒŞËr
 * 
	tmy_fdù_±r
;

53 
	$METHODDEF
()

54 
	$¡¬t_·ss_fdùmgr
 (
j_com´ess_±r
 
cšfo
)

56 
my_fdù_±r
 
fdù
 = (my_fdù_±rè
cšfo
->fdct;

57 
ci
, 
qtbÊo
, 
i
;

58 
j³g_compÚ’t_šfo
 *
comµŒ
;

59 
JQUANT_TBL
 * 
qtbl
;

60 
DCTELEM
 * 
dtbl
;

62 
ci
 = 0, 
comµŒ
 = 
cšfo
->
comp_šfo
; c˜< cšfo->
num_compÚ’ts
;

63 
ci
++, 
comµŒ
++) {

64 
qtbÊo
 = 
comµŒ
->
quªt_tbl_no
;

66 ià(
qtbÊo
 < 0 || qtbÊØ>ğ
NUM_QUANT_TBLS
 ||

67 
cšfo
->
quªt_tbl_±rs
[
qtbÊo
] =ğ
NULL
)

68 
	`ERREXIT1
(
cšfo
, 
JERR_NO_QUANT_TABLE
, 
qtbÊo
);

69 
qtbl
 = 
cšfo
->
quªt_tbl_±rs
[
qtbÊo
];

72 
cšfo
->
dù_m‘hod
) {

73 #ifdeà
DCT_ISLOW_SUPPORTED


74 
JDCT_ISLOW
:

78 ià(
fdù
->
divisÜs
[
qtbÊo
] =ğ
NULL
) {

79 
fdù
->
divisÜs
[
qtbÊo
] = (
DCTELEM
 *)

80 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

81 
DCTSIZE2
 * 
	`SIZEOF
(
DCTELEM
));

83 
dtbl
 = 
fdù
->
divisÜs
[
qtbÊo
];

84 
i
 = 0; i < 
DCTSIZE2
; i++) {

85 
dtbl
[
i
] = ((
DCTELEM
è
qtbl
->
quªtv®
[i]) << 3;

89 #ifdeà
DCT_IFAST_SUPPORTED


90 
JDCT_IFAST
:

98 
	#CONST_BITS
 14

	)

99 cÚ¡ 
INT16
 
¯nsÿËs
[
DCTSIZE2
] = {

110 
SHIFT_TEMPS


112 ià(
fdù
->
divisÜs
[
qtbÊo
] =ğ
NULL
) {

113 
fdù
->
divisÜs
[
qtbÊo
] = (
DCTELEM
 *)

114 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

115 
DCTSIZE2
 * 
	`SIZEOF
(
DCTELEM
));

117 
dtbl
 = 
fdù
->
divisÜs
[
qtbÊo
];

118 
i
 = 0; i < 
DCTSIZE2
; i++) {

119 
dtbl
[
i
] = (
DCTELEM
)

120 
	`DESCALE
(
	`MULTIPLY16V16
((
INT32
è
qtbl
->
quªtv®
[
i
],

121 (
INT32
è
¯nsÿËs
[
i
]),

122 
CONST_BITS
-3);

127 #ifdeà
DCT_FLOAT_SUPPORTED


128 
JDCT_FLOAT
:

138 
FAST_FLOAT
 * 
fdtbl
;

139 
row
, 
cŞ
;

140 cÚ¡ 
¯nsÿËçùÜ
[
DCTSIZE
] = {

145 ià(
fdù
->
æßt_divisÜs
[
qtbÊo
] =ğ
NULL
) {

146 
fdù
->
æßt_divisÜs
[
qtbÊo
] = (
FAST_FLOAT
 *)

147 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

148 
DCTSIZE2
 * 
	`SIZEOF
(
FAST_FLOAT
));

150 
fdtbl
 = 
fdù
->
æßt_divisÜs
[
qtbÊo
];

151 
i
 = 0;

152 
row
 = 0;„ow < 
DCTSIZE
;„ow++) {

153 
cŞ
 = 0; cŞ < 
DCTSIZE
; col++) {

154 
fdtbl
[
i
] = (
FAST_FLOAT
)

155 (1.0 / (((è
qtbl
->
quªtv®
[
i
] *

156 
¯nsÿËçùÜ
[
row
] *‡ªsÿËçùÜ[
cŞ
] * 8.0)));

157 
i
++;

164 
	`ERREXIT
(
cšfo
, 
JERR_NOT_COMPILED
);

168 
	}
}

179 
	$METHODDEF
()

180 
	$fÜw¬d_DCT
 (
j_com´ess_±r
 
cšfo
, 
j³g_compÚ’t_šfo
 * 
comµŒ
,

181 
JSAMPARRAY
 
§m¶e_d©a
, 
JBLOCKROW
 
cÛf_blocks
,

182 
JDIMENSION
 
¡¬t_row
, JDIMENSION 
¡¬t_cŞ
,

183 
JDIMENSION
 
num_blocks
)

187 
my_fdù_±r
 
fdù
 = (my_fdù_±rè
cšfo
->fdct;

188 
fÜw¬d_DCT_m‘hod_±r
 
do_dù
 = 
fdù
->do_dct;

189 
DCTELEM
 * 
divisÜs
 = 
fdù
->divisÜs[
comµŒ
->
quªt_tbl_no
];

190 
DCTELEM
 
wÜk¥aû
[
DCTSIZE2
];

191 
JDIMENSION
 
bi
;

193 
§m¶e_d©a
 +ğ
¡¬t_row
;

195 
bi
 = 0; b˜< 
num_blocks
; bi++, 
¡¬t_cŞ
 +ğ
DCTSIZE
) {

197 { 
DCTELEM
 *
wÜk¥aû±r
;

198 
JSAMPROW
 
–em±r
;

199 
–emr
;

201 
wÜk¥aû±r
 = 
wÜk¥aû
;

202 
–emr
 = 0;ƒËm¸< 
DCTSIZE
;ƒlemr++) {

203 
–em±r
 = 
§m¶e_d©a
[
–emr
] + 
¡¬t_cŞ
;

204 #ià
DCTSIZE
 == 8

205 *
wÜk¥aû±r
++ = 
	`GETJSAMPLE
(*
–em±r
++è- 
CENTERJSAMPLE
;

206 *
wÜk¥aû±r
++ = 
	`GETJSAMPLE
(*
–em±r
++è- 
CENTERJSAMPLE
;

207 *
wÜk¥aû±r
++ = 
	`GETJSAMPLE
(*
–em±r
++è- 
CENTERJSAMPLE
;

208 *
wÜk¥aû±r
++ = 
	`GETJSAMPLE
(*
–em±r
++è- 
CENTERJSAMPLE
;

209 *
wÜk¥aû±r
++ = 
	`GETJSAMPLE
(*
–em±r
++è- 
CENTERJSAMPLE
;

210 *
wÜk¥aû±r
++ = 
	`GETJSAMPLE
(*
–em±r
++è- 
CENTERJSAMPLE
;

211 *
wÜk¥aû±r
++ = 
	`GETJSAMPLE
(*
–em±r
++è- 
CENTERJSAMPLE
;

212 *
wÜk¥aû±r
++ = 
	`GETJSAMPLE
(*
–em±r
++è- 
CENTERJSAMPLE
;

214 { 
–emc
;

215 
–emc
 = 
DCTSIZE
;ƒlemc > 0;ƒlemc--) {

216 *
wÜk¥aû±r
++ = 
	`GETJSAMPLE
(*
–em±r
++è- 
CENTERJSAMPLE
;

224 (*
do_dù
è(
wÜk¥aû
);

227 { 
DCTELEM
 
‹mp
, 
qv®
;

228 
i
;

229 
JCOEFPTR
 
ouut_±r
 = 
cÛf_blocks
[
bi
];

231 
i
 = 0; i < 
DCTSIZE2
; i++) {

232 
qv®
 = 
divisÜs
[
i
];

233 
‹mp
 = 
wÜk¥aû
[
i
];

246 #ifdeà
FAST_DIVIDE


247 
	#DIVIDE_BY
(
a
,
b
è¨/ğ
	)
b

249 
	#DIVIDE_BY
(
a
,
b
èià× >ğbè¨/ğb; ¨ğ0

	)

251 ià(
‹mp
 < 0) {

252 
‹mp
 = -temp;

253 
‹mp
 +ğ
qv®
>>1;

254 
	`DIVIDE_BY
(
‹mp
, 
qv®
);

255 
‹mp
 = -temp;

257 
‹mp
 +ğ
qv®
>>1;

258 
	`DIVIDE_BY
(
‹mp
, 
qv®
);

260 
ouut_±r
[
i
] = (
JCOEF
è
‹mp
;

264 
	}
}

267 #ifdeà
DCT_FLOAT_SUPPORTED


269 
	$METHODDEF
()

270 
	$fÜw¬d_DCT_æßt
 (
j_com´ess_±r
 
cšfo
, 
j³g_compÚ’t_šfo
 * 
comµŒ
,

271 
JSAMPARRAY
 
§m¶e_d©a
, 
JBLOCKROW
 
cÛf_blocks
,

272 
JDIMENSION
 
¡¬t_row
, JDIMENSION 
¡¬t_cŞ
,

273 
JDIMENSION
 
num_blocks
)

277 
my_fdù_±r
 
fdù
 = (my_fdù_±rè
cšfo
->fdct;

278 
æßt_DCT_m‘hod_±r
 
do_dù
 = 
fdù
->
do_æßt_dù
;

279 
FAST_FLOAT
 * 
divisÜs
 = 
fdù
->
æßt_divisÜs
[
comµŒ
->
quªt_tbl_no
];

280 
FAST_FLOAT
 
wÜk¥aû
[
DCTSIZE2
];

281 
JDIMENSION
 
bi
;

283 
§m¶e_d©a
 +ğ
¡¬t_row
;

285 
bi
 = 0; b˜< 
num_blocks
; bi++, 
¡¬t_cŞ
 +ğ
DCTSIZE
) {

287 { 
FAST_FLOAT
 *
wÜk¥aû±r
;

288 
JSAMPROW
 
–em±r
;

289 
–emr
;

291 
wÜk¥aû±r
 = 
wÜk¥aû
;

292 
–emr
 = 0;ƒËm¸< 
DCTSIZE
;ƒlemr++) {

293 
–em±r
 = 
§m¶e_d©a
[
–emr
] + 
¡¬t_cŞ
;

294 #ià
DCTSIZE
 == 8

295 *
wÜk¥aû±r
++ = (
FAST_FLOAT
)(
	`GETJSAMPLE
(*
–em±r
++è- 
CENTERJSAMPLE
);

296 *
wÜk¥aû±r
++ = (
FAST_FLOAT
)(
	`GETJSAMPLE
(*
–em±r
++è- 
CENTERJSAMPLE
);

297 *
wÜk¥aû±r
++ = (
FAST_FLOAT
)(
	`GETJSAMPLE
(*
–em±r
++è- 
CENTERJSAMPLE
);

298 *
wÜk¥aû±r
++ = (
FAST_FLOAT
)(
	`GETJSAMPLE
(*
–em±r
++è- 
CENTERJSAMPLE
);

299 *
wÜk¥aû±r
++ = (
FAST_FLOAT
)(
	`GETJSAMPLE
(*
–em±r
++è- 
CENTERJSAMPLE
);

300 *
wÜk¥aû±r
++ = (
FAST_FLOAT
)(
	`GETJSAMPLE
(*
–em±r
++è- 
CENTERJSAMPLE
);

301 *
wÜk¥aû±r
++ = (
FAST_FLOAT
)(
	`GETJSAMPLE
(*
–em±r
++è- 
CENTERJSAMPLE
);

302 *
wÜk¥aû±r
++ = (
FAST_FLOAT
)(
	`GETJSAMPLE
(*
–em±r
++è- 
CENTERJSAMPLE
);

304 { 
–emc
;

305 
–emc
 = 
DCTSIZE
;ƒlemc > 0;ƒlemc--) {

306 *
wÜk¥aû±r
++ = (
FAST_FLOAT
)

307 (
	`GETJSAMPLE
(*
–em±r
++è- 
CENTERJSAMPLE
);

315 (*
do_dù
è(
wÜk¥aû
);

318 { 
FAST_FLOAT
 
‹mp
;

319 
i
;

320 
JCOEFPTR
 
ouut_±r
 = 
cÛf_blocks
[
bi
];

322 
i
 = 0; i < 
DCTSIZE2
; i++) {

324 
‹mp
 = 
wÜk¥aû
[
i
] * 
divisÜs
[i];

331 
ouut_±r
[
i
] = (
JCOEF
è((è(
‹mp
 + (
FAST_FLOAT
) 16384.5) - 16384);

335 
	}
}

344 
	$GLOBAL
()

345 
	$jš™_fÜw¬d_dù
 (
j_com´ess_±r
 
cšfo
)

347 
my_fdù_±r
 
fdù
;

348 
i
;

350 
fdù
 = (
my_fdù_±r
)

351 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

352 
	`SIZEOF
(
my_fdù_cÚŒŞËr
));

353 
cšfo
->
fdù
 = (
j³g_fÜw¬d_dù
 *) fdct;

354 
fdù
->
pub
.
¡¬t_·ss
 = 
¡¬t_·ss_fdùmgr
;

356 
cšfo
->
dù_m‘hod
) {

357 #ifdeà
DCT_ISLOW_SUPPORTED


358 
JDCT_ISLOW
:

359 
fdù
->
pub
.
fÜw¬d_DCT
 = forward_DCT;

360 
fdù
->
do_dù
 = 
j³g_fdù_i¦ow
;

363 #ifdeà
DCT_IFAST_SUPPORTED


364 
JDCT_IFAST
:

365 
fdù
->
pub
.
fÜw¬d_DCT
 = forward_DCT;

366 
fdù
->
do_dù
 = 
j³g_fdù_iç¡
;

369 #ifdeà
DCT_FLOAT_SUPPORTED


370 
JDCT_FLOAT
:

371 
fdù
->
pub
.
fÜw¬d_DCT
 = 
fÜw¬d_DCT_æßt
;

372 
fdù
->
do_æßt_dù
 = 
j³g_fdù_æßt
;

376 
	`ERREXIT
(
cšfo
, 
JERR_NOT_COMPILED
);

381 
i
 = 0; i < 
NUM_QUANT_TBLS
; i++) {

382 
fdù
->
divisÜs
[
i
] = 
NULL
;

383 #ifdeà
DCT_FLOAT_SUPPORTED


384 
fdù
->
æßt_divisÜs
[
i
] = 
NULL
;

387 
	}
}

	@jchuff.c

17 
	#JPEG_INTERNALS


	)

18 
	~"jšşude.h
"

19 
	~"j³glib.h
"

20 
	~"jchuff.h
"

30 
INT32
 
	mput_bufãr
;

31 
	mput_b™s
;

32 
	mÏ¡_dc_v®
[
MAX_COMPS_IN_SCAN
];

33 } 
	t§vabË_¡©e
;

40 #iâdeà
NO_STRUCT_ASSIGN


41 
	#ASSIGN_STATE
(
de¡
,
¤c
è((de¡èğ(¤c))

	)

43 #ià
MAX_COMPS_IN_SCAN
 == 4

44 
	#ASSIGN_STATE
(
de¡
,
¤c
) \

45 ((
de¡
).
put_bufãr
 = (
¤c
).put_buffer, \

46 (
de¡
).
put_b™s
 = (
¤c
).put_bits, \

47 (
de¡
).
Ï¡_dc_v®
[0] = (
¤c
).last_dc_val[0], \

48 (
de¡
).
Ï¡_dc_v®
[1] = (
¤c
).last_dc_val[1], \

49 (
de¡
).
Ï¡_dc_v®
[2] = (
¤c
).last_dc_val[2], \

50 (
de¡
).
Ï¡_dc_v®
[3] = (
¤c
).Ï¡_dc_v®[3])

	)

56 
j³g_’Œİy_’cod”
 
	mpub
;

58 
§vabË_¡©e
 
	m§ved
;

61 
	m»¡¬ts_to_go
;

62 
	mÃxt_»¡¬t_num
;

65 
c_d”ived_tbl
 * 
	mdc_d”ived_tbls
[
NUM_HUFF_TBLS
];

66 
c_d”ived_tbl
 * 
	mac_d”ived_tbls
[
NUM_HUFF_TBLS
];

68 #ifdeà
ENTROPY_OPT_SUPPORTED


69 * 
	mdc_couÁ_±rs
[
NUM_HUFF_TBLS
];

70 * 
	mac_couÁ_±rs
[
NUM_HUFF_TBLS
];

72 } 
	thuff_’Œİy_’cod”
;

74 
huff_’Œİy_’cod”
 * 
	thuff_’Œİy_±r
;

81 
JOCTET
 * 
	mÃxt_ouut_by‹
;

82 
size_t
 
	mä“_š_bufãr
;

83 
§vabË_¡©e
 
	mcur
;

84 
j_com´ess_±r
 
	mcšfo
;

85 } 
	twÜkšg_¡©e
;

89 
	$METHODDEF
(
boŞ—n
è
’code_mcu_huff
 
	`JPP
((
j_com´ess_±r
 
cšfo
,

90 
JBLOCKROW
 *
MCU_d©a
));

91 
	$METHODDEF
(è
fšish_·ss_huff
 
	`JPP
((
j_com´ess_±r
 
cšfo
));

92 #ifdeà
ENTROPY_OPT_SUPPORTED


93 
	$METHODDEF
(
boŞ—n
è
’code_mcu_g©h”
 
	`JPP
((
j_com´ess_±r
 
cšfo
,

94 
JBLOCKROW
 *
MCU_d©a
));

95 
	$METHODDEF
(è
fšish_·ss_g©h”
 
	`JPP
((
j_com´ess_±r
 
cšfo
));

105 
	$METHODDEF
()

106 
	$¡¬t_·ss_huff
 (
j_com´ess_±r
 
cšfo
, 
boŞ—n
 
g©h”_¡©i¡ics
)

108 
huff_’Œİy_±r
 
’Œİy
 = (huff_’Œİy_±rè
cšfo
->entropy;

109 
ci
, 
dùbl
, 
aùbl
;

110 
j³g_compÚ’t_šfo
 * 
comµŒ
;

112 ià(
g©h”_¡©i¡ics
) {

113 #ifdeà
ENTROPY_OPT_SUPPORTED


114 
’Œİy
->
pub
.
’code_mcu
 = 
’code_mcu_g©h”
;

115 
’Œİy
->
pub
.
fšish_·ss
 = 
fšish_·ss_g©h”
;

117 
	`ERREXIT
(
cšfo
, 
JERR_NOT_COMPILED
);

120 
’Œİy
->
pub
.
’code_mcu
 = 
’code_mcu_huff
;

121 
’Œİy
->
pub
.
fšish_·ss
 = 
fšish_·ss_huff
;

124 
ci
 = 0; c˜< 
cšfo
->
comps_š_sÿn
; ci++) {

125 
comµŒ
 = 
cšfo
->
cur_comp_šfo
[
ci
];

126 
dùbl
 = 
comµŒ
->
dc_tbl_no
;

127 
aùbl
 = 
comµŒ
->
ac_tbl_no
;

128 ià(
g©h”_¡©i¡ics
) {

129 #ifdeà
ENTROPY_OPT_SUPPORTED


132 ià(
dùbl
 < 0 || dùbÈ>ğ
NUM_HUFF_TBLS
)

133 
	`ERREXIT1
(
cšfo
, 
JERR_NO_HUFF_TABLE
, 
dùbl
);

134 ià(
aùbl
 < 0 ||‡ùbÈ>ğ
NUM_HUFF_TBLS
)

135 
	`ERREXIT1
(
cšfo
, 
JERR_NO_HUFF_TABLE
, 
aùbl
);

138 ià(
’Œİy
->
dc_couÁ_±rs
[
dùbl
] =ğ
NULL
)

139 
’Œİy
->
dc_couÁ_±rs
[
dùbl
] = (*)

140 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

141 257 * 
	`SIZEOF
());

142 
	`MEMZERO
(
’Œİy
->
dc_couÁ_±rs
[
dùbl
], 257 * 
	`SIZEOF
());

143 ià(
’Œİy
->
ac_couÁ_±rs
[
aùbl
] =ğ
NULL
)

144 
’Œİy
->
ac_couÁ_±rs
[
aùbl
] = (*)

145 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

146 257 * 
	`SIZEOF
());

147 
	`MEMZERO
(
’Œİy
->
ac_couÁ_±rs
[
aùbl
], 257 * 
	`SIZEOF
());

152 
	`j³g_make_c_d”ived_tbl
(
cšfo
, 
TRUE
, 
dùbl
,

153 & 
’Œİy
->
dc_d”ived_tbls
[
dùbl
]);

154 
	`j³g_make_c_d”ived_tbl
(
cšfo
, 
FALSE
, 
aùbl
,

155 & 
’Œİy
->
ac_d”ived_tbls
[
aùbl
]);

158 
’Œİy
->
§ved
.
Ï¡_dc_v®
[
ci
] = 0;

162 
’Œİy
->
§ved
.
put_bufãr
 = 0;

163 
’Œİy
->
§ved
.
put_b™s
 = 0;

166 
’Œİy
->
»¡¬ts_to_go
 = 
cšfo
->
»¡¬t_š‹rv®
;

167 
’Œİy
->
Ãxt_»¡¬t_num
 = 0;

168 
	}
}

178 
	$GLOBAL
()

179 
	$j³g_make_c_d”ived_tbl
 (
j_com´ess_±r
 
cšfo
, 
boŞ—n
 
isDC
, 
tbÊo
,

180 
c_d”ived_tbl
 ** 
pdtbl
)

182 
JHUFF_TBL
 *
htbl
;

183 
c_d”ived_tbl
 *
dtbl
;

184 
p
, 
i
, 
l
, 
Ï¡p
, 
si
, 
maxsymbŞ
;

185 
huffsize
[257];

186 
huffcode
[257];

187 
code
;

194 ià(
tbÊo
 < 0 ||bÊØ>ğ
NUM_HUFF_TBLS
)

195 
	`ERREXIT1
(
cšfo
, 
JERR_NO_HUFF_TABLE
, 
tbÊo
);

196 
htbl
 =

197 
isDC
 ? 
cšfo
->
dc_huff_tbl_±rs
[
tbÊo
] : cšfo->
ac_huff_tbl_±rs
[tblno];

198 ià(
htbl
 =ğ
NULL
)

199 
	`ERREXIT1
(
cšfo
, 
JERR_NO_HUFF_TABLE
, 
tbÊo
);

202 ià(*
pdtbl
 =ğ
NULL
)

203 *
pdtbl
 = (
c_d”ived_tbl
 *)

204 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

205 
	`SIZEOF
(
c_d”ived_tbl
));

206 
dtbl
 = *
pdtbl
;

210 
p
 = 0;

211 
l
 = 1;† <= 16;†++) {

212 
i
 = (è
htbl
->
b™s
[
l
];

213 ià(
i
 < 0 || 
p
 + i > 256)

214 
	`ERREXIT
(
cšfo
, 
JERR_BAD_HUFF_TABLE
);

215 
i
--)

216 
huffsize
[
p
++] = (è
l
;

218 
huffsize
[
p
] = 0;

219 
Ï¡p
 = 
p
;

224 
code
 = 0;

225 
si
 = 
huffsize
[0];

226 
p
 = 0;

227 
huffsize
[
p
]) {

228 ((è
huffsize
[
p
]è=ğ
si
) {

229 
huffcode
[
p
++] = 
code
;

230 
code
++;

235 ià(((
INT32
è
code
è>ğ(((INT32è1è<< 
si
))

236 
	`ERREXIT
(
cšfo
, 
JERR_BAD_HUFF_TABLE
);

237 
code
 <<= 1;

238 
si
++;

248 
	`MEMZERO
(
dtbl
->
ehufsi
, 
	`SIZEOF
(dtbl->ehufsi));

255 
maxsymbŞ
 = 
isDC
 ? 15 : 255;

257 
p
 = 0;… < 
Ï¡p
;…++) {

258 
i
 = 
htbl
->
huffv®
[
p
];

259 ià(
i
 < 0 || i > 
maxsymbŞ
 || 
dtbl
->
ehufsi
[i])

260 
	`ERREXIT
(
cšfo
, 
JERR_BAD_HUFF_TABLE
);

261 
dtbl
->
ehufco
[
i
] = 
huffcode
[
p
];

262 
dtbl
->
ehufsi
[
i
] = 
huffsize
[
p
];

264 
	}
}

270 
	#em™_by‹
(
¡©e
,
v®
,
aùiÚ
) \

271 { *(
¡©e
)->
Ãxt_ouut_by‹
++ = (
JOCTET
è(
v®
); \

272 ià(--(
¡©e
)->
ä“_š_bufãr
 == 0) \

273 ià(! 
	`dump_bufãr
(
¡©e
)) \

274 { 
aùiÚ
; } }

	)

277 
	$LOCAL
(
boŞ—n
)

278 
	$dump_bufãr
 (
wÜkšg_¡©e
 * 
¡©e
)

281 
j³g_de¡š©iÚ_mgr
 * 
de¡
 = 
¡©e
->
cšfo
->dest;

283 ià(! (*
de¡
->
em±y_ouut_bufãr
è(
¡©e
->
cšfo
))

284  
FALSE
;

286 
¡©e
->
Ãxt_ouut_by‹
 = 
de¡
->next_output_byte;

287 
¡©e
->
ä“_š_bufãr
 = 
de¡
->free_in_buffer;

288  
TRUE
;

289 
	}
}

300 
INLINE


301 
	$LOCAL
(
boŞ—n
)

302 
	$em™_b™s
 (
wÜkšg_¡©e
 * 
¡©e
, 
code
, 
size
)

306 
INT32
 
put_bufãr
 = (INT32è
code
;

307 
put_b™s
 = 
¡©e
->
cur
.put_bits;

310 ià(
size
 == 0)

311 
	`ERREXIT
(
¡©e
->
cšfo
, 
JERR_HUFF_MISSING_CODE
);

313 
put_bufãr
 &ğ(((
INT32
è1)<<
size
) - 1;

315 
put_b™s
 +ğ
size
;

317 
put_bufãr
 <<ğ24 - 
put_b™s
;

319 
put_bufãr
 |ğ
¡©e
->
cur
.put_buffer;

321 
put_b™s
 >= 8) {

322 
c
 = (è((
put_bufãr
 >> 16) & 0xFF);

324 
	`em™_by‹
(
¡©e
, 
c
,  
FALSE
);

325 ià(
c
 == 0xFF) {

326 
	`em™_by‹
(
¡©e
, 0,  
FALSE
);

328 
put_bufãr
 <<= 8;

329 
put_b™s
 -= 8;

332 
¡©e
->
cur
.
put_bufãr
 =…ut_buffer;

333 
¡©e
->
cur
.
put_b™s
 =…ut_bits;

335  
TRUE
;

336 
	}
}

339 
	$LOCAL
(
boŞ—n
)

340 
	$æush_b™s
 (
wÜkšg_¡©e
 * 
¡©e
)

342 ià(! 
	`em™_b™s
(
¡©e
, 0x7F, 7))

343  
FALSE
;

344 
¡©e
->
cur
.
put_bufãr
 = 0;

345 
¡©e
->
cur
.
put_b™s
 = 0;

346  
TRUE
;

347 
	}
}

352 
	$LOCAL
(
boŞ—n
)

353 
	$’code_Úe_block
 (
wÜkšg_¡©e
 * 
¡©e
, 
JCOEFPTR
 
block
, 
Ï¡_dc_v®
,

354 
c_d”ived_tbl
 *
dùbl
, c_d”ived_tbÈ*
aùbl
)

356 
‹mp
, 
‹mp2
;

357 
nb™s
;

358 
k
, 
r
, 
i
;

362 
‹mp
 = 
‹mp2
 = 
block
[0] - 
Ï¡_dc_v®
;

364 ià(
‹mp
 < 0) {

365 
‹mp
 = -temp;

368 
‹mp2
--;

372 
nb™s
 = 0;

373 
‹mp
) {

374 
nb™s
++;

375 
‹mp
 >>= 1;

380 ià(
nb™s
 > 
MAX_COEF_BITS
+1)

381 
	`ERREXIT
(
¡©e
->
cšfo
, 
JERR_BAD_DCT_COEF
);

384 ià(! 
	`em™_b™s
(
¡©e
, 
dùbl
->
ehufco
[
nb™s
], dùbl->
ehufsi
[nbits]))

385  
FALSE
;

389 ià(
nb™s
)

390 ià(! 
	`em™_b™s
(
¡©e
, (è
‹mp2
, 
nb™s
))

391  
FALSE
;

395 
r
 = 0;

397 
k
 = 1; k < 
DCTSIZE2
; k++) {

398 ià((
‹mp
 = 
block
[
j³g_Çtu¿l_Üd”
[
k
]]) == 0) {

399 
r
++;

402 
r
 > 15) {

403 ià(! 
	`em™_b™s
(
¡©e
, 
aùbl
->
ehufco
[0xF0],‡ùbl->
ehufsi
[0xF0]))

404  
FALSE
;

405 
r
 -= 16;

408 
‹mp2
 = 
‹mp
;

409 ià(
‹mp
 < 0) {

410 
‹mp
 = -temp;

412 
‹mp2
--;

416 
nb™s
 = 1;

417 (
‹mp
 >>= 1))

418 
nb™s
++;

420 ià(
nb™s
 > 
MAX_COEF_BITS
)

421 
	`ERREXIT
(
¡©e
->
cšfo
, 
JERR_BAD_DCT_COEF
);

424 
i
 = (
r
 << 4è+ 
nb™s
;

425 ià(! 
	`em™_b™s
(
¡©e
, 
aùbl
->
ehufco
[
i
],‡ùbl->
ehufsi
[i]))

426  
FALSE
;

430 ià(! 
	`em™_b™s
(
¡©e
, (è
‹mp2
, 
nb™s
))

431  
FALSE
;

433 
r
 = 0;

438 ià(
r
 > 0)

439 ià(! 
	`em™_b™s
(
¡©e
, 
aùbl
->
ehufco
[0],‡ùbl->
ehufsi
[0]))

440  
FALSE
;

442  
TRUE
;

443 
	}
}

450 
	$LOCAL
(
boŞ—n
)

451 
	$em™_»¡¬t
 (
wÜkšg_¡©e
 * 
¡©e
, 
»¡¬t_num
)

453 
ci
;

455 ià(! 
	`æush_b™s
(
¡©e
))

456  
FALSE
;

458 
	`em™_by‹
(
¡©e
, 0xFF,  
FALSE
);

459 
	`em™_by‹
(
¡©e
, 
JPEG_RST0
 + 
»¡¬t_num
,  
FALSE
);

462 
ci
 = 0; c˜< 
¡©e
->
cšfo
->
comps_š_sÿn
; ci++)

463 
¡©e
->
cur
.
Ï¡_dc_v®
[
ci
] = 0;

467  
TRUE
;

468 
	}
}

475 
	$METHODDEF
(
boŞ—n
)

476 
	$’code_mcu_huff
 (
j_com´ess_±r
 
cšfo
, 
JBLOCKROW
 *
MCU_d©a
)

478 
huff_’Œİy_±r
 
’Œİy
 = (huff_’Œİy_±rè
cšfo
->entropy;

479 
wÜkšg_¡©e
 
¡©e
;

480 
blkn
, 
ci
;

481 
j³g_compÚ’t_šfo
 * 
comµŒ
;

484 
¡©e
.
Ãxt_ouut_by‹
 = 
cšfo
->
de¡
->next_output_byte;

485 
¡©e
.
ä“_š_bufãr
 = 
cšfo
->
de¡
->free_in_buffer;

486 
	`ASSIGN_STATE
(
¡©e
.
cur
, 
’Œİy
->
§ved
);

487 
¡©e
.
cšfo
 = cinfo;

490 ià(
cšfo
->
»¡¬t_š‹rv®
) {

491 ià(
’Œİy
->
»¡¬ts_to_go
 == 0)

492 ià(! 
	`em™_»¡¬t
(&
¡©e
, 
’Œİy
->
Ãxt_»¡¬t_num
))

493  
FALSE
;

497 
blkn
 = 0; blkÀ< 
cšfo
->
blocks_š_MCU
; blkn++) {

498 
ci
 = 
cšfo
->
MCU_memb”sh
[
blkn
];

499 
comµŒ
 = 
cšfo
->
cur_comp_šfo
[
ci
];

500 ià(! 
	`’code_Úe_block
(&
¡©e
,

501 
MCU_d©a
[
blkn
][0], 
¡©e
.
cur
.
Ï¡_dc_v®
[
ci
],

502 
’Œİy
->
dc_d”ived_tbls
[
comµŒ
->
dc_tbl_no
],

503 
’Œİy
->
ac_d”ived_tbls
[
comµŒ
->
ac_tbl_no
]))

504  
FALSE
;

506 
¡©e
.
cur
.
Ï¡_dc_v®
[
ci
] = 
MCU_d©a
[
blkn
][0][0];

510 
cšfo
->
de¡
->
Ãxt_ouut_by‹
 = 
¡©e
.next_output_byte;

511 
cšfo
->
de¡
->
ä“_š_bufãr
 = 
¡©e
.free_in_buffer;

512 
	`ASSIGN_STATE
(
’Œİy
->
§ved
, 
¡©e
.
cur
);

515 ià(
cšfo
->
»¡¬t_š‹rv®
) {

516 ià(
’Œİy
->
»¡¬ts_to_go
 == 0) {

517 
’Œİy
->
»¡¬ts_to_go
 = 
cšfo
->
»¡¬t_š‹rv®
;

518 
’Œİy
->
Ãxt_»¡¬t_num
++;

519 
’Œİy
->
Ãxt_»¡¬t_num
 &= 7;

521 
’Œİy
->
»¡¬ts_to_go
--;

524  
TRUE
;

525 
	}
}

532 
	$METHODDEF
()

533 
	$fšish_·ss_huff
 (
j_com´ess_±r
 
cšfo
)

535 
huff_’Œİy_±r
 
’Œİy
 = (huff_’Œİy_±rè
cšfo
->entropy;

536 
wÜkšg_¡©e
 
¡©e
;

539 
¡©e
.
Ãxt_ouut_by‹
 = 
cšfo
->
de¡
->next_output_byte;

540 
¡©e
.
ä“_š_bufãr
 = 
cšfo
->
de¡
->free_in_buffer;

541 
	`ASSIGN_STATE
(
¡©e
.
cur
, 
’Œİy
->
§ved
);

542 
¡©e
.
cšfo
 = cinfo;

545 ià(! 
	`æush_b™s
(&
¡©e
))

546 
	`ERREXIT
(
cšfo
, 
JERR_CANT_SUSPEND
);

549 
cšfo
->
de¡
->
Ãxt_ouut_by‹
 = 
¡©e
.next_output_byte;

550 
cšfo
->
de¡
->
ä“_š_bufãr
 = 
¡©e
.free_in_buffer;

551 
	`ASSIGN_STATE
(
’Œİy
->
§ved
, 
¡©e
.
cur
);

552 
	}
}

566 #ifdeà
ENTROPY_OPT_SUPPORTED


571 
	$LOCAL
()

572 
	$h‹¡_Úe_block
 (
j_com´ess_±r
 
cšfo
, 
JCOEFPTR
 
block
, 
Ï¡_dc_v®
,

573 
dc_couÁs
[], 
ac_couÁs
[])

575 
‹mp
;

576 
nb™s
;

577 
k
, 
r
;

581 
‹mp
 = 
block
[0] - 
Ï¡_dc_v®
;

582 ià(
‹mp
 < 0)

583 
‹mp
 = -temp;

586 
nb™s
 = 0;

587 
‹mp
) {

588 
nb™s
++;

589 
‹mp
 >>= 1;

594 ià(
nb™s
 > 
MAX_COEF_BITS
+1)

595 
	`ERREXIT
(
cšfo
, 
JERR_BAD_DCT_COEF
);

598 
dc_couÁs
[
nb™s
]++;

602 
r
 = 0;

604 
k
 = 1; k < 
DCTSIZE2
; k++) {

605 ià((
‹mp
 = 
block
[
j³g_Çtu¿l_Üd”
[
k
]]) == 0) {

606 
r
++;

609 
r
 > 15) {

610 
ac_couÁs
[0xF0]++;

611 
r
 -= 16;

615 ià(
‹mp
 < 0)

616 
‹mp
 = -temp;

619 
nb™s
 = 1;

620 (
‹mp
 >>= 1))

621 
nb™s
++;

623 ià(
nb™s
 > 
MAX_COEF_BITS
)

624 
	`ERREXIT
(
cšfo
, 
JERR_BAD_DCT_COEF
);

627 
ac_couÁs
[(
r
 << 4è+ 
nb™s
]++;

629 
r
 = 0;

634 ià(
r
 > 0)

635 
ac_couÁs
[0]++;

636 
	}
}

644 
	$METHODDEF
(
boŞ—n
)

645 
	$’code_mcu_g©h”
 (
j_com´ess_±r
 
cšfo
, 
JBLOCKROW
 *
MCU_d©a
)

647 
huff_’Œİy_±r
 
’Œİy
 = (huff_’Œİy_±rè
cšfo
->entropy;

648 
blkn
, 
ci
;

649 
j³g_compÚ’t_šfo
 * 
comµŒ
;

652 ià(
cšfo
->
»¡¬t_š‹rv®
) {

653 ià(
’Œİy
->
»¡¬ts_to_go
 == 0) {

655 
ci
 = 0; c˜< 
cšfo
->
comps_š_sÿn
; ci++)

656 
’Œİy
->
§ved
.
Ï¡_dc_v®
[
ci
] = 0;

658 
’Œİy
->
»¡¬ts_to_go
 = 
cšfo
->
»¡¬t_š‹rv®
;

660 
’Œİy
->
»¡¬ts_to_go
--;

663 
blkn
 = 0; blkÀ< 
cšfo
->
blocks_š_MCU
; blkn++) {

664 
ci
 = 
cšfo
->
MCU_memb”sh
[
blkn
];

665 
comµŒ
 = 
cšfo
->
cur_comp_šfo
[
ci
];

666 
	`h‹¡_Úe_block
(
cšfo
, 
MCU_d©a
[
blkn
][0], 
’Œİy
->
§ved
.
Ï¡_dc_v®
[
ci
],

667 
’Œİy
->
dc_couÁ_±rs
[
comµŒ
->
dc_tbl_no
],

668 
’Œİy
->
ac_couÁ_±rs
[
comµŒ
->
ac_tbl_no
]);

669 
’Œİy
->
§ved
.
Ï¡_dc_v®
[
ci
] = 
MCU_d©a
[
blkn
][0][0];

672  
TRUE
;

673 
	}
}

704 
	$GLOBAL
()

705 
	$j³g_g’_İtim®_bË
 (
j_com´ess_±r
 
cšfo
, 
JHUFF_TBL
 * 
htbl
, 
äeq
[])

707 
	#MAX_CLEN
 32

	)

708 
UINT8
 
b™s
[
MAX_CLEN
+1];

709 
codesize
[257];

710 
Ùh”s
[257];

711 
c1
, 
c2
;

712 
p
, 
i
, 
j
;

713 
v
;

717 
	`MEMZERO
(
b™s
, 
	`SIZEOF
(bits));

718 
	`MEMZERO
(
codesize
, 
	`SIZEOF
(codesize));

719 
i
 = 0; i < 257; i++)

720 
Ùh”s
[
i
] = -1;

722 
äeq
[256] = 1;

733 
c1
 = -1;

734 
v
 = 1000000000L;

735 
i
 = 0; i <= 256; i++) {

736 ià(
äeq
[
i
] && f»q[i] <ğ
v
) {

737 
v
 = 
äeq
[
i
];

738 
c1
 = 
i
;

744 
c2
 = -1;

745 
v
 = 1000000000L;

746 
i
 = 0; i <= 256; i++) {

747 ià(
äeq
[
i
] && f»q[i] <ğ
v
 && i !ğ
c1
) {

748 
v
 = 
äeq
[
i
];

749 
c2
 = 
i
;

754 ià(
c2
 < 0)

758 
äeq
[
c1
] +ğäeq[
c2
];

759 
äeq
[
c2
] = 0;

762 
codesize
[
c1
]++;

763 
Ùh”s
[
c1
] >= 0) {

764 
c1
 = 
Ùh”s
[c1];

765 
codesize
[
c1
]++;

768 
Ùh”s
[
c1
] = 
c2
;

771 
codesize
[
c2
]++;

772 
Ùh”s
[
c2
] >= 0) {

773 
c2
 = 
Ùh”s
[c2];

774 
codesize
[
c2
]++;

779 
i
 = 0; i <= 256; i++) {

780 ià(
codesize
[
i
]) {

783 ià(
codesize
[
i
] > 
MAX_CLEN
)

784 
	`ERREXIT
(
cšfo
, 
JERR_HUFF_CLEN_OVERFLOW
);

786 
b™s
[
codesize
[
i
]]++;

801 
i
 = 
MAX_CLEN
; i > 16; i--) {

802 
b™s
[
i
] > 0) {

803 
j
 = 
i
 - 2;

804 
b™s
[
j
] == 0)

805 
j
--;

807 
b™s
[
i
] -= 2;

808 
b™s
[
i
-1]++;

809 
b™s
[
j
+1] += 2;

810 
b™s
[
j
]--;

815 
b™s
[
i
] == 0)

816 
i
--;

817 
b™s
[
i
]--;

820 
	`MEMCOPY
(
htbl
->
b™s
, b™s, 
	`SIZEOF
(htbl->bits));

826 
p
 = 0;

827 
i
 = 1; i <ğ
MAX_CLEN
; i++) {

828 
j
 = 0; j <= 255; j++) {

829 ià(
codesize
[
j
] =ğ
i
) {

830 
htbl
->
huffv®
[
p
] = (
UINT8
è
j
;

831 
p
++;

837 
htbl
->
£Á_bË
 = 
FALSE
;

838 
	}
}

845 
	$METHODDEF
()

846 
	$fšish_·ss_g©h”
 (
j_com´ess_±r
 
cšfo
)

848 
huff_’Œİy_±r
 
’Œİy
 = (huff_’Œİy_±rè
cšfo
->entropy;

849 
ci
, 
dùbl
, 
aùbl
;

850 
j³g_compÚ’t_šfo
 * 
comµŒ
;

851 
JHUFF_TBL
 **
htbÍŒ
;

852 
boŞ—n
 
did_dc
[
NUM_HUFF_TBLS
];

853 
boŞ—n
 
did_ac
[
NUM_HUFF_TBLS
];

858 
	`MEMZERO
(
did_dc
, 
	`SIZEOF
(did_dc));

859 
	`MEMZERO
(
did_ac
, 
	`SIZEOF
(did_ac));

861 
ci
 = 0; c˜< 
cšfo
->
comps_š_sÿn
; ci++) {

862 
comµŒ
 = 
cšfo
->
cur_comp_šfo
[
ci
];

863 
dùbl
 = 
comµŒ
->
dc_tbl_no
;

864 
aùbl
 = 
comµŒ
->
ac_tbl_no
;

865 ià(! 
did_dc
[
dùbl
]) {

866 
htbÍŒ
 = & 
cšfo
->
dc_huff_tbl_±rs
[
dùbl
];

867 ià(*
htbÍŒ
 =ğ
NULL
)

868 *
htbÍŒ
 = 
	`j³g_®loc_huff_bË
((
j_commÚ_±r
è
cšfo
);

869 
	`j³g_g’_İtim®_bË
(
cšfo
, *
htbÍŒ
, 
’Œİy
->
dc_couÁ_±rs
[
dùbl
]);

870 
did_dc
[
dùbl
] = 
TRUE
;

872 ià(! 
did_ac
[
aùbl
]) {

873 
htbÍŒ
 = & 
cšfo
->
ac_huff_tbl_±rs
[
aùbl
];

874 ià(*
htbÍŒ
 =ğ
NULL
)

875 *
htbÍŒ
 = 
	`j³g_®loc_huff_bË
((
j_commÚ_±r
è
cšfo
);

876 
	`j³g_g’_İtim®_bË
(
cšfo
, *
htbÍŒ
, 
’Œİy
->
ac_couÁ_±rs
[
aùbl
]);

877 
did_ac
[
aùbl
] = 
TRUE
;

880 
	}
}

890 
	$GLOBAL
()

891 
	$jš™_huff_’cod”
 (
j_com´ess_±r
 
cšfo
)

893 
huff_’Œİy_±r
 
’Œİy
;

894 
i
;

896 
’Œİy
 = (
huff_’Œİy_±r
)

897 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

898 
	`SIZEOF
(
huff_’Œİy_’cod”
));

899 
cšfo
->
’Œİy
 = (
j³g_’Œİy_’cod”
 *)ƒntropy;

900 
’Œİy
->
pub
.
¡¬t_·ss
 = 
¡¬t_·ss_huff
;

903 
i
 = 0; i < 
NUM_HUFF_TBLS
; i++) {

904 
’Œİy
->
dc_d”ived_tbls
[
i
] =ƒÁrİy->
ac_d”ived_tbls
[i] = 
NULL
;

905 #ifdeà
ENTROPY_OPT_SUPPORTED


906 
’Œİy
->
dc_couÁ_±rs
[
i
] =ƒÁrİy->
ac_couÁ_±rs
[i] = 
NULL
;

909 
	}
}

	@jchuff.h

19 #ià
BITS_IN_JSAMPLE
 == 8

20 
	#MAX_COEF_BITS
 10

	)

22 
	#MAX_COEF_BITS
 14

	)

28 
	mehufco
[256];

29 
	mehufsi
[256];

31 } 
	tc_d”ived_tbl
;

35 #ifdeà
NEED_SHORT_EXTERNAL_NAMES


36 
	#j³g_make_c_d”ived_tbl
 
jMkCD”ived


	)

37 
	#j³g_g’_İtim®_bË
 
jG’O±Tbl


	)

41 
	$EXTERN
(è
j³g_make_c_d”ived_tbl


42 
	`JPP
((
j_com´ess_±r
 
cšfo
, 
boŞ—n
 
isDC
, 
tbÊo
,

43 
c_d”ived_tbl
 ** 
pdtbl
));

46 
	$EXTERN
(è
j³g_g’_İtim®_bË


47 
	`JPP
((
j_com´ess_±r
 
cšfo
, 
JHUFF_TBL
 * 
htbl
, 
äeq
[]));

	@jcinit.c

18 
	#JPEG_INTERNALS


	)

19 
	~"jšşude.h
"

20 
	~"j³glib.h
"

29 
	$GLOBAL
()

30 
	$jš™_com´ess_ma¡”
 (
j_com´ess_±r
 
cšfo
)

33 
	`jš™_c_ma¡”_cÚŒŞ
(
cšfo
, 
FALSE
 );

36 ià(! 
cšfo
->
¿w_d©a_š
) {

37 
	`jš™_cŞÜ_cÚv”‹r
(
cšfo
);

38 
	`jš™_down§m¶”
(
cšfo
);

39 
	`jš™_c_´•_cÚŒŞËr
(
cšfo
, 
FALSE
 );

42 
	`jš™_fÜw¬d_dù
(
cšfo
);

44 ià(
cšfo
->
¬™h_code
) {

45 
	`ERREXIT
(
cšfo
, 
JERR_ARITH_NOTIMPL
);

47 ià(
cšfo
->
´og»ssive_mode
) {

48 #ifdeà
C_PROGRESSIVE_SUPPORTED


49 
	`jš™_phuff_’cod”
(
cšfo
);

51 
	`ERREXIT
(
cšfo
, 
JERR_NOT_COMPILED
);

54 
	`jš™_huff_’cod”
(
cšfo
);

58 
	`jš™_c_cÛf_cÚŒŞËr
(
cšfo
,

59 (
boŞ—n
è(
cšfo
->
num_sÿns
 > 1 || cšfo->
İtimize_codšg
));

60 
	`jš™_c_maš_cÚŒŞËr
(
cšfo
, 
FALSE
 );

62 
	`jš™_m¬k”_wr™”
(
cšfo
);

65 (*
cšfo
->
mem
->
»®ize_vœt_¬¿ys
è((
j_commÚ_±r
) cinfo);

71 (*
cšfo
->
m¬k”
->
wr™e_fe_h—d”
) (cinfo);

72 
	}
}

	@jcmainct.c

13 
	#JPEG_INTERNALS


	)

14 
	~"jšşude.h
"

15 
	~"j³glib.h
"

23 #undeà
FULL_MAIN_BUFFER_SUPPORTED


29 
j³g_c_maš_cÚŒŞËr
 
	mpub
;

31 
JDIMENSION
 
	mcur_iMCU_row
;

32 
JDIMENSION
 
	mrowgroup_ùr
;

33 
boŞ—n
 
	msu¥’ded
;

34 
J_BUF_MODE
 
	m·ss_mode
;

40 
JSAMPARRAY
 
	mbufãr
[
MAX_COMPONENTS
];

42 #ifdeà
FULL_MAIN_BUFFER_SUPPORTED


46 
jvœt_§¼ay_±r
 
	mwhŞe_image
[
MAX_COMPONENTS
];

48 } 
	tmy_maš_cÚŒŞËr
;

50 
my_maš_cÚŒŞËr
 * 
	tmy_maš_±r
;

54 
	$METHODDEF
(è
´oûss_d©a_sim¶e_maš


55 
	`JPP
((
j_com´ess_±r
 
cšfo
, 
JSAMPARRAY
 
šput_buf
,

56 
JDIMENSION
 *
š_row_ùr
, JDIMENSION 
š_rows_ava
));

57 #ifdeà
FULL_MAIN_BUFFER_SUPPORTED


58 
	$METHODDEF
(è
´oûss_d©a_bufãr_maš


59 
	`JPP
((
j_com´ess_±r
 
cšfo
, 
JSAMPARRAY
 
šput_buf
,

60 
JDIMENSION
 *
š_row_ùr
, JDIMENSION 
š_rows_ava
));

68 
	$METHODDEF
()

69 
	$¡¬t_·ss_maš
 (
j_com´ess_±r
 
cšfo
, 
J_BUF_MODE
 
·ss_mode
)

71 
my_maš_±r
 
maš
 = (my_maš_±rè
cšfo
->main;

74 ià(
cšfo
->
¿w_d©a_š
)

77 
maš
->
cur_iMCU_row
 = 0;

78 
maš
->
rowgroup_ùr
 = 0;

79 
maš
->
su¥’ded
 = 
FALSE
;

80 
maš
->
·ss_mode
 =…ass_mode;

82 
·ss_mode
) {

83 
JBUF_PASS_THRU
:

84 #ifdeà
FULL_MAIN_BUFFER_SUPPORTED


85 ià(
maš
->
whŞe_image
[0] !ğ
NULL
)

86 
	`ERREXIT
(
cšfo
, 
JERR_BAD_BUFFER_MODE
);

88 
maš
->
pub
.
´oûss_d©a
 = 
´oûss_d©a_sim¶e_maš
;

90 #ifdeà
FULL_MAIN_BUFFER_SUPPORTED


91 
JBUF_SAVE_SOURCE
:

92 
JBUF_CRANK_DEST
:

93 
JBUF_SAVE_AND_PASS
:

94 ià(
maš
->
whŞe_image
[0] =ğ
NULL
)

95 
	`ERREXIT
(
cšfo
, 
JERR_BAD_BUFFER_MODE
);

96 
maš
->
pub
.
´oûss_d©a
 = 
´oûss_d©a_bufãr_maš
;

100 
	`ERREXIT
(
cšfo
, 
JERR_BAD_BUFFER_MODE
);

103 
	}
}

112 
	$METHODDEF
()

113 
	$´oûss_d©a_sim¶e_maš
 (
j_com´ess_±r
 
cšfo
,

114 
JSAMPARRAY
 
šput_buf
, 
JDIMENSION
 *
š_row_ùr
,

115 
JDIMENSION
 
š_rows_ava
)

117 
my_maš_±r
 
maš
 = (my_maš_±rè
cšfo
->main;

119 
maš
->
cur_iMCU_row
 < 
cšfo
->
tÙ®_iMCU_rows
) {

121 ià(
maš
->
rowgroup_ùr
 < 
DCTSIZE
)

122 (*
cšfo
->
´•
->
´e_´oûss_d©a
) (cinfo,

123 
šput_buf
, 
š_row_ùr
, 
š_rows_ava
,

124 
maš
->
bufãr
, &maš->
rowgroup_ùr
,

125 (
JDIMENSION
è
DCTSIZE
);

131 ià(
maš
->
rowgroup_ùr
 !ğ
DCTSIZE
)

135 ià(! (*
cšfo
->
cÛf
->
com´ess_d©a
è(cšfo, 
maš
->
bufãr
)) {

142 ià(! 
maš
->
su¥’ded
) {

143 (*
š_row_ùr
)--;

144 
maš
->
su¥’ded
 = 
TRUE
;

151 ià(
maš
->
su¥’ded
) {

152 (*
š_row_ùr
)++;

153 
maš
->
su¥’ded
 = 
FALSE
;

155 
maš
->
rowgroup_ùr
 = 0;

156 
maš
->
cur_iMCU_row
++;

158 
	}
}

161 #ifdeà
FULL_MAIN_BUFFER_SUPPORTED


168 
	$METHODDEF
()

169 
	$´oûss_d©a_bufãr_maš
 (
j_com´ess_±r
 
cšfo
,

170 
JSAMPARRAY
 
šput_buf
, 
JDIMENSION
 *
š_row_ùr
,

171 
JDIMENSION
 
š_rows_ava
)

173 
my_maš_±r
 
maš
 = (my_maš_±rè
cšfo
->main;

174 
ci
;

175 
j³g_compÚ’t_šfo
 *
comµŒ
;

176 
boŞ—n
 
wr™šg
 = (
maš
->
·ss_mode
 !ğ
JBUF_CRANK_DEST
);

178 
maš
->
cur_iMCU_row
 < 
cšfo
->
tÙ®_iMCU_rows
) {

180 ià(
maš
->
rowgroup_ùr
 == 0) {

181 
ci
 = 0, 
comµŒ
 = 
cšfo
->
comp_šfo
; c˜< cšfo->
num_compÚ’ts
;

182 
ci
++, 
comµŒ
++) {

183 
maš
->
bufãr
[
ci
] = (*
cšfo
->
mem
->
acûss_vœt_§¼ay
)

184 ((
j_commÚ_±r
è
cšfo
, 
maš
->
whŞe_image
[
ci
],

185 
maš
->
cur_iMCU_row
 * (
comµŒ
->
v_§mp_çùÜ
 * 
DCTSIZE
),

186 (
JDIMENSION
è(
comµŒ
->
v_§mp_çùÜ
 * 
DCTSIZE
), 
wr™šg
);

189 ià(! 
wr™šg
) {

190 *
š_row_ùr
 +ğ
cšfo
->
max_v_§mp_çùÜ
 * 
DCTSIZE
;

191 
maš
->
rowgroup_ùr
 = 
DCTSIZE
;

197 ià(
wr™šg
) {

198 (*
cšfo
->
´•
->
´e_´oûss_d©a
) (cinfo,

199 
šput_buf
, 
š_row_ùr
, 
š_rows_ava
,

200 
maš
->
bufãr
, &maš->
rowgroup_ùr
,

201 (
JDIMENSION
è
DCTSIZE
);

203 ià(
maš
->
rowgroup_ùr
 < 
DCTSIZE
)

208 ià(
maš
->
·ss_mode
 !ğ
JBUF_SAVE_SOURCE
) {

209 ià(! (*
cšfo
->
cÛf
->
com´ess_d©a
è(cšfo, 
maš
->
bufãr
)) {

216 ià(! 
maš
->
su¥’ded
) {

217 (*
š_row_ùr
)--;

218 
maš
->
su¥’ded
 = 
TRUE
;

225 ià(
maš
->
su¥’ded
) {

226 (*
š_row_ùr
)++;

227 
maš
->
su¥’ded
 = 
FALSE
;

232 
maš
->
rowgroup_ùr
 = 0;

233 
maš
->
cur_iMCU_row
++;

235 
	}
}

244 
	$GLOBAL
()

245 
	$jš™_c_maš_cÚŒŞËr
 (
j_com´ess_±r
 
cšfo
, 
boŞ—n
 
Ãed_fuÎ_bufãr
)

247 
my_maš_±r
 
maš
;

248 
ci
;

249 
j³g_compÚ’t_šfo
 *
comµŒ
;

251 
maš
 = (
my_maš_±r
)

252 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

253 
	`SIZEOF
(
my_maš_cÚŒŞËr
));

254 
cšfo
->
maš
 = (
j³g_c_maš_cÚŒŞËr
 *) main;

255 
maš
->
pub
.
¡¬t_·ss
 = 
¡¬t_·ss_maš
;

258 ià(
cšfo
->
¿w_d©a_š
)

264 ià(
Ãed_fuÎ_bufãr
) {

265 #ifdeà
FULL_MAIN_BUFFER_SUPPORTED


268 
ci
 = 0, 
comµŒ
 = 
cšfo
->
comp_šfo
; c˜< cšfo->
num_compÚ’ts
;

269 
ci
++, 
comµŒ
++) {

270 
maš
->
whŞe_image
[
ci
] = (*
cšfo
->
mem
->
»que¡_vœt_§¼ay
)

271 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
, 
FALSE
,

272 
comµŒ
->
width_š_blocks
 * 
DCTSIZE
,

273 (
JDIMENSION
è
	`jround_up
((è
comµŒ
->
height_š_blocks
,

274 (è
comµŒ
->
v_§mp_çùÜ
è* 
DCTSIZE
,

275 (
JDIMENSION
è(
comµŒ
->
v_§mp_çùÜ
 * 
DCTSIZE
));

278 
	`ERREXIT
(
cšfo
, 
JERR_BAD_BUFFER_MODE
);

281 #ifdeà
FULL_MAIN_BUFFER_SUPPORTED


282 
maš
->
whŞe_image
[0] = 
NULL
;

285 
ci
 = 0, 
comµŒ
 = 
cšfo
->
comp_šfo
; c˜< cšfo->
num_compÚ’ts
;

286 
ci
++, 
comµŒ
++) {

287 
maš
->
bufãr
[
ci
] = (*
cšfo
->
mem
->
®loc_§¼ay
)

288 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
,

289 
comµŒ
->
width_š_blocks
 * 
DCTSIZE
,

290 (
JDIMENSION
è(
comµŒ
->
v_§mp_çùÜ
 * 
DCTSIZE
));

293 
	}
}

	@jcmarker.c

11 
	#JPEG_INTERNALS


	)

12 
	~"jšşude.h
"

13 
	~"j³glib.h
"

17 
	mM_SOF0
 = 0xc0,

18 
	mM_SOF1
 = 0xc1,

19 
	mM_SOF2
 = 0xc2,

20 
	mM_SOF3
 = 0xc3,

22 
	mM_SOF5
 = 0xc5,

23 
	mM_SOF6
 = 0xc6,

24 
	mM_SOF7
 = 0xc7,

26 
	mM_JPG
 = 0xc8,

27 
	mM_SOF9
 = 0xc9,

28 
	mM_SOF10
 = 0xca,

29 
	mM_SOF11
 = 0xcb,

31 
	mM_SOF13
 = 0xcd,

32 
	mM_SOF14
 = 0xce,

33 
	mM_SOF15
 = 0xcf,

35 
	mM_DHT
 = 0xc4,

37 
	mM_DAC
 = 0xcc,

39 
	mM_RST0
 = 0xd0,

40 
	mM_RST1
 = 0xd1,

41 
	mM_RST2
 = 0xd2,

42 
	mM_RST3
 = 0xd3,

43 
	mM_RST4
 = 0xd4,

44 
	mM_RST5
 = 0xd5,

45 
	mM_RST6
 = 0xd6,

46 
	mM_RST7
 = 0xd7,

48 
	mM_SOI
 = 0xd8,

49 
	mM_EOI
 = 0xd9,

50 
	mM_SOS
 = 0xda,

51 
	mM_DQT
 = 0xdb,

52 
	mM_DNL
 = 0xdc,

53 
	mM_DRI
 = 0xdd,

54 
	mM_DHP
 = 0xde,

55 
	mM_EXP
 = 0xdf,

57 
	mM_APP0
 = 0xe0,

58 
	mM_APP1
 = 0xe1,

59 
	mM_APP2
 = 0xe2,

60 
	mM_APP3
 = 0xe3,

61 
	mM_APP4
 = 0xe4,

62 
	mM_APP5
 = 0xe5,

63 
	mM_APP6
 = 0xe6,

64 
	mM_APP7
 = 0xe7,

65 
	mM_APP8
 = 0xe8,

66 
	mM_APP9
 = 0xe9,

67 
	mM_APP10
 = 0xea,

68 
	mM_APP11
 = 0xeb,

69 
	mM_APP12
 = 0xec,

70 
	mM_APP13
 = 0xed,

71 
	mM_APP14
 = 0xee,

72 
	mM_APP15
 = 0xef,

74 
	mM_JPG0
 = 0xf0,

75 
	mM_JPG13
 = 0xfd,

76 
	mM_COM
 = 0xfe,

78 
	mM_TEM
 = 0x01,

80 
	mM_ERROR
 = 0x100

81 } 
	tJPEG_MARKER
;

87 
j³g_m¬k”_wr™”
 
	mpub
;

89 
	mÏ¡_»¡¬t_š‹rv®
;

90 } 
	tmy_m¬k”_wr™”
;

92 
my_m¬k”_wr™”
 * 
	tmy_m¬k”_±r
;

107 
	$LOCAL
()

108 
	$em™_by‹
 (
j_com´ess_±r
 
cšfo
, 
v®
)

111 
j³g_de¡š©iÚ_mgr
 * 
de¡
 = 
cšfo
->dest;

113 *(
de¡
->
Ãxt_ouut_by‹
)++ = (
JOCTET
è
v®
;

114 ià(--
de¡
->
ä“_š_bufãr
 == 0) {

115 ià(! (*
de¡
->
em±y_ouut_bufãr
è(
cšfo
))

116 
	`ERREXIT
(
cšfo
, 
JERR_CANT_SUSPEND
);

118 
	}
}

121 
	$LOCAL
()

122 
	$em™_m¬k”
 (
j_com´ess_±r
 
cšfo
, 
JPEG_MARKER
 
m¬k
)

125 
	`em™_by‹
(
cšfo
, 0xFF);

126 
	`em™_by‹
(
cšfo
, (è
m¬k
);

127 
	}
}

130 
	$LOCAL
()

131 
	$em™_2by‹s
 (
j_com´ess_±r
 
cšfo
, 
v®ue
)

134 
	`em™_by‹
(
cšfo
, (
v®ue
 >> 8) & 0xFF);

135 
	`em™_by‹
(
cšfo
, 
v®ue
 & 0xFF);

136 
	}
}

143 
	$LOCAL
()

144 
	$em™_dqt
 (
j_com´ess_±r
 
cšfo
, 
šdex
)

148 
JQUANT_TBL
 * 
qtbl
 = 
cšfo
->
quªt_tbl_±rs
[
šdex
];

149 
´ec
;

150 
i
;

152 ià(
qtbl
 =ğ
NULL
)

153 
	`ERREXIT1
(
cšfo
, 
JERR_NO_QUANT_TABLE
, 
šdex
);

155 
´ec
 = 0;

156 
i
 = 0; i < 
DCTSIZE2
; i++) {

157 ià(
qtbl
->
quªtv®
[
i
] > 255)

158 
´ec
 = 1;

161 ià(! 
qtbl
->
£Á_bË
) {

162 
	`em™_m¬k”
(
cšfo
, 
M_DQT
);

164 
	`em™_2by‹s
(
cšfo
, 
´ec
 ? 
DCTSIZE2
*2 + 1 + 2 : DCTSIZE2 + 1 + 2);

166 
	`em™_by‹
(
cšfo
, 
šdex
 + (
´ec
<<4));

168 
i
 = 0; i < 
DCTSIZE2
; i++) {

170 
qv®
 = 
qtbl
->
quªtv®
[
j³g_Çtu¿l_Üd”
[
i
]];

171 ià(
´ec
)

172 
	`em™_by‹
(
cšfo
, (è(
qv®
 >> 8));

173 
	`em™_by‹
(
cšfo
, (è(
qv®
 & 0xFF));

176 
qtbl
->
£Á_bË
 = 
TRUE
;

179  
´ec
;

180 
	}
}

183 
	$LOCAL
()

184 
	$em™_dht
 (
j_com´ess_±r
 
cšfo
, 
šdex
, 
boŞ—n
 
is_ac
)

187 
JHUFF_TBL
 * 
htbl
;

188 
Ëngth
, 
i
;

190 ià(
is_ac
) {

191 
htbl
 = 
cšfo
->
ac_huff_tbl_±rs
[
šdex
];

192 
šdex
 += 0x10;

194 
htbl
 = 
cšfo
->
dc_huff_tbl_±rs
[
šdex
];

197 ià(
htbl
 =ğ
NULL
)

198 
	`ERREXIT1
(
cšfo
, 
JERR_NO_HUFF_TABLE
, 
šdex
);

200 ià(! 
htbl
->
£Á_bË
) {

201 
	`em™_m¬k”
(
cšfo
, 
M_DHT
);

203 
Ëngth
 = 0;

204 
i
 = 1; i <= 16; i++)

205 
Ëngth
 +ğ
htbl
->
b™s
[
i
];

207 
	`em™_2by‹s
(
cšfo
, 
Ëngth
 + 2 + 1 + 16);

208 
	`em™_by‹
(
cšfo
, 
šdex
);

210 
i
 = 1; i <= 16; i++)

211 
	`em™_by‹
(
cšfo
, 
htbl
->
b™s
[
i
]);

213 
i
 = 0; i < 
Ëngth
; i++)

214 
	`em™_by‹
(
cšfo
, 
htbl
->
huffv®
[
i
]);

216 
htbl
->
£Á_bË
 = 
TRUE
;

218 
	}
}

221 
	$LOCAL
()

222 
	$em™_dac
 (
j_com´ess_±r
 
cšfo
)

227 #ifdeà
C_ARITH_CODING_SUPPORTED


228 
dc_š_u£
[
NUM_ARITH_TBLS
];

229 
ac_š_u£
[
NUM_ARITH_TBLS
];

230 
Ëngth
, 
i
;

231 
j³g_compÚ’t_šfo
 *
comµŒ
;

233 
i
 = 0; i < 
NUM_ARITH_TBLS
; i++)

234 
dc_š_u£
[
i
] = 
ac_š_u£
[i] = 0;

236 
i
 = 0; i < 
cšfo
->
comps_š_sÿn
; i++) {

237 
comµŒ
 = 
cšfo
->
cur_comp_šfo
[
i
];

238 
dc_š_u£
[
comµŒ
->
dc_tbl_no
] = 1;

239 
ac_š_u£
[
comµŒ
->
ac_tbl_no
] = 1;

242 
Ëngth
 = 0;

243 
i
 = 0; i < 
NUM_ARITH_TBLS
; i++)

244 
Ëngth
 +ğ
dc_š_u£
[
i
] + 
ac_š_u£
[i];

246 
	`em™_m¬k”
(
cšfo
, 
M_DAC
);

248 
	`em™_2by‹s
(
cšfo
, 
Ëngth
*2 + 2);

250 
i
 = 0; i < 
NUM_ARITH_TBLS
; i++) {

251 ià(
dc_š_u£
[
i
]) {

252 
	`em™_by‹
(
cšfo
, 
i
);

253 
	`em™_by‹
(
cšfo
, cšfo->
¬™h_dc_L
[
i
] + (cšfo->
¬™h_dc_U
[i]<<4));

255 ià(
ac_š_u£
[
i
]) {

256 
	`em™_by‹
(
cšfo
, 
i
 + 0x10);

257 
	`em™_by‹
(
cšfo
, cšfo->
¬™h_ac_K
[
i
]);

261 
	}
}

264 
	$LOCAL
()

265 
	$em™_dri
 (
j_com´ess_±r
 
cšfo
)

268 
	`em™_m¬k”
(
cšfo
, 
M_DRI
);

270 
	`em™_2by‹s
(
cšfo
, 4);

272 
	`em™_2by‹s
(
cšfo
, (ècšfo->
»¡¬t_š‹rv®
);

273 
	}
}

276 
	$LOCAL
()

277 
	$em™_sof
 (
j_com´ess_±r
 
cšfo
, 
JPEG_MARKER
 
code
)

280 
ci
;

281 
j³g_compÚ’t_šfo
 *
comµŒ
;

283 
	`em™_m¬k”
(
cšfo
, 
code
);

285 
	`em™_2by‹s
(
cšfo
, 3 * cšfo->
num_compÚ’ts
 + 2 + 5 + 1);

288 ià((è
cšfo
->
image_height
 > 65535L ||

289 (è
cšfo
->
image_width
 > 65535L)

290 
	`ERREXIT1
(
cšfo
, 
JERR_IMAGE_TOO_BIG
, () 65535);

292 
	`em™_by‹
(
cšfo
, cšfo->
d©a_´ecisiÚ
);

293 
	`em™_2by‹s
(
cšfo
, (ècšfo->
image_height
);

294 
	`em™_2by‹s
(
cšfo
, (ècšfo->
image_width
);

296 
	`em™_by‹
(
cšfo
, cšfo->
num_compÚ’ts
);

298 
ci
 = 0, 
comµŒ
 = 
cšfo
->
comp_šfo
; c˜< cšfo->
num_compÚ’ts
;

299 
ci
++, 
comµŒ
++) {

300 
	`em™_by‹
(
cšfo
, 
comµŒ
->
compÚ’t_id
);

301 
	`em™_by‹
(
cšfo
, (
comµŒ
->
h_§mp_çùÜ
 << 4è+ comµŒ->
v_§mp_çùÜ
);

302 
	`em™_by‹
(
cšfo
, 
comµŒ
->
quªt_tbl_no
);

304 
	}
}

307 
	$LOCAL
()

308 
	$em™_sos
 (
j_com´ess_±r
 
cšfo
)

311 
i
, 
td
, 

;

312 
j³g_compÚ’t_šfo
 *
comµŒ
;

314 
	`em™_m¬k”
(
cšfo
, 
M_SOS
);

316 
	`em™_2by‹s
(
cšfo
, 2 * cšfo->
comps_š_sÿn
 + 2 + 1 + 3);

318 
	`em™_by‹
(
cšfo
, cšfo->
comps_š_sÿn
);

320 
i
 = 0; i < 
cšfo
->
comps_š_sÿn
; i++) {

321 
comµŒ
 = 
cšfo
->
cur_comp_šfo
[
i
];

322 
	`em™_by‹
(
cšfo
, 
comµŒ
->
compÚ’t_id
);

323 
td
 = 
comµŒ
->
dc_tbl_no
;

324 

 = 
comµŒ
->
ac_tbl_no
;

325 ià(
cšfo
->
´og»ssive_mode
) {

331 ià(
cšfo
->
Ss
 == 0) {

332 

 = 0;

333 ià(
cšfo
->
Ah
 !ğ0 && !cšfo->
¬™h_code
)

334 
td
 = 0;

336 
td
 = 0;

339 
	`em™_by‹
(
cšfo
, (
td
 << 4è+ 

);

342 
	`em™_by‹
(
cšfo
, cšfo->
Ss
);

343 
	`em™_by‹
(
cšfo
, cšfo->
Se
);

344 
	`em™_by‹
(
cšfo
, (cšfo->
Ah
 << 4è+ cšfo->
Al
);

345 
	}
}

348 
	$LOCAL
()

349 
	$em™_jfif_­p0
 (
j_com´ess_±r
 
cšfo
)

364 
	`em™_m¬k”
(
cšfo
, 
M_APP0
);

366 
	`em™_2by‹s
(
cšfo
, 2 + 4 + 1 + 2 + 1 + 2 + 2 + 1 + 1);

368 
	`em™_by‹
(
cšfo
, 0x4A);

369 
	`em™_by‹
(
cšfo
, 0x46);

370 
	`em™_by‹
(
cšfo
, 0x49);

371 
	`em™_by‹
(
cšfo
, 0x46);

372 
	`em™_by‹
(
cšfo
, 0);

373 
	`em™_by‹
(
cšfo
, cšfo->
JFIF_majÜ_v”siÚ
);

374 
	`em™_by‹
(
cšfo
, cšfo->
JFIF_mšÜ_v”siÚ
);

375 
	`em™_by‹
(
cšfo
, cšfo->
d’s™y_un™
);

376 
	`em™_2by‹s
(
cšfo
, (ècšfo->
X_d’s™y
);

377 
	`em™_2by‹s
(
cšfo
, (ècšfo->
Y_d’s™y
);

378 
	`em™_by‹
(
cšfo
, 0);

379 
	`em™_by‹
(
cšfo
, 0);

380 
	}
}

383 
	$LOCAL
()

384 
	$em™_adobe_­p14
 (
j_com´ess_±r
 
cšfo
)

403 
	`em™_m¬k”
(
cšfo
, 
M_APP14
);

405 
	`em™_2by‹s
(
cšfo
, 2 + 5 + 2 + 2 + 2 + 1);

407 
	`em™_by‹
(
cšfo
, 0x41);

408 
	`em™_by‹
(
cšfo
, 0x64);

409 
	`em™_by‹
(
cšfo
, 0x6F);

410 
	`em™_by‹
(
cšfo
, 0x62);

411 
	`em™_by‹
(
cšfo
, 0x65);

412 
	`em™_2by‹s
(
cšfo
, 100);

413 
	`em™_2by‹s
(
cšfo
, 0);

414 
	`em™_2by‹s
(
cšfo
, 0);

415 
cšfo
->
j³g_cŞÜ_¥aû
) {

416 
JCS_YCbCr
:

417 
	`em™_by‹
(
cšfo
, 1);

419 
JCS_YCCK
:

420 
	`em™_by‹
(
cšfo
, 2);

423 
	`em™_by‹
(
cšfo
, 0);

426 
	}
}

437 
	$METHODDEF
()

438 
	$wr™e_m¬k”_h—d”
 (
j_com´ess_±r
 
cšfo
, 
m¬k”
, 
d©®’
)

441 ià(
d©®’
 > () 65533)

442 
	`ERREXIT
(
cšfo
, 
JERR_BAD_LENGTH
);

444 
	`em™_m¬k”
(
cšfo
, (
JPEG_MARKER
è
m¬k”
);

446 
	`em™_2by‹s
(
cšfo
, (è(
d©®’
 + 2));

447 
	}
}

449 
	$METHODDEF
()

450 
	$wr™e_m¬k”_by‹
 (
j_com´ess_±r
 
cšfo
, 
v®
)

453 
	`em™_by‹
(
cšfo
, 
v®
);

454 
	}
}

468 
	$METHODDEF
()

469 
	$wr™e_fe_h—d”
 (
j_com´ess_±r
 
cšfo
)

471 
my_m¬k”_±r
 
m¬k”
 = (my_m¬k”_±rè
cšfo
->marker;

473 
	`em™_m¬k”
(
cšfo
, 
M_SOI
);

476 
m¬k”
->
Ï¡_»¡¬t_š‹rv®
 = 0;

478 ià(
cšfo
->
wr™e_JFIF_h—d”
)

479 
	`em™_jfif_­p0
(
cšfo
);

480 ià(
cšfo
->
wr™e_Adobe_m¬k”
)

481 
	`em™_adobe_­p14
(
cšfo
);

482 
	}
}

493 
	$METHODDEF
()

494 
	$wr™e_äame_h—d”
 (
j_com´ess_±r
 
cšfo
)

496 
ci
, 
´ec
;

497 
boŞ—n
 
is_ba£lše
;

498 
j³g_compÚ’t_šfo
 *
comµŒ
;

503 
´ec
 = 0;

504 
ci
 = 0, 
comµŒ
 = 
cšfo
->
comp_šfo
; c˜< cšfo->
num_compÚ’ts
;

505 
ci
++, 
comµŒ
++) {

506 
´ec
 +ğ
	`em™_dqt
(
cšfo
, 
comµŒ
->
quªt_tbl_no
);

513 ià(
cšfo
->
¬™h_code
 || cšfo->
´og»ssive_mode
 ||

514 
cšfo
->
d©a_´ecisiÚ
 != 8) {

515 
is_ba£lše
 = 
FALSE
;

517 
is_ba£lše
 = 
TRUE
;

518 
ci
 = 0, 
comµŒ
 = 
cšfo
->
comp_šfo
; c˜< cšfo->
num_compÚ’ts
;

519 
ci
++, 
comµŒ
++) {

520 ià(
comµŒ
->
dc_tbl_no
 > 1 || comµŒ->
ac_tbl_no
 > 1)

521 
is_ba£lše
 = 
FALSE
;

523 ià(
´ec
 && 
is_ba£lše
) {

524 
is_ba£lše
 = 
FALSE
;

526 
	`TRACEMS
(
cšfo
, 0, 
JTRC_16BIT_TABLES
);

531 ià(
cšfo
->
¬™h_code
) {

532 
	`em™_sof
(
cšfo
, 
M_SOF9
);

534 ià(
cšfo
->
´og»ssive_mode
)

535 
	`em™_sof
(
cšfo
, 
M_SOF2
);

536 ià(
is_ba£lše
)

537 
	`em™_sof
(
cšfo
, 
M_SOF0
);

539 
	`em™_sof
(
cšfo
, 
M_SOF1
);

541 
	}
}

550 
	$METHODDEF
()

551 
	$wr™e_sÿn_h—d”
 (
j_com´ess_±r
 
cšfo
)

553 
my_m¬k”_±r
 
m¬k”
 = (my_m¬k”_±rè
cšfo
->marker;

554 
i
;

555 
j³g_compÚ’t_šfo
 *
comµŒ
;

557 ià(
cšfo
->
¬™h_code
) {

562 
	`em™_dac
(
cšfo
);

567 
i
 = 0; i < 
cšfo
->
comps_š_sÿn
; i++) {

568 
comµŒ
 = 
cšfo
->
cur_comp_šfo
[
i
];

569 ià(
cšfo
->
´og»ssive_mode
) {

571 ià(
cšfo
->
Ss
 == 0) {

572 ià(
cšfo
->
Ah
 == 0)

573 
	`em™_dht
(
cšfo
, 
comµŒ
->
dc_tbl_no
, 
FALSE
);

575 
	`em™_dht
(
cšfo
, 
comµŒ
->
ac_tbl_no
, 
TRUE
);

579 
	`em™_dht
(
cšfo
, 
comµŒ
->
dc_tbl_no
, 
FALSE
);

580 
	`em™_dht
(
cšfo
, 
comµŒ
->
ac_tbl_no
, 
TRUE
);

588 ià(
cšfo
->
»¡¬t_š‹rv®
 !ğ
m¬k”
->
Ï¡_»¡¬t_š‹rv®
) {

589 
	`em™_dri
(
cšfo
);

590 
m¬k”
->
Ï¡_»¡¬t_š‹rv®
 = 
cšfo
->
»¡¬t_š‹rv®
;

593 
	`em™_sos
(
cšfo
);

594 
	}
}

601 
	$METHODDEF
()

602 
	$wr™e_fe_Œa”
 (
j_com´ess_±r
 
cšfo
)

604 
	`em™_m¬k”
(
cšfo
, 
M_EOI
);

605 
	}
}

615 
	$METHODDEF
()

616 
	$wr™e_bËs_Úly
 (
j_com´ess_±r
 
cšfo
)

618 
i
;

620 
	`em™_m¬k”
(
cšfo
, 
M_SOI
);

622 
i
 = 0; i < 
NUM_QUANT_TBLS
; i++) {

623 ià(
cšfo
->
quªt_tbl_±rs
[
i
] !ğ
NULL
)

624 (è
	`em™_dqt
(
cšfo
, 
i
);

627 ià(! 
cšfo
->
¬™h_code
) {

628 
i
 = 0; i < 
NUM_HUFF_TBLS
; i++) {

629 ià(
cšfo
->
dc_huff_tbl_±rs
[
i
] !ğ
NULL
)

630 
	`em™_dht
(
cšfo
, 
i
, 
FALSE
);

631 ià(
cšfo
->
ac_huff_tbl_±rs
[
i
] !ğ
NULL
)

632 
	`em™_dht
(
cšfo
, 
i
, 
TRUE
);

636 
	`em™_m¬k”
(
cšfo
, 
M_EOI
);

637 
	}
}

644 
	$GLOBAL
()

645 
	$jš™_m¬k”_wr™”
 (
j_com´ess_±r
 
cšfo
)

647 
my_m¬k”_±r
 
m¬k”
;

650 
m¬k”
 = (
my_m¬k”_±r
)

651 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

652 
	`SIZEOF
(
my_m¬k”_wr™”
));

653 
cšfo
->
m¬k”
 = (
j³g_m¬k”_wr™”
 *) marker;

655 
m¬k”
->
pub
.
wr™e_fe_h—d”
 = write_file_header;

656 
m¬k”
->
pub
.
wr™e_äame_h—d”
 = write_frame_header;

657 
m¬k”
->
pub
.
wr™e_sÿn_h—d”
 = write_scan_header;

658 
m¬k”
->
pub
.
wr™e_fe_Œa”
 = write_file_trailer;

659 
m¬k”
->
pub
.
wr™e_bËs_Úly
 = write_tables_only;

660 
m¬k”
->
pub
.
wr™e_m¬k”_h—d”
 = write_marker_header;

661 
m¬k”
->
pub
.
wr™e_m¬k”_by‹
 = write_marker_byte;

663 
m¬k”
->
Ï¡_»¡¬t_š‹rv®
 = 0;

664 
	}
}

	@jcmaster.c

14 
	#JPEG_INTERNALS


	)

15 
	~"jšşude.h
"

16 
	~"j³glib.h
"

22 
	mmaš_·ss
,

23 
	mhuff_İt_·ss
,

24 
	mouut_·ss


25 } 
	tc_·ss_ty³
;

28 
j³g_comp_ma¡”
 
	mpub
;

30 
c_·ss_ty³
 
	m·ss_ty³
;

32 
	m·ss_numb”
;

33 
	mtÙ®_·s£s
;

35 
	msÿn_numb”
;

36 } 
	tmy_comp_ma¡”
;

38 
my_comp_ma¡”
 * 
	tmy_ma¡”_±r
;

45 
	$LOCAL
()

46 
	$š™Ÿl_£tup
 (
j_com´ess_±r
 
cšfo
)

49 
ci
;

50 
j³g_compÚ’t_šfo
 *
comµŒ
;

51 
§m¶e¥”row
;

52 
JDIMENSION
 
jd_§m¶e¥”row
;

55 ià(
cšfo
->
image_height
 <ğ0 || cšfo->
image_width
 <= 0

56 || 
cšfo
->
num_compÚ’ts
 <ğ0 || cšfo->
šput_compÚ’ts
 <= 0)

57 
	`ERREXIT
(
cšfo
, 
JERR_EMPTY_IMAGE
);

60 ià((è
cšfo
->
image_height
 > (è
JPEG_MAX_DIMENSION
 ||

61 (è
cšfo
->
image_width
 > (è
JPEG_MAX_DIMENSION
)

62 
	`ERREXIT1
(
cšfo
, 
JERR_IMAGE_TOO_BIG
, (è
JPEG_MAX_DIMENSION
);

65 
§m¶e¥”row
 = (è
cšfo
->
image_width
 * (ècšfo->
šput_compÚ’ts
;

66 
jd_§m¶e¥”row
 = (
JDIMENSION
è
§m¶e¥”row
;

67 ià((è
jd_§m¶e¥”row
 !ğ
§m¶e¥”row
)

68 
	`ERREXIT
(
cšfo
, 
JERR_WIDTH_OVERFLOW
);

71 ià(
cšfo
->
d©a_´ecisiÚ
 !ğ
BITS_IN_JSAMPLE
)

72 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_PRECISION
, cšfo->
d©a_´ecisiÚ
);

75 ià(
cšfo
->
num_compÚ’ts
 > 
MAX_COMPONENTS
)

76 
	`ERREXIT2
(
cšfo
, 
JERR_COMPONENT_COUNT
, cšfo->
num_compÚ’ts
,

77 
MAX_COMPONENTS
);

80 
cšfo
->
max_h_§mp_çùÜ
 = 1;

81 
cšfo
->
max_v_§mp_çùÜ
 = 1;

82 
ci
 = 0, 
comµŒ
 = 
cšfo
->
comp_šfo
; c˜< cšfo->
num_compÚ’ts
;

83 
ci
++, 
comµŒ
++) {

84 ià(
comµŒ
->
h_§mp_çùÜ
<=0 || comµŒ->h_§mp_çùÜ>
MAX_SAMP_FACTOR
 ||

85 
comµŒ
->
v_§mp_çùÜ
<=0 || comµŒ->v_§mp_çùÜ>
MAX_SAMP_FACTOR
)

86 
	`ERREXIT
(
cšfo
, 
JERR_BAD_SAMPLING
);

87 
cšfo
->
max_h_§mp_çùÜ
 = 
	`MAX
(cinfo->max_h_samp_factor,

88 
comµŒ
->
h_§mp_çùÜ
);

89 
cšfo
->
max_v_§mp_çùÜ
 = 
	`MAX
(cinfo->max_v_samp_factor,

90 
comµŒ
->
v_§mp_çùÜ
);

94 
ci
 = 0, 
comµŒ
 = 
cšfo
->
comp_šfo
; c˜< cšfo->
num_compÚ’ts
;

95 
ci
++, 
comµŒ
++) {

97 
comµŒ
->
compÚ’t_šdex
 = 
ci
;

99 
comµŒ
->
DCT_sÿËd_size
 = 
DCTSIZE
;

101 
comµŒ
->
width_š_blocks
 = (
JDIMENSION
)

102 
	`jdiv_round_up
((è
cšfo
->
image_width
 * (è
comµŒ
->
h_§mp_çùÜ
,

103 (è(
cšfo
->
max_h_§mp_çùÜ
 * 
DCTSIZE
));

104 
comµŒ
->
height_š_blocks
 = (
JDIMENSION
)

105 
	`jdiv_round_up
((è
cšfo
->
image_height
 * (è
comµŒ
->
v_§mp_çùÜ
,

106 (è(
cšfo
->
max_v_§mp_çùÜ
 * 
DCTSIZE
));

108 
comµŒ
->
down§m¶ed_width
 = (
JDIMENSION
)

109 
	`jdiv_round_up
((è
cšfo
->
image_width
 * (è
comµŒ
->
h_§mp_çùÜ
,

110 (è
cšfo
->
max_h_§mp_çùÜ
);

111 
comµŒ
->
down§m¶ed_height
 = (
JDIMENSION
)

112 
	`jdiv_round_up
((è
cšfo
->
image_height
 * (è
comµŒ
->
v_§mp_çùÜ
,

113 (è
cšfo
->
max_v_§mp_çùÜ
);

115 
comµŒ
->
compÚ’t_Ãeded
 = 
TRUE
;

121 
cšfo
->
tÙ®_iMCU_rows
 = (
JDIMENSION
)

122 
	`jdiv_round_up
((è
cšfo
->
image_height
,

123 (è(
cšfo
->
max_v_§mp_çùÜ
*
DCTSIZE
));

124 
	}
}

127 #ifdeà
C_MULTISCAN_FILES_SUPPORTED


129 
	$LOCAL
()

130 
	$v®id©e_süt
 (
j_com´ess_±r
 
cšfo
)

135 cÚ¡ 
j³g_sÿn_šfo
 * 
sÿÅŒ
;

136 
sÿÂo
, 
ncomps
, 
ci
, 
cÛfi
, 
thisi
;

137 
Ss
, 
Se
, 
Ah
, 
Al
;

138 
boŞ—n
 
compÚ’t_£Á
[
MAX_COMPONENTS
];

139 #ifdeà
C_PROGRESSIVE_SUPPORTED


140 * 
Ï¡_b™pos_±r
;

141 
Ï¡_b™pos
[
MAX_COMPONENTS
][
DCTSIZE2
];

145 ià(
cšfo
->
num_sÿns
 <= 0)

146 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_SCAN_SCRIPT
, 0);

151 
sÿÅŒ
 = 
cšfo
->
sÿn_šfo
;

152 ià(
sÿÅŒ
->
Ss
 !ğ0 || sÿÅŒ->
Se
 !ğ
DCTSIZE2
-1) {

153 #ifdeà
C_PROGRESSIVE_SUPPORTED


154 
cšfo
->
´og»ssive_mode
 = 
TRUE
;

155 
Ï¡_b™pos_±r
 = & 
Ï¡_b™pos
[0][0];

156 
ci
 = 0; c˜< 
cšfo
->
num_compÚ’ts
; ci++)

157 
cÛfi
 = 0; cÛf˜< 
DCTSIZE2
; coefi++)

158 *
Ï¡_b™pos_±r
++ = -1;

160 
	`ERREXIT
(
cšfo
, 
JERR_NOT_COMPILED
);

163 
cšfo
->
´og»ssive_mode
 = 
FALSE
;

164 
ci
 = 0; c˜< 
cšfo
->
num_compÚ’ts
; ci++)

165 
compÚ’t_£Á
[
ci
] = 
FALSE
;

168 
sÿÂo
 = 1; sÿÂØ<ğ
cšfo
->
num_sÿns
; 
sÿÅŒ
++, scanno++) {

170 
ncomps
 = 
sÿÅŒ
->
comps_š_sÿn
;

171 ià(
ncomps
 <ğ0 ||‚comp > 
MAX_COMPS_IN_SCAN
)

172 
	`ERREXIT2
(
cšfo
, 
JERR_COMPONENT_COUNT
, 
ncomps
, 
MAX_COMPS_IN_SCAN
);

173 
ci
 = 0; c˜< 
ncomps
; ci++) {

174 
thisi
 = 
sÿÅŒ
->
compÚ’t_šdex
[
ci
];

175 ià(
thisi
 < 0 ||his˜>ğ
cšfo
->
num_compÚ’ts
)

176 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_SCAN_SCRIPT
, 
sÿÂo
);

178 ià(
ci
 > 0 && 
thisi
 <ğ
sÿÅŒ
->
compÚ’t_šdex
[ci-1])

179 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_SCAN_SCRIPT
, 
sÿÂo
);

182 
Ss
 = 
sÿÅŒ
->Ss;

183 
Se
 = 
sÿÅŒ
->Se;

184 
Ah
 = 
sÿÅŒ
->Ah;

185 
Al
 = 
sÿÅŒ
->Al;

186 ià(
cšfo
->
´og»ssive_mode
) {

187 #ifdeà
C_PROGRESSIVE_SUPPORTED


195 #ià
BITS_IN_JSAMPLE
 == 8

196 
	#MAX_AH_AL
 10

	)

198 
	#MAX_AH_AL
 13

	)

200 ià(
Ss
 < 0 || S >ğ
DCTSIZE2
 || 
Se
 < Ss || Se >= DCTSIZE2 ||

201 
Ah
 < 0 || Ah > 
MAX_AH_AL
 || 
Al
 < 0 || Al > MAX_AH_AL)

202 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_PROG_SCRIPT
, 
sÿÂo
);

203 ià(
Ss
 == 0) {

204 ià(
Se
 != 0)

205 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_PROG_SCRIPT
, 
sÿÂo
);

207 ià(
ncomps
 != 1)

208 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_PROG_SCRIPT
, 
sÿÂo
);

210 
ci
 = 0; c˜< 
ncomps
; ci++) {

211 
Ï¡_b™pos_±r
 = & 
Ï¡_b™pos
[
sÿÅŒ
->
compÚ’t_šdex
[
ci
]][0];

212 ià(
Ss
 !ğ0 && 
Ï¡_b™pos_±r
[0] < 0)

213 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_PROG_SCRIPT
, 
sÿÂo
);

214 
cÛfi
 = 
Ss
; cÛf˜<ğ
Se
; coefi++) {

215 ià(
Ï¡_b™pos_±r
[
cÛfi
] < 0) {

217 ià(
Ah
 != 0)

218 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_PROG_SCRIPT
, 
sÿÂo
);

221 ià(
Ah
 !ğ
Ï¡_b™pos_±r
[
cÛfi
] || 
Al
 != Ah-1)

222 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_PROG_SCRIPT
, 
sÿÂo
);

224 
Ï¡_b™pos_±r
[
cÛfi
] = 
Al
;

230 ià(
Ss
 !ğ0 || 
Se
 !ğ
DCTSIZE2
-1 || 
Ah
 !ğ0 || 
Al
 != 0)

231 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_PROG_SCRIPT
, 
sÿÂo
);

233 
ci
 = 0; c˜< 
ncomps
; ci++) {

234 
thisi
 = 
sÿÅŒ
->
compÚ’t_šdex
[
ci
];

235 ià(
compÚ’t_£Á
[
thisi
])

236 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_SCAN_SCRIPT
, 
sÿÂo
);

237 
compÚ’t_£Á
[
thisi
] = 
TRUE
;

243 ià(
cšfo
->
´og»ssive_mode
) {

244 #ifdeà
C_PROGRESSIVE_SUPPORTED


250 
ci
 = 0; c˜< 
cšfo
->
num_compÚ’ts
; ci++) {

251 ià(
Ï¡_b™pos
[
ci
][0] < 0)

252 
	`ERREXIT
(
cšfo
, 
JERR_MISSING_DATA
);

256 
ci
 = 0; c˜< 
cšfo
->
num_compÚ’ts
; ci++) {

257 ià(! 
compÚ’t_£Á
[
ci
])

258 
	`ERREXIT
(
cšfo
, 
JERR_MISSING_DATA
);

261 
	}
}

266 
	$LOCAL
()

267 
	$£Ëù_sÿn_·¿m‘”s
 (
j_com´ess_±r
 
cšfo
)

270 
ci
;

272 #ifdeà
C_MULTISCAN_FILES_SUPPORTED


273 ià(
cšfo
->
sÿn_šfo
 !ğ
NULL
) {

275 
my_ma¡”_±r
 
ma¡”
 = (my_ma¡”_±rè
cšfo
->master;

276 cÚ¡ 
j³g_sÿn_šfo
 * 
sÿÅŒ
 = 
cšfo
->
sÿn_šfo
 + 
ma¡”
->
sÿn_numb”
;

278 
cšfo
->
comps_š_sÿn
 = 
sÿÅŒ
->comps_in_scan;

279 
ci
 = 0; c˜< 
sÿÅŒ
->
comps_š_sÿn
; ci++) {

280 
cšfo
->
cur_comp_šfo
[
ci
] =

281 &
cšfo
->
comp_šfo
[
sÿÅŒ
->
compÚ’t_šdex
[
ci
]];

283 
cšfo
->
Ss
 = 
sÿÅŒ
->Ss;

284 
cšfo
->
Se
 = 
sÿÅŒ
->Se;

285 
cšfo
->
Ah
 = 
sÿÅŒ
->Ah;

286 
cšfo
->
Al
 = 
sÿÅŒ
->Al;

292 ià(
cšfo
->
num_compÚ’ts
 > 
MAX_COMPS_IN_SCAN
)

293 
	`ERREXIT2
(
cšfo
, 
JERR_COMPONENT_COUNT
, cšfo->
num_compÚ’ts
,

294 
MAX_COMPS_IN_SCAN
);

295 
cšfo
->
comps_š_sÿn
 = cšfo->
num_compÚ’ts
;

296 
ci
 = 0; c˜< 
cšfo
->
num_compÚ’ts
; ci++) {

297 
cšfo
->
cur_comp_šfo
[
ci
] = &cšfo->
comp_šfo
[ci];

299 
cšfo
->
Ss
 = 0;

300 
cšfo
->
Se
 = 
DCTSIZE2
-1;

301 
cšfo
->
Ah
 = 0;

302 
cšfo
->
Al
 = 0;

304 
	}
}

307 
	$LOCAL
()

308 
	$³r_sÿn_£tup
 (
j_com´ess_±r
 
cšfo
)

312 
ci
, 
mcublks
, 
tmp
;

313 
j³g_compÚ’t_šfo
 *
comµŒ
;

315 ià(
cšfo
->
comps_š_sÿn
 == 1) {

318 
comµŒ
 = 
cšfo
->
cur_comp_šfo
[0];

321 
cšfo
->
MCUs_³r_row
 = 
comµŒ
->
width_š_blocks
;

322 
cšfo
->
MCU_rows_š_sÿn
 = 
comµŒ
->
height_š_blocks
;

325 
comµŒ
->
MCU_width
 = 1;

326 
comµŒ
->
MCU_height
 = 1;

327 
comµŒ
->
MCU_blocks
 = 1;

328 
comµŒ
->
MCU_§m¶e_width
 = 
DCTSIZE
;

329 
comµŒ
->
Ï¡_cŞ_width
 = 1;

333 
tmp
 = (è(
comµŒ
->
height_š_blocks
 % comµŒ->
v_§mp_çùÜ
);

334 ià(
tmp
 =ğ0ètm°ğ
comµŒ
->
v_§mp_çùÜ
;

335 
comµŒ
->
Ï¡_row_height
 = 
tmp
;

338 
cšfo
->
blocks_š_MCU
 = 1;

339 
cšfo
->
MCU_memb”sh
[0] = 0;

344 ià(
cšfo
->
comps_š_sÿn
 <ğ0 || cšfo->comps_š_sÿÀ> 
MAX_COMPS_IN_SCAN
)

345 
	`ERREXIT2
(
cšfo
, 
JERR_COMPONENT_COUNT
, cšfo->
comps_š_sÿn
,

346 
MAX_COMPS_IN_SCAN
);

349 
cšfo
->
MCUs_³r_row
 = (
JDIMENSION
)

350 
	`jdiv_round_up
((è
cšfo
->
image_width
,

351 (è(
cšfo
->
max_h_§mp_çùÜ
*
DCTSIZE
));

352 
cšfo
->
MCU_rows_š_sÿn
 = (
JDIMENSION
)

353 
	`jdiv_round_up
((è
cšfo
->
image_height
,

354 (è(
cšfo
->
max_v_§mp_çùÜ
*
DCTSIZE
));

356 
cšfo
->
blocks_š_MCU
 = 0;

358 
ci
 = 0; c˜< 
cšfo
->
comps_š_sÿn
; ci++) {

359 
comµŒ
 = 
cšfo
->
cur_comp_šfo
[
ci
];

361 
comµŒ
->
MCU_width
 = comµŒ->
h_§mp_çùÜ
;

362 
comµŒ
->
MCU_height
 = comµŒ->
v_§mp_çùÜ
;

363 
comµŒ
->
MCU_blocks
 = comµŒ->
MCU_width
 * comµŒ->
MCU_height
;

364 
comµŒ
->
MCU_§m¶e_width
 = comµŒ->
MCU_width
 * 
DCTSIZE
;

366 
tmp
 = (è(
comµŒ
->
width_š_blocks
 % comµŒ->
MCU_width
);

367 ià(
tmp
 =ğ0ètm°ğ
comµŒ
->
MCU_width
;

368 
comµŒ
->
Ï¡_cŞ_width
 = 
tmp
;

369 
tmp
 = (è(
comµŒ
->
height_š_blocks
 % comµŒ->
MCU_height
);

370 ià(
tmp
 =ğ0ètm°ğ
comµŒ
->
MCU_height
;

371 
comµŒ
->
Ï¡_row_height
 = 
tmp
;

373 
mcublks
 = 
comµŒ
->
MCU_blocks
;

374 ià(
cšfo
->
blocks_š_MCU
 + 
mcublks
 > 
C_MAX_BLOCKS_IN_MCU
)

375 
	`ERREXIT
(
cšfo
, 
JERR_BAD_MCU_SIZE
);

376 
mcublks
-- > 0) {

377 
cšfo
->
MCU_memb”sh
[cšfo->
blocks_š_MCU
++] = 
ci
;

385 ià(
cšfo
->
»¡¬t_š_rows
 > 0) {

386 
nomš®
 = (è
cšfo
->
»¡¬t_š_rows
 * (ècšfo->
MCUs_³r_row
;

387 
cšfo
->
»¡¬t_š‹rv®
 = (è
	`MIN
(
nomš®
, 65535L);

389 
	}
}

400 
	$METHODDEF
()

401 
	$´•¬e_fÜ_·ss
 (
j_com´ess_±r
 
cšfo
)

403 
my_ma¡”_±r
 
ma¡”
 = (my_ma¡”_±rè
cšfo
->master;

405 
ma¡”
->
·ss_ty³
) {

406 
maš_·ss
:

410 
	`£Ëù_sÿn_·¿m‘”s
(
cšfo
);

411 
	`³r_sÿn_£tup
(
cšfo
);

412 ià(! 
cšfo
->
¿w_d©a_š
) {

413 (*
cšfo
->
ccÚv”t
->
¡¬t_·ss
) (cinfo);

414 (*
cšfo
->
down§m¶e
->
¡¬t_·ss
) (cinfo);

415 (*
cšfo
->
´•
->
¡¬t_·ss
è(cšfo, 
JBUF_PASS_THRU
);

417 (*
cšfo
->
fdù
->
¡¬t_·ss
) (cinfo);

418 (*
cšfo
->
’Œİy
->
¡¬t_·ss
è(cšfo, cšfo->
İtimize_codšg
);

419 (*
cšfo
->
cÛf
->
¡¬t_·ss
) (cinfo,

420 (
ma¡”
->
tÙ®_·s£s
 > 1 ?

421 
JBUF_SAVE_AND_PASS
 : 
JBUF_PASS_THRU
));

422 (*
cšfo
->
maš
->
¡¬t_·ss
è(cšfo, 
JBUF_PASS_THRU
);

423 ià(
cšfo
->
İtimize_codšg
) {

425 
ma¡”
->
pub
.
ÿÎ_·ss_¡¬tup
 = 
FALSE
;

428 
ma¡”
->
pub
.
ÿÎ_·ss_¡¬tup
 = 
TRUE
;

431 #ifdeà
ENTROPY_OPT_SUPPORTED


432 
huff_İt_·ss
:

434 
	`£Ëù_sÿn_·¿m‘”s
(
cšfo
);

435 
	`³r_sÿn_£tup
(
cšfo
);

436 ià(
cšfo
->
Ss
 !ğ0 || cšfo->
Ah
 =ğ0 || cšfo->
¬™h_code
) {

437 (*
cšfo
->
’Œİy
->
¡¬t_·ss
è(cšfo, 
TRUE
);

438 (*
cšfo
->
cÛf
->
¡¬t_·ss
è(cšfo, 
JBUF_CRANK_DEST
);

439 
ma¡”
->
pub
.
ÿÎ_·ss_¡¬tup
 = 
FALSE
;

445 
ma¡”
->
·ss_ty³
 = 
ouut_·ss
;

446 
ma¡”
->
·ss_numb”
++;

449 
ouut_·ss
:

452 ià(! 
cšfo
->
İtimize_codšg
) {

453 
	`£Ëù_sÿn_·¿m‘”s
(
cšfo
);

454 
	`³r_sÿn_£tup
(
cšfo
);

456 (*
cšfo
->
’Œİy
->
¡¬t_·ss
è(cšfo, 
FALSE
);

457 (*
cšfo
->
cÛf
->
¡¬t_·ss
è(cšfo, 
JBUF_CRANK_DEST
);

459 ià(
ma¡”
->
sÿn_numb”
 == 0)

460 (*
cšfo
->
m¬k”
->
wr™e_äame_h—d”
) (cinfo);

461 (*
cšfo
->
m¬k”
->
wr™e_sÿn_h—d”
) (cinfo);

462 
ma¡”
->
pub
.
ÿÎ_·ss_¡¬tup
 = 
FALSE
;

465 
	`ERREXIT
(
cšfo
, 
JERR_NOT_COMPILED
);

468 
ma¡”
->
pub
.
is_Ï¡_·ss
 = (ma¡”->
·ss_numb”
 =ğma¡”->
tÙ®_·s£s
-1);

471 ià(
cšfo
->
´og»ss
 !ğ
NULL
) {

472 
cšfo
->
´og»ss
->
com¶‘ed_·s£s
 = 
ma¡”
->
·ss_numb”
;

473 
cšfo
->
´og»ss
->
tÙ®_·s£s
 = 
ma¡”
->total_passes;

475 
	}
}

488 
	$METHODDEF
()

489 
	$·ss_¡¬tup
 (
j_com´ess_±r
 
cšfo
)

491 
cšfo
->
ma¡”
->
ÿÎ_·ss_¡¬tup
 = 
FALSE
;

493 (*
cšfo
->
m¬k”
->
wr™e_äame_h—d”
) (cinfo);

494 (*
cšfo
->
m¬k”
->
wr™e_sÿn_h—d”
) (cinfo);

495 
	}
}

502 
	$METHODDEF
()

503 
	$fšish_·ss_ma¡”
 (
j_com´ess_±r
 
cšfo
)

505 
my_ma¡”_±r
 
ma¡”
 = (my_ma¡”_±rè
cšfo
->master;

510 (*
cšfo
->
’Œİy
->
fšish_·ss
) (cinfo);

513 
ma¡”
->
·ss_ty³
) {

514 
maš_·ss
:

518 
ma¡”
->
·ss_ty³
 = 
ouut_·ss
;

519 ià(! 
cšfo
->
İtimize_codšg
)

520 
ma¡”
->
sÿn_numb”
++;

522 
huff_İt_·ss
:

524 
ma¡”
->
·ss_ty³
 = 
ouut_·ss
;

526 
ouut_·ss
:

528 ià(
cšfo
->
İtimize_codšg
)

529 
ma¡”
->
·ss_ty³
 = 
huff_İt_·ss
;

530 
ma¡”
->
sÿn_numb”
++;

534 
ma¡”
->
·ss_numb”
++;

535 
	}
}

542 
	$GLOBAL
()

543 
	$jš™_c_ma¡”_cÚŒŞ
 (
j_com´ess_±r
 
cšfo
, 
boŞ—n
 
Œªscode_Úly
)

545 
my_ma¡”_±r
 
ma¡”
;

547 
ma¡”
 = (
my_ma¡”_±r
)

548 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

549 
	`SIZEOF
(
my_comp_ma¡”
));

550 
cšfo
->
ma¡”
 = (
j³g_comp_ma¡”
 *) master;

551 
ma¡”
->
pub
.
´•¬e_fÜ_·ss
 =…repare_for_pass;

552 
ma¡”
->
pub
.
·ss_¡¬tup
 =…ass_startup;

553 
ma¡”
->
pub
.
fšish_·ss
 = 
fšish_·ss_ma¡”
;

554 
ma¡”
->
pub
.
is_Ï¡_·ss
 = 
FALSE
;

557 
	`š™Ÿl_£tup
(
cšfo
);

559 ià(
cšfo
->
sÿn_šfo
 !ğ
NULL
) {

560 #ifdeà
C_MULTISCAN_FILES_SUPPORTED


561 
	`v®id©e_süt
(
cšfo
);

563 
	`ERREXIT
(
cšfo
, 
JERR_NOT_COMPILED
);

566 
cšfo
->
´og»ssive_mode
 = 
FALSE
;

567 
cšfo
->
num_sÿns
 = 1;

570 ià(
cšfo
->
´og»ssive_mode
)

571 
cšfo
->
İtimize_codšg
 = 
TRUE
;

574 ià(
Œªscode_Úly
) {

576 ià(
cšfo
->
İtimize_codšg
)

577 
ma¡”
->
·ss_ty³
 = 
huff_İt_·ss
;

579 
ma¡”
->
·ss_ty³
 = 
ouut_·ss
;

582 
ma¡”
->
·ss_ty³
 = 
maš_·ss
;

584 
ma¡”
->
sÿn_numb”
 = 0;

585 
ma¡”
->
·ss_numb”
 = 0;

586 ià(
cšfo
->
İtimize_codšg
)

587 
ma¡”
->
tÙ®_·s£s
 = 
cšfo
->
num_sÿns
 * 2;

589 
ma¡”
->
tÙ®_·s£s
 = 
cšfo
->
num_sÿns
;

590 
	}
}

	@jcomapi.c

12 
	#JPEG_INTERNALS


	)

13 
	~"jšşude.h
"

14 
	~"j³glib.h
"

28 
	$GLOBAL
()

29 
	$j³g_abÜt
 (
j_commÚ_±r
 
cšfo
)

31 
poŞ
;

34 ià(
cšfo
->
mem
 =ğ
NULL
)

40 
poŞ
 = 
JPOOL_NUMPOOLS
-1;…oŞ > 
JPOOL_PERMANENT
;…ool--) {

41 (*
cšfo
->
mem
->
ä“_poŞ
è(cšfo, 
poŞ
);

45 ià(
cšfo
->
is_decom´essÜ
) {

46 
cšfo
->
glob®_¡©e
 = 
DSTATE_START
;

50 ((
j_decom´ess_±r
è
cšfo
)->
m¬k”_li¡
 = 
NULL
;

52 
cšfo
->
glob®_¡©e
 = 
CSTATE_START
;

54 
	}
}

68 
	$GLOBAL
()

69 
	$j³g_de¡roy
 (
j_commÚ_±r
 
cšfo
)

73 ià(
cšfo
->
mem
 !ğ
NULL
)

74 (*
cšfo
->
mem
->
£lf_de¡ruù
) (cinfo);

75 
cšfo
->
mem
 = 
NULL
;

76 
cšfo
->
glob®_¡©e
 = 0;

77 
	}
}

85 
	$GLOBAL
(
JQUANT_TBL
 *)

86 
	$j³g_®loc_quªt_bË
 (
j_commÚ_±r
 
cšfo
)

88 
JQUANT_TBL
 *
tbl
;

90 
tbl
 = (
JQUANT_TBL
 *)

91 (*
cšfo
->
mem
->
®loc_sm®l
è(cšfo, 
JPOOL_PERMANENT
, 
	`SIZEOF
(
JQUANT_TBL
));

92 
tbl
->
£Á_bË
 = 
FALSE
;

93  
tbl
;

94 
	}
}

97 
	$GLOBAL
(
JHUFF_TBL
 *)

98 
	$j³g_®loc_huff_bË
 (
j_commÚ_±r
 
cšfo
)

100 
JHUFF_TBL
 *
tbl
;

102 
tbl
 = (
JHUFF_TBL
 *)

103 (*
cšfo
->
mem
->
®loc_sm®l
è(cšfo, 
JPOOL_PERMANENT
, 
	`SIZEOF
(
JHUFF_TBL
));

104 
tbl
->
£Á_bË
 = 
FALSE
;

105  
tbl
;

106 
	}
}

	@jconfig.h

5 
	#HAVE_PROTOTYPES


	)

6 
	#HAVE_UNSIGNED_CHAR


	)

7 
	#HAVE_UNSIGNED_SHORT


	)

10 #undeà
CHAR_IS_UNSIGNED


11 
	#HAVE_STDDEF_H


	)

12 
	#HAVE_STDLIB_H


	)

13 #undeà
NEED_BSD_STRINGS


14 #undeà
NEED_SYS_TYPES_H


15 #undeà
NEED_FAR_POINTERS


16 #undeà
NEED_SHORT_EXTERNAL_NAMES


18 #undeà
INCOMPLETE_TYPES_BROKEN


20 #ifdeà
JPEG_INTERNALS


22 #undeà
RIGHT_SHIFT_IS_UNSIGNED


23 
	#INLINE
 
__šlše__


	)

25 #undeà
DEFAULT_MAX_MEM


26 #undeà
NO_MKTEMP


30 #ifdeà
JPEG_CJPEG_DJPEG


32 
	#BMP_SUPPORTED


	)

33 
	#GIF_SUPPORTED


	)

34 
	#PPM_SUPPORTED


	)

35 #undeà
RLE_SUPPORTED


36 
	#TARGA_SUPPORTED


	)

38 #undeà
TWO_FILE_COMMANDLINE


39 #undeà
NEED_SIGNAL_CATCHER


40 #undeà
DONT_USE_B_MODE


43 #undeà
PROGRESS_REPORT


	@jcparam.c

13 
	#JPEG_INTERNALS


	)

14 
	~"jšşude.h
"

15 
	~"j³glib.h
"

22 
	$GLOBAL
()

23 
	$j³g_add_quªt_bË
 (
j_com´ess_±r
 
cšfo
, 
which_tbl
,

24 cÚ¡ *
basic_bË
,

25 
sÿË_çùÜ
, 
boŞ—n
 
fÜû_ba£lše
)

32 
JQUANT_TBL
 ** 
qtbÍŒ
;

33 
i
;

34 
‹mp
;

37 ià(
cšfo
->
glob®_¡©e
 !ğ
CSTATE_START
)

38 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_STATE
, cšfo->
glob®_¡©e
);

40 ià(
which_tbl
 < 0 || which_tbÈ>ğ
NUM_QUANT_TBLS
)

41 
	`ERREXIT1
(
cšfo
, 
JERR_DQT_INDEX
, 
which_tbl
);

43 
qtbÍŒ
 = & 
cšfo
->
quªt_tbl_±rs
[
which_tbl
];

45 ià(*
qtbÍŒ
 =ğ
NULL
)

46 *
qtbÍŒ
 = 
	`j³g_®loc_quªt_bË
((
j_commÚ_±r
è
cšfo
);

48 
i
 = 0; i < 
DCTSIZE2
; i++) {

49 
‹mp
 = ((è
basic_bË
[
i
] * 
sÿË_çùÜ
 + 50L) / 100L;

51 ià(
‹mp
 <= 0L)emp = 1L;

52 ià(
‹mp
 > 32767L)emp = 32767L;

53 ià(
fÜû_ba£lše
 && 
‹mp
 > 255L)

54 
‹mp
 = 255L;

55 (*
qtbÍŒ
)->
quªtv®
[
i
] = (
UINT16
è
‹mp
;

59 (*
qtbÍŒ
)->
£Á_bË
 = 
FALSE
;

60 
	}
}

63 
	$GLOBAL
()

64 
	$j³g_£t_lš—r_qu®™y
 (
j_com´ess_±r
 
cšfo
, 
sÿË_çùÜ
,

65 
boŞ—n
 
fÜû_ba£lše
)

76 cÚ¡ 
¡d_lumšªû_quªt_tbl
[
DCTSIZE2
] = {

86 cÚ¡ 
¡d_chromšªû_quªt_tbl
[
DCTSIZE2
] = {

98 
	`j³g_add_quªt_bË
(
cšfo
, 0, 
¡d_lumšªû_quªt_tbl
,

99 
sÿË_çùÜ
, 
fÜû_ba£lše
);

100 
	`j³g_add_quªt_bË
(
cšfo
, 1, 
¡d_chromšªû_quªt_tbl
,

101 
sÿË_çùÜ
, 
fÜû_ba£lše
);

102 
	}
}

105 
	$GLOBAL
()

106 
	$j³g_qu®™y_sÿlšg
 (
qu®™y
)

113 ià(
qu®™y
 <= 0) quality = 1;

114 ià(
qu®™y
 > 100) quality = 100;

122 ià(
qu®™y
 < 50)

123 
qu®™y
 = 5000 / quality;

125 
qu®™y
 = 200 - quality*2;

127  
qu®™y
;

128 
	}
}

131 
	$GLOBAL
()

132 
	$j³g_£t_qu®™y
 (
j_com´ess_±r
 
cšfo
, 
qu®™y
, 
boŞ—n
 
fÜû_ba£lše
)

140 
qu®™y
 = 
	`j³g_qu®™y_sÿlšg
(quality);

143 
	`j³g_£t_lš—r_qu®™y
(
cšfo
, 
qu®™y
, 
fÜû_ba£lše
);

144 
	}
}

151 
	$LOCAL
()

152 
	$add_huff_bË
 (
j_com´ess_±r
 
cšfo
,

153 
JHUFF_TBL
 **
htbÍŒ
, cÚ¡ 
UINT8
 *
b™s
, cÚ¡ UINT8 *
v®
)

156 
nsymbŞs
, 
Ën
;

158 ià(*
htbÍŒ
 =ğ
NULL
)

159 *
htbÍŒ
 = 
	`j³g_®loc_huff_bË
((
j_commÚ_±r
è
cšfo
);

162 
	`MEMCOPY
((*
htbÍŒ
)->
b™s
, b™s, 
	`SIZEOF
((*htblptr)->bits));

168 
nsymbŞs
 = 0;

169 
Ën
 = 1;†en <= 16;†en++)

170 
nsymbŞs
 +ğ
b™s
[
Ën
];

171 ià(
nsymbŞs
 < 1 ||‚symbols > 256)

172 
	`ERREXIT
(
cšfo
, 
JERR_BAD_HUFF_TABLE
);

174 
	`MEMCOPY
((*
htbÍŒ
)->
huffv®
, 
v®
, 
nsymbŞs
 * 
	`SIZEOF
(
UINT8
));

177 (*
htbÍŒ
)->
£Á_bË
 = 
FALSE
;

178 
	}
}

181 
	$LOCAL
()

182 
	$¡d_huff_bËs
 (
j_com´ess_±r
 
cšfo
)

186 cÚ¡ 
UINT8
 
b™s_dc_lumšªû
[17] =

188 cÚ¡ 
UINT8
 
v®_dc_lumšªû
[] =

191 cÚ¡ 
UINT8
 
b™s_dc_chromšªû
[17] =

193 cÚ¡ 
UINT8
 
v®_dc_chromšªû
[] =

196 cÚ¡ 
UINT8
 
b™s_ac_lumšªû
[17] =

198 cÚ¡ 
UINT8
 
v®_ac_lumšªû
[] =

221 cÚ¡ 
UINT8
 
b™s_ac_chromšªû
[17] =

223 cÚ¡ 
UINT8
 
v®_ac_chromšªû
[] =

246 
	`add_huff_bË
(
cšfo
, &cšfo->
dc_huff_tbl_±rs
[0],

247 
b™s_dc_lumšªû
, 
v®_dc_lumšªû
);

248 
	`add_huff_bË
(
cšfo
, &cšfo->
ac_huff_tbl_±rs
[0],

249 
b™s_ac_lumšªû
, 
v®_ac_lumšªû
);

250 
	`add_huff_bË
(
cšfo
, &cšfo->
dc_huff_tbl_±rs
[1],

251 
b™s_dc_chromšªû
, 
v®_dc_chromšªû
);

252 
	`add_huff_bË
(
cšfo
, &cšfo->
ac_huff_tbl_±rs
[1],

253 
b™s_ac_chromšªû
, 
v®_ac_chromšªû
);

254 
	}
}

267 
	$GLOBAL
()

268 
	$j³g_£t_deçuÉs
 (
j_com´ess_±r
 
cšfo
)

270 
i
;

273 ià(
cšfo
->
glob®_¡©e
 !ğ
CSTATE_START
)

274 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_STATE
, cšfo->
glob®_¡©e
);

280 ià(
cšfo
->
comp_šfo
 =ğ
NULL
)

281 
cšfo
->
comp_šfo
 = (
j³g_compÚ’t_šfo
 *)

282 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_PERMANENT
,

283 
MAX_COMPONENTS
 * 
	`SIZEOF
(
j³g_compÚ’t_šfo
));

287 
cšfo
->
d©a_´ecisiÚ
 = 
BITS_IN_JSAMPLE
;

289 
	`j³g_£t_qu®™y
(
cšfo
, 75, 
TRUE
);

291 
	`¡d_huff_bËs
(
cšfo
);

294 
i
 = 0; i < 
NUM_ARITH_TBLS
; i++) {

295 
cšfo
->
¬™h_dc_L
[
i
] = 0;

296 
cšfo
->
¬™h_dc_U
[
i
] = 1;

297 
cšfo
->
¬™h_ac_K
[
i
] = 5;

301 
cšfo
->
sÿn_šfo
 = 
NULL
;

302 
cšfo
->
num_sÿns
 = 0;

305 
cšfo
->
¿w_d©a_š
 = 
FALSE
;

308 
cšfo
->
¬™h_code
 = 
FALSE
;

311 
cšfo
->
İtimize_codšg
 = 
FALSE
;

317 ià(
cšfo
->
d©a_´ecisiÚ
 > 8)

318 
cšfo
->
İtimize_codšg
 = 
TRUE
;

321 
cšfo
->
CCIR601_§m¶šg
 = 
FALSE
;

324 
cšfo
->
smoÙhšg_çùÜ
 = 0;

327 
cšfo
->
dù_m‘hod
 = 
JDCT_DEFAULT
;

330 
cšfo
->
»¡¬t_š‹rv®
 = 0;

331 
cšfo
->
»¡¬t_š_rows
 = 0;

342 
cšfo
->
JFIF_majÜ_v”siÚ
 = 1;

343 
cšfo
->
JFIF_mšÜ_v”siÚ
 = 1;

344 
cšfo
->
d’s™y_un™
 = 0;

345 
cšfo
->
X_d’s™y
 = 1;

346 
cšfo
->
Y_d’s™y
 = 1;

350 
	`j³g_deçuÉ_cŞÜ¥aû
(
cšfo
);

351 
	}
}

358 
	$GLOBAL
()

359 
	$j³g_deçuÉ_cŞÜ¥aû
 (
j_com´ess_±r
 
cšfo
)

361 
cšfo
->
š_cŞÜ_¥aû
) {

362 
JCS_GRAYSCALE
:

363 
	`j³g_£t_cŞÜ¥aû
(
cšfo
, 
JCS_GRAYSCALE
);

365 
JCS_RGB
:

366 
	`j³g_£t_cŞÜ¥aû
(
cšfo
, 
JCS_YCbCr
);

368 
JCS_YCbCr
:

369 
	`j³g_£t_cŞÜ¥aû
(
cšfo
, 
JCS_YCbCr
);

371 
JCS_CMYK
:

372 
	`j³g_£t_cŞÜ¥aû
(
cšfo
, 
JCS_CMYK
);

374 
JCS_YCCK
:

375 
	`j³g_£t_cŞÜ¥aû
(
cšfo
, 
JCS_YCCK
);

377 
JCS_UNKNOWN
:

378 
	`j³g_£t_cŞÜ¥aû
(
cšfo
, 
JCS_UNKNOWN
);

381 
	`ERREXIT
(
cšfo
, 
JERR_BAD_IN_COLORSPACE
);

383 
	}
}

390 
	$GLOBAL
()

391 
	$j³g_£t_cŞÜ¥aû
 (
j_com´ess_±r
 
cšfo
, 
J_COLOR_SPACE
 
cŞÜ¥aû
)

393 
j³g_compÚ’t_šfo
 * 
comµŒ
;

394 
ci
;

396 
	#SET_COMP
(
šdex
,
id
,
h§mp
,
v§mp
,
quªt
,
dùbl
,
aùbl
) \

397 (
comµŒ
 = &
cšfo
->
comp_šfo
[
šdex
], \

398 
comµŒ
->
compÚ’t_id
 = (
id
), \

399 
comµŒ
->
h_§mp_çùÜ
 = (
h§mp
), \

400 
comµŒ
->
v_§mp_çùÜ
 = (
v§mp
), \

401 
comµŒ
->
quªt_tbl_no
 = (
quªt
), \

402 
comµŒ
->
dc_tbl_no
 = (
dùbl
), \

403 
comµŒ
->
ac_tbl_no
 = (
aùbl
è)

	)

406 ià(
cšfo
->
glob®_¡©e
 !ğ
CSTATE_START
)

407 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_STATE
, cšfo->
glob®_¡©e
);

413 
cšfo
->
j³g_cŞÜ_¥aû
 = 
cŞÜ¥aû
;

415 
cšfo
->
wr™e_JFIF_h—d”
 = 
FALSE
;

416 
cšfo
->
wr™e_Adobe_m¬k”
 = 
FALSE
;

418 
cŞÜ¥aû
) {

419 
JCS_GRAYSCALE
:

420 
cšfo
->
wr™e_JFIF_h—d”
 = 
TRUE
;

421 
cšfo
->
num_compÚ’ts
 = 1;

423 
	`SET_COMP
(0, 1, 1,1, 0, 0,0);

425 
JCS_RGB
:

426 
cšfo
->
wr™e_Adobe_m¬k”
 = 
TRUE
;

427 
cšfo
->
num_compÚ’ts
 = 3;

428 
	`SET_COMP
(0, 0x52 , 1,1, 0, 0,0);

429 
	`SET_COMP
(1, 0x47 , 1,1, 0, 0,0);

430 
	`SET_COMP
(2, 0x42 , 1,1, 0, 0,0);

432 
JCS_YCbCr
:

433 
cšfo
->
wr™e_JFIF_h—d”
 = 
TRUE
;

434 
cšfo
->
num_compÚ’ts
 = 3;

437 
	`SET_COMP
(0, 1, 2,2, 0, 0,0);

438 
	`SET_COMP
(1, 2, 1,1, 1, 1,1);

439 
	`SET_COMP
(2, 3, 1,1, 1, 1,1);

441 
JCS_CMYK
:

442 
cšfo
->
wr™e_Adobe_m¬k”
 = 
TRUE
;

443 
cšfo
->
num_compÚ’ts
 = 4;

444 
	`SET_COMP
(0, 0x43 , 1,1, 0, 0,0);

445 
	`SET_COMP
(1, 0x4D , 1,1, 0, 0,0);

446 
	`SET_COMP
(2, 0x59 , 1,1, 0, 0,0);

447 
	`SET_COMP
(3, 0x4B , 1,1, 0, 0,0);

449 
JCS_YCCK
:

450 
cšfo
->
wr™e_Adobe_m¬k”
 = 
TRUE
;

451 
cšfo
->
num_compÚ’ts
 = 4;

452 
	`SET_COMP
(0, 1, 2,2, 0, 0,0);

453 
	`SET_COMP
(1, 2, 1,1, 1, 1,1);

454 
	`SET_COMP
(2, 3, 1,1, 1, 1,1);

455 
	`SET_COMP
(3, 4, 2,2, 0, 0,0);

457 
JCS_UNKNOWN
:

458 
cšfo
->
num_compÚ’ts
 = cšfo->
šput_compÚ’ts
;

459 ià(
cšfo
->
num_compÚ’ts
 < 1 || cšfo->num_compÚ’t > 
MAX_COMPONENTS
)

460 
	`ERREXIT2
(
cšfo
, 
JERR_COMPONENT_COUNT
, cšfo->
num_compÚ’ts
,

461 
MAX_COMPONENTS
);

462 
ci
 = 0; c˜< 
cšfo
->
num_compÚ’ts
; ci++) {

463 
	`SET_COMP
(
ci
, ci, 1,1, 0, 0,0);

467 
	`ERREXIT
(
cšfo
, 
JERR_BAD_J_COLORSPACE
);

469 
	}
}

472 #ifdeà
C_PROGRESSIVE_SUPPORTED


474 
	$LOCAL
(
j³g_sÿn_šfo
 *)

475 
	$fl_a_sÿn
 (
j³g_sÿn_šfo
 * 
sÿÅŒ
, 
ci
,

476 
Ss
, 
Se
, 
Ah
, 
Al
)

479 
sÿÅŒ
->
comps_š_sÿn
 = 1;

480 
sÿÅŒ
->
compÚ’t_šdex
[0] = 
ci
;

481 
sÿÅŒ
->
Ss
 = Ss;

482 
sÿÅŒ
->
Se
 = Se;

483 
sÿÅŒ
->
Ah
 = Ah;

484 
sÿÅŒ
->
Al
 = Al;

485 
sÿÅŒ
++;

486  
sÿÅŒ
;

487 
	}
}

489 
	$LOCAL
(
j³g_sÿn_šfo
 *)

490 
	$fl_sÿns
 (
j³g_sÿn_šfo
 * 
sÿÅŒ
, 
ncomps
,

491 
Ss
, 
Se
, 
Ah
, 
Al
)

494 
ci
;

496 
ci
 = 0; c˜< 
ncomps
; ci++) {

497 
sÿÅŒ
->
comps_š_sÿn
 = 1;

498 
sÿÅŒ
->
compÚ’t_šdex
[0] = 
ci
;

499 
sÿÅŒ
->
Ss
 = Ss;

500 
sÿÅŒ
->
Se
 = Se;

501 
sÿÅŒ
->
Ah
 = Ah;

502 
sÿÅŒ
->
Al
 = Al;

503 
sÿÅŒ
++;

505  
sÿÅŒ
;

506 
	}
}

508 
	$LOCAL
(
j³g_sÿn_šfo
 *)

509 
	$fl_dc_sÿns
 (
j³g_sÿn_šfo
 * 
sÿÅŒ
, 
ncomps
, 
Ah
, 
Al
)

512 
ci
;

514 ià(
ncomps
 <ğ
MAX_COMPS_IN_SCAN
) {

516 
sÿÅŒ
->
comps_š_sÿn
 = 
ncomps
;

517 
ci
 = 0; c˜< 
ncomps
; ci++)

518 
sÿÅŒ
->
compÚ’t_šdex
[
ci
] = ci;

519 
sÿÅŒ
->
Ss
 = sÿÅŒ->
Se
 = 0;

520 
sÿÅŒ
->
Ah
 = Ah;

521 
sÿÅŒ
->
Al
 = Al;

522 
sÿÅŒ
++;

525 
sÿÅŒ
 = 
	`fl_sÿns
(sÿÅŒ, 
ncomps
, 0, 0, 
Ah
, 
Al
);

527  
sÿÅŒ
;

528 
	}
}

536 
	$GLOBAL
()

537 
	$j³g_sim¶e_´og»ssiÚ
 (
j_com´ess_±r
 
cšfo
)

539 
ncomps
 = 
cšfo
->
num_compÚ’ts
;

540 
nsÿns
;

541 
j³g_sÿn_šfo
 * 
sÿÅŒ
;

544 ià(
cšfo
->
glob®_¡©e
 !ğ
CSTATE_START
)

545 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_STATE
, cšfo->
glob®_¡©e
);

548 ià(
ncomps
 =ğ3 && 
cšfo
->
j³g_cŞÜ_¥aû
 =ğ
JCS_YCbCr
) {

550 
nsÿns
 = 10;

553 ià(
ncomps
 > 
MAX_COMPS_IN_SCAN
)

554 
nsÿns
 = 6 * 
ncomps
;

556 
nsÿns
 = 2 + 4 * 
ncomps
;

566 ià(
cšfo
->
süt_¥aû
 =ğ
NULL
 || cšfo->
süt_¥aû_size
 < 
nsÿns
) {

567 
cšfo
->
süt_¥aû_size
 = 
	`MAX
(
nsÿns
, 10);

568 
cšfo
->
süt_¥aû
 = (
j³g_sÿn_šfo
 *)

569 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_PERMANENT
,

570 
cšfo
->
süt_¥aû_size
 * 
	`SIZEOF
(
j³g_sÿn_šfo
));

572 
sÿÅŒ
 = 
cšfo
->
süt_¥aû
;

573 
cšfo
->
sÿn_šfo
 = 
sÿÅŒ
;

574 
cšfo
->
num_sÿns
 = 
nsÿns
;

576 ià(
ncomps
 =ğ3 && 
cšfo
->
j³g_cŞÜ_¥aû
 =ğ
JCS_YCbCr
) {

579 
sÿÅŒ
 = 
	`fl_dc_sÿns
(sÿÅŒ, 
ncomps
, 0, 1);

581 
sÿÅŒ
 = 
	`fl_a_sÿn
(scanptr, 0, 1, 5, 0, 2);

583 
sÿÅŒ
 = 
	`fl_a_sÿn
(scanptr, 2, 1, 63, 0, 1);

584 
sÿÅŒ
 = 
	`fl_a_sÿn
(scanptr, 1, 1, 63, 0, 1);

586 
sÿÅŒ
 = 
	`fl_a_sÿn
(scanptr, 0, 6, 63, 0, 2);

588 
sÿÅŒ
 = 
	`fl_a_sÿn
(scanptr, 0, 1, 63, 2, 1);

590 
sÿÅŒ
 = 
	`fl_dc_sÿns
(sÿÅŒ, 
ncomps
, 1, 0);

592 
sÿÅŒ
 = 
	`fl_a_sÿn
(scanptr, 2, 1, 63, 1, 0);

593 
sÿÅŒ
 = 
	`fl_a_sÿn
(scanptr, 1, 1, 63, 1, 0);

595 
sÿÅŒ
 = 
	`fl_a_sÿn
(scanptr, 0, 1, 63, 1, 0);

599 
sÿÅŒ
 = 
	`fl_dc_sÿns
(sÿÅŒ, 
ncomps
, 0, 1);

600 
sÿÅŒ
 = 
	`fl_sÿns
(sÿÅŒ, 
ncomps
, 1, 5, 0, 2);

601 
sÿÅŒ
 = 
	`fl_sÿns
(sÿÅŒ, 
ncomps
, 6, 63, 0, 2);

603 
sÿÅŒ
 = 
	`fl_sÿns
(sÿÅŒ, 
ncomps
, 1, 63, 2, 1);

605 
sÿÅŒ
 = 
	`fl_dc_sÿns
(sÿÅŒ, 
ncomps
, 1, 0);

606 
sÿÅŒ
 = 
	`fl_sÿns
(sÿÅŒ, 
ncomps
, 1, 63, 1, 0);

608 
	}
}

	@jcphuff.c

15 
	#JPEG_INTERNALS


	)

16 
	~"jšşude.h
"

17 
	~"j³glib.h
"

18 
	~"jchuff.h
"

20 #ifdeà
C_PROGRESSIVE_SUPPORTED


25 
j³g_’Œİy_’cod”
 
	mpub
;

28 
boŞ—n
 
	mg©h”_¡©i¡ics
;

33 
JOCTET
 * 
	mÃxt_ouut_by‹
;

34 
size_t
 
	mä“_š_bufãr
;

35 
INT32
 
	mput_bufãr
;

36 
	mput_b™s
;

37 
j_com´ess_±r
 
	mcšfo
;

40 
	mÏ¡_dc_v®
[
MAX_COMPS_IN_SCAN
];

43 
	mac_tbl_no
;

44 
	mEOBRUN
;

45 
	mBE
;

46 * 
	mb™_bufãr
;

49 
	m»¡¬ts_to_go
;

50 
	mÃxt_»¡¬t_num
;

56 
c_d”ived_tbl
 * 
	md”ived_tbls
[
NUM_HUFF_TBLS
];

59 * 
	mcouÁ_±rs
[
NUM_HUFF_TBLS
];

60 } 
	tphuff_’Œİy_’cod”
;

62 
phuff_’Œİy_’cod”
 * 
	tphuff_’Œİy_±r
;

70 
	#MAX_CORR_BITS
 1000

	)

77 #ifdeà
RIGHT_SHIFT_IS_UNSIGNED


78 
	#ISHIFT_TEMPS
 
ishiá_‹mp
;

	)

79 
	#IRIGHT_SHIFT
(
x
,
shá
) \

80 ((
ishiá_‹mp
 = (
x
)) < 0 ? \

81 (
ishiá_‹mp
 >> (
shá
)) | ((~0) << (16-(shft))) : \

82 (
ishiá_‹mp
 >> (
shá
)))

	)

84 
	#ISHIFT_TEMPS


	)

85 
	#IRIGHT_SHIFT
(
x
,
shá
è((xè>> (shá))

	)

89 
	$METHODDEF
(
boŞ—n
è
’code_mcu_DC_fœ¡
 
	`JPP
((
j_com´ess_±r
 
cšfo
,

90 
JBLOCKROW
 *
MCU_d©a
));

91 
	$METHODDEF
(
boŞ—n
è
’code_mcu_AC_fœ¡
 
	`JPP
((
j_com´ess_±r
 
cšfo
,

92 
JBLOCKROW
 *
MCU_d©a
));

93 
	$METHODDEF
(
boŞ—n
è
’code_mcu_DC_»fše
 
	`JPP
((
j_com´ess_±r
 
cšfo
,

94 
JBLOCKROW
 *
MCU_d©a
));

95 
	$METHODDEF
(
boŞ—n
è
’code_mcu_AC_»fše
 
	`JPP
((
j_com´ess_±r
 
cšfo
,

96 
JBLOCKROW
 *
MCU_d©a
));

97 
	$METHODDEF
(è
fšish_·ss_phuff
 
	`JPP
((
j_com´ess_±r
 
cšfo
));

98 
	$METHODDEF
(è
fšish_·ss_g©h”_phuff
 
	`JPP
((
j_com´ess_±r
 
cšfo
));

105 
	$METHODDEF
()

106 
	$¡¬t_·ss_phuff
 (
j_com´ess_±r
 
cšfo
, 
boŞ—n
 
g©h”_¡©i¡ics
)

108 
phuff_’Œİy_±r
 
’Œİy
 = (phuff_’Œİy_±rè
cšfo
->entropy;

109 
boŞ—n
 
is_DC_bªd
;

110 
ci
, 
tbl
;

111 
j³g_compÚ’t_šfo
 * 
comµŒ
;

113 
’Œİy
->
cšfo
 = cinfo;

114 
’Œİy
->
g©h”_¡©i¡ics
 = gather_statistics;

116 
is_DC_bªd
 = (
cšfo
->
Ss
 == 0);

121 ià(
cšfo
->
Ah
 == 0) {

122 ià(
is_DC_bªd
)

123 
’Œİy
->
pub
.
’code_mcu
 = 
’code_mcu_DC_fœ¡
;

125 
’Œİy
->
pub
.
’code_mcu
 = 
’code_mcu_AC_fœ¡
;

127 ià(
is_DC_bªd
)

128 
’Œİy
->
pub
.
’code_mcu
 = 
’code_mcu_DC_»fše
;

130 
’Œİy
->
pub
.
’code_mcu
 = 
’code_mcu_AC_»fše
;

132 ià(
’Œİy
->
b™_bufãr
 =ğ
NULL
)

133 
’Œİy
->
b™_bufãr
 = (*)

134 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

135 
MAX_CORR_BITS
 * 
	`SIZEOF
());

138 ià(
g©h”_¡©i¡ics
)

139 
’Œİy
->
pub
.
fšish_·ss
 = 
fšish_·ss_g©h”_phuff
;

141 
’Œİy
->
pub
.
fšish_·ss
 = 
fšish_·ss_phuff
;

146 
ci
 = 0; c˜< 
cšfo
->
comps_š_sÿn
; ci++) {

147 
comµŒ
 = 
cšfo
->
cur_comp_šfo
[
ci
];

149 
’Œİy
->
Ï¡_dc_v®
[
ci
] = 0;

151 ià(
is_DC_bªd
) {

152 ià(
cšfo
->
Ah
 != 0)

154 
tbl
 = 
comµŒ
->
dc_tbl_no
;

156 
’Œİy
->
ac_tbl_no
 = 
tbl
 = 
comµŒ
->ac_tbl_no;

158 ià(
g©h”_¡©i¡ics
) {

161 ià(
tbl
 < 0 ||bÈ>ğ
NUM_HUFF_TBLS
)

162 
	`ERREXIT1
(
cšfo
, 
JERR_NO_HUFF_TABLE
, 
tbl
);

165 ià(
’Œİy
->
couÁ_±rs
[
tbl
] =ğ
NULL
)

166 
’Œİy
->
couÁ_±rs
[
tbl
] = (*)

167 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

168 257 * 
	`SIZEOF
());

169 
	`MEMZERO
(
’Œİy
->
couÁ_±rs
[
tbl
], 257 * 
	`SIZEOF
());

173 
	`j³g_make_c_d”ived_tbl
(
cšfo
, 
is_DC_bªd
, 
tbl
,

174 & 
’Œİy
->
d”ived_tbls
[
tbl
]);

179 
’Œİy
->
EOBRUN
 = 0;

180 
’Œİy
->
BE
 = 0;

183 
’Œİy
->
put_bufãr
 = 0;

184 
’Œİy
->
put_b™s
 = 0;

187 
’Œİy
->
»¡¬ts_to_go
 = 
cšfo
->
»¡¬t_š‹rv®
;

188 
’Œİy
->
Ãxt_»¡¬t_num
 = 0;

189 
	}
}

198 
	#em™_by‹
(
’Œİy
,
v®
) \

199 { *(
’Œİy
)->
Ãxt_ouut_by‹
++ = (
JOCTET
è(
v®
); \

200 ià(--(
’Œİy
)->
ä“_š_bufãr
 == 0) \

201 
	`dump_bufãr
(
’Œİy
); }

	)

204 
	$LOCAL
()

205 
	$dump_bufãr
 (
phuff_’Œİy_±r
 
’Œİy
)

208 
j³g_de¡š©iÚ_mgr
 * 
de¡
 = 
’Œİy
->
cšfo
->dest;

210 ià(! (*
de¡
->
em±y_ouut_bufãr
è(
’Œİy
->
cšfo
))

211 
	`ERREXIT
(
’Œİy
->
cšfo
, 
JERR_CANT_SUSPEND
);

213 
’Œİy
->
Ãxt_ouut_by‹
 = 
de¡
->next_output_byte;

214 
’Œİy
->
ä“_š_bufãr
 = 
de¡
->free_in_buffer;

215 
	}
}

226 
INLINE


227 
	$LOCAL
()

228 
	$em™_b™s
 (
phuff_’Œİy_±r
 
’Œİy
, 
code
, 
size
)

232 
INT32
 
put_bufãr
 = (INT32è
code
;

233 
put_b™s
 = 
’Œİy
->put_bits;

236 ià(
size
 == 0)

237 
	`ERREXIT
(
’Œİy
->
cšfo
, 
JERR_HUFF_MISSING_CODE
);

239 ià(
’Œİy
->
g©h”_¡©i¡ics
)

242 
put_bufãr
 &ğ(((
INT32
è1)<<
size
) - 1;

244 
put_b™s
 +ğ
size
;

246 
put_bufãr
 <<ğ24 - 
put_b™s
;

248 
put_bufãr
 |ğ
’Œİy
->put_buffer;

250 
put_b™s
 >= 8) {

251 
c
 = (è((
put_bufãr
 >> 16) & 0xFF);

253 
	`em™_by‹
(
’Œİy
, 
c
);

254 ià(
c
 == 0xFF) {

255 
	`em™_by‹
(
’Œİy
, 0);

257 
put_bufãr
 <<= 8;

258 
put_b™s
 -= 8;

261 
’Œİy
->
put_bufãr
 =…ut_buffer;

262 
’Œİy
->
put_b™s
 =…ut_bits;

263 
	}
}

266 
	$LOCAL
()

267 
	$æush_b™s
 (
phuff_’Œİy_±r
 
’Œİy
)

269 
	`em™_b™s
(
’Œİy
, 0x7F, 7);

270 
’Œİy
->
put_bufãr
 = 0;

271 
’Œİy
->
put_b™s
 = 0;

272 
	}
}

279 
INLINE


280 
	$LOCAL
()

281 
	$em™_symbŞ
 (
phuff_’Œİy_±r
 
’Œİy
, 
tbl_no
, 
symbŞ
)

283 ià(
’Œİy
->
g©h”_¡©i¡ics
)

284 
’Œİy
->
couÁ_±rs
[
tbl_no
][
symbŞ
]++;

286 
c_d”ived_tbl
 * 
tbl
 = 
’Œİy
->
d”ived_tbls
[
tbl_no
];

287 
	`em™_b™s
(
’Œİy
, 
tbl
->
ehufco
[
symbŞ
],bl->
ehufsi
[symbol]);

289 
	}
}

296 
	$LOCAL
()

297 
	$em™_bufã»d_b™s
 (
phuff_’Œİy_±r
 
’Œİy
, * 
buf¡¬t
,

298 
nb™s
)

300 ià(
’Œİy
->
g©h”_¡©i¡ics
)

303 
nb™s
 > 0) {

304 
	`em™_b™s
(
’Œİy
, (è(*
buf¡¬t
), 1);

305 
buf¡¬t
++;

306 
nb™s
--;

308 
	}
}

315 
	$LOCAL
()

316 
	$em™_eobrun
 (
phuff_’Œİy_±r
 
’Œİy
)

318 
‹mp
, 
nb™s
;

320 ià(
’Œİy
->
EOBRUN
 > 0) {

321 
‹mp
 = 
’Œİy
->
EOBRUN
;

322 
nb™s
 = 0;

323 (
‹mp
 >>= 1))

324 
nb™s
++;

326 ià(
nb™s
 > 14)

327 
	`ERREXIT
(
’Œİy
->
cšfo
, 
JERR_HUFF_MISSING_CODE
);

329 
	`em™_symbŞ
(
’Œİy
,ƒÁrİy->
ac_tbl_no
, 
nb™s
 << 4);

330 ià(
nb™s
)

331 
	`em™_b™s
(
’Œİy
,ƒÁrİy->
EOBRUN
, 
nb™s
);

333 
’Œİy
->
EOBRUN
 = 0;

336 
	`em™_bufã»d_b™s
(
’Œİy
,ƒÁrİy->
b™_bufãr
,ƒÁrİy->
BE
);

337 
’Œİy
->
BE
 = 0;

339 
	}
}

346 
	$LOCAL
()

347 
	$em™_»¡¬t
 (
phuff_’Œİy_±r
 
’Œİy
, 
»¡¬t_num
)

349 
ci
;

351 
	`em™_eobrun
(
’Œİy
);

353 ià(! 
’Œİy
->
g©h”_¡©i¡ics
) {

354 
	`æush_b™s
(
’Œİy
);

355 
	`em™_by‹
(
’Œİy
, 0xFF);

356 
	`em™_by‹
(
’Œİy
, 
JPEG_RST0
 + 
»¡¬t_num
);

359 ià(
’Œİy
->
cšfo
->
Ss
 == 0) {

361 
ci
 = 0; c˜< 
’Œİy
->
cšfo
->
comps_š_sÿn
; ci++)

362 
’Œİy
->
Ï¡_dc_v®
[
ci
] = 0;

365 
’Œİy
->
EOBRUN
 = 0;

366 
’Œİy
->
BE
 = 0;

368 
	}
}

376 
	$METHODDEF
(
boŞ—n
)

377 
	$’code_mcu_DC_fœ¡
 (
j_com´ess_±r
 
cšfo
, 
JBLOCKROW
 *
MCU_d©a
)

379 
phuff_’Œİy_±r
 
’Œİy
 = (phuff_’Œİy_±rè
cšfo
->entropy;

380 
‹mp
, 
‹mp2
;

381 
nb™s
;

382 
blkn
, 
ci
;

383 
Al
 = 
cšfo
->Al;

384 
JBLOCKROW
 
block
;

385 
j³g_compÚ’t_šfo
 * 
comµŒ
;

386 
ISHIFT_TEMPS


388 
’Œİy
->
Ãxt_ouut_by‹
 = 
cšfo
->
de¡
->next_output_byte;

389 
’Œİy
->
ä“_š_bufãr
 = 
cšfo
->
de¡
->free_in_buffer;

392 ià(
cšfo
->
»¡¬t_š‹rv®
)

393 ià(
’Œİy
->
»¡¬ts_to_go
 == 0)

394 
	`em™_»¡¬t
(
’Œİy
,ƒÁrİy->
Ãxt_»¡¬t_num
);

397 
blkn
 = 0; blkÀ< 
cšfo
->
blocks_š_MCU
; blkn++) {

398 
block
 = 
MCU_d©a
[
blkn
];

399 
ci
 = 
cšfo
->
MCU_memb”sh
[
blkn
];

400 
comµŒ
 = 
cšfo
->
cur_comp_šfo
[
ci
];

405 
‹mp2
 = 
	`IRIGHT_SHIFT
((è((*
block
)[0]), 
Al
);

408 
‹mp
 = 
‹mp2
 - 
’Œİy
->
Ï¡_dc_v®
[
ci
];

409 
’Œİy
->
Ï¡_dc_v®
[
ci
] = 
‹mp2
;

412 
‹mp2
 = 
‹mp
;

413 ià(
‹mp
 < 0) {

414 
‹mp
 = -temp;

417 
‹mp2
--;

421 
nb™s
 = 0;

422 
‹mp
) {

423 
nb™s
++;

424 
‹mp
 >>= 1;

429 ià(
nb™s
 > 
MAX_COEF_BITS
+1)

430 
	`ERREXIT
(
cšfo
, 
JERR_BAD_DCT_COEF
);

433 
	`em™_symbŞ
(
’Œİy
, 
comµŒ
->
dc_tbl_no
, 
nb™s
);

437 ià(
nb™s
)

438 
	`em™_b™s
(
’Œİy
, (è
‹mp2
, 
nb™s
);

441 
cšfo
->
de¡
->
Ãxt_ouut_by‹
 = 
’Œİy
->next_output_byte;

442 
cšfo
->
de¡
->
ä“_š_bufãr
 = 
’Œİy
->free_in_buffer;

445 ià(
cšfo
->
»¡¬t_š‹rv®
) {

446 ià(
’Œİy
->
»¡¬ts_to_go
 == 0) {

447 
’Œİy
->
»¡¬ts_to_go
 = 
cšfo
->
»¡¬t_š‹rv®
;

448 
’Œİy
->
Ãxt_»¡¬t_num
++;

449 
’Œİy
->
Ãxt_»¡¬t_num
 &= 7;

451 
’Œİy
->
»¡¬ts_to_go
--;

454  
TRUE
;

455 
	}
}

463 
	$METHODDEF
(
boŞ—n
)

464 
	$’code_mcu_AC_fœ¡
 (
j_com´ess_±r
 
cšfo
, 
JBLOCKROW
 *
MCU_d©a
)

466 
phuff_’Œİy_±r
 
’Œİy
 = (phuff_’Œİy_±rè
cšfo
->entropy;

467 
‹mp
, 
‹mp2
;

468 
nb™s
;

469 
r
, 
k
;

470 
Se
 = 
cšfo
->Se;

471 
Al
 = 
cšfo
->Al;

472 
JBLOCKROW
 
block
;

474 
’Œİy
->
Ãxt_ouut_by‹
 = 
cšfo
->
de¡
->next_output_byte;

475 
’Œİy
->
ä“_š_bufãr
 = 
cšfo
->
de¡
->free_in_buffer;

478 ià(
cšfo
->
»¡¬t_š‹rv®
)

479 ià(
’Œİy
->
»¡¬ts_to_go
 == 0)

480 
	`em™_»¡¬t
(
’Œİy
,ƒÁrİy->
Ãxt_»¡¬t_num
);

483 
block
 = 
MCU_d©a
[0];

487 
r
 = 0;

489 
k
 = 
cšfo
->
Ss
; k <ğ
Se
; k++) {

490 ià((
‹mp
 = (*
block
)[
j³g_Çtu¿l_Üd”
[
k
]]) == 0) {

491 
r
++;

499 ià(
‹mp
 < 0) {

500 
‹mp
 = -temp;

501 
‹mp
 >>ğ
Al
;

503 
‹mp2
 = ~
‹mp
;

505 
‹mp
 >>ğ
Al
;

506 
‹mp2
 = 
‹mp
;

509 ià(
‹mp
 == 0) {

510 
r
++;

515 ià(
’Œİy
->
EOBRUN
 > 0)

516 
	`em™_eobrun
(
’Œİy
);

518 
r
 > 15) {

519 
	`em™_symbŞ
(
’Œİy
,ƒÁrİy->
ac_tbl_no
, 0xF0);

520 
r
 -= 16;

524 
nb™s
 = 1;

525 (
‹mp
 >>= 1))

526 
nb™s
++;

528 ià(
nb™s
 > 
MAX_COEF_BITS
)

529 
	`ERREXIT
(
cšfo
, 
JERR_BAD_DCT_COEF
);

532 
	`em™_symbŞ
(
’Œİy
,ƒÁrİy->
ac_tbl_no
, (
r
 << 4è+ 
nb™s
);

536 
	`em™_b™s
(
’Œİy
, (è
‹mp2
, 
nb™s
);

538 
r
 = 0;

541 ià(
r
 > 0) {

542 
’Œİy
->
EOBRUN
++;

543 ià(
’Œİy
->
EOBRUN
 == 0x7FFF)

544 
	`em™_eobrun
(
’Œİy
);

547 
cšfo
->
de¡
->
Ãxt_ouut_by‹
 = 
’Œİy
->next_output_byte;

548 
cšfo
->
de¡
->
ä“_š_bufãr
 = 
’Œİy
->free_in_buffer;

551 ià(
cšfo
->
»¡¬t_š‹rv®
) {

552 ià(
’Œİy
->
»¡¬ts_to_go
 == 0) {

553 
’Œİy
->
»¡¬ts_to_go
 = 
cšfo
->
»¡¬t_š‹rv®
;

554 
’Œİy
->
Ãxt_»¡¬t_num
++;

555 
’Œİy
->
Ãxt_»¡¬t_num
 &= 7;

557 
’Œİy
->
»¡¬ts_to_go
--;

560  
TRUE
;

561 
	}
}

570 
	$METHODDEF
(
boŞ—n
)

571 
	$’code_mcu_DC_»fše
 (
j_com´ess_±r
 
cšfo
, 
JBLOCKROW
 *
MCU_d©a
)

573 
phuff_’Œİy_±r
 
’Œİy
 = (phuff_’Œİy_±rè
cšfo
->entropy;

574 
‹mp
;

575 
blkn
;

576 
Al
 = 
cšfo
->Al;

577 
JBLOCKROW
 
block
;

579 
’Œİy
->
Ãxt_ouut_by‹
 = 
cšfo
->
de¡
->next_output_byte;

580 
’Œİy
->
ä“_š_bufãr
 = 
cšfo
->
de¡
->free_in_buffer;

583 ià(
cšfo
->
»¡¬t_š‹rv®
)

584 ià(
’Œİy
->
»¡¬ts_to_go
 == 0)

585 
	`em™_»¡¬t
(
’Œİy
,ƒÁrİy->
Ãxt_»¡¬t_num
);

588 
blkn
 = 0; blkÀ< 
cšfo
->
blocks_š_MCU
; blkn++) {

589 
block
 = 
MCU_d©a
[
blkn
];

592 
‹mp
 = (*
block
)[0];

593 
	`em™_b™s
(
’Œİy
, (è(
‹mp
 >> 
Al
), 1);

596 
cšfo
->
de¡
->
Ãxt_ouut_by‹
 = 
’Œİy
->next_output_byte;

597 
cšfo
->
de¡
->
ä“_š_bufãr
 = 
’Œİy
->free_in_buffer;

600 ià(
cšfo
->
»¡¬t_š‹rv®
) {

601 ià(
’Œİy
->
»¡¬ts_to_go
 == 0) {

602 
’Œİy
->
»¡¬ts_to_go
 = 
cšfo
->
»¡¬t_š‹rv®
;

603 
’Œİy
->
Ãxt_»¡¬t_num
++;

604 
’Œİy
->
Ãxt_»¡¬t_num
 &= 7;

606 
’Œİy
->
»¡¬ts_to_go
--;

609  
TRUE
;

610 
	}
}

617 
	$METHODDEF
(
boŞ—n
)

618 
	$’code_mcu_AC_»fše
 (
j_com´ess_±r
 
cšfo
, 
JBLOCKROW
 *
MCU_d©a
)

620 
phuff_’Œİy_±r
 
’Œİy
 = (phuff_’Œİy_±rè
cšfo
->entropy;

621 
‹mp
;

622 
r
, 
k
;

623 
EOB
;

624 *
BR_bufãr
;

625 
BR
;

626 
Se
 = 
cšfo
->Se;

627 
Al
 = 
cšfo
->Al;

628 
JBLOCKROW
 
block
;

629 
absv®ues
[
DCTSIZE2
];

631 
’Œİy
->
Ãxt_ouut_by‹
 = 
cšfo
->
de¡
->next_output_byte;

632 
’Œİy
->
ä“_š_bufãr
 = 
cšfo
->
de¡
->free_in_buffer;

635 ià(
cšfo
->
»¡¬t_š‹rv®
)

636 ià(
’Œİy
->
»¡¬ts_to_go
 == 0)

637 
	`em™_»¡¬t
(
’Œİy
,ƒÁrİy->
Ãxt_»¡¬t_num
);

640 
block
 = 
MCU_d©a
[0];

645 
EOB
 = 0;

646 
k
 = 
cšfo
->
Ss
; k <ğ
Se
; k++) {

647 
‹mp
 = (*
block
)[
j³g_Çtu¿l_Üd”
[
k
]];

652 ià(
‹mp
 < 0)

653 
‹mp
 = -temp;

654 
‹mp
 >>ğ
Al
;

655 
absv®ues
[
k
] = 
‹mp
;

656 ià(
‹mp
 == 1)

657 
EOB
 = 
k
;

662 
r
 = 0;

663 
BR
 = 0;

664 
BR_bufãr
 = 
’Œİy
->
b™_bufãr
 +ƒÁrİy->
BE
;

666 
k
 = 
cšfo
->
Ss
; k <ğ
Se
; k++) {

667 ià((
‹mp
 = 
absv®ues
[
k
]) == 0) {

668 
r
++;

673 
r
 > 15 && 
k
 <ğ
EOB
) {

675 
	`em™_eobrun
(
’Œİy
);

677 
	`em™_symbŞ
(
’Œİy
,ƒÁrİy->
ac_tbl_no
, 0xF0);

678 
r
 -= 16;

680 
	`em™_bufã»d_b™s
(
’Œİy
, 
BR_bufãr
, 
BR
);

681 
BR_bufãr
 = 
’Œİy
->
b™_bufãr
;

682 
BR
 = 0;

690 ià(
‹mp
 > 1) {

692 
BR_bufãr
[
BR
++] = (è(
‹mp
 & 1);

697 
	`em™_eobrun
(
’Œİy
);

700 
	`em™_symbŞ
(
’Œİy
,ƒÁrİy->
ac_tbl_no
, (
r
 << 4) + 1);

703 
‹mp
 = ((*
block
)[
j³g_Çtu¿l_Üd”
[
k
]] < 0) ? 0 : 1;

704 
	`em™_b™s
(
’Œİy
, (è
‹mp
, 1);

707 
	`em™_bufã»d_b™s
(
’Œİy
, 
BR_bufãr
, 
BR
);

708 
BR_bufãr
 = 
’Œİy
->
b™_bufãr
;

709 
BR
 = 0;

710 
r
 = 0;

713 ià(
r
 > 0 || 
BR
 > 0) {

714 
’Œİy
->
EOBRUN
++;

715 
’Œİy
->
BE
 +ğ
BR
;

720 ià(
’Œİy
->
EOBRUN
 =ğ0x7FFF ||ƒÁrİy->
BE
 > (
MAX_CORR_BITS
-
DCTSIZE2
+1))

721 
	`em™_eobrun
(
’Œİy
);

724 
cšfo
->
de¡
->
Ãxt_ouut_by‹
 = 
’Œİy
->next_output_byte;

725 
cšfo
->
de¡
->
ä“_š_bufãr
 = 
’Œİy
->free_in_buffer;

728 ià(
cšfo
->
»¡¬t_š‹rv®
) {

729 ià(
’Œİy
->
»¡¬ts_to_go
 == 0) {

730 
’Œİy
->
»¡¬ts_to_go
 = 
cšfo
->
»¡¬t_š‹rv®
;

731 
’Œİy
->
Ãxt_»¡¬t_num
++;

732 
’Œİy
->
Ãxt_»¡¬t_num
 &= 7;

734 
’Œİy
->
»¡¬ts_to_go
--;

737  
TRUE
;

738 
	}
}

745 
	$METHODDEF
()

746 
	$fšish_·ss_phuff
 (
j_com´ess_±r
 
cšfo
)

748 
phuff_’Œİy_±r
 
’Œİy
 = (phuff_’Œİy_±rè
cšfo
->entropy;

750 
’Œİy
->
Ãxt_ouut_by‹
 = 
cšfo
->
de¡
->next_output_byte;

751 
’Œİy
->
ä“_š_bufãr
 = 
cšfo
->
de¡
->free_in_buffer;

754 
	`em™_eobrun
(
’Œİy
);

755 
	`æush_b™s
(
’Œİy
);

757 
cšfo
->
de¡
->
Ãxt_ouut_by‹
 = 
’Œİy
->next_output_byte;

758 
cšfo
->
de¡
->
ä“_š_bufãr
 = 
’Œİy
->free_in_buffer;

759 
	}
}

766 
	$METHODDEF
()

767 
	$fšish_·ss_g©h”_phuff
 (
j_com´ess_±r
 
cšfo
)

769 
phuff_’Œİy_±r
 
’Œİy
 = (phuff_’Œİy_±rè
cšfo
->entropy;

770 
boŞ—n
 
is_DC_bªd
;

771 
ci
, 
tbl
;

772 
j³g_compÚ’t_šfo
 * 
comµŒ
;

773 
JHUFF_TBL
 **
htbÍŒ
;

774 
boŞ—n
 
did
[
NUM_HUFF_TBLS
];

777 
	`em™_eobrun
(
’Œİy
);

779 
is_DC_bªd
 = (
cšfo
->
Ss
 == 0);

784 
	`MEMZERO
(
did
, 
	`SIZEOF
(did));

786 
ci
 = 0; c˜< 
cšfo
->
comps_š_sÿn
; ci++) {

787 
comµŒ
 = 
cšfo
->
cur_comp_šfo
[
ci
];

788 ià(
is_DC_bªd
) {

789 ià(
cšfo
->
Ah
 != 0)

791 
tbl
 = 
comµŒ
->
dc_tbl_no
;

793 
tbl
 = 
comµŒ
->
ac_tbl_no
;

795 ià(! 
did
[
tbl
]) {

796 ià(
is_DC_bªd
)

797 
htbÍŒ
 = & 
cšfo
->
dc_huff_tbl_±rs
[
tbl
];

799 
htbÍŒ
 = & 
cšfo
->
ac_huff_tbl_±rs
[
tbl
];

800 ià(*
htbÍŒ
 =ğ
NULL
)

801 *
htbÍŒ
 = 
	`j³g_®loc_huff_bË
((
j_commÚ_±r
è
cšfo
);

802 
	`j³g_g’_İtim®_bË
(
cšfo
, *
htbÍŒ
, 
’Œİy
->
couÁ_±rs
[
tbl
]);

803 
did
[
tbl
] = 
TRUE
;

806 
	}
}

813 
	$GLOBAL
()

814 
	$jš™_phuff_’cod”
 (
j_com´ess_±r
 
cšfo
)

816 
phuff_’Œİy_±r
 
’Œİy
;

817 
i
;

819 
’Œİy
 = (
phuff_’Œİy_±r
)

820 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

821 
	`SIZEOF
(
phuff_’Œİy_’cod”
));

822 
cšfo
->
’Œİy
 = (
j³g_’Œİy_’cod”
 *)ƒntropy;

823 
’Œİy
->
pub
.
¡¬t_·ss
 = 
¡¬t_·ss_phuff
;

826 
i
 = 0; i < 
NUM_HUFF_TBLS
; i++) {

827 
’Œİy
->
d”ived_tbls
[
i
] = 
NULL
;

828 
’Œİy
->
couÁ_±rs
[
i
] = 
NULL
;

830 
’Œİy
->
b™_bufãr
 = 
NULL
;

831 
	}
}

	@jcprepct.c

17 
	#JPEG_INTERNALS


	)

18 
	~"jšşude.h
"

19 
	~"j³glib.h
"

27 #ifdeà
INPUT_SMOOTHING_SUPPORTED


28 
	#CONTEXT_ROWS_SUPPORTED


	)

54 
j³g_c_´•_cÚŒŞËr
 
	mpub
;

59 
JSAMPARRAY
 
	mcŞÜ_buf
[
MAX_COMPONENTS
];

61 
JDIMENSION
 
	mrows_to_go
;

62 
	mÃxt_buf_row
;

64 #ifdeà
CONTEXT_ROWS_SUPPORTED


65 
	mthis_row_group
;

66 
	mÃxt_buf_¡İ
;

68 } 
	tmy_´•_cÚŒŞËr
;

70 
my_´•_cÚŒŞËr
 * 
	tmy_´•_±r
;

77 
	$METHODDEF
()

78 
	$¡¬t_·ss_´•
 (
j_com´ess_±r
 
cšfo
, 
J_BUF_MODE
 
·ss_mode
)

80 
my_´•_±r
 
´•
 = (my_´•_±rè
cšfo
->prep;

82 ià(
·ss_mode
 !ğ
JBUF_PASS_THRU
)

83 
	`ERREXIT
(
cšfo
, 
JERR_BAD_BUFFER_MODE
);

86 
´•
->
rows_to_go
 = 
cšfo
->
image_height
;

88 
´•
->
Ãxt_buf_row
 = 0;

89 #ifdeà
CONTEXT_ROWS_SUPPORTED


93 
´•
->
this_row_group
 = 0;

95 
´•
->
Ãxt_buf_¡İ
 = 2 * 
cšfo
->
max_v_§mp_çùÜ
;

97 
	}
}

105 
	$LOCAL
()

106 
	$ex·nd_bÙtom_edge
 (
JSAMPARRAY
 
image_d©a
, 
JDIMENSION
 
num_cŞs
,

107 
šput_rows
, 
ouut_rows
)

109 
row
;

111 
row
 = 
šput_rows
;„ow < 
ouut_rows
;„ow++) {

112 
	`jcİy_§m¶e_rows
(
image_d©a
, 
šput_rows
-1, image_d©a, 
row
,

113 1, 
num_cŞs
);

115 
	}
}

127 
	$METHODDEF
()

128 
	$´e_´oûss_d©a
 (
j_com´ess_±r
 
cšfo
,

129 
JSAMPARRAY
 
šput_buf
, 
JDIMENSION
 *
š_row_ùr
,

130 
JDIMENSION
 
š_rows_ava
,

131 
JSAMPIMAGE
 
ouut_buf
, 
JDIMENSION
 *
out_row_group_ùr
,

132 
JDIMENSION
 
out_row_groups_ava
)

134 
my_´•_±r
 
´•
 = (my_´•_±rè
cšfo
->prep;

135 
numrows
, 
ci
;

136 
JDIMENSION
 
šrows
;

137 
j³g_compÚ’t_šfo
 * 
comµŒ
;

139 *
š_row_ùr
 < 
š_rows_ava
 &&

140 *
out_row_group_ùr
 < 
out_row_groups_ava
) {

142 
šrows
 = 
š_rows_ava
 - *
š_row_ùr
;

143 
numrows
 = 
cšfo
->
max_v_§mp_çùÜ
 - 
´•
->
Ãxt_buf_row
;

144 
numrows
 = (è
	`MIN
((
JDIMENSION
ènumrows, 
šrows
);

145 (*
cšfo
->
ccÚv”t
->
cŞÜ_cÚv”t
è(cšfo, 
šput_buf
 + *
š_row_ùr
,

146 
´•
->
cŞÜ_buf
,

147 (
JDIMENSION
è
´•
->
Ãxt_buf_row
,

148 
numrows
);

149 *
š_row_ùr
 +ğ
numrows
;

150 
´•
->
Ãxt_buf_row
 +ğ
numrows
;

151 
´•
->
rows_to_go
 -ğ
numrows
;

153 ià(
´•
->
rows_to_go
 == 0 &&

154 
´•
->
Ãxt_buf_row
 < 
cšfo
->
max_v_§mp_çùÜ
) {

155 
ci
 = 0; c˜< 
cšfo
->
num_compÚ’ts
; ci++) {

156 
	`ex·nd_bÙtom_edge
(
´•
->
cŞÜ_buf
[
ci
], 
cšfo
->
image_width
,

157 
´•
->
Ãxt_buf_row
, 
cšfo
->
max_v_§mp_çùÜ
);

159 
´•
->
Ãxt_buf_row
 = 
cšfo
->
max_v_§mp_çùÜ
;

162 ià(
´•
->
Ãxt_buf_row
 =ğ
cšfo
->
max_v_§mp_çùÜ
) {

163 (*
cšfo
->
down§m¶e
->downsample) (cinfo,

164 
´•
->
cŞÜ_buf
, (
JDIMENSION
) 0,

165 
ouut_buf
, *
out_row_group_ùr
);

166 
´•
->
Ãxt_buf_row
 = 0;

167 (*
out_row_group_ùr
)++;

172 ià(
´•
->
rows_to_go
 == 0 &&

173 *
out_row_group_ùr
 < 
out_row_groups_ava
) {

174 
ci
 = 0, 
comµŒ
 = 
cšfo
->
comp_šfo
; c˜< cšfo->
num_compÚ’ts
;

175 
ci
++, 
comµŒ
++) {

176 
	`ex·nd_bÙtom_edge
(
ouut_buf
[
ci
],

177 
comµŒ
->
width_š_blocks
 * 
DCTSIZE
,

178 (è(*
out_row_group_ùr
 * 
comµŒ
->
v_§mp_çùÜ
),

179 (è(
out_row_groups_ava
 * 
comµŒ
->
v_§mp_çùÜ
));

181 *
out_row_group_ùr
 = 
out_row_groups_ava
;

185 
	}
}

188 #ifdeà
CONTEXT_ROWS_SUPPORTED


194 
	$METHODDEF
()

195 
	$´e_´oûss_cÚ‹xt
 (
j_com´ess_±r
 
cšfo
,

196 
JSAMPARRAY
 
šput_buf
, 
JDIMENSION
 *
š_row_ùr
,

197 
JDIMENSION
 
š_rows_ava
,

198 
JSAMPIMAGE
 
ouut_buf
, 
JDIMENSION
 *
out_row_group_ùr
,

199 
JDIMENSION
 
out_row_groups_ava
)

201 
my_´•_±r
 
´•
 = (my_´•_±rè
cšfo
->prep;

202 
numrows
, 
ci
;

203 
buf_height
 = 
cšfo
->
max_v_§mp_çùÜ
 * 3;

204 
JDIMENSION
 
šrows
;

206 *
out_row_group_ùr
 < 
out_row_groups_ava
) {

207 ià(*
š_row_ùr
 < 
š_rows_ava
) {

209 
šrows
 = 
š_rows_ava
 - *
š_row_ùr
;

210 
numrows
 = 
´•
->
Ãxt_buf_¡İ
 -…»p->
Ãxt_buf_row
;

211 
numrows
 = (è
	`MIN
((
JDIMENSION
ènumrows, 
šrows
);

212 (*
cšfo
->
ccÚv”t
->
cŞÜ_cÚv”t
è(cšfo, 
šput_buf
 + *
š_row_ùr
,

213 
´•
->
cŞÜ_buf
,

214 (
JDIMENSION
è
´•
->
Ãxt_buf_row
,

215 
numrows
);

217 ià(
´•
->
rows_to_go
 =ğ
cšfo
->
image_height
) {

218 
ci
 = 0; c˜< 
cšfo
->
num_compÚ’ts
; ci++) {

219 
row
;

220 
row
 = 1;„ow <ğ
cšfo
->
max_v_§mp_çùÜ
;„ow++) {

221 
	`jcİy_§m¶e_rows
(
´•
->
cŞÜ_buf
[
ci
], 0,

222 
´•
->
cŞÜ_buf
[
ci
], -
row
,

223 1, 
cšfo
->
image_width
);

227 *
š_row_ùr
 +ğ
numrows
;

228 
´•
->
Ãxt_buf_row
 +ğ
numrows
;

229 
´•
->
rows_to_go
 -ğ
numrows
;

232 ià(
´•
->
rows_to_go
 != 0)

235 ià(
´•
->
Ãxt_buf_row
 <…»p->
Ãxt_buf_¡İ
) {

236 
ci
 = 0; c˜< 
cšfo
->
num_compÚ’ts
; ci++) {

237 
	`ex·nd_bÙtom_edge
(
´•
->
cŞÜ_buf
[
ci
], 
cšfo
->
image_width
,

238 
´•
->
Ãxt_buf_row
,…»p->
Ãxt_buf_¡İ
);

240 
´•
->
Ãxt_buf_row
 =…»p->
Ãxt_buf_¡İ
;

244 ià(
´•
->
Ãxt_buf_row
 =ğ´•->
Ãxt_buf_¡İ
) {

245 (*
cšfo
->
down§m¶e
->downsample) (cinfo,

246 
´•
->
cŞÜ_buf
,

247 (
JDIMENSION
è
´•
->
this_row_group
,

248 
ouut_buf
, *
out_row_group_ùr
);

249 (*
out_row_group_ùr
)++;

251 
´•
->
this_row_group
 +ğ
cšfo
->
max_v_§mp_çùÜ
;

252 ià(
´•
->
this_row_group
 >ğ
buf_height
)

253 
´•
->
this_row_group
 = 0;

254 ià(
´•
->
Ãxt_buf_row
 >ğ
buf_height
)

255 
´•
->
Ãxt_buf_row
 = 0;

256 
´•
->
Ãxt_buf_¡İ
 =…»p->
Ãxt_buf_row
 + 
cšfo
->
max_v_§mp_çùÜ
;

259 
	}
}

266 
	$LOCAL
()

267 
	$ü—‹_cÚ‹xt_bufãr
 (
j_com´ess_±r
 
cšfo
)

269 
my_´•_±r
 
´•
 = (my_´•_±rè
cšfo
->prep;

270 
rgroup_height
 = 
cšfo
->
max_v_§mp_çùÜ
;

271 
ci
, 
i
;

272 
j³g_compÚ’t_šfo
 * 
comµŒ
;

273 
JSAMPARRAY
 
Œue_bufãr
, 
çke_bufãr
;

278 
çke_bufãr
 = (
JSAMPARRAY
)

279 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

280 (
cšfo
->
num_compÚ’ts
 * 5 * 
rgroup_height
) *

281 
	`SIZEOF
(
JSAMPROW
));

283 
ci
 = 0, 
comµŒ
 = 
cšfo
->
comp_šfo
; c˜< cšfo->
num_compÚ’ts
;

284 
ci
++, 
comµŒ
++) {

289 
Œue_bufãr
 = (*
cšfo
->
mem
->
®loc_§¼ay
)

290 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
,

291 (
JDIMENSION
è(((è
comµŒ
->
width_š_blocks
 * 
DCTSIZE
 *

292 
cšfo
->
max_h_§mp_çùÜ
è/ 
comµŒ
->
h_§mp_çùÜ
),

293 (
JDIMENSION
è(3 * 
rgroup_height
));

295 
	`MEMCOPY
(
çke_bufãr
 + 
rgroup_height
, 
Œue_bufãr
,

296 3 * 
rgroup_height
 * 
	`SIZEOF
(
JSAMPROW
));

298 
i
 = 0; i < 
rgroup_height
; i++) {

299 
çke_bufãr
[
i
] = 
Œue_bufãr
[2 * 
rgroup_height
 + i];

300 
çke_bufãr
[4 * 
rgroup_height
 + 
i
] = 
Œue_bufãr
[i];

302 
´•
->
cŞÜ_buf
[
ci
] = 
çke_bufãr
 + 
rgroup_height
;

303 
çke_bufãr
 +ğ5 * 
rgroup_height
;

305 
	}
}

314 
	$GLOBAL
()

315 
	$jš™_c_´•_cÚŒŞËr
 (
j_com´ess_±r
 
cšfo
, 
boŞ—n
 
Ãed_fuÎ_bufãr
)

317 
my_´•_±r
 
´•
;

318 
ci
;

319 
j³g_compÚ’t_šfo
 * 
comµŒ
;

321 ià(
Ãed_fuÎ_bufãr
)

322 
	`ERREXIT
(
cšfo
, 
JERR_BAD_BUFFER_MODE
);

324 
´•
 = (
my_´•_±r
)

325 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

326 
	`SIZEOF
(
my_´•_cÚŒŞËr
));

327 
cšfo
->
´•
 = (
j³g_c_´•_cÚŒŞËr
 *)…rep;

328 
´•
->
pub
.
¡¬t_·ss
 = 
¡¬t_·ss_´•
;

334 ià(
cšfo
->
down§m¶e
->
Ãed_cÚ‹xt_rows
) {

336 #ifdeà
CONTEXT_ROWS_SUPPORTED


337 
´•
->
pub
.
´e_´oûss_d©a
 = 
´e_´oûss_cÚ‹xt
;

338 
	`ü—‹_cÚ‹xt_bufãr
(
cšfo
);

340 
	`ERREXIT
(
cšfo
, 
JERR_NOT_COMPILED
);

344 
´•
->
pub
.
´e_´oûss_d©a
 =…re_process_data;

345 
ci
 = 0, 
comµŒ
 = 
cšfo
->
comp_šfo
; c˜< cšfo->
num_compÚ’ts
;

346 
ci
++, 
comµŒ
++) {

347 
´•
->
cŞÜ_buf
[
ci
] = (*
cšfo
->
mem
->
®loc_§¼ay
)

348 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
,

349 (
JDIMENSION
è(((è
comµŒ
->
width_š_blocks
 * 
DCTSIZE
 *

350 
cšfo
->
max_h_§mp_çùÜ
è/ 
comµŒ
->
h_§mp_çùÜ
),

351 (
JDIMENSION
è
cšfo
->
max_v_§mp_çùÜ
);

354 
	}
}

	@jcsample.c

48 
	#JPEG_INTERNALS


	)

49 
	~"jšşude.h
"

50 
	~"j³glib.h
"

54 
JMETHOD
(, 
	tdown§m¶e1_±r
,

55 (
	tj_com´ess_±r
 
	tcšfo
, 
	tj³g_compÚ’t_šfo
 * 
	tcomµŒ
,

56 
	tJSAMPARRAY
 
	tšput_d©a
, JSAMPARRAY 
	touut_d©a
));

61 
j³g_down§m¶”
 
	mpub
;

64 
down§m¶e1_±r
 
	mm‘hods
[
MAX_COMPONENTS
];

65 } 
	tmy_down§m¶”
;

67 
my_down§m¶”
 * 
	tmy_down§m¶e_±r
;

74 
	$METHODDEF
()

75 
	$¡¬t_·ss_down§m¶e
 (
j_com´ess_±r
 
cšfo
)

78 
	}
}

86 
	$LOCAL
()

87 
	$ex·nd_right_edge
 (
JSAMPARRAY
 
image_d©a
, 
num_rows
,

88 
JDIMENSION
 
šput_cŞs
, JDIMENSION 
ouut_cŞs
)

90 
JSAMPROW
 
±r
;

91 
JSAMPLE
 
pixv®
;

92 
couÁ
;

93 
row
;

94 
numcŞs
 = (è(
ouut_cŞs
 - 
šput_cŞs
);

96 ià(
numcŞs
 > 0) {

97 
row
 = 0;„ow < 
num_rows
;„ow++) {

98 
±r
 = 
image_d©a
[
row
] + 
šput_cŞs
;

99 
pixv®
 = 
±r
[-1];

100 
couÁ
 = 
numcŞs
; count > 0; count--)

101 *
±r
++ = 
pixv®
;

104 
	}
}

113 
	$METHODDEF
()

114 
	$£p_down§m¶e
 (
j_com´ess_±r
 
cšfo
,

115 
JSAMPIMAGE
 
šput_buf
, 
JDIMENSION
 
š_row_šdex
,

116 
JSAMPIMAGE
 
ouut_buf
, 
JDIMENSION
 
out_row_group_šdex
)

118 
my_down§m¶e_±r
 
down§m¶e
 = (my_down§m¶e_±rè
cšfo
->downsample;

119 
ci
;

120 
j³g_compÚ’t_šfo
 * 
comµŒ
;

121 
JSAMPARRAY
 
š_±r
, 
out_±r
;

123 
ci
 = 0, 
comµŒ
 = 
cšfo
->
comp_šfo
; c˜< cšfo->
num_compÚ’ts
;

124 
ci
++, 
comµŒ
++) {

125 
š_±r
 = 
šput_buf
[
ci
] + 
š_row_šdex
;

126 
out_±r
 = 
ouut_buf
[
ci
] + (
out_row_group_šdex
 * 
comµŒ
->
v_§mp_çùÜ
);

127 (*
down§m¶e
->
m‘hods
[
ci
]è(
cšfo
, 
comµŒ
, 
š_±r
, 
out_±r
);

129 
	}
}

139 
	$METHODDEF
()

140 
	$št_down§m¶e
 (
j_com´ess_±r
 
cšfo
, 
j³g_compÚ’t_šfo
 * 
comµŒ
,

141 
JSAMPARRAY
 
šput_d©a
, JSAMPARRAY 
ouut_d©a
)

143 
šrow
, 
ouŒow
, 
h_ex·nd
, 
v_ex·nd
, 
numpix
, 
numpix2
, 
h
, 
v
;

144 
JDIMENSION
 
outcŞ
, 
outcŞ_h
;

145 
JDIMENSION
 
ouut_cŞs
 = 
comµŒ
->
width_š_blocks
 * 
DCTSIZE
;

146 
JSAMPROW
 
š±r
, 
ouŒ
;

147 
INT32
 
outv®ue
;

149 
h_ex·nd
 = 
cšfo
->
max_h_§mp_çùÜ
 / 
comµŒ
->
h_§mp_çùÜ
;

150 
v_ex·nd
 = 
cšfo
->
max_v_§mp_çùÜ
 / 
comµŒ
->
v_§mp_çùÜ
;

151 
numpix
 = 
h_ex·nd
 * 
v_ex·nd
;

152 
numpix2
 = 
numpix
/2;

158 
	`ex·nd_right_edge
(
šput_d©a
, 
cšfo
->
max_v_§mp_çùÜ
,

159 
cšfo
->
image_width
, 
ouut_cŞs
 * 
h_ex·nd
);

161 
šrow
 = 0;

162 
ouŒow
 = 0; ouŒow < 
comµŒ
->
v_§mp_çùÜ
; outrow++) {

163 
ouŒ
 = 
ouut_d©a
[
ouŒow
];

164 
outcŞ
 = 0, 
outcŞ_h
 = 0; outcŞ < 
ouut_cŞs
;

165 
outcŞ
++, 
outcŞ_h
 +ğ
h_ex·nd
) {

166 
outv®ue
 = 0;

167 
v
 = 0; v < 
v_ex·nd
; v++) {

168 
š±r
 = 
šput_d©a
[
šrow
+
v
] + 
outcŞ_h
;

169 
h
 = 0; h < 
h_ex·nd
; h++) {

170 
outv®ue
 +ğ(
INT32
è
	`GETJSAMPLE
(*
š±r
++);

173 *
ouŒ
++ = (
JSAMPLE
è((
outv®ue
 + 
numpix2
è/ 
numpix
);

175 
šrow
 +ğ
v_ex·nd
;

177 
	}
}

186 
	$METHODDEF
()

187 
	$fuÎsize_down§m¶e
 (
j_com´ess_±r
 
cšfo
, 
j³g_compÚ’t_šfo
 * 
comµŒ
,

188 
JSAMPARRAY
 
šput_d©a
, JSAMPARRAY 
ouut_d©a
)

191 
	`jcİy_§m¶e_rows
(
šput_d©a
, 0, 
ouut_d©a
, 0,

192 
cšfo
->
max_v_§mp_çùÜ
, cšfo->
image_width
);

194 
	`ex·nd_right_edge
(
ouut_d©a
, 
cšfo
->
max_v_§mp_çùÜ
,

195 
cšfo
->
image_width
, 
comµŒ
->
width_š_blocks
 * 
DCTSIZE
);

196 
	}
}

211 
	$METHODDEF
()

212 
	$h2v1_down§m¶e
 (
j_com´ess_±r
 
cšfo
, 
j³g_compÚ’t_šfo
 * 
comµŒ
,

213 
JSAMPARRAY
 
šput_d©a
, JSAMPARRAY 
ouut_d©a
)

215 
ouŒow
;

216 
JDIMENSION
 
outcŞ
;

217 
JDIMENSION
 
ouut_cŞs
 = 
comµŒ
->
width_š_blocks
 * 
DCTSIZE
;

218 
JSAMPROW
 
š±r
, 
ouŒ
;

219 
bŸs
;

225 
	`ex·nd_right_edge
(
šput_d©a
, 
cšfo
->
max_v_§mp_çùÜ
,

226 
cšfo
->
image_width
, 
ouut_cŞs
 * 2);

228 
ouŒow
 = 0; ouŒow < 
comµŒ
->
v_§mp_çùÜ
; outrow++) {

229 
ouŒ
 = 
ouut_d©a
[
ouŒow
];

230 
š±r
 = 
šput_d©a
[
ouŒow
];

231 
bŸs
 = 0;

232 
outcŞ
 = 0; outcŞ < 
ouut_cŞs
; outcol++) {

233 *
ouŒ
++ = (
JSAMPLE
è((
	`GETJSAMPLE
(*
š±r
) + GETJSAMPLE(inptr[1])

234 + 
bŸs
) >> 1);

235 
bŸs
 ^= 1;

236 
š±r
 += 2;

239 
	}
}

248 
	$METHODDEF
()

249 
	$h2v2_down§m¶e
 (
j_com´ess_±r
 
cšfo
, 
j³g_compÚ’t_šfo
 * 
comµŒ
,

250 
JSAMPARRAY
 
šput_d©a
, JSAMPARRAY 
ouut_d©a
)

252 
šrow
, 
ouŒow
;

253 
JDIMENSION
 
outcŞ
;

254 
JDIMENSION
 
ouut_cŞs
 = 
comµŒ
->
width_š_blocks
 * 
DCTSIZE
;

255 
JSAMPROW
 
š±r0
, 
š±r1
, 
ouŒ
;

256 
bŸs
;

262 
	`ex·nd_right_edge
(
šput_d©a
, 
cšfo
->
max_v_§mp_çùÜ
,

263 
cšfo
->
image_width
, 
ouut_cŞs
 * 2);

265 
šrow
 = 0;

266 
ouŒow
 = 0; ouŒow < 
comµŒ
->
v_§mp_çùÜ
; outrow++) {

267 
ouŒ
 = 
ouut_d©a
[
ouŒow
];

268 
š±r0
 = 
šput_d©a
[
šrow
];

269 
š±r1
 = 
šput_d©a
[
šrow
+1];

270 
bŸs
 = 1;

271 
outcŞ
 = 0; outcŞ < 
ouut_cŞs
; outcol++) {

272 *
ouŒ
++ = (
JSAMPLE
è((
	`GETJSAMPLE
(*
š±r0
) + GETJSAMPLE(inptr0[1]) +

273 
	`GETJSAMPLE
(*
š±r1
) + GETJSAMPLE(inptr1[1])

274 + 
bŸs
) >> 2);

275 
bŸs
 ^= 3;

276 
š±r0
 +ğ2; 
š±r1
 += 2;

278 
šrow
 += 2;

280 
	}
}

283 #ifdeà
INPUT_SMOOTHING_SUPPORTED


291 
	$METHODDEF
()

292 
	$h2v2_smoÙh_down§m¶e
 (
j_com´ess_±r
 
cšfo
, 
j³g_compÚ’t_šfo
 * 
comµŒ
,

293 
JSAMPARRAY
 
šput_d©a
, JSAMPARRAY 
ouut_d©a
)

295 
šrow
, 
ouŒow
;

296 
JDIMENSION
 
cŞùr
;

297 
JDIMENSION
 
ouut_cŞs
 = 
comµŒ
->
width_š_blocks
 * 
DCTSIZE
;

298 
JSAMPROW
 
š±r0
, 
š±r1
, 
above_±r
, 
b–ow_±r
, 
ouŒ
;

299 
INT32
 
memb”sum
, 
Ãighsum
, 
memb”sÿË
, 
ÃighsÿË
;

305 
	`ex·nd_right_edge
(
šput_d©a
 - 1, 
cšfo
->
max_v_§mp_çùÜ
 + 2,

306 
cšfo
->
image_width
, 
ouut_cŞs
 * 2);

321 
memb”sÿË
 = 16384 - 
cšfo
->
smoÙhšg_çùÜ
 * 80;

322 
ÃighsÿË
 = 
cšfo
->
smoÙhšg_çùÜ
 * 16;

324 
šrow
 = 0;

325 
ouŒow
 = 0; ouŒow < 
comµŒ
->
v_§mp_çùÜ
; outrow++) {

326 
ouŒ
 = 
ouut_d©a
[
ouŒow
];

327 
š±r0
 = 
šput_d©a
[
šrow
];

328 
š±r1
 = 
šput_d©a
[
šrow
+1];

329 
above_±r
 = 
šput_d©a
[
šrow
-1];

330 
b–ow_±r
 = 
šput_d©a
[
šrow
+2];

333 
memb”sum
 = 
	`GETJSAMPLE
(*
š±r0
) + GETJSAMPLE(inptr0[1]) +

334 
	`GETJSAMPLE
(*
š±r1
) + GETJSAMPLE(inptr1[1]);

335 
Ãighsum
 = 
	`GETJSAMPLE
(*
above_±r
) + GETJSAMPLE(above_ptr[1]) +

336 
	`GETJSAMPLE
(*
b–ow_±r
) + GETJSAMPLE(below_ptr[1]) +

337 
	`GETJSAMPLE
(*
š±r0
) + GETJSAMPLE(inptr0[2]) +

338 
	`GETJSAMPLE
(*
š±r1
) + GETJSAMPLE(inptr1[2]);

339 
Ãighsum
 +=‚eighsum;

340 
Ãighsum
 +ğ
	`GETJSAMPLE
(*
above_±r
) + GETJSAMPLE(above_ptr[2]) +

341 
	`GETJSAMPLE
(*
b–ow_±r
) + GETJSAMPLE(below_ptr[2]);

342 
memb”sum
 = memb”sum * 
memb”sÿË
 + 
Ãighsum
 * 
ÃighsÿË
;

343 *
ouŒ
++ = (
JSAMPLE
è((
memb”sum
 + 32768) >> 16);

344 
š±r0
 +ğ2; 
š±r1
 +ğ2; 
above_±r
 +ğ2; 
b–ow_±r
 += 2;

346 
cŞùr
 = 
ouut_cŞs
 - 2; colctr > 0; colctr--) {

348 
memb”sum
 = 
	`GETJSAMPLE
(*
š±r0
) + GETJSAMPLE(inptr0[1]) +

349 
	`GETJSAMPLE
(*
š±r1
) + GETJSAMPLE(inptr1[1]);

351 
Ãighsum
 = 
	`GETJSAMPLE
(*
above_±r
) + GETJSAMPLE(above_ptr[1]) +

352 
	`GETJSAMPLE
(*
b–ow_±r
) + GETJSAMPLE(below_ptr[1]) +

353 
	`GETJSAMPLE
(
š±r0
[-1]) + GETJSAMPLE(inptr0[2]) +

354 
	`GETJSAMPLE
(
š±r1
[-1]) + GETJSAMPLE(inptr1[2]);

356 
Ãighsum
 +=‚eighsum;

358 
Ãighsum
 +ğ
	`GETJSAMPLE
(
above_±r
[-1]) + GETJSAMPLE(above_ptr[2]) +

359 
	`GETJSAMPLE
(
b–ow_±r
[-1]) + GETJSAMPLE(below_ptr[2]);

361 
memb”sum
 = memb”sum * 
memb”sÿË
 + 
Ãighsum
 * 
ÃighsÿË
;

363 *
ouŒ
++ = (
JSAMPLE
è((
memb”sum
 + 32768) >> 16);

364 
š±r0
 +ğ2; 
š±r1
 +ğ2; 
above_±r
 +ğ2; 
b–ow_±r
 += 2;

368 
memb”sum
 = 
	`GETJSAMPLE
(*
š±r0
) + GETJSAMPLE(inptr0[1]) +

369 
	`GETJSAMPLE
(*
š±r1
) + GETJSAMPLE(inptr1[1]);

370 
Ãighsum
 = 
	`GETJSAMPLE
(*
above_±r
) + GETJSAMPLE(above_ptr[1]) +

371 
	`GETJSAMPLE
(*
b–ow_±r
) + GETJSAMPLE(below_ptr[1]) +

372 
	`GETJSAMPLE
(
š±r0
[-1]) + GETJSAMPLE(inptr0[1]) +

373 
	`GETJSAMPLE
(
š±r1
[-1]) + GETJSAMPLE(inptr1[1]);

374 
Ãighsum
 +=‚eighsum;

375 
Ãighsum
 +ğ
	`GETJSAMPLE
(
above_±r
[-1]) + GETJSAMPLE(above_ptr[1]) +

376 
	`GETJSAMPLE
(
b–ow_±r
[-1]) + GETJSAMPLE(below_ptr[1]);

377 
memb”sum
 = memb”sum * 
memb”sÿË
 + 
Ãighsum
 * 
ÃighsÿË
;

378 *
ouŒ
 = (
JSAMPLE
è((
memb”sum
 + 32768) >> 16);

380 
šrow
 += 2;

382 
	}
}

391 
	$METHODDEF
()

392 
	$fuÎsize_smoÙh_down§m¶e
 (
j_com´ess_±r
 
cšfo
, 
j³g_compÚ’t_šfo
 *
comµŒ
,

393 
JSAMPARRAY
 
šput_d©a
, JSAMPARRAY 
ouut_d©a
)

395 
ouŒow
;

396 
JDIMENSION
 
cŞùr
;

397 
JDIMENSION
 
ouut_cŞs
 = 
comµŒ
->
width_š_blocks
 * 
DCTSIZE
;

398 
JSAMPROW
 
š±r
, 
above_±r
, 
b–ow_±r
, 
ouŒ
;

399 
INT32
 
memb”sum
, 
Ãighsum
, 
memb”sÿË
, 
ÃighsÿË
;

400 
cŞsum
, 
Ï¡cŞsum
, 
ÃxtcŞsum
;

406 
	`ex·nd_right_edge
(
šput_d©a
 - 1, 
cšfo
->
max_v_§mp_çùÜ
 + 2,

407 
cšfo
->
image_width
, 
ouut_cŞs
);

415 
memb”sÿË
 = 65536L - 
cšfo
->
smoÙhšg_çùÜ
 * 512L;

416 
ÃighsÿË
 = 
cšfo
->
smoÙhšg_çùÜ
 * 64;

418 
ouŒow
 = 0; ouŒow < 
comµŒ
->
v_§mp_çùÜ
; outrow++) {

419 
ouŒ
 = 
ouut_d©a
[
ouŒow
];

420 
š±r
 = 
šput_d©a
[
ouŒow
];

421 
above_±r
 = 
šput_d©a
[
ouŒow
-1];

422 
b–ow_±r
 = 
šput_d©a
[
ouŒow
+1];

425 
cŞsum
 = 
	`GETJSAMPLE
(*
above_±r
++è+ GETJSAMPLE(*
b–ow_±r
++) +

426 
	`GETJSAMPLE
(*
š±r
);

427 
memb”sum
 = 
	`GETJSAMPLE
(*
š±r
++);

428 
ÃxtcŞsum
 = 
	`GETJSAMPLE
(*
above_±r
è+ GETJSAMPLE(*
b–ow_±r
) +

429 
	`GETJSAMPLE
(*
š±r
);

430 
Ãighsum
 = 
cŞsum
 + (cŞsum - 
memb”sum
è+ 
ÃxtcŞsum
;

431 
memb”sum
 = memb”sum * 
memb”sÿË
 + 
Ãighsum
 * 
ÃighsÿË
;

432 *
ouŒ
++ = (
JSAMPLE
è((
memb”sum
 + 32768) >> 16);

433 
Ï¡cŞsum
 = 
cŞsum
; cŞsum = 
ÃxtcŞsum
;

435 
cŞùr
 = 
ouut_cŞs
 - 2; colctr > 0; colctr--) {

436 
memb”sum
 = 
	`GETJSAMPLE
(*
š±r
++);

437 
above_±r
++; 
b–ow_±r
++;

438 
ÃxtcŞsum
 = 
	`GETJSAMPLE
(*
above_±r
è+ GETJSAMPLE(*
b–ow_±r
) +

439 
	`GETJSAMPLE
(*
š±r
);

440 
Ãighsum
 = 
Ï¡cŞsum
 + (
cŞsum
 - 
memb”sum
è+ 
ÃxtcŞsum
;

441 
memb”sum
 = memb”sum * 
memb”sÿË
 + 
Ãighsum
 * 
ÃighsÿË
;

442 *
ouŒ
++ = (
JSAMPLE
è((
memb”sum
 + 32768) >> 16);

443 
Ï¡cŞsum
 = 
cŞsum
; cŞsum = 
ÃxtcŞsum
;

447 
memb”sum
 = 
	`GETJSAMPLE
(*
š±r
);

448 
Ãighsum
 = 
Ï¡cŞsum
 + (
cŞsum
 - 
memb”sum
) + colsum;

449 
memb”sum
 = memb”sum * 
memb”sÿË
 + 
Ãighsum
 * 
ÃighsÿË
;

450 *
ouŒ
 = (
JSAMPLE
è((
memb”sum
 + 32768) >> 16);

453 
	}
}

463 
	$GLOBAL
()

464 
	$jš™_down§m¶”
 (
j_com´ess_±r
 
cšfo
)

466 
my_down§m¶e_±r
 
down§m¶e
;

467 
ci
;

468 
j³g_compÚ’t_šfo
 * 
comµŒ
;

469 
boŞ—n
 
smoÙhok
 = 
TRUE
;

471 
down§m¶e
 = (
my_down§m¶e_±r
)

472 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

473 
	`SIZEOF
(
my_down§m¶”
));

474 
cšfo
->
down§m¶e
 = (
j³g_down§m¶”
 *) downsample;

475 
down§m¶e
->
pub
.
¡¬t_·ss
 = 
¡¬t_·ss_down§m¶e
;

476 
down§m¶e
->
pub
.down§m¶ğ
£p_down§m¶e
;

477 
down§m¶e
->
pub
.
Ãed_cÚ‹xt_rows
 = 
FALSE
;

479 ià(
cšfo
->
CCIR601_§m¶šg
)

480 
	`ERREXIT
(
cšfo
, 
JERR_CCIR601_NOTIMPL
);

483 
ci
 = 0, 
comµŒ
 = 
cšfo
->
comp_šfo
; c˜< cšfo->
num_compÚ’ts
;

484 
ci
++, 
comµŒ
++) {

485 ià(
comµŒ
->
h_§mp_çùÜ
 =ğ
cšfo
->
max_h_§mp_çùÜ
 &&

486 
comµŒ
->
v_§mp_çùÜ
 =ğ
cšfo
->
max_v_§mp_çùÜ
) {

487 #ifdeà
INPUT_SMOOTHING_SUPPORTED


488 ià(
cšfo
->
smoÙhšg_çùÜ
) {

489 
down§m¶e
->
m‘hods
[
ci
] = 
fuÎsize_smoÙh_down§m¶e
;

490 
down§m¶e
->
pub
.
Ãed_cÚ‹xt_rows
 = 
TRUE
;

493 
down§m¶e
->
m‘hods
[
ci
] = 
fuÎsize_down§m¶e
;

494 } ià(
comµŒ
->
h_§mp_çùÜ
 * 2 =ğ
cšfo
->
max_h_§mp_çùÜ
 &&

495 
comµŒ
->
v_§mp_çùÜ
 =ğ
cšfo
->
max_v_§mp_çùÜ
) {

496 
smoÙhok
 = 
FALSE
;

497 
down§m¶e
->
m‘hods
[
ci
] = 
h2v1_down§m¶e
;

498 } ià(
comµŒ
->
h_§mp_çùÜ
 * 2 =ğ
cšfo
->
max_h_§mp_çùÜ
 &&

499 
comµŒ
->
v_§mp_çùÜ
 * 2 =ğ
cšfo
->
max_v_§mp_çùÜ
) {

500 #ifdeà
INPUT_SMOOTHING_SUPPORTED


501 ià(
cšfo
->
smoÙhšg_çùÜ
) {

502 
down§m¶e
->
m‘hods
[
ci
] = 
h2v2_smoÙh_down§m¶e
;

503 
down§m¶e
->
pub
.
Ãed_cÚ‹xt_rows
 = 
TRUE
;

506 
down§m¶e
->
m‘hods
[
ci
] = 
h2v2_down§m¶e
;

507 } ià((
cšfo
->
max_h_§mp_çùÜ
 % 
comµŒ
->
h_§mp_çùÜ
) == 0 &&

508 (
cšfo
->
max_v_§mp_çùÜ
 % 
comµŒ
->
v_§mp_çùÜ
) == 0) {

509 
smoÙhok
 = 
FALSE
;

510 
down§m¶e
->
m‘hods
[
ci
] = 
št_down§m¶e
;

512 
	`ERREXIT
(
cšfo
, 
JERR_FRACT_SAMPLE_NOTIMPL
);

515 #ifdeà
INPUT_SMOOTHING_SUPPORTED


516 ià(
cšfo
->
smoÙhšg_çùÜ
 && !
smoÙhok
)

517 
	`TRACEMS
(
cšfo
, 0, 
JTRC_SMOOTH_NOTIMPL
);

519 
	}
}

	@jctrans.c

13 
	#JPEG_INTERNALS


	)

14 
	~"jšşude.h
"

15 
	~"j³glib.h
"

19 
	$LOCAL
(è
Œª£ncode_ma¡”_£ËùiÚ


20 
	`JPP
((
j_com´ess_±r
 
cšfo
, 
jvœt_b¬¿y_±r
 * 
cÛf_¬¿ys
));

21 
	$LOCAL
(è
Œª£ncode_cÛf_cÚŒŞËr


22 
	`JPP
((
j_com´ess_±r
 
cšfo
, 
jvœt_b¬¿y_±r
 * 
cÛf_¬¿ys
));

37 
	$GLOBAL
()

38 
	$j³g_wr™e_cÛffic›Ás
 (
j_com´ess_±r
 
cšfo
, 
jvœt_b¬¿y_±r
 * 
cÛf_¬¿ys
)

40 ià(
cšfo
->
glob®_¡©e
 !ğ
CSTATE_START
)

41 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_STATE
, cšfo->
glob®_¡©e
);

43 
	`j³g_suµ»ss_bËs
(
cšfo
, 
FALSE
);

45 (*
cšfo
->
”r
->
»£t_”rÜ_mgr
è((
j_commÚ_±r
) cinfo);

46 (*
cšfo
->
de¡
->
š™_de¡š©iÚ
) (cinfo);

48 
	`Œª£ncode_ma¡”_£ËùiÚ
(
cšfo
, 
cÛf_¬¿ys
);

50 
cšfo
->
Ãxt_sÿÆše
 = 0;

51 
cšfo
->
glob®_¡©e
 = 
CSTATE_WRCOEFS
;

52 
	}
}

62 
	$GLOBAL
()

63 
	$j³g_cİy_ü™iÿl_·¿m‘”s
 (
j_decom´ess_±r
 
¤cšfo
,

64 
j_com´ess_±r
 
d¡šfo
)

66 
JQUANT_TBL
 ** 
qtbÍŒ
;

67 
j³g_compÚ’t_šfo
 *
šcomp
, *
outcomp
;

68 
JQUANT_TBL
 *
c_quªt
, *
¦Ù_quªt
;

69 
tbÊo
, 
ci
, 
cÛfi
;

72 ià(
d¡šfo
->
glob®_¡©e
 !ğ
CSTATE_START
)

73 
	`ERREXIT1
(
d¡šfo
, 
JERR_BAD_STATE
, d¡šfo->
glob®_¡©e
);

75 
d¡šfo
->
image_width
 = 
¤cšfo
->image_width;

76 
d¡šfo
->
image_height
 = 
¤cšfo
->image_height;

77 
d¡šfo
->
šput_compÚ’ts
 = 
¤cšfo
->
num_compÚ’ts
;

78 
d¡šfo
->
š_cŞÜ_¥aû
 = 
¤cšfo
->
j³g_cŞÜ_¥aû
;

80 
	`j³g_£t_deçuÉs
(
d¡šfo
);

84 
	`j³g_£t_cŞÜ¥aû
(
d¡šfo
, 
¤cšfo
->
j³g_cŞÜ_¥aû
);

85 
d¡šfo
->
d©a_´ecisiÚ
 = 
¤cšfo
->data_precision;

86 
d¡šfo
->
CCIR601_§m¶šg
 = 
¤cšfo
->CCIR601_sampling;

88 
tbÊo
 = 0;bÊØ< 
NUM_QUANT_TBLS
;blno++) {

89 ià(
¤cšfo
->
quªt_tbl_±rs
[
tbÊo
] !ğ
NULL
) {

90 
qtbÍŒ
 = & 
d¡šfo
->
quªt_tbl_±rs
[
tbÊo
];

91 ià(*
qtbÍŒ
 =ğ
NULL
)

92 *
qtbÍŒ
 = 
	`j³g_®loc_quªt_bË
((
j_commÚ_±r
è
d¡šfo
);

93 
	`MEMCOPY
((*
qtbÍŒ
)->
quªtv®
,

94 
¤cšfo
->
quªt_tbl_±rs
[
tbÊo
]->
quªtv®
,

95 
	`SIZEOF
((*
qtbÍŒ
)->
quªtv®
));

96 (*
qtbÍŒ
)->
£Á_bË
 = 
FALSE
;

102 
d¡šfo
->
num_compÚ’ts
 = 
¤cšfo
->num_components;

103 ià(
d¡šfo
->
num_compÚ’ts
 < 1 || d¡šfo->num_compÚ’t > 
MAX_COMPONENTS
)

104 
	`ERREXIT2
(
d¡šfo
, 
JERR_COMPONENT_COUNT
, d¡šfo->
num_compÚ’ts
,

105 
MAX_COMPONENTS
);

106 
ci
 = 0, 
šcomp
 = 
¤cšfo
->
comp_šfo
, 
outcomp
 = 
d¡šfo
->comp_info;

107 
ci
 < 
d¡šfo
->
num_compÚ’ts
; ci++, 
šcomp
++, 
outcomp
++) {

108 
outcomp
->
compÚ’t_id
 = 
šcomp
->component_id;

109 
outcomp
->
h_§mp_çùÜ
 = 
šcomp
->h_samp_factor;

110 
outcomp
->
v_§mp_çùÜ
 = 
šcomp
->v_samp_factor;

111 
outcomp
->
quªt_tbl_no
 = 
šcomp
->quant_tbl_no;

116 
tbÊo
 = 
outcomp
->
quªt_tbl_no
;

117 ià(
tbÊo
 < 0 ||bÊØ>ğ
NUM_QUANT_TBLS
 ||

118 
¤cšfo
->
quªt_tbl_±rs
[
tbÊo
] =ğ
NULL
)

119 
	`ERREXIT1
(
d¡šfo
, 
JERR_NO_QUANT_TABLE
, 
tbÊo
);

120 
¦Ù_quªt
 = 
¤cšfo
->
quªt_tbl_±rs
[
tbÊo
];

121 
c_quªt
 = 
šcomp
->
quªt_bË
;

122 ià(
c_quªt
 !ğ
NULL
) {

123 
cÛfi
 = 0; cÛf˜< 
DCTSIZE2
; coefi++) {

124 ià(
c_quªt
->
quªtv®
[
cÛfi
] !ğ
¦Ù_quªt
->quantval[coefi])

125 
	`ERREXIT1
(
d¡šfo
, 
JERR_MISMATCHED_QUANT_TABLE
, 
tbÊo
);

140 ià(
¤cšfo
->
§w_JFIF_m¬k”
) {

141 ià(
¤cšfo
->
JFIF_majÜ_v”siÚ
 == 1) {

142 
d¡šfo
->
JFIF_majÜ_v”siÚ
 = 
¤cšfo
->JFIF_major_version;

143 
d¡šfo
->
JFIF_mšÜ_v”siÚ
 = 
¤cšfo
->JFIF_minor_version;

145 
d¡šfo
->
d’s™y_un™
 = 
¤cšfo
->density_unit;

146 
d¡šfo
->
X_d’s™y
 = 
¤cšfo
->X_density;

147 
d¡šfo
->
Y_d’s™y
 = 
¤cšfo
->Y_density;

149 
	}
}

157 
	$LOCAL
()

158 
	$Œª£ncode_ma¡”_£ËùiÚ
 (
j_com´ess_±r
 
cšfo
,

159 
jvœt_b¬¿y_±r
 * 
cÛf_¬¿ys
)

164 
cšfo
->
šput_compÚ’ts
 = 1;

166 
	`jš™_c_ma¡”_cÚŒŞ
(
cšfo
, 
TRUE
 );

169 ià(
cšfo
->
¬™h_code
) {

170 
	`ERREXIT
(
cšfo
, 
JERR_ARITH_NOTIMPL
);

172 ià(
cšfo
->
´og»ssive_mode
) {

173 #ifdeà
C_PROGRESSIVE_SUPPORTED


174 
	`jš™_phuff_’cod”
(
cšfo
);

176 
	`ERREXIT
(
cšfo
, 
JERR_NOT_COMPILED
);

179 
	`jš™_huff_’cod”
(
cšfo
);

183 
	`Œª£ncode_cÛf_cÚŒŞËr
(
cšfo
, 
cÛf_¬¿ys
);

185 
	`jš™_m¬k”_wr™”
(
cšfo
);

188 (*
cšfo
->
mem
->
»®ize_vœt_¬¿ys
è((
j_commÚ_±r
) cinfo);

194 (*
cšfo
->
m¬k”
->
wr™e_fe_h—d”
) (cinfo);

195 
	}
}

209 
j³g_c_cÛf_cÚŒŞËr
 
	mpub
;

211 
JDIMENSION
 
	miMCU_row_num
;

212 
JDIMENSION
 
	mmcu_ùr
;

213 
	mMCU_v”t_off£t
;

214 
	mMCU_rows_³r_iMCU_row
;

217 
jvœt_b¬¿y_±r
 * 
	mwhŞe_image
;

220 
JBLOCKROW
 
	mdummy_bufãr
[
C_MAX_BLOCKS_IN_MCU
];

221 } 
	tmy_cÛf_cÚŒŞËr
;

223 
my_cÛf_cÚŒŞËr
 * 
	tmy_cÛf_±r
;

226 
	$LOCAL
()

227 
	$¡¬t_iMCU_row
 (
j_com´ess_±r
 
cšfo
)

230 
my_cÛf_±r
 
cÛf
 = (my_cÛf_±rè
cšfo
->coef;

236 ià(
cšfo
->
comps_š_sÿn
 > 1) {

237 
cÛf
->
MCU_rows_³r_iMCU_row
 = 1;

239 ià(
cÛf
->
iMCU_row_num
 < (
cšfo
->
tÙ®_iMCU_rows
-1))

240 
cÛf
->
MCU_rows_³r_iMCU_row
 = 
cšfo
->
cur_comp_šfo
[0]->
v_§mp_çùÜ
;

242 
cÛf
->
MCU_rows_³r_iMCU_row
 = 
cšfo
->
cur_comp_šfo
[0]->
Ï¡_row_height
;

245 
cÛf
->
mcu_ùr
 = 0;

246 
cÛf
->
MCU_v”t_off£t
 = 0;

247 
	}
}

254 
	$METHODDEF
()

255 
	$¡¬t_·ss_cÛf
 (
j_com´ess_±r
 
cšfo
, 
J_BUF_MODE
 
·ss_mode
)

257 
my_cÛf_±r
 
cÛf
 = (my_cÛf_±rè
cšfo
->coef;

259 ià(
·ss_mode
 !ğ
JBUF_CRANK_DEST
)

260 
	`ERREXIT
(
cšfo
, 
JERR_BAD_BUFFER_MODE
);

262 
cÛf
->
iMCU_row_num
 = 0;

263 
	`¡¬t_iMCU_row
(
cšfo
);

264 
	}
}

277 
	$METHODDEF
(
boŞ—n
)

278 
	$com´ess_ouut
 (
j_com´ess_±r
 
cšfo
, 
JSAMPIMAGE
 
šput_buf
)

280 
my_cÛf_±r
 
cÛf
 = (my_cÛf_±rè
cšfo
->coef;

281 
JDIMENSION
 
MCU_cŞ_num
;

282 
JDIMENSION
 
Ï¡_MCU_cŞ
 = 
cšfo
->
MCUs_³r_row
 - 1;

283 
JDIMENSION
 
Ï¡_iMCU_row
 = 
cšfo
->
tÙ®_iMCU_rows
 - 1;

284 
blkn
, 
ci
, 
xšdex
, 
yšdex
, 
yoff£t
, 
blockút
;

285 
JDIMENSION
 
¡¬t_cŞ
;

286 
JBLOCKARRAY
 
bufãr
[
MAX_COMPS_IN_SCAN
];

287 
JBLOCKROW
 
MCU_bufãr
[
C_MAX_BLOCKS_IN_MCU
];

288 
JBLOCKROW
 
bufãr_±r
;

289 
j³g_compÚ’t_šfo
 *
comµŒ
;

292 
ci
 = 0; c˜< 
cšfo
->
comps_š_sÿn
; ci++) {

293 
comµŒ
 = 
cšfo
->
cur_comp_šfo
[
ci
];

294 
bufãr
[
ci
] = (*
cšfo
->
mem
->
acûss_vœt_b¬¿y
)

295 ((
j_commÚ_±r
è
cšfo
, 
cÛf
->
whŞe_image
[
comµŒ
->
compÚ’t_šdex
],

296 
cÛf
->
iMCU_row_num
 * 
comµŒ
->
v_§mp_çùÜ
,

297 (
JDIMENSION
è
comµŒ
->
v_§mp_çùÜ
, 
FALSE
);

301 
yoff£t
 = 
cÛf
->
MCU_v”t_off£t
; yoff£ˆ< cÛf->
MCU_rows_³r_iMCU_row
;

302 
yoff£t
++) {

303 
MCU_cŞ_num
 = 
cÛf
->
mcu_ùr
; MCU_cŞ_num < 
cšfo
->
MCUs_³r_row
;

304 
MCU_cŞ_num
++) {

306 
blkn
 = 0;

307 
ci
 = 0; c˜< 
cšfo
->
comps_š_sÿn
; ci++) {

308 
comµŒ
 = 
cšfo
->
cur_comp_šfo
[
ci
];

309 
¡¬t_cŞ
 = 
MCU_cŞ_num
 * 
comµŒ
->
MCU_width
;

310 
blockút
 = (
MCU_cŞ_num
 < 
Ï¡_MCU_cŞ
è? 
comµŒ
->
MCU_width


311 : 
comµŒ
->
Ï¡_cŞ_width
;

312 
yšdex
 = 0; yšdex < 
comµŒ
->
MCU_height
; yindex++) {

313 ià(
cÛf
->
iMCU_row_num
 < 
Ï¡_iMCU_row
 ||

314 
yšdex
+
yoff£t
 < 
comµŒ
->
Ï¡_row_height
) {

316 
bufãr_±r
 = 
bufãr
[
ci
][
yšdex
+
yoff£t
] + 
¡¬t_cŞ
;

317 
xšdex
 = 0; xšdex < 
blockút
; xindex++)

318 
MCU_bufãr
[
blkn
++] = 
bufãr_±r
++;

321 
xšdex
 = 0;

329 ; 
xšdex
 < 
comµŒ
->
MCU_width
; xindex++) {

330 
MCU_bufãr
[
blkn
] = 
cÛf
->
dummy_bufãr
[blkn];

331 
MCU_bufãr
[
blkn
][0][0] = MCU_buffer[blkn-1][0][0];

332 
blkn
++;

337 ià(! (*
cšfo
->
’Œİy
->
’code_mcu
è(cšfo, 
MCU_bufãr
)) {

339 
cÛf
->
MCU_v”t_off£t
 = 
yoff£t
;

340 
cÛf
->
mcu_ùr
 = 
MCU_cŞ_num
;

341  
FALSE
;

345 
cÛf
->
mcu_ùr
 = 0;

348 
cÛf
->
iMCU_row_num
++;

349 
	`¡¬t_iMCU_row
(
cšfo
);

350  
TRUE
;

351 
	}
}

362 
	$LOCAL
()

363 
	$Œª£ncode_cÛf_cÚŒŞËr
 (
j_com´ess_±r
 
cšfo
,

364 
jvœt_b¬¿y_±r
 * 
cÛf_¬¿ys
)

366 
my_cÛf_±r
 
cÛf
;

367 
JBLOCKROW
 
bufãr
;

368 
i
;

370 
cÛf
 = (
my_cÛf_±r
)

371 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

372 
	`SIZEOF
(
my_cÛf_cÚŒŞËr
));

373 
cšfo
->
cÛf
 = (
j³g_c_cÛf_cÚŒŞËr
 *) coef;

374 
cÛf
->
pub
.
¡¬t_·ss
 = 
¡¬t_·ss_cÛf
;

375 
cÛf
->
pub
.
com´ess_d©a
 = 
com´ess_ouut
;

378 
cÛf
->
whŞe_image
 = 
cÛf_¬¿ys
;

381 
bufãr
 = (
JBLOCKROW
)

382 (*
cšfo
->
mem
->
®loc_Ïrge
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

383 
C_MAX_BLOCKS_IN_MCU
 * 
	`SIZEOF
(
JBLOCK
));

384 
	`jz”o_çr
((
FAR
 *è
bufãr
, 
C_MAX_BLOCKS_IN_MCU
 * 
	`SIZEOF
(
JBLOCK
));

385 
i
 = 0; i < 
C_MAX_BLOCKS_IN_MCU
; i++) {

386 
cÛf
->
dummy_bufãr
[
i
] = 
bufãr
 + i;

388 
	}
}

	@jdapimin.c

19 
	#JPEG_INTERNALS


	)

20 
	~"jšşude.h
"

21 
	~"j³glib.h
"

29 
	$GLOBAL
()

30 
	$j³g_C»©eDecom´ess
 (
j_decom´ess_±r
 
cšfo
, 
v”siÚ
, 
size_t
 
¡ruùsize
)

32 
i
;

35 
cšfo
->
mem
 = 
NULL
;

36 ià(
v”siÚ
 !ğ
JPEG_LIB_VERSION
)

37 
	`ERREXIT2
(
cšfo
, 
JERR_BAD_LIB_VERSION
, 
JPEG_LIB_VERSION
, 
v”siÚ
);

38 ià(
¡ruùsize
 !ğ
	`SIZEOF
(
j³g_decom´ess_¡ruù
))

39 
	`ERREXIT2
(
cšfo
, 
JERR_BAD_STRUCT_SIZE
,

40 (è
	`SIZEOF
(
j³g_decom´ess_¡ruù
), (è
¡ruùsize
);

49 
j³g_”rÜ_mgr
 * 
”r
 = 
cšfo
->err;

50 * 
ş›Á_d©a
 = 
cšfo
->client_data;

51 
	`MEMZERO
(
cšfo
, 
	`SIZEOF
(
j³g_decom´ess_¡ruù
));

52 
cšfo
->
”r
 =ƒrr;

53 
cšfo
->
ş›Á_d©a
 = client_data;

55 
cšfo
->
is_decom´essÜ
 = 
TRUE
;

58 
	`jš™_memÜy_mgr
((
j_commÚ_±r
è
cšfo
);

61 
cšfo
->
´og»ss
 = 
NULL
;

62 
cšfo
->
¤c
 = 
NULL
;

64 
i
 = 0; i < 
NUM_QUANT_TBLS
; i++)

65 
cšfo
->
quªt_tbl_±rs
[
i
] = 
NULL
;

67 
i
 = 0; i < 
NUM_HUFF_TBLS
; i++) {

68 
cšfo
->
dc_huff_tbl_±rs
[
i
] = 
NULL
;

69 
cšfo
->
ac_huff_tbl_±rs
[
i
] = 
NULL
;

75 
cšfo
->
m¬k”_li¡
 = 
NULL
;

76 
	`jš™_m¬k”_»ad”
(
cšfo
);

79 
	`jš™_šput_cÚŒŞËr
(
cšfo
);

82 
cšfo
->
glob®_¡©e
 = 
DSTATE_START
;

83 
	}
}

90 
	$GLOBAL
()

91 
	$j³g_de¡roy_decom´ess
 (
j_decom´ess_±r
 
cšfo
)

93 
	`j³g_de¡roy
((
j_commÚ_±r
è
cšfo
);

94 
	}
}

102 
	$GLOBAL
()

103 
	$j³g_abÜt_decom´ess
 (
j_decom´ess_±r
 
cšfo
)

105 
	`j³g_abÜt
((
j_commÚ_±r
è
cšfo
);

106 
	}
}

113 
	$LOCAL
()

114 
	$deçuÉ_decom´ess_·rms
 (
j_decom´ess_±r
 
cšfo
)

119 
cšfo
->
num_compÚ’ts
) {

121 
cšfo
->
j³g_cŞÜ_¥aû
 = 
JCS_GRAYSCALE
;

122 
cšfo
->
out_cŞÜ_¥aû
 = 
JCS_GRAYSCALE
;

126 ià(
cšfo
->
§w_JFIF_m¬k”
) {

127 
cšfo
->
j³g_cŞÜ_¥aû
 = 
JCS_YCbCr
;

128 } ià(
cšfo
->
§w_Adobe_m¬k”
) {

129 
cšfo
->
Adobe_ŒªsfÜm
) {

131 
cšfo
->
j³g_cŞÜ_¥aû
 = 
JCS_RGB
;

134 
cšfo
->
j³g_cŞÜ_¥aû
 = 
JCS_YCbCr
;

137 
	`WARNMS1
(
cšfo
, 
JWRN_ADOBE_XFORM
, cšfo->
Adobe_ŒªsfÜm
);

138 
cšfo
->
j³g_cŞÜ_¥aû
 = 
JCS_YCbCr
;

143 
cid0
 = 
cšfo
->
comp_šfo
[0].
compÚ’t_id
;

144 
cid1
 = 
cšfo
->
comp_šfo
[1].
compÚ’t_id
;

145 
cid2
 = 
cšfo
->
comp_šfo
[2].
compÚ’t_id
;

147 ià(
cid0
 =ğ1 && 
cid1
 =ğ2 && 
cid2
 == 3)

148 
cšfo
->
j³g_cŞÜ_¥aû
 = 
JCS_YCbCr
;

149 ià(
cid0
 =ğ82 && 
cid1
 =ğ71 && 
cid2
 == 66)

150 
cšfo
->
j³g_cŞÜ_¥aû
 = 
JCS_RGB
;

152 
	`TRACEMS3
(
cšfo
, 1, 
JTRC_UNKNOWN_IDS
, 
cid0
, 
cid1
, 
cid2
);

153 
cšfo
->
j³g_cŞÜ_¥aû
 = 
JCS_YCbCr
;

157 
cšfo
->
out_cŞÜ_¥aû
 = 
JCS_RGB
;

161 ià(
cšfo
->
§w_Adobe_m¬k”
) {

162 
cšfo
->
Adobe_ŒªsfÜm
) {

164 
cšfo
->
j³g_cŞÜ_¥aû
 = 
JCS_CMYK
;

167 
cšfo
->
j³g_cŞÜ_¥aû
 = 
JCS_YCCK
;

170 
	`WARNMS1
(
cšfo
, 
JWRN_ADOBE_XFORM
, cšfo->
Adobe_ŒªsfÜm
);

171 
cšfo
->
j³g_cŞÜ_¥aû
 = 
JCS_YCCK
;

176 
cšfo
->
j³g_cŞÜ_¥aû
 = 
JCS_CMYK
;

178 
cšfo
->
out_cŞÜ_¥aû
 = 
JCS_CMYK
;

182 
cšfo
->
j³g_cŞÜ_¥aû
 = 
JCS_UNKNOWN
;

183 
cšfo
->
out_cŞÜ_¥aû
 = 
JCS_UNKNOWN
;

188 
cšfo
->
sÿË_num
 = 1;

189 
cšfo
->
sÿË_d’om
 = 1;

190 
cšfo
->
ouut_gamma
 = 1.0;

191 
cšfo
->
bufã»d_image
 = 
FALSE
;

192 
cšfo
->
¿w_d©a_out
 = 
FALSE
;

193 
cšfo
->
dù_m‘hod
 = 
JDCT_DEFAULT
;

194 
cšfo
->
do_çncy_up§m¶šg
 = 
TRUE
;

195 
cšfo
->
do_block_smoÙhšg
 = 
TRUE
;

196 
cšfo
->
quªtize_cŞÜs
 = 
FALSE
;

198 
cšfo
->
d™h”_mode
 = 
JDITHER_FS
;

199 #ifdeà
QUANT_2PASS_SUPPORTED


200 
cšfo
->
two_·ss_quªtize
 = 
TRUE
;

202 
cšfo
->
two_·ss_quªtize
 = 
FALSE
;

204 
cšfo
->
desœed_numb”_of_cŞÜs
 = 256;

205 
cšfo
->
cŞÜm­
 = 
NULL
;

207 
cšfo
->
’abË_1·ss_quªt
 = 
FALSE
;

208 
cšfo
->
’abË_ex‹º®_quªt
 = 
FALSE
;

209 
cšfo
->
’abË_2·ss_quªt
 = 
FALSE
;

210 
	}
}

240 
	$GLOBAL
()

241 
	$j³g_»ad_h—d”
 (
j_decom´ess_±r
 
cšfo
, 
boŞ—n
 
»quœe_image
)

243 
»tcode
;

245 ià(
cšfo
->
glob®_¡©e
 !ğ
DSTATE_START
 &&

246 
cšfo
->
glob®_¡©e
 !ğ
DSTATE_INHEADER
)

247 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_STATE
, cšfo->
glob®_¡©e
);

249 
»tcode
 = 
	`j³g_cÚsume_šput
(
cšfo
);

251 
»tcode
) {

252 
JPEG_REACHED_SOS
:

253 
»tcode
 = 
JPEG_HEADER_OK
;

255 
JPEG_REACHED_EOI
:

256 ià(
»quœe_image
)

257 
	`ERREXIT
(
cšfo
, 
JERR_NO_IMAGE
);

262 
	`j³g_abÜt
((
j_commÚ_±r
è
cšfo
);

263 
»tcode
 = 
JPEG_HEADER_TABLES_ONLY
;

265 
JPEG_SUSPENDED
:

270  
»tcode
;

271 
	}
}

286 
	$GLOBAL
()

287 
	$j³g_cÚsume_šput
 (
j_decom´ess_±r
 
cšfo
)

289 
»tcode
 = 
JPEG_SUSPENDED
;

292 
cšfo
->
glob®_¡©e
) {

293 
DSTATE_START
:

295 (*
cšfo
->
šputùl
->
»£t_šput_cÚŒŞËr
) (cinfo);

297 (*
cšfo
->
¤c
->
š™_sourû
) (cinfo);

298 
cšfo
->
glob®_¡©e
 = 
DSTATE_INHEADER
;

300 
DSTATE_INHEADER
:

301 
»tcode
 = (*
cšfo
->
šputùl
->
cÚsume_šput
) (cinfo);

302 ià(
»tcode
 =ğ
JPEG_REACHED_SOS
) {

304 
	`deçuÉ_decom´ess_·rms
(
cšfo
);

306 
cšfo
->
glob®_¡©e
 = 
DSTATE_READY
;

309 
DSTATE_READY
:

311 
»tcode
 = 
JPEG_REACHED_SOS
;

313 
DSTATE_PRELOAD
:

314 
DSTATE_PRESCAN
:

315 
DSTATE_SCANNING
:

316 
DSTATE_RAW_OK
:

317 
DSTATE_BUFIMAGE
:

318 
DSTATE_BUFPOST
:

319 
DSTATE_STOPPING
:

320 
»tcode
 = (*
cšfo
->
šputùl
->
cÚsume_šput
) (cinfo);

323 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_STATE
, cšfo->
glob®_¡©e
);

325  
»tcode
;

326 
	}
}

333 
	$GLOBAL
(
boŞ—n
)

334 
	$j³g_šput_com¶‘e
 (
j_decom´ess_±r
 
cšfo
)

337 ià(
cšfo
->
glob®_¡©e
 < 
DSTATE_START
 ||

338 
cšfo
->
glob®_¡©e
 > 
DSTATE_STOPPING
)

339 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_STATE
, cšfo->
glob®_¡©e
);

340  
cšfo
->
šputùl
->
eoi_»ached
;

341 
	}
}

348 
	$GLOBAL
(
boŞ—n
)

349 
	$j³g_has_muÉË_sÿns
 (
j_decom´ess_±r
 
cšfo
)

352 ià(
cšfo
->
glob®_¡©e
 < 
DSTATE_READY
 ||

353 
cšfo
->
glob®_¡©e
 > 
DSTATE_STOPPING
)

354 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_STATE
, cšfo->
glob®_¡©e
);

355  
cšfo
->
šputùl
->
has_muÉË_sÿns
;

356 
	}
}

368 
	$GLOBAL
(
boŞ—n
)

369 
	$j³g_fšish_decom´ess
 (
j_decom´ess_±r
 
cšfo
)

371 ià((
cšfo
->
glob®_¡©e
 =ğ
DSTATE_SCANNING
 ||

372 
cšfo
->
glob®_¡©e
 =ğ
DSTATE_RAW_OK
è&& ! cšfo->
bufã»d_image
) {

374 ià(
cšfo
->
ouut_sÿÆše
 < cšfo->
ouut_height
)

375 
	`ERREXIT
(
cšfo
, 
JERR_TOO_LITTLE_DATA
);

376 (*
cšfo
->
ma¡”
->
fšish_ouut_·ss
) (cinfo);

377 
cšfo
->
glob®_¡©e
 = 
DSTATE_STOPPING
;

378 } ià(
cšfo
->
glob®_¡©e
 =ğ
DSTATE_BUFIMAGE
) {

380 
cšfo
->
glob®_¡©e
 = 
DSTATE_STOPPING
;

381 } ià(
cšfo
->
glob®_¡©e
 !ğ
DSTATE_STOPPING
) {

383 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_STATE
, cšfo->
glob®_¡©e
);

386 ! 
cšfo
->
šputùl
->
eoi_»ached
) {

387 ià((*
cšfo
->
šputùl
->
cÚsume_šput
è(cšfoè=ğ
JPEG_SUSPENDED
)

388  
FALSE
;

391 (*
cšfo
->
¤c
->
‹rm_sourû
) (cinfo);

393 
	`j³g_abÜt
((
j_commÚ_±r
è
cšfo
);

394  
TRUE
;

395 
	}
}

	@jdapistd.c

17 
	#JPEG_INTERNALS


	)

18 
	~"jšşude.h
"

19 
	~"j³glib.h
"

23 
	$LOCAL
(
boŞ—n
è
ouut_·ss_£tup
 
	`JPP
((
j_decom´ess_±r
 
cšfo
));

37 
	$GLOBAL
(
boŞ—n
)

38 
	$j³g_¡¬t_decom´ess
 (
j_decom´ess_±r
 
cšfo
)

40 ià(
cšfo
->
glob®_¡©e
 =ğ
DSTATE_READY
) {

42 
	`jš™_ma¡”_decom´ess
(
cšfo
);

43 ià(
cšfo
->
bufã»d_image
) {

45 
cšfo
->
glob®_¡©e
 = 
DSTATE_BUFIMAGE
;

46  
TRUE
;

48 
cšfo
->
glob®_¡©e
 = 
DSTATE_PRELOAD
;

50 ià(
cšfo
->
glob®_¡©e
 =ğ
DSTATE_PRELOAD
) {

52 ià(
cšfo
->
šputùl
->
has_muÉË_sÿns
) {

53 #ifdeà
D_MULTISCAN_FILES_SUPPORTED


55 
»tcode
;

57 ià(
cšfo
->
´og»ss
 !ğ
NULL
)

58 (*
cšfo
->
´og»ss
->
´og»ss_mÚ™Ü
è((
j_commÚ_±r
) cinfo);

60 
»tcode
 = (*
cšfo
->
šputùl
->
cÚsume_šput
) (cinfo);

61 ià(
»tcode
 =ğ
JPEG_SUSPENDED
)

62  
FALSE
;

63 ià(
»tcode
 =ğ
JPEG_REACHED_EOI
)

66 ià(
cšfo
->
´og»ss
 !ğ
NULL
 &&

67 (
»tcode
 =ğ
JPEG_ROW_COMPLETED
 ||„‘cod=ğ
JPEG_REACHED_SOS
)) {

68 ià(++
cšfo
->
´og»ss
->
·ss_couÁ”
 >ğcšfo->´og»ss->
·ss_lim™
) {

70 
cšfo
->
´og»ss
->
·ss_lim™
 +ğ(ècšfo->
tÙ®_iMCU_rows
;

75 
	`ERREXIT
(
cšfo
, 
JERR_NOT_COMPILED
);

78 
cšfo
->
ouut_sÿn_numb”
 = cšfo->
šput_sÿn_numb”
;

79 } ià(
cšfo
->
glob®_¡©e
 !ğ
DSTATE_PRESCAN
)

80 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_STATE
, cšfo->
glob®_¡©e
);

82  
	`ouut_·ss_£tup
(
cšfo
);

83 
	}
}

94 
	$LOCAL
(
boŞ—n
)

95 
	$ouut_·ss_£tup
 (
j_decom´ess_±r
 
cšfo
)

97 ià(
cšfo
->
glob®_¡©e
 !ğ
DSTATE_PRESCAN
) {

99 (*
cšfo
->
ma¡”
->
´•¬e_fÜ_ouut_·ss
) (cinfo);

100 
cšfo
->
ouut_sÿÆše
 = 0;

101 
cšfo
->
glob®_¡©e
 = 
DSTATE_PRESCAN
;

104 
cšfo
->
ma¡”
->
is_dummy_·ss
) {

105 #ifdeà
QUANT_2PASS_SUPPORTED


107 
cšfo
->
ouut_sÿÆše
 < cšfo->
ouut_height
) {

108 
JDIMENSION
 
Ï¡_sÿÆše
;

110 ià(
cšfo
->
´og»ss
 !ğ
NULL
) {

111 
cšfo
->
´og»ss
->
·ss_couÁ”
 = (ècšfo->
ouut_sÿÆše
;

112 
cšfo
->
´og»ss
->
·ss_lim™
 = (ècšfo->
ouut_height
;

113 (*
cšfo
->
´og»ss
->
´og»ss_mÚ™Ü
è((
j_commÚ_±r
) cinfo);

116 
Ï¡_sÿÆše
 = 
cšfo
->
ouut_sÿÆše
;

117 (*
cšfo
->
maš
->
´oûss_d©a
è(cšfo, (
JSAMPARRAY
è
NULL
,

118 &
cšfo
->
ouut_sÿÆše
, (
JDIMENSION
) 0);

119 ià(
cšfo
->
ouut_sÿÆše
 =ğ
Ï¡_sÿÆše
)

120  
FALSE
;

123 (*
cšfo
->
ma¡”
->
fšish_ouut_·ss
) (cinfo);

124 (*
cšfo
->
ma¡”
->
´•¬e_fÜ_ouut_·ss
) (cinfo);

125 
cšfo
->
ouut_sÿÆše
 = 0;

127 
	`ERREXIT
(
cšfo
, 
JERR_NOT_COMPILED
);

133 
cšfo
->
glob®_¡©e
 = cšfo->
¿w_d©a_out
 ? 
DSTATE_RAW_OK
 : 
DSTATE_SCANNING
;

134  
TRUE
;

135 
	}
}

151 
	$GLOBAL
(
JDIMENSION
)

152 
	$j³g_»ad_sÿÆšes
 (
j_decom´ess_±r
 
cšfo
, 
JSAMPARRAY
 
sÿÆšes
,

153 
JDIMENSION
 
max_lšes
)

155 
JDIMENSION
 
row_ùr
;

157 ià(
cšfo
->
glob®_¡©e
 !ğ
DSTATE_SCANNING
)

158 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_STATE
, cšfo->
glob®_¡©e
);

159 ià(
cšfo
->
ouut_sÿÆše
 >ğcšfo->
ouut_height
) {

160 
	`WARNMS
(
cšfo
, 
JWRN_TOO_MUCH_DATA
);

165 ià(
cšfo
->
´og»ss
 !ğ
NULL
) {

166 
cšfo
->
´og»ss
->
·ss_couÁ”
 = (ècšfo->
ouut_sÿÆše
;

167 
cšfo
->
´og»ss
->
·ss_lim™
 = (ècšfo->
ouut_height
;

168 (*
cšfo
->
´og»ss
->
´og»ss_mÚ™Ü
è((
j_commÚ_±r
) cinfo);

172 
row_ùr
 = 0;

173 (*
cšfo
->
maš
->
´oûss_d©a
è(cšfo, 
sÿÆšes
, &
row_ùr
, 
max_lšes
);

174 
cšfo
->
ouut_sÿÆše
 +ğ
row_ùr
;

175  
row_ùr
;

176 
	}
}

184 
	$GLOBAL
(
JDIMENSION
)

185 
	$j³g_»ad_¿w_d©a
 (
j_decom´ess_±r
 
cšfo
, 
JSAMPIMAGE
 
d©a
,

186 
JDIMENSION
 
max_lšes
)

188 
JDIMENSION
 
lšes_³r_iMCU_row
;

190 ià(
cšfo
->
glob®_¡©e
 !ğ
DSTATE_RAW_OK
)

191 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_STATE
, cšfo->
glob®_¡©e
);

192 ià(
cšfo
->
ouut_sÿÆše
 >ğcšfo->
ouut_height
) {

193 
	`WARNMS
(
cšfo
, 
JWRN_TOO_MUCH_DATA
);

198 ià(
cšfo
->
´og»ss
 !ğ
NULL
) {

199 
cšfo
->
´og»ss
->
·ss_couÁ”
 = (ècšfo->
ouut_sÿÆše
;

200 
cšfo
->
´og»ss
->
·ss_lim™
 = (ècšfo->
ouut_height
;

201 (*
cšfo
->
´og»ss
->
´og»ss_mÚ™Ü
è((
j_commÚ_±r
) cinfo);

205 
lšes_³r_iMCU_row
 = 
cšfo
->
max_v_§mp_çùÜ
 * cšfo->
mš_DCT_sÿËd_size
;

206 ià(
max_lšes
 < 
lšes_³r_iMCU_row
)

207 
	`ERREXIT
(
cšfo
, 
JERR_BUFFER_SIZE
);

210 ià(! (*
cšfo
->
cÛf
->
decom´ess_d©a
è(cšfo, 
d©a
))

214 
cšfo
->
ouut_sÿÆše
 +ğ
lšes_³r_iMCU_row
;

215  
lšes_³r_iMCU_row
;

216 
	}
}

221 #ifdeà
D_MULTISCAN_FILES_SUPPORTED


227 
	$GLOBAL
(
boŞ—n
)

228 
	$j³g_¡¬t_ouut
 (
j_decom´ess_±r
 
cšfo
, 
sÿn_numb”
)

230 ià(
cšfo
->
glob®_¡©e
 !ğ
DSTATE_BUFIMAGE
 &&

231 
cšfo
->
glob®_¡©e
 !ğ
DSTATE_PRESCAN
)

232 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_STATE
, cšfo->
glob®_¡©e
);

234 ià(
sÿn_numb”
 <= 0)

235 
sÿn_numb”
 = 1;

236 ià(
cšfo
->
šputùl
->
eoi_»ached
 &&

237 
sÿn_numb”
 > 
cšfo
->
šput_sÿn_numb”
)

238 
sÿn_numb”
 = 
cšfo
->
šput_sÿn_numb”
;

239 
cšfo
->
ouut_sÿn_numb”
 = 
sÿn_numb”
;

241  
	`ouut_·ss_£tup
(
cšfo
);

242 
	}
}

252 
	$GLOBAL
(
boŞ—n
)

253 
	$j³g_fšish_ouut
 (
j_decom´ess_±r
 
cšfo
)

255 ià((
cšfo
->
glob®_¡©e
 =ğ
DSTATE_SCANNING
 ||

256 
cšfo
->
glob®_¡©e
 =ğ
DSTATE_RAW_OK
è&& cšfo->
bufã»d_image
) {

259 (*
cšfo
->
ma¡”
->
fšish_ouut_·ss
) (cinfo);

260 
cšfo
->
glob®_¡©e
 = 
DSTATE_BUFPOST
;

261 } ià(
cšfo
->
glob®_¡©e
 !ğ
DSTATE_BUFPOST
) {

263 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_STATE
, cšfo->
glob®_¡©e
);

266 
cšfo
->
šput_sÿn_numb”
 <ğcšfo->
ouut_sÿn_numb”
 &&

267 ! 
cšfo
->
šputùl
->
eoi_»ached
) {

268 ià((*
cšfo
->
šputùl
->
cÚsume_šput
è(cšfoè=ğ
JPEG_SUSPENDED
)

269  
FALSE
;

271 
cšfo
->
glob®_¡©e
 = 
DSTATE_BUFIMAGE
;

272  
TRUE
;

273 
	}
}

	@jdatadst.c

18 
	~"jšşude.h
"

19 
	~"j³glib.h
"

20 
	~"j”rÜ.h
"

26 
j³g_de¡š©iÚ_mgr
 
	mpub
;

28 
FILE
 * 
	moutfe
;

29 
JOCTET
 * 
	mbufãr
;

30 } 
	tmy_de¡š©iÚ_mgr
;

32 
my_de¡š©iÚ_mgr
 * 
	tmy_de¡_±r
;

34 
	#OUTPUT_BUF_SIZE
 4096

	)

42 
	$METHODDEF
()

43 
	$š™_de¡š©iÚ
 (
j_com´ess_±r
 
cšfo
)

45 
my_de¡_±r
 
de¡
 = (my_de¡_±rè
cšfo
->dest;

48 
de¡
->
bufãr
 = (
JOCTET
 *)

49 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

50 
OUTPUT_BUF_SIZE
 * 
	`SIZEOF
(
JOCTET
));

52 
de¡
->
pub
.
Ãxt_ouut_by‹
 = de¡->
bufãr
;

53 
de¡
->
pub
.
ä“_š_bufãr
 = 
OUTPUT_BUF_SIZE
;

54 
	}
}

80 
	$METHODDEF
(
boŞ—n
)

81 
	$em±y_ouut_bufãr
 (
j_com´ess_±r
 
cšfo
)

83 
my_de¡_±r
 
de¡
 = (my_de¡_±rè
cšfo
->dest;

85 ià(
	`JFWRITE
(
de¡
->
outfe
, de¡->
bufãr
, 
OUTPUT_BUF_SIZE
) !=

86 (
size_t
è
OUTPUT_BUF_SIZE
)

87 
	`ERREXIT
(
cšfo
, 
JERR_FILE_WRITE
);

89 
de¡
->
pub
.
Ãxt_ouut_by‹
 = de¡->
bufãr
;

90 
de¡
->
pub
.
ä“_š_bufãr
 = 
OUTPUT_BUF_SIZE
;

92  
TRUE
;

93 
	}
}

105 
	$METHODDEF
()

106 
	$‹rm_de¡š©iÚ
 (
j_com´ess_±r
 
cšfo
)

108 
my_de¡_±r
 
de¡
 = (my_de¡_±rè
cšfo
->dest;

109 
size_t
 
d©acouÁ
 = 
OUTPUT_BUF_SIZE
 - 
de¡
->
pub
.
ä“_š_bufãr
;

112 ià(
d©acouÁ
 > 0) {

113 ià(
	`JFWRITE
(
de¡
->
outfe
, de¡->
bufãr
, 
d©acouÁ
) != datacount)

114 
	`ERREXIT
(
cšfo
, 
JERR_FILE_WRITE
);

116 
	`fæush
(
de¡
->
outfe
);

118 ià(
	`ã¼Ü
(
de¡
->
outfe
))

119 
	`ERREXIT
(
cšfo
, 
JERR_FILE_WRITE
);

120 
	}
}

129 
	$GLOBAL
()

130 
	$j³g_¡dio_de¡
 (
j_com´ess_±r
 
cšfo
, 
FILE
 * 
outfe
)

132 
my_de¡_±r
 
de¡
;

140 ià(
cšfo
->
de¡
 =ğ
NULL
) {

141 
cšfo
->
de¡
 = (
j³g_de¡š©iÚ_mgr
 *)

142 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_PERMANENT
,

143 
	`SIZEOF
(
my_de¡š©iÚ_mgr
));

146 
de¡
 = (
my_de¡_±r
è
cšfo
->dest;

147 
de¡
->
pub
.
š™_de¡š©iÚ
 = init_destination;

148 
de¡
->
pub
.
em±y_ouut_bufãr
 =ƒmpty_output_buffer;

149 
de¡
->
pub
.
‹rm_de¡š©iÚ
 =erm_destination;

150 
de¡
->
outfe
 = outfile;

151 
	}
}

	@jdatasrc.c

18 
	~"jšşude.h
"

19 
	~"j³glib.h
"

20 
	~"j”rÜ.h
"

26 
j³g_sourû_mgr
 
	mpub
;

28 
FILE
 * 
	mšfe
;

29 
JOCTET
 * 
	mbufãr
;

30 
boŞ—n
 
	m¡¬t_of_fe
;

31 } 
	tmy_sourû_mgr
;

33 
my_sourû_mgr
 * 
	tmy_¤c_±r
;

35 
	#INPUT_BUF_SIZE
 4096

	)

43 
	$METHODDEF
()

44 
	$š™_sourû
 (
j_decom´ess_±r
 
cšfo
)

46 
my_¤c_±r
 
¤c
 = (my_¤c_±rè
cšfo
->src;

52 
¤c
->
¡¬t_of_fe
 = 
TRUE
;

53 
	}
}

89 
	$METHODDEF
(
boŞ—n
)

90 
	$fl_šput_bufãr
 (
j_decom´ess_±r
 
cšfo
)

92 
my_¤c_±r
 
¤c
 = (my_¤c_±rè
cšfo
->src;

93 
size_t
 
nby‹s
;

95 
nby‹s
 = 
	`JFREAD
(
¤c
->
šfe
, src->
bufãr
, 
INPUT_BUF_SIZE
);

97 ià(
nby‹s
 <= 0) {

98 ià(
¤c
->
¡¬t_of_fe
)

99 
	`ERREXIT
(
cšfo
, 
JERR_INPUT_EMPTY
);

100 
	`WARNMS
(
cšfo
, 
JWRN_JPEG_EOF
);

102 
¤c
->
bufãr
[0] = (
JOCTET
) 0xFF;

103 
¤c
->
bufãr
[1] = (
JOCTET
è
JPEG_EOI
;

104 
nby‹s
 = 2;

107 
¤c
->
pub
.
Ãxt_šput_by‹
 = src->
bufãr
;

108 
¤c
->
pub
.
by‹s_š_bufãr
 = 
nby‹s
;

109 
¤c
->
¡¬t_of_fe
 = 
FALSE
;

111  
TRUE
;

112 
	}
}

127 
	$METHODDEF
()

128 
	$sk_šput_d©a
 (
j_decom´ess_±r
 
cšfo
, 
num_by‹s
)

130 
my_¤c_±r
 
¤c
 = (my_¤c_±rè
cšfo
->src;

136 ià(
num_by‹s
 > 0) {

137 
num_by‹s
 > (è
¤c
->
pub
.
by‹s_š_bufãr
) {

138 
num_by‹s
 -ğ(è
¤c
->
pub
.
by‹s_š_bufãr
;

139 (è
	`fl_šput_bufãr
(
cšfo
);

144 
¤c
->
pub
.
Ãxt_šput_by‹
 +ğ(
size_t
è
num_by‹s
;

145 
¤c
->
pub
.
by‹s_š_bufãr
 -ğ(
size_t
è
num_by‹s
;

147 
	}
}

168 
	$METHODDEF
()

169 
	$‹rm_sourû
 (
j_decom´ess_±r
 
cšfo
)

172 
	}
}

181 
	$GLOBAL
()

182 
	$j³g_¡dio_¤c
 (
j_decom´ess_±r
 
cšfo
, 
FILE
 * 
šfe
)

184 
my_¤c_±r
 
¤c
;

193 ià(
cšfo
->
¤c
 =ğ
NULL
) {

194 
cšfo
->
¤c
 = (
j³g_sourû_mgr
 *)

195 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_PERMANENT
,

196 
	`SIZEOF
(
my_sourû_mgr
));

197 
¤c
 = (
my_¤c_±r
è
cšfo
->src;

198 
¤c
->
bufãr
 = (
JOCTET
 *)

199 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_PERMANENT
,

200 
INPUT_BUF_SIZE
 * 
	`SIZEOF
(
JOCTET
));

203 
¤c
 = (
my_¤c_±r
è
cšfo
->src;

204 
¤c
->
pub
.
š™_sourû
 = init_source;

205 
¤c
->
pub
.
fl_šput_bufãr
 = fill_input_buffer;

206 
¤c
->
pub
.
sk_šput_d©a
 = skip_input_data;

207 
¤c
->
pub
.
»sync_to_»¡¬t
 = 
j³g_»sync_to_»¡¬t
;

208 
¤c
->
pub
.
‹rm_sourû
 =erm_source;

209 
¤c
->
šfe
 = infile;

210 
¤c
->
pub
.
by‹s_š_bufãr
 = 0;

211 
¤c
->
pub
.
Ãxt_šput_by‹
 = 
NULL
;

212 
	}
}

	@jdcoefct.c

17 
	#JPEG_INTERNALS


	)

18 
	~"jšşude.h
"

19 
	~"j³glib.h
"

22 #iâdeà
D_PROGRESSIVE_SUPPORTED


23 #undeà
BLOCK_SMOOTHING_SUPPORTED


29 
j³g_d_cÛf_cÚŒŞËr
 
	mpub
;

33 
JDIMENSION
 
	mMCU_ùr
;

34 
	mMCU_v”t_off£t
;

35 
	mMCU_rows_³r_iMCU_row
;

48 
JBLOCKROW
 
	mMCU_bufãr
[
D_MAX_BLOCKS_IN_MCU
];

50 #ifdeà
D_MULTISCAN_FILES_SUPPORTED


52 
jvœt_b¬¿y_±r
 
	mwhŞe_image
[
MAX_COMPONENTS
];

55 #ifdeà
BLOCK_SMOOTHING_SUPPORTED


57 * 
	mcÛf_b™s_Ïtch
;

58 
	#SAVED_COEFS
 6

	)

60 } 
	tmy_cÛf_cÚŒŞËr
;

62 
my_cÛf_cÚŒŞËr
 * 
	tmy_cÛf_±r
;

65 
	$METHODDEF
(è
decom´ess_Ú•ass


66 
	`JPP
((
j_decom´ess_±r
 
cšfo
, 
JSAMPIMAGE
 
ouut_buf
));

67 #ifdeà
D_MULTISCAN_FILES_SUPPORTED


68 
	$METHODDEF
(è
decom´ess_d©a


69 
	`JPP
((
j_decom´ess_±r
 
cšfo
, 
JSAMPIMAGE
 
ouut_buf
));

71 #ifdeà
BLOCK_SMOOTHING_SUPPORTED


72 
	$LOCAL
(
boŞ—n
è
smoÙhšg_ok
 
	`JPP
((
j_decom´ess_±r
 
cšfo
));

73 
	$METHODDEF
(è
decom´ess_smoÙh_d©a


74 
	`JPP
((
j_decom´ess_±r
 
cšfo
, 
JSAMPIMAGE
 
ouut_buf
));

78 
	$LOCAL
()

79 
	$¡¬t_iMCU_row
 (
j_decom´ess_±r
 
cšfo
)

82 
my_cÛf_±r
 
cÛf
 = (my_cÛf_±rè
cšfo
->coef;

88 ià(
cšfo
->
comps_š_sÿn
 > 1) {

89 
cÛf
->
MCU_rows_³r_iMCU_row
 = 1;

91 ià(
cšfo
->
šput_iMCU_row
 < (cšfo->
tÙ®_iMCU_rows
-1))

92 
cÛf
->
MCU_rows_³r_iMCU_row
 = 
cšfo
->
cur_comp_šfo
[0]->
v_§mp_çùÜ
;

94 
cÛf
->
MCU_rows_³r_iMCU_row
 = 
cšfo
->
cur_comp_šfo
[0]->
Ï¡_row_height
;

97 
cÛf
->
MCU_ùr
 = 0;

98 
cÛf
->
MCU_v”t_off£t
 = 0;

99 
	}
}

106 
	$METHODDEF
()

107 
	$¡¬t_šput_·ss
 (
j_decom´ess_±r
 
cšfo
)

109 
cšfo
->
šput_iMCU_row
 = 0;

110 
	`¡¬t_iMCU_row
(
cšfo
);

111 
	}
}

118 
	$METHODDEF
()

119 
	$¡¬t_ouut_·ss
 (
j_decom´ess_±r
 
cšfo
)

121 #ifdeà
BLOCK_SMOOTHING_SUPPORTED


122 
my_cÛf_±r
 
cÛf
 = (my_cÛf_±rè
cšfo
->coef;

125 ià(
cÛf
->
pub
.
cÛf_¬¿ys
 !ğ
NULL
) {

126 ià(
cšfo
->
do_block_smoÙhšg
 && 
	`smoÙhšg_ok
(cinfo))

127 
cÛf
->
pub
.
decom´ess_d©a
 = 
decom´ess_smoÙh_d©a
;

129 
cÛf
->
pub
.
decom´ess_d©a
 = decompress_data;

132 
cšfo
->
ouut_iMCU_row
 = 0;

133 
	}
}

146 
	$METHODDEF
()

147 
	$decom´ess_Ú•ass
 (
j_decom´ess_±r
 
cšfo
, 
JSAMPIMAGE
 
ouut_buf
)

149 
my_cÛf_±r
 
cÛf
 = (my_cÛf_±rè
cšfo
->coef;

150 
JDIMENSION
 
MCU_cŞ_num
;

151 
JDIMENSION
 
Ï¡_MCU_cŞ
 = 
cšfo
->
MCUs_³r_row
 - 1;

152 
JDIMENSION
 
Ï¡_iMCU_row
 = 
cšfo
->
tÙ®_iMCU_rows
 - 1;

153 
blkn
, 
ci
, 
xšdex
, 
yšdex
, 
yoff£t
, 
u£ful_width
;

154 
JSAMPARRAY
 
ouut_±r
;

155 
JDIMENSION
 
¡¬t_cŞ
, 
ouut_cŞ
;

156 
j³g_compÚ’t_šfo
 *
comµŒ
;

157 
šv”£_DCT_m‘hod_±r
 
šv”£_DCT
;

160 
yoff£t
 = 
cÛf
->
MCU_v”t_off£t
; yoff£ˆ< cÛf->
MCU_rows_³r_iMCU_row
;

161 
yoff£t
++) {

162 
MCU_cŞ_num
 = 
cÛf
->
MCU_ùr
; MCU_cŞ_num <ğ
Ï¡_MCU_cŞ
;

163 
MCU_cŞ_num
++) {

165 
	`jz”o_çr
((
FAR
 *è
cÛf
->
MCU_bufãr
[0],

166 (
size_t
è(
cšfo
->
blocks_š_MCU
 * 
	`SIZEOF
(
JBLOCK
)));

167 ià(! (*
cšfo
->
’Œİy
->
decode_mcu
è(cšfo, 
cÛf
->
MCU_bufãr
)) {

169 
cÛf
->
MCU_v”t_off£t
 = 
yoff£t
;

170 
cÛf
->
MCU_ùr
 = 
MCU_cŞ_num
;

171  
JPEG_SUSPENDED
;

178 
blkn
 = 0;

179 
ci
 = 0; c˜< 
cšfo
->
comps_š_sÿn
; ci++) {

180 
comµŒ
 = 
cšfo
->
cur_comp_šfo
[
ci
];

182 ià(! 
comµŒ
->
compÚ’t_Ãeded
) {

183 
blkn
 +ğ
comµŒ
->
MCU_blocks
;

186 
šv”£_DCT
 = 
cšfo
->
idù
->šv”£_DCT[
comµŒ
->
compÚ’t_šdex
];

187 
u£ful_width
 = (
MCU_cŞ_num
 < 
Ï¡_MCU_cŞ
è? 
comµŒ
->
MCU_width


188 : 
comµŒ
->
Ï¡_cŞ_width
;

189 
ouut_±r
 = 
ouut_buf
[
comµŒ
->
compÚ’t_šdex
] +

190 
yoff£t
 * 
comµŒ
->
DCT_sÿËd_size
;

191 
¡¬t_cŞ
 = 
MCU_cŞ_num
 * 
comµŒ
->
MCU_§m¶e_width
;

192 
yšdex
 = 0; yšdex < 
comµŒ
->
MCU_height
; yindex++) {

193 ià(
cšfo
->
šput_iMCU_row
 < 
Ï¡_iMCU_row
 ||

194 
yoff£t
+
yšdex
 < 
comµŒ
->
Ï¡_row_height
) {

195 
ouut_cŞ
 = 
¡¬t_cŞ
;

196 
xšdex
 = 0; xšdex < 
u£ful_width
; xindex++) {

197 (*
šv”£_DCT
è(
cšfo
, 
comµŒ
,

198 (
JCOEFPTR
è
cÛf
->
MCU_bufãr
[
blkn
+
xšdex
],

199 
ouut_±r
, 
ouut_cŞ
);

200 
ouut_cŞ
 +ğ
comµŒ
->
DCT_sÿËd_size
;

203 
blkn
 +ğ
comµŒ
->
MCU_width
;

204 
ouut_±r
 +ğ
comµŒ
->
DCT_sÿËd_size
;

209 
cÛf
->
MCU_ùr
 = 0;

212 
cšfo
->
ouut_iMCU_row
++;

213 ià(++(
cšfo
->
šput_iMCU_row
è< cšfo->
tÙ®_iMCU_rows
) {

214 
	`¡¬t_iMCU_row
(
cšfo
);

215  
JPEG_ROW_COMPLETED
;

218 (*
cšfo
->
šputùl
->
fšish_šput_·ss
) (cinfo);

219  
JPEG_SCAN_COMPLETED
;

220 
	}
}

227 
	$METHODDEF
()

228 
	$dummy_cÚsume_d©a
 (
j_decom´ess_±r
 
cšfo
)

230  
JPEG_SUSPENDED
;

231 
	}
}

234 #ifdeà
D_MULTISCAN_FILES_SUPPORTED


243 
	$METHODDEF
()

244 
	$cÚsume_d©a
 (
j_decom´ess_±r
 
cšfo
)

246 
my_cÛf_±r
 
cÛf
 = (my_cÛf_±rè
cšfo
->coef;

247 
JDIMENSION
 
MCU_cŞ_num
;

248 
blkn
, 
ci
, 
xšdex
, 
yšdex
, 
yoff£t
;

249 
JDIMENSION
 
¡¬t_cŞ
;

250 
JBLOCKARRAY
 
bufãr
[
MAX_COMPS_IN_SCAN
];

251 
JBLOCKROW
 
bufãr_±r
;

252 
j³g_compÚ’t_šfo
 *
comµŒ
;

255 
ci
 = 0; c˜< 
cšfo
->
comps_š_sÿn
; ci++) {

256 
comµŒ
 = 
cšfo
->
cur_comp_šfo
[
ci
];

257 
bufãr
[
ci
] = (*
cšfo
->
mem
->
acûss_vœt_b¬¿y
)

258 ((
j_commÚ_±r
è
cšfo
, 
cÛf
->
whŞe_image
[
comµŒ
->
compÚ’t_šdex
],

259 
cšfo
->
šput_iMCU_row
 * 
comµŒ
->
v_§mp_çùÜ
,

260 (
JDIMENSION
è
comµŒ
->
v_§mp_çùÜ
, 
TRUE
);

268 
yoff£t
 = 
cÛf
->
MCU_v”t_off£t
; yoff£ˆ< cÛf->
MCU_rows_³r_iMCU_row
;

269 
yoff£t
++) {

270 
MCU_cŞ_num
 = 
cÛf
->
MCU_ùr
; MCU_cŞ_num < 
cšfo
->
MCUs_³r_row
;

271 
MCU_cŞ_num
++) {

273 
blkn
 = 0;

274 
ci
 = 0; c˜< 
cšfo
->
comps_š_sÿn
; ci++) {

275 
comµŒ
 = 
cšfo
->
cur_comp_šfo
[
ci
];

276 
¡¬t_cŞ
 = 
MCU_cŞ_num
 * 
comµŒ
->
MCU_width
;

277 
yšdex
 = 0; yšdex < 
comµŒ
->
MCU_height
; yindex++) {

278 
bufãr_±r
 = 
bufãr
[
ci
][
yšdex
+
yoff£t
] + 
¡¬t_cŞ
;

279 
xšdex
 = 0; xšdex < 
comµŒ
->
MCU_width
; xindex++) {

280 
cÛf
->
MCU_bufãr
[
blkn
++] = 
bufãr_±r
++;

285 ià(! (*
cšfo
->
’Œİy
->
decode_mcu
è(cšfo, 
cÛf
->
MCU_bufãr
)) {

287 
cÛf
->
MCU_v”t_off£t
 = 
yoff£t
;

288 
cÛf
->
MCU_ùr
 = 
MCU_cŞ_num
;

289  
JPEG_SUSPENDED
;

293 
cÛf
->
MCU_ùr
 = 0;

296 ià(++(
cšfo
->
šput_iMCU_row
è< cšfo->
tÙ®_iMCU_rows
) {

297 
	`¡¬t_iMCU_row
(
cšfo
);

298  
JPEG_ROW_COMPLETED
;

301 (*
cšfo
->
šputùl
->
fšish_šput_·ss
) (cinfo);

302  
JPEG_SCAN_COMPLETED
;

303 
	}
}

314 
	$METHODDEF
()

315 
	$decom´ess_d©a
 (
j_decom´ess_±r
 
cšfo
, 
JSAMPIMAGE
 
ouut_buf
)

317 
my_cÛf_±r
 
cÛf
 = (my_cÛf_±rè
cšfo
->coef;

318 
JDIMENSION
 
Ï¡_iMCU_row
 = 
cšfo
->
tÙ®_iMCU_rows
 - 1;

319 
JDIMENSION
 
block_num
;

320 
ci
, 
block_row
, 
block_rows
;

321 
JBLOCKARRAY
 
bufãr
;

322 
JBLOCKROW
 
bufãr_±r
;

323 
JSAMPARRAY
 
ouut_±r
;

324 
JDIMENSION
 
ouut_cŞ
;

325 
j³g_compÚ’t_šfo
 *
comµŒ
;

326 
šv”£_DCT_m‘hod_±r
 
šv”£_DCT
;

329 
cšfo
->
šput_sÿn_numb”
 < cšfo->
ouut_sÿn_numb”
 ||

330 (
cšfo
->
šput_sÿn_numb”
 =ğcšfo->
ouut_sÿn_numb”
 &&

331 
cšfo
->
šput_iMCU_row
 <ğcšfo->
ouut_iMCU_row
)) {

332 ià((*
cšfo
->
šputùl
->
cÚsume_šput
)(cšfoè=ğ
JPEG_SUSPENDED
)

333  
JPEG_SUSPENDED
;

337 
ci
 = 0, 
comµŒ
 = 
cšfo
->
comp_šfo
; c˜< cšfo->
num_compÚ’ts
;

338 
ci
++, 
comµŒ
++) {

340 ià(! 
comµŒ
->
compÚ’t_Ãeded
)

343 
bufãr
 = (*
cšfo
->
mem
->
acûss_vœt_b¬¿y
)

344 ((
j_commÚ_±r
è
cšfo
, 
cÛf
->
whŞe_image
[
ci
],

345 
cšfo
->
ouut_iMCU_row
 * 
comµŒ
->
v_§mp_çùÜ
,

346 (
JDIMENSION
è
comµŒ
->
v_§mp_çùÜ
, 
FALSE
);

348 ià(
cšfo
->
ouut_iMCU_row
 < 
Ï¡_iMCU_row
)

349 
block_rows
 = 
comµŒ
->
v_§mp_çùÜ
;

352 
block_rows
 = (è(
comµŒ
->
height_š_blocks
 % comµŒ->
v_§mp_çùÜ
);

353 ià(
block_rows
 =ğ0èblock_row ğ
comµŒ
->
v_§mp_çùÜ
;

355 
šv”£_DCT
 = 
cšfo
->
idù
->šv”£_DCT[
ci
];

356 
ouut_±r
 = 
ouut_buf
[
ci
];

358 
block_row
 = 0; block_row < 
block_rows
; block_row++) {

359 
bufãr_±r
 = 
bufãr
[
block_row
];

360 
ouut_cŞ
 = 0;

361 
block_num
 = 0; block_num < 
comµŒ
->
width_š_blocks
; block_num++) {

362 (*
šv”£_DCT
è(
cšfo
, 
comµŒ
, (
JCOEFPTR
è
bufãr_±r
,

363 
ouut_±r
, 
ouut_cŞ
);

364 
bufãr_±r
++;

365 
ouut_cŞ
 +ğ
comµŒ
->
DCT_sÿËd_size
;

367 
ouut_±r
 +ğ
comµŒ
->
DCT_sÿËd_size
;

371 ià(++(
cšfo
->
ouut_iMCU_row
è< cšfo->
tÙ®_iMCU_rows
)

372  
JPEG_ROW_COMPLETED
;

373  
JPEG_SCAN_COMPLETED
;

374 
	}
}

379 #ifdeà
BLOCK_SMOOTHING_SUPPORTED


390 
	#Q01_POS
 1

	)

391 
	#Q10_POS
 8

	)

392 
	#Q20_POS
 16

	)

393 
	#Q11_POS
 9

	)

394 
	#Q02_POS
 2

	)

404 
	$LOCAL
(
boŞ—n
)

405 
	$smoÙhšg_ok
 (
j_decom´ess_±r
 
cšfo
)

407 
my_cÛf_±r
 
cÛf
 = (my_cÛf_±rè
cšfo
->coef;

408 
boŞ—n
 
smoÙhšg_u£ful
 = 
FALSE
;

409 
ci
, 
cÛfi
;

410 
j³g_compÚ’t_šfo
 *
comµŒ
;

411 
JQUANT_TBL
 * 
qbË
;

412 * 
cÛf_b™s
;

413 * 
cÛf_b™s_Ïtch
;

415 ià(! 
cšfo
->
´og»ssive_mode
 || cšfo->
cÛf_b™s
 =ğ
NULL
)

416  
FALSE
;

419 ià(
cÛf
->
cÛf_b™s_Ïtch
 =ğ
NULL
)

420 
cÛf
->
cÛf_b™s_Ïtch
 = (*)

421 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

422 
cšfo
->
num_compÚ’ts
 *

423 (
SAVED_COEFS
 * 
	`SIZEOF
()));

424 
cÛf_b™s_Ïtch
 = 
cÛf
->coef_bits_latch;

426 
ci
 = 0, 
comµŒ
 = 
cšfo
->
comp_šfo
; c˜< cšfo->
num_compÚ’ts
;

427 
ci
++, 
comµŒ
++) {

429 ià((
qbË
 = 
comµŒ
->
quªt_bË
è=ğ
NULL
)

430  
FALSE
;

432 ià(
qbË
->
quªtv®
[0] == 0 ||

433 
qbË
->
quªtv®
[
Q01_POS
] == 0 ||

434 
qbË
->
quªtv®
[
Q10_POS
] == 0 ||

435 
qbË
->
quªtv®
[
Q20_POS
] == 0 ||

436 
qbË
->
quªtv®
[
Q11_POS
] == 0 ||

437 
qbË
->
quªtv®
[
Q02_POS
] == 0)

438  
FALSE
;

440 
cÛf_b™s
 = 
cšfo
->cÛf_b™s[
ci
];

441 ià(
cÛf_b™s
[0] < 0)

442  
FALSE
;

444 
cÛfi
 = 1; coefi <= 5; coefi++) {

445 
cÛf_b™s_Ïtch
[
cÛfi
] = 
cÛf_b™s
[coefi];

446 ià(
cÛf_b™s
[
cÛfi
] != 0)

447 
smoÙhšg_u£ful
 = 
TRUE
;

449 
cÛf_b™s_Ïtch
 +ğ
SAVED_COEFS
;

452  
smoÙhšg_u£ful
;

453 
	}
}

460 
	$METHODDEF
()

461 
	$decom´ess_smoÙh_d©a
 (
j_decom´ess_±r
 
cšfo
, 
JSAMPIMAGE
 
ouut_buf
)

463 
my_cÛf_±r
 
cÛf
 = (my_cÛf_±rè
cšfo
->coef;

464 
JDIMENSION
 
Ï¡_iMCU_row
 = 
cšfo
->
tÙ®_iMCU_rows
 - 1;

465 
JDIMENSION
 
block_num
, 
Ï¡_block_cŞumn
;

466 
ci
, 
block_row
, 
block_rows
, 
acûss_rows
;

467 
JBLOCKARRAY
 
bufãr
;

468 
JBLOCKROW
 
bufãr_±r
, 
´ev_block_row
, 
Ãxt_block_row
;

469 
JSAMPARRAY
 
ouut_±r
;

470 
JDIMENSION
 
ouut_cŞ
;

471 
j³g_compÚ’t_šfo
 *
comµŒ
;

472 
šv”£_DCT_m‘hod_±r
 
šv”£_DCT
;

473 
boŞ—n
 
fœ¡_row
, 
Ï¡_row
;

474 
JBLOCK
 
wÜk¥aû
;

475 *
cÛf_b™s
;

476 
JQUANT_TBL
 *
quª‰bl
;

477 
INT32
 
Q00
,
Q01
,
Q02
,
Q10
,
Q11
,
Q20
, 
num
;

478 
DC1
,
DC2
,
DC3
,
DC4
,
DC5
,
DC6
,
DC7
,
DC8
,
DC9
;

479 
Al
, 
´ed
;

482 
cšfo
->
šput_sÿn_numb”
 <ğcšfo->
ouut_sÿn_numb”
 &&

483 ! 
cšfo
->
šputùl
->
eoi_»ached
) {

484 ià(
cšfo
->
šput_sÿn_numb”
 =ğcšfo->
ouut_sÿn_numb”
) {

490 
JDIMENSION
 
d–
 = (
cšfo
->
Ss
 == 0) ? 1 : 0;

491 ià(
cšfo
->
šput_iMCU_row
 > cšfo->
ouut_iMCU_row
+
d–
)

494 ià((*
cšfo
->
šputùl
->
cÚsume_šput
)(cšfoè=ğ
JPEG_SUSPENDED
)

495  
JPEG_SUSPENDED
;

499 
ci
 = 0, 
comµŒ
 = 
cšfo
->
comp_šfo
; c˜< cšfo->
num_compÚ’ts
;

500 
ci
++, 
comµŒ
++) {

502 ià(! 
comµŒ
->
compÚ’t_Ãeded
)

505 ià(
cšfo
->
ouut_iMCU_row
 < 
Ï¡_iMCU_row
) {

506 
block_rows
 = 
comµŒ
->
v_§mp_çùÜ
;

507 
acûss_rows
 = 
block_rows
 * 2;

508 
Ï¡_row
 = 
FALSE
;

511 
block_rows
 = (è(
comµŒ
->
height_š_blocks
 % comµŒ->
v_§mp_çùÜ
);

512 ià(
block_rows
 =ğ0èblock_row ğ
comµŒ
->
v_§mp_çùÜ
;

513 
acûss_rows
 = 
block_rows
;

514 
Ï¡_row
 = 
TRUE
;

517 ià(
cšfo
->
ouut_iMCU_row
 > 0) {

518 
acûss_rows
 +ğ
comµŒ
->
v_§mp_çùÜ
;

519 
bufãr
 = (*
cšfo
->
mem
->
acûss_vœt_b¬¿y
)

520 ((
j_commÚ_±r
è
cšfo
, 
cÛf
->
whŞe_image
[
ci
],

521 (
cšfo
->
ouut_iMCU_row
 - 1è* 
comµŒ
->
v_§mp_çùÜ
,

522 (
JDIMENSION
è
acûss_rows
, 
FALSE
);

523 
bufãr
 +ğ
comµŒ
->
v_§mp_çùÜ
;

524 
fœ¡_row
 = 
FALSE
;

526 
bufãr
 = (*
cšfo
->
mem
->
acûss_vœt_b¬¿y
)

527 ((
j_commÚ_±r
è
cšfo
, 
cÛf
->
whŞe_image
[
ci
],

528 (
JDIMENSION
è0, (JDIMENSIONè
acûss_rows
, 
FALSE
);

529 
fœ¡_row
 = 
TRUE
;

532 
cÛf_b™s
 = 
cÛf
->
cÛf_b™s_Ïtch
 + (
ci
 * 
SAVED_COEFS
);

533 
quª‰bl
 = 
comµŒ
->
quªt_bË
;

534 
Q00
 = 
quª‰bl
->
quªtv®
[0];

535 
Q01
 = 
quª‰bl
->
quªtv®
[
Q01_POS
];

536 
Q10
 = 
quª‰bl
->
quªtv®
[
Q10_POS
];

537 
Q20
 = 
quª‰bl
->
quªtv®
[
Q20_POS
];

538 
Q11
 = 
quª‰bl
->
quªtv®
[
Q11_POS
];

539 
Q02
 = 
quª‰bl
->
quªtv®
[
Q02_POS
];

540 
šv”£_DCT
 = 
cšfo
->
idù
->šv”£_DCT[
ci
];

541 
ouut_±r
 = 
ouut_buf
[
ci
];

543 
block_row
 = 0; block_row < 
block_rows
; block_row++) {

544 
bufãr_±r
 = 
bufãr
[
block_row
];

545 ià(
fœ¡_row
 && 
block_row
 == 0)

546 
´ev_block_row
 = 
bufãr_±r
;

548 
´ev_block_row
 = 
bufãr
[
block_row
-1];

549 ià(
Ï¡_row
 && 
block_row
 =ğ
block_rows
-1)

550 
Ãxt_block_row
 = 
bufãr_±r
;

552 
Ãxt_block_row
 = 
bufãr
[
block_row
+1];

556 
DC1
 = 
DC2
 = 
DC3
 = (è
´ev_block_row
[0][0];

557 
DC4
 = 
DC5
 = 
DC6
 = (è
bufãr_±r
[0][0];

558 
DC7
 = 
DC8
 = 
DC9
 = (è
Ãxt_block_row
[0][0];

559 
ouut_cŞ
 = 0;

560 
Ï¡_block_cŞumn
 = 
comµŒ
->
width_š_blocks
 - 1;

561 
block_num
 = 0; block_num <ğ
Ï¡_block_cŞumn
; block_num++) {

563 
	`jcİy_block_row
(
bufãr_±r
, (
JBLOCKROW
è
wÜk¥aû
, (
JDIMENSION
) 1);

565 ià(
block_num
 < 
Ï¡_block_cŞumn
) {

566 
DC3
 = (è
´ev_block_row
[1][0];

567 
DC6
 = (è
bufãr_±r
[1][0];

568 
DC9
 = (è
Ãxt_block_row
[1][0];

575 ià((
Al
=
cÛf_b™s
[1]è!ğ0 && 
wÜk¥aû
[1] == 0) {

576 
num
 = 36 * 
Q00
 * (
DC4
 - 
DC6
);

577 ià(
num
 >= 0) {

578 
´ed
 = (è(((
Q01
<<7è+ 
num
) / (Q01<<8));

579 ià(
Al
 > 0 && 
´ed
 >= (1<<Al))

580 
´ed
 = (1<<
Al
)-1;

582 
´ed
 = (è(((
Q01
<<7è- 
num
) / (Q01<<8));

583 ià(
Al
 > 0 && 
´ed
 >= (1<<Al))

584 
´ed
 = (1<<
Al
)-1;

585 
´ed
 = -pred;

587 
wÜk¥aû
[1] = (
JCOEF
è
´ed
;

590 ià((
Al
=
cÛf_b™s
[2]è!ğ0 && 
wÜk¥aû
[8] == 0) {

591 
num
 = 36 * 
Q00
 * (
DC2
 - 
DC8
);

592 ià(
num
 >= 0) {

593 
´ed
 = (è(((
Q10
<<7è+ 
num
) / (Q10<<8));

594 ià(
Al
 > 0 && 
´ed
 >= (1<<Al))

595 
´ed
 = (1<<
Al
)-1;

597 
´ed
 = (è(((
Q10
<<7è- 
num
) / (Q10<<8));

598 ià(
Al
 > 0 && 
´ed
 >= (1<<Al))

599 
´ed
 = (1<<
Al
)-1;

600 
´ed
 = -pred;

602 
wÜk¥aû
[8] = (
JCOEF
è
´ed
;

605 ià((
Al
=
cÛf_b™s
[3]è!ğ0 && 
wÜk¥aû
[16] == 0) {

606 
num
 = 9 * 
Q00
 * (
DC2
 + 
DC8
 - 2*
DC5
);

607 ià(
num
 >= 0) {

608 
´ed
 = (è(((
Q20
<<7è+ 
num
) / (Q20<<8));

609 ià(
Al
 > 0 && 
´ed
 >= (1<<Al))

610 
´ed
 = (1<<
Al
)-1;

612 
´ed
 = (è(((
Q20
<<7è- 
num
) / (Q20<<8));

613 ià(
Al
 > 0 && 
´ed
 >= (1<<Al))

614 
´ed
 = (1<<
Al
)-1;

615 
´ed
 = -pred;

617 
wÜk¥aû
[16] = (
JCOEF
è
´ed
;

620 ià((
Al
=
cÛf_b™s
[4]è!ğ0 && 
wÜk¥aû
[9] == 0) {

621 
num
 = 5 * 
Q00
 * (
DC1
 - 
DC3
 - 
DC7
 + 
DC9
);

622 ià(
num
 >= 0) {

623 
´ed
 = (è(((
Q11
<<7è+ 
num
) / (Q11<<8));

624 ià(
Al
 > 0 && 
´ed
 >= (1<<Al))

625 
´ed
 = (1<<
Al
)-1;

627 
´ed
 = (è(((
Q11
<<7è- 
num
) / (Q11<<8));

628 ià(
Al
 > 0 && 
´ed
 >= (1<<Al))

629 
´ed
 = (1<<
Al
)-1;

630 
´ed
 = -pred;

632 
wÜk¥aû
[9] = (
JCOEF
è
´ed
;

635 ià((
Al
=
cÛf_b™s
[5]è!ğ0 && 
wÜk¥aû
[2] == 0) {

636 
num
 = 9 * 
Q00
 * (
DC4
 + 
DC6
 - 2*
DC5
);

637 ià(
num
 >= 0) {

638 
´ed
 = (è(((
Q02
<<7è+ 
num
) / (Q02<<8));

639 ià(
Al
 > 0 && 
´ed
 >= (1<<Al))

640 
´ed
 = (1<<
Al
)-1;

642 
´ed
 = (è(((
Q02
<<7è- 
num
) / (Q02<<8));

643 ià(
Al
 > 0 && 
´ed
 >= (1<<Al))

644 
´ed
 = (1<<
Al
)-1;

645 
´ed
 = -pred;

647 
wÜk¥aû
[2] = (
JCOEF
è
´ed
;

650 (*
šv”£_DCT
è(
cšfo
, 
comµŒ
, (
JCOEFPTR
è
wÜk¥aû
,

651 
ouut_±r
, 
ouut_cŞ
);

653 
DC1
 = 
DC2
; DC2 = 
DC3
;

654 
DC4
 = 
DC5
; DC5 = 
DC6
;

655 
DC7
 = 
DC8
; DC8 = 
DC9
;

656 
bufãr_±r
++, 
´ev_block_row
++, 
Ãxt_block_row
++;

657 
ouut_cŞ
 +ğ
comµŒ
->
DCT_sÿËd_size
;

659 
ouut_±r
 +ğ
comµŒ
->
DCT_sÿËd_size
;

663 ià(++(
cšfo
->
ouut_iMCU_row
è< cšfo->
tÙ®_iMCU_rows
)

664  
JPEG_ROW_COMPLETED
;

665  
JPEG_SCAN_COMPLETED
;

666 
	}
}

675 
	$GLOBAL
()

676 
	$jš™_d_cÛf_cÚŒŞËr
 (
j_decom´ess_±r
 
cšfo
, 
boŞ—n
 
Ãed_fuÎ_bufãr
)

678 
my_cÛf_±r
 
cÛf
;

680 
cÛf
 = (
my_cÛf_±r
)

681 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

682 
	`SIZEOF
(
my_cÛf_cÚŒŞËr
));

683 
cšfo
->
cÛf
 = (
j³g_d_cÛf_cÚŒŞËr
 *) coef;

684 
cÛf
->
pub
.
¡¬t_šput_·ss
 = start_input_pass;

685 
cÛf
->
pub
.
¡¬t_ouut_·ss
 = start_output_pass;

686 #ifdeà
BLOCK_SMOOTHING_SUPPORTED


687 
cÛf
->
cÛf_b™s_Ïtch
 = 
NULL
;

691 ià(
Ãed_fuÎ_bufãr
) {

692 #ifdeà
D_MULTISCAN_FILES_SUPPORTED


696 
ci
, 
acûss_rows
;

697 
j³g_compÚ’t_šfo
 *
comµŒ
;

699 
ci
 = 0, 
comµŒ
 = 
cšfo
->
comp_šfo
; c˜< cšfo->
num_compÚ’ts
;

700 
ci
++, 
comµŒ
++) {

701 
acûss_rows
 = 
comµŒ
->
v_§mp_çùÜ
;

702 #ifdeà
BLOCK_SMOOTHING_SUPPORTED


704 ià(
cšfo
->
´og»ssive_mode
)

705 
acûss_rows
 *= 3;

707 
cÛf
->
whŞe_image
[
ci
] = (*
cšfo
->
mem
->
»que¡_vœt_b¬¿y
)

708 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
, 
TRUE
,

709 (
JDIMENSION
è
	`jround_up
((è
comµŒ
->
width_š_blocks
,

710 (è
comµŒ
->
h_§mp_çùÜ
),

711 (
JDIMENSION
è
	`jround_up
((è
comµŒ
->
height_š_blocks
,

712 (è
comµŒ
->
v_§mp_çùÜ
),

713 (
JDIMENSION
è
acûss_rows
);

715 
cÛf
->
pub
.
cÚsume_d©a
 = consume_data;

716 
cÛf
->
pub
.
decom´ess_d©a
 = decompress_data;

717 
cÛf
->
pub
.
cÛf_¬¿ys
 = cÛf->
whŞe_image
;

719 
	`ERREXIT
(
cšfo
, 
JERR_NOT_COMPILED
);

723 
JBLOCKROW
 
bufãr
;

724 
i
;

726 
bufãr
 = (
JBLOCKROW
)

727 (*
cšfo
->
mem
->
®loc_Ïrge
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

728 
D_MAX_BLOCKS_IN_MCU
 * 
	`SIZEOF
(
JBLOCK
));

729 
i
 = 0; i < 
D_MAX_BLOCKS_IN_MCU
; i++) {

730 
cÛf
->
MCU_bufãr
[
i
] = 
bufãr
 + i;

732 
cÛf
->
pub
.
cÚsume_d©a
 = 
dummy_cÚsume_d©a
;

733 
cÛf
->
pub
.
decom´ess_d©a
 = 
decom´ess_Ú•ass
;

734 
cÛf
->
pub
.
cÛf_¬¿ys
 = 
NULL
;

736 
	}
}

	@jdcolor.c

11 
	#JPEG_INTERNALS


	)

12 
	~"jšşude.h
"

13 
	~"j³glib.h
"

19 
j³g_cŞÜ_decÚv”‹r
 
	mpub
;

22 * 
	mCr_r_b
;

23 * 
	mCb_b_b
;

24 
INT32
 * 
	mCr_g_b
;

25 
INT32
 * 
	mCb_g_b
;

26 } 
	tmy_cŞÜ_decÚv”‹r
;

28 
my_cŞÜ_decÚv”‹r
 * 
	tmy_ccÚv”t_±r
;

60 
	#SCALEBITS
 16

	)

61 
	#ONE_HALF
 ((
INT32
è1 << (
SCALEBITS
-1))

	)

62 
	#FIX
(
x
è((
INT32
è((xè* (1L<<
SCALEBITS
è+ 0.5))

	)

69 
	$LOCAL
()

70 
	$bud_ycc_rgb_bË
 (
j_decom´ess_±r
 
cšfo
)

72 
my_ccÚv”t_±r
 
ccÚv”t
 = (my_ccÚv”t_±rè
cšfo
->cconvert;

73 
i
;

74 
INT32
 
x
;

75 
SHIFT_TEMPS


77 
ccÚv”t
->
Cr_r_b
 = (*)

78 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

79 (
MAXJSAMPLE
+1è* 
	`SIZEOF
());

80 
ccÚv”t
->
Cb_b_b
 = (*)

81 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

82 (
MAXJSAMPLE
+1è* 
	`SIZEOF
());

83 
ccÚv”t
->
Cr_g_b
 = (
INT32
 *)

84 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

85 (
MAXJSAMPLE
+1è* 
	`SIZEOF
(
INT32
));

86 
ccÚv”t
->
Cb_g_b
 = (
INT32
 *)

87 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

88 (
MAXJSAMPLE
+1è* 
	`SIZEOF
(
INT32
));

90 
i
 = 0, 
x
 = -
CENTERJSAMPLE
; i <ğ
MAXJSAMPLE
; i++, x++) {

94 
ccÚv”t
->
Cr_r_b
[
i
] = ()

95 
	`RIGHT_SHIFT
(
	`FIX
(1.40200è* 
x
 + 
ONE_HALF
, 
SCALEBITS
);

97 
ccÚv”t
->
Cb_b_b
[
i
] = ()

98 
	`RIGHT_SHIFT
(
	`FIX
(1.77200è* 
x
 + 
ONE_HALF
, 
SCALEBITS
);

100 
ccÚv”t
->
Cr_g_b
[
i
] = (- 
	`FIX
(0.71414)è* 
x
;

103 
ccÚv”t
->
Cb_g_b
[
i
] = (- 
	`FIX
(0.34414)è* 
x
 + 
ONE_HALF
;

105 
	}
}

119 
	$METHODDEF
()

120 
	$ycc_rgb_cÚv”t
 (
j_decom´ess_±r
 
cšfo
,

121 
JSAMPIMAGE
 
šput_buf
, 
JDIMENSION
 
šput_row
,

122 
JSAMPARRAY
 
ouut_buf
, 
num_rows
)

124 
my_ccÚv”t_±r
 
ccÚv”t
 = (my_ccÚv”t_±rè
cšfo
->cconvert;

125 
y
, 
cb
, 
ü
;

126 
JSAMPROW
 
ouŒ
;

127 
JSAMPROW
 
š±r0
, 
š±r1
, 
š±r2
;

128 
JDIMENSION
 
cŞ
;

129 
JDIMENSION
 
num_cŞs
 = 
cšfo
->
ouut_width
;

131 
JSAMPLE
 * 
¿nge_lim™
 = 
cšfo
->
§m¶e_¿nge_lim™
;

132 * 
C¼b
 = 
ccÚv”t
->
Cr_r_b
;

133 * 
Cbbb
 = 
ccÚv”t
->
Cb_b_b
;

134 
INT32
 * 
Crgb
 = 
ccÚv”t
->
Cr_g_b
;

135 
INT32
 * 
Cbgb
 = 
ccÚv”t
->
Cb_g_b
;

136 
SHIFT_TEMPS


138 --
num_rows
 >= 0) {

139 
š±r0
 = 
šput_buf
[0][
šput_row
];

140 
š±r1
 = 
šput_buf
[1][
šput_row
];

141 
š±r2
 = 
šput_buf
[2][
šput_row
];

142 
šput_row
++;

143 
ouŒ
 = *
ouut_buf
++;

144 
cŞ
 = 0; cŞ < 
num_cŞs
; col++) {

145 
y
 = 
	`GETJSAMPLE
(
š±r0
[
cŞ
]);

146 
cb
 = 
	`GETJSAMPLE
(
š±r1
[
cŞ
]);

147 
ü
 = 
	`GETJSAMPLE
(
š±r2
[
cŞ
]);

149 
ouŒ
[
RGB_RED
] = 
¿nge_lim™
[
y
 + 
C¼b
[
ü
]];

150 
ouŒ
[
RGB_GREEN
] = 
¿nge_lim™
[
y
 +

151 ((è
	`RIGHT_SHIFT
(
Cbgb
[
cb
] + 
Crgb
[
ü
],

152 
SCALEBITS
))];

153 
ouŒ
[
RGB_BLUE
] = 
¿nge_lim™
[
y
 + 
Cbbb
[
cb
]];

154 
ouŒ
 +ğ
RGB_PIXELSIZE
;

157 
	}
}

168 
	$METHODDEF
()

169 
	$nuÎ_cÚv”t
 (
j_decom´ess_±r
 
cšfo
,

170 
JSAMPIMAGE
 
šput_buf
, 
JDIMENSION
 
šput_row
,

171 
JSAMPARRAY
 
ouut_buf
, 
num_rows
)

173 
JSAMPROW
 
š±r
, 
ouŒ
;

174 
JDIMENSION
 
couÁ
;

175 
num_compÚ’ts
 = 
cšfo
->num_components;

176 
JDIMENSION
 
num_cŞs
 = 
cšfo
->
ouut_width
;

177 
ci
;

179 --
num_rows
 >= 0) {

180 
ci
 = 0; c˜< 
num_compÚ’ts
; ci++) {

181 
š±r
 = 
šput_buf
[
ci
][
šput_row
];

182 
ouŒ
 = 
ouut_buf
[0] + 
ci
;

183 
couÁ
 = 
num_cŞs
; count > 0; count--) {

184 *
ouŒ
 = *
š±r
++;

185 
ouŒ
 +ğ
num_compÚ’ts
;

188 
šput_row
++;

189 
ouut_buf
++;

191 
	}
}

200 
	$METHODDEF
()

201 
	$g¿ysÿË_cÚv”t
 (
j_decom´ess_±r
 
cšfo
,

202 
JSAMPIMAGE
 
šput_buf
, 
JDIMENSION
 
šput_row
,

203 
JSAMPARRAY
 
ouut_buf
, 
num_rows
)

205 
	`jcİy_§m¶e_rows
(
šput_buf
[0], (è
šput_row
, 
ouut_buf
, 0,

206 
num_rows
, 
cšfo
->
ouut_width
);

207 
	}
}

216 
	$METHODDEF
()

217 
	$g¿y_rgb_cÚv”t
 (
j_decom´ess_±r
 
cšfo
,

218 
JSAMPIMAGE
 
šput_buf
, 
JDIMENSION
 
šput_row
,

219 
JSAMPARRAY
 
ouut_buf
, 
num_rows
)

221 
JSAMPROW
 
š±r
, 
ouŒ
;

222 
JDIMENSION
 
cŞ
;

223 
JDIMENSION
 
num_cŞs
 = 
cšfo
->
ouut_width
;

225 --
num_rows
 >= 0) {

226 
š±r
 = 
šput_buf
[0][
šput_row
++];

227 
ouŒ
 = *
ouut_buf
++;

228 
cŞ
 = 0; cŞ < 
num_cŞs
; col++) {

230 
ouŒ
[
RGB_RED
] = ouŒ[
RGB_GREEN
] = ouŒ[
RGB_BLUE
] = 
š±r
[
cŞ
];

231 
ouŒ
 +ğ
RGB_PIXELSIZE
;

234 
	}
}

244 
	$METHODDEF
()

245 
	$ycck_cmyk_cÚv”t
 (
j_decom´ess_±r
 
cšfo
,

246 
JSAMPIMAGE
 
šput_buf
, 
JDIMENSION
 
šput_row
,

247 
JSAMPARRAY
 
ouut_buf
, 
num_rows
)

249 
my_ccÚv”t_±r
 
ccÚv”t
 = (my_ccÚv”t_±rè
cšfo
->cconvert;

250 
y
, 
cb
, 
ü
;

251 
JSAMPROW
 
ouŒ
;

252 
JSAMPROW
 
š±r0
, 
š±r1
, 
š±r2
, 
š±r3
;

253 
JDIMENSION
 
cŞ
;

254 
JDIMENSION
 
num_cŞs
 = 
cšfo
->
ouut_width
;

256 
JSAMPLE
 * 
¿nge_lim™
 = 
cšfo
->
§m¶e_¿nge_lim™
;

257 * 
C¼b
 = 
ccÚv”t
->
Cr_r_b
;

258 * 
Cbbb
 = 
ccÚv”t
->
Cb_b_b
;

259 
INT32
 * 
Crgb
 = 
ccÚv”t
->
Cr_g_b
;

260 
INT32
 * 
Cbgb
 = 
ccÚv”t
->
Cb_g_b
;

261 
SHIFT_TEMPS


263 --
num_rows
 >= 0) {

264 
š±r0
 = 
šput_buf
[0][
šput_row
];

265 
š±r1
 = 
šput_buf
[1][
šput_row
];

266 
š±r2
 = 
šput_buf
[2][
šput_row
];

267 
š±r3
 = 
šput_buf
[3][
šput_row
];

268 
šput_row
++;

269 
ouŒ
 = *
ouut_buf
++;

270 
cŞ
 = 0; cŞ < 
num_cŞs
; col++) {

271 
y
 = 
	`GETJSAMPLE
(
š±r0
[
cŞ
]);

272 
cb
 = 
	`GETJSAMPLE
(
š±r1
[
cŞ
]);

273 
ü
 = 
	`GETJSAMPLE
(
š±r2
[
cŞ
]);

275 
ouŒ
[0] = 
¿nge_lim™
[
MAXJSAMPLE
 - (
y
 + 
C¼b
[
ü
])];

276 
ouŒ
[1] = 
¿nge_lim™
[
MAXJSAMPLE
 - (
y
 +

277 ((è
	`RIGHT_SHIFT
(
Cbgb
[
cb
] + 
Crgb
[
ü
],

278 
SCALEBITS
)))];

279 
ouŒ
[2] = 
¿nge_lim™
[
MAXJSAMPLE
 - (
y
 + 
Cbbb
[
cb
])];

281 
ouŒ
[3] = 
š±r3
[
cŞ
];

282 
ouŒ
 += 4;

285 
	}
}

292 
	$METHODDEF
()

293 
	$¡¬t_·ss_dcŞÜ
 (
j_decom´ess_±r
 
cšfo
)

296 
	}
}

303 
	$GLOBAL
()

304 
	$jš™_cŞÜ_decÚv”‹r
 (
j_decom´ess_±r
 
cšfo
)

306 
my_ccÚv”t_±r
 
ccÚv”t
;

307 
ci
;

309 
ccÚv”t
 = (
my_ccÚv”t_±r
)

310 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

311 
	`SIZEOF
(
my_cŞÜ_decÚv”‹r
));

312 
cšfo
->
ccÚv”t
 = (
j³g_cŞÜ_decÚv”‹r
 *) cconvert;

313 
ccÚv”t
->
pub
.
¡¬t_·ss
 = 
¡¬t_·ss_dcŞÜ
;

316 
cšfo
->
j³g_cŞÜ_¥aû
) {

317 
JCS_GRAYSCALE
:

318 ià(
cšfo
->
num_compÚ’ts
 != 1)

319 
	`ERREXIT
(
cšfo
, 
JERR_BAD_J_COLORSPACE
);

322 
JCS_RGB
:

323 
JCS_YCbCr
:

324 ià(
cšfo
->
num_compÚ’ts
 != 3)

325 
	`ERREXIT
(
cšfo
, 
JERR_BAD_J_COLORSPACE
);

328 
JCS_CMYK
:

329 
JCS_YCCK
:

330 ià(
cšfo
->
num_compÚ’ts
 != 4)

331 
	`ERREXIT
(
cšfo
, 
JERR_BAD_J_COLORSPACE
);

335 ià(
cšfo
->
num_compÚ’ts
 < 1)

336 
	`ERREXIT
(
cšfo
, 
JERR_BAD_J_COLORSPACE
);

345 
cšfo
->
out_cŞÜ_¥aû
) {

346 
JCS_GRAYSCALE
:

347 
cšfo
->
out_cŞÜ_compÚ’ts
 = 1;

348 ià(
cšfo
->
j³g_cŞÜ_¥aû
 =ğ
JCS_GRAYSCALE
 ||

349 
cšfo
->
j³g_cŞÜ_¥aû
 =ğ
JCS_YCbCr
) {

350 
ccÚv”t
->
pub
.
cŞÜ_cÚv”t
 = 
g¿ysÿË_cÚv”t
;

352 
ci
 = 1; c˜< 
cšfo
->
num_compÚ’ts
; ci++)

353 
cšfo
->
comp_šfo
[
ci
].
compÚ’t_Ãeded
 = 
FALSE
;

355 
	`ERREXIT
(
cšfo
, 
JERR_CONVERSION_NOTIMPL
);

358 
JCS_RGB
:

359 
cšfo
->
out_cŞÜ_compÚ’ts
 = 
RGB_PIXELSIZE
;

360 ià(
cšfo
->
j³g_cŞÜ_¥aû
 =ğ
JCS_YCbCr
) {

361 
ccÚv”t
->
pub
.
cŞÜ_cÚv”t
 = 
ycc_rgb_cÚv”t
;

362 
	`bud_ycc_rgb_bË
(
cšfo
);

363 } ià(
cšfo
->
j³g_cŞÜ_¥aû
 =ğ
JCS_GRAYSCALE
) {

364 
ccÚv”t
->
pub
.
cŞÜ_cÚv”t
 = 
g¿y_rgb_cÚv”t
;

365 } ià(
cšfo
->
j³g_cŞÜ_¥aû
 =ğ
JCS_RGB
 && 
RGB_PIXELSIZE
 == 3) {

366 
ccÚv”t
->
pub
.
cŞÜ_cÚv”t
 = 
nuÎ_cÚv”t
;

368 
	`ERREXIT
(
cšfo
, 
JERR_CONVERSION_NOTIMPL
);

371 
JCS_CMYK
:

372 
cšfo
->
out_cŞÜ_compÚ’ts
 = 4;

373 ià(
cšfo
->
j³g_cŞÜ_¥aû
 =ğ
JCS_YCCK
) {

374 
ccÚv”t
->
pub
.
cŞÜ_cÚv”t
 = 
ycck_cmyk_cÚv”t
;

375 
	`bud_ycc_rgb_bË
(
cšfo
);

376 } ià(
cšfo
->
j³g_cŞÜ_¥aû
 =ğ
JCS_CMYK
) {

377 
ccÚv”t
->
pub
.
cŞÜ_cÚv”t
 = 
nuÎ_cÚv”t
;

379 
	`ERREXIT
(
cšfo
, 
JERR_CONVERSION_NOTIMPL
);

384 ià(
cšfo
->
out_cŞÜ_¥aû
 =ğcšfo->
j³g_cŞÜ_¥aû
) {

385 
cšfo
->
out_cŞÜ_compÚ’ts
 = cšfo->
num_compÚ’ts
;

386 
ccÚv”t
->
pub
.
cŞÜ_cÚv”t
 = 
nuÎ_cÚv”t
;

388 
	`ERREXIT
(
cšfo
, 
JERR_CONVERSION_NOTIMPL
);

392 ià(
cšfo
->
quªtize_cŞÜs
)

393 
cšfo
->
ouut_compÚ’ts
 = 1;

395 
cšfo
->
ouut_compÚ’ts
 = cšfo->
out_cŞÜ_compÚ’ts
;

396 
	}
}

	@jdct.h

29 #ià
BITS_IN_JSAMPLE
 == 8

30 
	tDCTELEM
;

32 
INT32
 
	tDCTELEM
;

35 
JMETHOD
(, 
	tfÜw¬d_DCT_m‘hod_±r
, (
	tDCTELEM
 * 
	td©a
));

36 
JMETHOD
(, 
	tæßt_DCT_m‘hod_±r
, (
	tFAST_FLOAT
 * 
	td©a
));

56 
MULTIPLIER
 
	tISLOW_MULT_TYPE
;

57 #ià
BITS_IN_JSAMPLE
 == 8

58 
MULTIPLIER
 
	tIFAST_MULT_TYPE
;

59 
	#IFAST_SCALE_BITS
 2

	)

61 
INT32
 
	tIFAST_MULT_TYPE
;

62 
	#IFAST_SCALE_BITS
 13

	)

64 
FAST_FLOAT
 
	tFLOAT_MULT_TYPE
;

76 
	#IDCT_¿nge_lim™
(
cšfo
è((cšfo)->
§m¶e_¿nge_lim™
 + 
CENTERJSAMPLE
)

	)

78 
	#RANGE_MASK
 (
MAXJSAMPLE
 * 4 + 3è

	)

83 #ifdeà
NEED_SHORT_EXTERNAL_NAMES


84 
	#j³g_fdù_i¦ow
 
jFDi¦ow


	)

85 
	#j³g_fdù_iç¡
 
jFDiç¡


	)

86 
	#j³g_fdù_æßt
 
jFDæßt


	)

87 
	#j³g_idù_i¦ow
 
jRDi¦ow


	)

88 
	#j³g_idù_iç¡
 
jRDiç¡


	)

89 
	#j³g_idù_æßt
 
jRDæßt


	)

90 
	#j³g_idù_4x4
 
jRD4x4


	)

91 
	#j³g_idù_2x2
 
jRD2x2


	)

92 
	#j³g_idù_1x1
 
jRD1x1


	)

97 
	$EXTERN
(è
j³g_fdù_i¦ow
 
	`JPP
((
DCTELEM
 * 
d©a
));

98 
	$EXTERN
(è
j³g_fdù_iç¡
 
	`JPP
((
DCTELEM
 * 
d©a
));

99 
	$EXTERN
(è
j³g_fdù_æßt
 
	`JPP
((
FAST_FLOAT
 * 
d©a
));

101 
	$EXTERN
(è
j³g_idù_i¦ow


102 
	`JPP
((
j_decom´ess_±r
 
cšfo
, 
j³g_compÚ’t_šfo
 * 
comµŒ
,

103 
JCOEFPTR
 
cÛf_block
, 
JSAMPARRAY
 
ouut_buf
, 
JDIMENSION
 
ouut_cŞ
));

104 
	$EXTERN
(è
j³g_idù_iç¡


105 
	`JPP
((
j_decom´ess_±r
 
cšfo
, 
j³g_compÚ’t_šfo
 * 
comµŒ
,

106 
JCOEFPTR
 
cÛf_block
, 
JSAMPARRAY
 
ouut_buf
, 
JDIMENSION
 
ouut_cŞ
));

107 
	$EXTERN
(è
j³g_idù_æßt


108 
	`JPP
((
j_decom´ess_±r
 
cšfo
, 
j³g_compÚ’t_šfo
 * 
comµŒ
,

109 
JCOEFPTR
 
cÛf_block
, 
JSAMPARRAY
 
ouut_buf
, 
JDIMENSION
 
ouut_cŞ
));

110 
	$EXTERN
(è
j³g_idù_4x4


111 
	`JPP
((
j_decom´ess_±r
 
cšfo
, 
j³g_compÚ’t_šfo
 * 
comµŒ
,

112 
JCOEFPTR
 
cÛf_block
, 
JSAMPARRAY
 
ouut_buf
, 
JDIMENSION
 
ouut_cŞ
));

113 
	$EXTERN
(è
j³g_idù_2x2


114 
	`JPP
((
j_decom´ess_±r
 
cšfo
, 
j³g_compÚ’t_šfo
 * 
comµŒ
,

115 
JCOEFPTR
 
cÛf_block
, 
JSAMPARRAY
 
ouut_buf
, 
JDIMENSION
 
ouut_cŞ
));

116 
	$EXTERN
(è
j³g_idù_1x1


117 
	`JPP
((
j_decom´ess_±r
 
cšfo
, 
j³g_compÚ’t_šfo
 * 
comµŒ
,

118 
JCOEFPTR
 
cÛf_block
, 
JSAMPARRAY
 
ouut_buf
, 
JDIMENSION
 
ouut_cŞ
));

131 
	#ONE
 ((
INT32
è1)

	)

132 
	#CONST_SCALE
 (
ONE
 << 
CONST_BITS
)

	)

139 
	#FIX
(
x
è((
INT32
è((xè* 
CONST_SCALE
 + 0.5))

	)

146 
	#DESCALE
(
x
,
n
è
	`RIGHT_SHIFT
((xè+ (
ONE
 << (Ò)-1)),‚)

	)

157 #ifdeà
SHORTxSHORT_32


158 
	#MULTIPLY16C16
(
v¬
,cÚ¡è(((
INT16
è(v¬)è* ((INT16è(cÚ¡)))

	)

160 #ifdeà
SHORTxLCONST_32


161 
	#MULTIPLY16C16
(
v¬
,cÚ¡è(((
INT16
è(v¬)è* ((
INT32
è(cÚ¡)))

	)

164 #iâdeà
MULTIPLY16C16


165 
	#MULTIPLY16C16
(
v¬
,cÚ¡è((v¬è* (cÚ¡))

	)

170 #ifdeà
SHORTxSHORT_32


171 
	#MULTIPLY16V16
(
v¬1
,
v¬2
è(((
INT16
è(v¬1)è* ((INT16è(v¬2)))

	)

174 #iâdeà
MULTIPLY16V16


175 
	#MULTIPLY16V16
(
v¬1
,
v¬2
è((v¬1è* (v¬2))

	)

	@jddctmgr.c

18 
	#JPEG_INTERNALS


	)

19 
	~"jšşude.h
"

20 
	~"j³glib.h
"

21 
	~"jdù.h
"

44 
j³g_šv”£_dù
 
	mpub
;

51 
	mcur_m‘hod
[
MAX_COMPONENTS
];

52 } 
	tmy_idù_cÚŒŞËr
;

54 
my_idù_cÚŒŞËr
 * 
	tmy_idù_±r
;

60 
ISLOW_MULT_TYPE
 
	mi¦ow_¬¿y
[
DCTSIZE2
];

61 #ifdeà
DCT_IFAST_SUPPORTED


62 
IFAST_MULT_TYPE
 
	miç¡_¬¿y
[
DCTSIZE2
];

64 #ifdeà
DCT_FLOAT_SUPPORTED


65 
FLOAT_MULT_TYPE
 
	mæßt_¬¿y
[
DCTSIZE2
];

67 } 
	tmuÉl›r_bË
;

73 #ifdeà
DCT_ISLOW_SUPPORTED


74 
	#PROVIDE_ISLOW_TABLES


	)

76 #ifdeà
IDCT_SCALING_SUPPORTED


77 
	#PROVIDE_ISLOW_TABLES


	)

88 
	$METHODDEF
()

89 
	$¡¬t_·ss
 (
j_decom´ess_±r
 
cšfo
)

91 
my_idù_±r
 
idù
 = (my_idù_±rè
cšfo
->idct;

92 
ci
, 
i
;

93 
j³g_compÚ’t_šfo
 *
comµŒ
;

94 
m‘hod
 = 0;

95 
šv”£_DCT_m‘hod_±r
 
m‘hod_±r
 = 
NULL
;

96 
JQUANT_TBL
 * 
qtbl
;

98 
ci
 = 0, 
comµŒ
 = 
cšfo
->
comp_šfo
; c˜< cšfo->
num_compÚ’ts
;

99 
ci
++, 
comµŒ
++) {

101 
comµŒ
->
DCT_sÿËd_size
) {

102 #ifdeà
IDCT_SCALING_SUPPORTED


104 
m‘hod_±r
 = 
j³g_idù_1x1
;

105 
m‘hod
 = 
JDCT_ISLOW
;

108 
m‘hod_±r
 = 
j³g_idù_2x2
;

109 
m‘hod
 = 
JDCT_ISLOW
;

112 
m‘hod_±r
 = 
j³g_idù_4x4
;

113 
m‘hod
 = 
JDCT_ISLOW
;

116 
DCTSIZE
:

117 
cšfo
->
dù_m‘hod
) {

118 #ifdeà
DCT_ISLOW_SUPPORTED


119 
JDCT_ISLOW
:

120 
m‘hod_±r
 = 
j³g_idù_i¦ow
;

121 
m‘hod
 = 
JDCT_ISLOW
;

124 #ifdeà
DCT_IFAST_SUPPORTED


125 
JDCT_IFAST
:

126 
m‘hod_±r
 = 
j³g_idù_iç¡
;

127 
m‘hod
 = 
JDCT_IFAST
;

130 #ifdeà
DCT_FLOAT_SUPPORTED


131 
JDCT_FLOAT
:

132 
m‘hod_±r
 = 
j³g_idù_æßt
;

133 
m‘hod
 = 
JDCT_FLOAT
;

137 
	`ERREXIT
(
cšfo
, 
JERR_NOT_COMPILED
);

142 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_DCTSIZE
, 
comµŒ
->
DCT_sÿËd_size
);

145 
idù
->
pub
.
šv”£_DCT
[
ci
] = 
m‘hod_±r
;

153 ià(! 
comµŒ
->
compÚ’t_Ãeded
 || 
idù
->
cur_m‘hod
[
ci
] =ğ
m‘hod
)

155 
qtbl
 = 
comµŒ
->
quªt_bË
;

156 ià(
qtbl
 =ğ
NULL
)

158 
idù
->
cur_m‘hod
[
ci
] = 
m‘hod
;

159 
m‘hod
) {

160 #ifdeà
PROVIDE_ISLOW_TABLES


161 
JDCT_ISLOW
:

166 
ISLOW_MULT_TYPE
 * 
ismtbl
 = (ISLOW_MULT_TYPE *è
comµŒ
->
dù_bË
;

167 
i
 = 0; i < 
DCTSIZE2
; i++) {

168 
ismtbl
[
i
] = (
ISLOW_MULT_TYPE
è
qtbl
->
quªtv®
[i];

173 #ifdeà
DCT_IFAST_SUPPORTED


174 
JDCT_IFAST
:

183 
IFAST_MULT_TYPE
 * 
ifmtbl
 = (IFAST_MULT_TYPE *è
comµŒ
->
dù_bË
;

184 
	#CONST_BITS
 14

	)

185 cÚ¡ 
INT16
 
¯nsÿËs
[
DCTSIZE2
] = {

196 
SHIFT_TEMPS


198 
i
 = 0; i < 
DCTSIZE2
; i++) {

199 
ifmtbl
[
i
] = (
IFAST_MULT_TYPE
)

200 
	`DESCALE
(
	`MULTIPLY16V16
((
INT32
è
qtbl
->
quªtv®
[
i
],

201 (
INT32
è
¯nsÿËs
[
i
]),

202 
CONST_BITS
-
IFAST_SCALE_BITS
);

207 #ifdeà
DCT_FLOAT_SUPPORTED


208 
JDCT_FLOAT
:

215 
FLOAT_MULT_TYPE
 * 
fmtbl
 = (FLOAT_MULT_TYPE *è
comµŒ
->
dù_bË
;

216 
row
, 
cŞ
;

217 cÚ¡ 
¯nsÿËçùÜ
[
DCTSIZE
] = {

222 
i
 = 0;

223 
row
 = 0;„ow < 
DCTSIZE
;„ow++) {

224 
cŞ
 = 0; cŞ < 
DCTSIZE
; col++) {

225 
fmtbl
[
i
] = (
FLOAT_MULT_TYPE
)

226 ((è
qtbl
->
quªtv®
[
i
] *

227 
¯nsÿËçùÜ
[
row
] *‡ªsÿËçùÜ[
cŞ
]);

228 
i
++;

235 
	`ERREXIT
(
cšfo
, 
JERR_NOT_COMPILED
);

239 
	}
}

246 
	$GLOBAL
()

247 
	$jš™_šv”£_dù
 (
j_decom´ess_±r
 
cšfo
)

249 
my_idù_±r
 
idù
;

250 
ci
;

251 
j³g_compÚ’t_šfo
 *
comµŒ
;

253 
idù
 = (
my_idù_±r
)

254 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

255 
	`SIZEOF
(
my_idù_cÚŒŞËr
));

256 
cšfo
->
idù
 = (
j³g_šv”£_dù
 *) idct;

257 
idù
->
pub
.
¡¬t_·ss
 = start_pass;

259 
ci
 = 0, 
comµŒ
 = 
cšfo
->
comp_šfo
; c˜< cšfo->
num_compÚ’ts
;

260 
ci
++, 
comµŒ
++) {

262 
comµŒ
->
dù_bË
 =

263 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

264 
	`SIZEOF
(
muÉl›r_bË
));

265 
	`MEMZERO
(
comµŒ
->
dù_bË
, 
	`SIZEOF
(
muÉl›r_bË
));

267 
idù
->
cur_m‘hod
[
ci
] = -1;

269 
	}
}

	@jdhuff.c

17 
	#JPEG_INTERNALS


	)

18 
	~"jšşude.h
"

19 
	~"j³glib.h
"

20 
	~"jdhuff.h
"

31 
	mÏ¡_dc_v®
[
MAX_COMPS_IN_SCAN
];

32 } 
	t§vabË_¡©e
;

39 #iâdeà
NO_STRUCT_ASSIGN


40 
	#ASSIGN_STATE
(
de¡
,
¤c
è((de¡èğ(¤c))

	)

42 #ià
MAX_COMPS_IN_SCAN
 == 4

43 
	#ASSIGN_STATE
(
de¡
,
¤c
) \

44 ((
de¡
).
Ï¡_dc_v®
[0] = (
¤c
).last_dc_val[0], \

45 (
de¡
).
Ï¡_dc_v®
[1] = (
¤c
).last_dc_val[1], \

46 (
de¡
).
Ï¡_dc_v®
[2] = (
¤c
).last_dc_val[2], \

47 (
de¡
).
Ï¡_dc_v®
[3] = (
¤c
).Ï¡_dc_v®[3])

	)

53 
j³g_’Œİy_decod”
 
	mpub
;

58 
b™»ad_³rm_¡©e
 
	mb™¡©e
;

59 
§vabË_¡©e
 
	m§ved
;

62 
	m»¡¬ts_to_go
;

65 
d_d”ived_tbl
 * 
	mdc_d”ived_tbls
[
NUM_HUFF_TBLS
];

66 
d_d”ived_tbl
 * 
	mac_d”ived_tbls
[
NUM_HUFF_TBLS
];

71 
d_d”ived_tbl
 * 
	mdc_cur_tbls
[
D_MAX_BLOCKS_IN_MCU
];

72 
d_d”ived_tbl
 * 
	mac_cur_tbls
[
D_MAX_BLOCKS_IN_MCU
];

74 
boŞ—n
 
	mdc_Ãeded
[
D_MAX_BLOCKS_IN_MCU
];

75 
boŞ—n
 
	mac_Ãeded
[
D_MAX_BLOCKS_IN_MCU
];

76 } 
	thuff_’Œİy_decod”
;

78 
huff_’Œİy_decod”
 * 
	thuff_’Œİy_±r
;

85 
	$METHODDEF
()

86 
	$¡¬t_·ss_huff_decod”
 (
j_decom´ess_±r
 
cšfo
)

88 
huff_’Œİy_±r
 
’Œİy
 = (huff_’Œİy_±rè
cšfo
->entropy;

89 
ci
, 
blkn
, 
dùbl
, 
aùbl
;

90 
j³g_compÚ’t_šfo
 * 
comµŒ
;

96 ià(
cšfo
->
Ss
 !ğ0 || cšfo->
Se
 !ğ
DCTSIZE2
-1 ||

97 
cšfo
->
Ah
 !ğ0 || cšfo->
Al
 != 0)

98 
	`WARNMS
(
cšfo
, 
JWRN_NOT_SEQUENTIAL
);

100 
ci
 = 0; c˜< 
cšfo
->
comps_š_sÿn
; ci++) {

101 
comµŒ
 = 
cšfo
->
cur_comp_šfo
[
ci
];

102 
dùbl
 = 
comµŒ
->
dc_tbl_no
;

103 
aùbl
 = 
comµŒ
->
ac_tbl_no
;

106 
	`j³g_make_d_d”ived_tbl
(
cšfo
, 
TRUE
, 
dùbl
,

107 & 
’Œİy
->
dc_d”ived_tbls
[
dùbl
]);

108 
	`j³g_make_d_d”ived_tbl
(
cšfo
, 
FALSE
, 
aùbl
,

109 & 
’Œİy
->
ac_d”ived_tbls
[
aùbl
]);

111 
’Œİy
->
§ved
.
Ï¡_dc_v®
[
ci
] = 0;

115 
blkn
 = 0; blkÀ< 
cšfo
->
blocks_š_MCU
; blkn++) {

116 
ci
 = 
cšfo
->
MCU_memb”sh
[
blkn
];

117 
comµŒ
 = 
cšfo
->
cur_comp_šfo
[
ci
];

119 
’Œİy
->
dc_cur_tbls
[
blkn
] =ƒÁrİy->
dc_d”ived_tbls
[
comµŒ
->
dc_tbl_no
];

120 
’Œİy
->
ac_cur_tbls
[
blkn
] =ƒÁrİy->
ac_d”ived_tbls
[
comµŒ
->
ac_tbl_no
];

122 ià(
comµŒ
->
compÚ’t_Ãeded
) {

123 
’Œİy
->
dc_Ãeded
[
blkn
] = 
TRUE
;

125 
’Œİy
->
ac_Ãeded
[
blkn
] = (
comµŒ
->
DCT_sÿËd_size
 > 1);

127 
’Œİy
->
dc_Ãeded
[
blkn
] =ƒÁrİy->
ac_Ãeded
[blkn] = 
FALSE
;

132 
’Œİy
->
b™¡©e
.
b™s_Ëá
 = 0;

133 
’Œİy
->
b™¡©e
.
g‘_bufãr
 = 0;

134 
’Œİy
->
pub
.
šsuffic›Á_d©a
 = 
FALSE
;

137 
’Œİy
->
»¡¬ts_to_go
 = 
cšfo
->
»¡¬t_š‹rv®
;

138 
	}
}

148 
	$GLOBAL
()

149 
	$j³g_make_d_d”ived_tbl
 (
j_decom´ess_±r
 
cšfo
, 
boŞ—n
 
isDC
, 
tbÊo
,

150 
d_d”ived_tbl
 ** 
pdtbl
)

152 
JHUFF_TBL
 *
htbl
;

153 
d_d”ived_tbl
 *
dtbl
;

154 
p
, 
i
, 
l
, 
si
, 
numsymbŞs
;

155 
lookb™s
, 
ùr
;

156 
huffsize
[257];

157 
huffcode
[257];

158 
code
;

165 ià(
tbÊo
 < 0 ||bÊØ>ğ
NUM_HUFF_TBLS
)

166 
	`ERREXIT1
(
cšfo
, 
JERR_NO_HUFF_TABLE
, 
tbÊo
);

167 
htbl
 =

168 
isDC
 ? 
cšfo
->
dc_huff_tbl_±rs
[
tbÊo
] : cšfo->
ac_huff_tbl_±rs
[tblno];

169 ià(
htbl
 =ğ
NULL
)

170 
	`ERREXIT1
(
cšfo
, 
JERR_NO_HUFF_TABLE
, 
tbÊo
);

173 ià(*
pdtbl
 =ğ
NULL
)

174 *
pdtbl
 = (
d_d”ived_tbl
 *)

175 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

176 
	`SIZEOF
(
d_d”ived_tbl
));

177 
dtbl
 = *
pdtbl
;

178 
dtbl
->
pub
 = 
htbl
;

182 
p
 = 0;

183 
l
 = 1;† <= 16;†++) {

184 
i
 = (è
htbl
->
b™s
[
l
];

185 ià(
i
 < 0 || 
p
 + i > 256)

186 
	`ERREXIT
(
cšfo
, 
JERR_BAD_HUFF_TABLE
);

187 
i
--)

188 
huffsize
[
p
++] = (è
l
;

190 
huffsize
[
p
] = 0;

191 
numsymbŞs
 = 
p
;

196 
code
 = 0;

197 
si
 = 
huffsize
[0];

198 
p
 = 0;

199 
huffsize
[
p
]) {

200 ((è
huffsize
[
p
]è=ğ
si
) {

201 
huffcode
[
p
++] = 
code
;

202 
code
++;

207 ià(((
INT32
è
code
è>ğ(((INT32è1è<< 
si
))

208 
	`ERREXIT
(
cšfo
, 
JERR_BAD_HUFF_TABLE
);

209 
code
 <<= 1;

210 
si
++;

215 
p
 = 0;

216 
l
 = 1;† <= 16;†++) {

217 ià(
htbl
->
b™s
[
l
]) {

221 
dtbl
->
v®off£t
[
l
] = (
INT32
è
p
 - (INT32è
huffcode
[p];

222 
p
 +ğ
htbl
->
b™s
[
l
];

223 
dtbl
->
maxcode
[
l
] = 
huffcode
[
p
-1];

225 
dtbl
->
maxcode
[
l
] = -1;

228 
dtbl
->
maxcode
[17] = 0xFFFFFL;

237 
	`MEMZERO
(
dtbl
->
look_nb™s
, 
	`SIZEOF
(dtbl->look_nbits));

239 
p
 = 0;

240 
l
 = 1;† <ğ
HUFF_LOOKAHEAD
;†++) {

241 
i
 = 1; i <ğ(è
htbl
->
b™s
[
l
]; i++, 
p
++) {

244 
lookb™s
 = 
huffcode
[
p
] << (
HUFF_LOOKAHEAD
-
l
);

245 
ùr
 = 1 << (
HUFF_LOOKAHEAD
-
l
); ctr > 0; ctr--) {

246 
dtbl
->
look_nb™s
[
lookb™s
] = 
l
;

247 
dtbl
->
look_sym
[
lookb™s
] = 
htbl
->
huffv®
[
p
];

248 
lookb™s
++;

259 ià(
isDC
) {

260 
i
 = 0; i < 
numsymbŞs
; i++) {

261 
sym
 = 
htbl
->
huffv®
[
i
];

262 ià(
sym
 < 0 || sym > 15)

263 
	`ERREXIT
(
cšfo
, 
JERR_BAD_HUFF_TABLE
);

266 
	}
}

284 #ifdeà
SLOW_SHIFT_32


285 
	#MIN_GET_BITS
 15

	)

287 
	#MIN_GET_BITS
 (
BIT_BUF_SIZE
-7)

	)

291 
	$GLOBAL
(
boŞ—n
)

292 
	$j³g_fl_b™_bufãr
 (
b™»ad_wÜkšg_¡©e
 * 
¡©e
,

293 
b™_buf_ty³
 
g‘_bufãr
, 
b™s_Ëá
,

294 
nb™s
)

298 cÚ¡ 
JOCTET
 * 
Ãxt_šput_by‹
 = 
¡©e
->next_input_byte;

299 
size_t
 
by‹s_š_bufãr
 = 
¡©e
->bytes_in_buffer;

300 
j_decom´ess_±r
 
cšfo
 = 
¡©e
->cinfo;

306 ià(
cšfo
->
uÄ—d_m¬k”
 == 0) {

307 
b™s_Ëá
 < 
MIN_GET_BITS
) {

308 
c
;

311 ià(
by‹s_š_bufãr
 == 0) {

312 ià(! (*
cšfo
->
¤c
->
fl_šput_bufãr
) (cinfo))

313  
FALSE
;

314 
Ãxt_šput_by‹
 = 
cšfo
->
¤c
->next_input_byte;

315 
by‹s_š_bufãr
 = 
cšfo
->
¤c
->bytes_in_buffer;

317 
by‹s_š_bufãr
--;

318 
c
 = 
	`GETJOCTET
(*
Ãxt_šput_by‹
++);

321 ià(
c
 == 0xFF) {

328 ià(
by‹s_š_bufãr
 == 0) {

329 ià(! (*
cšfo
->
¤c
->
fl_šput_bufãr
) (cinfo))

330  
FALSE
;

331 
Ãxt_šput_by‹
 = 
cšfo
->
¤c
->next_input_byte;

332 
by‹s_š_bufãr
 = 
cšfo
->
¤c
->bytes_in_buffer;

334 
by‹s_š_bufãr
--;

335 
c
 = 
	`GETJOCTET
(*
Ãxt_šput_by‹
++);

336 } 
c
 == 0xFF);

338 ià(
c
 == 0) {

340 
c
 = 0xFF;

350 
cšfo
->
uÄ—d_m¬k”
 = 
c
;

352 
no_mÜe_by‹s
;

357 
g‘_bufãr
 = (g‘_bufã¸<< 8è| 
c
;

358 
b™s_Ëá
 += 8;

361 
no_mÜe_by‹s
:

366 ià(
nb™s
 > 
b™s_Ëá
) {

372 ià(! 
cšfo
->
’Œİy
->
šsuffic›Á_d©a
) {

373 
	`WARNMS
(
cšfo
, 
JWRN_HIT_MARKER
);

374 
cšfo
->
’Œİy
->
šsuffic›Á_d©a
 = 
TRUE
;

377 
g‘_bufãr
 <<ğ
MIN_GET_BITS
 - 
b™s_Ëá
;

378 
b™s_Ëá
 = 
MIN_GET_BITS
;

383 
¡©e
->
Ãxt_šput_by‹
 =‚ext_input_byte;

384 
¡©e
->
by‹s_š_bufãr
 = bytes_in_buffer;

385 
¡©e
->
g‘_bufãr
 = get_buffer;

386 
¡©e
->
b™s_Ëá
 = bits_left;

388  
TRUE
;

389 
	}
}

397 
	$GLOBAL
()

398 
	$j³g_huff_decode
 (
b™»ad_wÜkšg_¡©e
 * 
¡©e
,

399 
b™_buf_ty³
 
g‘_bufãr
, 
b™s_Ëá
,

400 
d_d”ived_tbl
 * 
htbl
, 
mš_b™s
)

402 
l
 = 
mš_b™s
;

403 
INT32
 
code
;

408 
	`CHECK_BIT_BUFFER
(*
¡©e
, 
l
,  -1);

409 
code
 = 
	`GET_BITS
(
l
);

414 
code
 > 
htbl
->
maxcode
[
l
]) {

415 
code
 <<= 1;

416 
	`CHECK_BIT_BUFFER
(*
¡©e
, 1,  -1);

417 
code
 |ğ
	`GET_BITS
(1);

418 
l
++;

422 
¡©e
->
g‘_bufãr
 = get_buffer;

423 
¡©e
->
b™s_Ëá
 = bits_left;

427 ià(
l
 > 16) {

428 
	`WARNMS
(
¡©e
->
cšfo
, 
JWRN_HUFF_BAD_CODE
);

432  
htbl
->
pub
->
huffv®
[ (è(
code
 + htbl->
v®off£t
[
l
]) ];

433 
	}
}

441 #ifdeà
AVOID_TABLES


443 
	#HUFF_EXTEND
(
x
,
s
è((xè< (1<<((s)-1)è? (xè+ (((-1)<<(s)è+ 1è: (x))

	)

447 
	#HUFF_EXTEND
(
x
,
s
è((xè< 
ex‹nd_‹¡
[s] ? (xè+ 
ex‹nd_off£t
[s] : (x))

	)

449 cÚ¡ 
	gex‹nd_‹¡
[16] =

453 cÚ¡ 
	gex‹nd_off£t
[16] =

467 
	$LOCAL
(
boŞ—n
)

468 
	$´oûss_»¡¬t
 (
j_decom´ess_±r
 
cšfo
)

470 
huff_’Œİy_±r
 
’Œİy
 = (huff_’Œİy_±rè
cšfo
->entropy;

471 
ci
;

475 
cšfo
->
m¬k”
->
disÿrded_by‹s
 +ğ
’Œİy
->
b™¡©e
.
b™s_Ëá
 / 8;

476 
’Œİy
->
b™¡©e
.
b™s_Ëá
 = 0;

479 ià(! (*
cšfo
->
m¬k”
->
»ad_»¡¬t_m¬k”
) (cinfo))

480  
FALSE
;

483 
ci
 = 0; c˜< 
cšfo
->
comps_š_sÿn
; ci++)

484 
’Œİy
->
§ved
.
Ï¡_dc_v®
[
ci
] = 0;

487 
’Œİy
->
»¡¬ts_to_go
 = 
cšfo
->
»¡¬t_š‹rv®
;

494 ià(
cšfo
->
uÄ—d_m¬k”
 == 0)

495 
’Œİy
->
pub
.
šsuffic›Á_d©a
 = 
FALSE
;

497  
TRUE
;

498 
	}
}

516 
	$METHODDEF
(
boŞ—n
)

517 
	$decode_mcu
 (
j_decom´ess_±r
 
cšfo
, 
JBLOCKROW
 *
MCU_d©a
)

519 
huff_’Œİy_±r
 
’Œİy
 = (huff_’Œİy_±rè
cšfo
->entropy;

520 
blkn
;

521 
BITREAD_STATE_VARS
;

522 
§vabË_¡©e
 
¡©e
;

525 ià(
cšfo
->
»¡¬t_š‹rv®
) {

526 ià(
’Œİy
->
»¡¬ts_to_go
 == 0)

527 ià(! 
	`´oûss_»¡¬t
(
cšfo
))

528  
FALSE
;

534 ià(! 
’Œİy
->
pub
.
šsuffic›Á_d©a
) {

537 
	`BITREAD_LOAD_STATE
(
cšfo
,
’Œİy
->
b™¡©e
);

538 
	`ASSIGN_STATE
(
¡©e
, 
’Œİy
->
§ved
);

542 
blkn
 = 0; blkÀ< 
cšfo
->
blocks_š_MCU
; blkn++) {

543 
JBLOCKROW
 
block
 = 
MCU_d©a
[
blkn
];

544 
d_d”ived_tbl
 * 
dùbl
 = 
’Œİy
->
dc_cur_tbls
[
blkn
];

545 
d_d”ived_tbl
 * 
aùbl
 = 
’Œİy
->
ac_cur_tbls
[
blkn
];

546 
s
, 
k
, 
r
;

551 
	`HUFF_DECODE
(
s
, 
br_¡©e
, 
dùbl
,  
FALSE
, 
Ïb–1
);

552 ià(
s
) {

553 
	`CHECK_BIT_BUFFER
(
br_¡©e
, 
s
,  
FALSE
);

554 
r
 = 
	`GET_BITS
(
s
);

555 
s
 = 
	`HUFF_EXTEND
(
r
, s);

558 ià(
’Œİy
->
dc_Ãeded
[
blkn
]) {

560 
ci
 = 
cšfo
->
MCU_memb”sh
[
blkn
];

561 
s
 +ğ
¡©e
.
Ï¡_dc_v®
[
ci
];

562 
¡©e
.
Ï¡_dc_v®
[
ci
] = 
s
;

564 (*
block
)[0] = (
JCOEF
è
s
;

567 ià(
’Œİy
->
ac_Ãeded
[
blkn
]) {

571 
k
 = 1; k < 
DCTSIZE2
; k++) {

572 
	`HUFF_DECODE
(
s
, 
br_¡©e
, 
aùbl
,  
FALSE
, 
Ïb–2
);

574 
r
 = 
s
 >> 4;

575 
s
 &= 15;

577 ià(
s
) {

578 
k
 +ğ
r
;

579 
	`CHECK_BIT_BUFFER
(
br_¡©e
, 
s
,  
FALSE
);

580 
r
 = 
	`GET_BITS
(
s
);

581 
s
 = 
	`HUFF_EXTEND
(
r
, s);

586 (*
block
)[
j³g_Çtu¿l_Üd”
[
k
]] = (
JCOEF
è
s
;

588 ià(
r
 != 15)

590 
k
 += 15;

598 
k
 = 1; k < 
DCTSIZE2
; k++) {

599 
	`HUFF_DECODE
(
s
, 
br_¡©e
, 
aùbl
,  
FALSE
, 
Ïb–3
);

601 
r
 = 
s
 >> 4;

602 
s
 &= 15;

604 ià(
s
) {

605 
k
 +ğ
r
;

606 
	`CHECK_BIT_BUFFER
(
br_¡©e
, 
s
,  
FALSE
);

607 
	`DROP_BITS
(
s
);

609 ià(
r
 != 15)

611 
k
 += 15;

619 
	`BITREAD_SAVE_STATE
(
cšfo
,
’Œİy
->
b™¡©e
);

620 
	`ASSIGN_STATE
(
’Œİy
->
§ved
, 
¡©e
);

624 
’Œİy
->
»¡¬ts_to_go
--;

626  
TRUE
;

627 
	}
}

634 
	$GLOBAL
()

635 
	$jš™_huff_decod”
 (
j_decom´ess_±r
 
cšfo
)

637 
huff_’Œİy_±r
 
’Œİy
;

638 
i
;

640 
’Œİy
 = (
huff_’Œİy_±r
)

641 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

642 
	`SIZEOF
(
huff_’Œİy_decod”
));

643 
cšfo
->
’Œİy
 = (
j³g_’Œİy_decod”
 *)ƒntropy;

644 
’Œİy
->
pub
.
¡¬t_·ss
 = 
¡¬t_·ss_huff_decod”
;

645 
’Œİy
->
pub
.
decode_mcu
 = decode_mcu;

648 
i
 = 0; i < 
NUM_HUFF_TBLS
; i++) {

649 
’Œİy
->
dc_d”ived_tbls
[
i
] =ƒÁrİy->
ac_d”ived_tbls
[i] = 
NULL
;

651 
	}
}

	@jdhuff.h

15 #ifdeà
NEED_SHORT_EXTERNAL_NAMES


16 
	#j³g_make_d_d”ived_tbl
 
jMkDD”ived


	)

17 
	#j³g_fl_b™_bufãr
 
jFB™Buf


	)

18 
	#j³g_huff_decode
 
jHufDecode


	)

24 
	#HUFF_LOOKAHEAD
 8

	)

28 
INT32
 
	mmaxcode
[18];

30 
INT32
 
	mv®off£t
[17];

37 
JHUFF_TBL
 *
	mpub
;

44 
	mlook_nb™s
[1<<
HUFF_LOOKAHEAD
];

45 
UINT8
 
	mlook_sym
[1<<
HUFF_LOOKAHEAD
];

46 } 
	td_d”ived_tbl
;

49 
	$EXTERN
(è
j³g_make_d_d”ived_tbl


50 
	`JPP
((
j_decom´ess_±r
 
cšfo
, 
boŞ—n
 
isDC
, 
tbÊo
,

51 
d_d”ived_tbl
 ** 
pdtbl
));

72 
INT32
 
	tb™_buf_ty³
;

73 
	#BIT_BUF_SIZE
 32

	)

83 
b™_buf_ty³
 
g‘_bufãr
;

84 
b™s_Ëá
;

85 } 
	tb™»ad_³rm_¡©e
;

90 cÚ¡ 
JOCTET
 * 
Ãxt_šput_by‹
;

91 
size_t
 
by‹s_š_bufãr
;

95 
b™_buf_ty³
 
g‘_bufãr
;

96 
b™s_Ëá
;

98 
j_decom´ess_±r
 
cšfo
;

99 } 
	tb™»ad_wÜkšg_¡©e
;

102 
	#BITREAD_STATE_VARS
 \

103 
b™_buf_ty³
 
g‘_bufãr
; \

104 
b™s_Ëá
; \

105 
b™»ad_wÜkšg_¡©e
 
br_¡©e


	)

107 
	#BITREAD_LOAD_STATE
(
cšfİ
,
³rm¡©e
) \

108 
br_¡©e
.
cšfo
 = 
cšfİ
; \

109 
br_¡©e
.
Ãxt_šput_by‹
 = 
cšfİ
->
¤c
->next_input_byte; \

110 
br_¡©e
.
by‹s_š_bufãr
 = 
cšfİ
->
¤c
->bytes_in_buffer; \

111 
g‘_bufãr
 = 
³rm¡©e
.get_buffer; \

112 
b™s_Ëá
 = 
³rm¡©e
.b™s_Ëá;

	)

114 
	#BITREAD_SAVE_STATE
(
cšfİ
,
³rm¡©e
) \

115 
cšfİ
->
¤c
->
Ãxt_šput_by‹
 = 
br_¡©e
.next_input_byte; \

116 
cšfİ
->
¤c
->
by‹s_š_bufãr
 = 
br_¡©e
.bytes_in_buffer; \

117 
³rm¡©e
.
g‘_bufãr
 = get_buffer; \

118 
³rm¡©e
.
b™s_Ëá
 = 
	)
bits_left

138 
	#CHECK_BIT_BUFFER
(
¡©e
,
nb™s
,
aùiÚ
) \

139 { ià(
b™s_Ëá
 < (
nb™s
)) { \

140 ià(! 
	`j³g_fl_b™_bufãr
(&(
¡©e
),
g‘_bufãr
,
b™s_Ëá
,
nb™s
)) \

141 { 
aùiÚ
; } \

142 
g‘_bufãr
 = (
¡©e
).g‘_bufãr; 
b™s_Ëá
 = (¡©e).b™s_Ëá; } 
	}

	)
}

144 
	#GET_BITS
(
nb™s
) \

145 (((è(
g‘_bufãr
 >> (
b™s_Ëá
 -ğ(
nb™s
)))è& ((1<<Òb™s))-1))

	)

147 
	#PEEK_BITS
(
nb™s
) \

148 (((è(
g‘_bufãr
 >> (
b™s_Ëá
 - (
nb™s
)))è& ((1<<Òb™s))-1))

	)

150 
	#DROP_BITS
(
nb™s
) \

151 (
b™s_Ëá
 -ğ(
nb™s
))

	)

154 
	$EXTERN
(
boŞ—n
è
j³g_fl_b™_bufãr


155 
	`JPP
((
b™»ad_wÜkšg_¡©e
 * 
¡©e
, 
b™_buf_ty³
 
g‘_bufãr
,

156 
b™s_Ëá
, 
nb™s
));

176 
	#HUFF_DECODE
(
»suÉ
,
¡©e
,
htbl
,
çaùiÚ
,
¦owÏb–
) \

177 { 
nb
, 
look
; \

178 ià(
b™s_Ëá
 < 
HUFF_LOOKAHEAD
) { \

179 ià(! 
	`j³g_fl_b™_bufãr
(&
¡©e
,
g‘_bufãr
,
b™s_Ëá
, 0)è{
çaùiÚ
;} \

180 
g‘_bufãr
 = 
¡©e
.g‘_bufãr; 
b™s_Ëá
 = state.bits_left; \

181 ià(
b™s_Ëá
 < 
HUFF_LOOKAHEAD
) { \

182 
nb
 = 1; 
¦owÏb–
; \

185 
look
 = 
	`PEEK_BITS
(
HUFF_LOOKAHEAD
); \

186 ià((
nb
 = 
htbl
->
look_nb™s
[
look
]) != 0) { \

187 
	`DROP_BITS
(
nb
); \

188 
»suÉ
 = 
htbl
->
look_sym
[
look
]; \

190 
nb
 = 
HUFF_LOOKAHEAD
+1; \

191 
¦owÏb–
: \

192 ià((
»suÉ
=
	`j³g_huff_decode
(&
¡©e
,
g‘_bufãr
,
b™s_Ëá
,
htbl
,
nb
)) < 0) \

193 { 
çaùiÚ
; } \

194 
g‘_bufãr
 = 
¡©e
.g‘_bufãr; 
b™s_Ëá
 = state.bits_left; \

196 
	}

	)
}

199 
	$EXTERN
(è
j³g_huff_decode


200 
	`JPP
((
b™»ad_wÜkšg_¡©e
 * 
¡©e
, 
b™_buf_ty³
 
g‘_bufãr
,

201 
b™s_Ëá
, 
d_d”ived_tbl
 * 
htbl
, 
mš_b™s
));

	@jdinput.c

14 
	#JPEG_INTERNALS


	)

15 
	~"jšşude.h
"

16 
	~"j³glib.h
"

22 
j³g_šput_cÚŒŞËr
 
	mpub
;

24 
boŞ—n
 
	mšh—d”s
;

25 } 
	tmy_šput_cÚŒŞËr
;

27 
my_šput_cÚŒŞËr
 * 
	tmy_šputùl_±r
;

31 
	$METHODDEF
(è
cÚsume_m¬k”s
 
	`JPP
((
j_decom´ess_±r
 
cšfo
));

38 
	$LOCAL
()

39 
	$š™Ÿl_£tup
 (
j_decom´ess_±r
 
cšfo
)

42 
ci
;

43 
j³g_compÚ’t_šfo
 *
comµŒ
;

46 ià((è
cšfo
->
image_height
 > (è
JPEG_MAX_DIMENSION
 ||

47 (è
cšfo
->
image_width
 > (è
JPEG_MAX_DIMENSION
)

48 
	`ERREXIT1
(
cšfo
, 
JERR_IMAGE_TOO_BIG
, (è
JPEG_MAX_DIMENSION
);

51 ià(
cšfo
->
d©a_´ecisiÚ
 !ğ
BITS_IN_JSAMPLE
)

52 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_PRECISION
, cšfo->
d©a_´ecisiÚ
);

55 ià(
cšfo
->
num_compÚ’ts
 > 
MAX_COMPONENTS
)

56 
	`ERREXIT2
(
cšfo
, 
JERR_COMPONENT_COUNT
, cšfo->
num_compÚ’ts
,

57 
MAX_COMPONENTS
);

60 
cšfo
->
max_h_§mp_çùÜ
 = 1;

61 
cšfo
->
max_v_§mp_çùÜ
 = 1;

62 
ci
 = 0, 
comµŒ
 = 
cšfo
->
comp_šfo
; c˜< cšfo->
num_compÚ’ts
;

63 
ci
++, 
comµŒ
++) {

64 ià(
comµŒ
->
h_§mp_çùÜ
<=0 || comµŒ->h_§mp_çùÜ>
MAX_SAMP_FACTOR
 ||

65 
comµŒ
->
v_§mp_çùÜ
<=0 || comµŒ->v_§mp_çùÜ>
MAX_SAMP_FACTOR
)

66 
	`ERREXIT
(
cšfo
, 
JERR_BAD_SAMPLING
);

67 
cšfo
->
max_h_§mp_çùÜ
 = 
	`MAX
(cinfo->max_h_samp_factor,

68 
comµŒ
->
h_§mp_çùÜ
);

69 
cšfo
->
max_v_§mp_çùÜ
 = 
	`MAX
(cinfo->max_v_samp_factor,

70 
comµŒ
->
v_§mp_çùÜ
);

77 
cšfo
->
mš_DCT_sÿËd_size
 = 
DCTSIZE
;

80 
ci
 = 0, 
comµŒ
 = 
cšfo
->
comp_šfo
; c˜< cšfo->
num_compÚ’ts
;

81 
ci
++, 
comµŒ
++) {

82 
comµŒ
->
DCT_sÿËd_size
 = 
DCTSIZE
;

84 
comµŒ
->
width_š_blocks
 = (
JDIMENSION
)

85 
	`jdiv_round_up
((è
cšfo
->
image_width
 * (è
comµŒ
->
h_§mp_çùÜ
,

86 (è(
cšfo
->
max_h_§mp_çùÜ
 * 
DCTSIZE
));

87 
comµŒ
->
height_š_blocks
 = (
JDIMENSION
)

88 
	`jdiv_round_up
((è
cšfo
->
image_height
 * (è
comµŒ
->
v_§mp_çùÜ
,

89 (è(
cšfo
->
max_v_§mp_çùÜ
 * 
DCTSIZE
));

95 
comµŒ
->
down§m¶ed_width
 = (
JDIMENSION
)

96 
	`jdiv_round_up
((è
cšfo
->
image_width
 * (è
comµŒ
->
h_§mp_çùÜ
,

97 (è
cšfo
->
max_h_§mp_çùÜ
);

98 
comµŒ
->
down§m¶ed_height
 = (
JDIMENSION
)

99 
	`jdiv_round_up
((è
cšfo
->
image_height
 * (è
comµŒ
->
v_§mp_çùÜ
,

100 (è
cšfo
->
max_v_§mp_çùÜ
);

102 
comµŒ
->
compÚ’t_Ãeded
 = 
TRUE
;

104 
comµŒ
->
quªt_bË
 = 
NULL
;

108 
cšfo
->
tÙ®_iMCU_rows
 = (
JDIMENSION
)

109 
	`jdiv_round_up
((è
cšfo
->
image_height
,

110 (è(
cšfo
->
max_v_§mp_çùÜ
*
DCTSIZE
));

113 ià(
cšfo
->
comps_š_sÿn
 < cšfo->
num_compÚ’ts
 || cšfo->
´og»ssive_mode
)

114 
cšfo
->
šputùl
->
has_muÉË_sÿns
 = 
TRUE
;

116 
cšfo
->
šputùl
->
has_muÉË_sÿns
 = 
FALSE
;

117 
	}
}

120 
	$LOCAL
()

121 
	$³r_sÿn_£tup
 (
j_decom´ess_±r
 
cšfo
)

125 
ci
, 
mcublks
, 
tmp
;

126 
j³g_compÚ’t_šfo
 *
comµŒ
;

128 ià(
cšfo
->
comps_š_sÿn
 == 1) {

131 
comµŒ
 = 
cšfo
->
cur_comp_šfo
[0];

134 
cšfo
->
MCUs_³r_row
 = 
comµŒ
->
width_š_blocks
;

135 
cšfo
->
MCU_rows_š_sÿn
 = 
comµŒ
->
height_š_blocks
;

138 
comµŒ
->
MCU_width
 = 1;

139 
comµŒ
->
MCU_height
 = 1;

140 
comµŒ
->
MCU_blocks
 = 1;

141 
comµŒ
->
MCU_§m¶e_width
 = comµŒ->
DCT_sÿËd_size
;

142 
comµŒ
->
Ï¡_cŞ_width
 = 1;

146 
tmp
 = (è(
comµŒ
->
height_š_blocks
 % comµŒ->
v_§mp_çùÜ
);

147 ià(
tmp
 =ğ0ètm°ğ
comµŒ
->
v_§mp_çùÜ
;

148 
comµŒ
->
Ï¡_row_height
 = 
tmp
;

151 
cšfo
->
blocks_š_MCU
 = 1;

152 
cšfo
->
MCU_memb”sh
[0] = 0;

157 ià(
cšfo
->
comps_š_sÿn
 <ğ0 || cšfo->comps_š_sÿÀ> 
MAX_COMPS_IN_SCAN
)

158 
	`ERREXIT2
(
cšfo
, 
JERR_COMPONENT_COUNT
, cšfo->
comps_š_sÿn
,

159 
MAX_COMPS_IN_SCAN
);

162 
cšfo
->
MCUs_³r_row
 = (
JDIMENSION
)

163 
	`jdiv_round_up
((è
cšfo
->
image_width
,

164 (è(
cšfo
->
max_h_§mp_çùÜ
*
DCTSIZE
));

165 
cšfo
->
MCU_rows_š_sÿn
 = (
JDIMENSION
)

166 
	`jdiv_round_up
((è
cšfo
->
image_height
,

167 (è(
cšfo
->
max_v_§mp_çùÜ
*
DCTSIZE
));

169 
cšfo
->
blocks_š_MCU
 = 0;

171 
ci
 = 0; c˜< 
cšfo
->
comps_š_sÿn
; ci++) {

172 
comµŒ
 = 
cšfo
->
cur_comp_šfo
[
ci
];

174 
comµŒ
->
MCU_width
 = comµŒ->
h_§mp_çùÜ
;

175 
comµŒ
->
MCU_height
 = comµŒ->
v_§mp_çùÜ
;

176 
comµŒ
->
MCU_blocks
 = comµŒ->
MCU_width
 * comµŒ->
MCU_height
;

177 
comµŒ
->
MCU_§m¶e_width
 = comµŒ->
MCU_width
 * comµŒ->
DCT_sÿËd_size
;

179 
tmp
 = (è(
comµŒ
->
width_š_blocks
 % comµŒ->
MCU_width
);

180 ià(
tmp
 =ğ0ètm°ğ
comµŒ
->
MCU_width
;

181 
comµŒ
->
Ï¡_cŞ_width
 = 
tmp
;

182 
tmp
 = (è(
comµŒ
->
height_š_blocks
 % comµŒ->
MCU_height
);

183 ià(
tmp
 =ğ0ètm°ğ
comµŒ
->
MCU_height
;

184 
comµŒ
->
Ï¡_row_height
 = 
tmp
;

186 
mcublks
 = 
comµŒ
->
MCU_blocks
;

187 ià(
cšfo
->
blocks_š_MCU
 + 
mcublks
 > 
D_MAX_BLOCKS_IN_MCU
)

188 
	`ERREXIT
(
cšfo
, 
JERR_BAD_MCU_SIZE
);

189 
mcublks
-- > 0) {

190 
cšfo
->
MCU_memb”sh
[cšfo->
blocks_š_MCU
++] = 
ci
;

195 
	}
}

219 
	$LOCAL
()

220 
	$Ïtch_quªt_bËs
 (
j_decom´ess_±r
 
cšfo
)

222 
ci
, 
qtbÊo
;

223 
j³g_compÚ’t_šfo
 *
comµŒ
;

224 
JQUANT_TBL
 * 
qtbl
;

226 
ci
 = 0; c˜< 
cšfo
->
comps_š_sÿn
; ci++) {

227 
comµŒ
 = 
cšfo
->
cur_comp_šfo
[
ci
];

229 ià(
comµŒ
->
quªt_bË
 !ğ
NULL
)

232 
qtbÊo
 = 
comµŒ
->
quªt_tbl_no
;

233 ià(
qtbÊo
 < 0 || qtbÊØ>ğ
NUM_QUANT_TBLS
 ||

234 
cšfo
->
quªt_tbl_±rs
[
qtbÊo
] =ğ
NULL
)

235 
	`ERREXIT1
(
cšfo
, 
JERR_NO_QUANT_TABLE
, 
qtbÊo
);

237 
qtbl
 = (
JQUANT_TBL
 *)

238 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

239 
	`SIZEOF
(
JQUANT_TBL
));

240 
	`MEMCOPY
(
qtbl
, 
cšfo
->
quªt_tbl_±rs
[
qtbÊo
], 
	`SIZEOF
(
JQUANT_TBL
));

241 
comµŒ
->
quªt_bË
 = 
qtbl
;

243 
	}
}

253 
	$METHODDEF
()

254 
	$¡¬t_šput_·ss
 (
j_decom´ess_±r
 
cšfo
)

256 
	`³r_sÿn_£tup
(
cšfo
);

257 
	`Ïtch_quªt_bËs
(
cšfo
);

258 (*
cšfo
->
’Œİy
->
¡¬t_·ss
) (cinfo);

259 (*
cšfo
->
cÛf
->
¡¬t_šput_·ss
) (cinfo);

260 
cšfo
->
šputùl
->
cÚsume_šput
 = cšfo->
cÛf
->
cÚsume_d©a
;

261 
	}
}

270 
	$METHODDEF
()

271 
	$fšish_šput_·ss
 (
j_decom´ess_±r
 
cšfo
)

273 
cšfo
->
šputùl
->
cÚsume_šput
 = 
cÚsume_m¬k”s
;

274 
	}
}

287 
	$METHODDEF
()

288 
	$cÚsume_m¬k”s
 (
j_decom´ess_±r
 
cšfo
)

290 
my_šputùl_±r
 
šputùl
 = (my_šputùl_±rè
cšfo
->inputctl;

291 
v®
;

293 ià(
šputùl
->
pub
.
eoi_»ached
)

294  
JPEG_REACHED_EOI
;

296 
v®
 = (*
cšfo
->
m¬k”
->
»ad_m¬k”s
) (cinfo);

298 
v®
) {

299 
JPEG_REACHED_SOS
:

300 ià(
šputùl
->
šh—d”s
) {

301 
	`š™Ÿl_£tup
(
cšfo
);

302 
šputùl
->
šh—d”s
 = 
FALSE
;

308 ià(! 
šputùl
->
pub
.
has_muÉË_sÿns
)

309 
	`ERREXIT
(
cšfo
, 
JERR_EOI_EXPECTED
);

310 
	`¡¬t_šput_·ss
(
cšfo
);

313 
JPEG_REACHED_EOI
:

314 
šputùl
->
pub
.
eoi_»ached
 = 
TRUE
;

315 ià(
šputùl
->
šh—d”s
) {

316 ià(
cšfo
->
m¬k”
->
§w_SOF
)

317 
	`ERREXIT
(
cšfo
, 
JERR_SOF_NO_SOS
);

322 ià(
cšfo
->
ouut_sÿn_numb”
 > cšfo->
šput_sÿn_numb”
)

323 
cšfo
->
ouut_sÿn_numb”
 = cšfo->
šput_sÿn_numb”
;

326 
JPEG_SUSPENDED
:

330  
v®
;

331 
	}
}

338 
	$METHODDEF
()

339 
	$»£t_šput_cÚŒŞËr
 (
j_decom´ess_±r
 
cšfo
)

341 
my_šputùl_±r
 
šputùl
 = (my_šputùl_±rè
cšfo
->inputctl;

343 
šputùl
->
pub
.
cÚsume_šput
 = 
cÚsume_m¬k”s
;

344 
šputùl
->
pub
.
has_muÉË_sÿns
 = 
FALSE
;

345 
šputùl
->
pub
.
eoi_»ached
 = 
FALSE
;

346 
šputùl
->
šh—d”s
 = 
TRUE
;

348 (*
cšfo
->
”r
->
»£t_”rÜ_mgr
è((
j_commÚ_±r
) cinfo);

349 (*
cšfo
->
m¬k”
->
»£t_m¬k”_»ad”
) (cinfo);

351 
cšfo
->
cÛf_b™s
 = 
NULL
;

352 
	}
}

360 
	$GLOBAL
()

361 
	$jš™_šput_cÚŒŞËr
 (
j_decom´ess_±r
 
cšfo
)

363 
my_šputùl_±r
 
šputùl
;

366 
šputùl
 = (
my_šputùl_±r
)

367 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_PERMANENT
,

368 
	`SIZEOF
(
my_šput_cÚŒŞËr
));

369 
cšfo
->
šputùl
 = (
j³g_šput_cÚŒŞËr
 *) inputctl;

371 
šputùl
->
pub
.
cÚsume_šput
 = 
cÚsume_m¬k”s
;

372 
šputùl
->
pub
.
»£t_šput_cÚŒŞËr
 =„eset_input_controller;

373 
šputùl
->
pub
.
¡¬t_šput_·ss
 = start_input_pass;

374 
šputùl
->
pub
.
fšish_šput_·ss
 = finish_input_pass;

378 
šputùl
->
pub
.
has_muÉË_sÿns
 = 
FALSE
;

379 
šputùl
->
pub
.
eoi_»ached
 = 
FALSE
;

380 
šputùl
->
šh—d”s
 = 
TRUE
;

381 
	}
}

	@jdmainct.c

16 
	#JPEG_INTERNALS


	)

17 
	~"jšşude.h
"

18 
	~"j³glib.h
"

115 
j³g_d_maš_cÚŒŞËr
 
	mpub
;

118 
JSAMPARRAY
 
	mbufãr
[
MAX_COMPONENTS
];

120 
boŞ—n
 
	mbufãr_fuÎ
;

121 
JDIMENSION
 
	mrowgroup_ùr
;

126 
JSAMPIMAGE
 
	mxbufãr
[2];

128 
	mwhich±r
;

129 
	mcÚ‹xt_¡©e
;

130 
JDIMENSION
 
	mrowgroups_ava
;

131 
JDIMENSION
 
	miMCU_row_ùr
;

132 } 
	tmy_maš_cÚŒŞËr
;

134 
my_maš_cÚŒŞËr
 * 
	tmy_maš_±r
;

137 
	#CTX_PREPARE_FOR_IMCU
 0

	)

138 
	#CTX_PROCESS_IMCU
 1

	)

139 
	#CTX_POSTPONED_ROW
 2

	)

143 
	$METHODDEF
(è
´oûss_d©a_sim¶e_maš


144 
	`JPP
((
j_decom´ess_±r
 
cšfo
, 
JSAMPARRAY
 
ouut_buf
,

145 
JDIMENSION
 *
out_row_ùr
, JDIMENSION 
out_rows_ava
));

146 
	$METHODDEF
(è
´oûss_d©a_cÚ‹xt_maš


147 
	`JPP
((
j_decom´ess_±r
 
cšfo
, 
JSAMPARRAY
 
ouut_buf
,

148 
JDIMENSION
 *
out_row_ùr
, JDIMENSION 
out_rows_ava
));

149 #ifdeà
QUANT_2PASS_SUPPORTED


150 
	$METHODDEF
(è
´oûss_d©a_üªk_po¡


151 
	`JPP
((
j_decom´ess_±r
 
cšfo
, 
JSAMPARRAY
 
ouut_buf
,

152 
JDIMENSION
 *
out_row_ùr
, JDIMENSION 
out_rows_ava
));

156 
	$LOCAL
()

157 
	$®loc_fuÂy_poš‹rs
 (
j_decom´ess_±r
 
cšfo
)

162 
my_maš_±r
 
maš
 = (my_maš_±rè
cšfo
->main;

163 
ci
, 
rgroup
;

164 
M
 = 
cšfo
->
mš_DCT_sÿËd_size
;

165 
j³g_compÚ’t_šfo
 *
comµŒ
;

166 
JSAMPARRAY
 
xbuf
;

171 
maš
->
xbufãr
[0] = (
JSAMPIMAGE
)

172 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

173 
cšfo
->
num_compÚ’ts
 * 2 * 
	`SIZEOF
(
JSAMPARRAY
));

174 
maš
->
xbufãr
[1] = maš->xbufãr[0] + 
cšfo
->
num_compÚ’ts
;

176 
ci
 = 0, 
comµŒ
 = 
cšfo
->
comp_šfo
; c˜< cšfo->
num_compÚ’ts
;

177 
ci
++, 
comµŒ
++) {

178 
rgroup
 = (
comµŒ
->
v_§mp_çùÜ
 * comµŒ->
DCT_sÿËd_size
) /

179 
cšfo
->
mš_DCT_sÿËd_size
;

183 
xbuf
 = (
JSAMPARRAY
)

184 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

185 2 * (
rgroup
 * (
M
 + 4)è* 
	`SIZEOF
(
JSAMPROW
));

186 
xbuf
 +ğ
rgroup
;

187 
maš
->
xbufãr
[0][
ci
] = 
xbuf
;

188 
xbuf
 +ğ
rgroup
 * (
M
 + 4);

189 
maš
->
xbufãr
[1][
ci
] = 
xbuf
;

191 
	}
}

194 
	$LOCAL
()

195 
	$make_fuÂy_poš‹rs
 (
j_decom´ess_±r
 
cšfo
)

203 
my_maš_±r
 
maš
 = (my_maš_±rè
cšfo
->main;

204 
ci
, 
i
, 
rgroup
;

205 
M
 = 
cšfo
->
mš_DCT_sÿËd_size
;

206 
j³g_compÚ’t_šfo
 *
comµŒ
;

207 
JSAMPARRAY
 
buf
, 
xbuf0
, 
xbuf1
;

209 
ci
 = 0, 
comµŒ
 = 
cšfo
->
comp_šfo
; c˜< cšfo->
num_compÚ’ts
;

210 
ci
++, 
comµŒ
++) {

211 
rgroup
 = (
comµŒ
->
v_§mp_çùÜ
 * comµŒ->
DCT_sÿËd_size
) /

212 
cšfo
->
mš_DCT_sÿËd_size
;

213 
xbuf0
 = 
maš
->
xbufãr
[0][
ci
];

214 
xbuf1
 = 
maš
->
xbufãr
[1][
ci
];

216 
buf
 = 
maš
->
bufãr
[
ci
];

217 
i
 = 0; i < 
rgroup
 * (
M
 + 2); i++) {

218 
xbuf0
[
i
] = 
xbuf1
[i] = 
buf
[i];

221 
i
 = 0; i < 
rgroup
 * 2; i++) {

222 
xbuf1
[
rgroup
*(
M
-2è+ 
i
] = 
buf
[rgroup*M + i];

223 
xbuf1
[
rgroup
*
M
 + 
i
] = 
buf
[rgroup*(M-2) + i];

230 
i
 = 0; i < 
rgroup
; i++) {

231 
xbuf0
[
i
 - 
rgroup
] = xbuf0[0];

234 
	}
}

237 
	$LOCAL
()

238 
	$£t_w¿·round_poš‹rs
 (
j_decom´ess_±r
 
cšfo
)

243 
my_maš_±r
 
maš
 = (my_maš_±rè
cšfo
->main;

244 
ci
, 
i
, 
rgroup
;

245 
M
 = 
cšfo
->
mš_DCT_sÿËd_size
;

246 
j³g_compÚ’t_šfo
 *
comµŒ
;

247 
JSAMPARRAY
 
xbuf0
, 
xbuf1
;

249 
ci
 = 0, 
comµŒ
 = 
cšfo
->
comp_šfo
; c˜< cšfo->
num_compÚ’ts
;

250 
ci
++, 
comµŒ
++) {

251 
rgroup
 = (
comµŒ
->
v_§mp_çùÜ
 * comµŒ->
DCT_sÿËd_size
) /

252 
cšfo
->
mš_DCT_sÿËd_size
;

253 
xbuf0
 = 
maš
->
xbufãr
[0][
ci
];

254 
xbuf1
 = 
maš
->
xbufãr
[1][
ci
];

255 
i
 = 0; i < 
rgroup
; i++) {

256 
xbuf0
[
i
 - 
rgroup
] = xbuf0[rgroup*(
M
+1) + i];

257 
xbuf1
[
i
 - 
rgroup
] = xbuf1[rgroup*(
M
+1) + i];

258 
xbuf0
[
rgroup
*(
M
+2è+ 
i
] = xbuf0[i];

259 
xbuf1
[
rgroup
*(
M
+2è+ 
i
] = xbuf1[i];

262 
	}
}

265 
	$LOCAL
()

266 
	$£t_bÙtom_poš‹rs
 (
j_decom´ess_±r
 
cšfo
)

272 
my_maš_±r
 
maš
 = (my_maš_±rè
cšfo
->main;

273 
ci
, 
i
, 
rgroup
, 
iMCUheight
, 
rows_Ëá
;

274 
j³g_compÚ’t_šfo
 *
comµŒ
;

275 
JSAMPARRAY
 
xbuf
;

277 
ci
 = 0, 
comµŒ
 = 
cšfo
->
comp_šfo
; c˜< cšfo->
num_compÚ’ts
;

278 
ci
++, 
comµŒ
++) {

280 
iMCUheight
 = 
comµŒ
->
v_§mp_çùÜ
 * comµŒ->
DCT_sÿËd_size
;

281 
rgroup
 = 
iMCUheight
 / 
cšfo
->
mš_DCT_sÿËd_size
;

283 
rows_Ëá
 = (è(
comµŒ
->
down§m¶ed_height
 % (
JDIMENSION
è
iMCUheight
);

284 ià(
rows_Ëá
 =ğ0èrows_Ëá = 
iMCUheight
;

288 ià(
ci
 == 0) {

289 
maš
->
rowgroups_ava
 = (
JDIMENSION
è((
rows_Ëá
-1è/ 
rgroup
 + 1);

294 
xbuf
 = 
maš
->
xbufãr
[maš->
which±r
][
ci
];

295 
i
 = 0; i < 
rgroup
 * 2; i++) {

296 
xbuf
[
rows_Ëá
 + 
i
] = xbuf[rows_left-1];

299 
	}
}

306 
	$METHODDEF
()

307 
	$¡¬t_·ss_maš
 (
j_decom´ess_±r
 
cšfo
, 
J_BUF_MODE
 
·ss_mode
)

309 
my_maš_±r
 
maš
 = (my_maš_±rè
cšfo
->main;

311 
·ss_mode
) {

312 
JBUF_PASS_THRU
:

313 ià(
cšfo
->
up§m¶e
->
Ãed_cÚ‹xt_rows
) {

314 
maš
->
pub
.
´oûss_d©a
 = 
´oûss_d©a_cÚ‹xt_maš
;

315 
	`make_fuÂy_poš‹rs
(
cšfo
);

316 
maš
->
which±r
 = 0;

317 
maš
->
cÚ‹xt_¡©e
 = 
CTX_PREPARE_FOR_IMCU
;

318 
maš
->
iMCU_row_ùr
 = 0;

321 
maš
->
pub
.
´oûss_d©a
 = 
´oûss_d©a_sim¶e_maš
;

323 
maš
->
bufãr_fuÎ
 = 
FALSE
;

324 
maš
->
rowgroup_ùr
 = 0;

326 #ifdeà
QUANT_2PASS_SUPPORTED


327 
JBUF_CRANK_DEST
:

329 
maš
->
pub
.
´oûss_d©a
 = 
´oûss_d©a_üªk_po¡
;

333 
	`ERREXIT
(
cšfo
, 
JERR_BAD_BUFFER_MODE
);

336 
	}
}

344 
	$METHODDEF
()

345 
	$´oûss_d©a_sim¶e_maš
 (
j_decom´ess_±r
 
cšfo
,

346 
JSAMPARRAY
 
ouut_buf
, 
JDIMENSION
 *
out_row_ùr
,

347 
JDIMENSION
 
out_rows_ava
)

349 
my_maš_±r
 
maš
 = (my_maš_±rè
cšfo
->main;

350 
JDIMENSION
 
rowgroups_ava
;

353 ià(! 
maš
->
bufãr_fuÎ
) {

354 ià(! (*
cšfo
->
cÛf
->
decom´ess_d©a
è(cšfo, 
maš
->
bufãr
))

356 
maš
->
bufãr_fuÎ
 = 
TRUE
;

360 
rowgroups_ava
 = (
JDIMENSION
è
cšfo
->
mš_DCT_sÿËd_size
;

367 (*
cšfo
->
po¡
->
po¡_´oûss_d©a
è(cšfo, 
maš
->
bufãr
,

368 &
maš
->
rowgroup_ùr
, 
rowgroups_ava
,

369 
ouut_buf
, 
out_row_ùr
, 
out_rows_ava
);

372 ià(
maš
->
rowgroup_ùr
 >ğ
rowgroups_ava
) {

373 
maš
->
bufãr_fuÎ
 = 
FALSE
;

374 
maš
->
rowgroup_ùr
 = 0;

376 
	}
}

384 
	$METHODDEF
()

385 
	$´oûss_d©a_cÚ‹xt_maš
 (
j_decom´ess_±r
 
cšfo
,

386 
JSAMPARRAY
 
ouut_buf
, 
JDIMENSION
 *
out_row_ùr
,

387 
JDIMENSION
 
out_rows_ava
)

389 
my_maš_±r
 
maš
 = (my_maš_±rè
cšfo
->main;

392 ià(! 
maš
->
bufãr_fuÎ
) {

393 ià(! (*
cšfo
->
cÛf
->
decom´ess_d©a
) (cinfo,

394 
maš
->
xbufãr
[maš->
which±r
]))

396 
maš
->
bufãr_fuÎ
 = 
TRUE
;

397 
maš
->
iMCU_row_ùr
++;

405 
maš
->
cÚ‹xt_¡©e
) {

406 
CTX_POSTPONED_ROW
:

408 (*
cšfo
->
po¡
->
po¡_´oûss_d©a
è(cšfo, 
maš
->
xbufãr
[maš->
which±r
],

409 &
maš
->
rowgroup_ùr
, maš->
rowgroups_ava
,

410 
ouut_buf
, 
out_row_ùr
, 
out_rows_ava
);

411 ià(
maš
->
rowgroup_ùr
 < maš->
rowgroups_ava
)

413 
maš
->
cÚ‹xt_¡©e
 = 
CTX_PREPARE_FOR_IMCU
;

414 ià(*
out_row_ùr
 >ğ
out_rows_ava
)

417 
CTX_PREPARE_FOR_IMCU
:

419 
maš
->
rowgroup_ùr
 = 0;

420 
maš
->
rowgroups_ava
 = (
JDIMENSION
è(
cšfo
->
mš_DCT_sÿËd_size
 - 1);

424 ià(
maš
->
iMCU_row_ùr
 =ğ
cšfo
->
tÙ®_iMCU_rows
)

425 
	`£t_bÙtom_poš‹rs
(
cšfo
);

426 
maš
->
cÚ‹xt_¡©e
 = 
CTX_PROCESS_IMCU
;

428 
CTX_PROCESS_IMCU
:

430 (*
cšfo
->
po¡
->
po¡_´oûss_d©a
è(cšfo, 
maš
->
xbufãr
[maš->
which±r
],

431 &
maš
->
rowgroup_ùr
, maš->
rowgroups_ava
,

432 
ouut_buf
, 
out_row_ùr
, 
out_rows_ava
);

433 ià(
maš
->
rowgroup_ùr
 < maš->
rowgroups_ava
)

436 ià(
maš
->
iMCU_row_ùr
 == 1)

437 
	`£t_w¿·round_poš‹rs
(
cšfo
);

439 
maš
->
which±r
 ^= 1;

440 
maš
->
bufãr_fuÎ
 = 
FALSE
;

443 
maš
->
rowgroup_ùr
 = (
JDIMENSION
è(
cšfo
->
mš_DCT_sÿËd_size
 + 1);

444 
maš
->
rowgroups_ava
 = (
JDIMENSION
è(
cšfo
->
mš_DCT_sÿËd_size
 + 2);

445 
maš
->
cÚ‹xt_¡©e
 = 
CTX_POSTPONED_ROW
;

447 
	}
}

456 #ifdeà
QUANT_2PASS_SUPPORTED


458 
	$METHODDEF
()

459 
	$´oûss_d©a_üªk_po¡
 (
j_decom´ess_±r
 
cšfo
,

460 
JSAMPARRAY
 
ouut_buf
, 
JDIMENSION
 *
out_row_ùr
,

461 
JDIMENSION
 
out_rows_ava
)

463 (*
cšfo
->
po¡
->
po¡_´oûss_d©a
è(cšfo, (
JSAMPIMAGE
è
NULL
,

464 (
JDIMENSION
 *è
NULL
, (JDIMENSION) 0,

465 
ouut_buf
, 
out_row_ùr
, 
out_rows_ava
);

466 
	}
}

475 
	$GLOBAL
()

476 
	$jš™_d_maš_cÚŒŞËr
 (
j_decom´ess_±r
 
cšfo
, 
boŞ—n
 
Ãed_fuÎ_bufãr
)

478 
my_maš_±r
 
maš
;

479 
ci
, 
rgroup
, 
ngroups
;

480 
j³g_compÚ’t_šfo
 *
comµŒ
;

482 
maš
 = (
my_maš_±r
)

483 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

484 
	`SIZEOF
(
my_maš_cÚŒŞËr
));

485 
cšfo
->
maš
 = (
j³g_d_maš_cÚŒŞËr
 *) main;

486 
maš
->
pub
.
¡¬t_·ss
 = 
¡¬t_·ss_maš
;

488 ià(
Ãed_fuÎ_bufãr
)

489 
	`ERREXIT
(
cšfo
, 
JERR_BAD_BUFFER_MODE
);

494 ià(
cšfo
->
up§m¶e
->
Ãed_cÚ‹xt_rows
) {

495 ià(
cšfo
->
mš_DCT_sÿËd_size
 < 2)

496 
	`ERREXIT
(
cšfo
, 
JERR_NOTIMPL
);

497 
	`®loc_fuÂy_poš‹rs
(
cšfo
);

498 
ngroups
 = 
cšfo
->
mš_DCT_sÿËd_size
 + 2;

500 
ngroups
 = 
cšfo
->
mš_DCT_sÿËd_size
;

503 
ci
 = 0, 
comµŒ
 = 
cšfo
->
comp_šfo
; c˜< cšfo->
num_compÚ’ts
;

504 
ci
++, 
comµŒ
++) {

505 
rgroup
 = (
comµŒ
->
v_§mp_çùÜ
 * comµŒ->
DCT_sÿËd_size
) /

506 
cšfo
->
mš_DCT_sÿËd_size
;

507 
maš
->
bufãr
[
ci
] = (*
cšfo
->
mem
->
®loc_§¼ay
)

508 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
,

509 
comµŒ
->
width_š_blocks
 * comµŒ->
DCT_sÿËd_size
,

510 (
JDIMENSION
è(
rgroup
 * 
ngroups
));

512 
	}
}

	@jdmarker.c

15 
	#JPEG_INTERNALS


	)

16 
	~"jšşude.h
"

17 
	~"j³glib.h
"

21 
	mM_SOF0
 = 0xc0,

22 
	mM_SOF1
 = 0xc1,

23 
	mM_SOF2
 = 0xc2,

24 
	mM_SOF3
 = 0xc3,

26 
	mM_SOF5
 = 0xc5,

27 
	mM_SOF6
 = 0xc6,

28 
	mM_SOF7
 = 0xc7,

30 
	mM_JPG
 = 0xc8,

31 
	mM_SOF9
 = 0xc9,

32 
	mM_SOF10
 = 0xca,

33 
	mM_SOF11
 = 0xcb,

35 
	mM_SOF13
 = 0xcd,

36 
	mM_SOF14
 = 0xce,

37 
	mM_SOF15
 = 0xcf,

39 
	mM_DHT
 = 0xc4,

41 
	mM_DAC
 = 0xcc,

43 
	mM_RST0
 = 0xd0,

44 
	mM_RST1
 = 0xd1,

45 
	mM_RST2
 = 0xd2,

46 
	mM_RST3
 = 0xd3,

47 
	mM_RST4
 = 0xd4,

48 
	mM_RST5
 = 0xd5,

49 
	mM_RST6
 = 0xd6,

50 
	mM_RST7
 = 0xd7,

52 
	mM_SOI
 = 0xd8,

53 
	mM_EOI
 = 0xd9,

54 
	mM_SOS
 = 0xda,

55 
	mM_DQT
 = 0xdb,

56 
	mM_DNL
 = 0xdc,

57 
	mM_DRI
 = 0xdd,

58 
	mM_DHP
 = 0xde,

59 
	mM_EXP
 = 0xdf,

61 
	mM_APP0
 = 0xe0,

62 
	mM_APP1
 = 0xe1,

63 
	mM_APP2
 = 0xe2,

64 
	mM_APP3
 = 0xe3,

65 
	mM_APP4
 = 0xe4,

66 
	mM_APP5
 = 0xe5,

67 
	mM_APP6
 = 0xe6,

68 
	mM_APP7
 = 0xe7,

69 
	mM_APP8
 = 0xe8,

70 
	mM_APP9
 = 0xe9,

71 
	mM_APP10
 = 0xea,

72 
	mM_APP11
 = 0xeb,

73 
	mM_APP12
 = 0xec,

74 
	mM_APP13
 = 0xed,

75 
	mM_APP14
 = 0xee,

76 
	mM_APP15
 = 0xef,

78 
	mM_JPG0
 = 0xf0,

79 
	mM_JPG13
 = 0xfd,

80 
	mM_COM
 = 0xfe,

82 
	mM_TEM
 = 0x01,

84 
	mM_ERROR
 = 0x100

85 } 
	tJPEG_MARKER
;

91 
j³g_m¬k”_»ad”
 
	mpub
;

94 
j³g_m¬k”_·r£r_m‘hod
 
	m´oûss_COM
;

95 
j³g_m¬k”_·r£r_m‘hod
 
	m´oûss_APPn
[16];

98 
	mËngth_lim™_COM
;

99 
	mËngth_lim™_APPn
[16];

102 
j³g_§ved_m¬k”_±r
 
	mcur_m¬k”
;

103 
	mby‹s_»ad
;

105 } 
	tmy_m¬k”_»ad”
;

107 
my_m¬k”_»ad”
 * 
	tmy_m¬k”_±r
;

119 
	#INPUT_VARS
(
cšfo
) \

120 
j³g_sourû_mgr
 * 
d©a¤c
 = (
cšfo
)->
¤c
; \

121 cÚ¡ 
JOCTET
 * 
Ãxt_šput_by‹
 = 
d©a¤c
->next_input_byte; \

122 
size_t
 
by‹s_š_bufãr
 = 
d©a¤c
->
	)
bytes_in_buffer

125 
	#INPUT_SYNC
(
cšfo
) \

126 Ğ
d©a¤c
->
Ãxt_šput_by‹
 =‚ext_input_byte, \

127 
d©a¤c
->
by‹s_š_bufãr
 = by‹s_š_bufã¸)

	)

130 
	#INPUT_RELOAD
(
cšfo
) \

131 Ğ
Ãxt_šput_by‹
 = 
d©a¤c
->next_input_byte, \

132 
by‹s_š_bufãr
 = 
d©a¤c
->by‹s_š_bufã¸)

	)

138 
	#MAKE_BYTE_AVAIL
(
cšfo
,
aùiÚ
) \

139 ià(
by‹s_š_bufãr
 == 0) { \

140 ià(! (*
d©a¤c
->
fl_šput_bufãr
è(
cšfo
)) \

141 { 
aùiÚ
; } \

142 
	`INPUT_RELOAD
(
cšfo
); \

143 }

	)

148 
	#INPUT_BYTE
(
cšfo
,
V
,
aùiÚ
) \

149 
	`MAKESTMT
Ğ
	`MAKE_BYTE_AVAIL
(
cšfo
,
aùiÚ
); \

150 
by‹s_š_bufãr
--; \

151 
V
 = 
	`GETJOCTET
(*
Ãxt_šput_by‹
++); )

	)

156 
	#INPUT_2BYTES
(
cšfo
,
V
,
aùiÚ
) \

157 
	`MAKESTMT
Ğ
	`MAKE_BYTE_AVAIL
(
cšfo
,
aùiÚ
); \

158 
by‹s_š_bufãr
--; \

159 
V
 = ((è
	`GETJOCTET
(*
Ãxt_šput_by‹
++)) << 8; \

160 
	`MAKE_BYTE_AVAIL
(
cšfo
,
aùiÚ
); \

161 
by‹s_š_bufãr
--; \

162 
V
 +ğ
	`GETJOCTET
(*
Ãxt_šput_by‹
++); )

	)

196 
	$LOCAL
(
boŞ—n
)

197 
	$g‘_soi
 (
j_decom´ess_±r
 
cšfo
)

200 
i
;

202 
	`TRACEMS
(
cšfo
, 1, 
JTRC_SOI
);

204 ià(
cšfo
->
m¬k”
->
§w_SOI
)

205 
	`ERREXIT
(
cšfo
, 
JERR_SOI_DUPLICATE
);

209 
i
 = 0; i < 
NUM_ARITH_TBLS
; i++) {

210 
cšfo
->
¬™h_dc_L
[
i
] = 0;

211 
cšfo
->
¬™h_dc_U
[
i
] = 1;

212 
cšfo
->
¬™h_ac_K
[
i
] = 5;

214 
cšfo
->
»¡¬t_š‹rv®
 = 0;

218 
cšfo
->
j³g_cŞÜ_¥aû
 = 
JCS_UNKNOWN
;

219 
cšfo
->
CCIR601_§m¶šg
 = 
FALSE
;

221 
cšfo
->
§w_JFIF_m¬k”
 = 
FALSE
;

222 
cšfo
->
JFIF_majÜ_v”siÚ
 = 1;

223 
cšfo
->
JFIF_mšÜ_v”siÚ
 = 1;

224 
cšfo
->
d’s™y_un™
 = 0;

225 
cšfo
->
X_d’s™y
 = 1;

226 
cšfo
->
Y_d’s™y
 = 1;

227 
cšfo
->
§w_Adobe_m¬k”
 = 
FALSE
;

228 
cšfo
->
Adobe_ŒªsfÜm
 = 0;

230 
cšfo
->
m¬k”
->
§w_SOI
 = 
TRUE
;

232  
TRUE
;

233 
	}
}

236 
	$LOCAL
(
boŞ—n
)

237 
	$g‘_sof
 (
j_decom´ess_±r
 
cšfo
, 
boŞ—n
 
is_´og
, boŞ—À
is_¬™h
)

240 
INT32
 
Ëngth
;

241 
c
, 
ci
;

242 
j³g_compÚ’t_šfo
 * 
comµŒ
;

243 
	`INPUT_VARS
(
cšfo
);

245 
cšfo
->
´og»ssive_mode
 = 
is_´og
;

246 
cšfo
->
¬™h_code
 = 
is_¬™h
;

248 
	`INPUT_2BYTES
(
cšfo
, 
Ëngth
,  
FALSE
);

250 
	`INPUT_BYTE
(
cšfo
, cšfo->
d©a_´ecisiÚ
,  
FALSE
);

251 
	`INPUT_2BYTES
(
cšfo
, cšfo->
image_height
,  
FALSE
);

252 
	`INPUT_2BYTES
(
cšfo
, cšfo->
image_width
,  
FALSE
);

253 
	`INPUT_BYTE
(
cšfo
, cšfo->
num_compÚ’ts
,  
FALSE
);

255 
Ëngth
 -= 8;

257 
	`TRACEMS4
(
cšfo
, 1, 
JTRC_SOF
, cšfo->
uÄ—d_m¬k”
,

258 (è
cšfo
->
image_width
, (ècšfo->
image_height
,

259 
cšfo
->
num_compÚ’ts
);

261 ià(
cšfo
->
m¬k”
->
§w_SOF
)

262 
	`ERREXIT
(
cšfo
, 
JERR_SOF_DUPLICATE
);

267 ià(
cšfo
->
image_height
 <ğ0 || cšfo->
image_width
 <= 0

268 || 
cšfo
->
num_compÚ’ts
 <= 0)

269 
	`ERREXIT
(
cšfo
, 
JERR_EMPTY_IMAGE
);

271 ià(
Ëngth
 !ğ(
cšfo
->
num_compÚ’ts
 * 3))

272 
	`ERREXIT
(
cšfo
, 
JERR_BAD_LENGTH
);

274 ià(
cšfo
->
comp_šfo
 =ğ
NULL
)

275 
cšfo
->
comp_šfo
 = (
j³g_compÚ’t_šfo
 *è(*cšfo->
mem
->
®loc_sm®l
)

276 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
,

277 
cšfo
->
num_compÚ’ts
 * 
	`SIZEOF
(
j³g_compÚ’t_šfo
));

279 
ci
 = 0, 
comµŒ
 = 
cšfo
->
comp_šfo
; c˜< cšfo->
num_compÚ’ts
;

280 
ci
++, 
comµŒ
++) {

281 
comµŒ
->
compÚ’t_šdex
 = 
ci
;

282 
	`INPUT_BYTE
(
cšfo
, 
comµŒ
->
compÚ’t_id
,  
FALSE
);

283 
	`INPUT_BYTE
(
cšfo
, 
c
,  
FALSE
);

284 
comµŒ
->
h_§mp_çùÜ
 = (
c
 >> 4) & 15;

285 
comµŒ
->
v_§mp_çùÜ
 = (
c
 ) & 15;

286 
	`INPUT_BYTE
(
cšfo
, 
comµŒ
->
quªt_tbl_no
,  
FALSE
);

288 
	`TRACEMS4
(
cšfo
, 1, 
JTRC_SOF_COMPONENT
,

289 
comµŒ
->
compÚ’t_id
, comµŒ->
h_§mp_çùÜ
,

290 
comµŒ
->
v_§mp_çùÜ
, comµŒ->
quªt_tbl_no
);

293 
cšfo
->
m¬k”
->
§w_SOF
 = 
TRUE
;

295 
	`INPUT_SYNC
(
cšfo
);

296  
TRUE
;

297 
	}
}

300 
	$LOCAL
(
boŞ—n
)

301 
	$g‘_sos
 (
j_decom´ess_±r
 
cšfo
)

304 
INT32
 
Ëngth
;

305 
i
, 
ci
, 
n
, 
c
, 
cc
;

306 
j³g_compÚ’t_šfo
 * 
comµŒ
;

307 
	`INPUT_VARS
(
cšfo
);

309 ià(! 
cšfo
->
m¬k”
->
§w_SOF
)

310 
	`ERREXIT
(
cšfo
, 
JERR_SOS_NO_SOF
);

312 
	`INPUT_2BYTES
(
cšfo
, 
Ëngth
,  
FALSE
);

314 
	`INPUT_BYTE
(
cšfo
, 
n
,  
FALSE
);

316 
	`TRACEMS1
(
cšfo
, 1, 
JTRC_SOS
, 
n
);

318 ià(
Ëngth
 !ğ(
n
 * 2 + 6è||‚ < 1 ||‚ > 
MAX_COMPS_IN_SCAN
)

319 
	`ERREXIT
(
cšfo
, 
JERR_BAD_LENGTH
);

321 
cšfo
->
comps_š_sÿn
 = 
n
;

325 
i
 = 0; i < 
n
; i++) {

326 
	`INPUT_BYTE
(
cšfo
, 
cc
,  
FALSE
);

327 
	`INPUT_BYTE
(
cšfo
, 
c
,  
FALSE
);

329 
ci
 = 0, 
comµŒ
 = 
cšfo
->
comp_šfo
; c˜< cšfo->
num_compÚ’ts
;

330 
ci
++, 
comµŒ
++) {

331 ià(
cc
 =ğ
comµŒ
->
compÚ’t_id
)

332 
id_found
;

335 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_COMPONENT_ID
, 
cc
);

337 
id_found
:

339 
cšfo
->
cur_comp_šfo
[
i
] = 
comµŒ
;

340 
comµŒ
->
dc_tbl_no
 = (
c
 >> 4) & 15;

341 
comµŒ
->
ac_tbl_no
 = (
c
 ) & 15;

343 
	`TRACEMS3
(
cšfo
, 1, 
JTRC_SOS_COMPONENT
, 
cc
,

344 
comµŒ
->
dc_tbl_no
, comµŒ->
ac_tbl_no
);

348 
	`INPUT_BYTE
(
cšfo
, 
c
,  
FALSE
);

349 
cšfo
->
Ss
 = 
c
;

350 
	`INPUT_BYTE
(
cšfo
, 
c
,  
FALSE
);

351 
cšfo
->
Se
 = 
c
;

352 
	`INPUT_BYTE
(
cšfo
, 
c
,  
FALSE
);

353 
cšfo
->
Ah
 = (
c
 >> 4) & 15;

354 
cšfo
->
Al
 = (
c
 ) & 15;

356 
	`TRACEMS4
(
cšfo
, 1, 
JTRC_SOS_PARAMS
, cšfo->
Ss
, cšfo->
Se
,

357 
cšfo
->
Ah
, cšfo->
Al
);

360 
cšfo
->
m¬k”
->
Ãxt_»¡¬t_num
 = 0;

363 
cšfo
->
šput_sÿn_numb”
++;

365 
	`INPUT_SYNC
(
cšfo
);

366  
TRUE
;

367 
	}
}

370 #ifdeà
D_ARITH_CODING_SUPPORTED


372 
	$LOCAL
(
boŞ—n
)

373 
	$g‘_dac
 (
j_decom´ess_±r
 
cšfo
)

376 
INT32
 
Ëngth
;

377 
šdex
, 
v®
;

378 
	`INPUT_VARS
(
cšfo
);

380 
	`INPUT_2BYTES
(
cšfo
, 
Ëngth
,  
FALSE
);

381 
Ëngth
 -= 2;

383 
Ëngth
 > 0) {

384 
	`INPUT_BYTE
(
cšfo
, 
šdex
,  
FALSE
);

385 
	`INPUT_BYTE
(
cšfo
, 
v®
,  
FALSE
);

387 
Ëngth
 -= 2;

389 
	`TRACEMS2
(
cšfo
, 1, 
JTRC_DAC
, 
šdex
, 
v®
);

391 ià(
šdex
 < 0 || index >ğ(2*
NUM_ARITH_TBLS
))

392 
	`ERREXIT1
(
cšfo
, 
JERR_DAC_INDEX
, 
šdex
);

394 ià(
šdex
 >ğ
NUM_ARITH_TBLS
) {

395 
cšfo
->
¬™h_ac_K
[
šdex
-
NUM_ARITH_TBLS
] = (
UINT8
è
v®
;

397 
cšfo
->
¬™h_dc_L
[
šdex
] = (
UINT8
è(
v®
 & 0x0F);

398 
cšfo
->
¬™h_dc_U
[
šdex
] = (
UINT8
è(
v®
 >> 4);

399 ià(
cšfo
->
¬™h_dc_L
[
šdex
] > cšfo->
¬™h_dc_U
[index])

400 
	`ERREXIT1
(
cšfo
, 
JERR_DAC_VALUE
, 
v®
);

404 ià(
Ëngth
 != 0)

405 
	`ERREXIT
(
cšfo
, 
JERR_BAD_LENGTH
);

407 
	`INPUT_SYNC
(
cšfo
);

408  
TRUE
;

409 
	}
}

413 
	#g‘_dac
(
cšfo
è
	`sk_v¬ŸbË
(cšfo)

	)

418 
	$LOCAL
(
boŞ—n
)

419 
	$g‘_dht
 (
j_decom´ess_±r
 
cšfo
)

422 
INT32
 
Ëngth
;

423 
UINT8
 
b™s
[17];

424 
UINT8
 
huffv®
[256];

425 
i
, 
šdex
, 
couÁ
;

426 
JHUFF_TBL
 **
htbÍŒ
;

427 
	`INPUT_VARS
(
cšfo
);

429 
	`INPUT_2BYTES
(
cšfo
, 
Ëngth
,  
FALSE
);

430 
Ëngth
 -= 2;

432 
Ëngth
 > 16) {

433 
	`INPUT_BYTE
(
cšfo
, 
šdex
,  
FALSE
);

435 
	`TRACEMS1
(
cšfo
, 1, 
JTRC_DHT
, 
šdex
);

437 
b™s
[0] = 0;

438 
couÁ
 = 0;

439 
i
 = 1; i <= 16; i++) {

440 
	`INPUT_BYTE
(
cšfo
, 
b™s
[
i
],  
FALSE
);

441 
couÁ
 +ğ
b™s
[
i
];

444 
Ëngth
 -= 1 + 16;

446 
	`TRACEMS8
(
cšfo
, 2, 
JTRC_HUFFBITS
,

447 
b™s
[1], bits[2], bits[3], bits[4],

448 
b™s
[5], bits[6], bits[7], bits[8]);

449 
	`TRACEMS8
(
cšfo
, 2, 
JTRC_HUFFBITS
,

450 
b™s
[9], bits[10], bits[11], bits[12],

451 
b™s
[13], bits[14], bits[15], bits[16]);

456 ià(
couÁ
 > 256 || ((
INT32
ècouÁè> 
Ëngth
)

457 
	`ERREXIT
(
cšfo
, 
JERR_BAD_HUFF_TABLE
);

459 
i
 = 0; i < 
couÁ
; i++)

460 
	`INPUT_BYTE
(
cšfo
, 
huffv®
[
i
],  
FALSE
);

462 
Ëngth
 -ğ
couÁ
;

464 ià(
šdex
 & 0x10) {

465 
šdex
 -= 0x10;

466 
htbÍŒ
 = &
cšfo
->
ac_huff_tbl_±rs
[
šdex
];

468 
htbÍŒ
 = &
cšfo
->
dc_huff_tbl_±rs
[
šdex
];

471 ià(
šdex
 < 0 || index >ğ
NUM_HUFF_TBLS
)

472 
	`ERREXIT1
(
cšfo
, 
JERR_DHT_INDEX
, 
šdex
);

474 ià(*
htbÍŒ
 =ğ
NULL
)

475 *
htbÍŒ
 = 
	`j³g_®loc_huff_bË
((
j_commÚ_±r
è
cšfo
);

477 
	`MEMCOPY
((*
htbÍŒ
)->
b™s
, b™s, 
	`SIZEOF
((*htblptr)->bits));

478 
	`MEMCOPY
((*
htbÍŒ
)->
huffv®
, huffv®, 
	`SIZEOF
((*htblptr)->huffval));

481 ià(
Ëngth
 != 0)

482 
	`ERREXIT
(
cšfo
, 
JERR_BAD_LENGTH
);

484 
	`INPUT_SYNC
(
cšfo
);

485  
TRUE
;

486 
	}
}

489 
	$LOCAL
(
boŞ—n
)

490 
	$g‘_dqt
 (
j_decom´ess_±r
 
cšfo
)

493 
INT32
 
Ëngth
;

494 
n
, 
i
, 
´ec
;

495 
tmp
;

496 
JQUANT_TBL
 *
quªt_±r
;

497 
	`INPUT_VARS
(
cšfo
);

499 
	`INPUT_2BYTES
(
cšfo
, 
Ëngth
,  
FALSE
);

500 
Ëngth
 -= 2;

502 
Ëngth
 > 0) {

503 
	`INPUT_BYTE
(
cšfo
, 
n
,  
FALSE
);

504 
´ec
 = 
n
 >> 4;

505 
n
 &= 0x0F;

507 
	`TRACEMS2
(
cšfo
, 1, 
JTRC_DQT
, 
n
, 
´ec
);

509 ià(
n
 >ğ
NUM_QUANT_TBLS
)

510 
	`ERREXIT1
(
cšfo
, 
JERR_DQT_INDEX
, 
n
);

512 ià(
cšfo
->
quªt_tbl_±rs
[
n
] =ğ
NULL
)

513 
cšfo
->
quªt_tbl_±rs
[
n
] = 
	`j³g_®loc_quªt_bË
((
j_commÚ_±r
) cinfo);

514 
quªt_±r
 = 
cšfo
->
quªt_tbl_±rs
[
n
];

516 
i
 = 0; i < 
DCTSIZE2
; i++) {

517 ià(
´ec
)

518 
	`INPUT_2BYTES
(
cšfo
, 
tmp
,  
FALSE
);

520 
	`INPUT_BYTE
(
cšfo
, 
tmp
,  
FALSE
);

522 
quªt_±r
->
quªtv®
[
j³g_Çtu¿l_Üd”
[
i
]] = (
UINT16
è
tmp
;

525 ià(
cšfo
->
”r
->
Œaû_Ëv–
 >= 2) {

526 
i
 = 0; i < 
DCTSIZE2
; i += 8) {

527 
	`TRACEMS8
(
cšfo
, 2, 
JTRC_QUANTVALS
,

528 
quªt_±r
->
quªtv®
[
i
], quant_ptr->quantval[i+1],

529 
quªt_±r
->
quªtv®
[
i
+2], quant_ptr->quantval[i+3],

530 
quªt_±r
->
quªtv®
[
i
+4], quant_ptr->quantval[i+5],

531 
quªt_±r
->
quªtv®
[
i
+6], quant_ptr->quantval[i+7]);

535 
Ëngth
 -ğ
DCTSIZE2
+1;

536 ià(
´ec
è
Ëngth
 -ğ
DCTSIZE2
;

539 ià(
Ëngth
 != 0)

540 
	`ERREXIT
(
cšfo
, 
JERR_BAD_LENGTH
);

542 
	`INPUT_SYNC
(
cšfo
);

543  
TRUE
;

544 
	}
}

547 
	$LOCAL
(
boŞ—n
)

548 
	$g‘_dri
 (
j_decom´ess_±r
 
cšfo
)

551 
INT32
 
Ëngth
;

552 
tmp
;

553 
	`INPUT_VARS
(
cšfo
);

555 
	`INPUT_2BYTES
(
cšfo
, 
Ëngth
,  
FALSE
);

557 ià(
Ëngth
 != 4)

558 
	`ERREXIT
(
cšfo
, 
JERR_BAD_LENGTH
);

560 
	`INPUT_2BYTES
(
cšfo
, 
tmp
,  
FALSE
);

562 
	`TRACEMS1
(
cšfo
, 1, 
JTRC_DRI
, 
tmp
);

564 
cšfo
->
»¡¬t_š‹rv®
 = 
tmp
;

566 
	`INPUT_SYNC
(
cšfo
);

567  
TRUE
;

568 
	}
}

578 
	#APP0_DATA_LEN
 14

	)

579 
	#APP14_DATA_LEN
 12

	)

580 
	#APPN_DATA_LEN
 14

	)

583 
	$LOCAL
()

584 
	$examše_­p0
 (
j_decom´ess_±r
 
cšfo
, 
JOCTET
 
FAR
 * 
d©a
,

585 
d©®’
, 
INT32
 
»maššg
)

591 
INT32
 
tÙ®Ën
 = (INT32è
d©®’
 + 
»maššg
;

593 ià(
d©®’
 >ğ
APP0_DATA_LEN
 &&

594 
	`GETJOCTET
(
d©a
[0]) == 0x4A &&

595 
	`GETJOCTET
(
d©a
[1]) == 0x46 &&

596 
	`GETJOCTET
(
d©a
[2]) == 0x49 &&

597 
	`GETJOCTET
(
d©a
[3]) == 0x46 &&

598 
	`GETJOCTET
(
d©a
[4]) == 0) {

600 
cšfo
->
§w_JFIF_m¬k”
 = 
TRUE
;

601 
cšfo
->
JFIF_majÜ_v”siÚ
 = 
	`GETJOCTET
(
d©a
[5]);

602 
cšfo
->
JFIF_mšÜ_v”siÚ
 = 
	`GETJOCTET
(
d©a
[6]);

603 
cšfo
->
d’s™y_un™
 = 
	`GETJOCTET
(
d©a
[7]);

604 
cšfo
->
X_d’s™y
 = (
	`GETJOCTET
(
d©a
[8]) << 8) + GETJOCTET(data[9]);

605 
cšfo
->
Y_d’s™y
 = (
	`GETJOCTET
(
d©a
[10]) << 8) + GETJOCTET(data[11]);

612 ià(
cšfo
->
JFIF_majÜ_v”siÚ
 != 1)

613 
	`WARNMS2
(
cšfo
, 
JWRN_JFIF_MAJOR
,

614 
cšfo
->
JFIF_majÜ_v”siÚ
, cšfo->
JFIF_mšÜ_v”siÚ
);

616 
	`TRACEMS5
(
cšfo
, 1, 
JTRC_JFIF
,

617 
cšfo
->
JFIF_majÜ_v”siÚ
, cšfo->
JFIF_mšÜ_v”siÚ
,

618 
cšfo
->
X_d’s™y
, cšfo->
Y_d’s™y
, cšfo->
d’s™y_un™
);

620 ià(
	`GETJOCTET
(
d©a
[12]) | GETJOCTET(data[13]))

621 
	`TRACEMS2
(
cšfo
, 1, 
JTRC_JFIF_THUMBNAIL
,

622 
	`GETJOCTET
(
d©a
[12]), GETJOCTET(data[13]));

623 
tÙ®Ën
 -ğ
APP0_DATA_LEN
;

624 ià(
tÙ®Ën
 !=

625 ((
INT32
)
	`GETJOCTET
(
d©a
[12]) * (INT32)GETJOCTET(data[13]) * (INT32) 3))

626 
	`TRACEMS1
(
cšfo
, 1, 
JTRC_JFIF_BADTHUMBNAILSIZE
, (è
tÙ®Ën
);

627 } ià(
d©®’
 >= 6 &&

628 
	`GETJOCTET
(
d©a
[0]) == 0x4A &&

629 
	`GETJOCTET
(
d©a
[1]) == 0x46 &&

630 
	`GETJOCTET
(
d©a
[2]) == 0x58 &&

631 
	`GETJOCTET
(
d©a
[3]) == 0x58 &&

632 
	`GETJOCTET
(
d©a
[4]) == 0) {

637 
	`GETJOCTET
(
d©a
[5])) {

639 
	`TRACEMS1
(
cšfo
, 1, 
JTRC_THUMB_JPEG
, (è
tÙ®Ën
);

642 
	`TRACEMS1
(
cšfo
, 1, 
JTRC_THUMB_PALETTE
, (è
tÙ®Ën
);

645 
	`TRACEMS1
(
cšfo
, 1, 
JTRC_THUMB_RGB
, (è
tÙ®Ën
);

648 
	`TRACEMS2
(
cšfo
, 1, 
JTRC_JFIF_EXTENSION
,

649 
	`GETJOCTET
(
d©a
[5]), (è
tÙ®Ën
);

654 
	`TRACEMS1
(
cšfo
, 1, 
JTRC_APP0
, (è
tÙ®Ën
);

656 
	}
}

659 
	$LOCAL
()

660 
	$examše_­p14
 (
j_decom´ess_±r
 
cšfo
, 
JOCTET
 
FAR
 * 
d©a
,

661 
d©®’
, 
INT32
 
»maššg
)

667 
v”siÚ
, 
æags0
, 
æags1
, 
ŒªsfÜm
;

669 ià(
d©®’
 >ğ
APP14_DATA_LEN
 &&

670 
	`GETJOCTET
(
d©a
[0]) == 0x41 &&

671 
	`GETJOCTET
(
d©a
[1]) == 0x64 &&

672 
	`GETJOCTET
(
d©a
[2]) == 0x6F &&

673 
	`GETJOCTET
(
d©a
[3]) == 0x62 &&

674 
	`GETJOCTET
(
d©a
[4]) == 0x65) {

676 
v”siÚ
 = (
	`GETJOCTET
(
d©a
[5]) << 8) + GETJOCTET(data[6]);

677 
æags0
 = (
	`GETJOCTET
(
d©a
[7]) << 8) + GETJOCTET(data[8]);

678 
æags1
 = (
	`GETJOCTET
(
d©a
[9]) << 8) + GETJOCTET(data[10]);

679 
ŒªsfÜm
 = 
	`GETJOCTET
(
d©a
[11]);

680 
	`TRACEMS4
(
cšfo
, 1, 
JTRC_ADOBE
, 
v”siÚ
, 
æags0
, 
æags1
, 
ŒªsfÜm
);

681 
cšfo
->
§w_Adobe_m¬k”
 = 
TRUE
;

682 
cšfo
->
Adobe_ŒªsfÜm
 = (
UINT8
è
ŒªsfÜm
;

685 
	`TRACEMS1
(
cšfo
, 1, 
JTRC_APP14
, (è(
d©®’
 + 
»maššg
));

687 
	}
}

690 
	$METHODDEF
(
boŞ—n
)

691 
	$g‘_š‹»¡šg_­²
 (
j_decom´ess_±r
 
cšfo
)

694 
INT32
 
Ëngth
;

695 
JOCTET
 
b
[
APPN_DATA_LEN
];

696 
i
, 
numtÜ—d
;

697 
	`INPUT_VARS
(
cšfo
);

699 
	`INPUT_2BYTES
(
cšfo
, 
Ëngth
,  
FALSE
);

700 
Ëngth
 -= 2;

703 ià(
Ëngth
 >ğ
APPN_DATA_LEN
)

704 
numtÜ—d
 = 
APPN_DATA_LEN
;

705 ià(
Ëngth
 > 0)

706 
numtÜ—d
 = (è
Ëngth
;

708 
numtÜ—d
 = 0;

709 
i
 = 0; i < 
numtÜ—d
; i++)

710 
	`INPUT_BYTE
(
cšfo
, 
b
[
i
],  
FALSE
);

711 
Ëngth
 -ğ
numtÜ—d
;

714 
cšfo
->
uÄ—d_m¬k”
) {

715 
M_APP0
:

716 
	`examše_­p0
(
cšfo
, (
JOCTET
 
FAR
 *è
b
, 
numtÜ—d
, 
Ëngth
);

718 
M_APP14
:

719 
	`examše_­p14
(
cšfo
, (
JOCTET
 
FAR
 *è
b
, 
numtÜ—d
, 
Ëngth
);

723 
	`ERREXIT1
(
cšfo
, 
JERR_UNKNOWN_MARKER
, cšfo->
uÄ—d_m¬k”
);

728 
	`INPUT_SYNC
(
cšfo
);

729 ià(
Ëngth
 > 0)

730 (*
cšfo
->
¤c
->
sk_šput_d©a
è(cšfo, (è
Ëngth
);

732  
TRUE
;

733 
	}
}

736 #ifdeà
SAVE_MARKERS_SUPPORTED


738 
	$METHODDEF
(
boŞ—n
)

739 
	$§ve_m¬k”
 (
j_decom´ess_±r
 
cšfo
)

742 
my_m¬k”_±r
 
m¬k”
 = (my_m¬k”_±rè
cšfo
->marker;

743 
j³g_§ved_m¬k”_±r
 
cur_m¬k”
 = 
m¬k”
->cur_marker;

744 
by‹s_»ad
, 
d©a_Ëngth
;

745 
JOCTET
 
FAR
 * 
d©a
;

746 
INT32
 
Ëngth
 = 0;

747 
	`INPUT_VARS
(
cšfo
);

749 ià(
cur_m¬k”
 =ğ
NULL
) {

751 
	`INPUT_2BYTES
(
cšfo
, 
Ëngth
,  
FALSE
);

752 
Ëngth
 -= 2;

753 ià(
Ëngth
 >= 0) {

755 
lim™
;

756 ià(
cšfo
->
uÄ—d_m¬k”
 =ğ(è
M_COM
)

757 
lim™
 = 
m¬k”
->
Ëngth_lim™_COM
;

759 
lim™
 = 
m¬k”
->
Ëngth_lim™_APPn
[
cšfo
->
uÄ—d_m¬k”
 - (è
M_APP0
];

760 ià((è
Ëngth
 < 
lim™
)

761 
lim™
 = (è
Ëngth
;

763 
cur_m¬k”
 = (
j³g_§ved_m¬k”_±r
)

764 (*
cšfo
->
mem
->
®loc_Ïrge
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

765 
	`SIZEOF
(
j³g_m¬k”_¡ruù
è+ 
lim™
);

766 
cur_m¬k”
->
Ãxt
 = 
NULL
;

767 
cur_m¬k”
->
m¬k”
 = (
UINT8
è
cšfo
->
uÄ—d_m¬k”
;

768 
cur_m¬k”
->
Üigš®_Ëngth
 = (è
Ëngth
;

769 
cur_m¬k”
->
d©a_Ëngth
 = 
lim™
;

771 
d©a
 = 
cur_m¬k”
->d©¨ğ(
JOCTET
 
FAR
 *) (cur_marker + 1);

772 
m¬k”
->
cur_m¬k”
 = cur_marker;

773 
m¬k”
->
by‹s_»ad
 = 0;

774 
by‹s_»ad
 = 0;

775 
d©a_Ëngth
 = 
lim™
;

778 
by‹s_»ad
 = 
d©a_Ëngth
 = 0;

779 
d©a
 = 
NULL
;

783 
by‹s_»ad
 = 
m¬k”
->bytes_read;

784 
d©a_Ëngth
 = 
cur_m¬k”
->data_length;

785 
d©a
 = 
cur_m¬k”
->d©¨+ 
by‹s_»ad
;

788 
by‹s_»ad
 < 
d©a_Ëngth
) {

789 
	`INPUT_SYNC
(
cšfo
);

790 
m¬k”
->
by‹s_»ad
 = bytes_read;

792 
	`MAKE_BYTE_AVAIL
(
cšfo
,  
FALSE
);

794 
by‹s_»ad
 < 
d©a_Ëngth
 && 
by‹s_š_bufãr
 > 0) {

795 *
d©a
++ = *
Ãxt_šput_by‹
++;

796 
by‹s_š_bufãr
--;

797 
by‹s_»ad
++;

802 ià(
cur_m¬k”
 !ğ
NULL
) {

804 ià(
cšfo
->
m¬k”_li¡
 =ğ
NULL
) {

805 
cšfo
->
m¬k”_li¡
 = 
cur_m¬k”
;

807 
j³g_§ved_m¬k”_±r
 
´ev
 = 
cšfo
->
m¬k”_li¡
;

808 
´ev
->
Ãxt
 !ğ
NULL
)

809 
´ev
 =…»v->
Ãxt
;

810 
´ev
->
Ãxt
 = 
cur_m¬k”
;

813 
d©a
 = 
cur_m¬k”
->data;

814 
Ëngth
 = 
cur_m¬k”
->
Üigš®_Ëngth
 - 
d©a_Ëngth
;

817 
m¬k”
->
cur_m¬k”
 = 
NULL
;

820 
cšfo
->
uÄ—d_m¬k”
) {

821 
M_APP0
:

822 
	`examše_­p0
(
cšfo
, 
d©a
, 
d©a_Ëngth
, 
Ëngth
);

824 
M_APP14
:

825 
	`examše_­p14
(
cšfo
, 
d©a
, 
d©a_Ëngth
, 
Ëngth
);

828 
	`TRACEMS2
(
cšfo
, 1, 
JTRC_MISC_MARKER
, cšfo->
uÄ—d_m¬k”
,

829 (è(
d©a_Ëngth
 + 
Ëngth
));

834 
	`INPUT_SYNC
(
cšfo
);

835 ià(
Ëngth
 > 0)

836 (*
cšfo
->
¤c
->
sk_šput_d©a
è(cšfo, (è
Ëngth
);

838  
TRUE
;

839 
	}
}

844 
	$METHODDEF
(
boŞ—n
)

845 
	$sk_v¬ŸbË
 (
j_decom´ess_±r
 
cšfo
)

848 
INT32
 
Ëngth
;

849 
	`INPUT_VARS
(
cšfo
);

851 
	`INPUT_2BYTES
(
cšfo
, 
Ëngth
,  
FALSE
);

852 
Ëngth
 -= 2;

854 
	`TRACEMS2
(
cšfo
, 1, 
JTRC_MISC_MARKER
, cšfo->
uÄ—d_m¬k”
, (è
Ëngth
);

856 
	`INPUT_SYNC
(
cšfo
);

857 ià(
Ëngth
 > 0)

858 (*
cšfo
->
¤c
->
sk_šput_d©a
è(cšfo, (è
Ëngth
);

860  
TRUE
;

861 
	}
}

873 
	$LOCAL
(
boŞ—n
)

874 
	$Ãxt_m¬k”
 (
j_decom´ess_±r
 
cšfo
)

876 
c
;

877 
	`INPUT_VARS
(
cšfo
);

880 
	`INPUT_BYTE
(
cšfo
, 
c
,  
FALSE
);

886 
c
 != 0xFF) {

887 
cšfo
->
m¬k”
->
disÿrded_by‹s
++;

888 
	`INPUT_SYNC
(
cšfo
);

889 
	`INPUT_BYTE
(
cšfo
, 
c
,  
FALSE
);

897 
	`INPUT_BYTE
(
cšfo
, 
c
,  
FALSE
);

898 } 
c
 == 0xFF);

899 ià(
c
 != 0)

904 
cšfo
->
m¬k”
->
disÿrded_by‹s
 += 2;

905 
	`INPUT_SYNC
(
cšfo
);

908 ià(
cšfo
->
m¬k”
->
disÿrded_by‹s
 != 0) {

909 
	`WARNMS2
(
cšfo
, 
JWRN_EXTRANEOUS_DATA
, cšfo->
m¬k”
->
disÿrded_by‹s
, 
c
);

910 
cšfo
->
m¬k”
->
disÿrded_by‹s
 = 0;

913 
cšfo
->
uÄ—d_m¬k”
 = 
c
;

915 
	`INPUT_SYNC
(
cšfo
);

916  
TRUE
;

917 
	}
}

920 
	$LOCAL
(
boŞ—n
)

921 
	$fœ¡_m¬k”
 (
j_decom´ess_±r
 
cšfo
)

929 
c
, 
c2
;

930 
	`INPUT_VARS
(
cšfo
);

932 
	`INPUT_BYTE
(
cšfo
, 
c
,  
FALSE
);

933 
	`INPUT_BYTE
(
cšfo
, 
c2
,  
FALSE
);

934 ià(
c
 !ğ0xFF || 
c2
 !ğ(è
M_SOI
)

935 
	`ERREXIT2
(
cšfo
, 
JERR_NO_SOI
, 
c
, 
c2
);

937 
cšfo
->
uÄ—d_m¬k”
 = 
c2
;

939 
	`INPUT_SYNC
(
cšfo
);

940  
TRUE
;

941 
	}
}

951 
	$METHODDEF
()

952 
	$»ad_m¬k”s
 (
j_decom´ess_±r
 
cšfo
)

958 ià(
cšfo
->
uÄ—d_m¬k”
 == 0) {

959 ià(! 
cšfo
->
m¬k”
->
§w_SOI
) {

960 ià(! 
	`fœ¡_m¬k”
(
cšfo
))

961  
JPEG_SUSPENDED
;

963 ià(! 
	`Ãxt_m¬k”
(
cšfo
))

964  
JPEG_SUSPENDED
;

971 
cšfo
->
uÄ—d_m¬k”
) {

972 
M_SOI
:

973 ià(! 
	`g‘_soi
(
cšfo
))

974  
JPEG_SUSPENDED
;

977 
M_SOF0
:

978 
M_SOF1
:

979 ià(! 
	`g‘_sof
(
cšfo
, 
FALSE
, FALSE))

980  
JPEG_SUSPENDED
;

983 
M_SOF2
:

984 ià(! 
	`g‘_sof
(
cšfo
, 
TRUE
, 
FALSE
))

985  
JPEG_SUSPENDED
;

988 
M_SOF9
:

989 ià(! 
	`g‘_sof
(
cšfo
, 
FALSE
, 
TRUE
))

990  
JPEG_SUSPENDED
;

993 
M_SOF10
:

994 ià(! 
	`g‘_sof
(
cšfo
, 
TRUE
, TRUE))

995  
JPEG_SUSPENDED
;

999 
M_SOF3
:

1000 
M_SOF5
:

1001 
M_SOF6
:

1002 
M_SOF7
:

1003 
M_JPG
:

1004 
M_SOF11
:

1005 
M_SOF13
:

1006 
M_SOF14
:

1007 
M_SOF15
:

1008 
	`ERREXIT1
(
cšfo
, 
JERR_SOF_UNSUPPORTED
, cšfo->
uÄ—d_m¬k”
);

1011 
M_SOS
:

1012 ià(! 
	`g‘_sos
(
cšfo
))

1013  
JPEG_SUSPENDED
;

1014 
cšfo
->
uÄ—d_m¬k”
 = 0;

1015  
JPEG_REACHED_SOS
;

1017 
M_EOI
:

1018 
	`TRACEMS
(
cšfo
, 1, 
JTRC_EOI
);

1019 
cšfo
->
uÄ—d_m¬k”
 = 0;

1020  
JPEG_REACHED_EOI
;

1022 
M_DAC
:

1023 ià(! 
	`g‘_dac
(
cšfo
))

1024  
JPEG_SUSPENDED
;

1027 
M_DHT
:

1028 ià(! 
	`g‘_dht
(
cšfo
))

1029  
JPEG_SUSPENDED
;

1032 
M_DQT
:

1033 ià(! 
	`g‘_dqt
(
cšfo
))

1034  
JPEG_SUSPENDED
;

1037 
M_DRI
:

1038 ià(! 
	`g‘_dri
(
cšfo
))

1039  
JPEG_SUSPENDED
;

1042 
M_APP0
:

1043 
M_APP1
:

1044 
M_APP2
:

1045 
M_APP3
:

1046 
M_APP4
:

1047 
M_APP5
:

1048 
M_APP6
:

1049 
M_APP7
:

1050 
M_APP8
:

1051 
M_APP9
:

1052 
M_APP10
:

1053 
M_APP11
:

1054 
M_APP12
:

1055 
M_APP13
:

1056 
M_APP14
:

1057 
M_APP15
:

1058 ià(! (*((
my_m¬k”_±r
è
cšfo
->
m¬k”
)->
´oûss_APPn
[

1059 
cšfo
->
uÄ—d_m¬k”
 - (è
M_APP0
]) (cinfo))

1060  
JPEG_SUSPENDED
;

1063 
M_COM
:

1064 ià(! (*((
my_m¬k”_±r
è
cšfo
->
m¬k”
)->
´oûss_COM
) (cinfo))

1065  
JPEG_SUSPENDED
;

1068 
M_RST0
:

1069 
M_RST1
:

1070 
M_RST2
:

1071 
M_RST3
:

1072 
M_RST4
:

1073 
M_RST5
:

1074 
M_RST6
:

1075 
M_RST7
:

1076 
M_TEM
:

1077 
	`TRACEMS1
(
cšfo
, 1, 
JTRC_PARMLESS_MARKER
, cšfo->
uÄ—d_m¬k”
);

1080 
M_DNL
:

1081 ià(! 
	`sk_v¬ŸbË
(
cšfo
))

1082  
JPEG_SUSPENDED
;

1091 
	`ERREXIT1
(
cšfo
, 
JERR_UNKNOWN_MARKER
, cšfo->
uÄ—d_m¬k”
);

1095 
cšfo
->
uÄ—d_m¬k”
 = 0;

1097 
	}
}

1112 
	$METHODDEF
(
boŞ—n
)

1113 
	$»ad_»¡¬t_m¬k”
 (
j_decom´ess_±r
 
cšfo
)

1117 ià(
cšfo
->
uÄ—d_m¬k”
 == 0) {

1118 ià(! 
	`Ãxt_m¬k”
(
cšfo
))

1119  
FALSE
;

1122 ià(
cšfo
->
uÄ—d_m¬k”
 ==

1123 ((è
M_RST0
 + 
cšfo
->
m¬k”
->
Ãxt_»¡¬t_num
)) {

1125 
	`TRACEMS1
(
cšfo
, 3, 
JTRC_RST
, cšfo->
m¬k”
->
Ãxt_»¡¬t_num
);

1126 
cšfo
->
uÄ—d_m¬k”
 = 0;

1130 ià(! (*
cšfo
->
¤c
->
»sync_to_»¡¬t
) (cinfo,

1131 
cšfo
->
m¬k”
->
Ãxt_»¡¬t_num
))

1132  
FALSE
;

1136 
cšfo
->
m¬k”
->
Ãxt_»¡¬t_num
 = (cinfo->marker->next_restart_num + 1) & 7;

1138  
TRUE
;

1139 
	}
}

1191 
	$GLOBAL
(
boŞ—n
)

1192 
	$j³g_»sync_to_»¡¬t
 (
j_decom´ess_±r
 
cšfo
, 
desœed
)

1194 
m¬k”
 = 
cšfo
->
uÄ—d_m¬k”
;

1195 
aùiÚ
 = 1;

1198 
	`WARNMS2
(
cšfo
, 
JWRN_MUST_RESYNC
, 
m¬k”
, 
desœed
);

1202 ià(
m¬k”
 < (è
M_SOF0
)

1203 
aùiÚ
 = 2;

1204 ià(
m¬k”
 < (è
M_RST0
 || m¬k” > (è
M_RST7
)

1205 
aùiÚ
 = 3;

1207 ià(
m¬k”
 =ğ((è
M_RST0
 + ((
desœed
+1) & 7)) ||

1208 
m¬k”
 =ğ((è
M_RST0
 + ((
desœed
+2) & 7)))

1209 
aùiÚ
 = 3;

1210 ià(
m¬k”
 =ğ((è
M_RST0
 + ((
desœed
-1) & 7)) ||

1211 
m¬k”
 =ğ((è
M_RST0
 + ((
desœed
-2) & 7)))

1212 
aùiÚ
 = 2;

1214 
aùiÚ
 = 1;

1216 
	`TRACEMS2
(
cšfo
, 4, 
JTRC_RECOVERY_ACTION
, 
m¬k”
, 
aùiÚ
);

1217 
aùiÚ
) {

1220 
cšfo
->
uÄ—d_m¬k”
 = 0;

1221  
TRUE
;

1224 ià(! 
	`Ãxt_m¬k”
(
cšfo
))

1225  
FALSE
;

1226 
m¬k”
 = 
cšfo
->
uÄ—d_m¬k”
;

1231  
TRUE
;

1234 
	}
}

1241 
	$METHODDEF
()

1242 
	$»£t_m¬k”_»ad”
 (
j_decom´ess_±r
 
cšfo
)

1244 
my_m¬k”_±r
 
m¬k”
 = (my_m¬k”_±rè
cšfo
->marker;

1246 
cšfo
->
comp_šfo
 = 
NULL
;

1247 
cšfo
->
šput_sÿn_numb”
 = 0;

1248 
cšfo
->
uÄ—d_m¬k”
 = 0;

1249 
m¬k”
->
pub
.
§w_SOI
 = 
FALSE
;

1250 
m¬k”
->
pub
.
§w_SOF
 = 
FALSE
;

1251 
m¬k”
->
pub
.
disÿrded_by‹s
 = 0;

1252 
m¬k”
->
cur_m¬k”
 = 
NULL
;

1253 
	}
}

1261 
	$GLOBAL
()

1262 
	$jš™_m¬k”_»ad”
 (
j_decom´ess_±r
 
cšfo
)

1264 
my_m¬k”_±r
 
m¬k”
;

1265 
i
;

1268 
m¬k”
 = (
my_m¬k”_±r
)

1269 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_PERMANENT
,

1270 
	`SIZEOF
(
my_m¬k”_»ad”
));

1271 
cšfo
->
m¬k”
 = (
j³g_m¬k”_»ad”
 *) marker;

1273 
m¬k”
->
pub
.
»£t_m¬k”_»ad”
 =„eset_marker_reader;

1274 
m¬k”
->
pub
.
»ad_m¬k”s
 =„ead_markers;

1275 
m¬k”
->
pub
.
»ad_»¡¬t_m¬k”
 =„ead_restart_marker;

1280 
m¬k”
->
´oûss_COM
 = 
sk_v¬ŸbË
;

1281 
m¬k”
->
Ëngth_lim™_COM
 = 0;

1282 
i
 = 0; i < 16; i++) {

1283 
m¬k”
->
´oûss_APPn
[
i
] = 
sk_v¬ŸbË
;

1284 
m¬k”
->
Ëngth_lim™_APPn
[
i
] = 0;

1286 
m¬k”
->
´oûss_APPn
[0] = 
g‘_š‹»¡šg_­²
;

1287 
m¬k”
->
´oûss_APPn
[14] = 
g‘_š‹»¡šg_­²
;

1289 
	`»£t_m¬k”_»ad”
(
cšfo
);

1290 
	}
}

1297 #ifdeà
SAVE_MARKERS_SUPPORTED


1299 
	$GLOBAL
()

1300 
	$j³g_§ve_m¬k”s
 (
j_decom´ess_±r
 
cšfo
, 
m¬k”_code
,

1301 
Ëngth_lim™
)

1303 
my_m¬k”_±r
 
m¬k”
 = (my_m¬k”_±rè
cšfo
->marker;

1304 
maxËngth
;

1305 
j³g_m¬k”_·r£r_m‘hod
 
´oûssÜ
;

1310 
maxËngth
 = 
cšfo
->
mem
->
max_®loc_chunk
 - 
	`SIZEOF
(
j³g_m¬k”_¡ruù
);

1311 ià(((è
Ëngth_lim™
è> 
maxËngth
)

1312 
Ëngth_lim™
 = (è
maxËngth
;

1317 ià(
Ëngth_lim™
) {

1318 
´oûssÜ
 = 
§ve_m¬k”
;

1320 ià(
m¬k”_code
 =ğ(è
M_APP0
 && 
Ëngth_lim™
 < 
APP0_DATA_LEN
)

1321 
Ëngth_lim™
 = 
APP0_DATA_LEN
;

1322 ià(
m¬k”_code
 =ğ(è
M_APP14
 && 
Ëngth_lim™
 < 
APP14_DATA_LEN
)

1323 
Ëngth_lim™
 = 
APP14_DATA_LEN
;

1325 
´oûssÜ
 = 
sk_v¬ŸbË
;

1327 ià(
m¬k”_code
 =ğ(è
M_APP0
 || m¬k”_cod=ğ(è
M_APP14
)

1328 
´oûssÜ
 = 
g‘_š‹»¡šg_­²
;

1331 ià(
m¬k”_code
 =ğ(è
M_COM
) {

1332 
m¬k”
->
´oûss_COM
 = 
´oûssÜ
;

1333 
m¬k”
->
Ëngth_lim™_COM
 = 
Ëngth_lim™
;

1334 } ià(
m¬k”_code
 >ğ(è
M_APP0
 && m¬k”_cod<ğ(è
M_APP15
) {

1335 
m¬k”
->
´oûss_APPn
[
m¬k”_code
 - (è
M_APP0
] = 
´oûssÜ
;

1336 
m¬k”
->
Ëngth_lim™_APPn
[
m¬k”_code
 - (è
M_APP0
] = 
Ëngth_lim™
;

1338 
	`ERREXIT1
(
cšfo
, 
JERR_UNKNOWN_MARKER
, 
m¬k”_code
);

1339 
	}
}

1348 
	$GLOBAL
()

1349 
	$j³g_£t_m¬k”_´oûssÜ
 (
j_decom´ess_±r
 
cšfo
, 
m¬k”_code
,

1350 
j³g_m¬k”_·r£r_m‘hod
 
routše
)

1352 
my_m¬k”_±r
 
m¬k”
 = (my_m¬k”_±rè
cšfo
->marker;

1354 ià(
m¬k”_code
 =ğ(è
M_COM
)

1355 
m¬k”
->
´oûss_COM
 = 
routše
;

1356 ià(
m¬k”_code
 >ğ(è
M_APP0
 && m¬k”_cod<ğ(è
M_APP15
)

1357 
m¬k”
->
´oûss_APPn
[
m¬k”_code
 - (è
M_APP0
] = 
routše
;

1359 
	`ERREXIT1
(
cšfo
, 
JERR_UNKNOWN_MARKER
, 
m¬k”_code
);

1360 
	}
}

	@jdmaster.c

14 
	#JPEG_INTERNALS


	)

15 
	~"jšşude.h
"

16 
	~"j³glib.h
"

22 
j³g_decomp_ma¡”
 
	mpub
;

24 
	m·ss_numb”
;

26 
boŞ—n
 
	musšg_m”ged_up§m¶e
;

31 
j³g_cŞÜ_quªtiz”
 * 
	mquªtiz”_1·ss
;

32 
j³g_cŞÜ_quªtiz”
 * 
	mquªtiz”_2·ss
;

33 } 
	tmy_decomp_ma¡”
;

35 
my_decomp_ma¡”
 * 
	tmy_ma¡”_±r
;

43 
	$LOCAL
(
boŞ—n
)

44 
	$u£_m”ged_up§m¶e
 (
j_decom´ess_±r
 
cšfo
)

46 #ifdeà
UPSAMPLE_MERGING_SUPPORTED


48 ià(
cšfo
->
do_çncy_up§m¶šg
 || cšfo->
CCIR601_§m¶šg
)

49  
FALSE
;

51 ià(
cšfo
->
j³g_cŞÜ_¥aû
 !ğ
JCS_YCbCr
 || cšfo->
num_compÚ’ts
 != 3 ||

52 
cšfo
->
out_cŞÜ_¥aû
 !ğ
JCS_RGB
 ||

53 
cšfo
->
out_cŞÜ_compÚ’ts
 !ğ
RGB_PIXELSIZE
)

54  
FALSE
;

56 ià(
cšfo
->
comp_šfo
[0].
h_§mp_çùÜ
 != 2 ||

57 
cšfo
->
comp_šfo
[1].
h_§mp_çùÜ
 != 1 ||

58 
cšfo
->
comp_šfo
[2].
h_§mp_çùÜ
 != 1 ||

59 
cšfo
->
comp_šfo
[0].
v_§mp_çùÜ
 > 2 ||

60 
cšfo
->
comp_šfo
[1].
v_§mp_çùÜ
 != 1 ||

61 
cšfo
->
comp_šfo
[2].
v_§mp_çùÜ
 != 1)

62  
FALSE
;

64 ià(
cšfo
->
comp_šfo
[0].
DCT_sÿËd_size
 !ğcšfo->
mš_DCT_sÿËd_size
 ||

65 
cšfo
->
comp_šfo
[1].
DCT_sÿËd_size
 !ğcšfo->
mš_DCT_sÿËd_size
 ||

66 
cšfo
->
comp_šfo
[2].
DCT_sÿËd_size
 !ğcšfo->
mš_DCT_sÿËd_size
)

67  
FALSE
;

69  
TRUE
;

71  
FALSE
;

73 
	}
}

83 
	$GLOBAL
()

84 
	$j³g_ÿlc_ouut_dim’siÚs
 (
j_decom´ess_±r
 
cšfo
)

87 #ifdeà
IDCT_SCALING_SUPPORTED


88 
ci
;

89 
j³g_compÚ’t_šfo
 *
comµŒ
;

93 ià(
cšfo
->
glob®_¡©e
 !ğ
DSTATE_READY
)

94 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_STATE
, cšfo->
glob®_¡©e
);

96 #ifdeà
IDCT_SCALING_SUPPORTED


99 ià(
cšfo
->
sÿË_num
 * 8 <ğcšfo->
sÿË_d’om
) {

101 
cšfo
->
ouut_width
 = (
JDIMENSION
)

102 
	`jdiv_round_up
((è
cšfo
->
image_width
, 8L);

103 
cšfo
->
ouut_height
 = (
JDIMENSION
)

104 
	`jdiv_round_up
((è
cšfo
->
image_height
, 8L);

105 
cšfo
->
mš_DCT_sÿËd_size
 = 1;

106 } ià(
cšfo
->
sÿË_num
 * 4 <ğcšfo->
sÿË_d’om
) {

108 
cšfo
->
ouut_width
 = (
JDIMENSION
)

109 
	`jdiv_round_up
((è
cšfo
->
image_width
, 4L);

110 
cšfo
->
ouut_height
 = (
JDIMENSION
)

111 
	`jdiv_round_up
((è
cšfo
->
image_height
, 4L);

112 
cšfo
->
mš_DCT_sÿËd_size
 = 2;

113 } ià(
cšfo
->
sÿË_num
 * 2 <ğcšfo->
sÿË_d’om
) {

115 
cšfo
->
ouut_width
 = (
JDIMENSION
)

116 
	`jdiv_round_up
((è
cšfo
->
image_width
, 2L);

117 
cšfo
->
ouut_height
 = (
JDIMENSION
)

118 
	`jdiv_round_up
((è
cšfo
->
image_height
, 2L);

119 
cšfo
->
mš_DCT_sÿËd_size
 = 4;

122 
cšfo
->
ouut_width
 = cšfo->
image_width
;

123 
cšfo
->
ouut_height
 = cšfo->
image_height
;

124 
cšfo
->
mš_DCT_sÿËd_size
 = 
DCTSIZE
;

131 
ci
 = 0, 
comµŒ
 = 
cšfo
->
comp_šfo
; c˜< cšfo->
num_compÚ’ts
;

132 
ci
++, 
comµŒ
++) {

133 
ssize
 = 
cšfo
->
mš_DCT_sÿËd_size
;

134 
ssize
 < 
DCTSIZE
 &&

135 (
comµŒ
->
h_§mp_çùÜ
 * 
ssize
 * 2 <=

136 
cšfo
->
max_h_§mp_çùÜ
 * cšfo->
mš_DCT_sÿËd_size
) &&

137 (
comµŒ
->
v_§mp_çùÜ
 * 
ssize
 * 2 <=

138 
cšfo
->
max_v_§mp_çùÜ
 * cšfo->
mš_DCT_sÿËd_size
)) {

139 
ssize
 = ssize * 2;

141 
comµŒ
->
DCT_sÿËd_size
 = 
ssize
;

147 
ci
 = 0, 
comµŒ
 = 
cšfo
->
comp_šfo
; c˜< cšfo->
num_compÚ’ts
;

148 
ci
++, 
comµŒ
++) {

150 
comµŒ
->
down§m¶ed_width
 = (
JDIMENSION
)

151 
	`jdiv_round_up
((è
cšfo
->
image_width
 *

152 (è(
comµŒ
->
h_§mp_çùÜ
 * comµŒ->
DCT_sÿËd_size
),

153 (è(
cšfo
->
max_h_§mp_çùÜ
 * 
DCTSIZE
));

154 
comµŒ
->
down§m¶ed_height
 = (
JDIMENSION
)

155 
	`jdiv_round_up
((è
cšfo
->
image_height
 *

156 (è(
comµŒ
->
v_§mp_çùÜ
 * comµŒ->
DCT_sÿËd_size
),

157 (è(
cšfo
->
max_v_§mp_çùÜ
 * 
DCTSIZE
));

163 
cšfo
->
ouut_width
 = cšfo->
image_width
;

164 
cšfo
->
ouut_height
 = cšfo->
image_height
;

173 
cšfo
->
out_cŞÜ_¥aû
) {

174 
JCS_GRAYSCALE
:

175 
cšfo
->
out_cŞÜ_compÚ’ts
 = 1;

177 
JCS_RGB
:

178 #ià
RGB_PIXELSIZE
 != 3

179 
cšfo
->
out_cŞÜ_compÚ’ts
 = 
RGB_PIXELSIZE
;

182 
JCS_YCbCr
:

183 
cšfo
->
out_cŞÜ_compÚ’ts
 = 3;

185 
JCS_CMYK
:

186 
JCS_YCCK
:

187 
cšfo
->
out_cŞÜ_compÚ’ts
 = 4;

190 
cšfo
->
out_cŞÜ_compÚ’ts
 = cšfo->
num_compÚ’ts
;

193 
cšfo
->
ouut_compÚ’ts
 = (cšfo->
quªtize_cŞÜs
 ? 1 :

194 
cšfo
->
out_cŞÜ_compÚ’ts
);

197 ià(
	`u£_m”ged_up§m¶e
(
cšfo
))

198 
cšfo
->
»c_outbuf_height
 = cšfo->
max_v_§mp_çùÜ
;

200 
cšfo
->
»c_outbuf_height
 = 1;

201 
	}
}

247 
	$LOCAL
()

248 
	$´•¬e_¿nge_lim™_bË
 (
j_decom´ess_±r
 
cšfo
)

251 
JSAMPLE
 * 
bË
;

252 
i
;

254 
bË
 = (
JSAMPLE
 *)

255 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

256 (5 * (
MAXJSAMPLE
+1è+ 
CENTERJSAMPLE
è* 
	`SIZEOF
(
JSAMPLE
));

257 
bË
 +ğ(
MAXJSAMPLE
+1);

258 
cšfo
->
§m¶e_¿nge_lim™
 = 
bË
;

260 
	`MEMZERO
(
bË
 - (
MAXJSAMPLE
+1), (MAXJSAMPLE+1è* 
	`SIZEOF
(
JSAMPLE
));

262 
i
 = 0; i <ğ
MAXJSAMPLE
; i++)

263 
bË
[
i
] = (
JSAMPLE
) i;

264 
bË
 +ğ
CENTERJSAMPLE
;

266 
i
 = 
CENTERJSAMPLE
; i < 2*(
MAXJSAMPLE
+1); i++)

267 
bË
[
i
] = 
MAXJSAMPLE
;

269 
	`MEMZERO
(
bË
 + (2 * (
MAXJSAMPLE
+1)),

270 (2 * (
MAXJSAMPLE
+1è- 
CENTERJSAMPLE
è* 
	`SIZEOF
(
JSAMPLE
));

271 
	`MEMCOPY
(
bË
 + (4 * (
MAXJSAMPLE
+1è- 
CENTERJSAMPLE
),

272 
cšfo
->
§m¶e_¿nge_lim™
, 
CENTERJSAMPLE
 * 
	`SIZEOF
(
JSAMPLE
));

273 
	}
}

287 
	$LOCAL
()

288 
	$ma¡”_£ËùiÚ
 (
j_decom´ess_±r
 
cšfo
)

290 
my_ma¡”_±r
 
ma¡”
 = (my_ma¡”_±rè
cšfo
->master;

291 
boŞ—n
 
u£_c_bufãr
;

292 
§m¶e¥”row
;

293 
JDIMENSION
 
jd_§m¶e¥”row
;

296 
	`j³g_ÿlc_ouut_dim’siÚs
(
cšfo
);

297 
	`´•¬e_¿nge_lim™_bË
(
cšfo
);

300 
§m¶e¥”row
 = (è
cšfo
->
ouut_width
 * (ècšfo->
out_cŞÜ_compÚ’ts
;

301 
jd_§m¶e¥”row
 = (
JDIMENSION
è
§m¶e¥”row
;

302 ià((è
jd_§m¶e¥”row
 !ğ
§m¶e¥”row
)

303 
	`ERREXIT
(
cšfo
, 
JERR_WIDTH_OVERFLOW
);

306 
ma¡”
->
·ss_numb”
 = 0;

307 
ma¡”
->
usšg_m”ged_up§m¶e
 = 
	`u£_m”ged_up§m¶e
(
cšfo
);

310 
ma¡”
->
quªtiz”_1·ss
 = 
NULL
;

311 
ma¡”
->
quªtiz”_2·ss
 = 
NULL
;

313 ià(! 
cšfo
->
quªtize_cŞÜs
 || ! cšfo->
bufã»d_image
) {

314 
cšfo
->
’abË_1·ss_quªt
 = 
FALSE
;

315 
cšfo
->
’abË_ex‹º®_quªt
 = 
FALSE
;

316 
cšfo
->
’abË_2·ss_quªt
 = 
FALSE
;

318 ià(
cšfo
->
quªtize_cŞÜs
) {

319 ià(
cšfo
->
¿w_d©a_out
)

320 
	`ERREXIT
(
cšfo
, 
JERR_NOTIMPL
);

322 ià(
cšfo
->
out_cŞÜ_compÚ’ts
 != 3) {

323 
cšfo
->
’abË_1·ss_quªt
 = 
TRUE
;

324 
cšfo
->
’abË_ex‹º®_quªt
 = 
FALSE
;

325 
cšfo
->
’abË_2·ss_quªt
 = 
FALSE
;

326 
cšfo
->
cŞÜm­
 = 
NULL
;

327 } ià(
cšfo
->
cŞÜm­
 !ğ
NULL
) {

328 
cšfo
->
’abË_ex‹º®_quªt
 = 
TRUE
;

329 } ià(
cšfo
->
two_·ss_quªtize
) {

330 
cšfo
->
’abË_2·ss_quªt
 = 
TRUE
;

332 
cšfo
->
’abË_1·ss_quªt
 = 
TRUE
;

335 ià(
cšfo
->
’abË_1·ss_quªt
) {

336 #ifdeà
QUANT_1PASS_SUPPORTED


337 
	`jš™_1·ss_quªtiz”
(
cšfo
);

338 
ma¡”
->
quªtiz”_1·ss
 = 
cšfo
->
cquªtize
;

340 
	`ERREXIT
(
cšfo
, 
JERR_NOT_COMPILED
);

345 ià(
cšfo
->
’abË_2·ss_quªt
 || cšfo->
’abË_ex‹º®_quªt
) {

346 #ifdeà
QUANT_2PASS_SUPPORTED


347 
	`jš™_2·ss_quªtiz”
(
cšfo
);

348 
ma¡”
->
quªtiz”_2·ss
 = 
cšfo
->
cquªtize
;

350 
	`ERREXIT
(
cšfo
, 
JERR_NOT_COMPILED
);

359 ià(! 
cšfo
->
¿w_d©a_out
) {

360 ià(
ma¡”
->
usšg_m”ged_up§m¶e
) {

361 #ifdeà
UPSAMPLE_MERGING_SUPPORTED


362 
	`jš™_m”ged_up§m¶”
(
cšfo
);

364 
	`ERREXIT
(
cšfo
, 
JERR_NOT_COMPILED
);

367 
	`jš™_cŞÜ_decÚv”‹r
(
cšfo
);

368 
	`jš™_up§m¶”
(
cšfo
);

370 
	`jš™_d_po¡_cÚŒŞËr
(
cšfo
, cšfo->
’abË_2·ss_quªt
);

373 
	`jš™_šv”£_dù
(
cšfo
);

375 ià(
cšfo
->
¬™h_code
) {

376 
	`ERREXIT
(
cšfo
, 
JERR_ARITH_NOTIMPL
);

378 ià(
cšfo
->
´og»ssive_mode
) {

379 #ifdeà
D_PROGRESSIVE_SUPPORTED


380 
	`jš™_phuff_decod”
(
cšfo
);

382 
	`ERREXIT
(
cšfo
, 
JERR_NOT_COMPILED
);

385 
	`jš™_huff_decod”
(
cšfo
);

389 
u£_c_bufãr
 = 
cšfo
->
šputùl
->
has_muÉË_sÿns
 || cšfo->
bufã»d_image
;

390 
	`jš™_d_cÛf_cÚŒŞËr
(
cšfo
, 
u£_c_bufãr
);

392 ià(! 
cšfo
->
¿w_d©a_out
)

393 
	`jš™_d_maš_cÚŒŞËr
(
cšfo
, 
FALSE
 );

396 (*
cšfo
->
mem
->
»®ize_vœt_¬¿ys
è((
j_commÚ_±r
) cinfo);

399 (*
cšfo
->
šputùl
->
¡¬t_šput_·ss
) (cinfo);

401 #ifdeà
D_MULTISCAN_FILES_SUPPORTED


406 ià(
cšfo
->
´og»ss
 !ğ
NULL
 && ! cšfo->
bufã»d_image
 &&

407 
cšfo
->
šputùl
->
has_muÉË_sÿns
) {

408 
nsÿns
;

410 ià(
cšfo
->
´og»ssive_mode
) {

412 
nsÿns
 = 2 + 3 * 
cšfo
->
num_compÚ’ts
;

415 
nsÿns
 = 
cšfo
->
num_compÚ’ts
;

417 
cšfo
->
´og»ss
->
·ss_couÁ”
 = 0L;

418 
cšfo
->
´og»ss
->
·ss_lim™
 = (ècšfo->
tÙ®_iMCU_rows
 * 
nsÿns
;

419 
cšfo
->
´og»ss
->
com¶‘ed_·s£s
 = 0;

420 
cšfo
->
´og»ss
->
tÙ®_·s£s
 = (cšfo->
’abË_2·ss_quªt
 ? 3 : 2);

422 
ma¡”
->
·ss_numb”
++;

425 
	}
}

437 
	$METHODDEF
()

438 
	$´•¬e_fÜ_ouut_·ss
 (
j_decom´ess_±r
 
cšfo
)

440 
my_ma¡”_±r
 
ma¡”
 = (my_ma¡”_±rè
cšfo
->master;

442 ià(
ma¡”
->
pub
.
is_dummy_·ss
) {

443 #ifdeà
QUANT_2PASS_SUPPORTED


445 
ma¡”
->
pub
.
is_dummy_·ss
 = 
FALSE
;

446 (*
cšfo
->
cquªtize
->
¡¬t_·ss
è(cšfo, 
FALSE
);

447 (*
cšfo
->
po¡
->
¡¬t_·ss
è(cšfo, 
JBUF_CRANK_DEST
);

448 (*
cšfo
->
maš
->
¡¬t_·ss
è(cšfo, 
JBUF_CRANK_DEST
);

450 
	`ERREXIT
(
cšfo
, 
JERR_NOT_COMPILED
);

453 ià(
cšfo
->
quªtize_cŞÜs
 && cšfo->
cŞÜm­
 =ğ
NULL
) {

455 ià(
cšfo
->
two_·ss_quªtize
 && cšfo->
’abË_2·ss_quªt
) {

456 
cšfo
->
cquªtize
 = 
ma¡”
->
quªtiz”_2·ss
;

457 
ma¡”
->
pub
.
is_dummy_·ss
 = 
TRUE
;

458 } ià(
cšfo
->
’abË_1·ss_quªt
) {

459 
cšfo
->
cquªtize
 = 
ma¡”
->
quªtiz”_1·ss
;

461 
	`ERREXIT
(
cšfo
, 
JERR_MODE_CHANGE
);

464 (*
cšfo
->
idù
->
¡¬t_·ss
) (cinfo);

465 (*
cšfo
->
cÛf
->
¡¬t_ouut_·ss
) (cinfo);

466 ià(! 
cšfo
->
¿w_d©a_out
) {

467 ià(! 
ma¡”
->
usšg_m”ged_up§m¶e
)

468 (*
cšfo
->
ccÚv”t
->
¡¬t_·ss
) (cinfo);

469 (*
cšfo
->
up§m¶e
->
¡¬t_·ss
) (cinfo);

470 ià(
cšfo
->
quªtize_cŞÜs
)

471 (*
cšfo
->
cquªtize
->
¡¬t_·ss
è(cšfo, 
ma¡”
->
pub
.
is_dummy_·ss
);

472 (*
cšfo
->
po¡
->
¡¬t_·ss
) (cinfo,

473 (
ma¡”
->
pub
.
is_dummy_·ss
 ? 
JBUF_SAVE_AND_PASS
 : 
JBUF_PASS_THRU
));

474 (*
cšfo
->
maš
->
¡¬t_·ss
è(cšfo, 
JBUF_PASS_THRU
);

479 ià(
cšfo
->
´og»ss
 !ğ
NULL
) {

480 
cšfo
->
´og»ss
->
com¶‘ed_·s£s
 = 
ma¡”
->
·ss_numb”
;

481 
cšfo
->
´og»ss
->
tÙ®_·s£s
 = 
ma¡”
->
·ss_numb”
 +

482 (
ma¡”
->
pub
.
is_dummy_·ss
 ? 2 : 1);

486 ià(
cšfo
->
bufã»d_image
 && ! cšfo->
šputùl
->
eoi_»ached
) {

487 
cšfo
->
´og»ss
->
tÙ®_·s£s
 +ğ(cšfo->
’abË_2·ss_quªt
 ? 2 : 1);

490 
	}
}

497 
	$METHODDEF
()

498 
	$fšish_ouut_·ss
 (
j_decom´ess_±r
 
cšfo
)

500 
my_ma¡”_±r
 
ma¡”
 = (my_ma¡”_±rè
cšfo
->master;

502 ià(
cšfo
->
quªtize_cŞÜs
)

503 (*
cšfo
->
cquªtize
->
fšish_·ss
) (cinfo);

504 
ma¡”
->
·ss_numb”
++;

505 
	}
}

508 #ifdeà
D_MULTISCAN_FILES_SUPPORTED


514 
	$GLOBAL
()

515 
	$j³g_Ãw_cŞÜm­
 (
j_decom´ess_±r
 
cšfo
)

517 
my_ma¡”_±r
 
ma¡”
 = (my_ma¡”_±rè
cšfo
->master;

520 ià(
cšfo
->
glob®_¡©e
 !ğ
DSTATE_BUFIMAGE
)

521 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_STATE
, cšfo->
glob®_¡©e
);

523 ià(
cšfo
->
quªtize_cŞÜs
 && cšfo->
’abË_ex‹º®_quªt
 &&

524 
cšfo
->
cŞÜm­
 !ğ
NULL
) {

526 
cšfo
->
cquªtize
 = 
ma¡”
->
quªtiz”_2·ss
;

528 (*
cšfo
->
cquªtize
->
Ãw_cŞÜ_m­
) (cinfo);

529 
ma¡”
->
pub
.
is_dummy_·ss
 = 
FALSE
;

531 
	`ERREXIT
(
cšfo
, 
JERR_MODE_CHANGE
);

532 
	}
}

542 
	$GLOBAL
()

543 
	$jš™_ma¡”_decom´ess
 (
j_decom´ess_±r
 
cšfo
)

545 
my_ma¡”_±r
 
ma¡”
;

547 
ma¡”
 = (
my_ma¡”_±r
)

548 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

549 
	`SIZEOF
(
my_decomp_ma¡”
));

550 
cšfo
->
ma¡”
 = (
j³g_decomp_ma¡”
 *) master;

551 
ma¡”
->
pub
.
´•¬e_fÜ_ouut_·ss
 =…repare_for_output_pass;

552 
ma¡”
->
pub
.
fšish_ouut_·ss
 = finish_output_pass;

554 
ma¡”
->
pub
.
is_dummy_·ss
 = 
FALSE
;

556 
	`ma¡”_£ËùiÚ
(
cšfo
);

557 
	}
}

	@jdmerge.c

35 
	#JPEG_INTERNALS


	)

36 
	~"jšşude.h
"

37 
	~"j³glib.h
"

39 #ifdeà
UPSAMPLE_MERGING_SUPPORTED


45 
j³g_up§m¶”
 
	mpub
;

48 
JMETHOD
(, 
upm‘hod
, (
j_decom´ess_±r
 
cšfo
,

49 
JSAMPIMAGE
 
šput_buf
, 
JDIMENSION
 
š_row_group_ùr
,

50 
JSAMPARRAY
 
ouut_buf
));

53 * 
	mCr_r_b
;

54 * 
	mCb_b_b
;

55 
INT32
 * 
	mCr_g_b
;

56 
INT32
 * 
	mCb_g_b
;

63 
JSAMPROW
 
	m¥¬e_row
;

64 
boŞ—n
 
	m¥¬e_fuÎ
;

66 
JDIMENSION
 
	mout_row_width
;

67 
JDIMENSION
 
	mrows_to_go
;

68 } 
	tmy_up§m¶”
;

70 
my_up§m¶”
 * 
	tmy_up§m¶e_±r
;

72 
	#SCALEBITS
 16

	)

73 
	#ONE_HALF
 ((
INT32
è1 << (
SCALEBITS
-1))

	)

74 
	#FIX
(
x
è((
INT32
è((xè* (1L<<
SCALEBITS
è+ 0.5))

	)

82 
	$LOCAL
()

83 
	$bud_ycc_rgb_bË
 (
j_decom´ess_±r
 
cšfo
)

85 
my_up§m¶e_±r
 
up§m¶e
 = (my_up§m¶e_±rè
cšfo
->upsample;

86 
i
;

87 
INT32
 
x
;

88 
SHIFT_TEMPS


90 
up§m¶e
->
Cr_r_b
 = (*)

91 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

92 (
MAXJSAMPLE
+1è* 
	`SIZEOF
());

93 
up§m¶e
->
Cb_b_b
 = (*)

94 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

95 (
MAXJSAMPLE
+1è* 
	`SIZEOF
());

96 
up§m¶e
->
Cr_g_b
 = (
INT32
 *)

97 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

98 (
MAXJSAMPLE
+1è* 
	`SIZEOF
(
INT32
));

99 
up§m¶e
->
Cb_g_b
 = (
INT32
 *)

100 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

101 (
MAXJSAMPLE
+1è* 
	`SIZEOF
(
INT32
));

103 
i
 = 0, 
x
 = -
CENTERJSAMPLE
; i <ğ
MAXJSAMPLE
; i++, x++) {

107 
up§m¶e
->
Cr_r_b
[
i
] = ()

108 
	`RIGHT_SHIFT
(
	`FIX
(1.40200è* 
x
 + 
ONE_HALF
, 
SCALEBITS
);

110 
up§m¶e
->
Cb_b_b
[
i
] = ()

111 
	`RIGHT_SHIFT
(
	`FIX
(1.77200è* 
x
 + 
ONE_HALF
, 
SCALEBITS
);

113 
up§m¶e
->
Cr_g_b
[
i
] = (- 
	`FIX
(0.71414)è* 
x
;

116 
up§m¶e
->
Cb_g_b
[
i
] = (- 
	`FIX
(0.34414)è* 
x
 + 
ONE_HALF
;

118 
	}
}

125 
	$METHODDEF
()

126 
	$¡¬t_·ss_m”ged_up§m¶e
 (
j_decom´ess_±r
 
cšfo
)

128 
my_up§m¶e_±r
 
up§m¶e
 = (my_up§m¶e_±rè
cšfo
->upsample;

131 
up§m¶e
->
¥¬e_fuÎ
 = 
FALSE
;

133 
up§m¶e
->
rows_to_go
 = 
cšfo
->
ouut_height
;

134 
	}
}

143 
	$METHODDEF
()

144 
	$m”ged_2v_up§m¶e
 (
j_decom´ess_±r
 
cšfo
,

145 
JSAMPIMAGE
 
šput_buf
, 
JDIMENSION
 *
š_row_group_ùr
,

146 
JDIMENSION
 
š_row_groups_ava
,

147 
JSAMPARRAY
 
ouut_buf
, 
JDIMENSION
 *
out_row_ùr
,

148 
JDIMENSION
 
out_rows_ava
)

151 
my_up§m¶e_±r
 
up§m¶e
 = (my_up§m¶e_±rè
cšfo
->upsample;

152 
JSAMPROW
 
wÜk_±rs
[2];

153 
JDIMENSION
 
num_rows
;

155 ià(
up§m¶e
->
¥¬e_fuÎ
) {

157 
	`jcİy_§m¶e_rows
(& 
up§m¶e
->
¥¬e_row
, 0, 
ouut_buf
 + *
out_row_ùr
, 0,

158 1, 
up§m¶e
->
out_row_width
);

159 
num_rows
 = 1;

160 
up§m¶e
->
¥¬e_fuÎ
 = 
FALSE
;

163 
num_rows
 = 2;

165 ià(
num_rows
 > 
up§m¶e
->
rows_to_go
)

166 
num_rows
 = 
up§m¶e
->
rows_to_go
;

168 
out_rows_ava
 -ğ*
out_row_ùr
;

169 ià(
num_rows
 > 
out_rows_ava
)

170 
num_rows
 = 
out_rows_ava
;

172 
wÜk_±rs
[0] = 
ouut_buf
[*
out_row_ùr
];

173 ià(
num_rows
 > 1) {

174 
wÜk_±rs
[1] = 
ouut_buf
[*
out_row_ùr
 + 1];

176 
wÜk_±rs
[1] = 
up§m¶e
->
¥¬e_row
;

177 
up§m¶e
->
¥¬e_fuÎ
 = 
TRUE
;

180 (*
up§m¶e
->
upm‘hod
è(
cšfo
, 
šput_buf
, *
š_row_group_ùr
, 
wÜk_±rs
);

184 *
out_row_ùr
 +ğ
num_rows
;

185 
up§m¶e
->
rows_to_go
 -ğ
num_rows
;

187 ià(! 
up§m¶e
->
¥¬e_fuÎ
)

188 (*
š_row_group_ùr
)++;

189 
	}
}

192 
	$METHODDEF
()

193 
	$m”ged_1v_up§m¶e
 (
j_decom´ess_±r
 
cšfo
,

194 
JSAMPIMAGE
 
šput_buf
, 
JDIMENSION
 *
š_row_group_ùr
,

195 
JDIMENSION
 
š_row_groups_ava
,

196 
JSAMPARRAY
 
ouut_buf
, 
JDIMENSION
 *
out_row_ùr
,

197 
JDIMENSION
 
out_rows_ava
)

200 
my_up§m¶e_±r
 
up§m¶e
 = (my_up§m¶e_±rè
cšfo
->upsample;

203 (*
up§m¶e
->
upm‘hod
è(
cšfo
, 
šput_buf
, *
š_row_group_ùr
,

204 
ouut_buf
 + *
out_row_ùr
);

206 (*
out_row_ùr
)++;

207 (*
š_row_group_ùr
)++;

208 
	}
}

225 
	$METHODDEF
()

226 
	$h2v1_m”ged_up§m¶e
 (
j_decom´ess_±r
 
cšfo
,

227 
JSAMPIMAGE
 
šput_buf
, 
JDIMENSION
 
š_row_group_ùr
,

228 
JSAMPARRAY
 
ouut_buf
)

230 
my_up§m¶e_±r
 
up§m¶e
 = (my_up§m¶e_±rè
cšfo
->upsample;

231 
y
, 
üed
, 
cg»’
, 
cblue
;

232 
cb
, 
ü
;

233 
JSAMPROW
 
ouŒ
;

234 
JSAMPROW
 
š±r0
, 
š±r1
, 
š±r2
;

235 
JDIMENSION
 
cŞ
;

237 
JSAMPLE
 * 
¿nge_lim™
 = 
cšfo
->
§m¶e_¿nge_lim™
;

238 * 
C¼b
 = 
up§m¶e
->
Cr_r_b
;

239 * 
Cbbb
 = 
up§m¶e
->
Cb_b_b
;

240 
INT32
 * 
Crgb
 = 
up§m¶e
->
Cr_g_b
;

241 
INT32
 * 
Cbgb
 = 
up§m¶e
->
Cb_g_b
;

242 
SHIFT_TEMPS


244 
š±r0
 = 
šput_buf
[0][
š_row_group_ùr
];

245 
š±r1
 = 
šput_buf
[1][
š_row_group_ùr
];

246 
š±r2
 = 
šput_buf
[2][
š_row_group_ùr
];

247 
ouŒ
 = 
ouut_buf
[0];

249 
cŞ
 = 
cšfo
->
ouut_width
 >> 1; col > 0; col--) {

251 
cb
 = 
	`GETJSAMPLE
(*
š±r1
++);

252 
ü
 = 
	`GETJSAMPLE
(*
š±r2
++);

253 
üed
 = 
C¼b
[
ü
];

254 
cg»’
 = (è
	`RIGHT_SHIFT
(
Cbgb
[
cb
] + 
Crgb
[
ü
], 
SCALEBITS
);

255 
cblue
 = 
Cbbb
[
cb
];

257 
y
 = 
	`GETJSAMPLE
(*
š±r0
++);

258 
ouŒ
[
RGB_RED
] = 
¿nge_lim™
[
y
 + 
üed
];

259 
ouŒ
[
RGB_GREEN
] = 
¿nge_lim™
[
y
 + 
cg»’
];

260 
ouŒ
[
RGB_BLUE
] = 
¿nge_lim™
[
y
 + 
cblue
];

261 
ouŒ
 +ğ
RGB_PIXELSIZE
;

262 
y
 = 
	`GETJSAMPLE
(*
š±r0
++);

263 
ouŒ
[
RGB_RED
] = 
¿nge_lim™
[
y
 + 
üed
];

264 
ouŒ
[
RGB_GREEN
] = 
¿nge_lim™
[
y
 + 
cg»’
];

265 
ouŒ
[
RGB_BLUE
] = 
¿nge_lim™
[
y
 + 
cblue
];

266 
ouŒ
 +ğ
RGB_PIXELSIZE
;

269 ià(
cšfo
->
ouut_width
 & 1) {

270 
cb
 = 
	`GETJSAMPLE
(*
š±r1
);

271 
ü
 = 
	`GETJSAMPLE
(*
š±r2
);

272 
üed
 = 
C¼b
[
ü
];

273 
cg»’
 = (è
	`RIGHT_SHIFT
(
Cbgb
[
cb
] + 
Crgb
[
ü
], 
SCALEBITS
);

274 
cblue
 = 
Cbbb
[
cb
];

275 
y
 = 
	`GETJSAMPLE
(*
š±r0
);

276 
ouŒ
[
RGB_RED
] = 
¿nge_lim™
[
y
 + 
üed
];

277 
ouŒ
[
RGB_GREEN
] = 
¿nge_lim™
[
y
 + 
cg»’
];

278 
ouŒ
[
RGB_BLUE
] = 
¿nge_lim™
[
y
 + 
cblue
];

280 
	}
}

287 
	$METHODDEF
()

288 
	$h2v2_m”ged_up§m¶e
 (
j_decom´ess_±r
 
cšfo
,

289 
JSAMPIMAGE
 
šput_buf
, 
JDIMENSION
 
š_row_group_ùr
,

290 
JSAMPARRAY
 
ouut_buf
)

292 
my_up§m¶e_±r
 
up§m¶e
 = (my_up§m¶e_±rè
cšfo
->upsample;

293 
y
, 
üed
, 
cg»’
, 
cblue
;

294 
cb
, 
ü
;

295 
JSAMPROW
 
ouŒ0
, 
ouŒ1
;

296 
JSAMPROW
 
š±r00
, 
š±r01
, 
š±r1
, 
š±r2
;

297 
JDIMENSION
 
cŞ
;

299 
JSAMPLE
 * 
¿nge_lim™
 = 
cšfo
->
§m¶e_¿nge_lim™
;

300 * 
C¼b
 = 
up§m¶e
->
Cr_r_b
;

301 * 
Cbbb
 = 
up§m¶e
->
Cb_b_b
;

302 
INT32
 * 
Crgb
 = 
up§m¶e
->
Cr_g_b
;

303 
INT32
 * 
Cbgb
 = 
up§m¶e
->
Cb_g_b
;

304 
SHIFT_TEMPS


306 
š±r00
 = 
šput_buf
[0][
š_row_group_ùr
*2];

307 
š±r01
 = 
šput_buf
[0][
š_row_group_ùr
*2 + 1];

308 
š±r1
 = 
šput_buf
[1][
š_row_group_ùr
];

309 
š±r2
 = 
šput_buf
[2][
š_row_group_ùr
];

310 
ouŒ0
 = 
ouut_buf
[0];

311 
ouŒ1
 = 
ouut_buf
[1];

313 
cŞ
 = 
cšfo
->
ouut_width
 >> 1; col > 0; col--) {

315 
cb
 = 
	`GETJSAMPLE
(*
š±r1
++);

316 
ü
 = 
	`GETJSAMPLE
(*
š±r2
++);

317 
üed
 = 
C¼b
[
ü
];

318 
cg»’
 = (è
	`RIGHT_SHIFT
(
Cbgb
[
cb
] + 
Crgb
[
ü
], 
SCALEBITS
);

319 
cblue
 = 
Cbbb
[
cb
];

321 
y
 = 
	`GETJSAMPLE
(*
š±r00
++);

322 
ouŒ0
[
RGB_RED
] = 
¿nge_lim™
[
y
 + 
üed
];

323 
ouŒ0
[
RGB_GREEN
] = 
¿nge_lim™
[
y
 + 
cg»’
];

324 
ouŒ0
[
RGB_BLUE
] = 
¿nge_lim™
[
y
 + 
cblue
];

325 
ouŒ0
 +ğ
RGB_PIXELSIZE
;

326 
y
 = 
	`GETJSAMPLE
(*
š±r00
++);

327 
ouŒ0
[
RGB_RED
] = 
¿nge_lim™
[
y
 + 
üed
];

328 
ouŒ0
[
RGB_GREEN
] = 
¿nge_lim™
[
y
 + 
cg»’
];

329 
ouŒ0
[
RGB_BLUE
] = 
¿nge_lim™
[
y
 + 
cblue
];

330 
ouŒ0
 +ğ
RGB_PIXELSIZE
;

331 
y
 = 
	`GETJSAMPLE
(*
š±r01
++);

332 
ouŒ1
[
RGB_RED
] = 
¿nge_lim™
[
y
 + 
üed
];

333 
ouŒ1
[
RGB_GREEN
] = 
¿nge_lim™
[
y
 + 
cg»’
];

334 
ouŒ1
[
RGB_BLUE
] = 
¿nge_lim™
[
y
 + 
cblue
];

335 
ouŒ1
 +ğ
RGB_PIXELSIZE
;

336 
y
 = 
	`GETJSAMPLE
(*
š±r01
++);

337 
ouŒ1
[
RGB_RED
] = 
¿nge_lim™
[
y
 + 
üed
];

338 
ouŒ1
[
RGB_GREEN
] = 
¿nge_lim™
[
y
 + 
cg»’
];

339 
ouŒ1
[
RGB_BLUE
] = 
¿nge_lim™
[
y
 + 
cblue
];

340 
ouŒ1
 +ğ
RGB_PIXELSIZE
;

343 ià(
cšfo
->
ouut_width
 & 1) {

344 
cb
 = 
	`GETJSAMPLE
(*
š±r1
);

345 
ü
 = 
	`GETJSAMPLE
(*
š±r2
);

346 
üed
 = 
C¼b
[
ü
];

347 
cg»’
 = (è
	`RIGHT_SHIFT
(
Cbgb
[
cb
] + 
Crgb
[
ü
], 
SCALEBITS
);

348 
cblue
 = 
Cbbb
[
cb
];

349 
y
 = 
	`GETJSAMPLE
(*
š±r00
);

350 
ouŒ0
[
RGB_RED
] = 
¿nge_lim™
[
y
 + 
üed
];

351 
ouŒ0
[
RGB_GREEN
] = 
¿nge_lim™
[
y
 + 
cg»’
];

352 
ouŒ0
[
RGB_BLUE
] = 
¿nge_lim™
[
y
 + 
cblue
];

353 
y
 = 
	`GETJSAMPLE
(*
š±r01
);

354 
ouŒ1
[
RGB_RED
] = 
¿nge_lim™
[
y
 + 
üed
];

355 
ouŒ1
[
RGB_GREEN
] = 
¿nge_lim™
[
y
 + 
cg»’
];

356 
ouŒ1
[
RGB_BLUE
] = 
¿nge_lim™
[
y
 + 
cblue
];

358 
	}
}

369 
	$GLOBAL
()

370 
	$jš™_m”ged_up§m¶”
 (
j_decom´ess_±r
 
cšfo
)

372 
my_up§m¶e_±r
 
up§m¶e
;

374 
up§m¶e
 = (
my_up§m¶e_±r
)

375 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

376 
	`SIZEOF
(
my_up§m¶”
));

377 
cšfo
->
up§m¶e
 = (
j³g_up§m¶”
 *) upsample;

378 
up§m¶e
->
pub
.
¡¬t_·ss
 = 
¡¬t_·ss_m”ged_up§m¶e
;

379 
up§m¶e
->
pub
.
Ãed_cÚ‹xt_rows
 = 
FALSE
;

381 
up§m¶e
->
out_row_width
 = 
cšfo
->
ouut_width
 * cšfo->
out_cŞÜ_compÚ’ts
;

383 ià(
cšfo
->
max_v_§mp_çùÜ
 == 2) {

384 
up§m¶e
->
pub
.up§m¶ğ
m”ged_2v_up§m¶e
;

385 
up§m¶e
->
upm‘hod
 = 
h2v2_m”ged_up§m¶e
;

387 
up§m¶e
->
¥¬e_row
 = (
JSAMPROW
)

388 (*
cšfo
->
mem
->
®loc_Ïrge
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

389 (
size_t
è(
up§m¶e
->
out_row_width
 * 
	`SIZEOF
(
JSAMPLE
)));

391 
up§m¶e
->
pub
.up§m¶ğ
m”ged_1v_up§m¶e
;

392 
up§m¶e
->
upm‘hod
 = 
h2v1_m”ged_up§m¶e
;

394 
up§m¶e
->
¥¬e_row
 = 
NULL
;

397 
	`bud_ycc_rgb_bË
(
cšfo
);

398 
	}
}

	@jdphuff.c

17 
	#JPEG_INTERNALS


	)

18 
	~"jšşude.h
"

19 
	~"j³glib.h
"

20 
	~"jdhuff.h
"

23 #ifdeà
D_PROGRESSIVE_SUPPORTED


33 
	mEOBRUN
;

34 
	mÏ¡_dc_v®
[
MAX_COMPS_IN_SCAN
];

35 } 
	t§vabË_¡©e
;

42 #iâdeà
NO_STRUCT_ASSIGN


43 
	#ASSIGN_STATE
(
de¡
,
¤c
è((de¡èğ(¤c))

	)

45 #ià
MAX_COMPS_IN_SCAN
 == 4

46 
	#ASSIGN_STATE
(
de¡
,
¤c
) \

47 ((
de¡
).
EOBRUN
 = (
¤c
).EOBRUN, \

48 (
de¡
).
Ï¡_dc_v®
[0] = (
¤c
).last_dc_val[0], \

49 (
de¡
).
Ï¡_dc_v®
[1] = (
¤c
).last_dc_val[1], \

50 (
de¡
).
Ï¡_dc_v®
[2] = (
¤c
).last_dc_val[2], \

51 (
de¡
).
Ï¡_dc_v®
[3] = (
¤c
).Ï¡_dc_v®[3])

	)

57 
j³g_’Œİy_decod”
 
	mpub
;

62 
b™»ad_³rm_¡©e
 
	mb™¡©e
;

63 
§vabË_¡©e
 
	m§ved
;

66 
	m»¡¬ts_to_go
;

69 
d_d”ived_tbl
 * 
	md”ived_tbls
[
NUM_HUFF_TBLS
];

71 
d_d”ived_tbl
 * 
	mac_d”ived_tbl
;

72 } 
	tphuff_’Œİy_decod”
;

74 
phuff_’Œİy_decod”
 * 
	tphuff_’Œİy_±r
;

77 
	$METHODDEF
(
boŞ—n
è
decode_mcu_DC_fœ¡
 
	`JPP
((
j_decom´ess_±r
 
cšfo
,

78 
JBLOCKROW
 *
MCU_d©a
));

79 
	$METHODDEF
(
boŞ—n
è
decode_mcu_AC_fœ¡
 
	`JPP
((
j_decom´ess_±r
 
cšfo
,

80 
JBLOCKROW
 *
MCU_d©a
));

81 
	$METHODDEF
(
boŞ—n
è
decode_mcu_DC_»fše
 
	`JPP
((
j_decom´ess_±r
 
cšfo
,

82 
JBLOCKROW
 *
MCU_d©a
));

83 
	$METHODDEF
(
boŞ—n
è
decode_mcu_AC_»fše
 
	`JPP
((
j_decom´ess_±r
 
cšfo
,

84 
JBLOCKROW
 *
MCU_d©a
));

91 
	$METHODDEF
()

92 
	$¡¬t_·ss_phuff_decod”
 (
j_decom´ess_±r
 
cšfo
)

94 
phuff_’Œİy_±r
 
’Œİy
 = (phuff_’Œİy_±rè
cšfo
->entropy;

95 
boŞ—n
 
is_DC_bªd
, 
bad
;

96 
ci
, 
cÛfi
, 
tbl
;

97 *
cÛf_b™_±r
;

98 
j³g_compÚ’t_šfo
 * 
comµŒ
;

100 
is_DC_bªd
 = (
cšfo
->
Ss
 == 0);

103 
bad
 = 
FALSE
;

104 ià(
is_DC_bªd
) {

105 ià(
cšfo
->
Se
 != 0)

106 
bad
 = 
TRUE
;

109 ià(
cšfo
->
Ss
 > cšfo->
Se
 || cšfo->S>ğ
DCTSIZE2
)

110 
bad
 = 
TRUE
;

112 ià(
cšfo
->
comps_š_sÿn
 != 1)

113 
bad
 = 
TRUE
;

115 ià(
cšfo
->
Ah
 != 0) {

117 ià(
cšfo
->
Al
 !ğcšfo->
Ah
-1)

118 
bad
 = 
TRUE
;

120 ià(
cšfo
->
Al
 > 13)

121 
bad
 = 
TRUE
;

128 ià(
bad
)

129 
	`ERREXIT4
(
cšfo
, 
JERR_BAD_PROGRESSION
,

130 
cšfo
->
Ss
, cšfo->
Se
, cšfo->
Ah
, cšfo->
Al
);

135 
ci
 = 0; c˜< 
cšfo
->
comps_š_sÿn
; ci++) {

136 
cšdex
 = 
cšfo
->
cur_comp_šfo
[
ci
]->
compÚ’t_šdex
;

137 
cÛf_b™_±r
 = & 
cšfo
->
cÛf_b™s
[
cšdex
][0];

138 ià(!
is_DC_bªd
 && 
cÛf_b™_±r
[0] < 0)

139 
	`WARNMS2
(
cšfo
, 
JWRN_BOGUS_PROGRESSION
, 
cšdex
, 0);

140 
cÛfi
 = 
cšfo
->
Ss
; cÛf˜<ğcšfo->
Se
; coefi++) {

141 
ex³ùed
 = (
cÛf_b™_±r
[
cÛfi
] < 0) ? 0 : coef_bit_ptr[coefi];

142 ià(
cšfo
->
Ah
 !ğ
ex³ùed
)

143 
	`WARNMS2
(
cšfo
, 
JWRN_BOGUS_PROGRESSION
, 
cšdex
, 
cÛfi
);

144 
cÛf_b™_±r
[
cÛfi
] = 
cšfo
->
Al
;

149 ià(
cšfo
->
Ah
 == 0) {

150 ià(
is_DC_bªd
)

151 
’Œİy
->
pub
.
decode_mcu
 = 
decode_mcu_DC_fœ¡
;

153 
’Œİy
->
pub
.
decode_mcu
 = 
decode_mcu_AC_fœ¡
;

155 ià(
is_DC_bªd
)

156 
’Œİy
->
pub
.
decode_mcu
 = 
decode_mcu_DC_»fše
;

158 
’Œİy
->
pub
.
decode_mcu
 = 
decode_mcu_AC_»fše
;

161 
ci
 = 0; c˜< 
cšfo
->
comps_š_sÿn
; ci++) {

162 
comµŒ
 = 
cšfo
->
cur_comp_šfo
[
ci
];

166 ià(
is_DC_bªd
) {

167 ià(
cšfo
->
Ah
 == 0) {

168 
tbl
 = 
comµŒ
->
dc_tbl_no
;

169 
	`j³g_make_d_d”ived_tbl
(
cšfo
, 
TRUE
, 
tbl
,

170 & 
’Œİy
->
d”ived_tbls
[
tbl
]);

173 
tbl
 = 
comµŒ
->
ac_tbl_no
;

174 
	`j³g_make_d_d”ived_tbl
(
cšfo
, 
FALSE
, 
tbl
,

175 & 
’Œİy
->
d”ived_tbls
[
tbl
]);

177 
’Œİy
->
ac_d”ived_tbl
 =ƒÁrİy->
d”ived_tbls
[
tbl
];

180 
’Œİy
->
§ved
.
Ï¡_dc_v®
[
ci
] = 0;

184 
’Œİy
->
b™¡©e
.
b™s_Ëá
 = 0;

185 
’Œİy
->
b™¡©e
.
g‘_bufãr
 = 0;

186 
’Œİy
->
pub
.
šsuffic›Á_d©a
 = 
FALSE
;

189 
’Œİy
->
§ved
.
EOBRUN
 = 0;

192 
’Œİy
->
»¡¬ts_to_go
 = 
cšfo
->
»¡¬t_š‹rv®
;

193 
	}
}

201 #ifdeà
AVOID_TABLES


203 
	#HUFF_EXTEND
(
x
,
s
è((xè< (1<<((s)-1)è? (xè+ (((-1)<<(s)è+ 1è: (x))

	)

207 
	#HUFF_EXTEND
(
x
,
s
è((xè< 
ex‹nd_‹¡
[s] ? (xè+ 
ex‹nd_off£t
[s] : (x))

	)

209 cÚ¡ 
	gex‹nd_‹¡
[16] =

213 cÚ¡ 
	gex‹nd_off£t
[16] =

227 
	$LOCAL
(
boŞ—n
)

228 
	$´oûss_»¡¬t
 (
j_decom´ess_±r
 
cšfo
)

230 
phuff_’Œİy_±r
 
’Œİy
 = (phuff_’Œİy_±rè
cšfo
->entropy;

231 
ci
;

235 
cšfo
->
m¬k”
->
disÿrded_by‹s
 +ğ
’Œİy
->
b™¡©e
.
b™s_Ëá
 / 8;

236 
’Œİy
->
b™¡©e
.
b™s_Ëá
 = 0;

239 ià(! (*
cšfo
->
m¬k”
->
»ad_»¡¬t_m¬k”
) (cinfo))

240  
FALSE
;

243 
ci
 = 0; c˜< 
cšfo
->
comps_š_sÿn
; ci++)

244 
’Œİy
->
§ved
.
Ï¡_dc_v®
[
ci
] = 0;

246 
’Œİy
->
§ved
.
EOBRUN
 = 0;

249 
’Œİy
->
»¡¬ts_to_go
 = 
cšfo
->
»¡¬t_š‹rv®
;

256 ià(
cšfo
->
uÄ—d_m¬k”
 == 0)

257 
’Œİy
->
pub
.
šsuffic›Á_d©a
 = 
FALSE
;

259  
TRUE
;

260 
	}
}

285 
	$METHODDEF
(
boŞ—n
)

286 
	$decode_mcu_DC_fœ¡
 (
j_decom´ess_±r
 
cšfo
, 
JBLOCKROW
 *
MCU_d©a
)

288 
phuff_’Œİy_±r
 
’Œİy
 = (phuff_’Œİy_±rè
cšfo
->entropy;

289 
Al
 = 
cšfo
->Al;

290 
s
, 
r
;

291 
blkn
, 
ci
;

292 
JBLOCKROW
 
block
;

293 
BITREAD_STATE_VARS
;

294 
§vabË_¡©e
 
¡©e
;

295 
d_d”ived_tbl
 * 
tbl
;

296 
j³g_compÚ’t_šfo
 * 
comµŒ
;

299 ià(
cšfo
->
»¡¬t_š‹rv®
) {

300 ià(
’Œİy
->
»¡¬ts_to_go
 == 0)

301 ià(! 
	`´oûss_»¡¬t
(
cšfo
))

302  
FALSE
;

308 ià(! 
’Œİy
->
pub
.
šsuffic›Á_d©a
) {

311 
	`BITREAD_LOAD_STATE
(
cšfo
,
’Œİy
->
b™¡©e
);

312 
	`ASSIGN_STATE
(
¡©e
, 
’Œİy
->
§ved
);

316 
blkn
 = 0; blkÀ< 
cšfo
->
blocks_š_MCU
; blkn++) {

317 
block
 = 
MCU_d©a
[
blkn
];

318 
ci
 = 
cšfo
->
MCU_memb”sh
[
blkn
];

319 
comµŒ
 = 
cšfo
->
cur_comp_šfo
[
ci
];

320 
tbl
 = 
’Œİy
->
d”ived_tbls
[
comµŒ
->
dc_tbl_no
];

325 
	`HUFF_DECODE
(
s
, 
br_¡©e
, 
tbl
,  
FALSE
, 
Ïb–1
);

326 ià(
s
) {

327 
	`CHECK_BIT_BUFFER
(
br_¡©e
, 
s
,  
FALSE
);

328 
r
 = 
	`GET_BITS
(
s
);

329 
s
 = 
	`HUFF_EXTEND
(
r
, s);

333 
s
 +ğ
¡©e
.
Ï¡_dc_v®
[
ci
];

334 
¡©e
.
Ï¡_dc_v®
[
ci
] = 
s
;

336 (*
block
)[0] = (
JCOEF
è(
s
 << 
Al
);

340 
	`BITREAD_SAVE_STATE
(
cšfo
,
’Œİy
->
b™¡©e
);

341 
	`ASSIGN_STATE
(
’Œİy
->
§ved
, 
¡©e
);

345 
’Œİy
->
»¡¬ts_to_go
--;

347  
TRUE
;

348 
	}
}

356 
	$METHODDEF
(
boŞ—n
)

357 
	$decode_mcu_AC_fœ¡
 (
j_decom´ess_±r
 
cšfo
, 
JBLOCKROW
 *
MCU_d©a
)

359 
phuff_’Œİy_±r
 
’Œİy
 = (phuff_’Œİy_±rè
cšfo
->entropy;

360 
Se
 = 
cšfo
->Se;

361 
Al
 = 
cšfo
->Al;

362 
s
, 
k
, 
r
;

363 
EOBRUN
;

364 
JBLOCKROW
 
block
;

365 
BITREAD_STATE_VARS
;

366 
d_d”ived_tbl
 * 
tbl
;

369 ià(
cšfo
->
»¡¬t_š‹rv®
) {

370 ià(
’Œİy
->
»¡¬ts_to_go
 == 0)

371 ià(! 
	`´oûss_»¡¬t
(
cšfo
))

372  
FALSE
;

378 ià(! 
’Œİy
->
pub
.
šsuffic›Á_d©a
) {

383 
EOBRUN
 = 
’Œİy
->
§ved
.EOBRUN;

387 ià(
EOBRUN
 > 0)

388 
EOBRUN
--;

390 
	`BITREAD_LOAD_STATE
(
cšfo
,
’Œİy
->
b™¡©e
);

391 
block
 = 
MCU_d©a
[0];

392 
tbl
 = 
’Œİy
->
ac_d”ived_tbl
;

394 
k
 = 
cšfo
->
Ss
; k <ğ
Se
; k++) {

395 
	`HUFF_DECODE
(
s
, 
br_¡©e
, 
tbl
,  
FALSE
, 
Ïb–2
);

396 
r
 = 
s
 >> 4;

397 
s
 &= 15;

398 ià(
s
) {

399 
k
 +ğ
r
;

400 
	`CHECK_BIT_BUFFER
(
br_¡©e
, 
s
,  
FALSE
);

401 
r
 = 
	`GET_BITS
(
s
);

402 
s
 = 
	`HUFF_EXTEND
(
r
, s);

404 (*
block
)[
j³g_Çtu¿l_Üd”
[
k
]] = (
JCOEF
è(
s
 << 
Al
);

406 ià(
r
 == 15) {

407 
k
 += 15;

409 
EOBRUN
 = 1 << 
r
;

410 ià(
r
) {

411 
	`CHECK_BIT_BUFFER
(
br_¡©e
, 
r
,  
FALSE
);

412 
r
 = 
	`GET_BITS
(r);

413 
EOBRUN
 +ğ
r
;

415 
EOBRUN
--;

421 
	`BITREAD_SAVE_STATE
(
cšfo
,
’Œİy
->
b™¡©e
);

425 
’Œİy
->
§ved
.
EOBRUN
 = EOBRUN;

429 
’Œİy
->
»¡¬ts_to_go
--;

431  
TRUE
;

432 
	}
}

441 
	$METHODDEF
(
boŞ—n
)

442 
	$decode_mcu_DC_»fše
 (
j_decom´ess_±r
 
cšfo
, 
JBLOCKROW
 *
MCU_d©a
)

444 
phuff_’Œİy_±r
 
’Œİy
 = (phuff_’Œİy_±rè
cšfo
->entropy;

445 
p1
 = 1 << 
cšfo
->
Al
;

446 
blkn
;

447 
JBLOCKROW
 
block
;

448 
BITREAD_STATE_VARS
;

451 ià(
cšfo
->
»¡¬t_š‹rv®
) {

452 ià(
’Œİy
->
»¡¬ts_to_go
 == 0)

453 ià(! 
	`´oûss_»¡¬t
(
cšfo
))

454  
FALSE
;

462 
	`BITREAD_LOAD_STATE
(
cšfo
,
’Œİy
->
b™¡©e
);

466 
blkn
 = 0; blkÀ< 
cšfo
->
blocks_š_MCU
; blkn++) {

467 
block
 = 
MCU_d©a
[
blkn
];

470 
	`CHECK_BIT_BUFFER
(
br_¡©e
, 1,  
FALSE
);

471 ià(
	`GET_BITS
(1))

472 (*
block
)[0] |ğ
p1
;

477 
	`BITREAD_SAVE_STATE
(
cšfo
,
’Œİy
->
b™¡©e
);

480 
’Œİy
->
»¡¬ts_to_go
--;

482  
TRUE
;

483 
	}
}

490 
	$METHODDEF
(
boŞ—n
)

491 
	$decode_mcu_AC_»fše
 (
j_decom´ess_±r
 
cšfo
, 
JBLOCKROW
 *
MCU_d©a
)

493 
phuff_’Œİy_±r
 
’Œİy
 = (phuff_’Œİy_±rè
cšfo
->entropy;

494 
Se
 = 
cšfo
->Se;

495 
p1
 = 1 << 
cšfo
->
Al
;

496 
m1
 = (-1è<< 
cšfo
->
Al
;

497 
s
, 
k
, 
r
;

498 
EOBRUN
;

499 
JBLOCKROW
 
block
;

500 
JCOEFPTR
 
thiscÛf
;

501 
BITREAD_STATE_VARS
;

502 
d_d”ived_tbl
 * 
tbl
;

503 
num_Ãwnz
;

504 
Ãwnz_pos
[
DCTSIZE2
];

507 ià(
cšfo
->
»¡¬t_š‹rv®
) {

508 ià(
’Œİy
->
»¡¬ts_to_go
 == 0)

509 ià(! 
	`´oûss_»¡¬t
(
cšfo
))

510  
FALSE
;

515 ià(! 
’Œİy
->
pub
.
šsuffic›Á_d©a
) {

518 
	`BITREAD_LOAD_STATE
(
cšfo
,
’Œİy
->
b™¡©e
);

519 
EOBRUN
 = 
’Œİy
->
§ved
.EOBRUN;

522 
block
 = 
MCU_d©a
[0];

523 
tbl
 = 
’Œİy
->
ac_d”ived_tbl
;

531 
num_Ãwnz
 = 0;

534 
k
 = 
cšfo
->
Ss
;

536 ià(
EOBRUN
 == 0) {

537 ; 
k
 <ğ
Se
; k++) {

538 
	`HUFF_DECODE
(
s
, 
br_¡©e
, 
tbl
, 
undo™
, 
Ïb–3
);

539 
r
 = 
s
 >> 4;

540 
s
 &= 15;

541 ià(
s
) {

542 ià(
s
 != 1)

543 
	`WARNMS
(
cšfo
, 
JWRN_HUFF_BAD_CODE
);

544 
	`CHECK_BIT_BUFFER
(
br_¡©e
, 1, 
undo™
);

545 ià(
	`GET_BITS
(1))

546 
s
 = 
p1
;

548 
s
 = 
m1
;

550 ià(
r
 != 15) {

551 
EOBRUN
 = 1 << 
r
;

552 ià(
r
) {

553 
	`CHECK_BIT_BUFFER
(
br_¡©e
, 
r
, 
undo™
);

554 
r
 = 
	`GET_BITS
(r);

555 
EOBRUN
 +ğ
r
;

566 
thiscÛf
 = *
block
 + 
j³g_Çtu¿l_Üd”
[
k
];

567 ià(*
thiscÛf
 != 0) {

568 
	`CHECK_BIT_BUFFER
(
br_¡©e
, 1, 
undo™
);

569 ià(
	`GET_BITS
(1)) {

570 ià((*
thiscÛf
 & 
p1
) == 0) {

571 ià(*
thiscÛf
 >= 0)

572 *
thiscÛf
 +ğ
p1
;

574 *
thiscÛf
 +ğ
m1
;

578 ià(--
r
 < 0)

581 
k
++;

582 } 
k
 <ğ
Se
);

583 ià(
s
) {

584 
pos
 = 
j³g_Çtu¿l_Üd”
[
k
];

586 (*
block
)[
pos
] = (
JCOEF
è
s
;

588 
Ãwnz_pos
[
num_Ãwnz
++] = 
pos
;

593 ià(
EOBRUN
 > 0) {

599 ; 
k
 <ğ
Se
; k++) {

600 
thiscÛf
 = *
block
 + 
j³g_Çtu¿l_Üd”
[
k
];

601 ià(*
thiscÛf
 != 0) {

602 
	`CHECK_BIT_BUFFER
(
br_¡©e
, 1, 
undo™
);

603 ià(
	`GET_BITS
(1)) {

604 ià((*
thiscÛf
 & 
p1
) == 0) {

605 ià(*
thiscÛf
 >= 0)

606 *
thiscÛf
 +ğ
p1
;

608 *
thiscÛf
 +ğ
m1
;

614 
EOBRUN
--;

618 
	`BITREAD_SAVE_STATE
(
cšfo
,
’Œİy
->
b™¡©e
);

619 
’Œİy
->
§ved
.
EOBRUN
 = EOBRUN;

623 
’Œİy
->
»¡¬ts_to_go
--;

625  
TRUE
;

627 
undo™
:

629 
num_Ãwnz
 > 0)

630 (*
block
)[
Ãwnz_pos
[--
num_Ãwnz
]] = 0;

632  
FALSE
;

633 
	}
}

640 
	$GLOBAL
()

641 
	$jš™_phuff_decod”
 (
j_decom´ess_±r
 
cšfo
)

643 
phuff_’Œİy_±r
 
’Œİy
;

644 *
cÛf_b™_±r
;

645 
ci
, 
i
;

647 
’Œİy
 = (
phuff_’Œİy_±r
)

648 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

649 
	`SIZEOF
(
phuff_’Œİy_decod”
));

650 
cšfo
->
’Œİy
 = (
j³g_’Œİy_decod”
 *)ƒntropy;

651 
’Œİy
->
pub
.
¡¬t_·ss
 = 
¡¬t_·ss_phuff_decod”
;

654 
i
 = 0; i < 
NUM_HUFF_TBLS
; i++) {

655 
’Œİy
->
d”ived_tbls
[
i
] = 
NULL
;

659 
cšfo
->
cÛf_b™s
 = ((*)[
DCTSIZE2
])

660 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

661 
cšfo
->
num_compÚ’ts
*
DCTSIZE2
*
	`SIZEOF
());

662 
cÛf_b™_±r
 = & 
cšfo
->
cÛf_b™s
[0][0];

663 
ci
 = 0; c˜< 
cšfo
->
num_compÚ’ts
; ci++)

664 
i
 = 0; i < 
DCTSIZE2
; i++)

665 *
cÛf_b™_±r
++ = -1;

666 
	}
}

	@jdpostct.c

19 
	#JPEG_INTERNALS


	)

20 
	~"jšşude.h
"

21 
	~"j³glib.h
"

27 
j³g_d_po¡_cÚŒŞËr
 
	mpub
;

34 
jvœt_§¼ay_±r
 
	mwhŞe_image
;

35 
JSAMPARRAY
 
	mbufãr
;

36 
JDIMENSION
 
	m¡r_height
;

38 
JDIMENSION
 
	m¡¬tšg_row
;

39 
JDIMENSION
 
	mÃxt_row
;

40 } 
	tmy_po¡_cÚŒŞËr
;

42 
my_po¡_cÚŒŞËr
 * 
	tmy_po¡_±r
;

46 
	$METHODDEF
(è
po¡_´oûss_1·ss


47 
	`JPP
((
j_decom´ess_±r
 
cšfo
,

48 
JSAMPIMAGE
 
šput_buf
, 
JDIMENSION
 *
š_row_group_ùr
,

49 
JDIMENSION
 
š_row_groups_ava
,

50 
JSAMPARRAY
 
ouut_buf
, 
JDIMENSION
 *
out_row_ùr
,

51 
JDIMENSION
 
out_rows_ava
));

52 #ifdeà
QUANT_2PASS_SUPPORTED


53 
	$METHODDEF
(è
po¡_´oûss_´•ass


54 
	`JPP
((
j_decom´ess_±r
 
cšfo
,

55 
JSAMPIMAGE
 
šput_buf
, 
JDIMENSION
 *
š_row_group_ùr
,

56 
JDIMENSION
 
š_row_groups_ava
,

57 
JSAMPARRAY
 
ouut_buf
, 
JDIMENSION
 *
out_row_ùr
,

58 
JDIMENSION
 
out_rows_ava
));

59 
	$METHODDEF
(è
po¡_´oûss_2·ss


60 
	`JPP
((
j_decom´ess_±r
 
cšfo
,

61 
JSAMPIMAGE
 
šput_buf
, 
JDIMENSION
 *
š_row_group_ùr
,

62 
JDIMENSION
 
š_row_groups_ava
,

63 
JSAMPARRAY
 
ouut_buf
, 
JDIMENSION
 *
out_row_ùr
,

64 
JDIMENSION
 
out_rows_ava
));

72 
	$METHODDEF
()

73 
	$¡¬t_·ss_dpo¡
 (
j_decom´ess_±r
 
cšfo
, 
J_BUF_MODE
 
·ss_mode
)

75 
my_po¡_±r
 
po¡
 = (my_po¡_±rè
cšfo
->post;

77 
·ss_mode
) {

78 
JBUF_PASS_THRU
:

79 ià(
cšfo
->
quªtize_cŞÜs
) {

81 
po¡
->
pub
.
po¡_´oûss_d©a
 = 
po¡_´oûss_1·ss
;

86 ià(
po¡
->
bufãr
 =ğ
NULL
) {

87 
po¡
->
bufãr
 = (*
cšfo
->
mem
->
acûss_vœt_§¼ay
)

88 ((
j_commÚ_±r
è
cšfo
, 
po¡
->
whŞe_image
,

89 (
JDIMENSION
è0, 
po¡
->
¡r_height
, 
TRUE
);

95 
po¡
->
pub
.
po¡_´oûss_d©a
 = 
cšfo
->
up§m¶e
->upsample;

98 #ifdeà
QUANT_2PASS_SUPPORTED


99 
JBUF_SAVE_AND_PASS
:

101 ià(
po¡
->
whŞe_image
 =ğ
NULL
)

102 
	`ERREXIT
(
cšfo
, 
JERR_BAD_BUFFER_MODE
);

103 
po¡
->
pub
.
po¡_´oûss_d©a
 = 
po¡_´oûss_´•ass
;

105 
JBUF_CRANK_DEST
:

107 ià(
po¡
->
whŞe_image
 =ğ
NULL
)

108 
	`ERREXIT
(
cšfo
, 
JERR_BAD_BUFFER_MODE
);

109 
po¡
->
pub
.
po¡_´oûss_d©a
 = 
po¡_´oûss_2·ss
;

113 
	`ERREXIT
(
cšfo
, 
JERR_BAD_BUFFER_MODE
);

116 
po¡
->
¡¬tšg_row
 =…o¡->
Ãxt_row
 = 0;

117 
	}
}

125 
	$METHODDEF
()

126 
	$po¡_´oûss_1·ss
 (
j_decom´ess_±r
 
cšfo
,

127 
JSAMPIMAGE
 
šput_buf
, 
JDIMENSION
 *
š_row_group_ùr
,

128 
JDIMENSION
 
š_row_groups_ava
,

129 
JSAMPARRAY
 
ouut_buf
, 
JDIMENSION
 *
out_row_ùr
,

130 
JDIMENSION
 
out_rows_ava
)

132 
my_po¡_±r
 
po¡
 = (my_po¡_±rè
cšfo
->post;

133 
JDIMENSION
 
num_rows
, 
max_rows
;

137 
max_rows
 = 
out_rows_ava
 - *
out_row_ùr
;

138 ià(
max_rows
 > 
po¡
->
¡r_height
)

139 
max_rows
 = 
po¡
->
¡r_height
;

140 
num_rows
 = 0;

141 (*
cšfo
->
up§m¶e
->upsample) (cinfo,

142 
šput_buf
, 
š_row_group_ùr
, 
š_row_groups_ava
,

143 
po¡
->
bufãr
, &
num_rows
, 
max_rows
);

145 (*
cšfo
->
cquªtize
->
cŞÜ_quªtize
) (cinfo,

146 
po¡
->
bufãr
, 
ouut_buf
 + *
out_row_ùr
, (è
num_rows
);

147 *
out_row_ùr
 +ğ
num_rows
;

148 
	}
}

151 #ifdeà
QUANT_2PASS_SUPPORTED


157 
	$METHODDEF
()

158 
	$po¡_´oûss_´•ass
 (
j_decom´ess_±r
 
cšfo
,

159 
JSAMPIMAGE
 
šput_buf
, 
JDIMENSION
 *
š_row_group_ùr
,

160 
JDIMENSION
 
š_row_groups_ava
,

161 
JSAMPARRAY
 
ouut_buf
, 
JDIMENSION
 *
out_row_ùr
,

162 
JDIMENSION
 
out_rows_ava
)

164 
my_po¡_±r
 
po¡
 = (my_po¡_±rè
cšfo
->post;

165 
JDIMENSION
 
Şd_Ãxt_row
, 
num_rows
;

168 ià(
po¡
->
Ãxt_row
 == 0) {

169 
po¡
->
bufãr
 = (*
cšfo
->
mem
->
acûss_vœt_§¼ay
)

170 ((
j_commÚ_±r
è
cšfo
, 
po¡
->
whŞe_image
,

171 
po¡
->
¡¬tšg_row
,…o¡->
¡r_height
, 
TRUE
);

175 
Şd_Ãxt_row
 = 
po¡
->
Ãxt_row
;

176 (*
cšfo
->
up§m¶e
->upsample) (cinfo,

177 
šput_buf
, 
š_row_group_ùr
, 
š_row_groups_ava
,

178 
po¡
->
bufãr
, &po¡->
Ãxt_row
,…o¡->
¡r_height
);

182 ià(
po¡
->
Ãxt_row
 > 
Şd_Ãxt_row
) {

183 
num_rows
 = 
po¡
->
Ãxt_row
 - 
Şd_Ãxt_row
;

184 (*
cšfo
->
cquªtize
->
cŞÜ_quªtize
è(cšfo, 
po¡
->
bufãr
 + 
Şd_Ãxt_row
,

185 (
JSAMPARRAY
è
NULL
, (è
num_rows
);

186 *
out_row_ùr
 +ğ
num_rows
;

190 ià(
po¡
->
Ãxt_row
 >ğpo¡->
¡r_height
) {

191 
po¡
->
¡¬tšg_row
 +ğpo¡->
¡r_height
;

192 
po¡
->
Ãxt_row
 = 0;

194 
	}
}

201 
	$METHODDEF
()

202 
	$po¡_´oûss_2·ss
 (
j_decom´ess_±r
 
cšfo
,

203 
JSAMPIMAGE
 
šput_buf
, 
JDIMENSION
 *
š_row_group_ùr
,

204 
JDIMENSION
 
š_row_groups_ava
,

205 
JSAMPARRAY
 
ouut_buf
, 
JDIMENSION
 *
out_row_ùr
,

206 
JDIMENSION
 
out_rows_ava
)

208 
my_po¡_±r
 
po¡
 = (my_po¡_±rè
cšfo
->post;

209 
JDIMENSION
 
num_rows
, 
max_rows
;

212 ià(
po¡
->
Ãxt_row
 == 0) {

213 
po¡
->
bufãr
 = (*
cšfo
->
mem
->
acûss_vœt_§¼ay
)

214 ((
j_commÚ_±r
è
cšfo
, 
po¡
->
whŞe_image
,

215 
po¡
->
¡¬tšg_row
,…o¡->
¡r_height
, 
FALSE
);

219 
num_rows
 = 
po¡
->
¡r_height
 -…o¡->
Ãxt_row
;

220 
max_rows
 = 
out_rows_ava
 - *
out_row_ùr
;

221 ià(
num_rows
 > 
max_rows
)

222 
num_rows
 = 
max_rows
;

224 
max_rows
 = 
cšfo
->
ouut_height
 - 
po¡
->
¡¬tšg_row
;

225 ià(
num_rows
 > 
max_rows
)

226 
num_rows
 = 
max_rows
;

229 (*
cšfo
->
cquªtize
->
cŞÜ_quªtize
) (cinfo,

230 
po¡
->
bufãr
 +…o¡->
Ãxt_row
, 
ouut_buf
 + *
out_row_ùr
,

231 (è
num_rows
);

232 *
out_row_ùr
 +ğ
num_rows
;

235 
po¡
->
Ãxt_row
 +ğ
num_rows
;

236 ià(
po¡
->
Ãxt_row
 >ğpo¡->
¡r_height
) {

237 
po¡
->
¡¬tšg_row
 +ğpo¡->
¡r_height
;

238 
po¡
->
Ãxt_row
 = 0;

240 
	}
}

249 
	$GLOBAL
()

250 
	$jš™_d_po¡_cÚŒŞËr
 (
j_decom´ess_±r
 
cšfo
, 
boŞ—n
 
Ãed_fuÎ_bufãr
)

252 
my_po¡_±r
 
po¡
;

254 
po¡
 = (
my_po¡_±r
)

255 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

256 
	`SIZEOF
(
my_po¡_cÚŒŞËr
));

257 
cšfo
->
po¡
 = (
j³g_d_po¡_cÚŒŞËr
 *)…ost;

258 
po¡
->
pub
.
¡¬t_·ss
 = 
¡¬t_·ss_dpo¡
;

259 
po¡
->
whŞe_image
 = 
NULL
;

260 
po¡
->
bufãr
 = 
NULL
;

263 ià(
cšfo
->
quªtize_cŞÜs
) {

268 
po¡
->
¡r_height
 = (
JDIMENSION
è
cšfo
->
max_v_§mp_çùÜ
;

269 ià(
Ãed_fuÎ_bufãr
) {

272 #ifdeà
QUANT_2PASS_SUPPORTED


273 
po¡
->
whŞe_image
 = (*
cšfo
->
mem
->
»que¡_vœt_§¼ay
)

274 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
, 
FALSE
,

275 
cšfo
->
ouut_width
 * cšfo->
out_cŞÜ_compÚ’ts
,

276 (
JDIMENSION
è
	`jround_up
((è
cšfo
->
ouut_height
,

277 (è
po¡
->
¡r_height
),

278 
po¡
->
¡r_height
);

280 
	`ERREXIT
(
cšfo
, 
JERR_BAD_BUFFER_MODE
);

284 
po¡
->
bufãr
 = (*
cšfo
->
mem
->
®loc_§¼ay
)

285 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
,

286 
cšfo
->
ouut_width
 * cšfo->
out_cŞÜ_compÚ’ts
,

287 
po¡
->
¡r_height
);

290 
	}
}

	@jdsample.c

21 
	#JPEG_INTERNALS


	)

22 
	~"jšşude.h
"

23 
	~"j³glib.h
"

27 
JMETHOD
(, 
	tup§m¶e1_±r
,

28 (
	tj_decom´ess_±r
 
	tcšfo
, 
	tj³g_compÚ’t_šfo
 * 
	tcomµŒ
,

29 
	tJSAMPARRAY
 
	tšput_d©a
, JSAMPARRAY * 
	touut_d©a_±r
));

34 
j³g_up§m¶”
 
	mpub
;

43 
JSAMPARRAY
 
	mcŞÜ_buf
[
MAX_COMPONENTS
];

46 
up§m¶e1_±r
 
	mm‘hods
[
MAX_COMPONENTS
];

48 
	mÃxt_row_out
;

49 
JDIMENSION
 
	mrows_to_go
;

52 
	mrowgroup_height
[
MAX_COMPONENTS
];

57 
UINT8
 
	mh_ex·nd
[
MAX_COMPONENTS
];

58 
UINT8
 
	mv_ex·nd
[
MAX_COMPONENTS
];

59 } 
	tmy_up§m¶”
;

61 
my_up§m¶”
 * 
	tmy_up§m¶e_±r
;

68 
	$METHODDEF
()

69 
	$¡¬t_·ss_up§m¶e
 (
j_decom´ess_±r
 
cšfo
)

71 
my_up§m¶e_±r
 
up§m¶e
 = (my_up§m¶e_±rè
cšfo
->upsample;

74 
up§m¶e
->
Ãxt_row_out
 = 
cšfo
->
max_v_§mp_çùÜ
;

76 
up§m¶e
->
rows_to_go
 = 
cšfo
->
ouut_height
;

77 
	}
}

88 
	$METHODDEF
()

89 
	$£p_up§m¶e
 (
j_decom´ess_±r
 
cšfo
,

90 
JSAMPIMAGE
 
šput_buf
, 
JDIMENSION
 *
š_row_group_ùr
,

91 
JDIMENSION
 
š_row_groups_ava
,

92 
JSAMPARRAY
 
ouut_buf
, 
JDIMENSION
 *
out_row_ùr
,

93 
JDIMENSION
 
out_rows_ava
)

95 
my_up§m¶e_±r
 
up§m¶e
 = (my_up§m¶e_±rè
cšfo
->upsample;

96 
ci
;

97 
j³g_compÚ’t_šfo
 * 
comµŒ
;

98 
JDIMENSION
 
num_rows
;

101 ià(
up§m¶e
->
Ãxt_row_out
 >ğ
cšfo
->
max_v_§mp_çùÜ
) {

102 
ci
 = 0, 
comµŒ
 = 
cšfo
->
comp_šfo
; c˜< cšfo->
num_compÚ’ts
;

103 
ci
++, 
comµŒ
++) {

107 (*
up§m¶e
->
m‘hods
[
ci
]è(
cšfo
, 
comµŒ
,

108 
šput_buf
[
ci
] + (*
š_row_group_ùr
 * 
up§m¶e
->
rowgroup_height
[ci]),

109 
up§m¶e
->
cŞÜ_buf
 + 
ci
);

111 
up§m¶e
->
Ãxt_row_out
 = 0;

117 
num_rows
 = (
JDIMENSION
è(
cšfo
->
max_v_§mp_çùÜ
 - 
up§m¶e
->
Ãxt_row_out
);

121 ià(
num_rows
 > 
up§m¶e
->
rows_to_go
)

122 
num_rows
 = 
up§m¶e
->
rows_to_go
;

124 
out_rows_ava
 -ğ*
out_row_ùr
;

125 ià(
num_rows
 > 
out_rows_ava
)

126 
num_rows
 = 
out_rows_ava
;

128 (*
cšfo
->
ccÚv”t
->
cŞÜ_cÚv”t
è(cšfo, 
up§m¶e
->
cŞÜ_buf
,

129 (
JDIMENSION
è
up§m¶e
->
Ãxt_row_out
,

130 
ouut_buf
 + *
out_row_ùr
,

131 (è
num_rows
);

134 *
out_row_ùr
 +ğ
num_rows
;

135 
up§m¶e
->
rows_to_go
 -ğ
num_rows
;

136 
up§m¶e
->
Ãxt_row_out
 +ğ
num_rows
;

138 ià(
up§m¶e
->
Ãxt_row_out
 >ğ
cšfo
->
max_v_§mp_çùÜ
)

139 (*
š_row_group_ùr
)++;

140 
	}
}

156 
	$METHODDEF
()

157 
	$fuÎsize_up§m¶e
 (
j_decom´ess_±r
 
cšfo
, 
j³g_compÚ’t_šfo
 * 
comµŒ
,

158 
JSAMPARRAY
 
šput_d©a
, JSAMPARRAY * 
ouut_d©a_±r
)

160 *
ouut_d©a_±r
 = 
šput_d©a
;

161 
	}
}

169 
	$METHODDEF
()

170 
	$noİ_up§m¶e
 (
j_decom´ess_±r
 
cšfo
, 
j³g_compÚ’t_šfo
 * 
comµŒ
,

171 
JSAMPARRAY
 
šput_d©a
, JSAMPARRAY * 
ouut_d©a_±r
)

173 *
ouut_d©a_±r
 = 
NULL
;

174 
	}
}

188 
	$METHODDEF
()

189 
	$št_up§m¶e
 (
j_decom´ess_±r
 
cšfo
, 
j³g_compÚ’t_šfo
 * 
comµŒ
,

190 
JSAMPARRAY
 
šput_d©a
, JSAMPARRAY * 
ouut_d©a_±r
)

192 
my_up§m¶e_±r
 
up§m¶e
 = (my_up§m¶e_±rè
cšfo
->upsample;

193 
JSAMPARRAY
 
ouut_d©a
 = *
ouut_d©a_±r
;

194 
JSAMPROW
 
š±r
, 
ouŒ
;

195 
JSAMPLE
 
šv®ue
;

196 
h
;

197 
JSAMPROW
 
ou‹nd
;

198 
h_ex·nd
, 
v_ex·nd
;

199 
šrow
, 
ouŒow
;

201 
h_ex·nd
 = 
up§m¶e
->h_ex·nd[
comµŒ
->
compÚ’t_šdex
];

202 
v_ex·nd
 = 
up§m¶e
->v_ex·nd[
comµŒ
->
compÚ’t_šdex
];

204 
šrow
 = 
ouŒow
 = 0;

205 
ouŒow
 < 
cšfo
->
max_v_§mp_çùÜ
) {

207 
š±r
 = 
šput_d©a
[
šrow
];

208 
ouŒ
 = 
ouut_d©a
[
ouŒow
];

209 
ou‹nd
 = 
ouŒ
 + 
cšfo
->
ouut_width
;

210 
ouŒ
 < 
ou‹nd
) {

211 
šv®ue
 = *
š±r
++;

212 
h
 = 
h_ex·nd
; h > 0; h--) {

213 *
ouŒ
++ = 
šv®ue
;

217 ià(
v_ex·nd
 > 1) {

218 
	`jcİy_§m¶e_rows
(
ouut_d©a
, 
ouŒow
, output_data, outrow+1,

219 
v_ex·nd
-1, 
cšfo
->
ouut_width
);

221 
šrow
++;

222 
ouŒow
 +ğ
v_ex·nd
;

224 
	}
}

232 
	$METHODDEF
()

233 
	$h2v1_up§m¶e
 (
j_decom´ess_±r
 
cšfo
, 
j³g_compÚ’t_šfo
 * 
comµŒ
,

234 
JSAMPARRAY
 
šput_d©a
, JSAMPARRAY * 
ouut_d©a_±r
)

236 
JSAMPARRAY
 
ouut_d©a
 = *
ouut_d©a_±r
;

237 
JSAMPROW
 
š±r
, 
ouŒ
;

238 
JSAMPLE
 
šv®ue
;

239 
JSAMPROW
 
ou‹nd
;

240 
šrow
;

242 
šrow
 = 0; iÄow < 
cšfo
->
max_v_§mp_çùÜ
; inrow++) {

243 
š±r
 = 
šput_d©a
[
šrow
];

244 
ouŒ
 = 
ouut_d©a
[
šrow
];

245 
ou‹nd
 = 
ouŒ
 + 
cšfo
->
ouut_width
;

246 
ouŒ
 < 
ou‹nd
) {

247 
šv®ue
 = *
š±r
++;

248 *
ouŒ
++ = 
šv®ue
;

249 *
ouŒ
++ = 
šv®ue
;

252 
	}
}

260 
	$METHODDEF
()

261 
	$h2v2_up§m¶e
 (
j_decom´ess_±r
 
cšfo
, 
j³g_compÚ’t_šfo
 * 
comµŒ
,

262 
JSAMPARRAY
 
šput_d©a
, JSAMPARRAY * 
ouut_d©a_±r
)

264 
JSAMPARRAY
 
ouut_d©a
 = *
ouut_d©a_±r
;

265 
JSAMPROW
 
š±r
, 
ouŒ
;

266 
JSAMPLE
 
šv®ue
;

267 
JSAMPROW
 
ou‹nd
;

268 
šrow
, 
ouŒow
;

270 
šrow
 = 
ouŒow
 = 0;

271 
ouŒow
 < 
cšfo
->
max_v_§mp_çùÜ
) {

272 
š±r
 = 
šput_d©a
[
šrow
];

273 
ouŒ
 = 
ouut_d©a
[
ouŒow
];

274 
ou‹nd
 = 
ouŒ
 + 
cšfo
->
ouut_width
;

275 
ouŒ
 < 
ou‹nd
) {

276 
šv®ue
 = *
š±r
++;

277 *
ouŒ
++ = 
šv®ue
;

278 *
ouŒ
++ = 
šv®ue
;

280 
	`jcİy_§m¶e_rows
(
ouut_d©a
, 
ouŒow
, output_data, outrow+1,

281 1, 
cšfo
->
ouut_width
);

282 
šrow
++;

283 
ouŒow
 += 2;

285 
	}
}

303 
	$METHODDEF
()

304 
	$h2v1_çncy_up§m¶e
 (
j_decom´ess_±r
 
cšfo
, 
j³g_compÚ’t_šfo
 * 
comµŒ
,

305 
JSAMPARRAY
 
šput_d©a
, JSAMPARRAY * 
ouut_d©a_±r
)

307 
JSAMPARRAY
 
ouut_d©a
 = *
ouut_d©a_±r
;

308 
JSAMPROW
 
š±r
, 
ouŒ
;

309 
šv®ue
;

310 
JDIMENSION
 
cŞùr
;

311 
šrow
;

313 
šrow
 = 0; iÄow < 
cšfo
->
max_v_§mp_çùÜ
; inrow++) {

314 
š±r
 = 
šput_d©a
[
šrow
];

315 
ouŒ
 = 
ouut_d©a
[
šrow
];

317 
šv®ue
 = 
	`GETJSAMPLE
(*
š±r
++);

318 *
ouŒ
++ = (
JSAMPLE
è
šv®ue
;

319 *
ouŒ
++ = (
JSAMPLE
è((
šv®ue
 * 3 + 
	`GETJSAMPLE
(*
š±r
) + 2) >> 2);

321 
cŞùr
 = 
comµŒ
->
down§m¶ed_width
 - 2; colctr > 0; colctr--) {

323 
šv®ue
 = 
	`GETJSAMPLE
(*
š±r
++) * 3;

324 *
ouŒ
++ = (
JSAMPLE
è((
šv®ue
 + 
	`GETJSAMPLE
(
š±r
[-2]) + 1) >> 2);

325 *
ouŒ
++ = (
JSAMPLE
è((
šv®ue
 + 
	`GETJSAMPLE
(*
š±r
) + 2) >> 2);

329 
šv®ue
 = 
	`GETJSAMPLE
(*
š±r
);

330 *
ouŒ
++ = (
JSAMPLE
è((
šv®ue
 * 3 + 
	`GETJSAMPLE
(
š±r
[-1]) + 1) >> 2);

331 *
ouŒ
++ = (
JSAMPLE
è
šv®ue
;

333 
	}
}

344 
	$METHODDEF
()

345 
	$h2v2_çncy_up§m¶e
 (
j_decom´ess_±r
 
cšfo
, 
j³g_compÚ’t_šfo
 * 
comµŒ
,

346 
JSAMPARRAY
 
šput_d©a
, JSAMPARRAY * 
ouut_d©a_±r
)

348 
JSAMPARRAY
 
ouut_d©a
 = *
ouut_d©a_±r
;

349 
JSAMPROW
 
š±r0
, 
š±r1
, 
ouŒ
;

350 #ià
BITS_IN_JSAMPLE
 == 8

351 
thiscŞsum
, 
Ï¡cŞsum
, 
ÃxtcŞsum
;

353 
INT32
 
thiscŞsum
, 
Ï¡cŞsum
, 
ÃxtcŞsum
;

355 
JDIMENSION
 
cŞùr
;

356 
šrow
, 
ouŒow
, 
v
;

358 
šrow
 = 
ouŒow
 = 0;

359 
ouŒow
 < 
cšfo
->
max_v_§mp_çùÜ
) {

360 
v
 = 0; v < 2; v++) {

362 
š±r0
 = 
šput_d©a
[
šrow
];

363 ià(
v
 == 0)

364 
š±r1
 = 
šput_d©a
[
šrow
-1];

366 
š±r1
 = 
šput_d©a
[
šrow
+1];

367 
ouŒ
 = 
ouut_d©a
[
ouŒow
++];

370 
thiscŞsum
 = 
	`GETJSAMPLE
(*
š±r0
++è* 3 + GETJSAMPLE(*
š±r1
++);

371 
ÃxtcŞsum
 = 
	`GETJSAMPLE
(*
š±r0
++è* 3 + GETJSAMPLE(*
š±r1
++);

372 *
ouŒ
++ = (
JSAMPLE
è((
thiscŞsum
 * 4 + 8) >> 4);

373 *
ouŒ
++ = (
JSAMPLE
è((
thiscŞsum
 * 3 + 
ÃxtcŞsum
 + 7) >> 4);

374 
Ï¡cŞsum
 = 
thiscŞsum
;hiscŞsum = 
ÃxtcŞsum
;

376 
cŞùr
 = 
comµŒ
->
down§m¶ed_width
 - 2; colctr > 0; colctr--) {

379 
ÃxtcŞsum
 = 
	`GETJSAMPLE
(*
š±r0
++è* 3 + GETJSAMPLE(*
š±r1
++);

380 *
ouŒ
++ = (
JSAMPLE
è((
thiscŞsum
 * 3 + 
Ï¡cŞsum
 + 8) >> 4);

381 *
ouŒ
++ = (
JSAMPLE
è((
thiscŞsum
 * 3 + 
ÃxtcŞsum
 + 7) >> 4);

382 
Ï¡cŞsum
 = 
thiscŞsum
;hiscŞsum = 
ÃxtcŞsum
;

386 *
ouŒ
++ = (
JSAMPLE
è((
thiscŞsum
 * 3 + 
Ï¡cŞsum
 + 8) >> 4);

387 *
ouŒ
++ = (
JSAMPLE
è((
thiscŞsum
 * 4 + 7) >> 4);

389 
šrow
++;

391 
	}
}

398 
	$GLOBAL
()

399 
	$jš™_up§m¶”
 (
j_decom´ess_±r
 
cšfo
)

401 
my_up§m¶e_±r
 
up§m¶e
;

402 
ci
;

403 
j³g_compÚ’t_šfo
 * 
comµŒ
;

404 
boŞ—n
 
Ãed_bufãr
, 
do_çncy
;

405 
h_š_group
, 
v_š_group
, 
h_out_group
, 
v_out_group
;

407 
up§m¶e
 = (
my_up§m¶e_±r
)

408 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

409 
	`SIZEOF
(
my_up§m¶”
));

410 
cšfo
->
up§m¶e
 = (
j³g_up§m¶”
 *) upsample;

411 
up§m¶e
->
pub
.
¡¬t_·ss
 = 
¡¬t_·ss_up§m¶e
;

412 
up§m¶e
->
pub
.up§m¶ğ
£p_up§m¶e
;

413 
up§m¶e
->
pub
.
Ãed_cÚ‹xt_rows
 = 
FALSE
;

415 ià(
cšfo
->
CCIR601_§m¶šg
)

416 
	`ERREXIT
(
cšfo
, 
JERR_CCIR601_NOTIMPL
);

421 
do_çncy
 = 
cšfo
->
do_çncy_up§m¶šg
 && cšfo->
mš_DCT_sÿËd_size
 > 1;

426 
ci
 = 0, 
comµŒ
 = 
cšfo
->
comp_šfo
; c˜< cšfo->
num_compÚ’ts
;

427 
ci
++, 
comµŒ
++) {

431 
h_š_group
 = (
comµŒ
->
h_§mp_çùÜ
 * comµŒ->
DCT_sÿËd_size
) /

432 
cšfo
->
mš_DCT_sÿËd_size
;

433 
v_š_group
 = (
comµŒ
->
v_§mp_çùÜ
 * comµŒ->
DCT_sÿËd_size
) /

434 
cšfo
->
mš_DCT_sÿËd_size
;

435 
h_out_group
 = 
cšfo
->
max_h_§mp_çùÜ
;

436 
v_out_group
 = 
cšfo
->
max_v_§mp_çùÜ
;

437 
up§m¶e
->
rowgroup_height
[
ci
] = 
v_š_group
;

438 
Ãed_bufãr
 = 
TRUE
;

439 ià(! 
comµŒ
->
compÚ’t_Ãeded
) {

441 
up§m¶e
->
m‘hods
[
ci
] = 
noİ_up§m¶e
;

442 
Ãed_bufãr
 = 
FALSE
;

443 } ià(
h_š_group
 =ğ
h_out_group
 && 
v_š_group
 =ğ
v_out_group
) {

445 
up§m¶e
->
m‘hods
[
ci
] = 
fuÎsize_up§m¶e
;

446 
Ãed_bufãr
 = 
FALSE
;

447 } ià(
h_š_group
 * 2 =ğ
h_out_group
 &&

448 
v_š_group
 =ğ
v_out_group
) {

450 ià(
do_çncy
 && 
comµŒ
->
down§m¶ed_width
 > 2)

451 
up§m¶e
->
m‘hods
[
ci
] = 
h2v1_çncy_up§m¶e
;

453 
up§m¶e
->
m‘hods
[
ci
] = 
h2v1_up§m¶e
;

454 } ià(
h_š_group
 * 2 =ğ
h_out_group
 &&

455 
v_š_group
 * 2 =ğ
v_out_group
) {

457 ià(
do_çncy
 && 
comµŒ
->
down§m¶ed_width
 > 2) {

458 
up§m¶e
->
m‘hods
[
ci
] = 
h2v2_çncy_up§m¶e
;

459 
up§m¶e
->
pub
.
Ãed_cÚ‹xt_rows
 = 
TRUE
;

461 
up§m¶e
->
m‘hods
[
ci
] = 
h2v2_up§m¶e
;

462 } ià((
h_out_group
 % 
h_š_group
) == 0 &&

463 (
v_out_group
 % 
v_š_group
) == 0) {

465 
up§m¶e
->
m‘hods
[
ci
] = 
št_up§m¶e
;

466 
up§m¶e
->
h_ex·nd
[
ci
] = (
UINT8
è(
h_out_group
 / 
h_š_group
);

467 
up§m¶e
->
v_ex·nd
[
ci
] = (
UINT8
è(
v_out_group
 / 
v_š_group
);

469 
	`ERREXIT
(
cšfo
, 
JERR_FRACT_SAMPLE_NOTIMPL
);

470 ià(
Ãed_bufãr
) {

471 
up§m¶e
->
cŞÜ_buf
[
ci
] = (*
cšfo
->
mem
->
®loc_§¼ay
)

472 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
,

473 (
JDIMENSION
è
	`jround_up
((è
cšfo
->
ouut_width
,

474 (è
cšfo
->
max_h_§mp_çùÜ
),

475 (
JDIMENSION
è
cšfo
->
max_v_§mp_çùÜ
);

478 
	}
}

	@jdtrans.c

13 
	#JPEG_INTERNALS


	)

14 
	~"jšşude.h
"

15 
	~"j³glib.h
"

19 
	$LOCAL
(è
Œªsdecode_ma¡”_£ËùiÚ
 
	`JPP
((
j_decom´ess_±r
 
cšfo
));

44 
	$GLOBAL
(
jvœt_b¬¿y_±r
 *)

45 
	$j³g_»ad_cÛffic›Ás
 (
j_decom´ess_±r
 
cšfo
)

47 ià(
cšfo
->
glob®_¡©e
 =ğ
DSTATE_READY
) {

49 
	`Œªsdecode_ma¡”_£ËùiÚ
(
cšfo
);

50 
cšfo
->
glob®_¡©e
 = 
DSTATE_RDCOEFS
;

52 ià(
cšfo
->
glob®_¡©e
 =ğ
DSTATE_RDCOEFS
) {

55 
»tcode
;

57 ià(
cšfo
->
´og»ss
 !ğ
NULL
)

58 (*
cšfo
->
´og»ss
->
´og»ss_mÚ™Ü
è((
j_commÚ_±r
) cinfo);

60 
»tcode
 = (*
cšfo
->
šputùl
->
cÚsume_šput
) (cinfo);

61 ià(
»tcode
 =ğ
JPEG_SUSPENDED
)

62  
NULL
;

63 ià(
»tcode
 =ğ
JPEG_REACHED_EOI
)

66 ià(
cšfo
->
´og»ss
 !ğ
NULL
 &&

67 (
»tcode
 =ğ
JPEG_ROW_COMPLETED
 ||„‘cod=ğ
JPEG_REACHED_SOS
)) {

68 ià(++
cšfo
->
´og»ss
->
·ss_couÁ”
 >ğcšfo->´og»ss->
·ss_lim™
) {

70 
cšfo
->
´og»ss
->
·ss_lim™
 +ğ(ècšfo->
tÙ®_iMCU_rows
;

75 
cšfo
->
glob®_¡©e
 = 
DSTATE_STOPPING
;

81 ià((
cšfo
->
glob®_¡©e
 =ğ
DSTATE_STOPPING
 ||

82 
cšfo
->
glob®_¡©e
 =ğ
DSTATE_BUFIMAGE
è&& cšfo->
bufã»d_image
) {

83  
cšfo
->
cÛf
->
cÛf_¬¿ys
;

86 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_STATE
, cšfo->
glob®_¡©e
);

87  
NULL
;

88 
	}
}

96 
	$LOCAL
()

97 
	$Œªsdecode_ma¡”_£ËùiÚ
 (
j_decom´ess_±r
 
cšfo
)

100 
cšfo
->
bufã»d_image
 = 
TRUE
;

103 ià(
cšfo
->
¬™h_code
) {

104 
	`ERREXIT
(
cšfo
, 
JERR_ARITH_NOTIMPL
);

106 ià(
cšfo
->
´og»ssive_mode
) {

107 #ifdeà
D_PROGRESSIVE_SUPPORTED


108 
	`jš™_phuff_decod”
(
cšfo
);

110 
	`ERREXIT
(
cšfo
, 
JERR_NOT_COMPILED
);

113 
	`jš™_huff_decod”
(
cšfo
);

117 
	`jš™_d_cÛf_cÚŒŞËr
(
cšfo
, 
TRUE
);

120 (*
cšfo
->
mem
->
»®ize_vœt_¬¿ys
è((
j_commÚ_±r
) cinfo);

123 (*
cšfo
->
šputùl
->
¡¬t_šput_·ss
) (cinfo);

126 ià(
cšfo
->
´og»ss
 !ğ
NULL
) {

127 
nsÿns
;

129 ià(
cšfo
->
´og»ssive_mode
) {

131 
nsÿns
 = 2 + 3 * 
cšfo
->
num_compÚ’ts
;

132 } ià(
cšfo
->
šputùl
->
has_muÉË_sÿns
) {

134 
nsÿns
 = 
cšfo
->
num_compÚ’ts
;

136 
nsÿns
 = 1;

138 
cšfo
->
´og»ss
->
·ss_couÁ”
 = 0L;

139 
cšfo
->
´og»ss
->
·ss_lim™
 = (ècšfo->
tÙ®_iMCU_rows
 * 
nsÿns
;

140 
cšfo
->
´og»ss
->
com¶‘ed_·s£s
 = 0;

141 
cšfo
->
´og»ss
->
tÙ®_·s£s
 = 1;

143 
	}
}

	@jerror.c

22 
	~"jšşude.h
"

23 
	~"j³glib.h
"

24 
	~"jv”siÚ.h
"

25 
	~"j”rÜ.h
"

27 #ifdeà
USE_WINDOWS_MESSAGEBOX


28 
	~<wšdows.h
>

31 #iâdeà
EXIT_FAILURE


32 
	#EXIT_FAILURE
 1

	)

44 #ifdeà
NEED_SHORT_EXTERNAL_NAMES


45 
	#j³g_¡d_mes§ge_bË
 
jMsgTabË


	)

48 
	#JMESSAGE
(
code
,
¡ršg
è¡ršg ,

	)

50 cÚ¡ * cÚ¡ 
	gj³g_¡d_mes§ge_bË
[] = {

51 
	~"j”rÜ.h
"

52 
NULL


69 
	$METHODDEF
()

70 
	$”rÜ_ex™
 (
j_commÚ_±r
 
cšfo
)

73 (*
cšfo
->
”r
->
ouut_mes§ge
) (cinfo);

76 
	`j³g_de¡roy
(
cšfo
);

78 
	`ex™
(
EXIT_FAILURE
);

79 
	}
}

97 
	$METHODDEF
()

98 
	$ouut_mes§ge
 (
j_commÚ_±r
 
cšfo
)

100 
bufãr
[
JMSG_LENGTH_MAX
];

103 (*
cšfo
->
”r
->
fÜm©_mes§ge
è(cšfo, 
bufãr
);

105 #ifdeà
USE_WINDOWS_MESSAGEBOX


107 
	`Mes§geBox
(
	`G‘AùiveWšdow
(), 
bufãr
, "JPEG Library Error",

108 
MB_OK
 | 
MB_ICONERROR
);

111 
	`årštf
(
¡d”r
, "%s\n", 
bufãr
);

113 
	}
}

127 
	$METHODDEF
()

128 
	$em™_mes§ge
 (
j_commÚ_±r
 
cšfo
, 
msg_Ëv–
)

130 
j³g_”rÜ_mgr
 * 
”r
 = 
cšfo
->err;

132 ià(
msg_Ëv–
 < 0) {

137 ià(
”r
->
num_w¬nšgs
 =ğ0 ||ƒ¼->
Œaû_Ëv–
 >= 3)

138 (*
”r
->
ouut_mes§ge
è(
cšfo
);

140 
”r
->
num_w¬nšgs
++;

143 ià(
”r
->
Œaû_Ëv–
 >ğ
msg_Ëv–
)

144 (*
”r
->
ouut_mes§ge
è(
cšfo
);

146 
	}
}

156 
	$METHODDEF
()

157 
	$fÜm©_mes§ge
 (
j_commÚ_±r
 
cšfo
, * 
bufãr
)

159 
j³g_”rÜ_mgr
 * 
”r
 = 
cšfo
->err;

160 
msg_code
 = 
”r
->msg_code;

161 cÚ¡ * 
msg‹xt
 = 
NULL
;

162 cÚ¡ * 
msg±r
;

163 
ch
;

164 
boŞ—n
 
is¡ršg
;

167 ià(
msg_code
 > 0 && msg_cod<ğ
”r
->
Ï¡_j³g_mes§ge
) {

168 
msg‹xt
 = 
”r
->
j³g_mes§ge_bË
[
msg_code
];

169 } ià(
”r
->
addÚ_mes§ge_bË
 !ğ
NULL
 &&

170 
msg_code
 >ğ
”r
->
fœ¡_addÚ_mes§ge
 &&

171 
msg_code
 <ğ
”r
->
Ï¡_addÚ_mes§ge
) {

172 
msg‹xt
 = 
”r
->
addÚ_mes§ge_bË
[
msg_code
 -ƒ¼->
fœ¡_addÚ_mes§ge
];

176 ià(
msg‹xt
 =ğ
NULL
) {

177 
”r
->
msg_·rm
.
i
[0] = 
msg_code
;

178 
msg‹xt
 = 
”r
->
j³g_mes§ge_bË
[0];

182 
is¡ršg
 = 
FALSE
;

183 
msg±r
 = 
msg‹xt
;

184 (
ch
 = *
msg±r
++) != '\0') {

185 ià(
ch
 == '%') {

186 ià(*
msg±r
 =ğ's'è
is¡ršg
 = 
TRUE
;

192 ià(
is¡ršg
)

193 
	`¥rštf
(
bufãr
, 
msg‹xt
, 
”r
->
msg_·rm
.
s
);

195 
	`¥rštf
(
bufãr
, 
msg‹xt
,

196 
”r
->
msg_·rm
.
i
[0],ƒrr->msg_parm.i[1],

197 
”r
->
msg_·rm
.
i
[2],ƒrr->msg_parm.i[3],

198 
”r
->
msg_·rm
.
i
[4],ƒrr->msg_parm.i[5],

199 
”r
->
msg_·rm
.
i
[6],ƒrr->msg_parm.i[7]);

200 
	}
}

211 
	$METHODDEF
()

212 
	$»£t_”rÜ_mgr
 (
j_commÚ_±r
 
cšfo
)

214 
cšfo
->
”r
->
num_w¬nšgs
 = 0;

216 
cšfo
->
”r
->
msg_code
 = 0;

217 
	}
}

230 
	$GLOBAL
(
j³g_”rÜ_mgr
 *)

231 
	$j³g_¡d_”rÜ
 (
j³g_”rÜ_mgr
 * 
”r
)

233 
”r
->
”rÜ_ex™
 =ƒrror_exit;

234 
”r
->
em™_mes§ge
 =ƒmit_message;

235 
”r
->
ouut_mes§ge
 = output_message;

236 
”r
->
fÜm©_mes§ge
 = format_message;

237 
”r
->
»£t_”rÜ_mgr
 =„eset_error_mgr;

239 
”r
->
Œaû_Ëv–
 = 0;

240 
”r
->
num_w¬nšgs
 = 0;

241 
”r
->
msg_code
 = 0;

244 
”r
->
j³g_mes§ge_bË
 = 
j³g_¡d_mes§ge_bË
;

245 
”r
->
Ï¡_j³g_mes§ge
 = (è
JMSG_LASTMSGCODE
 - 1;

247 
”r
->
addÚ_mes§ge_bË
 = 
NULL
;

248 
”r
->
fœ¡_addÚ_mes§ge
 = 0;

249 
”r
->
Ï¡_addÚ_mes§ge
 = 0;

251  
”r
;

252 
	}
}

	@jerror.h

21 #iâdeà
JMESSAGE


22 #iâdeà
JERROR_H


24 
	#JMAKE_ENUM_LIST


	)

27 
	#JMESSAGE
(
code
,
¡ršg
)

	)

31 #ifdeà
JMAKE_ENUM_LIST


35 
	#JMESSAGE
(
code
,
¡ršg
ècod,

	)

39 
JMESSAGE
(
JMSG_NOMESSAGE
, "Bogus message code %d")

42 
JMESSAGE
(
JERR_ARITH_NOTIMPL
,

44 
JMESSAGE
(
JERR_BAD_ALIGN_TYPE
, "ALIGN_TYPE is wrong,…lease fix")

45 
JMESSAGE
(
JERR_BAD_ALLOC_CHUNK
, "MAX_ALLOC_CHUNK is wrong,…lease fix")

46 
JMESSAGE
(
JERR_BAD_BUFFER_MODE
, "Bogus buffer control mode")

47 
JMESSAGE
(
JERR_BAD_COMPONENT_ID
, "Invalid component ID %d in SOS")

48 
JMESSAGE
(
JERR_BAD_DCT_COEF
, "DCT coefficient out of„ange")

49 
JMESSAGE
(
JERR_BAD_DCTSIZE
, "IDCT output block size %d‚ot supported")

50 
JMESSAGE
(
JERR_BAD_HUFF_TABLE
, "Bogus Huffmanable definition")

51 
JMESSAGE
(
JERR_BAD_IN_COLORSPACE
, "Bogus input colorspace")

52 
JMESSAGE
(
JERR_BAD_J_COLORSPACE
, "Bogus JPEG colorspace")

53 
JMESSAGE
(
JERR_BAD_LENGTH
, "Bogus marker†ength")

54 
JMESSAGE
(
JERR_BAD_LIB_VERSION
,

56 
JMESSAGE
(
JERR_BAD_MCU_SIZE
, "Sampling factorsoo†arge for interleaved scan")

57 
JMESSAGE
(
JERR_BAD_POOL_ID
, "Invalid memory…ool code %d")

58 
JMESSAGE
(
JERR_BAD_PRECISION
, "Unsupported JPEG data…recision %d")

59 
JMESSAGE
(
JERR_BAD_PROGRESSION
,

61 
JMESSAGE
(
JERR_BAD_PROG_SCRIPT
,

63 
JMESSAGE
(
JERR_BAD_SAMPLING
, "Bogus sampling factors")

64 
JMESSAGE
(
JERR_BAD_SCAN_SCRIPT
, "Invalid scan script‡tƒntry %d")

65 
JMESSAGE
(
JERR_BAD_STATE
, "Improper callo JPEG†ibrary in state %d")

66 
JMESSAGE
(
JERR_BAD_STRUCT_SIZE
,

68 
JMESSAGE
(
JERR_BAD_VIRTUAL_ACCESS
, "Bogus virtual‡rray‡ccess")

69 
JMESSAGE
(
JERR_BUFFER_SIZE
, "Buffer…assedo JPEG†ibrary isoo small")

70 
JMESSAGE
(
JERR_CANT_SUSPEND
, "Suspension‚ot‡llowed here")

71 
JMESSAGE
(
JERR_CCIR601_NOTIMPL
, "CCIR601 sampling‚ot implemented yet")

72 
JMESSAGE
(
JERR_COMPONENT_COUNT
, "Too many color components: %d, max %d")

73 
JMESSAGE
(
JERR_CONVERSION_NOTIMPL
, "Unsupported color conversion„equest")

74 
JMESSAGE
(
JERR_DAC_INDEX
, "Bogus DAC index %d")

75 
JMESSAGE
(
JERR_DAC_VALUE
, "Bogus DAC value 0x%x")

76 
JMESSAGE
(
JERR_DHT_INDEX
, "Bogus DHT index %d")

77 
JMESSAGE
(
JERR_DQT_INDEX
, "Bogus DQT index %d")

78 
JMESSAGE
(
JERR_EMPTY_IMAGE
, "Empty JPEG image (DNL‚ot supported)")

79 
JMESSAGE
(
JERR_EMS_READ
, "Read from EMS failed")

80 
JMESSAGE
(
JERR_EMS_WRITE
, "Writeo EMS failed")

81 
JMESSAGE
(
JERR_EOI_EXPECTED
, "Didn'tƒxpect morehan one scan")

82 
JMESSAGE
(
JERR_FILE_READ
, "Input file„eadƒrror")

83 
JMESSAGE
(
JERR_FILE_WRITE
, "Output file writeƒrror --- out of disk space?")

84 
JMESSAGE
(
JERR_FRACT_SAMPLE_NOTIMPL
, "Fractional sampling‚ot implemented yet")

85 
JMESSAGE
(
JERR_HUFF_CLEN_OVERFLOW
, "Huffman code sizeable overflow")

86 
JMESSAGE
(
JERR_HUFF_MISSING_CODE
, "Missing Huffman codeableƒntry")

87 
JMESSAGE
(
JERR_IMAGE_TOO_BIG
, "Maximum supported image dimension is %u…ixels")

88 
JMESSAGE
(
JERR_INPUT_EMPTY
, "Empty input file")

89 
JMESSAGE
(
JERR_INPUT_EOF
, "Prematureƒnd of input file")

90 
JMESSAGE
(
JERR_MISMATCHED_QUANT_TABLE
,

92 
JMESSAGE
(
JERR_MISSING_DATA
, "Scan script does‚otransmit‡ll data")

93 
JMESSAGE
(
JERR_MODE_CHANGE
, "Invalid color quantization mode change")

94 
JMESSAGE
(
JERR_NOTIMPL
, "Not implemented yet")

95 
JMESSAGE
(
JERR_NOT_COMPILED
, "Requested feature was omitted‡t compileime")

96 
JMESSAGE
(
JERR_NO_BACKING_STORE
, "Backing store‚ot supported")

97 
JMESSAGE
(
JERR_NO_HUFF_TABLE
, "Huffmanable 0x%02x was‚ot defined")

98 
JMESSAGE
(
JERR_NO_IMAGE
, "JPEG datastream contains‚o image")

99 
JMESSAGE
(
JERR_NO_QUANT_TABLE
, "Quantizationable 0x%02x was‚ot defined")

100 
JMESSAGE
(
JERR_NO_SOI
, "Not‡ JPEG file: starts with 0x%02x 0x%02x")

101 
JMESSAGE
(
JERR_OUT_OF_MEMORY
, "Insufficient memory (case %d)")

102 
JMESSAGE
(
JERR_QUANT_COMPONENTS
,

104 
JMESSAGE
(
JERR_QUANT_FEW_COLORS
, "Cannot quantizeo fewerhan %d colors")

105 
JMESSAGE
(
JERR_QUANT_MANY_COLORS
, "Cannot quantizeo morehan %d colors")

106 
JMESSAGE
(
JERR_SOF_DUPLICATE
, "Invalid JPEG file structure:wo SOF markers")

107 
JMESSAGE
(
JERR_SOF_NO_SOS
, "Invalid JPEG file structure: missing SOS marker")

108 
JMESSAGE
(
JERR_SOF_UNSUPPORTED
, "Unsupported JPEG…rocess: SOFype 0x%02x")

109 
JMESSAGE
(
JERR_SOI_DUPLICATE
, "Invalid JPEG file structure:wo SOI markers")

110 
JMESSAGE
(
JERR_SOS_NO_SOF
, "Invalid JPEG file structure: SOS before SOF")

111 
JMESSAGE
(
JERR_TFILE_CREATE
, "Failedo createemporary file %s")

112 
JMESSAGE
(
JERR_TFILE_READ
, "Read failed onemporary file")

113 
JMESSAGE
(
JERR_TFILE_SEEK
, "Seek failed onemporary file")

114 
JMESSAGE
(
JERR_TFILE_WRITE
,

116 
JMESSAGE
(
JERR_TOO_LITTLE_DATA
, "Applicationransferredoo few scanlines")

117 
JMESSAGE
(
JERR_UNKNOWN_MARKER
, "Unsupported markerype 0x%02x")

118 
JMESSAGE
(
JERR_VIRTUAL_BUG
, "Virtual‡rray controller messed up")

119 
JMESSAGE
(
JERR_WIDTH_OVERFLOW
, "Imageoo wide forhis implementation")

120 
JMESSAGE
(
JERR_XMS_READ
, "Read from XMS failed")

121 
JMESSAGE
(
JERR_XMS_WRITE
, "Writeo XMS failed")

122 
JMESSAGE
(
JMSG_COPYRIGHT
, 
JCOPYRIGHT
)

123 
JMESSAGE
(
JMSG_VERSION
, 
JVERSION
)

124 
JMESSAGE
(
JTRC_16BIT_TABLES
,

126 
JMESSAGE
(
JTRC_ADOBE
,

128 
JMESSAGE
(
JTRC_APP0
, "Unknown APP0 marker (not JFIF),†ength %u")

129 
JMESSAGE
(
JTRC_APP14
, "Unknown APP14 marker (not Adobe),†ength %u")

130 
JMESSAGE
(
JTRC_DAC
, "Define Arithmetic Table 0x%02x: 0x%02x")

131 
JMESSAGE
(
JTRC_DHT
, "Define Huffman Table 0x%02x")

132 
JMESSAGE
(
JTRC_DQT
, "Define Quantization Table %d…recision %d")

133 
JMESSAGE
(
JTRC_DRI
, "Define Restart Interval %u")

134 
JMESSAGE
(
JTRC_EMS_CLOSE
, "Freed EMS handle %u")

135 
JMESSAGE
(
JTRC_EMS_OPEN
, "Obtained EMS handle %u")

136 
JMESSAGE
(
JTRC_EOI
, "End Of Image")

137 
JMESSAGE
(
JTRC_HUFFBITS
, " %3d %3d %3d %3d %3d %3d %3d %3d")

138 
JMESSAGE
(
JTRC_JFIF
, "JFIF APP0 marker: version %d.%02d, density %dx%d %d")

139 
JMESSAGE
(
JTRC_JFIF_BADTHUMBNAILSIZE
,

141 
JMESSAGE
(
JTRC_JFIF_EXTENSION
,

143 
JMESSAGE
(
JTRC_JFIF_THUMBNAIL
, " with %d x %dhumbnail image")

144 
JMESSAGE
(
JTRC_MISC_MARKER
, "Miscellaneous marker 0x%02x,†ength %u")

145 
JMESSAGE
(
JTRC_PARMLESS_MARKER
, "Unexpected marker 0x%02x")

146 
JMESSAGE
(
JTRC_QUANTVALS
, " %4u %4u %4u %4u %4u %4u %4u %4u")

147 
JMESSAGE
(
JTRC_QUANT_3_NCOLORS
, "Quantizingo %d = %d*%d*%d colors")

148 
JMESSAGE
(
JTRC_QUANT_NCOLORS
, "Quantizingo %d colors")

149 
JMESSAGE
(
JTRC_QUANT_SELECTED
, "Selected %d colors for quantization")

150 
JMESSAGE
(
JTRC_RECOVERY_ACTION
, "At marker 0x%02x,„ecovery‡ction %d")

151 
JMESSAGE
(
JTRC_RST
, "RST%d")

152 
JMESSAGE
(
JTRC_SMOOTH_NOTIMPL
,

154 
JMESSAGE
(
JTRC_SOF
, "Start Of Frame 0x%02x: width=%u, height=%u, components=%d")

155 
JMESSAGE
(
JTRC_SOF_COMPONENT
, " Component %d: %dhx%dv q=%d")

156 
JMESSAGE
(
JTRC_SOI
, "Start of Image")

157 
JMESSAGE
(
JTRC_SOS
, "Start Of Scan: %d components")

158 
JMESSAGE
(
JTRC_SOS_COMPONENT
, " Component %d: dc=%d‡c=%d")

159 
JMESSAGE
(
JTRC_SOS_PARAMS
, " Ss=%d, Se=%d, Ah=%d, Al=%d")

160 
JMESSAGE
(
JTRC_TFILE_CLOSE
, "Closedemporary file %s")

161 
JMESSAGE
(
JTRC_TFILE_OPEN
, "Openedemporary file %s")

162 
JMESSAGE
(
JTRC_THUMB_JPEG
,

164 
JMESSAGE
(
JTRC_THUMB_PALETTE
,

166 
JMESSAGE
(
JTRC_THUMB_RGB
,

168 
JMESSAGE
(
JTRC_UNKNOWN_IDS
,

170 
JMESSAGE
(
JTRC_XMS_CLOSE
, "Freed XMS handle %u")

171 
JMESSAGE
(
JTRC_XMS_OPEN
, "Obtained XMS handle %u")

172 
JMESSAGE
(
JWRN_ADOBE_XFORM
, "Unknown Adobe colorransform code %d")

173 
JMESSAGE
(
JWRN_BOGUS_PROGRESSION
,

175 
JMESSAGE
(
JWRN_EXTRANEOUS_DATA
,

177 
JMESSAGE
(
JWRN_HIT_MARKER
, "Corrupt JPEG data:…rematureƒnd of data segment")

178 
JMESSAGE
(
JWRN_HUFF_BAD_CODE
, "Corrupt JPEG data: bad Huffman code")

179 
JMESSAGE
(
JWRN_JFIF_MAJOR
, "Warning: unknown JFIF„evision‚umber %d.%02d")

180 
JMESSAGE
(
JWRN_JPEG_EOF
, "Prematureƒnd of JPEG file")

181 
JMESSAGE
(
JWRN_MUST_RESYNC
,

183 
JMESSAGE
(
JWRN_NOT_SEQUENTIAL
, "Invalid SOS…arameters for sequential JPEG")

184 
JMESSAGE
(
JWRN_TOO_MUCH_DATA
, "Applicationransferredoo many scanlines")

186 #ifdeà
JMAKE_ENUM_LIST


188 
	mJMSG_LASTMSGCODE


189 } 
	tJ_MESSAGE_CODE
;

191 #undeà
JMAKE_ENUM_LIST


195 #undeà
JMESSAGE


198 #iâdeà
JERROR_H


199 
	#JERROR_H


	)

205 
	#ERREXIT
(
cšfo
,
code
) \

206 ((
cšfo
)->
”r
->
msg_code
 = (
code
), \

207 (*(
cšfo
)->
”r
->
”rÜ_ex™
è((
j_commÚ_±r
è(cšfo)))

	)

208 
	#ERREXIT1
(
cšfo
,
code
,
p1
) \

209 ((
cšfo
)->
”r
->
msg_code
 = (
code
), \

210 (
cšfo
)->
”r
->
msg_·rm
.
i
[0] = (
p1
), \

211 (*(
cšfo
)->
”r
->
”rÜ_ex™
è((
j_commÚ_±r
è(cšfo)))

	)

212 
	#ERREXIT2
(
cšfo
,
code
,
p1
,
p2
) \

213 ((
cšfo
)->
”r
->
msg_code
 = (
code
), \

214 (
cšfo
)->
”r
->
msg_·rm
.
i
[0] = (
p1
), \

215 (
cšfo
)->
”r
->
msg_·rm
.
i
[1] = (
p2
), \

216 (*(
cšfo
)->
”r
->
”rÜ_ex™
è((
j_commÚ_±r
è(cšfo)))

	)

217 
	#ERREXIT3
(
cšfo
,
code
,
p1
,
p2
,
p3
) \

218 ((
cšfo
)->
”r
->
msg_code
 = (
code
), \

219 (
cšfo
)->
”r
->
msg_·rm
.
i
[0] = (
p1
), \

220 (
cšfo
)->
”r
->
msg_·rm
.
i
[1] = (
p2
), \

221 (
cšfo
)->
”r
->
msg_·rm
.
i
[2] = (
p3
), \

222 (*(
cšfo
)->
”r
->
”rÜ_ex™
è((
j_commÚ_±r
è(cšfo)))

	)

223 
	#ERREXIT4
(
cšfo
,
code
,
p1
,
p2
,
p3
,
p4
) \

224 ((
cšfo
)->
”r
->
msg_code
 = (
code
), \

225 (
cšfo
)->
”r
->
msg_·rm
.
i
[0] = (
p1
), \

226 (
cšfo
)->
”r
->
msg_·rm
.
i
[1] = (
p2
), \

227 (
cšfo
)->
”r
->
msg_·rm
.
i
[2] = (
p3
), \

228 (
cšfo
)->
”r
->
msg_·rm
.
i
[3] = (
p4
), \

229 (*(
cšfo
)->
”r
->
”rÜ_ex™
è((
j_commÚ_±r
è(cšfo)))

	)

230 
	#ERREXITS
(
cšfo
,
code
,
¡r
) \

231 ((
cšfo
)->
”r
->
msg_code
 = (
code
), \

232 
	`¡ºıy
((
cšfo
)->
”r
->
msg_·rm
.
s
, (
¡r
), 
JMSG_STR_PARM_MAX
), \

233 (*(
cšfo
)->
”r
->
”rÜ_ex™
è((
j_commÚ_±r
è(cšfo)))

	)

235 
	#MAKESTMT
(
¡uff
èdØ{ stufà} 0)

	)

238 
	#WARNMS
(
cšfo
,
code
) \

239 ((
cšfo
)->
”r
->
msg_code
 = (
code
), \

240 (*(
cšfo
)->
”r
->
em™_mes§ge
è((
j_commÚ_±r
è(cšfo), -1))

	)

241 
	#WARNMS1
(
cšfo
,
code
,
p1
) \

242 ((
cšfo
)->
”r
->
msg_code
 = (
code
), \

243 (
cšfo
)->
”r
->
msg_·rm
.
i
[0] = (
p1
), \

244 (*(
cšfo
)->
”r
->
em™_mes§ge
è((
j_commÚ_±r
è(cšfo), -1))

	)

245 
	#WARNMS2
(
cšfo
,
code
,
p1
,
p2
) \

246 ((
cšfo
)->
”r
->
msg_code
 = (
code
), \

247 (
cšfo
)->
”r
->
msg_·rm
.
i
[0] = (
p1
), \

248 (
cšfo
)->
”r
->
msg_·rm
.
i
[1] = (
p2
), \

249 (*(
cšfo
)->
”r
->
em™_mes§ge
è((
j_commÚ_±r
è(cšfo), -1))

	)

252 
	#TRACEMS
(
cšfo
,
lvl
,
code
) \

253 ((
cšfo
)->
”r
->
msg_code
 = (
code
), \

254 (*(
cšfo
)->
”r
->
em™_mes§ge
è((
j_commÚ_±r
è(cšfo), (
lvl
)))

	)

255 
	#TRACEMS1
(
cšfo
,
lvl
,
code
,
p1
) \

256 ((
cšfo
)->
”r
->
msg_code
 = (
code
), \

257 (
cšfo
)->
”r
->
msg_·rm
.
i
[0] = (
p1
), \

258 (*(
cšfo
)->
”r
->
em™_mes§ge
è((
j_commÚ_±r
è(cšfo), (
lvl
)))

	)

259 
	#TRACEMS2
(
cšfo
,
lvl
,
code
,
p1
,
p2
) \

260 ((
cšfo
)->
”r
->
msg_code
 = (
code
), \

261 (
cšfo
)->
”r
->
msg_·rm
.
i
[0] = (
p1
), \

262 (
cšfo
)->
”r
->
msg_·rm
.
i
[1] = (
p2
), \

263 (*(
cšfo
)->
”r
->
em™_mes§ge
è((
j_commÚ_±r
è(cšfo), (
lvl
)))

	)

264 
	#TRACEMS3
(
cšfo
,
lvl
,
code
,
p1
,
p2
,
p3
) \

265 
	`MAKESTMT
(* 
_mp
 = (
cšfo
)->
”r
->
msg_·rm
.
i
; \

266 
_mp
[0] = (
p1
); _mp[1] = (
p2
); _mp[2] = (
p3
); \

267 (
cšfo
)->
”r
->
msg_code
 = (
code
); \

268 (*(
cšfo
)->
”r
->
em™_mes§ge
è((
j_commÚ_±r
è(cšfo), (
lvl
)); )

	)

269 
	#TRACEMS4
(
cšfo
,
lvl
,
code
,
p1
,
p2
,
p3
,
p4
) \

270 
	`MAKESTMT
(* 
_mp
 = (
cšfo
)->
”r
->
msg_·rm
.
i
; \

271 
_mp
[0] = (
p1
); _mp[1] = (
p2
); _mp[2] = (
p3
); _mp[3] = (
p4
); \

272 (
cšfo
)->
”r
->
msg_code
 = (
code
); \

273 (*(
cšfo
)->
”r
->
em™_mes§ge
è((
j_commÚ_±r
è(cšfo), (
lvl
)); )

	)

274 
	#TRACEMS5
(
cšfo
,
lvl
,
code
,
p1
,
p2
,
p3
,
p4
,
p5
) \

275 
	`MAKESTMT
(* 
_mp
 = (
cšfo
)->
”r
->
msg_·rm
.
i
; \

276 
_mp
[0] = (
p1
); _mp[1] = (
p2
); _mp[2] = (
p3
); _mp[3] = (
p4
); \

277 
_mp
[4] = (
p5
); \

278 (
cšfo
)->
”r
->
msg_code
 = (
code
); \

279 (*(
cšfo
)->
”r
->
em™_mes§ge
è((
j_commÚ_±r
è(cšfo), (
lvl
)); )

	)

280 
	#TRACEMS8
(
cšfo
,
lvl
,
code
,
p1
,
p2
,
p3
,
p4
,
p5
,
p6
,
p7
,
p8
) \

281 
	`MAKESTMT
(* 
_mp
 = (
cšfo
)->
”r
->
msg_·rm
.
i
; \

282 
_mp
[0] = (
p1
); _mp[1] = (
p2
); _mp[2] = (
p3
); _mp[3] = (
p4
); \

283 
_mp
[4] = (
p5
); _mp[5] = (
p6
); _mp[6] = (
p7
); _mp[7] = (
p8
); \

284 (
cšfo
)->
”r
->
msg_code
 = (
code
); \

285 (*(
cšfo
)->
”r
->
em™_mes§ge
è((
j_commÚ_±r
è(cšfo), (
lvl
)); )

	)

286 
	#TRACEMSS
(
cšfo
,
lvl
,
code
,
¡r
) \

287 ((
cšfo
)->
”r
->
msg_code
 = (
code
), \

288 
	`¡ºıy
((
cšfo
)->
”r
->
msg_·rm
.
s
, (
¡r
), 
JMSG_STR_PARM_MAX
), \

289 (*(
cšfo
)->
”r
->
em™_mes§ge
è((
j_commÚ_±r
è(cšfo), (
lvl
)))

	)

	@jfdctflt.c

37 
	#JPEG_INTERNALS


	)

38 
	~"jšşude.h
"

39 
	~"j³glib.h
"

40 
	~"jdù.h
"

42 #ifdeà
DCT_FLOAT_SUPPORTED


49 #ià
DCTSIZE
 != 8

50 
	gSÜry
, 
this
 
code
 
Úly
 
cİes
 
	gw™h
 8x8 
	gDCTs
.

58 
	$GLOBAL
()

59 
	$j³g_fdù_æßt
 (
FAST_FLOAT
 * 
d©a
)

61 
FAST_FLOAT
 
tmp0
, 
tmp1
, 
tmp2
, 
tmp3
, 
tmp4
, 
tmp5
, 
tmp6
, 
tmp7
;

62 
FAST_FLOAT
 
tmp10
, 
tmp11
, 
tmp12
, 
tmp13
;

63 
FAST_FLOAT
 
z1
, 
z2
, 
z3
, 
z4
, 
z5
, 
z11
, 
z13
;

64 
FAST_FLOAT
 *
d©­Œ
;

65 
ùr
;

69 
d©­Œ
 = 
d©a
;

70 
ùr
 = 
DCTSIZE
-1; ctr >= 0; ctr--) {

71 
tmp0
 = 
d©­Œ
[0] + dataptr[7];

72 
tmp7
 = 
d©­Œ
[0] - dataptr[7];

73 
tmp1
 = 
d©­Œ
[1] + dataptr[6];

74 
tmp6
 = 
d©­Œ
[1] - dataptr[6];

75 
tmp2
 = 
d©­Œ
[2] + dataptr[5];

76 
tmp5
 = 
d©­Œ
[2] - dataptr[5];

77 
tmp3
 = 
d©­Œ
[3] + dataptr[4];

78 
tmp4
 = 
d©­Œ
[3] - dataptr[4];

82 
tmp10
 = 
tmp0
 + 
tmp3
;

83 
tmp13
 = 
tmp0
 - 
tmp3
;

84 
tmp11
 = 
tmp1
 + 
tmp2
;

85 
tmp12
 = 
tmp1
 - 
tmp2
;

87 
d©­Œ
[0] = 
tmp10
 + 
tmp11
;

88 
d©­Œ
[4] = 
tmp10
 - 
tmp11
;

90 
z1
 = (
tmp12
 + 
tmp13
è* ((
FAST_FLOAT
) 0.707106781);

91 
d©­Œ
[2] = 
tmp13
 + 
z1
;

92 
d©­Œ
[6] = 
tmp13
 - 
z1
;

96 
tmp10
 = 
tmp4
 + 
tmp5
;

97 
tmp11
 = 
tmp5
 + 
tmp6
;

98 
tmp12
 = 
tmp6
 + 
tmp7
;

101 
z5
 = (
tmp10
 - 
tmp12
è* ((
FAST_FLOAT
) 0.382683433);

102 
z2
 = ((
FAST_FLOAT
è0.541196100è* 
tmp10
 + 
z5
;

103 
z4
 = ((
FAST_FLOAT
è1.306562965è* 
tmp12
 + 
z5
;

104 
z3
 = 
tmp11
 * ((
FAST_FLOAT
) 0.707106781);

106 
z11
 = 
tmp7
 + 
z3
;

107 
z13
 = 
tmp7
 - 
z3
;

109 
d©­Œ
[5] = 
z13
 + 
z2
;

110 
d©­Œ
[3] = 
z13
 - 
z2
;

111 
d©­Œ
[1] = 
z11
 + 
z4
;

112 
d©­Œ
[7] = 
z11
 - 
z4
;

114 
d©­Œ
 +ğ
DCTSIZE
;

119 
d©­Œ
 = 
d©a
;

120 
ùr
 = 
DCTSIZE
-1; ctr >= 0; ctr--) {

121 
tmp0
 = 
d©­Œ
[
DCTSIZE
*0] + dataptr[DCTSIZE*7];

122 
tmp7
 = 
d©­Œ
[
DCTSIZE
*0] - dataptr[DCTSIZE*7];

123 
tmp1
 = 
d©­Œ
[
DCTSIZE
*1] + dataptr[DCTSIZE*6];

124 
tmp6
 = 
d©­Œ
[
DCTSIZE
*1] - dataptr[DCTSIZE*6];

125 
tmp2
 = 
d©­Œ
[
DCTSIZE
*2] + dataptr[DCTSIZE*5];

126 
tmp5
 = 
d©­Œ
[
DCTSIZE
*2] - dataptr[DCTSIZE*5];

127 
tmp3
 = 
d©­Œ
[
DCTSIZE
*3] + dataptr[DCTSIZE*4];

128 
tmp4
 = 
d©­Œ
[
DCTSIZE
*3] - dataptr[DCTSIZE*4];

132 
tmp10
 = 
tmp0
 + 
tmp3
;

133 
tmp13
 = 
tmp0
 - 
tmp3
;

134 
tmp11
 = 
tmp1
 + 
tmp2
;

135 
tmp12
 = 
tmp1
 - 
tmp2
;

137 
d©­Œ
[
DCTSIZE
*0] = 
tmp10
 + 
tmp11
;

138 
d©­Œ
[
DCTSIZE
*4] = 
tmp10
 - 
tmp11
;

140 
z1
 = (
tmp12
 + 
tmp13
è* ((
FAST_FLOAT
) 0.707106781);

141 
d©­Œ
[
DCTSIZE
*2] = 
tmp13
 + 
z1
;

142 
d©­Œ
[
DCTSIZE
*6] = 
tmp13
 - 
z1
;

146 
tmp10
 = 
tmp4
 + 
tmp5
;

147 
tmp11
 = 
tmp5
 + 
tmp6
;

148 
tmp12
 = 
tmp6
 + 
tmp7
;

151 
z5
 = (
tmp10
 - 
tmp12
è* ((
FAST_FLOAT
) 0.382683433);

152 
z2
 = ((
FAST_FLOAT
è0.541196100è* 
tmp10
 + 
z5
;

153 
z4
 = ((
FAST_FLOAT
è1.306562965è* 
tmp12
 + 
z5
;

154 
z3
 = 
tmp11
 * ((
FAST_FLOAT
) 0.707106781);

156 
z11
 = 
tmp7
 + 
z3
;

157 
z13
 = 
tmp7
 - 
z3
;

159 
d©­Œ
[
DCTSIZE
*5] = 
z13
 + 
z2
;

160 
d©­Œ
[
DCTSIZE
*3] = 
z13
 - 
z2
;

161 
d©­Œ
[
DCTSIZE
*1] = 
z11
 + 
z4
;

162 
d©­Œ
[
DCTSIZE
*7] = 
z11
 - 
z4
;

164 
d©­Œ
++;

166 
	}
}

	@jfdctfst.c

33 
	#JPEG_INTERNALS


	)

34 
	~"jšşude.h
"

35 
	~"j³glib.h
"

36 
	~"jdù.h
"

38 #ifdeà
DCT_IFAST_SUPPORTED


45 #ià
DCTSIZE
 != 8

46 
	gSÜry
, 
this
 
code
 
Úly
 
cİes
 
	gw™h
 8x8 
	gDCTs
.

68 
	#CONST_BITS
 8

	)

78 #ià
CONST_BITS
 == 8

79 
	#FIX_0_382683433
 ((
INT32
è98è

	)

80 
	#FIX_0_541196100
 ((
INT32
è139è

	)

81 
	#FIX_0_707106781
 ((
INT32
è181è

	)

82 
	#FIX_1_306562965
 ((
INT32
è334è

	)

84 
	#FIX_0_382683433
 
	`FIX
(0.382683433)

	)

85 
	#FIX_0_541196100
 
	`FIX
(0.541196100)

	)

86 
	#FIX_0_707106781
 
	`FIX
(0.707106781)

	)

87 
	#FIX_1_306562965
 
	`FIX
(1.306562965)

	)

96 #iâdeà
USE_ACCURATE_ROUNDING


97 #undeà
DESCALE


98 
	#DESCALE
(
x
,
n
è
	`RIGHT_SHIFT
(x,‚)

	)

106 
	#MULTIPLY
(
v¬
,cÚ¡è((
DCTELEM
è
	`DESCALE
((v¬è* (cÚ¡), 
CONST_BITS
))

	)

113 
	$GLOBAL
()

114 
	$j³g_fdù_iç¡
 (
DCTELEM
 * 
d©a
)

116 
DCTELEM
 
tmp0
, 
tmp1
, 
tmp2
, 
tmp3
, 
tmp4
, 
tmp5
, 
tmp6
, 
tmp7
;

117 
DCTELEM
 
tmp10
, 
tmp11
, 
tmp12
, 
tmp13
;

118 
DCTELEM
 
z1
, 
z2
, 
z3
, 
z4
, 
z5
, 
z11
, 
z13
;

119 
DCTELEM
 *
d©­Œ
;

120 
ùr
;

121 
SHIFT_TEMPS


125 
d©­Œ
 = 
d©a
;

126 
ùr
 = 
DCTSIZE
-1; ctr >= 0; ctr--) {

127 
tmp0
 = 
d©­Œ
[0] + dataptr[7];

128 
tmp7
 = 
d©­Œ
[0] - dataptr[7];

129 
tmp1
 = 
d©­Œ
[1] + dataptr[6];

130 
tmp6
 = 
d©­Œ
[1] - dataptr[6];

131 
tmp2
 = 
d©­Œ
[2] + dataptr[5];

132 
tmp5
 = 
d©­Œ
[2] - dataptr[5];

133 
tmp3
 = 
d©­Œ
[3] + dataptr[4];

134 
tmp4
 = 
d©­Œ
[3] - dataptr[4];

138 
tmp10
 = 
tmp0
 + 
tmp3
;

139 
tmp13
 = 
tmp0
 - 
tmp3
;

140 
tmp11
 = 
tmp1
 + 
tmp2
;

141 
tmp12
 = 
tmp1
 - 
tmp2
;

143 
d©­Œ
[0] = 
tmp10
 + 
tmp11
;

144 
d©­Œ
[4] = 
tmp10
 - 
tmp11
;

146 
z1
 = 
	`MULTIPLY
(
tmp12
 + 
tmp13
, 
FIX_0_707106781
);

147 
d©­Œ
[2] = 
tmp13
 + 
z1
;

148 
d©­Œ
[6] = 
tmp13
 - 
z1
;

152 
tmp10
 = 
tmp4
 + 
tmp5
;

153 
tmp11
 = 
tmp5
 + 
tmp6
;

154 
tmp12
 = 
tmp6
 + 
tmp7
;

157 
z5
 = 
	`MULTIPLY
(
tmp10
 - 
tmp12
, 
FIX_0_382683433
);

158 
z2
 = 
	`MULTIPLY
(
tmp10
, 
FIX_0_541196100
è+ 
z5
;

159 
z4
 = 
	`MULTIPLY
(
tmp12
, 
FIX_1_306562965
è+ 
z5
;

160 
z3
 = 
	`MULTIPLY
(
tmp11
, 
FIX_0_707106781
);

162 
z11
 = 
tmp7
 + 
z3
;

163 
z13
 = 
tmp7
 - 
z3
;

165 
d©­Œ
[5] = 
z13
 + 
z2
;

166 
d©­Œ
[3] = 
z13
 - 
z2
;

167 
d©­Œ
[1] = 
z11
 + 
z4
;

168 
d©­Œ
[7] = 
z11
 - 
z4
;

170 
d©­Œ
 +ğ
DCTSIZE
;

175 
d©­Œ
 = 
d©a
;

176 
ùr
 = 
DCTSIZE
-1; ctr >= 0; ctr--) {

177 
tmp0
 = 
d©­Œ
[
DCTSIZE
*0] + dataptr[DCTSIZE*7];

178 
tmp7
 = 
d©­Œ
[
DCTSIZE
*0] - dataptr[DCTSIZE*7];

179 
tmp1
 = 
d©­Œ
[
DCTSIZE
*1] + dataptr[DCTSIZE*6];

180 
tmp6
 = 
d©­Œ
[
DCTSIZE
*1] - dataptr[DCTSIZE*6];

181 
tmp2
 = 
d©­Œ
[
DCTSIZE
*2] + dataptr[DCTSIZE*5];

182 
tmp5
 = 
d©­Œ
[
DCTSIZE
*2] - dataptr[DCTSIZE*5];

183 
tmp3
 = 
d©­Œ
[
DCTSIZE
*3] + dataptr[DCTSIZE*4];

184 
tmp4
 = 
d©­Œ
[
DCTSIZE
*3] - dataptr[DCTSIZE*4];

188 
tmp10
 = 
tmp0
 + 
tmp3
;

189 
tmp13
 = 
tmp0
 - 
tmp3
;

190 
tmp11
 = 
tmp1
 + 
tmp2
;

191 
tmp12
 = 
tmp1
 - 
tmp2
;

193 
d©­Œ
[
DCTSIZE
*0] = 
tmp10
 + 
tmp11
;

194 
d©­Œ
[
DCTSIZE
*4] = 
tmp10
 - 
tmp11
;

196 
z1
 = 
	`MULTIPLY
(
tmp12
 + 
tmp13
, 
FIX_0_707106781
);

197 
d©­Œ
[
DCTSIZE
*2] = 
tmp13
 + 
z1
;

198 
d©­Œ
[
DCTSIZE
*6] = 
tmp13
 - 
z1
;

202 
tmp10
 = 
tmp4
 + 
tmp5
;

203 
tmp11
 = 
tmp5
 + 
tmp6
;

204 
tmp12
 = 
tmp6
 + 
tmp7
;

207 
z5
 = 
	`MULTIPLY
(
tmp10
 - 
tmp12
, 
FIX_0_382683433
);

208 
z2
 = 
	`MULTIPLY
(
tmp10
, 
FIX_0_541196100
è+ 
z5
;

209 
z4
 = 
	`MULTIPLY
(
tmp12
, 
FIX_1_306562965
è+ 
z5
;

210 
z3
 = 
	`MULTIPLY
(
tmp11
, 
FIX_0_707106781
);

212 
z11
 = 
tmp7
 + 
z3
;

213 
z13
 = 
tmp7
 - 
z3
;

215 
d©­Œ
[
DCTSIZE
*5] = 
z13
 + 
z2
;

216 
d©­Œ
[
DCTSIZE
*3] = 
z13
 - 
z2
;

217 
d©­Œ
[
DCTSIZE
*1] = 
z11
 + 
z4
;

218 
d©­Œ
[
DCTSIZE
*7] = 
z11
 - 
z4
;

220 
d©­Œ
++;

222 
	}
}

	@jfdctint.c

26 
	#JPEG_INTERNALS


	)

27 
	~"jšşude.h
"

28 
	~"j³glib.h
"

29 
	~"jdù.h
"

31 #ifdeà
DCT_ISLOW_SUPPORTED


38 #ià
DCTSIZE
 != 8

39 
	gSÜry
, 
this
 
code
 
Úly
 
cİes
 
	gw™h
 8x8 
	gDCTs
.

77 #ià
BITS_IN_JSAMPLE
 == 8

78 
	#CONST_BITS
 13

	)

79 
	#PASS1_BITS
 2

	)

81 
	#CONST_BITS
 13

	)

82 
	#PASS1_BITS
 1

	)

92 #ià
CONST_BITS
 == 13

93 
	#FIX_0_298631336
 ((
INT32
è2446è

	)

94 
	#FIX_0_390180644
 ((
INT32
è3196è

	)

95 
	#FIX_0_541196100
 ((
INT32
è4433è

	)

96 
	#FIX_0_765366865
 ((
INT32
è6270è

	)

97 
	#FIX_0_899976223
 ((
INT32
è7373è

	)

98 
	#FIX_1_175875602
 ((
INT32
è9633è

	)

99 
	#FIX_1_501321110
 ((
INT32
è12299è

	)

100 
	#FIX_1_847759065
 ((
INT32
è15137è

	)

101 
	#FIX_1_961570560
 ((
INT32
è16069è

	)

102 
	#FIX_2_053119869
 ((
INT32
è16819è

	)

103 
	#FIX_2_562915447
 ((
INT32
è20995è

	)

104 
	#FIX_3_072711026
 ((
INT32
è25172è

	)

106 
	#FIX_0_298631336
 
	`FIX
(0.298631336)

	)

107 
	#FIX_0_390180644
 
	`FIX
(0.390180644)

	)

108 
	#FIX_0_541196100
 
	`FIX
(0.541196100)

	)

109 
	#FIX_0_765366865
 
	`FIX
(0.765366865)

	)

110 
	#FIX_0_899976223
 
	`FIX
(0.899976223)

	)

111 
	#FIX_1_175875602
 
	`FIX
(1.175875602)

	)

112 
	#FIX_1_501321110
 
	`FIX
(1.501321110)

	)

113 
	#FIX_1_847759065
 
	`FIX
(1.847759065)

	)

114 
	#FIX_1_961570560
 
	`FIX
(1.961570560)

	)

115 
	#FIX_2_053119869
 
	`FIX
(2.053119869)

	)

116 
	#FIX_2_562915447
 
	`FIX
(2.562915447)

	)

117 
	#FIX_3_072711026
 
	`FIX
(3.072711026)

	)

128 #ià
BITS_IN_JSAMPLE
 == 8

129 
	#MULTIPLY
(
v¬
,cÚ¡è
	`MULTIPLY16C16
(v¬,cÚ¡)

	)

131 
	#MULTIPLY
(
v¬
,cÚ¡è((v¬è* (cÚ¡))

	)

139 
	$GLOBAL
()

140 
	$j³g_fdù_i¦ow
 (
DCTELEM
 * 
d©a
)

142 
INT32
 
tmp0
, 
tmp1
, 
tmp2
, 
tmp3
, 
tmp4
, 
tmp5
, 
tmp6
, 
tmp7
;

143 
INT32
 
tmp10
, 
tmp11
, 
tmp12
, 
tmp13
;

144 
INT32
 
z1
, 
z2
, 
z3
, 
z4
, 
z5
;

145 
DCTELEM
 *
d©­Œ
;

146 
ùr
;

147 
SHIFT_TEMPS


153 
d©­Œ
 = 
d©a
;

154 
ùr
 = 
DCTSIZE
-1; ctr >= 0; ctr--) {

155 
tmp0
 = 
d©­Œ
[0] + dataptr[7];

156 
tmp7
 = 
d©­Œ
[0] - dataptr[7];

157 
tmp1
 = 
d©­Œ
[1] + dataptr[6];

158 
tmp6
 = 
d©­Œ
[1] - dataptr[6];

159 
tmp2
 = 
d©­Œ
[2] + dataptr[5];

160 
tmp5
 = 
d©­Œ
[2] - dataptr[5];

161 
tmp3
 = 
d©­Œ
[3] + dataptr[4];

162 
tmp4
 = 
d©­Œ
[3] - dataptr[4];

168 
tmp10
 = 
tmp0
 + 
tmp3
;

169 
tmp13
 = 
tmp0
 - 
tmp3
;

170 
tmp11
 = 
tmp1
 + 
tmp2
;

171 
tmp12
 = 
tmp1
 - 
tmp2
;

173 
d©­Œ
[0] = (
DCTELEM
è((
tmp10
 + 
tmp11
è<< 
PASS1_BITS
);

174 
d©­Œ
[4] = (
DCTELEM
è((
tmp10
 - 
tmp11
è<< 
PASS1_BITS
);

176 
z1
 = 
	`MULTIPLY
(
tmp12
 + 
tmp13
, 
FIX_0_541196100
);

177 
d©­Œ
[2] = (
DCTELEM
è
	`DESCALE
(
z1
 + 
	`MULTIPLY
(
tmp13
, 
FIX_0_765366865
),

178 
CONST_BITS
-
PASS1_BITS
);

179 
d©­Œ
[6] = (
DCTELEM
è
	`DESCALE
(
z1
 + 
	`MULTIPLY
(
tmp12
, - 
FIX_1_847759065
),

180 
CONST_BITS
-
PASS1_BITS
);

187 
z1
 = 
tmp4
 + 
tmp7
;

188 
z2
 = 
tmp5
 + 
tmp6
;

189 
z3
 = 
tmp4
 + 
tmp6
;

190 
z4
 = 
tmp5
 + 
tmp7
;

191 
z5
 = 
	`MULTIPLY
(
z3
 + 
z4
, 
FIX_1_175875602
);

193 
tmp4
 = 
	`MULTIPLY
Ñmp4, 
FIX_0_298631336
);

194 
tmp5
 = 
	`MULTIPLY
Ñmp5, 
FIX_2_053119869
);

195 
tmp6
 = 
	`MULTIPLY
Ñmp6, 
FIX_3_072711026
);

196 
tmp7
 = 
	`MULTIPLY
Ñmp7, 
FIX_1_501321110
);

197 
z1
 = 
	`MULTIPLY
(z1, - 
FIX_0_899976223
);

198 
z2
 = 
	`MULTIPLY
(z2, - 
FIX_2_562915447
);

199 
z3
 = 
	`MULTIPLY
(z3, - 
FIX_1_961570560
);

200 
z4
 = 
	`MULTIPLY
(z4, - 
FIX_0_390180644
);

202 
z3
 +ğ
z5
;

203 
z4
 +ğ
z5
;

205 
d©­Œ
[7] = (
DCTELEM
è
	`DESCALE
(
tmp4
 + 
z1
 + 
z3
, 
CONST_BITS
-
PASS1_BITS
);

206 
d©­Œ
[5] = (
DCTELEM
è
	`DESCALE
(
tmp5
 + 
z2
 + 
z4
, 
CONST_BITS
-
PASS1_BITS
);

207 
d©­Œ
[3] = (
DCTELEM
è
	`DESCALE
(
tmp6
 + 
z2
 + 
z3
, 
CONST_BITS
-
PASS1_BITS
);

208 
d©­Œ
[1] = (
DCTELEM
è
	`DESCALE
(
tmp7
 + 
z1
 + 
z4
, 
CONST_BITS
-
PASS1_BITS
);

210 
d©­Œ
 +ğ
DCTSIZE
;

218 
d©­Œ
 = 
d©a
;

219 
ùr
 = 
DCTSIZE
-1; ctr >= 0; ctr--) {

220 
tmp0
 = 
d©­Œ
[
DCTSIZE
*0] + dataptr[DCTSIZE*7];

221 
tmp7
 = 
d©­Œ
[
DCTSIZE
*0] - dataptr[DCTSIZE*7];

222 
tmp1
 = 
d©­Œ
[
DCTSIZE
*1] + dataptr[DCTSIZE*6];

223 
tmp6
 = 
d©­Œ
[
DCTSIZE
*1] - dataptr[DCTSIZE*6];

224 
tmp2
 = 
d©­Œ
[
DCTSIZE
*2] + dataptr[DCTSIZE*5];

225 
tmp5
 = 
d©­Œ
[
DCTSIZE
*2] - dataptr[DCTSIZE*5];

226 
tmp3
 = 
d©­Œ
[
DCTSIZE
*3] + dataptr[DCTSIZE*4];

227 
tmp4
 = 
d©­Œ
[
DCTSIZE
*3] - dataptr[DCTSIZE*4];

233 
tmp10
 = 
tmp0
 + 
tmp3
;

234 
tmp13
 = 
tmp0
 - 
tmp3
;

235 
tmp11
 = 
tmp1
 + 
tmp2
;

236 
tmp12
 = 
tmp1
 - 
tmp2
;

238 
d©­Œ
[
DCTSIZE
*0] = (
DCTELEM
è
	`DESCALE
(
tmp10
 + 
tmp11
, 
PASS1_BITS
);

239 
d©­Œ
[
DCTSIZE
*4] = (
DCTELEM
è
	`DESCALE
(
tmp10
 - 
tmp11
, 
PASS1_BITS
);

241 
z1
 = 
	`MULTIPLY
(
tmp12
 + 
tmp13
, 
FIX_0_541196100
);

242 
d©­Œ
[
DCTSIZE
*2] = (
DCTELEM
è
	`DESCALE
(
z1
 + 
	`MULTIPLY
(
tmp13
, 
FIX_0_765366865
),

243 
CONST_BITS
+
PASS1_BITS
);

244 
d©­Œ
[
DCTSIZE
*6] = (
DCTELEM
è
	`DESCALE
(
z1
 + 
	`MULTIPLY
(
tmp12
, - 
FIX_1_847759065
),

245 
CONST_BITS
+
PASS1_BITS
);

252 
z1
 = 
tmp4
 + 
tmp7
;

253 
z2
 = 
tmp5
 + 
tmp6
;

254 
z3
 = 
tmp4
 + 
tmp6
;

255 
z4
 = 
tmp5
 + 
tmp7
;

256 
z5
 = 
	`MULTIPLY
(
z3
 + 
z4
, 
FIX_1_175875602
);

258 
tmp4
 = 
	`MULTIPLY
Ñmp4, 
FIX_0_298631336
);

259 
tmp5
 = 
	`MULTIPLY
Ñmp5, 
FIX_2_053119869
);

260 
tmp6
 = 
	`MULTIPLY
Ñmp6, 
FIX_3_072711026
);

261 
tmp7
 = 
	`MULTIPLY
Ñmp7, 
FIX_1_501321110
);

262 
z1
 = 
	`MULTIPLY
(z1, - 
FIX_0_899976223
);

263 
z2
 = 
	`MULTIPLY
(z2, - 
FIX_2_562915447
);

264 
z3
 = 
	`MULTIPLY
(z3, - 
FIX_1_961570560
);

265 
z4
 = 
	`MULTIPLY
(z4, - 
FIX_0_390180644
);

267 
z3
 +ğ
z5
;

268 
z4
 +ğ
z5
;

270 
d©­Œ
[
DCTSIZE
*7] = (
DCTELEM
è
	`DESCALE
(
tmp4
 + 
z1
 + 
z3
,

271 
CONST_BITS
+
PASS1_BITS
);

272 
d©­Œ
[
DCTSIZE
*5] = (
DCTELEM
è
	`DESCALE
(
tmp5
 + 
z2
 + 
z4
,

273 
CONST_BITS
+
PASS1_BITS
);

274 
d©­Œ
[
DCTSIZE
*3] = (
DCTELEM
è
	`DESCALE
(
tmp6
 + 
z2
 + 
z3
,

275 
CONST_BITS
+
PASS1_BITS
);

276 
d©­Œ
[
DCTSIZE
*1] = (
DCTELEM
è
	`DESCALE
(
tmp7
 + 
z1
 + 
z4
,

277 
CONST_BITS
+
PASS1_BITS
);

279 
d©­Œ
++;

281 
	}
}

	@jidctflt.c

39 
	#JPEG_INTERNALS


	)

40 
	~"jšşude.h
"

41 
	~"j³glib.h
"

42 
	~"jdù.h
"

44 #ifdeà
DCT_FLOAT_SUPPORTED


51 #ià
DCTSIZE
 != 8

52 
	gSÜry
, 
this
 
code
 
Úly
 
cİes
 
	gw™h
 8x8 
	gDCTs
.

60 
	#DEQUANTIZE
(
cÛf
,
quªtv®
è(((
FAST_FLOAT
è(cÛf)è* (quªtv®))

	)

67 
	$GLOBAL
()

68 
	$j³g_idù_æßt
 (
j_decom´ess_±r
 
cšfo
, 
j³g_compÚ’t_šfo
 * 
comµŒ
,

69 
JCOEFPTR
 
cÛf_block
,

70 
JSAMPARRAY
 
ouut_buf
, 
JDIMENSION
 
ouut_cŞ
)

72 
FAST_FLOAT
 
tmp0
, 
tmp1
, 
tmp2
, 
tmp3
, 
tmp4
, 
tmp5
, 
tmp6
, 
tmp7
;

73 
FAST_FLOAT
 
tmp10
, 
tmp11
, 
tmp12
, 
tmp13
;

74 
FAST_FLOAT
 
z5
, 
z10
, 
z11
, 
z12
, 
z13
;

75 
JCOEFPTR
 
š±r
;

76 
FLOAT_MULT_TYPE
 * 
quªŒ
;

77 
FAST_FLOAT
 * 
w¥Œ
;

78 
JSAMPROW
 
ouŒ
;

79 
JSAMPLE
 *
¿nge_lim™
 = 
	`IDCT_¿nge_lim™
(
cšfo
);

80 
ùr
;

81 
FAST_FLOAT
 
wÜk¥aû
[
DCTSIZE2
];

82 
SHIFT_TEMPS


86 
š±r
 = 
cÛf_block
;

87 
quªŒ
 = (
FLOAT_MULT_TYPE
 *è
comµŒ
->
dù_bË
;

88 
w¥Œ
 = 
wÜk¥aû
;

89 
ùr
 = 
DCTSIZE
; ctr > 0; ctr--) {

99 ià(
š±r
[
DCTSIZE
*1] == 0 && inptr[DCTSIZE*2] == 0 &&

100 
š±r
[
DCTSIZE
*3] == 0 && inptr[DCTSIZE*4] == 0 &&

101 
š±r
[
DCTSIZE
*5] == 0 && inptr[DCTSIZE*6] == 0 &&

102 
š±r
[
DCTSIZE
*7] == 0) {

104 
FAST_FLOAT
 
dcv®
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*0], 
quªŒ
[DCTSIZE*0]);

106 
w¥Œ
[
DCTSIZE
*0] = 
dcv®
;

107 
w¥Œ
[
DCTSIZE
*1] = 
dcv®
;

108 
w¥Œ
[
DCTSIZE
*2] = 
dcv®
;

109 
w¥Œ
[
DCTSIZE
*3] = 
dcv®
;

110 
w¥Œ
[
DCTSIZE
*4] = 
dcv®
;

111 
w¥Œ
[
DCTSIZE
*5] = 
dcv®
;

112 
w¥Œ
[
DCTSIZE
*6] = 
dcv®
;

113 
w¥Œ
[
DCTSIZE
*7] = 
dcv®
;

115 
š±r
++;

116 
quªŒ
++;

117 
w¥Œ
++;

123 
tmp0
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*0], 
quªŒ
[DCTSIZE*0]);

124 
tmp1
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*2], 
quªŒ
[DCTSIZE*2]);

125 
tmp2
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*4], 
quªŒ
[DCTSIZE*4]);

126 
tmp3
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*6], 
quªŒ
[DCTSIZE*6]);

128 
tmp10
 = 
tmp0
 + 
tmp2
;

129 
tmp11
 = 
tmp0
 - 
tmp2
;

131 
tmp13
 = 
tmp1
 + 
tmp3
;

132 
tmp12
 = (
tmp1
 - 
tmp3
è* ((
FAST_FLOAT
è1.414213562è- 
tmp13
;

134 
tmp0
 = 
tmp10
 + 
tmp13
;

135 
tmp3
 = 
tmp10
 - 
tmp13
;

136 
tmp1
 = 
tmp11
 + 
tmp12
;

137 
tmp2
 = 
tmp11
 - 
tmp12
;

141 
tmp4
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*1], 
quªŒ
[DCTSIZE*1]);

142 
tmp5
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*3], 
quªŒ
[DCTSIZE*3]);

143 
tmp6
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*5], 
quªŒ
[DCTSIZE*5]);

144 
tmp7
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*7], 
quªŒ
[DCTSIZE*7]);

146 
z13
 = 
tmp6
 + 
tmp5
;

147 
z10
 = 
tmp6
 - 
tmp5
;

148 
z11
 = 
tmp4
 + 
tmp7
;

149 
z12
 = 
tmp4
 - 
tmp7
;

151 
tmp7
 = 
z11
 + 
z13
;

152 
tmp11
 = (
z11
 - 
z13
è* ((
FAST_FLOAT
) 1.414213562);

154 
z5
 = (
z10
 + 
z12
è* ((
FAST_FLOAT
) 1.847759065);

155 
tmp10
 = ((
FAST_FLOAT
è1.082392200è* 
z12
 - 
z5
;

156 
tmp12
 = ((
FAST_FLOAT
è-2.613125930è* 
z10
 + 
z5
;

158 
tmp6
 = 
tmp12
 - 
tmp7
;

159 
tmp5
 = 
tmp11
 - 
tmp6
;

160 
tmp4
 = 
tmp10
 + 
tmp5
;

162 
w¥Œ
[
DCTSIZE
*0] = 
tmp0
 + 
tmp7
;

163 
w¥Œ
[
DCTSIZE
*7] = 
tmp0
 - 
tmp7
;

164 
w¥Œ
[
DCTSIZE
*1] = 
tmp1
 + 
tmp6
;

165 
w¥Œ
[
DCTSIZE
*6] = 
tmp1
 - 
tmp6
;

166 
w¥Œ
[
DCTSIZE
*2] = 
tmp2
 + 
tmp5
;

167 
w¥Œ
[
DCTSIZE
*5] = 
tmp2
 - 
tmp5
;

168 
w¥Œ
[
DCTSIZE
*4] = 
tmp3
 + 
tmp4
;

169 
w¥Œ
[
DCTSIZE
*3] = 
tmp3
 - 
tmp4
;

171 
š±r
++;

172 
quªŒ
++;

173 
w¥Œ
++;

179 
w¥Œ
 = 
wÜk¥aû
;

180 
ùr
 = 0; cŒ < 
DCTSIZE
; ctr++) {

181 
ouŒ
 = 
ouut_buf
[
ùr
] + 
ouut_cŞ
;

190 
tmp10
 = 
w¥Œ
[0] + wsptr[4];

191 
tmp11
 = 
w¥Œ
[0] - wsptr[4];

193 
tmp13
 = 
w¥Œ
[2] + wsptr[6];

194 
tmp12
 = (
w¥Œ
[2] - w¥Œ[6]è* ((
FAST_FLOAT
è1.414213562è- 
tmp13
;

196 
tmp0
 = 
tmp10
 + 
tmp13
;

197 
tmp3
 = 
tmp10
 - 
tmp13
;

198 
tmp1
 = 
tmp11
 + 
tmp12
;

199 
tmp2
 = 
tmp11
 - 
tmp12
;

203 
z13
 = 
w¥Œ
[5] + wsptr[3];

204 
z10
 = 
w¥Œ
[5] - wsptr[3];

205 
z11
 = 
w¥Œ
[1] + wsptr[7];

206 
z12
 = 
w¥Œ
[1] - wsptr[7];

208 
tmp7
 = 
z11
 + 
z13
;

209 
tmp11
 = (
z11
 - 
z13
è* ((
FAST_FLOAT
) 1.414213562);

211 
z5
 = (
z10
 + 
z12
è* ((
FAST_FLOAT
) 1.847759065);

212 
tmp10
 = ((
FAST_FLOAT
è1.082392200è* 
z12
 - 
z5
;

213 
tmp12
 = ((
FAST_FLOAT
è-2.613125930è* 
z10
 + 
z5
;

215 
tmp6
 = 
tmp12
 - 
tmp7
;

216 
tmp5
 = 
tmp11
 - 
tmp6
;

217 
tmp4
 = 
tmp10
 + 
tmp5
;

221 
ouŒ
[0] = 
¿nge_lim™
[(è
	`DESCALE
((
INT32
è(
tmp0
 + 
tmp7
), 3)

222 & 
RANGE_MASK
];

223 
ouŒ
[7] = 
¿nge_lim™
[(è
	`DESCALE
((
INT32
è(
tmp0
 - 
tmp7
), 3)

224 & 
RANGE_MASK
];

225 
ouŒ
[1] = 
¿nge_lim™
[(è
	`DESCALE
((
INT32
è(
tmp1
 + 
tmp6
), 3)

226 & 
RANGE_MASK
];

227 
ouŒ
[6] = 
¿nge_lim™
[(è
	`DESCALE
((
INT32
è(
tmp1
 - 
tmp6
), 3)

228 & 
RANGE_MASK
];

229 
ouŒ
[2] = 
¿nge_lim™
[(è
	`DESCALE
((
INT32
è(
tmp2
 + 
tmp5
), 3)

230 & 
RANGE_MASK
];

231 
ouŒ
[5] = 
¿nge_lim™
[(è
	`DESCALE
((
INT32
è(
tmp2
 - 
tmp5
), 3)

232 & 
RANGE_MASK
];

233 
ouŒ
[4] = 
¿nge_lim™
[(è
	`DESCALE
((
INT32
è(
tmp3
 + 
tmp4
), 3)

234 & 
RANGE_MASK
];

235 
ouŒ
[3] = 
¿nge_lim™
[(è
	`DESCALE
((
INT32
è(
tmp3
 - 
tmp4
), 3)

236 & 
RANGE_MASK
];

238 
w¥Œ
 +ğ
DCTSIZE
;

240 
	}
}

	@jidctfst.c

35 
	#JPEG_INTERNALS


	)

36 
	~"jšşude.h
"

37 
	~"j³glib.h
"

38 
	~"jdù.h
"

40 #ifdeà
DCT_IFAST_SUPPORTED


47 #ià
DCTSIZE
 != 8

48 
	gSÜry
, 
this
 
code
 
Úly
 
cİes
 
	gw™h
 8x8 
	gDCTs
.

76 #ià
BITS_IN_JSAMPLE
 == 8

77 
	#CONST_BITS
 8

	)

78 
	#PASS1_BITS
 2

	)

80 
	#CONST_BITS
 8

	)

81 
	#PASS1_BITS
 1

	)

91 #ià
CONST_BITS
 == 8

92 
	#FIX_1_082392200
 ((
INT32
è277è

	)

93 
	#FIX_1_414213562
 ((
INT32
è362è

	)

94 
	#FIX_1_847759065
 ((
INT32
è473è

	)

95 
	#FIX_2_613125930
 ((
INT32
è669è

	)

97 
	#FIX_1_082392200
 
	`FIX
(1.082392200)

	)

98 
	#FIX_1_414213562
 
	`FIX
(1.414213562)

	)

99 
	#FIX_1_847759065
 
	`FIX
(1.847759065)

	)

100 
	#FIX_2_613125930
 
	`FIX
(2.613125930)

	)

109 #iâdeà
USE_ACCURATE_ROUNDING


110 #undeà
DESCALE


111 
	#DESCALE
(
x
,
n
è
	`RIGHT_SHIFT
(x,‚)

	)

119 
	#MULTIPLY
(
v¬
,cÚ¡è((
DCTELEM
è
	`DESCALE
((v¬è* (cÚ¡), 
CONST_BITS
))

	)

128 #ià
BITS_IN_JSAMPLE
 == 8

129 
	#DEQUANTIZE
(
cÛf
,
quªtv®
è(((
IFAST_MULT_TYPE
è(cÛf)è* (quªtv®))

	)

131 
	#DEQUANTIZE
(
cÛf
,
quªtv®
) \

132 
	`DESCALE
((
cÛf
)*(
quªtv®
), 
IFAST_SCALE_BITS
-
PASS1_BITS
)

	)

140 #ifdeà
RIGHT_SHIFT_IS_UNSIGNED


141 
	#ISHIFT_TEMPS
 
DCTELEM
 
ishiá_‹mp
;

	)

142 #ià
BITS_IN_JSAMPLE
 == 8

143 
	#DCTELEMBITS
 16

	)

145 
	#DCTELEMBITS
 32

	)

147 
	#IRIGHT_SHIFT
(
x
,
shá
) \

148 ((
ishiá_‹mp
 = (
x
)) < 0 ? \

149 (
ishiá_‹mp
 >> (
shá
)è| ((~((
DCTELEM
è0)è<< (
DCTELEMBITS
-(shft))) : \

150 (
ishiá_‹mp
 >> (
shá
)))

	)

152 
	#ISHIFT_TEMPS


	)

153 
	#IRIGHT_SHIFT
(
x
,
shá
è((xè>> (shá))

	)

156 #ifdeà
USE_ACCURATE_ROUNDING


157 
	#IDESCALE
(
x
,
n
è((è
	`IRIGHT_SHIFT
((xè+ (1 << (Ò)-1)),‚))

	)

159 
	#IDESCALE
(
x
,
n
è((è
	`IRIGHT_SHIFT
(x,‚))

	)

167 
	$GLOBAL
()

168 
	$j³g_idù_iç¡
 (
j_decom´ess_±r
 
cšfo
, 
j³g_compÚ’t_šfo
 * 
comµŒ
,

169 
JCOEFPTR
 
cÛf_block
,

170 
JSAMPARRAY
 
ouut_buf
, 
JDIMENSION
 
ouut_cŞ
)

172 
DCTELEM
 
tmp0
, 
tmp1
, 
tmp2
, 
tmp3
, 
tmp4
, 
tmp5
, 
tmp6
, 
tmp7
;

173 
DCTELEM
 
tmp10
, 
tmp11
, 
tmp12
, 
tmp13
;

174 
DCTELEM
 
z5
, 
z10
, 
z11
, 
z12
, 
z13
;

175 
JCOEFPTR
 
š±r
;

176 
IFAST_MULT_TYPE
 * 
quªŒ
;

177 * 
w¥Œ
;

178 
JSAMPROW
 
ouŒ
;

179 
JSAMPLE
 *
¿nge_lim™
 = 
	`IDCT_¿nge_lim™
(
cšfo
);

180 
ùr
;

181 
wÜk¥aû
[
DCTSIZE2
];

182 
SHIFT_TEMPS


183 
ISHIFT_TEMPS


187 
š±r
 = 
cÛf_block
;

188 
quªŒ
 = (
IFAST_MULT_TYPE
 *è
comµŒ
->
dù_bË
;

189 
w¥Œ
 = 
wÜk¥aû
;

190 
ùr
 = 
DCTSIZE
; ctr > 0; ctr--) {

200 ià(
š±r
[
DCTSIZE
*1] == 0 && inptr[DCTSIZE*2] == 0 &&

201 
š±r
[
DCTSIZE
*3] == 0 && inptr[DCTSIZE*4] == 0 &&

202 
š±r
[
DCTSIZE
*5] == 0 && inptr[DCTSIZE*6] == 0 &&

203 
š±r
[
DCTSIZE
*7] == 0) {

205 
dcv®
 = (è
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*0], 
quªŒ
[DCTSIZE*0]);

207 
w¥Œ
[
DCTSIZE
*0] = 
dcv®
;

208 
w¥Œ
[
DCTSIZE
*1] = 
dcv®
;

209 
w¥Œ
[
DCTSIZE
*2] = 
dcv®
;

210 
w¥Œ
[
DCTSIZE
*3] = 
dcv®
;

211 
w¥Œ
[
DCTSIZE
*4] = 
dcv®
;

212 
w¥Œ
[
DCTSIZE
*5] = 
dcv®
;

213 
w¥Œ
[
DCTSIZE
*6] = 
dcv®
;

214 
w¥Œ
[
DCTSIZE
*7] = 
dcv®
;

216 
š±r
++;

217 
quªŒ
++;

218 
w¥Œ
++;

224 
tmp0
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*0], 
quªŒ
[DCTSIZE*0]);

225 
tmp1
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*2], 
quªŒ
[DCTSIZE*2]);

226 
tmp2
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*4], 
quªŒ
[DCTSIZE*4]);

227 
tmp3
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*6], 
quªŒ
[DCTSIZE*6]);

229 
tmp10
 = 
tmp0
 + 
tmp2
;

230 
tmp11
 = 
tmp0
 - 
tmp2
;

232 
tmp13
 = 
tmp1
 + 
tmp3
;

233 
tmp12
 = 
	`MULTIPLY
(
tmp1
 - 
tmp3
, 
FIX_1_414213562
è- 
tmp13
;

235 
tmp0
 = 
tmp10
 + 
tmp13
;

236 
tmp3
 = 
tmp10
 - 
tmp13
;

237 
tmp1
 = 
tmp11
 + 
tmp12
;

238 
tmp2
 = 
tmp11
 - 
tmp12
;

242 
tmp4
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*1], 
quªŒ
[DCTSIZE*1]);

243 
tmp5
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*3], 
quªŒ
[DCTSIZE*3]);

244 
tmp6
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*5], 
quªŒ
[DCTSIZE*5]);

245 
tmp7
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*7], 
quªŒ
[DCTSIZE*7]);

247 
z13
 = 
tmp6
 + 
tmp5
;

248 
z10
 = 
tmp6
 - 
tmp5
;

249 
z11
 = 
tmp4
 + 
tmp7
;

250 
z12
 = 
tmp4
 - 
tmp7
;

252 
tmp7
 = 
z11
 + 
z13
;

253 
tmp11
 = 
	`MULTIPLY
(
z11
 - 
z13
, 
FIX_1_414213562
);

255 
z5
 = 
	`MULTIPLY
(
z10
 + 
z12
, 
FIX_1_847759065
);

256 
tmp10
 = 
	`MULTIPLY
(
z12
, 
FIX_1_082392200
è- 
z5
;

257 
tmp12
 = 
	`MULTIPLY
(
z10
, - 
FIX_2_613125930
è+ 
z5
;

259 
tmp6
 = 
tmp12
 - 
tmp7
;

260 
tmp5
 = 
tmp11
 - 
tmp6
;

261 
tmp4
 = 
tmp10
 + 
tmp5
;

263 
w¥Œ
[
DCTSIZE
*0] = (è(
tmp0
 + 
tmp7
);

264 
w¥Œ
[
DCTSIZE
*7] = (è(
tmp0
 - 
tmp7
);

265 
w¥Œ
[
DCTSIZE
*1] = (è(
tmp1
 + 
tmp6
);

266 
w¥Œ
[
DCTSIZE
*6] = (è(
tmp1
 - 
tmp6
);

267 
w¥Œ
[
DCTSIZE
*2] = (è(
tmp2
 + 
tmp5
);

268 
w¥Œ
[
DCTSIZE
*5] = (è(
tmp2
 - 
tmp5
);

269 
w¥Œ
[
DCTSIZE
*4] = (è(
tmp3
 + 
tmp4
);

270 
w¥Œ
[
DCTSIZE
*3] = (è(
tmp3
 - 
tmp4
);

272 
š±r
++;

273 
quªŒ
++;

274 
w¥Œ
++;

281 
w¥Œ
 = 
wÜk¥aû
;

282 
ùr
 = 0; cŒ < 
DCTSIZE
; ctr++) {

283 
ouŒ
 = 
ouut_buf
[
ùr
] + 
ouut_cŞ
;

292 #iâdeà
NO_ZERO_ROW_TEST


293 ià(
w¥Œ
[1] == 0 && wsptr[2] == 0 && wsptr[3] == 0 && wsptr[4] == 0 &&

294 
w¥Œ
[5] == 0 && wsptr[6] == 0 && wsptr[7] == 0) {

296 
JSAMPLE
 
dcv®
 = 
¿nge_lim™
[
	`IDESCALE
(
w¥Œ
[0], 
PASS1_BITS
+3)

297 & 
RANGE_MASK
];

299 
ouŒ
[0] = 
dcv®
;

300 
ouŒ
[1] = 
dcv®
;

301 
ouŒ
[2] = 
dcv®
;

302 
ouŒ
[3] = 
dcv®
;

303 
ouŒ
[4] = 
dcv®
;

304 
ouŒ
[5] = 
dcv®
;

305 
ouŒ
[6] = 
dcv®
;

306 
ouŒ
[7] = 
dcv®
;

308 
w¥Œ
 +ğ
DCTSIZE
;

315 
tmp10
 = ((
DCTELEM
è
w¥Œ
[0] + (DCTELEM) wsptr[4]);

316 
tmp11
 = ((
DCTELEM
è
w¥Œ
[0] - (DCTELEM) wsptr[4]);

318 
tmp13
 = ((
DCTELEM
è
w¥Œ
[2] + (DCTELEM) wsptr[6]);

319 
tmp12
 = 
	`MULTIPLY
((
DCTELEM
è
w¥Œ
[2] - (DCTELEMèw¥Œ[6], 
FIX_1_414213562
)

320 - 
tmp13
;

322 
tmp0
 = 
tmp10
 + 
tmp13
;

323 
tmp3
 = 
tmp10
 - 
tmp13
;

324 
tmp1
 = 
tmp11
 + 
tmp12
;

325 
tmp2
 = 
tmp11
 - 
tmp12
;

329 
z13
 = (
DCTELEM
è
w¥Œ
[5] + (DCTELEM) wsptr[3];

330 
z10
 = (
DCTELEM
è
w¥Œ
[5] - (DCTELEM) wsptr[3];

331 
z11
 = (
DCTELEM
è
w¥Œ
[1] + (DCTELEM) wsptr[7];

332 
z12
 = (
DCTELEM
è
w¥Œ
[1] - (DCTELEM) wsptr[7];

334 
tmp7
 = 
z11
 + 
z13
;

335 
tmp11
 = 
	`MULTIPLY
(
z11
 - 
z13
, 
FIX_1_414213562
);

337 
z5
 = 
	`MULTIPLY
(
z10
 + 
z12
, 
FIX_1_847759065
);

338 
tmp10
 = 
	`MULTIPLY
(
z12
, 
FIX_1_082392200
è- 
z5
;

339 
tmp12
 = 
	`MULTIPLY
(
z10
, - 
FIX_2_613125930
è+ 
z5
;

341 
tmp6
 = 
tmp12
 - 
tmp7
;

342 
tmp5
 = 
tmp11
 - 
tmp6
;

343 
tmp4
 = 
tmp10
 + 
tmp5
;

347 
ouŒ
[0] = 
¿nge_lim™
[
	`IDESCALE
(
tmp0
 + 
tmp7
, 
PASS1_BITS
+3)

348 & 
RANGE_MASK
];

349 
ouŒ
[7] = 
¿nge_lim™
[
	`IDESCALE
(
tmp0
 - 
tmp7
, 
PASS1_BITS
+3)

350 & 
RANGE_MASK
];

351 
ouŒ
[1] = 
¿nge_lim™
[
	`IDESCALE
(
tmp1
 + 
tmp6
, 
PASS1_BITS
+3)

352 & 
RANGE_MASK
];

353 
ouŒ
[6] = 
¿nge_lim™
[
	`IDESCALE
(
tmp1
 - 
tmp6
, 
PASS1_BITS
+3)

354 & 
RANGE_MASK
];

355 
ouŒ
[2] = 
¿nge_lim™
[
	`IDESCALE
(
tmp2
 + 
tmp5
, 
PASS1_BITS
+3)

356 & 
RANGE_MASK
];

357 
ouŒ
[5] = 
¿nge_lim™
[
	`IDESCALE
(
tmp2
 - 
tmp5
, 
PASS1_BITS
+3)

358 & 
RANGE_MASK
];

359 
ouŒ
[4] = 
¿nge_lim™
[
	`IDESCALE
(
tmp3
 + 
tmp4
, 
PASS1_BITS
+3)

360 & 
RANGE_MASK
];

361 
ouŒ
[3] = 
¿nge_lim™
[
	`IDESCALE
(
tmp3
 - 
tmp4
, 
PASS1_BITS
+3)

362 & 
RANGE_MASK
];

364 
w¥Œ
 +ğ
DCTSIZE
;

366 
	}
}

	@jidctint.c

28 
	#JPEG_INTERNALS


	)

29 
	~"jšşude.h
"

30 
	~"j³glib.h
"

31 
	~"jdù.h
"

33 #ifdeà
DCT_ISLOW_SUPPORTED


40 #ià
DCTSIZE
 != 8

41 
	gSÜry
, 
this
 
code
 
Úly
 
cİes
 
	gw™h
 8x8 
	gDCTs
.

77 #ià
BITS_IN_JSAMPLE
 == 8

78 
	#CONST_BITS
 13

	)

79 
	#PASS1_BITS
 2

	)

81 
	#CONST_BITS
 13

	)

82 
	#PASS1_BITS
 1

	)

92 #ià
CONST_BITS
 == 13

93 
	#FIX_0_298631336
 ((
INT32
è2446è

	)

94 
	#FIX_0_390180644
 ((
INT32
è3196è

	)

95 
	#FIX_0_541196100
 ((
INT32
è4433è

	)

96 
	#FIX_0_765366865
 ((
INT32
è6270è

	)

97 
	#FIX_0_899976223
 ((
INT32
è7373è

	)

98 
	#FIX_1_175875602
 ((
INT32
è9633è

	)

99 
	#FIX_1_501321110
 ((
INT32
è12299è

	)

100 
	#FIX_1_847759065
 ((
INT32
è15137è

	)

101 
	#FIX_1_961570560
 ((
INT32
è16069è

	)

102 
	#FIX_2_053119869
 ((
INT32
è16819è

	)

103 
	#FIX_2_562915447
 ((
INT32
è20995è

	)

104 
	#FIX_3_072711026
 ((
INT32
è25172è

	)

106 
	#FIX_0_298631336
 
	`FIX
(0.298631336)

	)

107 
	#FIX_0_390180644
 
	`FIX
(0.390180644)

	)

108 
	#FIX_0_541196100
 
	`FIX
(0.541196100)

	)

109 
	#FIX_0_765366865
 
	`FIX
(0.765366865)

	)

110 
	#FIX_0_899976223
 
	`FIX
(0.899976223)

	)

111 
	#FIX_1_175875602
 
	`FIX
(1.175875602)

	)

112 
	#FIX_1_501321110
 
	`FIX
(1.501321110)

	)

113 
	#FIX_1_847759065
 
	`FIX
(1.847759065)

	)

114 
	#FIX_1_961570560
 
	`FIX
(1.961570560)

	)

115 
	#FIX_2_053119869
 
	`FIX
(2.053119869)

	)

116 
	#FIX_2_562915447
 
	`FIX
(2.562915447)

	)

117 
	#FIX_3_072711026
 
	`FIX
(3.072711026)

	)

128 #ià
BITS_IN_JSAMPLE
 == 8

129 
	#MULTIPLY
(
v¬
,cÚ¡è
	`MULTIPLY16C16
(v¬,cÚ¡)

	)

131 
	#MULTIPLY
(
v¬
,cÚ¡è((v¬è* (cÚ¡))

	)

140 
	#DEQUANTIZE
(
cÛf
,
quªtv®
è(((
ISLOW_MULT_TYPE
è(cÛf)è* (quªtv®))

	)

147 
	$GLOBAL
()

148 
	$j³g_idù_i¦ow
 (
j_decom´ess_±r
 
cšfo
, 
j³g_compÚ’t_šfo
 * 
comµŒ
,

149 
JCOEFPTR
 
cÛf_block
,

150 
JSAMPARRAY
 
ouut_buf
, 
JDIMENSION
 
ouut_cŞ
)

152 
INT32
 
tmp0
, 
tmp1
, 
tmp2
, 
tmp3
;

153 
INT32
 
tmp10
, 
tmp11
, 
tmp12
, 
tmp13
;

154 
INT32
 
z1
, 
z2
, 
z3
, 
z4
, 
z5
;

155 
JCOEFPTR
 
š±r
;

156 
ISLOW_MULT_TYPE
 * 
quªŒ
;

157 * 
w¥Œ
;

158 
JSAMPROW
 
ouŒ
;

159 
JSAMPLE
 *
¿nge_lim™
 = 
	`IDCT_¿nge_lim™
(
cšfo
);

160 
ùr
;

161 
wÜk¥aû
[
DCTSIZE2
];

162 
SHIFT_TEMPS


168 
š±r
 = 
cÛf_block
;

169 
quªŒ
 = (
ISLOW_MULT_TYPE
 *è
comµŒ
->
dù_bË
;

170 
w¥Œ
 = 
wÜk¥aû
;

171 
ùr
 = 
DCTSIZE
; ctr > 0; ctr--) {

181 ià(
š±r
[
DCTSIZE
*1] == 0 && inptr[DCTSIZE*2] == 0 &&

182 
š±r
[
DCTSIZE
*3] == 0 && inptr[DCTSIZE*4] == 0 &&

183 
š±r
[
DCTSIZE
*5] == 0 && inptr[DCTSIZE*6] == 0 &&

184 
š±r
[
DCTSIZE
*7] == 0) {

186 
dcv®
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*0], 
quªŒ
[DCTSIZE*0]è<< 
PASS1_BITS
;

188 
w¥Œ
[
DCTSIZE
*0] = 
dcv®
;

189 
w¥Œ
[
DCTSIZE
*1] = 
dcv®
;

190 
w¥Œ
[
DCTSIZE
*2] = 
dcv®
;

191 
w¥Œ
[
DCTSIZE
*3] = 
dcv®
;

192 
w¥Œ
[
DCTSIZE
*4] = 
dcv®
;

193 
w¥Œ
[
DCTSIZE
*5] = 
dcv®
;

194 
w¥Œ
[
DCTSIZE
*6] = 
dcv®
;

195 
w¥Œ
[
DCTSIZE
*7] = 
dcv®
;

197 
š±r
++;

198 
quªŒ
++;

199 
w¥Œ
++;

206 
z2
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*2], 
quªŒ
[DCTSIZE*2]);

207 
z3
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*6], 
quªŒ
[DCTSIZE*6]);

209 
z1
 = 
	`MULTIPLY
(
z2
 + 
z3
, 
FIX_0_541196100
);

210 
tmp2
 = 
z1
 + 
	`MULTIPLY
(
z3
, - 
FIX_1_847759065
);

211 
tmp3
 = 
z1
 + 
	`MULTIPLY
(
z2
, 
FIX_0_765366865
);

213 
z2
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*0], 
quªŒ
[DCTSIZE*0]);

214 
z3
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*4], 
quªŒ
[DCTSIZE*4]);

216 
tmp0
 = (
z2
 + 
z3
è<< 
CONST_BITS
;

217 
tmp1
 = (
z2
 - 
z3
è<< 
CONST_BITS
;

219 
tmp10
 = 
tmp0
 + 
tmp3
;

220 
tmp13
 = 
tmp0
 - 
tmp3
;

221 
tmp11
 = 
tmp1
 + 
tmp2
;

222 
tmp12
 = 
tmp1
 - 
tmp2
;

228 
tmp0
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*7], 
quªŒ
[DCTSIZE*7]);

229 
tmp1
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*5], 
quªŒ
[DCTSIZE*5]);

230 
tmp2
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*3], 
quªŒ
[DCTSIZE*3]);

231 
tmp3
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*1], 
quªŒ
[DCTSIZE*1]);

233 
z1
 = 
tmp0
 + 
tmp3
;

234 
z2
 = 
tmp1
 + 
tmp2
;

235 
z3
 = 
tmp0
 + 
tmp2
;

236 
z4
 = 
tmp1
 + 
tmp3
;

237 
z5
 = 
	`MULTIPLY
(
z3
 + 
z4
, 
FIX_1_175875602
);

239 
tmp0
 = 
	`MULTIPLY
Ñmp0, 
FIX_0_298631336
);

240 
tmp1
 = 
	`MULTIPLY
Ñmp1, 
FIX_2_053119869
);

241 
tmp2
 = 
	`MULTIPLY
Ñmp2, 
FIX_3_072711026
);

242 
tmp3
 = 
	`MULTIPLY
Ñmp3, 
FIX_1_501321110
);

243 
z1
 = 
	`MULTIPLY
(z1, - 
FIX_0_899976223
);

244 
z2
 = 
	`MULTIPLY
(z2, - 
FIX_2_562915447
);

245 
z3
 = 
	`MULTIPLY
(z3, - 
FIX_1_961570560
);

246 
z4
 = 
	`MULTIPLY
(z4, - 
FIX_0_390180644
);

248 
z3
 +ğ
z5
;

249 
z4
 +ğ
z5
;

251 
tmp0
 +ğ
z1
 + 
z3
;

252 
tmp1
 +ğ
z2
 + 
z4
;

253 
tmp2
 +ğ
z2
 + 
z3
;

254 
tmp3
 +ğ
z1
 + 
z4
;

258 
w¥Œ
[
DCTSIZE
*0] = (è
	`DESCALE
(
tmp10
 + 
tmp3
, 
CONST_BITS
-
PASS1_BITS
);

259 
w¥Œ
[
DCTSIZE
*7] = (è
	`DESCALE
(
tmp10
 - 
tmp3
, 
CONST_BITS
-
PASS1_BITS
);

260 
w¥Œ
[
DCTSIZE
*1] = (è
	`DESCALE
(
tmp11
 + 
tmp2
, 
CONST_BITS
-
PASS1_BITS
);

261 
w¥Œ
[
DCTSIZE
*6] = (è
	`DESCALE
(
tmp11
 - 
tmp2
, 
CONST_BITS
-
PASS1_BITS
);

262 
w¥Œ
[
DCTSIZE
*2] = (è
	`DESCALE
(
tmp12
 + 
tmp1
, 
CONST_BITS
-
PASS1_BITS
);

263 
w¥Œ
[
DCTSIZE
*5] = (è
	`DESCALE
(
tmp12
 - 
tmp1
, 
CONST_BITS
-
PASS1_BITS
);

264 
w¥Œ
[
DCTSIZE
*3] = (è
	`DESCALE
(
tmp13
 + 
tmp0
, 
CONST_BITS
-
PASS1_BITS
);

265 
w¥Œ
[
DCTSIZE
*4] = (è
	`DESCALE
(
tmp13
 - 
tmp0
, 
CONST_BITS
-
PASS1_BITS
);

267 
š±r
++;

268 
quªŒ
++;

269 
w¥Œ
++;

276 
w¥Œ
 = 
wÜk¥aû
;

277 
ùr
 = 0; cŒ < 
DCTSIZE
; ctr++) {

278 
ouŒ
 = 
ouut_buf
[
ùr
] + 
ouut_cŞ
;

287 #iâdeà
NO_ZERO_ROW_TEST


288 ià(
w¥Œ
[1] == 0 && wsptr[2] == 0 && wsptr[3] == 0 && wsptr[4] == 0 &&

289 
w¥Œ
[5] == 0 && wsptr[6] == 0 && wsptr[7] == 0) {

291 
JSAMPLE
 
dcv®
 = 
¿nge_lim™
[(è
	`DESCALE
((
INT32
è
w¥Œ
[0], 
PASS1_BITS
+3)

292 & 
RANGE_MASK
];

294 
ouŒ
[0] = 
dcv®
;

295 
ouŒ
[1] = 
dcv®
;

296 
ouŒ
[2] = 
dcv®
;

297 
ouŒ
[3] = 
dcv®
;

298 
ouŒ
[4] = 
dcv®
;

299 
ouŒ
[5] = 
dcv®
;

300 
ouŒ
[6] = 
dcv®
;

301 
ouŒ
[7] = 
dcv®
;

303 
w¥Œ
 +ğ
DCTSIZE
;

311 
z2
 = (
INT32
è
w¥Œ
[2];

312 
z3
 = (
INT32
è
w¥Œ
[6];

314 
z1
 = 
	`MULTIPLY
(
z2
 + 
z3
, 
FIX_0_541196100
);

315 
tmp2
 = 
z1
 + 
	`MULTIPLY
(
z3
, - 
FIX_1_847759065
);

316 
tmp3
 = 
z1
 + 
	`MULTIPLY
(
z2
, 
FIX_0_765366865
);

318 
tmp0
 = ((
INT32
è
w¥Œ
[0] + (INT32èw¥Œ[4]è<< 
CONST_BITS
;

319 
tmp1
 = ((
INT32
è
w¥Œ
[0] - (INT32èw¥Œ[4]è<< 
CONST_BITS
;

321 
tmp10
 = 
tmp0
 + 
tmp3
;

322 
tmp13
 = 
tmp0
 - 
tmp3
;

323 
tmp11
 = 
tmp1
 + 
tmp2
;

324 
tmp12
 = 
tmp1
 - 
tmp2
;

330 
tmp0
 = (
INT32
è
w¥Œ
[7];

331 
tmp1
 = (
INT32
è
w¥Œ
[5];

332 
tmp2
 = (
INT32
è
w¥Œ
[3];

333 
tmp3
 = (
INT32
è
w¥Œ
[1];

335 
z1
 = 
tmp0
 + 
tmp3
;

336 
z2
 = 
tmp1
 + 
tmp2
;

337 
z3
 = 
tmp0
 + 
tmp2
;

338 
z4
 = 
tmp1
 + 
tmp3
;

339 
z5
 = 
	`MULTIPLY
(
z3
 + 
z4
, 
FIX_1_175875602
);

341 
tmp0
 = 
	`MULTIPLY
Ñmp0, 
FIX_0_298631336
);

342 
tmp1
 = 
	`MULTIPLY
Ñmp1, 
FIX_2_053119869
);

343 
tmp2
 = 
	`MULTIPLY
Ñmp2, 
FIX_3_072711026
);

344 
tmp3
 = 
	`MULTIPLY
Ñmp3, 
FIX_1_501321110
);

345 
z1
 = 
	`MULTIPLY
(z1, - 
FIX_0_899976223
);

346 
z2
 = 
	`MULTIPLY
(z2, - 
FIX_2_562915447
);

347 
z3
 = 
	`MULTIPLY
(z3, - 
FIX_1_961570560
);

348 
z4
 = 
	`MULTIPLY
(z4, - 
FIX_0_390180644
);

350 
z3
 +ğ
z5
;

351 
z4
 +ğ
z5
;

353 
tmp0
 +ğ
z1
 + 
z3
;

354 
tmp1
 +ğ
z2
 + 
z4
;

355 
tmp2
 +ğ
z2
 + 
z3
;

356 
tmp3
 +ğ
z1
 + 
z4
;

360 
ouŒ
[0] = 
¿nge_lim™
[(è
	`DESCALE
(
tmp10
 + 
tmp3
,

361 
CONST_BITS
+
PASS1_BITS
+3)

362 & 
RANGE_MASK
];

363 
ouŒ
[7] = 
¿nge_lim™
[(è
	`DESCALE
(
tmp10
 - 
tmp3
,

364 
CONST_BITS
+
PASS1_BITS
+3)

365 & 
RANGE_MASK
];

366 
ouŒ
[1] = 
¿nge_lim™
[(è
	`DESCALE
(
tmp11
 + 
tmp2
,

367 
CONST_BITS
+
PASS1_BITS
+3)

368 & 
RANGE_MASK
];

369 
ouŒ
[6] = 
¿nge_lim™
[(è
	`DESCALE
(
tmp11
 - 
tmp2
,

370 
CONST_BITS
+
PASS1_BITS
+3)

371 & 
RANGE_MASK
];

372 
ouŒ
[2] = 
¿nge_lim™
[(è
	`DESCALE
(
tmp12
 + 
tmp1
,

373 
CONST_BITS
+
PASS1_BITS
+3)

374 & 
RANGE_MASK
];

375 
ouŒ
[5] = 
¿nge_lim™
[(è
	`DESCALE
(
tmp12
 - 
tmp1
,

376 
CONST_BITS
+
PASS1_BITS
+3)

377 & 
RANGE_MASK
];

378 
ouŒ
[3] = 
¿nge_lim™
[(è
	`DESCALE
(
tmp13
 + 
tmp0
,

379 
CONST_BITS
+
PASS1_BITS
+3)

380 & 
RANGE_MASK
];

381 
ouŒ
[4] = 
¿nge_lim™
[(è
	`DESCALE
(
tmp13
 - 
tmp0
,

382 
CONST_BITS
+
PASS1_BITS
+3)

383 & 
RANGE_MASK
];

385 
w¥Œ
 +ğ
DCTSIZE
;

387 
	}
}

	@jidctred.c

23 
	#JPEG_INTERNALS


	)

24 
	~"jšşude.h
"

25 
	~"j³glib.h
"

26 
	~"jdù.h
"

28 #ifdeà
IDCT_SCALING_SUPPORTED


35 #ià
DCTSIZE
 != 8

36 
	gSÜry
, 
this
 
code
 
Úly
 
cİes
 
	gw™h
 8x8 
	gDCTs
.

42 #ià
BITS_IN_JSAMPLE
 == 8

43 
	#CONST_BITS
 13

	)

44 
	#PASS1_BITS
 2

	)

46 
	#CONST_BITS
 13

	)

47 
	#PASS1_BITS
 1

	)

57 #ià
CONST_BITS
 == 13

58 
	#FIX_0_211164243
 ((
INT32
è1730è

	)

59 
	#FIX_0_509795579
 ((
INT32
è4176è

	)

60 
	#FIX_0_601344887
 ((
INT32
è4926è

	)

61 
	#FIX_0_720959822
 ((
INT32
è5906è

	)

62 
	#FIX_0_765366865
 ((
INT32
è6270è

	)

63 
	#FIX_0_850430095
 ((
INT32
è6967è

	)

64 
	#FIX_0_899976223
 ((
INT32
è7373è

	)

65 
	#FIX_1_061594337
 ((
INT32
è8697è

	)

66 
	#FIX_1_272758580
 ((
INT32
è10426è

	)

67 
	#FIX_1_451774981
 ((
INT32
è11893è

	)

68 
	#FIX_1_847759065
 ((
INT32
è15137è

	)

69 
	#FIX_2_172734803
 ((
INT32
è17799è

	)

70 
	#FIX_2_562915447
 ((
INT32
è20995è

	)

71 
	#FIX_3_624509785
 ((
INT32
è29692è

	)

73 
	#FIX_0_211164243
 
	`FIX
(0.211164243)

	)

74 
	#FIX_0_509795579
 
	`FIX
(0.509795579)

	)

75 
	#FIX_0_601344887
 
	`FIX
(0.601344887)

	)

76 
	#FIX_0_720959822
 
	`FIX
(0.720959822)

	)

77 
	#FIX_0_765366865
 
	`FIX
(0.765366865)

	)

78 
	#FIX_0_850430095
 
	`FIX
(0.850430095)

	)

79 
	#FIX_0_899976223
 
	`FIX
(0.899976223)

	)

80 
	#FIX_1_061594337
 
	`FIX
(1.061594337)

	)

81 
	#FIX_1_272758580
 
	`FIX
(1.272758580)

	)

82 
	#FIX_1_451774981
 
	`FIX
(1.451774981)

	)

83 
	#FIX_1_847759065
 
	`FIX
(1.847759065)

	)

84 
	#FIX_2_172734803
 
	`FIX
(2.172734803)

	)

85 
	#FIX_2_562915447
 
	`FIX
(2.562915447)

	)

86 
	#FIX_3_624509785
 
	`FIX
(3.624509785)

	)

97 #ià
BITS_IN_JSAMPLE
 == 8

98 
	#MULTIPLY
(
v¬
,cÚ¡è
	`MULTIPLY16C16
(v¬,cÚ¡)

	)

100 
	#MULTIPLY
(
v¬
,cÚ¡è((v¬è* (cÚ¡))

	)

109 
	#DEQUANTIZE
(
cÛf
,
quªtv®
è(((
ISLOW_MULT_TYPE
è(cÛf)è* (quªtv®))

	)

117 
	$GLOBAL
()

118 
	$j³g_idù_4x4
 (
j_decom´ess_±r
 
cšfo
, 
j³g_compÚ’t_šfo
 * 
comµŒ
,

119 
JCOEFPTR
 
cÛf_block
,

120 
JSAMPARRAY
 
ouut_buf
, 
JDIMENSION
 
ouut_cŞ
)

122 
INT32
 
tmp0
, 
tmp2
, 
tmp10
, 
tmp12
;

123 
INT32
 
z1
, 
z2
, 
z3
, 
z4
;

124 
JCOEFPTR
 
š±r
;

125 
ISLOW_MULT_TYPE
 * 
quªŒ
;

126 * 
w¥Œ
;

127 
JSAMPROW
 
ouŒ
;

128 
JSAMPLE
 *
¿nge_lim™
 = 
	`IDCT_¿nge_lim™
(
cšfo
);

129 
ùr
;

130 
wÜk¥aû
[
DCTSIZE
*4];

131 
SHIFT_TEMPS


135 
š±r
 = 
cÛf_block
;

136 
quªŒ
 = (
ISLOW_MULT_TYPE
 *è
comµŒ
->
dù_bË
;

137 
w¥Œ
 = 
wÜk¥aû
;

138 
ùr
 = 
DCTSIZE
; cŒ > 0; 
š±r
++, 
quªŒ
++, 
w¥Œ
++, ctr--) {

140 ià(
ùr
 =ğ
DCTSIZE
-4)

142 ià(
š±r
[
DCTSIZE
*1] == 0 && inptr[DCTSIZE*2] == 0 &&

143 
š±r
[
DCTSIZE
*3] == 0 && inptr[DCTSIZE*5] == 0 &&

144 
š±r
[
DCTSIZE
*6] == 0 && inptr[DCTSIZE*7] == 0) {

146 
dcv®
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*0], 
quªŒ
[DCTSIZE*0]è<< 
PASS1_BITS
;

148 
w¥Œ
[
DCTSIZE
*0] = 
dcv®
;

149 
w¥Œ
[
DCTSIZE
*1] = 
dcv®
;

150 
w¥Œ
[
DCTSIZE
*2] = 
dcv®
;

151 
w¥Œ
[
DCTSIZE
*3] = 
dcv®
;

158 
tmp0
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*0], 
quªŒ
[DCTSIZE*0]);

159 
tmp0
 <<ğ(
CONST_BITS
+1);

161 
z2
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*2], 
quªŒ
[DCTSIZE*2]);

162 
z3
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*6], 
quªŒ
[DCTSIZE*6]);

164 
tmp2
 = 
	`MULTIPLY
(
z2
, 
FIX_1_847759065
è+ MULTIPLY(
z3
, - 
FIX_0_765366865
);

166 
tmp10
 = 
tmp0
 + 
tmp2
;

167 
tmp12
 = 
tmp0
 - 
tmp2
;

171 
z1
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*7], 
quªŒ
[DCTSIZE*7]);

172 
z2
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*5], 
quªŒ
[DCTSIZE*5]);

173 
z3
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*3], 
quªŒ
[DCTSIZE*3]);

174 
z4
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*1], 
quªŒ
[DCTSIZE*1]);

176 
tmp0
 = 
	`MULTIPLY
(
z1
, - 
FIX_0_211164243
)

177 + 
	`MULTIPLY
(
z2
, 
FIX_1_451774981
)

178 + 
	`MULTIPLY
(
z3
, - 
FIX_2_172734803
)

179 + 
	`MULTIPLY
(
z4
, 
FIX_1_061594337
);

181 
tmp2
 = 
	`MULTIPLY
(
z1
, - 
FIX_0_509795579
)

182 + 
	`MULTIPLY
(
z2
, - 
FIX_0_601344887
)

183 + 
	`MULTIPLY
(
z3
, 
FIX_0_899976223
)

184 + 
	`MULTIPLY
(
z4
, 
FIX_2_562915447
);

188 
w¥Œ
[
DCTSIZE
*0] = (è
	`DESCALE
(
tmp10
 + 
tmp2
, 
CONST_BITS
-
PASS1_BITS
+1);

189 
w¥Œ
[
DCTSIZE
*3] = (è
	`DESCALE
(
tmp10
 - 
tmp2
, 
CONST_BITS
-
PASS1_BITS
+1);

190 
w¥Œ
[
DCTSIZE
*1] = (è
	`DESCALE
(
tmp12
 + 
tmp0
, 
CONST_BITS
-
PASS1_BITS
+1);

191 
w¥Œ
[
DCTSIZE
*2] = (è
	`DESCALE
(
tmp12
 - 
tmp0
, 
CONST_BITS
-
PASS1_BITS
+1);

196 
w¥Œ
 = 
wÜk¥aû
;

197 
ùr
 = 0; ctr < 4; ctr++) {

198 
ouŒ
 = 
ouut_buf
[
ùr
] + 
ouut_cŞ
;

201 #iâdeà
NO_ZERO_ROW_TEST


202 ià(
w¥Œ
[1] == 0 && wsptr[2] == 0 && wsptr[3] == 0 &&

203 
w¥Œ
[5] == 0 && wsptr[6] == 0 && wsptr[7] == 0) {

205 
JSAMPLE
 
dcv®
 = 
¿nge_lim™
[(è
	`DESCALE
((
INT32
è
w¥Œ
[0], 
PASS1_BITS
+3)

206 & 
RANGE_MASK
];

208 
ouŒ
[0] = 
dcv®
;

209 
ouŒ
[1] = 
dcv®
;

210 
ouŒ
[2] = 
dcv®
;

211 
ouŒ
[3] = 
dcv®
;

213 
w¥Œ
 +ğ
DCTSIZE
;

220 
tmp0
 = ((
INT32
è
w¥Œ
[0]è<< (
CONST_BITS
+1);

222 
tmp2
 = 
	`MULTIPLY
((
INT32
è
w¥Œ
[2], 
FIX_1_847759065
)

223 + 
	`MULTIPLY
((
INT32
è
w¥Œ
[6], - 
FIX_0_765366865
);

225 
tmp10
 = 
tmp0
 + 
tmp2
;

226 
tmp12
 = 
tmp0
 - 
tmp2
;

230 
z1
 = (
INT32
è
w¥Œ
[7];

231 
z2
 = (
INT32
è
w¥Œ
[5];

232 
z3
 = (
INT32
è
w¥Œ
[3];

233 
z4
 = (
INT32
è
w¥Œ
[1];

235 
tmp0
 = 
	`MULTIPLY
(
z1
, - 
FIX_0_211164243
)

236 + 
	`MULTIPLY
(
z2
, 
FIX_1_451774981
)

237 + 
	`MULTIPLY
(
z3
, - 
FIX_2_172734803
)

238 + 
	`MULTIPLY
(
z4
, 
FIX_1_061594337
);

240 
tmp2
 = 
	`MULTIPLY
(
z1
, - 
FIX_0_509795579
)

241 + 
	`MULTIPLY
(
z2
, - 
FIX_0_601344887
)

242 + 
	`MULTIPLY
(
z3
, 
FIX_0_899976223
)

243 + 
	`MULTIPLY
(
z4
, 
FIX_2_562915447
);

247 
ouŒ
[0] = 
¿nge_lim™
[(è
	`DESCALE
(
tmp10
 + 
tmp2
,

248 
CONST_BITS
+
PASS1_BITS
+3+1)

249 & 
RANGE_MASK
];

250 
ouŒ
[3] = 
¿nge_lim™
[(è
	`DESCALE
(
tmp10
 - 
tmp2
,

251 
CONST_BITS
+
PASS1_BITS
+3+1)

252 & 
RANGE_MASK
];

253 
ouŒ
[1] = 
¿nge_lim™
[(è
	`DESCALE
(
tmp12
 + 
tmp0
,

254 
CONST_BITS
+
PASS1_BITS
+3+1)

255 & 
RANGE_MASK
];

256 
ouŒ
[2] = 
¿nge_lim™
[(è
	`DESCALE
(
tmp12
 - 
tmp0
,

257 
CONST_BITS
+
PASS1_BITS
+3+1)

258 & 
RANGE_MASK
];

260 
w¥Œ
 +ğ
DCTSIZE
;

262 
	}
}

270 
	$GLOBAL
()

271 
	$j³g_idù_2x2
 (
j_decom´ess_±r
 
cšfo
, 
j³g_compÚ’t_šfo
 * 
comµŒ
,

272 
JCOEFPTR
 
cÛf_block
,

273 
JSAMPARRAY
 
ouut_buf
, 
JDIMENSION
 
ouut_cŞ
)

275 
INT32
 
tmp0
, 
tmp10
, 
z1
;

276 
JCOEFPTR
 
š±r
;

277 
ISLOW_MULT_TYPE
 * 
quªŒ
;

278 * 
w¥Œ
;

279 
JSAMPROW
 
ouŒ
;

280 
JSAMPLE
 *
¿nge_lim™
 = 
	`IDCT_¿nge_lim™
(
cšfo
);

281 
ùr
;

282 
wÜk¥aû
[
DCTSIZE
*2];

283 
SHIFT_TEMPS


287 
š±r
 = 
cÛf_block
;

288 
quªŒ
 = (
ISLOW_MULT_TYPE
 *è
comµŒ
->
dù_bË
;

289 
w¥Œ
 = 
wÜk¥aû
;

290 
ùr
 = 
DCTSIZE
; cŒ > 0; 
š±r
++, 
quªŒ
++, 
w¥Œ
++, ctr--) {

292 ià(
ùr
 =ğ
DCTSIZE
-2 || ctr == DCTSIZE-4 || ctr == DCTSIZE-6)

294 ià(
š±r
[
DCTSIZE
*1] == 0 && inptr[DCTSIZE*3] == 0 &&

295 
š±r
[
DCTSIZE
*5] == 0 && inptr[DCTSIZE*7] == 0) {

297 
dcv®
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*0], 
quªŒ
[DCTSIZE*0]è<< 
PASS1_BITS
;

299 
w¥Œ
[
DCTSIZE
*0] = 
dcv®
;

300 
w¥Œ
[
DCTSIZE
*1] = 
dcv®
;

307 
z1
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*0], 
quªŒ
[DCTSIZE*0]);

308 
tmp10
 = 
z1
 << (
CONST_BITS
+2);

312 
z1
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*7], 
quªŒ
[DCTSIZE*7]);

313 
tmp0
 = 
	`MULTIPLY
(
z1
, - 
FIX_0_720959822
);

314 
z1
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*5], 
quªŒ
[DCTSIZE*5]);

315 
tmp0
 +ğ
	`MULTIPLY
(
z1
, 
FIX_0_850430095
);

316 
z1
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*3], 
quªŒ
[DCTSIZE*3]);

317 
tmp0
 +ğ
	`MULTIPLY
(
z1
, - 
FIX_1_272758580
);

318 
z1
 = 
	`DEQUANTIZE
(
š±r
[
DCTSIZE
*1], 
quªŒ
[DCTSIZE*1]);

319 
tmp0
 +ğ
	`MULTIPLY
(
z1
, 
FIX_3_624509785
);

323 
w¥Œ
[
DCTSIZE
*0] = (è
	`DESCALE
(
tmp10
 + 
tmp0
, 
CONST_BITS
-
PASS1_BITS
+2);

324 
w¥Œ
[
DCTSIZE
*1] = (è
	`DESCALE
(
tmp10
 - 
tmp0
, 
CONST_BITS
-
PASS1_BITS
+2);

329 
w¥Œ
 = 
wÜk¥aû
;

330 
ùr
 = 0; ctr < 2; ctr++) {

331 
ouŒ
 = 
ouut_buf
[
ùr
] + 
ouut_cŞ
;

334 #iâdeà
NO_ZERO_ROW_TEST


335 ià(
w¥Œ
[1] == 0 && wsptr[3] == 0 && wsptr[5] == 0 && wsptr[7] == 0) {

337 
JSAMPLE
 
dcv®
 = 
¿nge_lim™
[(è
	`DESCALE
((
INT32
è
w¥Œ
[0], 
PASS1_BITS
+3)

338 & 
RANGE_MASK
];

340 
ouŒ
[0] = 
dcv®
;

341 
ouŒ
[1] = 
dcv®
;

343 
w¥Œ
 +ğ
DCTSIZE
;

350 
tmp10
 = ((
INT32
è
w¥Œ
[0]è<< (
CONST_BITS
+2);

354 
tmp0
 = 
	`MULTIPLY
((
INT32
è
w¥Œ
[7], - 
FIX_0_720959822
)

355 + 
	`MULTIPLY
((
INT32
è
w¥Œ
[5], 
FIX_0_850430095
)

356 + 
	`MULTIPLY
((
INT32
è
w¥Œ
[3], - 
FIX_1_272758580
)

357 + 
	`MULTIPLY
((
INT32
è
w¥Œ
[1], 
FIX_3_624509785
);

361 
ouŒ
[0] = 
¿nge_lim™
[(è
	`DESCALE
(
tmp10
 + 
tmp0
,

362 
CONST_BITS
+
PASS1_BITS
+3+2)

363 & 
RANGE_MASK
];

364 
ouŒ
[1] = 
¿nge_lim™
[(è
	`DESCALE
(
tmp10
 - 
tmp0
,

365 
CONST_BITS
+
PASS1_BITS
+3+2)

366 & 
RANGE_MASK
];

368 
w¥Œ
 +ğ
DCTSIZE
;

370 
	}
}

378 
	$GLOBAL
()

379 
	$j³g_idù_1x1
 (
j_decom´ess_±r
 
cšfo
, 
j³g_compÚ’t_šfo
 * 
comµŒ
,

380 
JCOEFPTR
 
cÛf_block
,

381 
JSAMPARRAY
 
ouut_buf
, 
JDIMENSION
 
ouut_cŞ
)

383 
dcv®
;

384 
ISLOW_MULT_TYPE
 * 
quªŒ
;

385 
JSAMPLE
 *
¿nge_lim™
 = 
	`IDCT_¿nge_lim™
(
cšfo
);

386 
SHIFT_TEMPS


391 
quªŒ
 = (
ISLOW_MULT_TYPE
 *è
comµŒ
->
dù_bË
;

392 
dcv®
 = 
	`DEQUANTIZE
(
cÛf_block
[0], 
quªŒ
[0]);

393 
dcv®
 = (è
	`DESCALE
((
INT32
) dcval, 3);

395 
ouut_buf
[0][
ouut_cŞ
] = 
¿nge_lim™
[
dcv®
 & 
RANGE_MASK
];

396 
	}
}

	@jinclude.h

20 
	~"jcÚfig.h
"

21 
	#JCONFIG_INCLUDED


	)

34 #ifdeà
HAVE_STDDEF_H


35 
	~<¡ddef.h
>

38 #ifdeà
HAVE_STDLIB_H


39 
	~<¡dlib.h
>

42 #ifdeà
NEED_SYS_TYPES_H


43 
	~<sys/ty³s.h
>

46 
	~<¡dio.h
>

58 #ifdeà
NEED_BSD_STRINGS


60 
	~<¡ršgs.h
>

61 
	#MEMZERO
(
rg‘
,
size
è
	`bz”o
((*)Ñ¬g‘), (
size_t
)(size))

	)

62 
	#MEMCOPY
(
de¡
,
¤c
,
size
è
	`bcİy
((cÚ¡ *)(¤c), (*)(de¡), (
size_t
)(size))

	)

66 
	~<¡ršg.h
>

67 
	#MEMZERO
(
rg‘
,
size
è
	`mem£t
((*)Ñ¬g‘), 0, (
size_t
)(size))

	)

68 
	#MEMCOPY
(
de¡
,
¤c
,
size
è
	`memıy
((*)(de¡), (cÚ¡ *)(¤c), (
size_t
)(size))

	)

80 
	#SIZEOF
(
objeù
è((
size_t
è(objeù))

	)

88 
	#JFREAD
(
fe
,
buf
,
sizeofbuf
) \

89 ((
size_t
è
	`ä—d
((*è(
buf
), (size_tè1, (size_tè(
sizeofbuf
), (
fe
)))

	)

90 
	#JFWRITE
(
fe
,
buf
,
sizeofbuf
) \

91 ((
size_t
è
	`fwr™e
((cÚ¡ *è(
buf
), (size_tè1, (size_tè(
sizeofbuf
), (
fe
)))

	)

	@jmemansi.c

15 
	#JPEG_INTERNALS


	)

16 
	~"jšşude.h
"

17 
	~"j³glib.h
"

18 
	~"jmemsys.h
"

20 #iâdeà
HAVE_STDLIB_H


21 * 
m®loc
 
JPP
((
size_t
 
size
));

22 
ä“
 
JPP
((*
±r
));

25 #iâdeà
SEEK_SET


26 
	#SEEK_SET
 0

	)

35 
	$GLOBAL
(*)

36 
	$j³g_g‘_sm®l
 (
j_commÚ_±r
 
cšfo
, 
size_t
 
sizeofobjeù
)

38  (*è
	`m®loc
(
sizeofobjeù
);

39 
	}
}

41 
	$GLOBAL
()

42 
	$j³g_ä“_sm®l
 (
j_commÚ_±r
 
cšfo
, * 
objeù
, 
size_t
 
sizeofobjeù
)

44 
	`ä“
(
objeù
);

45 
	}
}

55 
	$GLOBAL
(
FAR
 *)

56 
	$j³g_g‘_Ïrge
 (
j_commÚ_±r
 
cšfo
, 
size_t
 
sizeofobjeù
)

58  (
FAR
 *è
	`m®loc
(
sizeofobjeù
);

59 
	}
}

61 
	$GLOBAL
()

62 
	$j³g_ä“_Ïrge
 (
j_commÚ_±r
 
cšfo
, 
FAR
 * 
objeù
, 
size_t
 
sizeofobjeù
)

64 
	`ä“
(
objeù
);

65 
	}
}

76 #iâdeà
DEFAULT_MAX_MEM


77 
	#DEFAULT_MAX_MEM
 1000000L

	)

80 
	$GLOBAL
()

81 
	$j³g_mem_avaabË
 (
j_commÚ_±r
 
cšfo
, 
mš_by‹s_Ãeded
,

82 
max_by‹s_Ãeded
, 
®»ady_®loÿ‹d
)

84  
cšfo
->
mem
->
max_memÜy_to_u£
 - 
®»ady_®loÿ‹d
;

85 
	}
}

96 
	$METHODDEF
()

97 
	$»ad_backšg_¡Üe
 (
j_commÚ_±r
 
cšfo
, 
backšg_¡Üe_±r
 
šfo
,

98 
FAR
 * 
bufãr_add»ss
,

99 
fe_off£t
, 
by‹_couÁ
)

101 ià(
	`f£ek
(
šfo
->
‹mp_fe
, 
fe_off£t
, 
SEEK_SET
))

102 
	`ERREXIT
(
cšfo
, 
JERR_TFILE_SEEK
);

103 ià(
	`JFREAD
(
šfo
->
‹mp_fe
, 
bufãr_add»ss
, 
by‹_couÁ
)

104 !ğ(
size_t
è
by‹_couÁ
)

105 
	`ERREXIT
(
cšfo
, 
JERR_TFILE_READ
);

106 
	}
}

109 
	$METHODDEF
()

110 
	$wr™e_backšg_¡Üe
 (
j_commÚ_±r
 
cšfo
, 
backšg_¡Üe_±r
 
šfo
,

111 
FAR
 * 
bufãr_add»ss
,

112 
fe_off£t
, 
by‹_couÁ
)

114 ià(
	`f£ek
(
šfo
->
‹mp_fe
, 
fe_off£t
, 
SEEK_SET
))

115 
	`ERREXIT
(
cšfo
, 
JERR_TFILE_SEEK
);

116 ià(
	`JFWRITE
(
šfo
->
‹mp_fe
, 
bufãr_add»ss
, 
by‹_couÁ
)

117 !ğ(
size_t
è
by‹_couÁ
)

118 
	`ERREXIT
(
cšfo
, 
JERR_TFILE_WRITE
);

119 
	}
}

122 
	$METHODDEF
()

123 
	$şo£_backšg_¡Üe
 (
j_commÚ_±r
 
cšfo
, 
backšg_¡Üe_±r
 
šfo
)

125 
	`fşo£
(
šfo
->
‹mp_fe
);

129 
	}
}

140 
	$GLOBAL
()

141 
	$j³g_İ’_backšg_¡Üe
 (
j_commÚ_±r
 
cšfo
, 
backšg_¡Üe_±r
 
šfo
,

142 
tÙ®_by‹s_Ãeded
)

144 ià((
šfo
->
‹mp_fe
 = 
	`tmpfe
()è=ğ
NULL
)

145 
	`ERREXITS
(
cšfo
, 
JERR_TFILE_CREATE
, "");

146 
šfo
->
»ad_backšg_¡Üe
 =„ead_backing_store;

147 
šfo
->
wr™e_backšg_¡Üe
 = write_backing_store;

148 
šfo
->
şo£_backšg_¡Üe
 = close_backing_store;

149 
	}
}

157 
	$GLOBAL
()

158 
	$j³g_mem_š™
 (
j_commÚ_±r
 
cšfo
)

160  
DEFAULT_MAX_MEM
;

161 
	}
}

163 
	$GLOBAL
()

164 
	$j³g_mem_‹rm
 (
j_commÚ_±r
 
cšfo
)

167 
	}
}

	@jmemdos.c

34 #iâdeà
XMS_SUPPORTED


35 
	#XMS_SUPPORTED
 1

	)

37 #iâdeà
EMS_SUPPORTED


38 
	#EMS_SUPPORTED
 1

	)

42 
	#JPEG_INTERNALS


	)

43 
	~"jšşude.h
"

44 
	~"j³glib.h
"

45 
	~"jmemsys.h
"

47 #iâdeà
HAVE_STDLIB_H


48 * 
m®loc
 
JPP
((
size_t
 
size
));

49 
ä“
 
JPP
((*
±r
));

50 * 
g‘’v
 
JPP
((cÚ¡ * 
Çme
));

53 #ifdeà
NEED_FAR_POINTERS


55 #ifdeà
__TURBOC__


57 
	~<®loc.h
>

58 
	#çr_m®loc
(
x
è
	`çrm®loc
(x)

	)

59 
	#çr_ä“
(
x
è
	`çrä“
(x)

	)

62 
	~<m®loc.h
>

63 
	#çr_m®loc
(
x
è
	`_fm®loc
(x)

	)

64 
	#çr_ä“
(
x
è
	`_fä“
(x)

	)

69 
	#çr_m®loc
(
x
è
	`m®loc
(x)

	)

70 
	#çr_ä“
(
x
è
	`ä“
(x)

	)

74 #ifdeà
DONT_USE_B_MODE


75 
	#READ_BINARY
 "r"

	)

77 
	#READ_BINARY
 "rb"

	)

80 #iâdeà
USE_MSDOS_MEMMGR


81 
You
 
fÜgÙ
 
to
 
defše
 
USE_MSDOS_MEMMGR
 
š
 
	gjcÚfig
.
	gh
.

84 #ià
MAX_ALLOC_CHUNK
 >= 65535L

85 
MAX_ALLOC_CHUNK
 
should
 
be
 
Ëss
 
	gthª
 64
	gK
.

97 
	tçr
 * 
	tXMSDRIVER
;

99 
	max
, 
	mdx
, 
	mbx
;

100 
çr
 * 
	mds_si
;

101 } 
	tXMScÚ‹xt
;

103 
	max
, 
	mdx
, 
	mbx
;

104 
çr
 * 
	mds_si
;

105 } 
	tEMScÚ‹xt
;

107 
çr
 
jdos_İ’
 
JPP
((ç¸* 
hªdË
, ç¸* 
f’ame
));

108 
çr
 
jdos_şo£
 
JPP
((
hªdË
));

109 
çr
 
jdos_£ek
 
JPP
((
hªdË
, 
off£t
));

110 
çr
 
jdos_»ad
 
JPP
((
hªdË
, ç¸* 
bufãr
,

111 
couÁ
));

112 
çr
 
jdos_wr™e
 
JPP
((
hªdË
, ç¸* 
bufãr
,

113 
couÁ
));

114 
çr
 
jxms_g‘driv”
 
JPP
((
XMSDRIVER
 far *));

115 
çr
 
jxms_ÿÎdriv”
 
JPP
((
XMSDRIVER
, 
XMScÚ‹xt
 far *));

116 
çr
 
jems_avaabË
 
JPP
(());

117 
çr
 
jems_ÿÎdriv”
 
JPP
((
EMScÚ‹xt
 far *));

125 
	gÃxt_fe_num
;

127 
	$LOCAL
()

128 
	$£Ëù_fe_Çme
 (* 
âame
)

130 cÚ¡ * 
’v
;

131 * 
±r
;

132 
FILE
 * 
tfe
;

139 ià((
’v
 = (cÚ¡ *è
	`g‘’v
("TMP")è=ğ
NULL
)

140 ià((
’v
 = (cÚ¡ *è
	`g‘’v
("TEMP")è=ğ
NULL
)

141 
’v
 = ".";

142 ià(*
’v
 == '\0')

143 
’v
 = ".";

144 
±r
 = 
âame
;

145 *
’v
 != '\0')

146 *
±r
++ = *
’v
++;

147 ià(
±r
[-1] != '\\' &&…tr[-1] != '/')

148 *
±r
++ = '\\';

150 
Ãxt_fe_num
++;

151 
	`¥rštf
(
±r
, "JPG%03d.TMP", 
Ãxt_fe_num
);

153 ià((
tfe
 = 
	`fİ’
(
âame
, 
READ_BINARY
)è=ğ
NULL
)

155 
	`fşo£
(
tfe
);

157 
	}
}

165 
	$GLOBAL
(*)

166 
	$j³g_g‘_sm®l
 (
j_commÚ_±r
 
cšfo
, 
size_t
 
sizeofobjeù
)

168  (*è
	`m®loc
(
sizeofobjeù
);

169 
	}
}

171 
	$GLOBAL
()

172 
	$j³g_ä“_sm®l
 (
j_commÚ_±r
 
cšfo
, * 
objeù
, 
size_t
 
sizeofobjeù
)

174 
	`ä“
(
objeù
);

175 
	}
}

182 
	$GLOBAL
(
FAR
 *)

183 
	$j³g_g‘_Ïrge
 (
j_commÚ_±r
 
cšfo
, 
size_t
 
sizeofobjeù
)

185  (
FAR
 *è
	`çr_m®loc
(
sizeofobjeù
);

186 
	}
}

188 
	$GLOBAL
()

189 
	$j³g_ä“_Ïrge
 (
j_commÚ_±r
 
cšfo
, 
FAR
 * 
objeù
, 
size_t
 
sizeofobjeù
)

191 
	`çr_ä“
(
objeù
);

192 
	}
}

203 #iâdeà
DEFAULT_MAX_MEM


204 
	#DEFAULT_MAX_MEM
 300000L

	)

207 
	$GLOBAL
()

208 
	$j³g_mem_avaabË
 (
j_commÚ_±r
 
cšfo
, 
mš_by‹s_Ãeded
,

209 
max_by‹s_Ãeded
, 
®»ady_®loÿ‹d
)

211  
cšfo
->
mem
->
max_memÜy_to_u£
 - 
®»ady_®loÿ‹d
;

212 
	}
}

242 
	$METHODDEF
()

243 
	$»ad_fe_¡Üe
 (
j_commÚ_±r
 
cšfo
, 
backšg_¡Üe_±r
 
šfo
,

244 
FAR
 * 
bufãr_add»ss
,

245 
fe_off£t
, 
by‹_couÁ
)

247 ià(
	`jdos_£ek
(
šfo
->
hªdË
.
fe_hªdË
, 
fe_off£t
))

248 
	`ERREXIT
(
cšfo
, 
JERR_TFILE_SEEK
);

250 ià(
by‹_couÁ
 > 65535L)

251 
	`ERREXIT
(
cšfo
, 
JERR_BAD_ALLOC_CHUNK
);

252 ià(
	`jdos_»ad
(
šfo
->
hªdË
.
fe_hªdË
, 
bufãr_add»ss
,

253 (è
by‹_couÁ
))

254 
	`ERREXIT
(
cšfo
, 
JERR_TFILE_READ
);

255 
	}
}

258 
	$METHODDEF
()

259 
	$wr™e_fe_¡Üe
 (
j_commÚ_±r
 
cšfo
, 
backšg_¡Üe_±r
 
šfo
,

260 
FAR
 * 
bufãr_add»ss
,

261 
fe_off£t
, 
by‹_couÁ
)

263 ià(
	`jdos_£ek
(
šfo
->
hªdË
.
fe_hªdË
, 
fe_off£t
))

264 
	`ERREXIT
(
cšfo
, 
JERR_TFILE_SEEK
);

266 ià(
by‹_couÁ
 > 65535L)

267 
	`ERREXIT
(
cšfo
, 
JERR_BAD_ALLOC_CHUNK
);

268 ià(
	`jdos_wr™e
(
šfo
->
hªdË
.
fe_hªdË
, 
bufãr_add»ss
,

269 (è
by‹_couÁ
))

270 
	`ERREXIT
(
cšfo
, 
JERR_TFILE_WRITE
);

271 
	}
}

274 
	$METHODDEF
()

275 
	$şo£_fe_¡Üe
 (
j_commÚ_±r
 
cšfo
, 
backšg_¡Üe_±r
 
šfo
)

277 
	`jdos_şo£
(
šfo
->
hªdË
.
fe_hªdË
);

278 
	`»move
(
šfo
->
‹mp_Çme
);

283 
	`TRACEMSS
(
cšfo
, 1, 
JTRC_TFILE_CLOSE
, 
šfo
->
‹mp_Çme
);

284 
	}
}

287 
	$LOCAL
(
boŞ—n
)

288 
	$İ’_fe_¡Üe
 (
j_commÚ_±r
 
cšfo
, 
backšg_¡Üe_±r
 
šfo
,

289 
tÙ®_by‹s_Ãeded
)

291 
hªdË
;

293 
	`£Ëù_fe_Çme
(
šfo
->
‹mp_Çme
);

294 ià(
	`jdos_İ’
((
çr
 *è& 
hªdË
, (ç¸*è
šfo
->
‹mp_Çme
)) {

296 
	`ERREXITS
(
cšfo
, 
JERR_TFILE_CREATE
, 
šfo
->
‹mp_Çme
);

297  
FALSE
;

299 
šfo
->
hªdË
.
fe_hªdË
 = handle;

300 
šfo
->
»ad_backšg_¡Üe
 = 
»ad_fe_¡Üe
;

301 
šfo
->
wr™e_backšg_¡Üe
 = 
wr™e_fe_¡Üe
;

302 
šfo
->
şo£_backšg_¡Üe
 = 
şo£_fe_¡Üe
;

303 
	`TRACEMSS
(
cšfo
, 1, 
JTRC_TFILE_OPEN
, 
šfo
->
‹mp_Çme
);

304  
TRUE
;

305 
	}
}

312 #ià
XMS_SUPPORTED


314 
XMSDRIVER
 
	gxms_driv”
;

317 
	moff£t
;

318 
çr
 * 
	m±r
;

319 } 
	tXMSPTR
;

322 
	mËngth
;

323 
XMSH
 
	m¤c_hªdË
;

324 
XMSPTR
 
	m¤c
;

325 
XMSH
 
	md¡_hªdË
;

326 
XMSPTR
 
	md¡
;

327 } 
	tXMS¥ec
;

329 
	#ODD
(
X
è(((Xè& 1Lè!ğ0)

	)

332 
	$METHODDEF
()

333 
	$»ad_xms_¡Üe
 (
j_commÚ_±r
 
cšfo
, 
backšg_¡Üe_±r
 
šfo
,

334 
FAR
 * 
bufãr_add»ss
,

335 
fe_off£t
, 
by‹_couÁ
)

337 
XMScÚ‹xt
 
ùx
;

338 
XMS¥ec
 
¥ec
;

339 
’dbufãr
[2];

345 
¥ec
.
Ëngth
 = 
by‹_couÁ
 & (~ 1L);

346 
¥ec
.
¤c_hªdË
 = 
šfo
->
hªdË
.
xms_hªdË
;

347 
¥ec
.
¤c
.
off£t
 = 
fe_off£t
;

348 
¥ec
.
d¡_hªdË
 = 0;

349 
¥ec
.
d¡
.
±r
 = 
bufãr_add»ss
;

351 
ùx
.
ds_si
 = (
çr
 *è& 
¥ec
;

352 
ùx
.
ax
 = 0x0b00;

353 
	`jxms_ÿÎdriv”
(
xms_driv”
, (
XMScÚ‹xt
 
çr
 *è& 
ùx
);

354 ià(
ùx
.
ax
 != 1)

355 
	`ERREXIT
(
cšfo
, 
JERR_XMS_READ
);

357 ià(
	`ODD
(
by‹_couÁ
)) {

358 
	`»ad_xms_¡Üe
(
cšfo
, 
šfo
, (
FAR
 *è
’dbufãr
,

359 
fe_off£t
 + 
by‹_couÁ
 - 1L, 2L);

360 ((
FAR
 *è
bufãr_add»ss
)[
by‹_couÁ
 - 1L] = 
’dbufãr
[0];

362 
	}
}

365 
	$METHODDEF
()

366 
	$wr™e_xms_¡Üe
 (
j_commÚ_±r
 
cšfo
, 
backšg_¡Üe_±r
 
šfo
,

367 
FAR
 * 
bufãr_add»ss
,

368 
fe_off£t
, 
by‹_couÁ
)

370 
XMScÚ‹xt
 
ùx
;

371 
XMS¥ec
 
¥ec
;

372 
’dbufãr
[2];

378 
¥ec
.
Ëngth
 = 
by‹_couÁ
 & (~ 1L);

379 
¥ec
.
¤c_hªdË
 = 0;

380 
¥ec
.
¤c
.
±r
 = 
bufãr_add»ss
;

381 
¥ec
.
d¡_hªdË
 = 
šfo
->
hªdË
.
xms_hªdË
;

382 
¥ec
.
d¡
.
off£t
 = 
fe_off£t
;

384 
ùx
.
ds_si
 = (
çr
 *è& 
¥ec
;

385 
ùx
.
ax
 = 0x0b00;

386 
	`jxms_ÿÎdriv”
(
xms_driv”
, (
XMScÚ‹xt
 
çr
 *è& 
ùx
);

387 ià(
ùx
.
ax
 != 1)

388 
	`ERREXIT
(
cšfo
, 
JERR_XMS_WRITE
);

390 ià(
	`ODD
(
by‹_couÁ
)) {

391 
	`»ad_xms_¡Üe
(
cšfo
, 
šfo
, (
FAR
 *è
’dbufãr
,

392 
fe_off£t
 + 
by‹_couÁ
 - 1L, 2L);

393 
’dbufãr
[0] = ((
FAR
 *è
bufãr_add»ss
)[
by‹_couÁ
 - 1L];

394 
	`wr™e_xms_¡Üe
(
cšfo
, 
šfo
, (
FAR
 *è
’dbufãr
,

395 
fe_off£t
 + 
by‹_couÁ
 - 1L, 2L);

397 
	}
}

400 
	$METHODDEF
()

401 
	$şo£_xms_¡Üe
 (
j_commÚ_±r
 
cšfo
, 
backšg_¡Üe_±r
 
šfo
)

403 
XMScÚ‹xt
 
ùx
;

405 
ùx
.
dx
 = 
šfo
->
hªdË
.
xms_hªdË
;

406 
ùx
.
ax
 = 0x0a00;

407 
	`jxms_ÿÎdriv”
(
xms_driv”
, (
XMScÚ‹xt
 
çr
 *è& 
ùx
);

408 
	`TRACEMS1
(
cšfo
, 1, 
JTRC_XMS_CLOSE
, 
šfo
->
hªdË
.
xms_hªdË
);

410 
	}
}

413 
	$LOCAL
(
boŞ—n
)

414 
	$İ’_xms_¡Üe
 (
j_commÚ_±r
 
cšfo
, 
backšg_¡Üe_±r
 
šfo
,

415 
tÙ®_by‹s_Ãeded
)

417 
XMScÚ‹xt
 
ùx
;

420 
	`jxms_g‘driv”
((
XMSDRIVER
 
çr
 *è& 
xms_driv”
);

421 ià(
xms_driv”
 =ğ
NULL
)

422  
FALSE
;

425 
ùx
.
ax
 = 0x0000;

426 
	`jxms_ÿÎdriv”
(
xms_driv”
, (
XMScÚ‹xt
 
çr
 *è& 
ùx
);

427 ià(
ùx
.
ax
 < () 0x0200)

428  
FALSE
;

431 
ùx
.
dx
 = (è((
tÙ®_by‹s_Ãeded
 + 1023L) >> 10);

432 
ùx
.
ax
 = 0x0900;

433 
	`jxms_ÿÎdriv”
(
xms_driv”
, (
XMScÚ‹xt
 
çr
 *è& 
ùx
);

434 ià(
ùx
.
ax
 != 1)

435  
FALSE
;

438 
šfo
->
hªdË
.
xms_hªdË
 = 
ùx
.
dx
;

439 
šfo
->
»ad_backšg_¡Üe
 = 
»ad_xms_¡Üe
;

440 
šfo
->
wr™e_backšg_¡Üe
 = 
wr™e_xms_¡Üe
;

441 
šfo
->
şo£_backšg_¡Üe
 = 
şo£_xms_¡Üe
;

442 
	`TRACEMS1
(
cšfo
, 1, 
JTRC_XMS_OPEN
, 
ùx
.
dx
);

443  
TRUE
;

444 
	}
}

453 #ià
EMS_SUPPORTED


464 
	tçr
 * 
	tEMSPTR
;

467 
	mËngth
;

468 
	mby‹s
[18];

469 } 
	tEMS¥ec
;

472 
	#FIELD_AT
(
¥ec
,
off£t
,
ty³
è(*(Ñy³ *è&(¥ec.
by‹s
[off£t])))

	)

473 
	#SRC_TYPE
(
¥ec
è
	`FIELD_AT
(¥ec,4,)

	)

474 
	#SRC_HANDLE
(
¥ec
è
	`FIELD_AT
(¥ec,5,
EMSH
)

	)

475 
	#SRC_OFFSET
(
¥ec
è
	`FIELD_AT
(¥ec,7,)

	)

476 
	#SRC_PAGE
(
¥ec
è
	`FIELD_AT
(¥ec,9,)

	)

477 
	#SRC_PTR
(
¥ec
è
	`FIELD_AT
(¥ec,7,
EMSPTR
)

	)

478 
	#DST_TYPE
(
¥ec
è
	`FIELD_AT
(¥ec,11,)

	)

479 
	#DST_HANDLE
(
¥ec
è
	`FIELD_AT
(¥ec,12,
EMSH
)

	)

480 
	#DST_OFFSET
(
¥ec
è
	`FIELD_AT
(¥ec,14,)

	)

481 
	#DST_PAGE
(
¥ec
è
	`FIELD_AT
(¥ec,16,)

	)

482 
	#DST_PTR
(
¥ec
è
	`FIELD_AT
(¥ec,14,
EMSPTR
)

	)

484 
	#EMSPAGESIZE
 16384L

	)

486 
	#HIBYTE
(
W
è(((Wè>> 8è& 0xFF)

	)

487 
	#LOBYTE
(
W
è((Wè& 0xFF)

	)

490 
	$METHODDEF
()

491 
	$»ad_ems_¡Üe
 (
j_commÚ_±r
 
cšfo
, 
backšg_¡Üe_±r
 
šfo
,

492 
FAR
 * 
bufãr_add»ss
,

493 
fe_off£t
, 
by‹_couÁ
)

495 
EMScÚ‹xt
 
ùx
;

496 
EMS¥ec
 
¥ec
;

498 
¥ec
.
Ëngth
 = 
by‹_couÁ
;

499 
	`SRC_TYPE
(
¥ec
) = 1;

500 
	`SRC_HANDLE
(
¥ec
èğ
šfo
->
hªdË
.
ems_hªdË
;

501 
	`SRC_PAGE
(
¥ec
èğ(è(
fe_off£t
 / 
EMSPAGESIZE
);

502 
	`SRC_OFFSET
(
¥ec
èğ(è(
fe_off£t
 % 
EMSPAGESIZE
);

503 
	`DST_TYPE
(
¥ec
) = 0;

504 
	`DST_HANDLE
(
¥ec
) = 0;

505 
	`DST_PTR
(
¥ec
èğ
bufãr_add»ss
;

507 
ùx
.
ds_si
 = (
çr
 *è& 
¥ec
;

508 
ùx
.
ax
 = 0x5700;

509 
	`jems_ÿÎdriv”
((
EMScÚ‹xt
 
çr
 *è& 
ùx
);

510 ià(
	`HIBYTE
(
ùx
.
ax
) != 0)

511 
	`ERREXIT
(
cšfo
, 
JERR_EMS_READ
);

512 
	}
}

515 
	$METHODDEF
()

516 
	$wr™e_ems_¡Üe
 (
j_commÚ_±r
 
cšfo
, 
backšg_¡Üe_±r
 
šfo
,

517 
FAR
 * 
bufãr_add»ss
,

518 
fe_off£t
, 
by‹_couÁ
)

520 
EMScÚ‹xt
 
ùx
;

521 
EMS¥ec
 
¥ec
;

523 
¥ec
.
Ëngth
 = 
by‹_couÁ
;

524 
	`SRC_TYPE
(
¥ec
) = 0;

525 
	`SRC_HANDLE
(
¥ec
) = 0;

526 
	`SRC_PTR
(
¥ec
èğ
bufãr_add»ss
;

527 
	`DST_TYPE
(
¥ec
) = 1;

528 
	`DST_HANDLE
(
¥ec
èğ
šfo
->
hªdË
.
ems_hªdË
;

529 
	`DST_PAGE
(
¥ec
èğ(è(
fe_off£t
 / 
EMSPAGESIZE
);

530 
	`DST_OFFSET
(
¥ec
èğ(è(
fe_off£t
 % 
EMSPAGESIZE
);

532 
ùx
.
ds_si
 = (
çr
 *è& 
¥ec
;

533 
ùx
.
ax
 = 0x5700;

534 
	`jems_ÿÎdriv”
((
EMScÚ‹xt
 
çr
 *è& 
ùx
);

535 ià(
	`HIBYTE
(
ùx
.
ax
) != 0)

536 
	`ERREXIT
(
cšfo
, 
JERR_EMS_WRITE
);

537 
	}
}

540 
	$METHODDEF
()

541 
	$şo£_ems_¡Üe
 (
j_commÚ_±r
 
cšfo
, 
backšg_¡Üe_±r
 
šfo
)

543 
EMScÚ‹xt
 
ùx
;

545 
ùx
.
ax
 = 0x4500;

546 
ùx
.
dx
 = 
šfo
->
hªdË
.
ems_hªdË
;

547 
	`jems_ÿÎdriv”
((
EMScÚ‹xt
 
çr
 *è& 
ùx
);

548 
	`TRACEMS1
(
cšfo
, 1, 
JTRC_EMS_CLOSE
, 
šfo
->
hªdË
.
ems_hªdË
);

550 
	}
}

553 
	$LOCAL
(
boŞ—n
)

554 
	$İ’_ems_¡Üe
 (
j_commÚ_±r
 
cšfo
, 
backšg_¡Üe_±r
 
šfo
,

555 
tÙ®_by‹s_Ãeded
)

557 
EMScÚ‹xt
 
ùx
;

560 ià(! 
	`jems_avaabË
())

561  
FALSE
;

564 
ùx
.
ax
 = 0x4000;

565 
	`jems_ÿÎdriv”
((
EMScÚ‹xt
 
çr
 *è& 
ùx
);

566 ià(
	`HIBYTE
(
ùx
.
ax
) != 0)

567  
FALSE
;

570 
ùx
.
ax
 = 0x4600;

571 
	`jems_ÿÎdriv”
((
EMScÚ‹xt
 
çr
 *è& 
ùx
);

572 ià(
	`HIBYTE
(
ùx
.
ax
è!ğ0 || 
	`LOBYTE
(ctx.ax) < 0x40)

573  
FALSE
;

576 
ùx
.
ax
 = 0x4300;

577 
ùx
.
bx
 = (è((
tÙ®_by‹s_Ãeded
 + 
EMSPAGESIZE
-1L) / EMSPAGESIZE);

578 
	`jems_ÿÎdriv”
((
EMScÚ‹xt
 
çr
 *è& 
ùx
);

579 ià(
	`HIBYTE
(
ùx
.
ax
) != 0)

580  
FALSE
;

583 
šfo
->
hªdË
.
ems_hªdË
 = 
ùx
.
dx
;

584 
šfo
->
»ad_backšg_¡Üe
 = 
»ad_ems_¡Üe
;

585 
šfo
->
wr™e_backšg_¡Üe
 = 
wr™e_ems_¡Üe
;

586 
šfo
->
şo£_backšg_¡Üe
 = 
şo£_ems_¡Üe
;

587 
	`TRACEMS1
(
cšfo
, 1, 
JTRC_EMS_OPEN
, 
ùx
.
dx
);

588  
TRUE
;

589 
	}
}

598 
	$GLOBAL
()

599 
	$j³g_İ’_backšg_¡Üe
 (
j_commÚ_±r
 
cšfo
, 
backšg_¡Üe_±r
 
šfo
,

600 
tÙ®_by‹s_Ãeded
)

603 #ià
XMS_SUPPORTED


604 ià(
	`İ’_xms_¡Üe
(
cšfo
, 
šfo
, 
tÙ®_by‹s_Ãeded
))

607 #ià
EMS_SUPPORTED


608 ià(
	`İ’_ems_¡Üe
(
cšfo
, 
šfo
, 
tÙ®_by‹s_Ãeded
))

611 ià(
	`İ’_fe_¡Üe
(
cšfo
, 
šfo
, 
tÙ®_by‹s_Ãeded
))

613 
	`ERREXITS
(
cšfo
, 
JERR_TFILE_CREATE
, "");

614 
	}
}

622 
	$GLOBAL
()

623 
	$j³g_mem_š™
 (
j_commÚ_±r
 
cšfo
)

625 
Ãxt_fe_num
 = 0;

626  
DEFAULT_MAX_MEM
;

627 
	}
}

629 
	$GLOBAL
()

630 
	$j³g_mem_‹rm
 (
j_commÚ_±r
 
cšfo
)

635 #ifdeà
NEED_FHEAPMIN


636 
	`_fh—pmš
();

638 
	}
}

	@jmemmac.c

52 
	#JPEG_INTERNALS


	)

53 
	~"jšşude.h
"

54 
	~"j³glib.h
"

55 
	~"jmemsys.h
"

57 #iâdeà
USE_MAC_MEMMGR


58 
You
 
fÜgÙ
 
to
 
defše
 
USE_MAC_MEMMGR
 
š
 
	gjcÚfig
.
	gh
.

61 
	~<MemÜy.h
>

62 
	~<Fes.h
>

63 
	~<FŞd”s.h
>

64 
	~<Süt.h
>

65 
	~<Ge¡®t.h
>

67 #iâdeà
TEMP_FILE_NAME


68 
	#TEMP_FILE_NAME
 "JPG%03d.TMP"

	)

71 
	gÃxt_fe_num
;

81 
	$GLOBAL
(*)

82 
	$j³g_g‘_sm®l
 (
j_commÚ_±r
 
cšfo
, 
size_t
 
sizeofobjeù
)

84  (*è
	`NewPŒ
(
sizeofobjeù
);

85 
	}
}

87 
	$GLOBAL
()

88 
	$j³g_ä“_sm®l
 (
j_commÚ_±r
 
cšfo
, * 
objeù
, 
size_t
 
sizeofobjeù
)

90 
	`Di¥o£PŒ
((
PŒ
è
objeù
);

91 
	}
}

101 
	$GLOBAL
(
FAR
 *)

102 
	$j³g_g‘_Ïrge
 (
j_commÚ_±r
 
cšfo
, 
size_t
 
sizeofobjeù
)

104  (
FAR
 *è
	`NewPŒ
(
sizeofobjeù
);

105 
	}
}

107 
	$GLOBAL
()

108 
	$j³g_ä“_Ïrge
 (
j_commÚ_±r
 
cšfo
, 
FAR
 * 
objeù
, 
size_t
 
sizeofobjeù
)

110 
	`Di¥o£PŒ
((
PŒ
è
objeù
);

111 
	}
}

118 
	$GLOBAL
()

119 
	$j³g_mem_avaabË
 (
j_commÚ_±r
 
cšfo
, 
mš_by‹s_Ãeded
,

120 
max_by‹s_Ãeded
, 
®»ady_®loÿ‹d
)

122 
lim™
 = 
cšfo
->
mem
->
max_memÜy_to_u£
 - 
®»ady_®loÿ‹d
;

123 
¦İ
, 
mem
;

126 ià(
max_by‹s_Ãeded
 > 
lim™
 &&†imit > 0)

127 
max_by‹s_Ãeded
 = 
lim™
;

134 
¦İ
 = 
max_by‹s_Ãeded
 / 16 + 32768L;

135 
mem
 = 
	`Com·ùMem
(
max_by‹s_Ãeded
 + 
¦İ
) - slop;

136 ià(
mem
 < 0)

137 
mem
 = 0;

139 ià(
mem
 > 
lim™
 &&†imit > 0)

140 
mem
 = 
lim™
;

141  
mem
;

142 
	}
}

153 
	$METHODDEF
()

154 
	$»ad_backšg_¡Üe
 (
j_commÚ_±r
 
cšfo
, 
backšg_¡Üe_±r
 
šfo
,

155 
FAR
 * 
bufãr_add»ss
,

156 
fe_off£t
, 
by‹_couÁ
)

158 
by‹s
 = 
by‹_couÁ
;

159 
»tV®
;

161 iàĞ
	`S‘FPos
 ( 
šfo
->
‹mp_fe
, 
fsFromS¹
, 
fe_off£t
 ) !ğ
noE¼
 )

162 
	`ERREXIT
(
cšfo
, 
JERR_TFILE_SEEK
);

164 
»tV®
 = 
	`FSR—d
 ( 
šfo
->
‹mp_fe
, &
by‹s
,

165 (*è
bufãr_add»ss
 );

166 iàĞ
»tV®
 !ğ
noE¼
 || 
by‹s
 !ğ
by‹_couÁ
 )

167 
	`ERREXIT
(
cšfo
, 
JERR_TFILE_READ
);

168 
	}
}

171 
	$METHODDEF
()

172 
	$wr™e_backšg_¡Üe
 (
j_commÚ_±r
 
cšfo
, 
backšg_¡Üe_±r
 
šfo
,

173 
FAR
 * 
bufãr_add»ss
,

174 
fe_off£t
, 
by‹_couÁ
)

176 
by‹s
 = 
by‹_couÁ
;

177 
»tV®
;

179 iàĞ
	`S‘FPos
 ( 
šfo
->
‹mp_fe
, 
fsFromS¹
, 
fe_off£t
 ) !ğ
noE¼
 )

180 
	`ERREXIT
(
cšfo
, 
JERR_TFILE_SEEK
);

182 
»tV®
 = 
	`FSWr™e
 ( 
šfo
->
‹mp_fe
, &
by‹s
,

183 (*è
bufãr_add»ss
 );

184 iàĞ
»tV®
 !ğ
noE¼
 || 
by‹s
 !ğ
by‹_couÁ
 )

185 
	`ERREXIT
(
cšfo
, 
JERR_TFILE_WRITE
);

186 
	}
}

189 
	$METHODDEF
()

190 
	$şo£_backšg_¡Üe
 (
j_commÚ_±r
 
cšfo
, 
backšg_¡Üe_±r
 
šfo
)

192 
	`FSClo£
 ( 
šfo
->
‹mp_fe
 );

193 
	`FSpD–‘e
 ( &(
šfo
->
‹mpS³c
) );

194 
	}
}

204 
	$GLOBAL
()

205 
	$j³g_İ’_backšg_¡Üe
 (
j_commÚ_±r
 
cšfo
, 
backšg_¡Üe_±r
 
šfo
,

206 
tÙ®_by‹s_Ãeded
)

208 
tmpRef
, 
vRefNum
;

209 
dœID
;

210 
FInfo
 
fšd”Info
;

211 
FSS³c
 
theS³c
;

212 
SŒ255
 
fName
;

213 
OSE¼
 
osE¼
;

214 
ge¡®tRe¥Ú£
 = 0;

217 
osE¼
 = 
	`Ge¡®t
Ğ
ge¡®tFSA‰r
, &
ge¡®tRe¥Ú£
 );

218 iàĞĞ
osE¼
 !ğ
noE¼
 )

219 || !Ğ
ge¡®tRe¥Ú£
 & (1<<
ge¡®tHasFSS³cC®ls
) ) )

220 
	`ERREXITS
(
cšfo
, 
JERR_TFILE_CREATE
, "- System 7.0 or†ater„equired");

224 
osE¼
 = 
	`Ge¡®t
Ğ
ge¡®tFšdFŞd”A‰r
, &
ge¡®tRe¥Ú£
 );

225 iàĞĞ
osE¼
 !ğ
noE¼
 )

226 || !Ğ
ge¡®tRe¥Ú£
 & (1<<
ge¡®tFšdFŞd”P»£Á
) ) )

227 
	`ERREXITS
(
cšfo
, 
JERR_TFILE_CREATE
, "- System 7.0 or†ater„equired.");

230 
osE¼
 = 
	`FšdFŞd”
 ( 
kOnSy¡emDisk
, 
kTempÜ¬yFŞd”Ty³
, 
kC»©eFŞd”
,

231 &
vRefNum
, &
dœID
 );

232 iàĞ
osE¼
 !ğ
noE¼
 )

233 
	`ERREXITS
(
cšfo
, 
JERR_TFILE_CREATE
, "-emporary items folder unavailable");

238 
Ãxt_fe_num
++;

240 
	`¥rštf
(
šfo
->
‹mp_Çme
, 
TEMP_FILE_NAME
, 
Ãxt_fe_num
);

241 
	`¡rıy
 ( (
PŒ
)
fName
+1, 
šfo
->
‹mp_Çme
 );

242 *
fName
 = 
	`¡¾’
 (
šfo
->
‹mp_Çme
);

243 
osE¼
 = 
	`FSMakeFSS³c
 ( 
vRefNum
, 
dœID
, 
fName
, &
theS³c
 );

245 iàĞ(
osE¼
 = 
	`FSpG‘FInfo
 ( &
theS³c
, &
fšd”Info
 ) ) !ğ
noE¼
 )

249 
osE¼
 = 
	`FSpC»©e
 ( &
theS³c
, '????', '????', 
smSy¡emSüt
 );

250 iàĞ
osE¼
 !ğ
noE¼
 )

251 
	`ERREXITS
(
cšfo
, 
JERR_TFILE_CREATE
, 
šfo
->
‹mp_Çme
);

253 
osE¼
 = 
	`FSpO³nDF
 ( &
theS³c
, 
fsRdWrP”m
, &(
šfo
->
‹mp_fe
) );

254 iàĞ
osE¼
 !ğ
noE¼
 )

255 
	`ERREXITS
(
cšfo
, 
JERR_TFILE_CREATE
, 
šfo
->
‹mp_Çme
);

257 
šfo
->
‹mpS³c
 = 
theS³c
;

259 
šfo
->
»ad_backšg_¡Üe
 =„ead_backing_store;

260 
šfo
->
wr™e_backšg_¡Üe
 = write_backing_store;

261 
šfo
->
şo£_backšg_¡Üe
 = close_backing_store;

262 
	`TRACEMSS
(
cšfo
, 1, 
JTRC_TFILE_OPEN
, 
šfo
->
‹mp_Çme
);

263 
	}
}

271 
	$GLOBAL
()

272 
	$j³g_mem_š™
 (
j_commÚ_±r
 
cšfo
)

274 
Ãxt_fe_num
 = 0;

282  
	`F»eMem
();

283 
	}
}

285 
	$GLOBAL
()

286 
	$j³g_mem_‹rm
 (
j_commÚ_±r
 
cšfo
)

289 
	}
}

	@jmemmgr.c

27 
	#JPEG_INTERNALS


	)

28 
	#AM_MEMORY_MANAGER


	)

29 
	~"jšşude.h
"

30 
	~"j³glib.h
"

31 
	~"jmemsys.h
"

33 #iâdeà
NO_GETENV


34 #iâdeà
HAVE_STDLIB_H


35 * 
g‘’v
 
JPP
((cÚ¡ * 
Çme
));

72 #iâdeà
ALIGN_TYPE


73 
	#ALIGN_TYPE
 

	)

89 
sm®l_poŞ_¡ruù
 * 
	tsm®l_poŞ_±r
;

91 
	usm®l_poŞ_¡ruù
 {

93 
sm®l_poŞ_±r
 
	mÃxt
;

94 
size_t
 
	mby‹s_u£d
;

95 
size_t
 
	mby‹s_Ëá
;

96 } 
	mhdr
;

97 
ALIGN_TYPE
 
	mdummy
;

98 } 
	tsm®l_poŞ_hdr
;

100 
Ïrge_poŞ_¡ruù
 
	tFAR
 * 
	tÏrge_poŞ_±r
;

102 
	uÏrge_poŞ_¡ruù
 {

104 
Ïrge_poŞ_±r
 
	mÃxt
;

105 
size_t
 
	mby‹s_u£d
;

106 
size_t
 
	mby‹s_Ëá
;

107 } 
	mhdr
;

108 
ALIGN_TYPE
 
	mdummy
;

109 } 
	tÏrge_poŞ_hdr
;

117 
j³g_memÜy_mgr
 
	mpub
;

120 
sm®l_poŞ_±r
 
	msm®l_li¡
[
JPOOL_NUMPOOLS
];

121 
Ïrge_poŞ_±r
 
	mÏrge_li¡
[
JPOOL_NUMPOOLS
];

128 
jvœt_§¼ay_±r
 
	mvœt_§¼ay_li¡
;

129 
jvœt_b¬¿y_±r
 
	mvœt_b¬¿y_li¡
;

132 
	mtÙ®_¥aû_®loÿ‹d
;

137 
JDIMENSION
 
	mÏ¡_row¥”chunk
;

138 } 
	tmy_memÜy_mgr
;

140 
my_memÜy_mgr
 * 
	tmy_mem_±r
;

150 
	sjvœt_§¼ay_cÚŒŞ
 {

151 
JSAMPARRAY
 
	mmem_bufãr
;

152 
JDIMENSION
 
	mrows_š_¬¿y
;

153 
JDIMENSION
 
	m§m¶e¥”row
;

154 
JDIMENSION
 
	mmaxacûss
;

155 
JDIMENSION
 
	mrows_š_mem
;

156 
JDIMENSION
 
	mrow¥”chunk
;

157 
JDIMENSION
 
	mcur_¡¬t_row
;

158 
JDIMENSION
 
	mfœ¡_undef_row
;

159 
boŞ—n
 
	m´e_z”o
;

160 
boŞ—n
 
	mdœty
;

161 
boŞ—n
 
	mb_s_İ’
;

162 
jvœt_§¼ay_±r
 
	mÃxt
;

163 
backšg_¡Üe_šfo
 
	mb_s_šfo
;

166 
	sjvœt_b¬¿y_cÚŒŞ
 {

167 
JBLOCKARRAY
 
	mmem_bufãr
;

168 
JDIMENSION
 
	mrows_š_¬¿y
;

169 
JDIMENSION
 
	mblock¥”row
;

170 
JDIMENSION
 
	mmaxacûss
;

171 
JDIMENSION
 
	mrows_š_mem
;

172 
JDIMENSION
 
	mrow¥”chunk
;

173 
JDIMENSION
 
	mcur_¡¬t_row
;

174 
JDIMENSION
 
	mfœ¡_undef_row
;

175 
boŞ—n
 
	m´e_z”o
;

176 
boŞ—n
 
	mdœty
;

177 
boŞ—n
 
	mb_s_İ’
;

178 
jvœt_b¬¿y_±r
 
	mÃxt
;

179 
backšg_¡Üe_šfo
 
	mb_s_šfo
;

183 #ifdeà
MEM_STATS


185 
	$LOCAL
()

186 
	$´št_mem_¡©s
 (
j_commÚ_±r
 
cšfo
, 
poŞ_id
)

188 
my_mem_±r
 
mem
 = (my_mem_±rè
cšfo
->mem;

189 
sm®l_poŞ_±r
 
shdr_±r
;

190 
Ïrge_poŞ_±r
 
lhdr_±r
;

196 
	`årštf
(
¡d”r
, "Freeing…ool %d,otal space = %ld\n",

197 
poŞ_id
, 
mem
->
tÙ®_¥aû_®loÿ‹d
);

199 
lhdr_±r
 = 
mem
->
Ïrge_li¡
[
poŞ_id
];†hdr_±¸!ğ
NULL
;

200 
lhdr_±r
 =†hdr_±r->
hdr
.
Ãxt
) {

201 
	`årštf
(
¡d”r
, " Large chunk used %ld\n",

202 (è
lhdr_±r
->
hdr
.
by‹s_u£d
);

205 
shdr_±r
 = 
mem
->
sm®l_li¡
[
poŞ_id
]; shdr_±¸!ğ
NULL
;

206 
shdr_±r
 = shdr_±r->
hdr
.
Ãxt
) {

207 
	`årštf
(
¡d”r
, " Small chunk used %ld free %ld\n",

208 (è
shdr_±r
->
hdr
.
by‹s_u£d
,

209 (è
shdr_±r
->
hdr
.
by‹s_Ëá
);

211 
	}
}

216 
	$LOCAL
()

217 
	$out_of_memÜy
 (
j_commÚ_±r
 
cšfo
, 
which
)

221 #ifdeà
MEM_STATS


222 
cšfo
->
”r
->
Œaû_Ëv–
 = 2;

224 
	`ERREXIT1
(
cšfo
, 
JERR_OUT_OF_MEMORY
, 
which
);

225 
	}
}

241 cÚ¡ 
size_t
 
	gfœ¡_poŞ_¦İ
[
JPOOL_NUMPOOLS
] =

247 cÚ¡ 
size_t
 
	gexŒa_poŞ_¦İ
[
JPOOL_NUMPOOLS
] =

253 
	#MIN_SLOP
 50

	)

256 
	$METHODDEF
(*)

257 
	$®loc_sm®l
 (
j_commÚ_±r
 
cšfo
, 
poŞ_id
, 
size_t
 
sizeofobjeù
)

260 
my_mem_±r
 
mem
 = (my_mem_±rè
cšfo
->mem;

261 
sm®l_poŞ_±r
 
hdr_±r
, 
´ev_hdr_±r
;

262 * 
d©a_±r
;

263 
size_t
 
odd_by‹s
, 
mš_»que¡
, 
¦İ
;

266 ià(
sizeofobjeù
 > (
size_t
è(
MAX_ALLOC_CHUNK
-
	`SIZEOF
(
sm®l_poŞ_hdr
)))

267 
	`out_of_memÜy
(
cšfo
, 1);

270 
odd_by‹s
 = 
sizeofobjeù
 % 
	`SIZEOF
(
ALIGN_TYPE
);

271 ià(
odd_by‹s
 > 0)

272 
sizeofobjeù
 +ğ
	`SIZEOF
(
ALIGN_TYPE
è- 
odd_by‹s
;

275 ià(
poŞ_id
 < 0 ||…oŞ_id >ğ
JPOOL_NUMPOOLS
)

276 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_POOL_ID
, 
poŞ_id
);

277 
´ev_hdr_±r
 = 
NULL
;

278 
hdr_±r
 = 
mem
->
sm®l_li¡
[
poŞ_id
];

279 
hdr_±r
 !ğ
NULL
) {

280 ià(
hdr_±r
->
hdr
.
by‹s_Ëá
 >ğ
sizeofobjeù
)

282 
´ev_hdr_±r
 = 
hdr_±r
;

283 
hdr_±r
 = hdr_±r->
hdr
.
Ãxt
;

287 ià(
hdr_±r
 =ğ
NULL
) {

289 
mš_»que¡
 = 
sizeofobjeù
 + 
	`SIZEOF
(
sm®l_poŞ_hdr
);

290 ià(
´ev_hdr_±r
 =ğ
NULL
)

291 
¦İ
 = 
fœ¡_poŞ_¦İ
[
poŞ_id
];

293 
¦İ
 = 
exŒa_poŞ_¦İ
[
poŞ_id
];

295 ià(
¦İ
 > (
size_t
è(
MAX_ALLOC_CHUNK
-
mš_»que¡
))

296 
¦İ
 = (
size_t
è(
MAX_ALLOC_CHUNK
-
mš_»que¡
);

299 
hdr_±r
 = (
sm®l_poŞ_±r
è
	`j³g_g‘_sm®l
(
cšfo
, 
mš_»que¡
 + 
¦İ
);

300 ià(
hdr_±r
 !ğ
NULL
)

302 
¦İ
 /= 2;

303 ià(
¦İ
 < 
MIN_SLOP
)

304 
	`out_of_memÜy
(
cšfo
, 2);

306 
mem
->
tÙ®_¥aû_®loÿ‹d
 +ğ
mš_»que¡
 + 
¦İ
;

308 
hdr_±r
->
hdr
.
Ãxt
 = 
NULL
;

309 
hdr_±r
->
hdr
.
by‹s_u£d
 = 0;

310 
hdr_±r
->
hdr
.
by‹s_Ëá
 = 
sizeofobjeù
 + 
¦İ
;

311 ià(
´ev_hdr_±r
 =ğ
NULL
)

312 
mem
->
sm®l_li¡
[
poŞ_id
] = 
hdr_±r
;

314 
´ev_hdr_±r
->
hdr
.
Ãxt
 = 
hdr_±r
;

318 
d©a_±r
 = (*è(
hdr_±r
 + 1);

319 
d©a_±r
 +ğ
hdr_±r
->
hdr
.
by‹s_u£d
;

320 
hdr_±r
->
hdr
.
by‹s_u£d
 +ğ
sizeofobjeù
;

321 
hdr_±r
->
hdr
.
by‹s_Ëá
 -ğ
sizeofobjeù
;

323  (*è
d©a_±r
;

324 
	}
}

341 
	$METHODDEF
(
FAR
 *)

342 
	$®loc_Ïrge
 (
j_commÚ_±r
 
cšfo
, 
poŞ_id
, 
size_t
 
sizeofobjeù
)

345 
my_mem_±r
 
mem
 = (my_mem_±rè
cšfo
->mem;

346 
Ïrge_poŞ_±r
 
hdr_±r
;

347 
size_t
 
odd_by‹s
;

350 ià(
sizeofobjeù
 > (
size_t
è(
MAX_ALLOC_CHUNK
-
	`SIZEOF
(
Ïrge_poŞ_hdr
)))

351 
	`out_of_memÜy
(
cšfo
, 3);

354 
odd_by‹s
 = 
sizeofobjeù
 % 
	`SIZEOF
(
ALIGN_TYPE
);

355 ià(
odd_by‹s
 > 0)

356 
sizeofobjeù
 +ğ
	`SIZEOF
(
ALIGN_TYPE
è- 
odd_by‹s
;

359 ià(
poŞ_id
 < 0 ||…oŞ_id >ğ
JPOOL_NUMPOOLS
)

360 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_POOL_ID
, 
poŞ_id
);

362 
hdr_±r
 = (
Ïrge_poŞ_±r
è
	`j³g_g‘_Ïrge
(
cšfo
, 
sizeofobjeù
 +

363 
	`SIZEOF
(
Ïrge_poŞ_hdr
));

364 ià(
hdr_±r
 =ğ
NULL
)

365 
	`out_of_memÜy
(
cšfo
, 4);

366 
mem
->
tÙ®_¥aû_®loÿ‹d
 +ğ
sizeofobjeù
 + 
	`SIZEOF
(
Ïrge_poŞ_hdr
);

369 
hdr_±r
->
hdr
.
Ãxt
 = 
mem
->
Ïrge_li¡
[
poŞ_id
];

373 
hdr_±r
->
hdr
.
by‹s_u£d
 = 
sizeofobjeù
;

374 
hdr_±r
->
hdr
.
by‹s_Ëá
 = 0;

375 
mem
->
Ïrge_li¡
[
poŞ_id
] = 
hdr_±r
;

377  (
FAR
 *è(
hdr_±r
 + 1);

378 
	}
}

394 
	$METHODDEF
(
JSAMPARRAY
)

395 
	$®loc_§¼ay
 (
j_commÚ_±r
 
cšfo
, 
poŞ_id
,

396 
JDIMENSION
 
§m¶e¥”row
, JDIMENSION 
numrows
)

399 
my_mem_±r
 
mem
 = (my_mem_±rè
cšfo
->mem;

400 
JSAMPARRAY
 
»suÉ
;

401 
JSAMPROW
 
wÜk¥aû
;

402 
JDIMENSION
 
row¥”chunk
, 
cu¼ow
, 
i
;

403 
Éemp
;

406 
Éemp
 = (
MAX_ALLOC_CHUNK
-
	`SIZEOF
(
Ïrge_poŞ_hdr
)) /

407 ((è
§m¶e¥”row
 * 
	`SIZEOF
(
JSAMPLE
));

408 ià(
Éemp
 <= 0)

409 
	`ERREXIT
(
cšfo
, 
JERR_WIDTH_OVERFLOW
);

410 ià(
Éemp
 < (è
numrows
)

411 
row¥”chunk
 = (
JDIMENSION
è
Éemp
;

413 
row¥”chunk
 = 
numrows
;

414 
mem
->
Ï¡_row¥”chunk
 = 
row¥”chunk
;

417 
»suÉ
 = (
JSAMPARRAY
è
	`®loc_sm®l
(
cšfo
, 
poŞ_id
,

418 (
size_t
è(
numrows
 * 
	`SIZEOF
(
JSAMPROW
)));

421 
cu¼ow
 = 0;

422 
cu¼ow
 < 
numrows
) {

423 
row¥”chunk
 = 
	`MIN
Ôow¥”chunk, 
numrows
 - 
cu¼ow
);

424 
wÜk¥aû
 = (
JSAMPROW
è
	`®loc_Ïrge
(
cšfo
, 
poŞ_id
,

425 (
size_t
è((size_tè
row¥”chunk
 * (size_tè
§m¶e¥”row


426 * 
	`SIZEOF
(
JSAMPLE
)));

427 
i
 = 
row¥”chunk
; i > 0; i--) {

428 
»suÉ
[
cu¼ow
++] = 
wÜk¥aû
;

429 
wÜk¥aû
 +ğ
§m¶e¥”row
;

433  
»suÉ
;

434 
	}
}

442 
	$METHODDEF
(
JBLOCKARRAY
)

443 
	$®loc_b¬¿y
 (
j_commÚ_±r
 
cšfo
, 
poŞ_id
,

444 
JDIMENSION
 
block¥”row
, JDIMENSION 
numrows
)

447 
my_mem_±r
 
mem
 = (my_mem_±rè
cšfo
->mem;

448 
JBLOCKARRAY
 
»suÉ
;

449 
JBLOCKROW
 
wÜk¥aû
;

450 
JDIMENSION
 
row¥”chunk
, 
cu¼ow
, 
i
;

451 
Éemp
;

454 
Éemp
 = (
MAX_ALLOC_CHUNK
-
	`SIZEOF
(
Ïrge_poŞ_hdr
)) /

455 ((è
block¥”row
 * 
	`SIZEOF
(
JBLOCK
));

456 ià(
Éemp
 <= 0)

457 
	`ERREXIT
(
cšfo
, 
JERR_WIDTH_OVERFLOW
);

458 ià(
Éemp
 < (è
numrows
)

459 
row¥”chunk
 = (
JDIMENSION
è
Éemp
;

461 
row¥”chunk
 = 
numrows
;

462 
mem
->
Ï¡_row¥”chunk
 = 
row¥”chunk
;

465 
»suÉ
 = (
JBLOCKARRAY
è
	`®loc_sm®l
(
cšfo
, 
poŞ_id
,

466 (
size_t
è(
numrows
 * 
	`SIZEOF
(
JBLOCKROW
)));

469 
cu¼ow
 = 0;

470 
cu¼ow
 < 
numrows
) {

471 
row¥”chunk
 = 
	`MIN
Ôow¥”chunk, 
numrows
 - 
cu¼ow
);

472 
wÜk¥aû
 = (
JBLOCKROW
è
	`®loc_Ïrge
(
cšfo
, 
poŞ_id
,

473 (
size_t
è((size_tè
row¥”chunk
 * (size_tè
block¥”row


474 * 
	`SIZEOF
(
JBLOCK
)));

475 
i
 = 
row¥”chunk
; i > 0; i--) {

476 
»suÉ
[
cu¼ow
++] = 
wÜk¥aû
;

477 
wÜk¥aû
 +ğ
block¥”row
;

481  
»suÉ
;

482 
	}
}

522 
	$METHODDEF
(
jvœt_§¼ay_±r
)

523 
	$»que¡_vœt_§¼ay
 (
j_commÚ_±r
 
cšfo
, 
poŞ_id
, 
boŞ—n
 
´e_z”o
,

524 
JDIMENSION
 
§m¶e¥”row
, JDIMENSION 
numrows
,

525 
JDIMENSION
 
maxacûss
)

528 
my_mem_±r
 
mem
 = (my_mem_±rè
cšfo
->mem;

529 
jvœt_§¼ay_±r
 
»suÉ
;

532 ià(
poŞ_id
 !ğ
JPOOL_IMAGE
)

533 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_POOL_ID
, 
poŞ_id
);

536 
»suÉ
 = (
jvœt_§¼ay_±r
è
	`®loc_sm®l
(
cšfo
, 
poŞ_id
,

537 
	`SIZEOF
(
jvœt_§¼ay_cÚŒŞ
));

539 
»suÉ
->
mem_bufãr
 = 
NULL
;

540 
»suÉ
->
rows_š_¬¿y
 = 
numrows
;

541 
»suÉ
->
§m¶e¥”row
 = samplesperrow;

542 
»suÉ
->
maxacûss
 = maxaccess;

543 
»suÉ
->
´e_z”o
 =…re_zero;

544 
»suÉ
->
b_s_İ’
 = 
FALSE
;

545 
»suÉ
->
Ãxt
 = 
mem
->
vœt_§¼ay_li¡
;

546 
mem
->
vœt_§¼ay_li¡
 = 
»suÉ
;

548  
»suÉ
;

549 
	}
}

552 
	$METHODDEF
(
jvœt_b¬¿y_±r
)

553 
	$»que¡_vœt_b¬¿y
 (
j_commÚ_±r
 
cšfo
, 
poŞ_id
, 
boŞ—n
 
´e_z”o
,

554 
JDIMENSION
 
block¥”row
, JDIMENSION 
numrows
,

555 
JDIMENSION
 
maxacûss
)

558 
my_mem_±r
 
mem
 = (my_mem_±rè
cšfo
->mem;

559 
jvœt_b¬¿y_±r
 
»suÉ
;

562 ià(
poŞ_id
 !ğ
JPOOL_IMAGE
)

563 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_POOL_ID
, 
poŞ_id
);

566 
»suÉ
 = (
jvœt_b¬¿y_±r
è
	`®loc_sm®l
(
cšfo
, 
poŞ_id
,

567 
	`SIZEOF
(
jvœt_b¬¿y_cÚŒŞ
));

569 
»suÉ
->
mem_bufãr
 = 
NULL
;

570 
»suÉ
->
rows_š_¬¿y
 = 
numrows
;

571 
»suÉ
->
block¥”row
 = blocksperrow;

572 
»suÉ
->
maxacûss
 = maxaccess;

573 
»suÉ
->
´e_z”o
 =…re_zero;

574 
»suÉ
->
b_s_İ’
 = 
FALSE
;

575 
»suÉ
->
Ãxt
 = 
mem
->
vœt_b¬¿y_li¡
;

576 
mem
->
vœt_b¬¿y_li¡
 = 
»suÉ
;

578  
»suÉ
;

579 
	}
}

582 
	$METHODDEF
()

583 
	$»®ize_vœt_¬¿ys
 (
j_commÚ_±r
 
cšfo
)

586 
my_mem_±r
 
mem
 = (my_mem_±rè
cšfo
->mem;

587 
¥aû_³r_mšheight
, 
maximum_¥aû
, 
ava_mem
;

588 
mšheights
, 
max_mšheights
;

589 
jvœt_§¼ay_±r
 
¥Œ
;

590 
jvœt_b¬¿y_±r
 
b±r
;

596 
¥aû_³r_mšheight
 = 0;

597 
maximum_¥aû
 = 0;

598 
¥Œ
 = 
mem
->
vœt_§¼ay_li¡
; s±¸!ğ
NULL
; s±¸ğ¥Œ->
Ãxt
) {

599 ià(
¥Œ
->
mem_bufãr
 =ğ
NULL
) {

600 
¥aû_³r_mšheight
 +ğ(è
¥Œ
->
maxacûss
 *

601 (è
¥Œ
->
§m¶e¥”row
 * 
	`SIZEOF
(
JSAMPLE
);

602 
maximum_¥aû
 +ğ(è
¥Œ
->
rows_š_¬¿y
 *

603 (è
¥Œ
->
§m¶e¥”row
 * 
	`SIZEOF
(
JSAMPLE
);

606 
b±r
 = 
mem
->
vœt_b¬¿y_li¡
; b±¸!ğ
NULL
; b±¸ğb±r->
Ãxt
) {

607 ià(
b±r
->
mem_bufãr
 =ğ
NULL
) {

608 
¥aû_³r_mšheight
 +ğ(è
b±r
->
maxacûss
 *

609 (è
b±r
->
block¥”row
 * 
	`SIZEOF
(
JBLOCK
);

610 
maximum_¥aû
 +ğ(è
b±r
->
rows_š_¬¿y
 *

611 (è
b±r
->
block¥”row
 * 
	`SIZEOF
(
JBLOCK
);

615 ià(
¥aû_³r_mšheight
 <= 0)

619 
ava_mem
 = 
	`j³g_mem_avaabË
(
cšfo
, 
¥aû_³r_mšheight
, 
maximum_¥aû
,

620 
mem
->
tÙ®_¥aû_®loÿ‹d
);

626 ià(
ava_mem
 >ğ
maximum_¥aû
)

627 
max_mšheights
 = 1000000000L;

629 
max_mšheights
 = 
ava_mem
 / 
¥aû_³r_mšheight
;

633 ià(
max_mšheights
 <= 0)

634 
max_mšheights
 = 1;

639 
¥Œ
 = 
mem
->
vœt_§¼ay_li¡
; s±¸!ğ
NULL
; s±¸ğ¥Œ->
Ãxt
) {

640 ià(
¥Œ
->
mem_bufãr
 =ğ
NULL
) {

641 
mšheights
 = ((è
¥Œ
->
rows_š_¬¿y
 - 1Lè/ s±r->
maxacûss
 + 1L;

642 ià(
mšheights
 <ğ
max_mšheights
) {

644 
¥Œ
->
rows_š_mem
 = s±r->
rows_š_¬¿y
;

647 
¥Œ
->
rows_š_mem
 = (
JDIMENSION
è(
max_mšheights
 * s±r->
maxacûss
);

648 
	`j³g_İ’_backšg_¡Üe
(
cšfo
, & 
¥Œ
->
b_s_šfo
,

649 (è
¥Œ
->
rows_š_¬¿y
 *

650 (è
¥Œ
->
§m¶e¥”row
 *

651 (è
	`SIZEOF
(
JSAMPLE
));

652 
¥Œ
->
b_s_İ’
 = 
TRUE
;

654 
¥Œ
->
mem_bufãr
 = 
	`®loc_§¼ay
(
cšfo
, 
JPOOL_IMAGE
,

655 
¥Œ
->
§m¶e¥”row
, s±r->
rows_š_mem
);

656 
¥Œ
->
row¥”chunk
 = 
mem
->
Ï¡_row¥”chunk
;

657 
¥Œ
->
cur_¡¬t_row
 = 0;

658 
¥Œ
->
fœ¡_undef_row
 = 0;

659 
¥Œ
->
dœty
 = 
FALSE
;

663 
b±r
 = 
mem
->
vœt_b¬¿y_li¡
; b±¸!ğ
NULL
; b±¸ğb±r->
Ãxt
) {

664 ià(
b±r
->
mem_bufãr
 =ğ
NULL
) {

665 
mšheights
 = ((è
b±r
->
rows_š_¬¿y
 - 1Lè/ b±r->
maxacûss
 + 1L;

666 ià(
mšheights
 <ğ
max_mšheights
) {

668 
b±r
->
rows_š_mem
 = b±r->
rows_š_¬¿y
;

671 
b±r
->
rows_š_mem
 = (
JDIMENSION
è(
max_mšheights
 * b±r->
maxacûss
);

672 
	`j³g_İ’_backšg_¡Üe
(
cšfo
, & 
b±r
->
b_s_šfo
,

673 (è
b±r
->
rows_š_¬¿y
 *

674 (è
b±r
->
block¥”row
 *

675 (è
	`SIZEOF
(
JBLOCK
));

676 
b±r
->
b_s_İ’
 = 
TRUE
;

678 
b±r
->
mem_bufãr
 = 
	`®loc_b¬¿y
(
cšfo
, 
JPOOL_IMAGE
,

679 
b±r
->
block¥”row
, b±r->
rows_š_mem
);

680 
b±r
->
row¥”chunk
 = 
mem
->
Ï¡_row¥”chunk
;

681 
b±r
->
cur_¡¬t_row
 = 0;

682 
b±r
->
fœ¡_undef_row
 = 0;

683 
b±r
->
dœty
 = 
FALSE
;

686 
	}
}

689 
	$LOCAL
()

690 
	$do_§¼ay_io
 (
j_commÚ_±r
 
cšfo
, 
jvœt_§¼ay_±r
 
±r
, 
boŞ—n
 
wr™šg
)

693 
by‹¥”row
, 
fe_off£t
, 
by‹_couÁ
, 
rows
, 
thi¤ow
, 
i
;

695 
by‹¥”row
 = (è
±r
->
§m¶e¥”row
 * 
	`SIZEOF
(
JSAMPLE
);

696 
fe_off£t
 = 
±r
->
cur_¡¬t_row
 * 
by‹¥”row
;

698 
i
 = 0; i < (è
±r
->
rows_š_mem
; i +ğ±r->
row¥”chunk
) {

700 
rows
 = 
	`MIN
((è
±r
->
row¥”chunk
, (è±r->
rows_š_mem
 - 
i
);

702 
thi¤ow
 = (è
±r
->
cur_¡¬t_row
 + 
i
;

703 
rows
 = 
	`MIN
Ôows, (è
±r
->
fœ¡_undef_row
 - 
thi¤ow
);

705 
rows
 = 
	`MIN
Ôows, (è
±r
->
rows_š_¬¿y
 - 
thi¤ow
);

706 ià(
rows
 <= 0)

708 
by‹_couÁ
 = 
rows
 * 
by‹¥”row
;

709 ià(
wr™šg
)

710 (*
±r
->
b_s_šfo
.
wr™e_backšg_¡Üe
è(
cšfo
, &…tr->b_s_info,

711 (
FAR
 *è
±r
->
mem_bufãr
[
i
],

712 
fe_off£t
, 
by‹_couÁ
);

714 (*
±r
->
b_s_šfo
.
»ad_backšg_¡Üe
è(
cšfo
, &…tr->b_s_info,

715 (
FAR
 *è
±r
->
mem_bufãr
[
i
],

716 
fe_off£t
, 
by‹_couÁ
);

717 
fe_off£t
 +ğ
by‹_couÁ
;

719 
	}
}

722 
	$LOCAL
()

723 
	$do_b¬¿y_io
 (
j_commÚ_±r
 
cšfo
, 
jvœt_b¬¿y_±r
 
±r
, 
boŞ—n
 
wr™šg
)

726 
by‹¥”row
, 
fe_off£t
, 
by‹_couÁ
, 
rows
, 
thi¤ow
, 
i
;

728 
by‹¥”row
 = (è
±r
->
block¥”row
 * 
	`SIZEOF
(
JBLOCK
);

729 
fe_off£t
 = 
±r
->
cur_¡¬t_row
 * 
by‹¥”row
;

731 
i
 = 0; i < (è
±r
->
rows_š_mem
; i +ğ±r->
row¥”chunk
) {

733 
rows
 = 
	`MIN
((è
±r
->
row¥”chunk
, (è±r->
rows_š_mem
 - 
i
);

735 
thi¤ow
 = (è
±r
->
cur_¡¬t_row
 + 
i
;

736 
rows
 = 
	`MIN
Ôows, (è
±r
->
fœ¡_undef_row
 - 
thi¤ow
);

738 
rows
 = 
	`MIN
Ôows, (è
±r
->
rows_š_¬¿y
 - 
thi¤ow
);

739 ià(
rows
 <= 0)

741 
by‹_couÁ
 = 
rows
 * 
by‹¥”row
;

742 ià(
wr™šg
)

743 (*
±r
->
b_s_šfo
.
wr™e_backšg_¡Üe
è(
cšfo
, &…tr->b_s_info,

744 (
FAR
 *è
±r
->
mem_bufãr
[
i
],

745 
fe_off£t
, 
by‹_couÁ
);

747 (*
±r
->
b_s_šfo
.
»ad_backšg_¡Üe
è(
cšfo
, &…tr->b_s_info,

748 (
FAR
 *è
±r
->
mem_bufãr
[
i
],

749 
fe_off£t
, 
by‹_couÁ
);

750 
fe_off£t
 +ğ
by‹_couÁ
;

752 
	}
}

755 
	$METHODDEF
(
JSAMPARRAY
)

756 
	$acûss_vœt_§¼ay
 (
j_commÚ_±r
 
cšfo
, 
jvœt_§¼ay_±r
 
±r
,

757 
JDIMENSION
 
¡¬t_row
, JDIMENSION 
num_rows
,

758 
boŞ—n
 
wr™abË
)

763 
JDIMENSION
 
’d_row
 = 
¡¬t_row
 + 
num_rows
;

764 
JDIMENSION
 
undef_row
;

767 ià(
’d_row
 > 
±r
->
rows_š_¬¿y
 || 
num_rows
 >…Œ->
maxacûss
 ||

768 
±r
->
mem_bufãr
 =ğ
NULL
)

769 
	`ERREXIT
(
cšfo
, 
JERR_BAD_VIRTUAL_ACCESS
);

772 ià(
¡¬t_row
 < 
±r
->
cur_¡¬t_row
 ||

773 
’d_row
 > 
±r
->
cur_¡¬t_row
+±r->
rows_š_mem
) {

774 ià(! 
±r
->
b_s_İ’
)

775 
	`ERREXIT
(
cšfo
, 
JERR_VIRTUAL_BUG
);

777 ià(
±r
->
dœty
) {

778 
	`do_§¼ay_io
(
cšfo
, 
±r
, 
TRUE
);

779 
±r
->
dœty
 = 
FALSE
;

788 ià(
¡¬t_row
 > 
±r
->
cur_¡¬t_row
) {

789 
±r
->
cur_¡¬t_row
 = 
¡¬t_row
;

792 
Éemp
;

794 
Éemp
 = (è
’d_row
 - (è
±r
->
rows_š_mem
;

795 ià(
Éemp
 < 0)

796 
Éemp
 = 0;

797 
±r
->
cur_¡¬t_row
 = (
JDIMENSION
è
Éemp
;

803 
	`do_§¼ay_io
(
cšfo
, 
±r
, 
FALSE
);

809 ià(
±r
->
fœ¡_undef_row
 < 
’d_row
) {

810 ià(
±r
->
fœ¡_undef_row
 < 
¡¬t_row
) {

811 ià(
wr™abË
)

812 
	`ERREXIT
(
cšfo
, 
JERR_BAD_VIRTUAL_ACCESS
);

813 
undef_row
 = 
¡¬t_row
;

815 
undef_row
 = 
±r
->
fœ¡_undef_row
;

817 ià(
wr™abË
)

818 
±r
->
fœ¡_undef_row
 = 
’d_row
;

819 ià(
±r
->
´e_z”o
) {

820 
size_t
 
by‹¥”row
 = (size_tè
±r
->
§m¶e¥”row
 * 
	`SIZEOF
(
JSAMPLE
);

821 
undef_row
 -ğ
±r
->
cur_¡¬t_row
;

822 
’d_row
 -ğ
±r
->
cur_¡¬t_row
;

823 
undef_row
 < 
’d_row
) {

824 
	`jz”o_çr
((
FAR
 *è
±r
->
mem_bufãr
[
undef_row
], 
by‹¥”row
);

825 
undef_row
++;

828 ià(! 
wr™abË
)

829 
	`ERREXIT
(
cšfo
, 
JERR_BAD_VIRTUAL_ACCESS
);

833 ià(
wr™abË
)

834 
±r
->
dœty
 = 
TRUE
;

836  
±r
->
mem_bufãr
 + (
¡¬t_row
 -…Œ->
cur_¡¬t_row
);

837 
	}
}

840 
	$METHODDEF
(
JBLOCKARRAY
)

841 
	$acûss_vœt_b¬¿y
 (
j_commÚ_±r
 
cšfo
, 
jvœt_b¬¿y_±r
 
±r
,

842 
JDIMENSION
 
¡¬t_row
, JDIMENSION 
num_rows
,

843 
boŞ—n
 
wr™abË
)

848 
JDIMENSION
 
’d_row
 = 
¡¬t_row
 + 
num_rows
;

849 
JDIMENSION
 
undef_row
;

852 ià(
’d_row
 > 
±r
->
rows_š_¬¿y
 || 
num_rows
 >…Œ->
maxacûss
 ||

853 
±r
->
mem_bufãr
 =ğ
NULL
)

854 
	`ERREXIT
(
cšfo
, 
JERR_BAD_VIRTUAL_ACCESS
);

857 ià(
¡¬t_row
 < 
±r
->
cur_¡¬t_row
 ||

858 
’d_row
 > 
±r
->
cur_¡¬t_row
+±r->
rows_š_mem
) {

859 ià(! 
±r
->
b_s_İ’
)

860 
	`ERREXIT
(
cšfo
, 
JERR_VIRTUAL_BUG
);

862 ià(
±r
->
dœty
) {

863 
	`do_b¬¿y_io
(
cšfo
, 
±r
, 
TRUE
);

864 
±r
->
dœty
 = 
FALSE
;

873 ià(
¡¬t_row
 > 
±r
->
cur_¡¬t_row
) {

874 
±r
->
cur_¡¬t_row
 = 
¡¬t_row
;

877 
Éemp
;

879 
Éemp
 = (è
’d_row
 - (è
±r
->
rows_š_mem
;

880 ià(
Éemp
 < 0)

881 
Éemp
 = 0;

882 
±r
->
cur_¡¬t_row
 = (
JDIMENSION
è
Éemp
;

888 
	`do_b¬¿y_io
(
cšfo
, 
±r
, 
FALSE
);

894 ià(
±r
->
fœ¡_undef_row
 < 
’d_row
) {

895 ià(
±r
->
fœ¡_undef_row
 < 
¡¬t_row
) {

896 ià(
wr™abË
)

897 
	`ERREXIT
(
cšfo
, 
JERR_BAD_VIRTUAL_ACCESS
);

898 
undef_row
 = 
¡¬t_row
;

900 
undef_row
 = 
±r
->
fœ¡_undef_row
;

902 ià(
wr™abË
)

903 
±r
->
fœ¡_undef_row
 = 
’d_row
;

904 ià(
±r
->
´e_z”o
) {

905 
size_t
 
by‹¥”row
 = (size_tè
±r
->
block¥”row
 * 
	`SIZEOF
(
JBLOCK
);

906 
undef_row
 -ğ
±r
->
cur_¡¬t_row
;

907 
’d_row
 -ğ
±r
->
cur_¡¬t_row
;

908 
undef_row
 < 
’d_row
) {

909 
	`jz”o_çr
((
FAR
 *è
±r
->
mem_bufãr
[
undef_row
], 
by‹¥”row
);

910 
undef_row
++;

913 ià(! 
wr™abË
)

914 
	`ERREXIT
(
cšfo
, 
JERR_BAD_VIRTUAL_ACCESS
);

918 ià(
wr™abË
)

919 
±r
->
dœty
 = 
TRUE
;

921  
±r
->
mem_bufãr
 + (
¡¬t_row
 -…Œ->
cur_¡¬t_row
);

922 
	}
}

929 
	$METHODDEF
()

930 
	$ä“_poŞ
 (
j_commÚ_±r
 
cšfo
, 
poŞ_id
)

932 
my_mem_±r
 
mem
 = (my_mem_±rè
cšfo
->mem;

933 
sm®l_poŞ_±r
 
shdr_±r
;

934 
Ïrge_poŞ_±r
 
lhdr_±r
;

935 
size_t
 
¥aû_ä“d
;

937 ià(
poŞ_id
 < 0 ||…oŞ_id >ğ
JPOOL_NUMPOOLS
)

938 
	`ERREXIT1
(
cšfo
, 
JERR_BAD_POOL_ID
, 
poŞ_id
);

940 #ifdeà
MEM_STATS


941 ià(
cšfo
->
”r
->
Œaû_Ëv–
 > 1)

942 
	`´št_mem_¡©s
(
cšfo
, 
poŞ_id
);

946 ià(
poŞ_id
 =ğ
JPOOL_IMAGE
) {

947 
jvœt_§¼ay_±r
 
¥Œ
;

948 
jvœt_b¬¿y_±r
 
b±r
;

950 
¥Œ
 = 
mem
->
vœt_§¼ay_li¡
; s±¸!ğ
NULL
; s±¸ğ¥Œ->
Ãxt
) {

951 ià(
¥Œ
->
b_s_İ’
) {

952 
¥Œ
->
b_s_İ’
 = 
FALSE
;

953 (*
¥Œ
->
b_s_šfo
.
şo£_backšg_¡Üe
è(
cšfo
, & sptr->b_s_info);

956 
mem
->
vœt_§¼ay_li¡
 = 
NULL
;

957 
b±r
 = 
mem
->
vœt_b¬¿y_li¡
; b±¸!ğ
NULL
; b±¸ğb±r->
Ãxt
) {

958 ià(
b±r
->
b_s_İ’
) {

959 
b±r
->
b_s_İ’
 = 
FALSE
;

960 (*
b±r
->
b_s_šfo
.
şo£_backšg_¡Üe
è(
cšfo
, & bptr->b_s_info);

963 
mem
->
vœt_b¬¿y_li¡
 = 
NULL
;

967 
lhdr_±r
 = 
mem
->
Ïrge_li¡
[
poŞ_id
];

968 
mem
->
Ïrge_li¡
[
poŞ_id
] = 
NULL
;

970 
lhdr_±r
 !ğ
NULL
) {

971 
Ïrge_poŞ_±r
 
Ãxt_lhdr_±r
 = 
lhdr_±r
->
hdr
.
Ãxt
;

972 
¥aû_ä“d
 = 
lhdr_±r
->
hdr
.
by‹s_u£d
 +

973 
lhdr_±r
->
hdr
.
by‹s_Ëá
 +

974 
	`SIZEOF
(
Ïrge_poŞ_hdr
);

975 
	`j³g_ä“_Ïrge
(
cšfo
, (
FAR
 *è
lhdr_±r
, 
¥aû_ä“d
);

976 
mem
->
tÙ®_¥aû_®loÿ‹d
 -ğ
¥aû_ä“d
;

977 
lhdr_±r
 = 
Ãxt_lhdr_±r
;

981 
shdr_±r
 = 
mem
->
sm®l_li¡
[
poŞ_id
];

982 
mem
->
sm®l_li¡
[
poŞ_id
] = 
NULL
;

984 
shdr_±r
 !ğ
NULL
) {

985 
sm®l_poŞ_±r
 
Ãxt_shdr_±r
 = 
shdr_±r
->
hdr
.
Ãxt
;

986 
¥aû_ä“d
 = 
shdr_±r
->
hdr
.
by‹s_u£d
 +

987 
shdr_±r
->
hdr
.
by‹s_Ëá
 +

988 
	`SIZEOF
(
sm®l_poŞ_hdr
);

989 
	`j³g_ä“_sm®l
(
cšfo
, (*è
shdr_±r
, 
¥aû_ä“d
);

990 
mem
->
tÙ®_¥aû_®loÿ‹d
 -ğ
¥aû_ä“d
;

991 
shdr_±r
 = 
Ãxt_shdr_±r
;

993 
	}
}

1001 
	$METHODDEF
()

1002 
	$£lf_de¡ruù
 (
j_commÚ_±r
 
cšfo
)

1004 
poŞ
;

1010 
poŞ
 = 
JPOOL_NUMPOOLS
-1;…oŞ >ğ
JPOOL_PERMANENT
;…ool--) {

1011 
	`ä“_poŞ
(
cšfo
, 
poŞ
);

1015 
	`j³g_ä“_sm®l
(
cšfo
, (*ècšfo->
mem
, 
	`SIZEOF
(
my_memÜy_mgr
));

1016 
cšfo
->
mem
 = 
NULL
;

1018 
	`j³g_mem_‹rm
(
cšfo
);

1019 
	}
}

1027 
	$GLOBAL
()

1028 
	$jš™_memÜy_mgr
 (
j_commÚ_±r
 
cšfo
)

1030 
my_mem_±r
 
mem
;

1031 
max_to_u£
;

1032 
poŞ
;

1033 
size_t
 
‹¡_mac
;

1035 
cšfo
->
mem
 = 
NULL
;

1044 ià((
	`SIZEOF
(
ALIGN_TYPE
) & (SIZEOF(ALIGN_TYPE)-1)) != 0)

1045 
	`ERREXIT
(
cšfo
, 
JERR_BAD_ALIGN_TYPE
);

1051 
‹¡_mac
 = (
size_t
è
MAX_ALLOC_CHUNK
;

1052 ià((è
‹¡_mac
 !ğ
MAX_ALLOC_CHUNK
 ||

1053 (
MAX_ALLOC_CHUNK
 % 
	`SIZEOF
(
ALIGN_TYPE
)) != 0)

1054 
	`ERREXIT
(
cšfo
, 
JERR_BAD_ALLOC_CHUNK
);

1056 
max_to_u£
 = 
	`j³g_mem_š™
(
cšfo
);

1059 
mem
 = (
my_mem_±r
è
	`j³g_g‘_sm®l
(
cšfo
, 
	`SIZEOF
(
my_memÜy_mgr
));

1061 ià(
mem
 =ğ
NULL
) {

1062 
	`j³g_mem_‹rm
(
cšfo
);

1063 
	`ERREXIT1
(
cšfo
, 
JERR_OUT_OF_MEMORY
, 0);

1067 
mem
->
pub
.
®loc_sm®l
 =‡lloc_small;

1068 
mem
->
pub
.
®loc_Ïrge
 =‡lloc_large;

1069 
mem
->
pub
.
®loc_§¼ay
 =‡lloc_sarray;

1070 
mem
->
pub
.
®loc_b¬¿y
 =‡lloc_barray;

1071 
mem
->
pub
.
»que¡_vœt_§¼ay
 =„equest_virt_sarray;

1072 
mem
->
pub
.
»que¡_vœt_b¬¿y
 =„equest_virt_barray;

1073 
mem
->
pub
.
»®ize_vœt_¬¿ys
 =„ealize_virt_arrays;

1074 
mem
->
pub
.
acûss_vœt_§¼ay
 =‡ccess_virt_sarray;

1075 
mem
->
pub
.
acûss_vœt_b¬¿y
 =‡ccess_virt_barray;

1076 
mem
->
pub
.
ä“_poŞ
 = free_pool;

1077 
mem
->
pub
.
£lf_de¡ruù
 = self_destruct;

1080 
mem
->
pub
.
max_®loc_chunk
 = 
MAX_ALLOC_CHUNK
;

1083 
mem
->
pub
.
max_memÜy_to_u£
 = 
max_to_u£
;

1085 
poŞ
 = 
JPOOL_NUMPOOLS
-1;…oŞ >ğ
JPOOL_PERMANENT
;…ool--) {

1086 
mem
->
sm®l_li¡
[
poŞ
] = 
NULL
;

1087 
mem
->
Ïrge_li¡
[
poŞ
] = 
NULL
;

1089 
mem
->
vœt_§¼ay_li¡
 = 
NULL
;

1090 
mem
->
vœt_b¬¿y_li¡
 = 
NULL
;

1092 
mem
->
tÙ®_¥aû_®loÿ‹d
 = 
	`SIZEOF
(
my_memÜy_mgr
);

1095 
cšfo
->
mem
 = & mem->
pub
;

1103 #iâdeà
NO_GETENV


1104 { * 
mem’v
;

1106 ià((
mem’v
 = 
	`g‘’v
("JPEGMEM")è!ğ
NULL
) {

1107 
ch
 = 'x';

1109 ià(
	`ssÿnf
(
mem’v
, "%ld%c", &
max_to_u£
, &
ch
) > 0) {

1110 ià(
ch
 == 'm' || ch == 'M')

1111 
max_to_u£
 *= 1000L;

1112 
mem
->
pub
.
max_memÜy_to_u£
 = 
max_to_u£
 * 1000L;

1118 
	}
}

	@jmemname.c

15 
	#JPEG_INTERNALS


	)

16 
	~"jšşude.h
"

17 
	~"j³glib.h
"

18 
	~"jmemsys.h
"

20 #iâdeà
HAVE_STDLIB_H


21 * 
m®loc
 
JPP
((
size_t
 
size
));

22 
ä“
 
JPP
((*
±r
));

25 #iâdeà
SEEK_SET


26 
	#SEEK_SET
 0

	)

29 #ifdeà
DONT_USE_B_MODE


30 
	#READ_BINARY
 "r"

	)

31 
	#RW_BINARY
 "w+"

	)

33 #ifdeà
VMS


34 
	#READ_BINARY
 "rb", "ùx=¡m"

	)

35 
	#RW_BINARY
 "w+b", "ùx=¡m"

	)

37 
	#READ_BINARY
 "rb"

	)

38 
	#RW_BINARY
 "w+b"

	)

69 #iâdeà
TEMP_DIRECTORY


70 
	#TEMP_DIRECTORY
 "/u¤/tmp/"

	)

73 
	gÃxt_fe_num
;

75 #ifdeà
NO_MKTEMP


77 #iâdeà
TEMP_FILE_NAME


78 
	#TEMP_FILE_NAME
 "%sJPG%03d.TMP"

	)

81 #iâdeà
NO_ERRNO_H


82 
	~<”ºo.h
>

89 #iâdeà
”ºo


90 
”ºo
;

94 
	$LOCAL
()

95 
	$£Ëù_fe_Çme
 (* 
âame
)

97 
FILE
 * 
tfe
;

101 
Ãxt_fe_num
++;

102 
	`¥rštf
(
âame
, 
TEMP_FILE_NAME
, 
TEMP_DIRECTORY
, 
Ãxt_fe_num
);

103 ià((
tfe
 = 
	`fİ’
(
âame
, 
READ_BINARY
)è=ğ
NULL
) {

108 #ifdeà
ENOENT


109 ià(
”ºo
 !ğ
ENOENT
)

114 
	`fşo£
(
tfe
);

116 
	}
}

121 #iâdeà
TEMP_FILE_NAME


122 
	#TEMP_FILE_NAME
 "%sJPG%dXXXXXX"

	)

125 
	$LOCAL
()

126 
	$£Ëù_fe_Çme
 (* 
âame
)

128 
Ãxt_fe_num
++;

129 
	`¥rštf
(
âame
, 
TEMP_FILE_NAME
, 
TEMP_DIRECTORY
, 
Ãxt_fe_num
);

130 
	`mk‹mp
(
âame
);

132 
	}
}

142 
	$GLOBAL
(*)

143 
	$j³g_g‘_sm®l
 (
j_commÚ_±r
 
cšfo
, 
size_t
 
sizeofobjeù
)

145  (*è
	`m®loc
(
sizeofobjeù
);

146 
	}
}

148 
	$GLOBAL
()

149 
	$j³g_ä“_sm®l
 (
j_commÚ_±r
 
cšfo
, * 
objeù
, 
size_t
 
sizeofobjeù
)

151 
	`ä“
(
objeù
);

152 
	}
}

162 
	$GLOBAL
(
FAR
 *)

163 
	$j³g_g‘_Ïrge
 (
j_commÚ_±r
 
cšfo
, 
size_t
 
sizeofobjeù
)

165  (
FAR
 *è
	`m®loc
(
sizeofobjeù
);

166 
	}
}

168 
	$GLOBAL
()

169 
	$j³g_ä“_Ïrge
 (
j_commÚ_±r
 
cšfo
, 
FAR
 * 
objeù
, 
size_t
 
sizeofobjeù
)

171 
	`ä“
(
objeù
);

172 
	}
}

183 #iâdeà
DEFAULT_MAX_MEM


184 
	#DEFAULT_MAX_MEM
 1000000L

	)

187 
	$GLOBAL
()

188 
	$j³g_mem_avaabË
 (
j_commÚ_±r
 
cšfo
, 
mš_by‹s_Ãeded
,

189 
max_by‹s_Ãeded
, 
®»ady_®loÿ‹d
)

191  
cšfo
->
mem
->
max_memÜy_to_u£
 - 
®»ady_®loÿ‹d
;

192 
	}
}

203 
	$METHODDEF
()

204 
	$»ad_backšg_¡Üe
 (
j_commÚ_±r
 
cšfo
, 
backšg_¡Üe_±r
 
šfo
,

205 
FAR
 * 
bufãr_add»ss
,

206 
fe_off£t
, 
by‹_couÁ
)

208 ià(
	`f£ek
(
šfo
->
‹mp_fe
, 
fe_off£t
, 
SEEK_SET
))

209 
	`ERREXIT
(
cšfo
, 
JERR_TFILE_SEEK
);

210 ià(
	`JFREAD
(
šfo
->
‹mp_fe
, 
bufãr_add»ss
, 
by‹_couÁ
)

211 !ğ(
size_t
è
by‹_couÁ
)

212 
	`ERREXIT
(
cšfo
, 
JERR_TFILE_READ
);

213 
	}
}

216 
	$METHODDEF
()

217 
	$wr™e_backšg_¡Üe
 (
j_commÚ_±r
 
cšfo
, 
backšg_¡Üe_±r
 
šfo
,

218 
FAR
 * 
bufãr_add»ss
,

219 
fe_off£t
, 
by‹_couÁ
)

221 ià(
	`f£ek
(
šfo
->
‹mp_fe
, 
fe_off£t
, 
SEEK_SET
))

222 
	`ERREXIT
(
cšfo
, 
JERR_TFILE_SEEK
);

223 ià(
	`JFWRITE
(
šfo
->
‹mp_fe
, 
bufãr_add»ss
, 
by‹_couÁ
)

224 !ğ(
size_t
è
by‹_couÁ
)

225 
	`ERREXIT
(
cšfo
, 
JERR_TFILE_WRITE
);

226 
	}
}

229 
	$METHODDEF
()

230 
	$şo£_backšg_¡Üe
 (
j_commÚ_±r
 
cšfo
, 
backšg_¡Üe_±r
 
šfo
)

232 
	`fşo£
(
šfo
->
‹mp_fe
);

233 
	`uÆšk
(
šfo
->
‹mp_Çme
);

238 
	`TRACEMSS
(
cšfo
, 1, 
JTRC_TFILE_CLOSE
, 
šfo
->
‹mp_Çme
);

239 
	}
}

246 
	$GLOBAL
()

247 
	$j³g_İ’_backšg_¡Üe
 (
j_commÚ_±r
 
cšfo
, 
backšg_¡Üe_±r
 
šfo
,

248 
tÙ®_by‹s_Ãeded
)

250 
	`£Ëù_fe_Çme
(
šfo
->
‹mp_Çme
);

251 ià((
šfo
->
‹mp_fe
 = 
	`fİ’
(šfo->
‹mp_Çme
, 
RW_BINARY
)è=ğ
NULL
)

252 
	`ERREXITS
(
cšfo
, 
JERR_TFILE_CREATE
, 
šfo
->
‹mp_Çme
);

253 
šfo
->
»ad_backšg_¡Üe
 =„ead_backing_store;

254 
šfo
->
wr™e_backšg_¡Üe
 = write_backing_store;

255 
šfo
->
şo£_backšg_¡Üe
 = close_backing_store;

256 
	`TRACEMSS
(
cšfo
, 1, 
JTRC_TFILE_OPEN
, 
šfo
->
‹mp_Çme
);

257 
	}
}

265 
	$GLOBAL
()

266 
	$j³g_mem_š™
 (
j_commÚ_±r
 
cšfo
)

268 
Ãxt_fe_num
 = 0;

269  
DEFAULT_MAX_MEM
;

270 
	}
}

272 
	$GLOBAL
()

273 
	$j³g_mem_‹rm
 (
j_commÚ_±r
 
cšfo
)

276 
	}
}

	@jmemnobs.c

18 
	#JPEG_INTERNALS


	)

19 
	~"jšşude.h
"

20 
	~"j³glib.h
"

21 
	~"jmemsys.h
"

23 #iâdeà
HAVE_STDLIB_H


24 * 
m®loc
 
JPP
((
size_t
 
size
));

25 
ä“
 
JPP
((*
±r
));

34 
	$GLOBAL
(*)

35 
	$j³g_g‘_sm®l
 (
j_commÚ_±r
 
cšfo
, 
size_t
 
sizeofobjeù
)

37  (*è
	`m®loc
(
sizeofobjeù
);

38 
	}
}

40 
	$GLOBAL
()

41 
	$j³g_ä“_sm®l
 (
j_commÚ_±r
 
cšfo
, * 
objeù
, 
size_t
 
sizeofobjeù
)

43 
	`ä“
(
objeù
);

44 
	}
}

54 
	$GLOBAL
(
FAR
 *)

55 
	$j³g_g‘_Ïrge
 (
j_commÚ_±r
 
cšfo
, 
size_t
 
sizeofobjeù
)

57  (
FAR
 *è
	`m®loc
(
sizeofobjeù
);

58 
	}
}

60 
	$GLOBAL
()

61 
	$j³g_ä“_Ïrge
 (
j_commÚ_±r
 
cšfo
, 
FAR
 * 
objeù
, 
size_t
 
sizeofobjeù
)

63 
	`ä“
(
objeù
);

64 
	}
}

72 
	$GLOBAL
()

73 
	$j³g_mem_avaabË
 (
j_commÚ_±r
 
cšfo
, 
mš_by‹s_Ãeded
,

74 
max_by‹s_Ãeded
, 
®»ady_®loÿ‹d
)

76  
max_by‹s_Ãeded
;

77 
	}
}

86 
	$GLOBAL
()

87 
	$j³g_İ’_backšg_¡Üe
 (
j_commÚ_±r
 
cšfo
, 
backšg_¡Üe_±r
 
šfo
,

88 
tÙ®_by‹s_Ãeded
)

90 
	`ERREXIT
(
cšfo
, 
JERR_NO_BACKING_STORE
);

91 
	}
}

99 
	$GLOBAL
()

100 
	$j³g_mem_š™
 (
j_commÚ_±r
 
cšfo
)

103 
	}
}

105 
	$GLOBAL
()

106 
	$j³g_mem_‹rm
 (
j_commÚ_±r
 
cšfo
)

109 
	}
}

	@jmemsys.h

24 #ifdeà
NEED_SHORT_EXTERNAL_NAMES


25 
	#j³g_g‘_sm®l
 
jG‘Sm®l


	)

26 
	#j³g_ä“_sm®l
 
jF»eSm®l


	)

27 
	#j³g_g‘_Ïrge
 
jG‘L¬ge


	)

28 
	#j³g_ä“_Ïrge
 
jF»eL¬ge


	)

29 
	#j³g_mem_avaabË
 
jMemAva


	)

30 
	#j³g_İ’_backšg_¡Üe
 
jO³nBackStÜe


	)

31 
	#j³g_mem_š™
 
jMemIn™


	)

32 
	#j³g_mem_‹rm
 
jMemT”m


	)

47 
	$EXTERN
(*è
j³g_g‘_sm®l
 
	`JPP
((
j_commÚ_±r
 
cšfo
, 
size_t
 
sizeofobjeù
));

48 
	$EXTERN
(è
j³g_ä“_sm®l
 
	`JPP
((
j_commÚ_±r
 
cšfo
, * 
objeù
,

49 
size_t
 
sizeofobjeù
));

60 
	$EXTERN
(
FAR
 *è
j³g_g‘_Ïrge
 
	`JPP
((
j_commÚ_±r
 
cšfo
,

61 
size_t
 
sizeofobjeù
));

62 
	$EXTERN
(è
j³g_ä“_Ïrge
 
	`JPP
((
j_commÚ_±r
 
cšfo
, 
FAR
 * 
objeù
,

63 
size_t
 
sizeofobjeù
));

77 #iâdeà
MAX_ALLOC_CHUNK


78 
	#MAX_ALLOC_CHUNK
 1000000000L

	)

103 
	$EXTERN
(è
j³g_mem_avaabË
 
	`JPP
((
j_commÚ_±r
 
cšfo
,

104 
mš_by‹s_Ãeded
,

105 
max_by‹s_Ãeded
,

106 
®»ady_®loÿ‹d
));

116 
	#TEMP_NAME_LENGTH
 64

	)

119 #ifdeà
USE_MSDOS_MEMMGR


121 
	tXMSH
;

122 
	tEMSH
;

125 
fe_hªdË
;

126 
XMSH
 
xms_hªdË
;

127 
EMSH
 
ems_hªdË
;

128 } 
	thªdË_uniÚ
;

132 #ifdeà
USE_MAC_MEMMGR


133 
	~<Fes.h
>

137 
backšg_¡Üe_¡ruù
 * 
	tbackšg_¡Üe_±r
;

139 
	sbackšg_¡Üe_¡ruù
 {

141 
	`JMETHOD
(, 
»ad_backšg_¡Üe
, (
j_commÚ_±r
 
cšfo
,

142 
backšg_¡Üe_±r
 
šfo
,

143 
FAR
 * 
bufãr_add»ss
,

144 
fe_off£t
, 
by‹_couÁ
));

145 
	`JMETHOD
(, 
wr™e_backšg_¡Üe
, (
j_commÚ_±r
 
cšfo
,

146 
backšg_¡Üe_±r
 
šfo
,

147 
FAR
 * 
bufãr_add»ss
,

148 
fe_off£t
, 
by‹_couÁ
));

149 
	`JMETHOD
(, 
şo£_backšg_¡Üe
, (
j_commÚ_±r
 
cšfo
,

150 
backšg_¡Üe_±r
 
šfo
));

153 #ifdeà
USE_MSDOS_MEMMGR


155 
hªdË_uniÚ
 
hªdË
;

156 
‹mp_Çme
[
TEMP_NAME_LENGTH
];

158 #ifdeà
USE_MAC_MEMMGR


160 
‹mp_fe
;

161 
FSS³c
 
‹mpS³c
;

162 
‹mp_Çme
[
TEMP_NAME_LENGTH
];

165 
FILE
 * 
‹mp_fe
;

166 
‹mp_Çme
[
TEMP_NAME_LENGTH
];

169 } 
	tbackšg_¡Üe_šfo
;

180 
	$EXTERN
(è
j³g_İ’_backšg_¡Üe
 
	`JPP
((
j_commÚ_±r
 
cšfo
,

181 
backšg_¡Üe_±r
 
šfo
,

182 
tÙ®_by‹s_Ãeded
));

197 
	$EXTERN
(è
j³g_mem_š™
 
	`JPP
((
j_commÚ_±r
 
cšfo
));

198 
	$EXTERN
(è
j³g_mem_‹rm
 
	`JPP
((
j_commÚ_±r
 
cšfo
));

	@jmorecfg.h

23 
	#BITS_IN_JSAMPLE
 8

	)

35 
	#MAX_COMPONENTS
 10

	)

52 #ià
BITS_IN_JSAMPLE
 == 8

57 #ifdeà
HAVE_UNSIGNED_CHAR


59 
	tJSAMPLE
;

60 
	#GETJSAMPLE
(
v®ue
è((è(v®ue))

	)

64 
	tJSAMPLE
;

65 #ifdeà
CHAR_IS_UNSIGNED


66 
	#GETJSAMPLE
(
v®ue
è((è(v®ue))

	)

68 
	#GETJSAMPLE
(
v®ue
è((è(v®ueè& 0xFF)

	)

73 
	#MAXJSAMPLE
 255

	)

74 
	#CENTERJSAMPLE
 128

	)

79 #ià
BITS_IN_JSAMPLE
 == 12

84 
	tJSAMPLE
;

85 
	#GETJSAMPLE
(
v®ue
è((è(v®ue))

	)

87 
	#MAXJSAMPLE
 4095

	)

88 
	#CENTERJSAMPLE
 2048

	)

99 
	tJCOEF
;

108 #ifdeà
HAVE_UNSIGNED_CHAR


110 
	tJOCTET
;

111 
	#GETJOCTET
(
v®ue
è(v®ue)

	)

115 
	tJOCTET
;

116 #ifdeà
CHAR_IS_UNSIGNED


117 
	#GETJOCTET
(
v®ue
è(v®ue)

	)

119 
	#GETJOCTET
(
v®ue
è((v®ueè& 0xFF)

	)

134 #ifdeà
HAVE_UNSIGNED_CHAR


135 
	tUINT8
;

137 #ifdeà
CHAR_IS_UNSIGNED


138 
	tUINT8
;

140 
	tUINT8
;

146 #ifdeà
HAVE_UNSIGNED_SHORT


147 
	tUINT16
;

149 
	tUINT16
;

154 #iâdeà
XMD_H


155 
	tINT16
;

160 #iâdeà
XMD_H


161 
	tINT32
;

171 
	tJDIMENSION
;

173 
	#JPEG_MAX_DIMENSION
 65500L

	)

184 
	#METHODDEF
(
ty³
è
	)
type

186 
	#LOCAL
(
ty³
è
	)
type

188 
	#GLOBAL
(
ty³
è
	)
type

190 
	#EXTERN
(
ty³
è
	)
type

199 #ifdeà
HAVE_PROTOTYPES


200 
	#JMETHOD
(
ty³
,
m‘hodÇme
,
¬gli¡
è
	`ty³
 (*m‘hodÇmeè
	)
arglist

202 
	#JMETHOD
(
ty³
,
m‘hodÇme
,
¬gli¡
è
	`ty³
 (*m‘hodÇmeè()

	)

212 #ifdeà
NEED_FAR_POINTERS


213 
	#FAR
 
çr


	)

215 
	#FAR


	)

226 #iâdeà
HAVE_BOOLEAN


227 
	tboŞ—n
;

229 #iâdeà
FALSE


230 
	#FALSE
 0

	)

232 #iâdeà
TRUE


233 
	#TRUE
 1

	)

244 #ifdeà
JPEG_INTERNALS


245 
	#JPEG_INTERNAL_OPTIONS


	)

248 #ifdeà
JPEG_INTERNAL_OPTIONS


263 
	#DCT_ISLOW_SUPPORTED


	)

264 
	#DCT_IFAST_SUPPORTED


	)

265 
	#DCT_FLOAT_SUPPORTED


	)

269 #undeà
C_ARITH_CODING_SUPPORTED


270 
	#C_MULTISCAN_FILES_SUPPORTED


	)

271 
	#C_PROGRESSIVE_SUPPORTED


	)

272 
	#ENTROPY_OPT_SUPPORTED


	)

281 
	#INPUT_SMOOTHING_SUPPORTED


	)

285 #undeà
D_ARITH_CODING_SUPPORTED


286 
	#D_MULTISCAN_FILES_SUPPORTED


	)

287 
	#D_PROGRESSIVE_SUPPORTED


	)

288 
	#SAVE_MARKERS_SUPPORTED


	)

289 
	#BLOCK_SMOOTHING_SUPPORTED


	)

290 
	#IDCT_SCALING_SUPPORTED


	)

291 #undeà
UPSAMPLE_SCALING_SUPPORTED


292 
	#UPSAMPLE_MERGING_SUPPORTED


	)

293 
	#QUANT_1PASS_SUPPORTED


	)

294 
	#QUANT_2PASS_SUPPORTED


	)

314 
	#RGB_RED
 0

	)

315 
	#RGB_GREEN
 1

	)

316 
	#RGB_BLUE
 2

	)

317 
	#RGB_PIXELSIZE
 3

	)

327 #iâdeà
INLINE


328 #ifdeà
__GNUC__


329 
	#INLINE
 
__šlše__


	)

331 #iâdeà
INLINE


332 
	#INLINE


	)

342 #iâdeà
MULTIPLIER


343 
	#MULTIPLIER
 

	)

355 #iâdeà
FAST_FLOAT


356 #ifdeà
HAVE_PROTOTYPES


357 
	#FAST_FLOAT
 

	)

359 
	#FAST_FLOAT
 

	)

	@jpegint.h

17 
	mJBUF_PASS_THRU
,

19 
	mJBUF_SAVE_SOURCE
,

20 
	mJBUF_CRANK_DEST
,

21 
	mJBUF_SAVE_AND_PASS


22 } 
	tJ_BUF_MODE
;

25 
	#CSTATE_START
 100

	)

26 
	#CSTATE_SCANNING
 101

	)

27 
	#CSTATE_RAW_OK
 102

	)

28 
	#CSTATE_WRCOEFS
 103

	)

29 
	#DSTATE_START
 200

	)

30 
	#DSTATE_INHEADER
 201

	)

31 
	#DSTATE_READY
 202

	)

32 
	#DSTATE_PRELOAD
 203

	)

33 
	#DSTATE_PRESCAN
 204

	)

34 
	#DSTATE_SCANNING
 205

	)

35 
	#DSTATE_RAW_OK
 206

	)

36 
	#DSTATE_BUFIMAGE
 207

	)

37 
	#DSTATE_BUFPOST
 208

	)

38 
	#DSTATE_RDCOEFS
 209

	)

39 
	#DSTATE_STOPPING
 210

	)

45 
	sj³g_comp_ma¡”
 {

46 
JMETHOD
(, 
´•¬e_fÜ_·ss
, (
j_com´ess_±r
 
cšfo
));

47 
JMETHOD
(, 
·ss_¡¬tup
, (
j_com´ess_±r
 
cšfo
));

48 
JMETHOD
(, 
fšish_·ss
, (
j_com´ess_±r
 
cšfo
));

51 
boŞ—n
 
	mÿÎ_·ss_¡¬tup
;

52 
boŞ—n
 
	mis_Ï¡_·ss
;

56 
	sj³g_c_maš_cÚŒŞËr
 {

57 
JMETHOD
(, 
¡¬t_·ss
, (
j_com´ess_±r
 
cšfo
, 
J_BUF_MODE
 
·ss_mode
));

58 
JMETHOD
(, 
´oûss_d©a
, (
j_com´ess_±r
 
cšfo
,

59 
JSAMPARRAY
 
šput_buf
, 
JDIMENSION
 *
š_row_ùr
,

60 
JDIMENSION
 
š_rows_ava
));

64 
	sj³g_c_´•_cÚŒŞËr
 {

65 
JMETHOD
(, 
¡¬t_·ss
, (
j_com´ess_±r
 
cšfo
, 
J_BUF_MODE
 
·ss_mode
));

66 
JMETHOD
(, 
´e_´oûss_d©a
, (
j_com´ess_±r
 
cšfo
,

67 
JSAMPARRAY
 
šput_buf
,

68 
JDIMENSION
 *
š_row_ùr
,

69 
JDIMENSION
 
š_rows_ava
,

70 
JSAMPIMAGE
 
ouut_buf
,

71 
JDIMENSION
 *
out_row_group_ùr
,

72 
JDIMENSION
 
out_row_groups_ava
));

76 
	sj³g_c_cÛf_cÚŒŞËr
 {

77 
JMETHOD
(, 
¡¬t_·ss
, (
j_com´ess_±r
 
cšfo
, 
J_BUF_MODE
 
·ss_mode
));

78 
JMETHOD
(
boŞ—n
, 
com´ess_d©a
, (
j_com´ess_±r
 
cšfo
,

79 
JSAMPIMAGE
 
šput_buf
));

83 
	sj³g_cŞÜ_cÚv”‹r
 {

84 
JMETHOD
(, 
¡¬t_·ss
, (
j_com´ess_±r
 
cšfo
));

85 
JMETHOD
(, 
cŞÜ_cÚv”t
, (
j_com´ess_±r
 
cšfo
,

86 
JSAMPARRAY
 
šput_buf
, 
JSAMPIMAGE
 
ouut_buf
,

87 
JDIMENSION
 
ouut_row
, 
num_rows
));

91 
	sj³g_down§m¶”
 {

92 
JMETHOD
(, 
¡¬t_·ss
, (
j_com´ess_±r
 
cšfo
));

93 
JMETHOD
(, 
down§m¶e
, (
j_com´ess_±r
 
cšfo
,

94 
JSAMPIMAGE
 
šput_buf
, 
JDIMENSION
 
š_row_šdex
,

95 
JSAMPIMAGE
 
ouut_buf
,

96 
JDIMENSION
 
out_row_group_šdex
));

98 
boŞ—n
 
	mÃed_cÚ‹xt_rows
;

102 
	sj³g_fÜw¬d_dù
 {

103 
JMETHOD
(, 
¡¬t_·ss
, (
j_com´ess_±r
 
cšfo
));

105 
JMETHOD
(, 
fÜw¬d_DCT
, (
j_com´ess_±r
 
cšfo
,

106 
j³g_compÚ’t_šfo
 * 
comµŒ
,

107 
JSAMPARRAY
 
§m¶e_d©a
, 
JBLOCKROW
 
cÛf_blocks
,

108 
JDIMENSION
 
¡¬t_row
, JDIMENSION 
¡¬t_cŞ
,

109 
JDIMENSION
 
num_blocks
));

113 
	sj³g_’Œİy_’cod”
 {

114 
JMETHOD
(, 
¡¬t_·ss
, (
j_com´ess_±r
 
cšfo
, 
boŞ—n
 
g©h”_¡©i¡ics
));

115 
JMETHOD
(
boŞ—n
, 
’code_mcu
, (
j_com´ess_±r
 
cšfo
, 
JBLOCKROW
 *
MCU_d©a
));

116 
JMETHOD
(, 
fšish_·ss
, (
j_com´ess_±r
 
cšfo
));

120 
	sj³g_m¬k”_wr™”
 {

121 
JMETHOD
(, 
wr™e_fe_h—d”
, (
j_com´ess_±r
 
cšfo
));

122 
JMETHOD
(, 
wr™e_äame_h—d”
, (
j_com´ess_±r
 
cšfo
));

123 
JMETHOD
(, 
wr™e_sÿn_h—d”
, (
j_com´ess_±r
 
cšfo
));

124 
JMETHOD
(, 
wr™e_fe_Œa”
, (
j_com´ess_±r
 
cšfo
));

125 
JMETHOD
(, 
wr™e_bËs_Úly
, (
j_com´ess_±r
 
cšfo
));

128 
JMETHOD
(, 
wr™e_m¬k”_h—d”
, (
j_com´ess_±r
 
cšfo
, 
m¬k”
,

129 
d©®’
));

130 
JMETHOD
(, 
wr™e_m¬k”_by‹
, (
j_com´ess_±r
 
cšfo
, 
v®
));

137 
	sj³g_decomp_ma¡”
 {

138 
JMETHOD
(, 
´•¬e_fÜ_ouut_·ss
, (
j_decom´ess_±r
 
cšfo
));

139 
JMETHOD
(, 
fšish_ouut_·ss
, (
j_decom´ess_±r
 
cšfo
));

142 
boŞ—n
 
	mis_dummy_·ss
;

146 
	sj³g_šput_cÚŒŞËr
 {

147 
JMETHOD
(, 
cÚsume_šput
, (
j_decom´ess_±r
 
cšfo
));

148 
JMETHOD
(, 
»£t_šput_cÚŒŞËr
, (
j_decom´ess_±r
 
cšfo
));

149 
JMETHOD
(, 
¡¬t_šput_·ss
, (
j_decom´ess_±r
 
cšfo
));

150 
JMETHOD
(, 
fšish_šput_·ss
, (
j_decom´ess_±r
 
cšfo
));

153 
boŞ—n
 
	mhas_muÉË_sÿns
;

154 
boŞ—n
 
	meoi_»ached
;

158 
	sj³g_d_maš_cÚŒŞËr
 {

159 
JMETHOD
(, 
¡¬t_·ss
, (
j_decom´ess_±r
 
cšfo
, 
J_BUF_MODE
 
·ss_mode
));

160 
JMETHOD
(, 
´oûss_d©a
, (
j_decom´ess_±r
 
cšfo
,

161 
JSAMPARRAY
 
ouut_buf
, 
JDIMENSION
 *
out_row_ùr
,

162 
JDIMENSION
 
out_rows_ava
));

166 
	sj³g_d_cÛf_cÚŒŞËr
 {

167 
JMETHOD
(, 
¡¬t_šput_·ss
, (
j_decom´ess_±r
 
cšfo
));

168 
JMETHOD
(, 
cÚsume_d©a
, (
j_decom´ess_±r
 
cšfo
));

169 
JMETHOD
(, 
¡¬t_ouut_·ss
, (
j_decom´ess_±r
 
cšfo
));

170 
JMETHOD
(, 
decom´ess_d©a
, (
j_decom´ess_±r
 
cšfo
,

171 
JSAMPIMAGE
 
ouut_buf
));

173 
jvœt_b¬¿y_±r
 *
	mcÛf_¬¿ys
;

177 
	sj³g_d_po¡_cÚŒŞËr
 {

178 
JMETHOD
(, 
¡¬t_·ss
, (
j_decom´ess_±r
 
cšfo
, 
J_BUF_MODE
 
·ss_mode
));

179 
JMETHOD
(, 
po¡_´oûss_d©a
, (
j_decom´ess_±r
 
cšfo
,

180 
JSAMPIMAGE
 
šput_buf
,

181 
JDIMENSION
 *
š_row_group_ùr
,

182 
JDIMENSION
 
š_row_groups_ava
,

183 
JSAMPARRAY
 
ouut_buf
,

184 
JDIMENSION
 *
out_row_ùr
,

185 
JDIMENSION
 
out_rows_ava
));

189 
	sj³g_m¬k”_»ad”
 {

190 
JMETHOD
(, 
»£t_m¬k”_»ad”
, (
j_decom´ess_±r
 
cšfo
));

195 
JMETHOD
(, 
»ad_m¬k”s
, (
j_decom´ess_±r
 
cšfo
));

197 
j³g_m¬k”_·r£r_m‘hod
 
	m»ad_»¡¬t_m¬k”
;

202 
boŞ—n
 
	m§w_SOI
;

203 
boŞ—n
 
	m§w_SOF
;

204 
	mÃxt_»¡¬t_num
;

205 
	mdisÿrded_by‹s
;

209 
	sj³g_’Œİy_decod”
 {

210 
JMETHOD
(, 
¡¬t_·ss
, (
j_decom´ess_±r
 
cšfo
));

211 
JMETHOD
(
boŞ—n
, 
decode_mcu
, (
j_decom´ess_±r
 
cšfo
,

212 
JBLOCKROW
 *
MCU_d©a
));

216 
boŞ—n
 
	mšsuffic›Á_d©a
;

220 
JMETHOD
(, 
	tšv”£_DCT_m‘hod_±r
,

221 (
	tj_decom´ess_±r
 
	tcšfo
, 
	tj³g_compÚ’t_šfo
 * 
	tcomµŒ
,

222 
	tJCOEFPTR
 
	tcÛf_block
,

223 
	tJSAMPARRAY
 
	touut_buf
, 
	tJDIMENSION
 
	touut_cŞ
));

225 
	sj³g_šv”£_dù
 {

226 
JMETHOD
(, 
¡¬t_·ss
, (
j_decom´ess_±r
 
cšfo
));

228 
šv”£_DCT_m‘hod_±r
 
	mšv”£_DCT
[
MAX_COMPONENTS
];

232 
	sj³g_up§m¶”
 {

233 
JMETHOD
(, 
¡¬t_·ss
, (
j_decom´ess_±r
 
cšfo
));

234 
JMETHOD
(, 
up§m¶e
, (
j_decom´ess_±r
 
cšfo
,

235 
JSAMPIMAGE
 
šput_buf
,

236 
JDIMENSION
 *
š_row_group_ùr
,

237 
JDIMENSION
 
š_row_groups_ava
,

238 
JSAMPARRAY
 
ouut_buf
,

239 
JDIMENSION
 *
out_row_ùr
,

240 
JDIMENSION
 
out_rows_ava
));

242 
boŞ—n
 
	mÃed_cÚ‹xt_rows
;

246 
	sj³g_cŞÜ_decÚv”‹r
 {

247 
JMETHOD
(, 
¡¬t_·ss
, (
j_decom´ess_±r
 
cšfo
));

248 
JMETHOD
(, 
cŞÜ_cÚv”t
, (
j_decom´ess_±r
 
cšfo
,

249 
JSAMPIMAGE
 
šput_buf
, 
JDIMENSION
 
šput_row
,

250 
JSAMPARRAY
 
ouut_buf
, 
num_rows
));

254 
	sj³g_cŞÜ_quªtiz”
 {

255 
JMETHOD
(, 
¡¬t_·ss
, (
j_decom´ess_±r
 
cšfo
, 
boŞ—n
 
is_´e_sÿn
));

256 
JMETHOD
(, 
cŞÜ_quªtize
, (
j_decom´ess_±r
 
cšfo
,

257 
JSAMPARRAY
 
šput_buf
, JSAMPARRAY 
ouut_buf
,

258 
num_rows
));

259 
JMETHOD
(, 
fšish_·ss
, (
j_decom´ess_±r
 
cšfo
));

260 
JMETHOD
(, 
Ãw_cŞÜ_m­
, (
j_decom´ess_±r
 
cšfo
));

266 #undeà
MAX


267 
	#MAX
(
a
,
b
è(×è> (bè? (aè: (b))

	)

268 #undeà
MIN


269 
	#MIN
(
a
,
b
è(×è< (bè? (aè: (b))

	)

282 #ifdeà
RIGHT_SHIFT_IS_UNSIGNED


283 
	#SHIFT_TEMPS
 
INT32
 
shiá_‹mp
;

	)

284 
	#RIGHT_SHIFT
(
x
,
shá
) \

285 ((
shiá_‹mp
 = (
x
)) < 0 ? \

286 (
shiá_‹mp
 >> (
shá
)è| ((~((
INT32
) 0)) << (32-(shft))) : \

287 (
shiá_‹mp
 >> (
shá
)))

	)

289 
	#SHIFT_TEMPS


	)

290 
	#RIGHT_SHIFT
(
x
,
shá
è((xè>> (shá))

	)

296 #ifdeà
NEED_SHORT_EXTERNAL_NAMES


297 
	#jš™_com´ess_ma¡”
 
jICom´ess


	)

298 
	#jš™_c_ma¡”_cÚŒŞ
 
jICMa¡”


	)

299 
	#jš™_c_maš_cÚŒŞËr
 
jICMašC


	)

300 
	#jš™_c_´•_cÚŒŞËr
 
jICP»pC


	)

301 
	#jš™_c_cÛf_cÚŒŞËr
 
jICCÛfC


	)

302 
	#jš™_cŞÜ_cÚv”‹r
 
jICCŞÜ


	)

303 
	#jš™_down§m¶”
 
jIDown§m¶”


	)

304 
	#jš™_fÜw¬d_dù
 
jIFDCT


	)

305 
	#jš™_huff_’cod”
 
jIHEncod”


	)

306 
	#jš™_phuff_’cod”
 
jIPHEncod”


	)

307 
	#jš™_m¬k”_wr™”
 
jIMWr™”


	)

308 
	#jš™_ma¡”_decom´ess
 
jIDMa¡”


	)

309 
	#jš™_d_maš_cÚŒŞËr
 
jIDMašC


	)

310 
	#jš™_d_cÛf_cÚŒŞËr
 
jIDCÛfC


	)

311 
	#jš™_d_po¡_cÚŒŞËr
 
jIDPo¡C


	)

312 
	#jš™_šput_cÚŒŞËr
 
jIInCr


	)

313 
	#jš™_m¬k”_»ad”
 
jIMR—d”


	)

314 
	#jš™_huff_decod”
 
jIHDecod”


	)

315 
	#jš™_phuff_decod”
 
jIPHDecod”


	)

316 
	#jš™_šv”£_dù
 
jIIDCT


	)

317 
	#jš™_up§m¶”
 
jIUp§m¶”


	)

318 
	#jš™_cŞÜ_decÚv”‹r
 
jIDCŞÜ


	)

319 
	#jš™_1·ss_quªtiz”
 
jI1Quªt


	)

320 
	#jš™_2·ss_quªtiz”
 
jI2Quªt


	)

321 
	#jš™_m”ged_up§m¶”
 
jIMUp§m¶”


	)

322 
	#jš™_memÜy_mgr
 
jIMemMgr


	)

323 
	#jdiv_round_up
 
jDivRound


	)

324 
	#jround_up
 
jRound


	)

325 
	#jcİy_§m¶e_rows
 
jCİySam¶es


	)

326 
	#jcİy_block_row
 
jCİyBlocks


	)

327 
	#jz”o_çr
 
jZ”oF¬


	)

328 
	#j³g_zigzag_Üd”
 
jZIGTabË


	)

329 
	#j³g_Çtu¿l_Üd”
 
jZAGTabË


	)

334 
	$EXTERN
(è
jš™_com´ess_ma¡”
 
	`JPP
((
j_com´ess_±r
 
cšfo
));

335 
	$EXTERN
(è
jš™_c_ma¡”_cÚŒŞ
 
	`JPP
((
j_com´ess_±r
 
cšfo
,

336 
boŞ—n
 
Œªscode_Úly
));

337 
	$EXTERN
(è
jš™_c_maš_cÚŒŞËr
 
	`JPP
((
j_com´ess_±r
 
cšfo
,

338 
boŞ—n
 
Ãed_fuÎ_bufãr
));

339 
	$EXTERN
(è
jš™_c_´•_cÚŒŞËr
 
	`JPP
((
j_com´ess_±r
 
cšfo
,

340 
boŞ—n
 
Ãed_fuÎ_bufãr
));

341 
	$EXTERN
(è
jš™_c_cÛf_cÚŒŞËr
 
	`JPP
((
j_com´ess_±r
 
cšfo
,

342 
boŞ—n
 
Ãed_fuÎ_bufãr
));

343 
	$EXTERN
(è
jš™_cŞÜ_cÚv”‹r
 
	`JPP
((
j_com´ess_±r
 
cšfo
));

344 
	$EXTERN
(è
jš™_down§m¶”
 
	`JPP
((
j_com´ess_±r
 
cšfo
));

345 
	$EXTERN
(è
jš™_fÜw¬d_dù
 
	`JPP
((
j_com´ess_±r
 
cšfo
));

346 
	$EXTERN
(è
jš™_huff_’cod”
 
	`JPP
((
j_com´ess_±r
 
cšfo
));

347 
	$EXTERN
(è
jš™_phuff_’cod”
 
	`JPP
((
j_com´ess_±r
 
cšfo
));

348 
	$EXTERN
(è
jš™_m¬k”_wr™”
 
	`JPP
((
j_com´ess_±r
 
cšfo
));

350 
	$EXTERN
(è
jš™_ma¡”_decom´ess
 
	`JPP
((
j_decom´ess_±r
 
cšfo
));

351 
	$EXTERN
(è
jš™_d_maš_cÚŒŞËr
 
	`JPP
((
j_decom´ess_±r
 
cšfo
,

352 
boŞ—n
 
Ãed_fuÎ_bufãr
));

353 
	$EXTERN
(è
jš™_d_cÛf_cÚŒŞËr
 
	`JPP
((
j_decom´ess_±r
 
cšfo
,

354 
boŞ—n
 
Ãed_fuÎ_bufãr
));

355 
	$EXTERN
(è
jš™_d_po¡_cÚŒŞËr
 
	`JPP
((
j_decom´ess_±r
 
cšfo
,

356 
boŞ—n
 
Ãed_fuÎ_bufãr
));

357 
	$EXTERN
(è
jš™_šput_cÚŒŞËr
 
	`JPP
((
j_decom´ess_±r
 
cšfo
));

358 
	$EXTERN
(è
jš™_m¬k”_»ad”
 
	`JPP
((
j_decom´ess_±r
 
cšfo
));

359 
	$EXTERN
(è
jš™_huff_decod”
 
	`JPP
((
j_decom´ess_±r
 
cšfo
));

360 
	$EXTERN
(è
jš™_phuff_decod”
 
	`JPP
((
j_decom´ess_±r
 
cšfo
));

361 
	$EXTERN
(è
jš™_šv”£_dù
 
	`JPP
((
j_decom´ess_±r
 
cšfo
));

362 
	$EXTERN
(è
jš™_up§m¶”
 
	`JPP
((
j_decom´ess_±r
 
cšfo
));

363 
	$EXTERN
(è
jš™_cŞÜ_decÚv”‹r
 
	`JPP
((
j_decom´ess_±r
 
cšfo
));

364 
	$EXTERN
(è
jš™_1·ss_quªtiz”
 
	`JPP
((
j_decom´ess_±r
 
cšfo
));

365 
	$EXTERN
(è
jš™_2·ss_quªtiz”
 
	`JPP
((
j_decom´ess_±r
 
cšfo
));

366 
	$EXTERN
(è
jš™_m”ged_up§m¶”
 
	`JPP
((
j_decom´ess_±r
 
cšfo
));

368 
	$EXTERN
(è
jš™_memÜy_mgr
 
	`JPP
((
j_commÚ_±r
 
cšfo
));

371 
	$EXTERN
(è
jdiv_round_up
 
	`JPP
((
a
, 
b
));

372 
	$EXTERN
(è
jround_up
 
	`JPP
((
a
, 
b
));

373 
	$EXTERN
(è
jcİy_§m¶e_rows
 
	`JPP
((
JSAMPARRAY
 
šput_¬¿y
, 
sourû_row
,

374 
JSAMPARRAY
 
ouut_¬¿y
, 
de¡_row
,

375 
num_rows
, 
JDIMENSION
 
num_cŞs
));

376 
	$EXTERN
(è
jcİy_block_row
 
	`JPP
((
JBLOCKROW
 
šput_row
, JBLOCKROW 
ouut_row
,

377 
JDIMENSION
 
num_blocks
));

378 
	$EXTERN
(è
jz”o_çr
 
	`JPP
((
FAR
 * 
rg‘
, 
size_t
 
by‹¡oz”o
));

381 cÚ¡ 
j³g_zigzag_Üd”
[];

383 cÚ¡ 
j³g_Çtu¿l_Üd”
[];

387 #ifdeà
INCOMPLETE_TYPES_BROKEN


388 #iâdeà
AM_MEMORY_MANAGER


389 
	sjvœt_§¼ay_cÚŒŞ
 { 
dummy
; };

390 
	sjvœt_b¬¿y_cÚŒŞ
 { 
dummy
; };

	@jpeglib.h

13 #iâdeà
JPEGLIB_H


14 
	#JPEGLIB_H


	)

23 #iâdeà
JCONFIG_INCLUDED


24 
	~"jcÚfig.h
"

26 
	~"jmÜecfg.h
"

33 
	#JPEG_LIB_VERSION
 62

	)

41 
	#DCTSIZE
 8

	)

42 
	#DCTSIZE2
 64

	)

43 
	#NUM_QUANT_TBLS
 4

	)

44 
	#NUM_HUFF_TBLS
 4

	)

45 
	#NUM_ARITH_TBLS
 16

	)

46 
	#MAX_COMPS_IN_SCAN
 4

	)

47 
	#MAX_SAMP_FACTOR
 4

	)

55 
	#C_MAX_BLOCKS_IN_MCU
 10

	)

56 #iâdeà
D_MAX_BLOCKS_IN_MCU


57 
	#D_MAX_BLOCKS_IN_MCU
 10

	)

66 
JSAMPLE
 
	tFAR
 *
	tJSAMPROW
;

67 
JSAMPROW
 *
	tJSAMPARRAY
;

68 
JSAMPARRAY
 *
	tJSAMPIMAGE
;

70 
JCOEF
 
	tJBLOCK
[
DCTSIZE2
];

71 
JBLOCK
 
	tFAR
 *
	tJBLOCKROW
;

72 
JBLOCKROW
 *
	tJBLOCKARRAY
;

73 
JBLOCKARRAY
 *
	tJBLOCKIMAGE
;

75 
JCOEF
 
	tFAR
 *
	tJCOEFPTR
;

88 
UINT16
 
	mquªtv®
[
DCTSIZE2
];

94 
boŞ—n
 
	m£Á_bË
;

95 } 
	tJQUANT_TBL
;

102 
UINT8
 
	mb™s
[17];

104 
UINT8
 
	mhuffv®
[256];

110 
boŞ—n
 
	m£Á_bË
;

111 } 
	tJHUFF_TBL
;

120 
	mcompÚ’t_id
;

121 
	mcompÚ’t_šdex
;

122 
	mh_§mp_çùÜ
;

123 
	mv_§mp_çùÜ
;

124 
	mquªt_tbl_no
;

129 
	mdc_tbl_no
;

130 
	mac_tbl_no
;

139 
JDIMENSION
 
	mwidth_š_blocks
;

140 
JDIMENSION
 
	mheight_š_blocks
;

147 
	mDCT_sÿËd_size
;

154 
JDIMENSION
 
	mdown§m¶ed_width
;

155 
JDIMENSION
 
	mdown§m¶ed_height
;

160 
boŞ—n
 
	mcompÚ’t_Ãeded
;

164 
	mMCU_width
;

165 
	mMCU_height
;

166 
	mMCU_blocks
;

167 
	mMCU_§m¶e_width
;

168 
	mÏ¡_cŞ_width
;

169 
	mÏ¡_row_height
;

175 
JQUANT_TBL
 * 
	mquªt_bË
;

178 * 
	mdù_bË
;

179 } 
	tj³g_compÚ’t_šfo
;

185 
	mcomps_š_sÿn
;

186 
	mcompÚ’t_šdex
[
MAX_COMPS_IN_SCAN
];

187 
	mSs
, 
	mSe
;

188 
	mAh
, 
	mAl
;

189 } 
	tj³g_sÿn_šfo
;

193 
j³g_m¬k”_¡ruù
 
	tFAR
 * 
	tj³g_§ved_m¬k”_±r
;

195 
	sj³g_m¬k”_¡ruù
 {

196 
j³g_§ved_m¬k”_±r
 
	mÃxt
;

197 
UINT8
 
	mm¬k”
;

198 
	mÜigš®_Ëngth
;

199 
	md©a_Ëngth
;

200 
JOCTET
 
FAR
 * 
	md©a
;

207 
	mJCS_UNKNOWN
,

208 
	mJCS_GRAYSCALE
,

209 
	mJCS_RGB
,

210 
	mJCS_YCbCr
,

211 
	mJCS_CMYK
,

212 
	mJCS_YCCK


213 } 
	tJ_COLOR_SPACE
;

218 
	mJDCT_ISLOW
,

219 
	mJDCT_IFAST
,

220 
	mJDCT_FLOAT


221 } 
	tJ_DCT_METHOD
;

223 #iâdeà
JDCT_DEFAULT


224 
	#JDCT_DEFAULT
 
JDCT_ISLOW


	)

226 #iâdeà
JDCT_FASTEST


227 
	#JDCT_FASTEST
 
JDCT_IFAST


	)

233 
	mJDITHER_NONE
,

234 
	mJDITHER_ORDERED
,

235 
	mJDITHER_FS


236 } 
	tJ_DITHER_MODE
;

241 
	#j³g_commÚ_f›lds
 \

242 
j³g_”rÜ_mgr
 * 
”r
; \

243 
j³g_memÜy_mgr
 * 
mem
; \

244 
j³g_´og»ss_mgr
 * 
´og»ss
; \

245 * 
ş›Á_d©a
; \

246 
boŞ—n
 
is_decom´essÜ
; \

247 
glob®_¡©e


	)

253 
	sj³g_commÚ_¡ruù
 {

254 
	mj³g_commÚ_f›lds
;

261 
j³g_commÚ_¡ruù
 * 
	tj_commÚ_±r
;

262 
j³g_com´ess_¡ruù
 * 
	tj_com´ess_±r
;

263 
j³g_decom´ess_¡ruù
 * 
	tj_decom´ess_±r
;

268 
	sj³g_com´ess_¡ruù
 {

269 
	mj³g_commÚ_f›lds
;

272 
j³g_de¡š©iÚ_mgr
 * 
	mde¡
;

279 
JDIMENSION
 
	mimage_width
;

280 
JDIMENSION
 
	mimage_height
;

281 
	mšput_compÚ’ts
;

282 
J_COLOR_SPACE
 
	mš_cŞÜ_¥aû
;

284 
	mšput_gamma
;

294 
	md©a_´ecisiÚ
;

296 
	mnum_compÚ’ts
;

297 
J_COLOR_SPACE
 
	mj³g_cŞÜ_¥aû
;

299 
j³g_compÚ’t_šfo
 * 
	mcomp_šfo
;

302 
JQUANT_TBL
 * 
	mquªt_tbl_±rs
[
NUM_QUANT_TBLS
];

305 
JHUFF_TBL
 * 
	mdc_huff_tbl_±rs
[
NUM_HUFF_TBLS
];

306 
JHUFF_TBL
 * 
	mac_huff_tbl_±rs
[
NUM_HUFF_TBLS
];

309 
UINT8
 
	m¬™h_dc_L
[
NUM_ARITH_TBLS
];

310 
UINT8
 
	m¬™h_dc_U
[
NUM_ARITH_TBLS
];

311 
UINT8
 
	m¬™h_ac_K
[
NUM_ARITH_TBLS
];

313 
	mnum_sÿns
;

314 cÚ¡ 
j³g_sÿn_šfo
 * 
	msÿn_šfo
;

320 
boŞ—n
 
	m¿w_d©a_š
;

321 
boŞ—n
 
	m¬™h_code
;

322 
boŞ—n
 
	mİtimize_codšg
;

323 
boŞ—n
 
	mCCIR601_§m¶šg
;

324 
	msmoÙhšg_çùÜ
;

325 
J_DCT_METHOD
 
	mdù_m‘hod
;

332 
	m»¡¬t_š‹rv®
;

333 
	m»¡¬t_š_rows
;

337 
boŞ—n
 
	mwr™e_JFIF_h—d”
;

338 
UINT8
 
	mJFIF_majÜ_v”siÚ
;

339 
UINT8
 
	mJFIF_mšÜ_v”siÚ
;

344 
UINT8
 
	md’s™y_un™
;

345 
UINT16
 
	mX_d’s™y
;

346 
UINT16
 
	mY_d’s™y
;

347 
boŞ—n
 
	mwr™e_Adobe_m¬k”
;

354 
JDIMENSION
 
	mÃxt_sÿÆše
;

363 
boŞ—n
 
	m´og»ssive_mode
;

364 
	mmax_h_§mp_çùÜ
;

365 
	mmax_v_§mp_çùÜ
;

367 
JDIMENSION
 
	mtÙ®_iMCU_rows
;

378 
	mcomps_š_sÿn
;

379 
j³g_compÚ’t_šfo
 * 
	mcur_comp_šfo
[
MAX_COMPS_IN_SCAN
];

382 
JDIMENSION
 
	mMCUs_³r_row
;

383 
JDIMENSION
 
	mMCU_rows_š_sÿn
;

385 
	mblocks_š_MCU
;

386 
	mMCU_memb”sh
[
C_MAX_BLOCKS_IN_MCU
];

390 
	mSs
, 
	mSe
, 
	mAh
, 
	mAl
;

395 
j³g_comp_ma¡”
 * 
	mma¡”
;

396 
j³g_c_maš_cÚŒŞËr
 * 
	mmaš
;

397 
j³g_c_´•_cÚŒŞËr
 * 
	m´•
;

398 
j³g_c_cÛf_cÚŒŞËr
 * 
	mcÛf
;

399 
j³g_m¬k”_wr™”
 * 
	mm¬k”
;

400 
j³g_cŞÜ_cÚv”‹r
 * 
	mccÚv”t
;

401 
j³g_down§m¶”
 * 
	mdown§m¶e
;

402 
j³g_fÜw¬d_dù
 * 
	mfdù
;

403 
j³g_’Œİy_’cod”
 * 
	m’Œİy
;

404 
j³g_sÿn_šfo
 * 
	msüt_¥aû
;

405 
	msüt_¥aû_size
;

411 
	sj³g_decom´ess_¡ruù
 {

412 
	mj³g_commÚ_f›lds
;

415 
j³g_sourû_mgr
 * 
	m¤c
;

420 
JDIMENSION
 
	mimage_width
;

421 
JDIMENSION
 
	mimage_height
;

422 
	mnum_compÚ’ts
;

423 
J_COLOR_SPACE
 
	mj³g_cŞÜ_¥aû
;

430 
J_COLOR_SPACE
 
	mout_cŞÜ_¥aû
;

432 
	msÿË_num
, 
	msÿË_d’om
;

434 
	mouut_gamma
;

436 
boŞ—n
 
	mbufã»d_image
;

437 
boŞ—n
 
	m¿w_d©a_out
;

439 
J_DCT_METHOD
 
	mdù_m‘hod
;

440 
boŞ—n
 
	mdo_çncy_up§m¶šg
;

441 
boŞ—n
 
	mdo_block_smoÙhšg
;

443 
boŞ—n
 
	mquªtize_cŞÜs
;

445 
J_DITHER_MODE
 
	md™h”_mode
;

446 
boŞ—n
 
	mtwo_·ss_quªtize
;

447 
	mdesœed_numb”_of_cŞÜs
;

449 
boŞ—n
 
	m’abË_1·ss_quªt
;

450 
boŞ—n
 
	m’abË_ex‹º®_quªt
;

451 
boŞ—n
 
	m’abË_2·ss_quªt
;

459 
JDIMENSION
 
	mouut_width
;

460 
JDIMENSION
 
	mouut_height
;

461 
	mout_cŞÜ_compÚ’ts
;

462 
	mouut_compÚ’ts
;

466 
	m»c_outbuf_height
;

478 
	maùu®_numb”_of_cŞÜs
;

479 
JSAMPARRAY
 
	mcŞÜm­
;

489 
JDIMENSION
 
	mouut_sÿÆše
;

494 
	mšput_sÿn_numb”
;

495 
JDIMENSION
 
	mšput_iMCU_row
;

501 
	mouut_sÿn_numb”
;

502 
JDIMENSION
 
	mouut_iMCU_row
;

511 (*
	mcÛf_b™s
)[
DCTSIZE2
];

522 
JQUANT_TBL
 * 
	mquªt_tbl_±rs
[
NUM_QUANT_TBLS
];

525 
JHUFF_TBL
 * 
	mdc_huff_tbl_±rs
[
NUM_HUFF_TBLS
];

526 
JHUFF_TBL
 * 
	mac_huff_tbl_±rs
[
NUM_HUFF_TBLS
];

533 
	md©a_´ecisiÚ
;

535 
j³g_compÚ’t_šfo
 * 
	mcomp_šfo
;

538 
boŞ—n
 
	m´og»ssive_mode
;

539 
boŞ—n
 
	m¬™h_code
;

541 
UINT8
 
	m¬™h_dc_L
[
NUM_ARITH_TBLS
];

542 
UINT8
 
	m¬™h_dc_U
[
NUM_ARITH_TBLS
];

543 
UINT8
 
	m¬™h_ac_K
[
NUM_ARITH_TBLS
];

545 
	m»¡¬t_š‹rv®
;

550 
boŞ—n
 
	m§w_JFIF_m¬k”
;

552 
UINT8
 
	mJFIF_majÜ_v”siÚ
;

553 
UINT8
 
	mJFIF_mšÜ_v”siÚ
;

554 
UINT8
 
	md’s™y_un™
;

555 
UINT16
 
	mX_d’s™y
;

556 
UINT16
 
	mY_d’s™y
;

557 
boŞ—n
 
	m§w_Adobe_m¬k”
;

558 
UINT8
 
	mAdobe_ŒªsfÜm
;

560 
boŞ—n
 
	mCCIR601_§m¶šg
;

566 
j³g_§ved_m¬k”_±r
 
	mm¬k”_li¡
;

575 
	mmax_h_§mp_çùÜ
;

576 
	mmax_v_§mp_çùÜ
;

578 
	mmš_DCT_sÿËd_size
;

580 
JDIMENSION
 
	mtÙ®_iMCU_rows
;

589 
JSAMPLE
 * 
	m§m¶e_¿nge_lim™
;

596 
	mcomps_š_sÿn
;

597 
j³g_compÚ’t_šfo
 * 
	mcur_comp_šfo
[
MAX_COMPS_IN_SCAN
];

600 
JDIMENSION
 
	mMCUs_³r_row
;

601 
JDIMENSION
 
	mMCU_rows_š_sÿn
;

603 
	mblocks_š_MCU
;

604 
	mMCU_memb”sh
[
D_MAX_BLOCKS_IN_MCU
];

608 
	mSs
, 
	mSe
, 
	mAh
, 
	mAl
;

614 
	muÄ—d_m¬k”
;

619 
j³g_decomp_ma¡”
 * 
	mma¡”
;

620 
j³g_d_maš_cÚŒŞËr
 * 
	mmaš
;

621 
j³g_d_cÛf_cÚŒŞËr
 * 
	mcÛf
;

622 
j³g_d_po¡_cÚŒŞËr
 * 
	mpo¡
;

623 
j³g_šput_cÚŒŞËr
 * 
	mšputùl
;

624 
j³g_m¬k”_»ad”
 * 
	mm¬k”
;

625 
j³g_’Œİy_decod”
 * 
	m’Œİy
;

626 
j³g_šv”£_dù
 * 
	midù
;

627 
j³g_up§m¶”
 * 
	mup§m¶e
;

628 
j³g_cŞÜ_decÚv”‹r
 * 
	mccÚv”t
;

629 
j³g_cŞÜ_quªtiz”
 * 
	mcquªtize
;

643 
	sj³g_”rÜ_mgr
 {

645 
JMETHOD
(, 
”rÜ_ex™
, (
j_commÚ_±r
 
cšfo
));

647 
JMETHOD
(, 
em™_mes§ge
, (
j_commÚ_±r
 
cšfo
, 
msg_Ëv–
));

649 
JMETHOD
(, 
ouut_mes§ge
, (
j_commÚ_±r
 
cšfo
));

651 
JMETHOD
(, 
fÜm©_mes§ge
, (
j_commÚ_±r
 
cšfo
, * 
bufãr
));

652 
	#JMSG_LENGTH_MAX
 200

	)

654 
JMETHOD
(, 
»£t_”rÜ_mgr
, (
j_commÚ_±r
 
cšfo
));

659 
	mmsg_code
;

660 
	#JMSG_STR_PARM_MAX
 80

	)

662 
	mi
[8];

663 
	ms
[
JMSG_STR_PARM_MAX
];

664 } 
	mmsg_·rm
;

668 
	mŒaû_Ëv–
;

676 
	mnum_w¬nšgs
;

688 cÚ¡ * cÚ¡ * 
	mj³g_mes§ge_bË
;

689 
	mÏ¡_j³g_mes§ge
;

693 cÚ¡ * cÚ¡ * 
	maddÚ_mes§ge_bË
;

694 
	mfœ¡_addÚ_mes§ge
;

695 
	mÏ¡_addÚ_mes§ge
;

701 
	sj³g_´og»ss_mgr
 {

702 
JMETHOD
(, 
´og»ss_mÚ™Ü
, (
j_commÚ_±r
 
cšfo
));

704 
	m·ss_couÁ”
;

705 
	m·ss_lim™
;

706 
	mcom¶‘ed_·s£s
;

707 
	mtÙ®_·s£s
;

713 
	sj³g_de¡š©iÚ_mgr
 {

714 
JOCTET
 * 
	mÃxt_ouut_by‹
;

715 
size_t
 
	mä“_š_bufãr
;

717 
JMETHOD
(, 
š™_de¡š©iÚ
, (
j_com´ess_±r
 
cšfo
));

718 
JMETHOD
(
boŞ—n
, 
em±y_ouut_bufãr
, (
j_com´ess_±r
 
cšfo
));

719 
JMETHOD
(, 
‹rm_de¡š©iÚ
, (
j_com´ess_±r
 
cšfo
));

725 
	sj³g_sourû_mgr
 {

726 cÚ¡ 
JOCTET
 * 
	mÃxt_šput_by‹
;

727 
size_t
 
	mby‹s_š_bufãr
;

729 
JMETHOD
(, 
š™_sourû
, (
j_decom´ess_±r
 
cšfo
));

730 
JMETHOD
(
boŞ—n
, 
fl_šput_bufãr
, (
j_decom´ess_±r
 
cšfo
));

731 
JMETHOD
(, 
sk_šput_d©a
, (
j_decom´ess_±r
 
cšfo
, 
num_by‹s
));

732 
JMETHOD
(
boŞ—n
, 
»sync_to_»¡¬t
, (
j_decom´ess_±r
 
cšfo
, 
desœed
));

733 
JMETHOD
(, 
‹rm_sourû
, (
j_decom´ess_±r
 
cšfo
));

748 
	#JPOOL_PERMANENT
 0

	)

749 
	#JPOOL_IMAGE
 1

	)

750 
	#JPOOL_NUMPOOLS
 2

	)

752 
jvœt_§¼ay_cÚŒŞ
 * 
	tjvœt_§¼ay_±r
;

753 
jvœt_b¬¿y_cÚŒŞ
 * 
	tjvœt_b¬¿y_±r
;

756 
	sj³g_memÜy_mgr
 {

758 
JMETHOD
(*, 
®loc_sm®l
, (
j_commÚ_±r
 
cšfo
, 
poŞ_id
,

759 
size_t
 
sizeofobjeù
));

760 
JMETHOD
(
FAR
 *, 
®loc_Ïrge
, (
j_commÚ_±r
 
cšfo
, 
poŞ_id
,

761 
size_t
 
sizeofobjeù
));

762 
JMETHOD
(
JSAMPARRAY
, 
®loc_§¼ay
, (
j_commÚ_±r
 
cšfo
, 
poŞ_id
,

763 
JDIMENSION
 
§m¶e¥”row
,

764 
JDIMENSION
 
numrows
));

765 
JMETHOD
(
JBLOCKARRAY
, 
®loc_b¬¿y
, (
j_commÚ_±r
 
cšfo
, 
poŞ_id
,

766 
JDIMENSION
 
block¥”row
,

767 
JDIMENSION
 
numrows
));

768 
JMETHOD
(
jvœt_§¼ay_±r
, 
»que¡_vœt_§¼ay
, (
j_commÚ_±r
 
cšfo
,

769 
poŞ_id
,

770 
boŞ—n
 
´e_z”o
,

771 
JDIMENSION
 
§m¶e¥”row
,

772 
JDIMENSION
 
numrows
,

773 
JDIMENSION
 
maxacûss
));

774 
JMETHOD
(
jvœt_b¬¿y_±r
, 
»que¡_vœt_b¬¿y
, (
j_commÚ_±r
 
cšfo
,

775 
poŞ_id
,

776 
boŞ—n
 
´e_z”o
,

777 
JDIMENSION
 
block¥”row
,

778 
JDIMENSION
 
numrows
,

779 
JDIMENSION
 
maxacûss
));

780 
JMETHOD
(, 
»®ize_vœt_¬¿ys
, (
j_commÚ_±r
 
cšfo
));

781 
JMETHOD
(
JSAMPARRAY
, 
acûss_vœt_§¼ay
, (
j_commÚ_±r
 
cšfo
,

782 
jvœt_§¼ay_±r
 
±r
,

783 
JDIMENSION
 
¡¬t_row
,

784 
JDIMENSION
 
num_rows
,

785 
boŞ—n
 
wr™abË
));

786 
JMETHOD
(
JBLOCKARRAY
, 
acûss_vœt_b¬¿y
, (
j_commÚ_±r
 
cšfo
,

787 
jvœt_b¬¿y_±r
 
±r
,

788 
JDIMENSION
 
¡¬t_row
,

789 
JDIMENSION
 
num_rows
,

790 
boŞ—n
 
wr™abË
));

791 
JMETHOD
(, 
ä“_poŞ
, (
j_commÚ_±r
 
cšfo
, 
poŞ_id
));

792 
JMETHOD
(, 
£lf_de¡ruù
, (
j_commÚ_±r
 
cšfo
));

799 
	mmax_memÜy_to_u£
;

802 
	mmax_®loc_chunk
;

809 
JMETHOD
(
	tboŞ—n
, 
	tj³g_m¬k”_·r£r_m‘hod
, (
	tj_decom´ess_±r
 
	tcšfo
));

817 #ifdeà
HAVE_PROTOTYPES


818 
	#JPP
(
¬gli¡
è
	)
arglist

820 
	#JPP
(
¬gli¡
è()

	)

831 #ifdeà
NEED_SHORT_EXTERNAL_NAMES


832 
	#j³g_¡d_”rÜ
 
jStdE¼Ü


	)

833 
	#j³g_C»©eCom´ess
 
jC»aCom´ess


	)

834 
	#j³g_C»©eDecom´ess
 
jC»aDecom´ess


	)

835 
	#j³g_de¡roy_com´ess
 
jDe¡Com´ess


	)

836 
	#j³g_de¡roy_decom´ess
 
jDe¡Decom´ess


	)

837 
	#j³g_¡dio_de¡
 
jStdDe¡


	)

838 
	#j³g_¡dio_¤c
 
jStdSrc


	)

839 
	#j³g_£t_deçuÉs
 
jS‘DeçuÉs


	)

840 
	#j³g_£t_cŞÜ¥aû
 
jS‘CŞÜ¥aû


	)

841 
	#j³g_deçuÉ_cŞÜ¥aû
 
jDefCŞÜ¥aû


	)

842 
	#j³g_£t_qu®™y
 
jS‘Qu®™y


	)

843 
	#j³g_£t_lš—r_qu®™y
 
jS‘LQu®™y


	)

844 
	#j³g_add_quªt_bË
 
jAddQuªtTabË


	)

845 
	#j³g_qu®™y_sÿlšg
 
jQu®™ySÿlšg


	)

846 
	#j³g_sim¶e_´og»ssiÚ
 
jSimProg»ss


	)

847 
	#j³g_suµ»ss_bËs
 
jSuµ»ssTabËs


	)

848 
	#j³g_®loc_quªt_bË
 
jAlcQTabË


	)

849 
	#j³g_®loc_huff_bË
 
jAlcHTabË


	)

850 
	#j³g_¡¬t_com´ess
 
jSŒtCom´ess


	)

851 
	#j³g_wr™e_sÿÆšes
 
jW¹SÿÆšes


	)

852 
	#j³g_fšish_com´ess
 
jFšCom´ess


	)

853 
	#j³g_wr™e_¿w_d©a
 
jW¹RawD©a


	)

854 
	#j³g_wr™e_m¬k”
 
jW¹M¬k”


	)

855 
	#j³g_wr™e_m_h—d”
 
jW¹MH—d”


	)

856 
	#j³g_wr™e_m_by‹
 
jW¹MBy‹


	)

857 
	#j³g_wr™e_bËs
 
jW¹TabËs


	)

858 
	#j³g_»ad_h—d”
 
jR—dH—d”


	)

859 
	#j³g_¡¬t_decom´ess
 
jSŒtDecom´ess


	)

860 
	#j³g_»ad_sÿÆšes
 
jR—dSÿÆšes


	)

861 
	#j³g_fšish_decom´ess
 
jFšDecom´ess


	)

862 
	#j³g_»ad_¿w_d©a
 
jR—dRawD©a


	)

863 
	#j³g_has_muÉË_sÿns
 
jHasMuÉSú


	)

864 
	#j³g_¡¬t_ouut
 
jSŒtOuut


	)

865 
	#j³g_fšish_ouut
 
jFšOuut


	)

866 
	#j³g_šput_com¶‘e
 
jInCom¶‘e


	)

867 
	#j³g_Ãw_cŞÜm­
 
jNewCM­


	)

868 
	#j³g_cÚsume_šput
 
jCÚsumeIÅut


	)

869 
	#j³g_ÿlc_ouut_dim’siÚs
 
jC®cDim’siÚs


	)

870 
	#j³g_§ve_m¬k”s
 
jSaveM¬k”s


	)

871 
	#j³g_£t_m¬k”_´oûssÜ
 
jS‘M¬k”


	)

872 
	#j³g_»ad_cÛffic›Ás
 
jR—dCÛfs


	)

873 
	#j³g_wr™e_cÛffic›Ás
 
jW¹CÛfs


	)

874 
	#j³g_cİy_ü™iÿl_·¿m‘”s
 
jCİyCr™


	)

875 
	#j³g_abÜt_com´ess
 
jAb¹Com´ess


	)

876 
	#j³g_abÜt_decom´ess
 
jAb¹Decom´ess


	)

877 
	#j³g_abÜt
 
jAbÜt


	)

878 
	#j³g_de¡roy
 
jDe¡roy


	)

879 
	#j³g_»sync_to_»¡¬t
 
jResyncRe¡¬t


	)

884 
	$EXTERN
(
j³g_”rÜ_mgr
 *è
j³g_¡d_”rÜ


885 
	`JPP
((
j³g_”rÜ_mgr
 * 
”r
));

894 
	#j³g_ü—‹_com´ess
(
cšfo
) \

895 
	`j³g_C»©eCom´ess
((
cšfo
), 
JPEG_LIB_VERSION
, \

896 (
size_t
è(
j³g_com´ess_¡ruù
))

	)

897 
	#j³g_ü—‹_decom´ess
(
cšfo
) \

898 
	`j³g_C»©eDecom´ess
((
cšfo
), 
JPEG_LIB_VERSION
, \

899 (
size_t
è(
j³g_decom´ess_¡ruù
))

	)

900 
	$EXTERN
(è
j³g_C»©eCom´ess
 
	`JPP
((
j_com´ess_±r
 
cšfo
,

901 
v”siÚ
, 
size_t
 
¡ruùsize
));

902 
	$EXTERN
(è
j³g_C»©eDecom´ess
 
	`JPP
((
j_decom´ess_±r
 
cšfo
,

903 
v”siÚ
, 
size_t
 
¡ruùsize
));

905 
	$EXTERN
(è
j³g_de¡roy_com´ess
 
	`JPP
((
j_com´ess_±r
 
cšfo
));

906 
	$EXTERN
(è
j³g_de¡roy_decom´ess
 
	`JPP
((
j_decom´ess_±r
 
cšfo
));

910 
	$EXTERN
(è
j³g_¡dio_de¡
 
	`JPP
((
j_com´ess_±r
 
cšfo
, 
FILE
 * 
outfe
));

911 
	$EXTERN
(è
j³g_¡dio_¤c
 
	`JPP
((
j_decom´ess_±r
 
cšfo
, 
FILE
 * 
šfe
));

914 
	$EXTERN
(è
j³g_£t_deçuÉs
 
	`JPP
((
j_com´ess_±r
 
cšfo
));

916 
	$EXTERN
(è
j³g_£t_cŞÜ¥aû
 
	`JPP
((
j_com´ess_±r
 
cšfo
,

917 
J_COLOR_SPACE
 
cŞÜ¥aû
));

918 
	$EXTERN
(è
j³g_deçuÉ_cŞÜ¥aû
 
	`JPP
((
j_com´ess_±r
 
cšfo
));

919 
	$EXTERN
(è
j³g_£t_qu®™y
 
	`JPP
((
j_com´ess_±r
 
cšfo
, 
qu®™y
,

920 
boŞ—n
 
fÜû_ba£lše
));

921 
	$EXTERN
(è
j³g_£t_lš—r_qu®™y
 
	`JPP
((
j_com´ess_±r
 
cšfo
,

922 
sÿË_çùÜ
,

923 
boŞ—n
 
fÜû_ba£lše
));

924 
	$EXTERN
(è
j³g_add_quªt_bË
 
	`JPP
((
j_com´ess_±r
 
cšfo
, 
which_tbl
,

925 cÚ¡ *
basic_bË
,

926 
sÿË_çùÜ
,

927 
boŞ—n
 
fÜû_ba£lše
));

928 
	$EXTERN
(è
j³g_qu®™y_sÿlšg
 
	`JPP
((
qu®™y
));

929 
	$EXTERN
(è
j³g_sim¶e_´og»ssiÚ
 
	`JPP
((
j_com´ess_±r
 
cšfo
));

930 
	$EXTERN
(è
j³g_suµ»ss_bËs
 
	`JPP
((
j_com´ess_±r
 
cšfo
,

931 
boŞ—n
 
suµ»ss
));

932 
	$EXTERN
(
JQUANT_TBL
 *è
j³g_®loc_quªt_bË
 
	`JPP
((
j_commÚ_±r
 
cšfo
));

933 
	$EXTERN
(
JHUFF_TBL
 *è
j³g_®loc_huff_bË
 
	`JPP
((
j_commÚ_±r
 
cšfo
));

936 
	$EXTERN
(è
j³g_¡¬t_com´ess
 
	`JPP
((
j_com´ess_±r
 
cšfo
,

937 
boŞ—n
 
wr™e_®l_bËs
));

938 
	$EXTERN
(
JDIMENSION
è
j³g_wr™e_sÿÆšes
 
	`JPP
((
j_com´ess_±r
 
cšfo
,

939 
JSAMPARRAY
 
sÿÆšes
,

940 
JDIMENSION
 
num_lšes
));

941 
	$EXTERN
(è
j³g_fšish_com´ess
 
	`JPP
((
j_com´ess_±r
 
cšfo
));

944 
	$EXTERN
(
JDIMENSION
è
j³g_wr™e_¿w_d©a
 
	`JPP
((
j_com´ess_±r
 
cšfo
,

945 
JSAMPIMAGE
 
d©a
,

946 
JDIMENSION
 
num_lšes
));

949 
	$EXTERN
(è
j³g_wr™e_m¬k”


950 
	`JPP
((
j_com´ess_±r
 
cšfo
, 
m¬k”
,

951 cÚ¡ 
JOCTET
 * 
d©­Œ
, 
d©®’
));

953 
	$EXTERN
(è
j³g_wr™e_m_h—d”


954 
	`JPP
((
j_com´ess_±r
 
cšfo
, 
m¬k”
, 
d©®’
));

955 
	$EXTERN
(è
j³g_wr™e_m_by‹


956 
	`JPP
((
j_com´ess_±r
 
cšfo
, 
v®
));

959 
	$EXTERN
(è
j³g_wr™e_bËs
 
	`JPP
((
j_com´ess_±r
 
cšfo
));

962 
	$EXTERN
(è
j³g_»ad_h—d”
 
	`JPP
((
j_decom´ess_±r
 
cšfo
,

963 
boŞ—n
 
»quœe_image
));

965 
	#JPEG_SUSPENDED
 0

	)

966 
	#JPEG_HEADER_OK
 1

	)

967 
	#JPEG_HEADER_TABLES_ONLY
 2

	)

975 
	$EXTERN
(
boŞ—n
è
j³g_¡¬t_decom´ess
 
	`JPP
((
j_decom´ess_±r
 
cšfo
));

976 
	$EXTERN
(
JDIMENSION
è
j³g_»ad_sÿÆšes
 
	`JPP
((
j_decom´ess_±r
 
cšfo
,

977 
JSAMPARRAY
 
sÿÆšes
,

978 
JDIMENSION
 
max_lšes
));

979 
	$EXTERN
(
boŞ—n
è
j³g_fšish_decom´ess
 
	`JPP
((
j_decom´ess_±r
 
cšfo
));

982 
	$EXTERN
(
JDIMENSION
è
j³g_»ad_¿w_d©a
 
	`JPP
((
j_decom´ess_±r
 
cšfo
,

983 
JSAMPIMAGE
 
d©a
,

984 
JDIMENSION
 
max_lšes
));

987 
	$EXTERN
(
boŞ—n
è
j³g_has_muÉË_sÿns
 
	`JPP
((
j_decom´ess_±r
 
cšfo
));

988 
	$EXTERN
(
boŞ—n
è
j³g_¡¬t_ouut
 
	`JPP
((
j_decom´ess_±r
 
cšfo
,

989 
sÿn_numb”
));

990 
	$EXTERN
(
boŞ—n
è
j³g_fšish_ouut
 
	`JPP
((
j_decom´ess_±r
 
cšfo
));

991 
	$EXTERN
(
boŞ—n
è
j³g_šput_com¶‘e
 
	`JPP
((
j_decom´ess_±r
 
cšfo
));

992 
	$EXTERN
(è
j³g_Ãw_cŞÜm­
 
	`JPP
((
j_decom´ess_±r
 
cšfo
));

993 
	$EXTERN
(è
j³g_cÚsume_šput
 
	`JPP
((
j_decom´ess_±r
 
cšfo
));

996 
	#JPEG_REACHED_SOS
 1

	)

997 
	#JPEG_REACHED_EOI
 2

	)

998 
	#JPEG_ROW_COMPLETED
 3

	)

999 
	#JPEG_SCAN_COMPLETED
 4

	)

1002 
	$EXTERN
(è
j³g_ÿlc_ouut_dim’siÚs
 
	`JPP
((
j_decom´ess_±r
 
cšfo
));

1005 
	$EXTERN
(è
j³g_§ve_m¬k”s


1006 
	`JPP
((
j_decom´ess_±r
 
cšfo
, 
m¬k”_code
,

1007 
Ëngth_lim™
));

1010 
	$EXTERN
(è
j³g_£t_m¬k”_´oûssÜ


1011 
	`JPP
((
j_decom´ess_±r
 
cšfo
, 
m¬k”_code
,

1012 
j³g_m¬k”_·r£r_m‘hod
 
routše
));

1015 
	$EXTERN
(
jvœt_b¬¿y_±r
 *è
j³g_»ad_cÛffic›Ás
 
	`JPP
((
j_decom´ess_±r
 
cšfo
));

1016 
	$EXTERN
(è
j³g_wr™e_cÛffic›Ás
 
	`JPP
((
j_com´ess_±r
 
cšfo
,

1017 
jvœt_b¬¿y_±r
 * 
cÛf_¬¿ys
));

1018 
	$EXTERN
(è
j³g_cİy_ü™iÿl_·¿m‘”s
 
	`JPP
((
j_decom´ess_±r
 
¤cšfo
,

1019 
j_com´ess_±r
 
d¡šfo
));

1027 
	$EXTERN
(è
j³g_abÜt_com´ess
 
	`JPP
((
j_com´ess_±r
 
cšfo
));

1028 
	$EXTERN
(è
j³g_abÜt_decom´ess
 
	`JPP
((
j_decom´ess_±r
 
cšfo
));

1033 
	$EXTERN
(è
j³g_abÜt
 
	`JPP
((
j_commÚ_±r
 
cšfo
));

1034 
	$EXTERN
(è
j³g_de¡roy
 
	`JPP
((
j_commÚ_±r
 
cšfo
));

1037 
	$EXTERN
(
boŞ—n
è
j³g_»sync_to_»¡¬t
 
	`JPP
((
j_decom´ess_±r
 
cšfo
,

1038 
desœed
));

1045 
	#JPEG_RST0
 0xD0

	)

1046 
	#JPEG_EOI
 0xD9

	)

1047 
	#JPEG_APP0
 0xE0

	)

1048 
	#JPEG_COM
 0xFE

	)

1056 #ifdeà
INCOMPLETE_TYPES_BROKEN


1057 #iâdeà
JPEG_INTERNALS


1058 
	sjvœt_§¼ay_cÚŒŞ
 { 
dummy
; };

1059 
	sjvœt_b¬¿y_cÚŒŞ
 { 
dummy
; };

1060 
	sj³g_comp_ma¡”
 { 
dummy
; };

1061 
	sj³g_c_maš_cÚŒŞËr
 { 
dummy
; };

1062 
	sj³g_c_´•_cÚŒŞËr
 { 
dummy
; };

1063 
	sj³g_c_cÛf_cÚŒŞËr
 { 
dummy
; };

1064 
	sj³g_m¬k”_wr™”
 { 
dummy
; };

1065 
	sj³g_cŞÜ_cÚv”‹r
 { 
dummy
; };

1066 
	sj³g_down§m¶”
 { 
dummy
; };

1067 
	sj³g_fÜw¬d_dù
 { 
dummy
; };

1068 
	sj³g_’Œİy_’cod”
 { 
dummy
; };

1069 
	sj³g_decomp_ma¡”
 { 
dummy
; };

1070 
	sj³g_d_maš_cÚŒŞËr
 { 
dummy
; };

1071 
	sj³g_d_cÛf_cÚŒŞËr
 { 
dummy
; };

1072 
	sj³g_d_po¡_cÚŒŞËr
 { 
dummy
; };

1073 
	sj³g_šput_cÚŒŞËr
 { 
dummy
; };

1074 
	sj³g_m¬k”_»ad”
 { 
dummy
; };

1075 
	sj³g_’Œİy_decod”
 { 
dummy
; };

1076 
	sj³g_šv”£_dù
 { 
dummy
; };

1077 
	sj³g_up§m¶”
 { 
dummy
; };

1078 
	sj³g_cŞÜ_decÚv”‹r
 { 
dummy
; };

1079 
	sj³g_cŞÜ_quªtiz”
 { 
dummy
; };

1091 #ifdeà
JPEG_INTERNALS


1092 
	~"j³gšt.h
"

1093 
	~"j”rÜ.h
"

	@jpegtran.c

14 
	~"cdj³g.h
"

15 
	~"Œªsuµ.h
"

16 
	~"jv”siÚ.h
"

17 
	#TWO_FILE_COMMANDLINE


	)

18 #ifdeà
USE_CCOMMAND


19 #ifdeà
__MWERKS__


20 
	~<SIOUX.h
>

21 
	~<cÚsŞe.h
>

23 #ifdeà
THINK_C


24 
	~<cÚsŞe.h
>

38 cÚ¡ * 
	g´ogÇme
;

39 * 
	goutf’ame
;

40 
JCOPY_OPTION
 
	gcİyİtiÚ
;

41 
j³g_ŒªsfÜm_šfo
 
	gŒªsfÜmİtiÚ
;

44 
	$LOCAL
()

45 
	$u§ge
 ()

48 
	`årštf
(
¡d”r
, "u§ge: % [sw™ches] ", 
´ogÇme
);

49 #ifdeà
TWO_FILE_COMMANDLINE


50 
	`årštf
(
¡d”r
, "inputfile outputfile\n");

52 
	`årštf
(
¡d”r
, "[inputfile]\n");

55 
	`årštf
(
¡d”r
, "Switches (names may be‡bbreviated):\n");

56 
	`årštf
(
¡d”r
, " -copy‚one Copy‚oƒxtra markers from source file\n");

57 
	`årštf
(
¡d”r
, " -copy comments Copy only comment markers (default)\n");

58 
	`årštf
(
¡d”r
, " -copy‡ll Copy‡llƒxtra markers\n");

59 #ifdeà
ENTROPY_OPT_SUPPORTED


60 
	`årštf
(
¡d”r
, " -optimize Optimize Huffmanable (smaller file, but slow compression)\n");

62 #ifdeà
C_PROGRESSIVE_SUPPORTED


63 
	`årštf
(
¡d”r
, " -progressive Create…rogressive JPEG file\n");

65 #ià
TRANSFORMS_SUPPORTED


66 
	`årštf
(
¡d”r
, "Switches for modifyinghe image:\n");

67 
	`årštf
(
¡d”r
, " -grayscale Reduceo grayscale (omit color data)\n");

68 
	`årštf
(
¡d”r
, " -flip [horizontal|vertical] Mirror image (left-right orop-bottom)\n");

69 
	`årštf
(
¡d”r
, " -rotate [90|180|270] Rotate image (degrees clockwise)\n");

70 
	`årštf
(
¡d”r
, " -transpose Transpose image\n");

71 
	`årštf
(
¡d”r
, " -transverse Transverseranspose image\n");

72 
	`årštf
(
¡d”r
, " -trim Drop‚on-transformableƒdge blocks\n");

74 
	`årštf
(
¡d”r
, "Switches for‡dvanced users:\n");

75 
	`årštf
(
¡d”r
, " -restart N Set„estart interval in„ows, or in blocks with B\n");

76 
	`årštf
(
¡d”r
, " -maxmemory N Maximum memoryo use (in kbytes)\n");

77 
	`årštf
(
¡d”r
, " -outfile‚ame Specify‚ame for output file\n");

78 
	`årštf
(
¡d”r
, " -verbose or -debug Emit debug output\n");

79 
	`årštf
(
¡d”r
, "Switches for wizards:\n");

80 #ifdeà
C_ARITH_CODING_SUPPORTED


81 
	`årštf
(
¡d”r
, " -arithmetic Use‡rithmetic coding\n");

83 #ifdeà
C_MULTISCAN_FILES_SUPPORTED


84 
	`årštf
(
¡d”r
, " -scans file Create multi-scan JPEG…er script file\n");

86 
	`ex™
(
EXIT_FAILURE
);

87 
	}
}

90 
	$LOCAL
()

91 
	$£Ëù_ŒªsfÜm
 (
JXFORM_CODE
 
ŒªsfÜm
)

96 #ià
TRANSFORMS_SUPPORTED


97 ià(
ŒªsfÜmİtiÚ
.
ŒªsfÜm
 =ğ
JXFORM_NONE
 ||

98 
ŒªsfÜmİtiÚ
.
ŒªsfÜm
 ==ransform) {

99 
ŒªsfÜmİtiÚ
.
ŒªsfÜm
 =ransform;

101 
	`årštf
(
¡d”r
, "%s: can only do one imageransformation‡t‡ime\n",

102 
´ogÇme
);

103 
	`u§ge
();

106 
	`årštf
(
¡d”r
, "%s: sorry, imageransformation was‚ot compiled\n",

107 
´ogÇme
);

108 
	`ex™
(
EXIT_FAILURE
);

110 
	}
}

113 
	$LOCAL
()

114 
	$·r£_sw™ches
 (
j_com´ess_±r
 
cšfo
, 
¬gc
, **
¬gv
,

115 
Ï¡_fe_¬g_£’
, 
boŞ—n
 
fÜ_»®
)

125 
¬gn
;

126 * 
¬g
;

127 
boŞ—n
 
sim¶e_´og»ssive
;

128 * 
sÿn§rg
 = 
NULL
;

131 
sim¶e_´og»ssive
 = 
FALSE
;

132 
outf’ame
 = 
NULL
;

133 
cİyİtiÚ
 = 
JCOPYOPT_DEFAULT
;

134 
ŒªsfÜmİtiÚ
.
ŒªsfÜm
 = 
JXFORM_NONE
;

135 
ŒªsfÜmİtiÚ
.
Œim
 = 
FALSE
;

136 
ŒªsfÜmİtiÚ
.
fÜû_g¿ysÿË
 = 
FALSE
;

137 
cšfo
->
”r
->
Œaû_Ëv–
 = 0;

141 
¬gn
 = 1;‡rgÀ< 
¬gc
;‡rgn++) {

142 
¬g
 = 
¬gv
[
¬gn
];

143 ià(*
¬g
 != '-') {

145 ià(
¬gn
 <ğ
Ï¡_fe_¬g_£’
) {

146 
outf’ame
 = 
NULL
;

151 
¬g
++;

153 ià(
	`keym©ch
(
¬g
, "arithmetic", 1)) {

155 #ifdeà
C_ARITH_CODING_SUPPORTED


156 
cšfo
->
¬™h_code
 = 
TRUE
;

158 
	`årštf
(
¡d”r
, "%s: sorry,‡rithmetic coding‚ot supported\n",

159 
´ogÇme
);

160 
	`ex™
(
EXIT_FAILURE
);

163 } ià(
	`keym©ch
(
¬g
, "copy", 1)) {

165 ià(++
¬gn
 >ğ
¬gc
)

166 
	`u§ge
();

167 ià(
	`keym©ch
(
¬gv
[
¬gn
], "none", 1)) {

168 
cİyİtiÚ
 = 
JCOPYOPT_NONE
;

169 } ià(
	`keym©ch
(
¬gv
[
¬gn
], "comments", 1)) {

170 
cİyİtiÚ
 = 
JCOPYOPT_COMMENTS
;

171 } ià(
	`keym©ch
(
¬gv
[
¬gn
], "all", 1)) {

172 
cİyİtiÚ
 = 
JCOPYOPT_ALL
;

174 
	`u§ge
();

176 } ià(
	`keym©ch
(
¬g
, "debug", 1) || keymatch(arg, "verbose", 1)) {

179 
boŞ—n
 
´š‹d_v”siÚ
 = 
FALSE
;

181 ià(! 
´š‹d_v”siÚ
) {

182 
	`årštf
(
¡d”r
, "Independent JPEG Group's JPEGTRAN, version %s\n%s\n",

183 
JVERSION
, 
JCOPYRIGHT
);

184 
´š‹d_v”siÚ
 = 
TRUE
;

186 
cšfo
->
”r
->
Œaû_Ëv–
++;

188 } ià(
	`keym©ch
(
¬g
, "flip", 1)) {

190 ià(++
¬gn
 >ğ
¬gc
)

191 
	`u§ge
();

192 ià(
	`keym©ch
(
¬gv
[
¬gn
], "horizontal", 1))

193 
	`£Ëù_ŒªsfÜm
(
JXFORM_FLIP_H
);

194 ià(
	`keym©ch
(
¬gv
[
¬gn
], "vertical", 1))

195 
	`£Ëù_ŒªsfÜm
(
JXFORM_FLIP_V
);

197 
	`u§ge
();

199 } ià(
	`keym©ch
(
¬g
, "grayscale", 1) || keymatch(arg, "greyscale",1)) {

201 #ià
TRANSFORMS_SUPPORTED


202 
ŒªsfÜmİtiÚ
.
fÜû_g¿ysÿË
 = 
TRUE
;

204 
	`£Ëù_ŒªsfÜm
(
JXFORM_NONE
);

207 } ià(
	`keym©ch
(
¬g
, "maxmemory", 3)) {

209 
lv®
;

210 
ch
 = 'x';

212 ià(++
¬gn
 >ğ
¬gc
)

213 
	`u§ge
();

214 ià(
	`ssÿnf
(
¬gv
[
¬gn
], "%ld%c", &
lv®
, &
ch
) < 1)

215 
	`u§ge
();

216 ià(
ch
 == 'm' || ch == 'M')

217 
lv®
 *= 1000L;

218 
cšfo
->
mem
->
max_memÜy_to_u£
 = 
lv®
 * 1000L;

220 } ià(
	`keym©ch
(
¬g
, "optimize", 1) || keymatch(arg, "optimise", 1)) {

222 #ifdeà
ENTROPY_OPT_SUPPORTED


223 
cšfo
->
İtimize_codšg
 = 
TRUE
;

225 
	`årštf
(
¡d”r
, "%s: sorry,ƒntropy optimization was‚ot compiled\n",

226 
´ogÇme
);

227 
	`ex™
(
EXIT_FAILURE
);

230 } ià(
	`keym©ch
(
¬g
, "outfile", 4)) {

232 ià(++
¬gn
 >ğ
¬gc
)

233 
	`u§ge
();

234 
outf’ame
 = 
¬gv
[
¬gn
];

236 } ià(
	`keym©ch
(
¬g
, "progressive", 1)) {

238 #ifdeà
C_PROGRESSIVE_SUPPORTED


239 
sim¶e_´og»ssive
 = 
TRUE
;

242 
	`årštf
(
¡d”r
, "%s: sorry,…rogressive output was‚ot compiled\n",

243 
´ogÇme
);

244 
	`ex™
(
EXIT_FAILURE
);

247 } ià(
	`keym©ch
(
¬g
, "restart", 1)) {

249 
lv®
;

250 
ch
 = 'x';

252 ià(++
¬gn
 >ğ
¬gc
)

253 
	`u§ge
();

254 ià(
	`ssÿnf
(
¬gv
[
¬gn
], "%ld%c", &
lv®
, &
ch
) < 1)

255 
	`u§ge
();

256 ià(
lv®
 < 0 ||†val > 65535L)

257 
	`u§ge
();

258 ià(
ch
 == 'b' || ch == 'B') {

259 
cšfo
->
»¡¬t_š‹rv®
 = (è
lv®
;

260 
cšfo
->
»¡¬t_š_rows
 = 0;

262 
cšfo
->
»¡¬t_š_rows
 = (è
lv®
;

266 } ià(
	`keym©ch
(
¬g
, "rotate", 2)) {

268 ià(++
¬gn
 >ğ
¬gc
)

269 
	`u§ge
();

270 ià(
	`keym©ch
(
¬gv
[
¬gn
], "90", 2))

271 
	`£Ëù_ŒªsfÜm
(
JXFORM_ROT_90
);

272 ià(
	`keym©ch
(
¬gv
[
¬gn
], "180", 3))

273 
	`£Ëù_ŒªsfÜm
(
JXFORM_ROT_180
);

274 ià(
	`keym©ch
(
¬gv
[
¬gn
], "270", 3))

275 
	`£Ëù_ŒªsfÜm
(
JXFORM_ROT_270
);

277 
	`u§ge
();

279 } ià(
	`keym©ch
(
¬g
, "scans", 1)) {

281 #ifdeà
C_MULTISCAN_FILES_SUPPORTED


282 ià(++
¬gn
 >ğ
¬gc
)

283 
	`u§ge
();

284 
sÿn§rg
 = 
¬gv
[
¬gn
];

287 
	`årštf
(
¡d”r
, "%s: sorry, multi-scan output was‚ot compiled\n",

288 
´ogÇme
);

289 
	`ex™
(
EXIT_FAILURE
);

292 } ià(
	`keym©ch
(
¬g
, "transpose", 1)) {

294 
	`£Ëù_ŒªsfÜm
(
JXFORM_TRANSPOSE
);

296 } ià(
	`keym©ch
(
¬g
, "transverse", 6)) {

298 
	`£Ëù_ŒªsfÜm
(
JXFORM_TRANSVERSE
);

300 } ià(
	`keym©ch
(
¬g
, "trim", 3)) {

302 
ŒªsfÜmİtiÚ
.
Œim
 = 
TRUE
;

305 
	`u§ge
();

311 ià(
fÜ_»®
) {

313 #ifdeà
C_PROGRESSIVE_SUPPORTED


314 ià(
sim¶e_´og»ssive
)

315 
	`j³g_sim¶e_´og»ssiÚ
(
cšfo
);

318 #ifdeà
C_MULTISCAN_FILES_SUPPORTED


319 ià(
sÿn§rg
 !ğ
NULL
)

320 ià(! 
	`»ad_sÿn_süt
(
cšfo
, 
sÿn§rg
))

321 
	`u§ge
();

325  
¬gn
;

326 
	}
}

334 
	$maš
 (
¬gc
, **
¬gv
)

336 
j³g_decom´ess_¡ruù
 
¤cšfo
;

337 
j³g_com´ess_¡ruù
 
d¡šfo
;

338 
j³g_”rÜ_mgr
 
j¤û¼
, 
jd¡”r
;

339 #ifdeà
PROGRESS_REPORT


340 
cdj³g_´og»ss_mgr
 
´og»ss
;

342 
jvœt_b¬¿y_±r
 * 
¤c_cÛf_¬¿ys
;

343 
jvœt_b¬¿y_±r
 * 
d¡_cÛf_¬¿ys
;

344 
fe_šdex
;

345 
FILE
 * 
šput_fe
;

346 
FILE
 * 
ouut_fe
;

349 #ifdeà
USE_CCOMMAND


350 
¬gc
 = 
	`ccommªd
(&
¬gv
);

353 
´ogÇme
 = 
¬gv
[0];

354 ià(
´ogÇme
 =ğ
NULL
 ||…rogname[0] == 0)

355 
´ogÇme
 = "jpegtran";

358 
¤cšfo
.
”r
 = 
	`j³g_¡d_”rÜ
(&
j¤û¼
);

359 
	`j³g_ü—‹_decom´ess
(&
¤cšfo
);

361 
d¡šfo
.
”r
 = 
	`j³g_¡d_”rÜ
(&
jd¡”r
);

362 
	`j³g_ü—‹_com´ess
(&
d¡šfo
);

367 #ifdeà
NEED_SIGNAL_CATCHER


368 
	`’abË_sigÇl_ÿtch”
((
j_commÚ_±r
è&
¤cšfo
);

379 
fe_šdex
 = 
	`·r£_sw™ches
(&
d¡šfo
, 
¬gc
, 
¬gv
, 0, 
FALSE
);

380 
j¤û¼
.
Œaû_Ëv–
 = 
jd¡”r
.trace_level;

381 
¤cšfo
.
mem
->
max_memÜy_to_u£
 = 
d¡šfo
.mem->max_memory_to_use;

383 #ifdeà
TWO_FILE_COMMANDLINE


385 ià(
outf’ame
 =ğ
NULL
) {

386 ià(
fe_šdex
 !ğ
¬gc
-2) {

387 
	`årštf
(
¡d”r
, "%s: must‚ame one input‡nd one output file\n",

388 
´ogÇme
);

389 
	`u§ge
();

391 
outf’ame
 = 
¬gv
[
fe_šdex
+1];

393 ià(
fe_šdex
 !ğ
¬gc
-1) {

394 
	`årštf
(
¡d”r
, "%s: must‚ame one input‡nd one output file\n",

395 
´ogÇme
);

396 
	`u§ge
();

401 ià(
fe_šdex
 < 
¬gc
-1) {

402 
	`årštf
(
¡d”r
, "%s: oÆy oÃ iÅuˆfe\n", 
´ogÇme
);

403 
	`u§ge
();

408 ià(
fe_šdex
 < 
¬gc
) {

409 ià((
šput_fe
 = 
	`fİ’
(
¬gv
[
fe_šdex
], 
READ_BINARY
)è=ğ
NULL
) {

410 
	`årštf
(
¡d”r
, "%s: cª'ˆİ’ %s\n", 
´ogÇme
, 
¬gv
[
fe_šdex
]);

411 
	`ex™
(
EXIT_FAILURE
);

415 
šput_fe
 = 
	`»ad_¡dš
();

419 ià(
outf’ame
 !ğ
NULL
) {

420 ià((
ouut_fe
 = 
	`fİ’
(
outf’ame
, 
WRITE_BINARY
)è=ğ
NULL
) {

421 
	`årštf
(
¡d”r
, "%s: cª'ˆİ’ %s\n", 
´ogÇme
, 
outf’ame
);

422 
	`ex™
(
EXIT_FAILURE
);

426 
ouut_fe
 = 
	`wr™e_¡dout
();

429 #ifdeà
PROGRESS_REPORT


430 
	`¡¬t_´og»ss_mÚ™Ü
((
j_commÚ_±r
è&
d¡šfo
, &
´og»ss
);

434 
	`j³g_¡dio_¤c
(&
¤cšfo
, 
šput_fe
);

437 
	`jcİy_m¬k”s_£tup
(&
¤cšfo
, 
cİyİtiÚ
);

440 (è
	`j³g_»ad_h—d”
(&
¤cšfo
, 
TRUE
);

445 #ià
TRANSFORMS_SUPPORTED


446 
	`jŒªsfÜm_»que¡_wÜk¥aû
(&
¤cšfo
, &
ŒªsfÜmİtiÚ
);

450 
¤c_cÛf_¬¿ys
 = 
	`j³g_»ad_cÛffic›Ás
(&
¤cšfo
);

453 
	`j³g_cİy_ü™iÿl_·¿m‘”s
(&
¤cšfo
, &
d¡šfo
);

458 #ià
TRANSFORMS_SUPPORTED


459 
d¡_cÛf_¬¿ys
 = 
	`jŒªsfÜm_adju¡_·¿m‘”s
(&
¤cšfo
, &
d¡šfo
,

460 
¤c_cÛf_¬¿ys
,

461 &
ŒªsfÜmİtiÚ
);

463 
d¡_cÛf_¬¿ys
 = 
¤c_cÛf_¬¿ys
;

467 
fe_šdex
 = 
	`·r£_sw™ches
(&
d¡šfo
, 
¬gc
, 
¬gv
, 0, 
TRUE
);

470 
	`j³g_¡dio_de¡
(&
d¡šfo
, 
ouut_fe
);

473 
	`j³g_wr™e_cÛffic›Ás
(&
d¡šfo
, 
d¡_cÛf_¬¿ys
);

476 
	`jcİy_m¬k”s_execu‹
(&
¤cšfo
, &
d¡šfo
, 
cİyİtiÚ
);

479 #ià
TRANSFORMS_SUPPORTED


480 
	`jŒªsfÜm_execu‹_ŒªsfÜm©iÚ
(&
¤cšfo
, &
d¡šfo
,

481 
¤c_cÛf_¬¿ys
,

482 &
ŒªsfÜmİtiÚ
);

486 
	`j³g_fšish_com´ess
(&
d¡šfo
);

487 
	`j³g_de¡roy_com´ess
(&
d¡šfo
);

488 (è
	`j³g_fšish_decom´ess
(&
¤cšfo
);

489 
	`j³g_de¡roy_decom´ess
(&
¤cšfo
);

492 ià(
šput_fe
 !ğ
¡dš
)

493 
	`fşo£
(
šput_fe
);

494 ià(
ouut_fe
 !ğ
¡dout
)

495 
	`fşo£
(
ouut_fe
);

497 #ifdeà
PROGRESS_REPORT


498 
	`’d_´og»ss_mÚ™Ü
((
j_commÚ_±r
è&
d¡šfo
);

502 
	`ex™
(
j¤û¼
.
num_w¬nšgs
 + 
jd¡”r
.num_w¬nšg ?
EXIT_WARNING
:
EXIT_SUCCESS
);

504 
	}
}

	@jquant1.c

13 
	#JPEG_INTERNALS


	)

14 
	~"jšşude.h
"

15 
	~"j³glib.h
"

17 #ifdeà
QUANT_1PASS_SUPPORTED


71 
	#ODITHER_SIZE
 16

	)

73 
	#ODITHER_CELLS
 (
ODITHER_SIZE
*ODITHER_SIZEè

	)

74 
	#ODITHER_MASK
 (
ODITHER_SIZE
-1è

	)

76 
	tODITHER_MATRIX
[
ODITHER_SIZE
][ODITHER_SIZE];

77 (*
	gODITHER_MATRIX_PTR
)[
ODITHER_SIZE
];

79 cÚ¡ 
UINT8
 
	gba£_d™h”_m©rix
[
ODITHER_SIZE
][ODITHER_SIZE] = {

127 #ià
BITS_IN_JSAMPLE
 == 8

128 
INT16
 
	tFSERROR
;

129 
	tLOCFSERROR
;

131 
INT32
 
	tFSERROR
;

132 
INT32
 
	tLOCFSERROR
;

135 
FSERROR
 
	tFAR
 *
	tFSERRPTR
;

140 
	#MAX_Q_COMPS
 4

	)

143 
j³g_cŞÜ_quªtiz”
 
	mpub
;

146 
JSAMPARRAY
 
	msv_cŞÜm­
;

147 
	msv_aùu®
;

149 
JSAMPARRAY
 
	mcŞÜšdex
;

154 
boŞ—n
 
	mis_·dded
;

156 
	mNcŞÜs
[
MAX_Q_COMPS
];

159 
	mrow_šdex
;

160 
ODITHER_MATRIX_PTR
 
	mod™h”
[
MAX_Q_COMPS
];

163 
FSERRPTR
 
	mf£¼Üs
[
MAX_Q_COMPS
];

164 
boŞ—n
 
	mÚ_odd_row
;

165 } 
	tmy_cquªtiz”
;

167 
my_cquªtiz”
 * 
	tmy_cquªtize_±r
;

185 
	$LOCAL
()

186 
	$£Ëù_ncŞÜs
 (
j_decom´ess_±r
 
cšfo
, 
NcŞÜs
[])

191 
nc
 = 
cšfo
->
out_cŞÜ_compÚ’ts
;

192 
max_cŞÜs
 = 
cšfo
->
desœed_numb”_of_cŞÜs
;

193 
tÙ®_cŞÜs
, 
œoÙ
, 
i
, 
j
;

194 
boŞ—n
 
chªged
;

195 
‹mp
;

196 cÚ¡ 
RGB_Üd”
[3] = { 
RGB_GREEN
, 
RGB_RED
, 
RGB_BLUE
 };

200 
œoÙ
 = 1;

202 
œoÙ
++;

203 
‹mp
 = 
œoÙ
;

204 
i
 = 1; i < 
nc
; i++)

205 
‹mp
 *ğ
œoÙ
;

206 } 
‹mp
 <ğ(è
max_cŞÜs
);

207 
œoÙ
--;

210 ià(
œoÙ
 < 2)

211 
	`ERREXIT1
(
cšfo
, 
JERR_QUANT_FEW_COLORS
, (è
‹mp
);

214 
tÙ®_cŞÜs
 = 1;

215 
i
 = 0; i < 
nc
; i++) {

216 
NcŞÜs
[
i
] = 
œoÙ
;

217 
tÙ®_cŞÜs
 *ğ
œoÙ
;

226 
chªged
 = 
FALSE
;

227 
i
 = 0; i < 
nc
; i++) {

228 
j
 = (
cšfo
->
out_cŞÜ_¥aû
 =ğ
JCS_RGB
 ? 
RGB_Üd”
[
i
] : i);

230 
‹mp
 = 
tÙ®_cŞÜs
 / 
NcŞÜs
[
j
];

231 
‹mp
 *ğ
NcŞÜs
[
j
]+1;

232 ià(
‹mp
 > (è
max_cŞÜs
)

234 
NcŞÜs
[
j
]++;

235 
tÙ®_cŞÜs
 = (è
‹mp
;

236 
chªged
 = 
TRUE
;

238 } 
chªged
);

240  
tÙ®_cŞÜs
;

241 
	}
}

244 
	$LOCAL
()

245 
	$ouut_v®ue
 (
j_decom´ess_±r
 
cšfo
, 
ci
, 
j
, 
maxj
)

254  (è(((
INT32
è
j
 * 
MAXJSAMPLE
 + 
maxj
/2) / maxj);

255 
	}
}

258 
	$LOCAL
()

259 
	$Ïrge¡_šput_v®ue
 (
j_decom´ess_±r
 
cšfo
, 
ci
, 
j
, 
maxj
)

264  (è(((
INT32
è(2*
j
 + 1è* 
MAXJSAMPLE
 + 
maxj
) / (2*maxj));

265 
	}
}

272 
	$LOCAL
()

273 
	$ü—‹_cŞÜm­
 (
j_decom´ess_±r
 
cšfo
)

275 
my_cquªtize_±r
 
cquªtize
 = (my_cquªtize_±rè
cšfo
->cquantize;

276 
JSAMPARRAY
 
cŞÜm­
;

277 
tÙ®_cŞÜs
;

278 
i
,
j
,
k
, 
nci
, 
blksize
, 
blkdi¡
, 
±r
, 
v®
;

281 
tÙ®_cŞÜs
 = 
	`£Ëù_ncŞÜs
(
cšfo
, 
cquªtize
->
NcŞÜs
);

284 ià(
cšfo
->
out_cŞÜ_compÚ’ts
 == 3)

285 
	`TRACEMS4
(
cšfo
, 1, 
JTRC_QUANT_3_NCOLORS
,

286 
tÙ®_cŞÜs
, 
cquªtize
->
NcŞÜs
[0],

287 
cquªtize
->
NcŞÜs
[1], cquantize->Ncolors[2]);

289 
	`TRACEMS1
(
cšfo
, 1, 
JTRC_QUANT_NCOLORS
, 
tÙ®_cŞÜs
);

295 
cŞÜm­
 = (*
cšfo
->
mem
->
®loc_§¼ay
)

296 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
,

297 (
JDIMENSION
è
tÙ®_cŞÜs
, (JDIMENSIONè
cšfo
->
out_cŞÜ_compÚ’ts
);

301 
blkdi¡
 = 
tÙ®_cŞÜs
;

303 
i
 = 0; i < 
cšfo
->
out_cŞÜ_compÚ’ts
; i++) {

305 
nci
 = 
cquªtize
->
NcŞÜs
[
i
];

306 
blksize
 = 
blkdi¡
 / 
nci
;

307 
j
 = 0; j < 
nci
; j++) {

309 
v®
 = 
	`ouut_v®ue
(
cšfo
, 
i
, 
j
, 
nci
-1);

311 
±r
 = 
j
 * 
blksize
;…Œ < 
tÙ®_cŞÜs
;…Œ +ğ
blkdi¡
) {

313 
k
 = 0; k < 
blksize
; k++)

314 
cŞÜm­
[
i
][
±r
+
k
] = (
JSAMPLE
è
v®
;

317 
blkdi¡
 = 
blksize
;

323 
cquªtize
->
sv_cŞÜm­
 = 
cŞÜm­
;

324 
cquªtize
->
sv_aùu®
 = 
tÙ®_cŞÜs
;

325 
	}
}

332 
	$LOCAL
()

333 
	$ü—‹_cŞÜšdex
 (
j_decom´ess_±r
 
cšfo
)

335 
my_cquªtize_±r
 
cquªtize
 = (my_cquªtize_±rè
cšfo
->cquantize;

336 
JSAMPROW
 
šdex±r
;

337 
i
,
j
,
k
, 
nci
, 
blksize
, 
v®
, 
·d
;

344 ià(
cšfo
->
d™h”_mode
 =ğ
JDITHER_ORDERED
) {

345 
·d
 = 
MAXJSAMPLE
*2;

346 
cquªtize
->
is_·dded
 = 
TRUE
;

348 
·d
 = 0;

349 
cquªtize
->
is_·dded
 = 
FALSE
;

352 
cquªtize
->
cŞÜšdex
 = (*
cšfo
->
mem
->
®loc_§¼ay
)

353 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
,

354 (
JDIMENSION
è(
MAXJSAMPLE
+1 + 
·d
),

355 (
JDIMENSION
è
cšfo
->
out_cŞÜ_compÚ’ts
);

358 
blksize
 = 
cquªtize
->
sv_aùu®
;

360 
i
 = 0; i < 
cšfo
->
out_cŞÜ_compÚ’ts
; i++) {

362 
nci
 = 
cquªtize
->
NcŞÜs
[
i
];

363 
blksize
 = blksiz/ 
nci
;

366 ià(
·d
)

367 
cquªtize
->
cŞÜšdex
[
i
] +ğ
MAXJSAMPLE
;

371 
šdex±r
 = 
cquªtize
->
cŞÜšdex
[
i
];

372 
v®
 = 0;

373 
k
 = 
	`Ïrge¡_šput_v®ue
(
cšfo
, 
i
, 0, 
nci
-1);

374 
j
 = 0; j <ğ
MAXJSAMPLE
; j++) {

375 
j
 > 
k
)

376 
k
 = 
	`Ïrge¡_šput_v®ue
(
cšfo
, 
i
, ++
v®
, 
nci
-1);

378 
šdex±r
[
j
] = (
JSAMPLE
è(
v®
 * 
blksize
);

381 ià(
·d
)

382 
j
 = 1; j <ğ
MAXJSAMPLE
; j++) {

383 
šdex±r
[-
j
] = indexptr[0];

384 
šdex±r
[
MAXJSAMPLE
+
j
] = indexptr[MAXJSAMPLE];

387 
	}
}

395 
	$LOCAL
(
ODITHER_MATRIX_PTR
)

396 
	$make_od™h”_¬¿y
 (
j_decom´ess_±r
 
cšfo
, 
ncŞÜs
)

398 
ODITHER_MATRIX_PTR
 
od™h”
;

399 
j
,
k
;

400 
INT32
 
num
,
d’
;

402 
od™h”
 = (
ODITHER_MATRIX_PTR
)

403 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

404 
	`SIZEOF
(
ODITHER_MATRIX
));

410 
d’
 = 2 * 
ODITHER_CELLS
 * ((
INT32
è(
ncŞÜs
 - 1));

411 
j
 = 0; j < 
ODITHER_SIZE
; j++) {

412 
k
 = 0; k < 
ODITHER_SIZE
; k++) {

413 
num
 = ((
INT32
è(
ODITHER_CELLS
-1 - 2*(()
ba£_d™h”_m©rix
[
j
][
k
])))

414 * 
MAXJSAMPLE
;

418 
od™h”
[
j
][
k
] = (è(
num
<0 ? -((-num)/
d’
) :‚um/den);

421  
od™h”
;

422 
	}
}

431 
	$LOCAL
()

432 
	$ü—‹_od™h”_bËs
 (
j_decom´ess_±r
 
cšfo
)

434 
my_cquªtize_±r
 
cquªtize
 = (my_cquªtize_±rè
cšfo
->cquantize;

435 
ODITHER_MATRIX_PTR
 
od™h”
;

436 
i
, 
j
, 
nci
;

438 
i
 = 0; i < 
cšfo
->
out_cŞÜ_compÚ’ts
; i++) {

439 
nci
 = 
cquªtize
->
NcŞÜs
[
i
];

440 
od™h”
 = 
NULL
;

441 
j
 = 0; j < 
i
; j++) {

442 ià(
nci
 =ğ
cquªtize
->
NcŞÜs
[
j
]) {

443 
od™h”
 = 
cquªtize
->od™h”[
j
];

447 ià(
od™h”
 =ğ
NULL
)

448 
od™h”
 = 
	`make_od™h”_¬¿y
(
cšfo
, 
nci
);

449 
cquªtize
->
od™h”
[
i
] = odither;

451 
	}
}

458 
	$METHODDEF
()

459 
	$cŞÜ_quªtize
 (
j_decom´ess_±r
 
cšfo
, 
JSAMPARRAY
 
šput_buf
,

460 
JSAMPARRAY
 
ouut_buf
, 
num_rows
)

463 
my_cquªtize_±r
 
cquªtize
 = (my_cquªtize_±rè
cšfo
->cquantize;

464 
JSAMPARRAY
 
cŞÜšdex
 = 
cquªtize
->colorindex;

465 
pixcode
, 
ci
;

466 
JSAMPROW
 
±rš
, 
±rout
;

467 
row
;

468 
JDIMENSION
 
cŞ
;

469 
JDIMENSION
 
width
 = 
cšfo
->
ouut_width
;

470 
nc
 = 
cšfo
->
out_cŞÜ_compÚ’ts
;

472 
row
 = 0;„ow < 
num_rows
;„ow++) {

473 
±rš
 = 
šput_buf
[
row
];

474 
±rout
 = 
ouut_buf
[
row
];

475 
cŞ
 = 
width
; col > 0; col--) {

476 
pixcode
 = 0;

477 
ci
 = 0; c˜< 
nc
; ci++) {

478 
pixcode
 +ğ
	`GETJSAMPLE
(
cŞÜšdex
[
ci
][GETJSAMPLE(*
±rš
++)]);

480 *
±rout
++ = (
JSAMPLE
è
pixcode
;

483 
	}
}

486 
	$METHODDEF
()

487 
	$cŞÜ_quªtize3
 (
j_decom´ess_±r
 
cšfo
, 
JSAMPARRAY
 
šput_buf
,

488 
JSAMPARRAY
 
ouut_buf
, 
num_rows
)

491 
my_cquªtize_±r
 
cquªtize
 = (my_cquªtize_±rè
cšfo
->cquantize;

492 
pixcode
;

493 
JSAMPROW
 
±rš
, 
±rout
;

494 
JSAMPROW
 
cŞÜšdex0
 = 
cquªtize
->
cŞÜšdex
[0];

495 
JSAMPROW
 
cŞÜšdex1
 = 
cquªtize
->
cŞÜšdex
[1];

496 
JSAMPROW
 
cŞÜšdex2
 = 
cquªtize
->
cŞÜšdex
[2];

497 
row
;

498 
JDIMENSION
 
cŞ
;

499 
JDIMENSION
 
width
 = 
cšfo
->
ouut_width
;

501 
row
 = 0;„ow < 
num_rows
;„ow++) {

502 
±rš
 = 
šput_buf
[
row
];

503 
±rout
 = 
ouut_buf
[
row
];

504 
cŞ
 = 
width
; col > 0; col--) {

505 
pixcode
 = 
	`GETJSAMPLE
(
cŞÜšdex0
[GETJSAMPLE(*
±rš
++)]);

506 
pixcode
 +ğ
	`GETJSAMPLE
(
cŞÜšdex1
[GETJSAMPLE(*
±rš
++)]);

507 
pixcode
 +ğ
	`GETJSAMPLE
(
cŞÜšdex2
[GETJSAMPLE(*
±rš
++)]);

508 *
±rout
++ = (
JSAMPLE
è
pixcode
;

511 
	}
}

514 
	$METHODDEF
()

515 
	$quªtize_Üd_d™h”
 (
j_decom´ess_±r
 
cšfo
, 
JSAMPARRAY
 
šput_buf
,

516 
JSAMPARRAY
 
ouut_buf
, 
num_rows
)

519 
my_cquªtize_±r
 
cquªtize
 = (my_cquªtize_±rè
cšfo
->cquantize;

520 
JSAMPROW
 
šput_±r
;

521 
JSAMPROW
 
ouut_±r
;

522 
JSAMPROW
 
cŞÜšdex_ci
;

523 * 
d™h”
;

524 
row_šdex
, 
cŞ_šdex
;

525 
nc
 = 
cšfo
->
out_cŞÜ_compÚ’ts
;

526 
ci
;

527 
row
;

528 
JDIMENSION
 
cŞ
;

529 
JDIMENSION
 
width
 = 
cšfo
->
ouut_width
;

531 
row
 = 0;„ow < 
num_rows
;„ow++) {

533 
	`jz”o_çr
((
FAR
 *è
ouut_buf
[
row
],

534 (
size_t
è(
width
 * 
	`SIZEOF
(
JSAMPLE
)));

535 
row_šdex
 = 
cquªtize
->row_index;

536 
ci
 = 0; c˜< 
nc
; ci++) {

537 
šput_±r
 = 
šput_buf
[
row
] + 
ci
;

538 
ouut_±r
 = 
ouut_buf
[
row
];

539 
cŞÜšdex_ci
 = 
cquªtize
->
cŞÜšdex
[
ci
];

540 
d™h”
 = 
cquªtize
->
od™h”
[
ci
][
row_šdex
];

541 
cŞ_šdex
 = 0;

543 
cŞ
 = 
width
; col > 0; col--) {

551 *
ouut_±r
 +ğ
cŞÜšdex_ci
[
	`GETJSAMPLE
(*
šput_±r
)+
d™h”
[
cŞ_šdex
]];

552 
šput_±r
 +ğ
nc
;

553 
ouut_±r
++;

554 
cŞ_šdex
 = (cŞ_šdex + 1è& 
ODITHER_MASK
;

558 
row_šdex
 = (row_šdex + 1è& 
ODITHER_MASK
;

559 
cquªtize
->
row_šdex
 =„ow_index;

561 
	}
}

564 
	$METHODDEF
()

565 
	$quªtize3_Üd_d™h”
 (
j_decom´ess_±r
 
cšfo
, 
JSAMPARRAY
 
šput_buf
,

566 
JSAMPARRAY
 
ouut_buf
, 
num_rows
)

569 
my_cquªtize_±r
 
cquªtize
 = (my_cquªtize_±rè
cšfo
->cquantize;

570 
pixcode
;

571 
JSAMPROW
 
šput_±r
;

572 
JSAMPROW
 
ouut_±r
;

573 
JSAMPROW
 
cŞÜšdex0
 = 
cquªtize
->
cŞÜšdex
[0];

574 
JSAMPROW
 
cŞÜšdex1
 = 
cquªtize
->
cŞÜšdex
[1];

575 
JSAMPROW
 
cŞÜšdex2
 = 
cquªtize
->
cŞÜšdex
[2];

576 * 
d™h”0
;

577 * 
d™h”1
;

578 * 
d™h”2
;

579 
row_šdex
, 
cŞ_šdex
;

580 
row
;

581 
JDIMENSION
 
cŞ
;

582 
JDIMENSION
 
width
 = 
cšfo
->
ouut_width
;

584 
row
 = 0;„ow < 
num_rows
;„ow++) {

585 
row_šdex
 = 
cquªtize
->row_index;

586 
šput_±r
 = 
šput_buf
[
row
];

587 
ouut_±r
 = 
ouut_buf
[
row
];

588 
d™h”0
 = 
cquªtize
->
od™h”
[0][
row_šdex
];

589 
d™h”1
 = 
cquªtize
->
od™h”
[1][
row_šdex
];

590 
d™h”2
 = 
cquªtize
->
od™h”
[2][
row_šdex
];

591 
cŞ_šdex
 = 0;

593 
cŞ
 = 
width
; col > 0; col--) {

594 
pixcode
 = 
	`GETJSAMPLE
(
cŞÜšdex0
[GETJSAMPLE(*
šput_±r
++) +

595 
d™h”0
[
cŞ_šdex
]]);

596 
pixcode
 +ğ
	`GETJSAMPLE
(
cŞÜšdex1
[GETJSAMPLE(*
šput_±r
++) +

597 
d™h”1
[
cŞ_šdex
]]);

598 
pixcode
 +ğ
	`GETJSAMPLE
(
cŞÜšdex2
[GETJSAMPLE(*
šput_±r
++) +

599 
d™h”2
[
cŞ_šdex
]]);

600 *
ouut_±r
++ = (
JSAMPLE
è
pixcode
;

601 
cŞ_šdex
 = (cŞ_šdex + 1è& 
ODITHER_MASK
;

603 
row_šdex
 = (row_šdex + 1è& 
ODITHER_MASK
;

604 
cquªtize
->
row_šdex
 =„ow_index;

606 
	}
}

609 
	$METHODDEF
()

610 
	$quªtize_fs_d™h”
 (
j_decom´ess_±r
 
cšfo
, 
JSAMPARRAY
 
šput_buf
,

611 
JSAMPARRAY
 
ouut_buf
, 
num_rows
)

614 
my_cquªtize_±r
 
cquªtize
 = (my_cquªtize_±rè
cšfo
->cquantize;

615 
LOCFSERROR
 
cur
;

616 
LOCFSERROR
 
b–ow”r
;

617 
LOCFSERROR
 
b´ev”r
;

618 
LOCFSERROR
 
bÃx‹¼
;

619 
LOCFSERROR
 
d–
;

620 
FSERRPTR
 
”rÜ±r
;

621 
JSAMPROW
 
šput_±r
;

622 
JSAMPROW
 
ouut_±r
;

623 
JSAMPROW
 
cŞÜšdex_ci
;

624 
JSAMPROW
 
cŞÜm­_ci
;

625 
pixcode
;

626 
nc
 = 
cšfo
->
out_cŞÜ_compÚ’ts
;

627 
dœ
;

628 
dœnc
;

629 
ci
;

630 
row
;

631 
JDIMENSION
 
cŞ
;

632 
JDIMENSION
 
width
 = 
cšfo
->
ouut_width
;

633 
JSAMPLE
 *
¿nge_lim™
 = 
cšfo
->
§m¶e_¿nge_lim™
;

634 
SHIFT_TEMPS


636 
row
 = 0;„ow < 
num_rows
;„ow++) {

638 
	`jz”o_çr
((
FAR
 *è
ouut_buf
[
row
],

639 (
size_t
è(
width
 * 
	`SIZEOF
(
JSAMPLE
)));

640 
ci
 = 0; c˜< 
nc
; ci++) {

641 
šput_±r
 = 
šput_buf
[
row
] + 
ci
;

642 
ouut_±r
 = 
ouut_buf
[
row
];

643 ià(
cquªtize
->
Ú_odd_row
) {

645 
šput_±r
 +ğ(
width
-1è* 
nc
;

646 
ouut_±r
 +ğ
width
-1;

647 
dœ
 = -1;

648 
dœnc
 = -
nc
;

649 
”rÜ±r
 = 
cquªtize
->
f£¼Üs
[
ci
] + (
width
+1);

652 
dœ
 = 1;

653 
dœnc
 = 
nc
;

654 
”rÜ±r
 = 
cquªtize
->
f£¼Üs
[
ci
];

656 
cŞÜšdex_ci
 = 
cquªtize
->
cŞÜšdex
[
ci
];

657 
cŞÜm­_ci
 = 
cquªtize
->
sv_cŞÜm­
[
ci
];

659 
cur
 = 0;

661 
b–ow”r
 = 
b´ev”r
 = 0;

663 
cŞ
 = 
width
; col > 0; col--) {

672 
cur
 = 
	`RIGHT_SHIFT
(cu¸+ 
”rÜ±r
[
dœ
] + 8, 4);

677 
cur
 +ğ
	`GETJSAMPLE
(*
šput_±r
);

678 
cur
 = 
	`GETJSAMPLE
(
¿nge_lim™
[cur]);

680 
pixcode
 = 
	`GETJSAMPLE
(
cŞÜšdex_ci
[
cur
]);

681 *
ouut_±r
 +ğ(
JSAMPLE
è
pixcode
;

685 
cur
 -ğ
	`GETJSAMPLE
(
cŞÜm­_ci
[
pixcode
]);

690 
bÃx‹¼
 = 
cur
;

691 
d–
 = 
cur
 * 2;

692 
cur
 +ğ
d–
;

693 
”rÜ±r
[0] = (
FSERROR
è(
b´ev”r
 + 
cur
);

694 
cur
 +ğ
d–
;

695 
b´ev”r
 = 
b–ow”r
 + 
cur
;

696 
b–ow”r
 = 
bÃx‹¼
;

697 
cur
 +ğ
d–
;

702 
šput_±r
 +ğ
dœnc
;

703 
ouut_±r
 +ğ
dœ
;

704 
”rÜ±r
 +ğ
dœ
;

710 
”rÜ±r
[0] = (
FSERROR
è
b´ev”r
;

712 
cquªtize
->
Ú_odd_row
 = (cquªtize->Ú_odd_row ? 
FALSE
 : 
TRUE
);

714 
	}
}

721 
	$LOCAL
()

722 
	$®loc_fs_wÜk¥aû
 (
j_decom´ess_±r
 
cšfo
)

724 
my_cquªtize_±r
 
cquªtize
 = (my_cquªtize_±rè
cšfo
->cquantize;

725 
size_t
 
¬¿ysize
;

726 
i
;

728 
¬¿ysize
 = (
size_t
è((
cšfo
->
ouut_width
 + 2è* 
	`SIZEOF
(
FSERROR
));

729 
i
 = 0; i < 
cšfo
->
out_cŞÜ_compÚ’ts
; i++) {

730 
cquªtize
->
f£¼Üs
[
i
] = (
FSERRPTR
)

731 (*
cšfo
->
mem
->
®loc_Ïrge
)((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
, 
¬¿ysize
);

733 
	}
}

740 
	$METHODDEF
()

741 
	$¡¬t_·ss_1_quªt
 (
j_decom´ess_±r
 
cšfo
, 
boŞ—n
 
is_´e_sÿn
)

743 
my_cquªtize_±r
 
cquªtize
 = (my_cquªtize_±rè
cšfo
->cquantize;

744 
size_t
 
¬¿ysize
;

745 
i
;

748 
cšfo
->
cŞÜm­
 = 
cquªtize
->
sv_cŞÜm­
;

749 
cšfo
->
aùu®_numb”_of_cŞÜs
 = 
cquªtize
->
sv_aùu®
;

752 
cšfo
->
d™h”_mode
) {

753 
JDITHER_NONE
:

754 ià(
cšfo
->
out_cŞÜ_compÚ’ts
 == 3)

755 
cquªtize
->
pub
.
cŞÜ_quªtize
 = 
cŞÜ_quªtize3
;

757 
cquªtize
->
pub
.
cŞÜ_quªtize
 = color_quantize;

759 
JDITHER_ORDERED
:

760 ià(
cšfo
->
out_cŞÜ_compÚ’ts
 == 3)

761 
cquªtize
->
pub
.
cŞÜ_quªtize
 = 
quªtize3_Üd_d™h”
;

763 
cquªtize
->
pub
.
cŞÜ_quªtize
 = 
quªtize_Üd_d™h”
;

764 
cquªtize
->
row_šdex
 = 0;

769 ià(! 
cquªtize
->
is_·dded
)

770 
	`ü—‹_cŞÜšdex
(
cšfo
);

772 ià(
cquªtize
->
od™h”
[0] =ğ
NULL
)

773 
	`ü—‹_od™h”_bËs
(
cšfo
);

775 
JDITHER_FS
:

776 
cquªtize
->
pub
.
cŞÜ_quªtize
 = 
quªtize_fs_d™h”
;

777 
cquªtize
->
Ú_odd_row
 = 
FALSE
;

779 ià(
cquªtize
->
f£¼Üs
[0] =ğ
NULL
)

780 
	`®loc_fs_wÜk¥aû
(
cšfo
);

782 
¬¿ysize
 = (
size_t
è((
cšfo
->
ouut_width
 + 2è* 
	`SIZEOF
(
FSERROR
));

783 
i
 = 0; i < 
cšfo
->
out_cŞÜ_compÚ’ts
; i++)

784 
	`jz”o_çr
((
FAR
 *è
cquªtize
->
f£¼Üs
[
i
], 
¬¿ysize
);

787 
	`ERREXIT
(
cšfo
, 
JERR_NOT_COMPILED
);

790 
	}
}

797 
	$METHODDEF
()

798 
	$fšish_·ss_1_quªt
 (
j_decom´ess_±r
 
cšfo
)

801 
	}
}

809 
	$METHODDEF
()

810 
	$Ãw_cŞÜ_m­_1_quªt
 (
j_decom´ess_±r
 
cšfo
)

812 
	`ERREXIT
(
cšfo
, 
JERR_MODE_CHANGE
);

813 
	}
}

820 
	$GLOBAL
()

821 
	$jš™_1·ss_quªtiz”
 (
j_decom´ess_±r
 
cšfo
)

823 
my_cquªtize_±r
 
cquªtize
;

825 
cquªtize
 = (
my_cquªtize_±r
)

826 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

827 
	`SIZEOF
(
my_cquªtiz”
));

828 
cšfo
->
cquªtize
 = (
j³g_cŞÜ_quªtiz”
 *) cquantize;

829 
cquªtize
->
pub
.
¡¬t_·ss
 = 
¡¬t_·ss_1_quªt
;

830 
cquªtize
->
pub
.
fšish_·ss
 = 
fšish_·ss_1_quªt
;

831 
cquªtize
->
pub
.
Ãw_cŞÜ_m­
 = 
Ãw_cŞÜ_m­_1_quªt
;

832 
cquªtize
->
f£¼Üs
[0] = 
NULL
;

833 
cquªtize
->
od™h”
[0] = 
NULL
;

836 ià(
cšfo
->
out_cŞÜ_compÚ’ts
 > 
MAX_Q_COMPS
)

837 
	`ERREXIT1
(
cšfo
, 
JERR_QUANT_COMPONENTS
, 
MAX_Q_COMPS
);

839 ià(
cšfo
->
desœed_numb”_of_cŞÜs
 > (
MAXJSAMPLE
+1))

840 
	`ERREXIT1
(
cšfo
, 
JERR_QUANT_MANY_COLORS
, 
MAXJSAMPLE
+1);

843 
	`ü—‹_cŞÜm­
(
cšfo
);

844 
	`ü—‹_cŞÜšdex
(
cšfo
);

852 ià(
cšfo
->
d™h”_mode
 =ğ
JDITHER_FS
)

853 
	`®loc_fs_wÜk¥aû
(
cšfo
);

854 
	}
}

	@jquant2.c

20 
	#JPEG_INTERNALS


	)

21 
	~"jšşude.h
"

22 
	~"j³glib.h
"

24 #ifdeà
QUANT_2PASS_SUPPORTED


73 
	#R_SCALE
 2

	)

74 
	#G_SCALE
 3

	)

75 
	#B_SCALE
 1

	)

84 #ià
RGB_RED
 == 0

85 
	#C0_SCALE
 
R_SCALE


	)

87 #ià
RGB_BLUE
 == 0

88 
	#C0_SCALE
 
B_SCALE


	)

90 #ià
RGB_GREEN
 == 1

91 
	#C1_SCALE
 
G_SCALE


	)

93 #ià
RGB_RED
 == 2

94 
	#C2_SCALE
 
R_SCALE


	)

96 #ià
RGB_BLUE
 == 2

97 
	#C2_SCALE
 
B_SCALE


	)

127 
	#MAXNUMCOLORS
 (
MAXJSAMPLE
+1è

	)

132 
	#HIST_C0_BITS
 5

	)

133 
	#HIST_C1_BITS
 6

	)

134 
	#HIST_C2_BITS
 5

	)

137 
	#HIST_C0_ELEMS
 (1<<
HIST_C0_BITS
)

	)

138 
	#HIST_C1_ELEMS
 (1<<
HIST_C1_BITS
)

	)

139 
	#HIST_C2_ELEMS
 (1<<
HIST_C2_BITS
)

	)

142 
	#C0_SHIFT
 (
BITS_IN_JSAMPLE
-
HIST_C0_BITS
)

	)

143 
	#C1_SHIFT
 (
BITS_IN_JSAMPLE
-
HIST_C1_BITS
)

	)

144 
	#C2_SHIFT
 (
BITS_IN_JSAMPLE
-
HIST_C2_BITS
)

	)

147 
UINT16
 
	thi¡ûÎ
;

149 
hi¡ûÎ
 
	tFAR
 * 
	thi¡±r
;

151 
hi¡ûÎ
 
	thi¡1d
[
HIST_C2_ELEMS
];

152 
hi¡1d
 
	tFAR
 * 
	thi¡2d
;

153 
hi¡2d
 * 
	thi¡3d
;

180 #ià
BITS_IN_JSAMPLE
 == 8

181 
INT16
 
	tFSERROR
;

182 
	tLOCFSERROR
;

184 
INT32
 
	tFSERROR
;

185 
INT32
 
	tLOCFSERROR
;

188 
FSERROR
 
	tFAR
 *
	tFSERRPTR
;

194 
j³g_cŞÜ_quªtiz”
 
	mpub
;

197 
JSAMPARRAY
 
	msv_cŞÜm­
;

198 
	mdesœed
;

201 
hi¡3d
 
	mhi¡og¿m
;

203 
boŞ—n
 
	mÃeds_z”Ûd
;

206 
FSERRPTR
 
	mf£¼Üs
;

207 
boŞ—n
 
	mÚ_odd_row
;

208 * 
	m”rÜ_lim™”
;

209 } 
	tmy_cquªtiz”
;

211 
my_cquªtiz”
 * 
	tmy_cquªtize_±r
;

223 
	$METHODDEF
()

224 
	$´esÿn_quªtize
 (
j_decom´ess_±r
 
cšfo
, 
JSAMPARRAY
 
šput_buf
,

225 
JSAMPARRAY
 
ouut_buf
, 
num_rows
)

227 
my_cquªtize_±r
 
cquªtize
 = (my_cquªtize_±rè
cšfo
->cquantize;

228 
JSAMPROW
 
±r
;

229 
hi¡±r
 
hi¡p
;

230 
hi¡3d
 
hi¡og¿m
 = 
cquªtize
->histogram;

231 
row
;

232 
JDIMENSION
 
cŞ
;

233 
JDIMENSION
 
width
 = 
cšfo
->
ouut_width
;

235 
row
 = 0;„ow < 
num_rows
;„ow++) {

236 
±r
 = 
šput_buf
[
row
];

237 
cŞ
 = 
width
; col > 0; col--) {

239 
hi¡p
 = & 
hi¡og¿m
[
	`GETJSAMPLE
(
±r
[0]è>> 
C0_SHIFT
]

240 [
	`GETJSAMPLE
(
±r
[1]è>> 
C1_SHIFT
]

241 [
	`GETJSAMPLE
(
±r
[2]è>> 
C2_SHIFT
];

243 ià(++(*
hi¡p
) <= 0)

244 (*
hi¡p
)--;

245 
±r
 += 3;

248 
	}
}

260 
	mc0mš
, 
	mc0max
;

261 
	mc1mš
, 
	mc1max
;

262 
	mc2mš
, 
	mc2max
;

264 
INT32
 
	mvŞume
;

266 
	mcŞÜcouÁ
;

267 } 
	tbox
;

269 
box
 * 
	tbox±r
;

272 
	$LOCAL
(
box±r
)

273 
	$fšd_bigge¡_cŞÜ_pİ
 (
box±r
 
boxli¡
, 
numboxes
)

277 
box±r
 
boxp
;

278 
i
;

279 
maxc
 = 0;

280 
box±r
 
which
 = 
NULL
;

282 
i
 = 0, 
boxp
 = 
boxli¡
; i < 
numboxes
; i++, boxp++) {

283 ià(
boxp
->
cŞÜcouÁ
 > 
maxc
 && boxp->
vŞume
 > 0) {

284 
which
 = 
boxp
;

285 
maxc
 = 
boxp
->
cŞÜcouÁ
;

288  
which
;

289 
	}
}

292 
	$LOCAL
(
box±r
)

293 
	$fšd_bigge¡_vŞume
 (
box±r
 
boxli¡
, 
numboxes
)

297 
box±r
 
boxp
;

298 
i
;

299 
INT32
 
maxv
 = 0;

300 
box±r
 
which
 = 
NULL
;

302 
i
 = 0, 
boxp
 = 
boxli¡
; i < 
numboxes
; i++, boxp++) {

303 ià(
boxp
->
vŞume
 > 
maxv
) {

304 
which
 = 
boxp
;

305 
maxv
 = 
boxp
->
vŞume
;

308  
which
;

309 
	}
}

312 
	$LOCAL
()

313 
	$upd©e_box
 (
j_decom´ess_±r
 
cšfo
, 
box±r
 
boxp
)

317 
my_cquªtize_±r
 
cquªtize
 = (my_cquªtize_±rè
cšfo
->cquantize;

318 
hi¡3d
 
hi¡og¿m
 = 
cquªtize
->histogram;

319 
hi¡±r
 
hi¡p
;

320 
c0
,
c1
,
c2
;

321 
c0mš
,
c0max
,
c1mš
,
c1max
,
c2mš
,
c2max
;

322 
INT32
 
di¡0
,
di¡1
,
di¡2
;

323 
ccouÁ
;

325 
c0mš
 = 
boxp
->c0mš; 
c0max
 = boxp->c0max;

326 
c1mš
 = 
boxp
->c1mš; 
c1max
 = boxp->c1max;

327 
c2mš
 = 
boxp
->c2mš; 
c2max
 = boxp->c2max;

329 ià(
c0max
 > 
c0mš
)

330 
c0
 = 
c0mš
; c0 <ğ
c0max
; c0++)

331 
c1
 = 
c1mš
; c1 <ğ
c1max
; c1++) {

332 
hi¡p
 = & 
hi¡og¿m
[
c0
][
c1
][
c2mš
];

333 
c2
 = 
c2mš
; c2 <ğ
c2max
; c2++)

334 ià(*
hi¡p
++ != 0) {

335 
boxp
->
c0mš
 = c0mš = 
c0
;

336 
have_c0mš
;

339 
have_c0mš
:

340 ià(
c0max
 > 
c0mš
)

341 
c0
 = 
c0max
; c0 >ğ
c0mš
; c0--)

342 
c1
 = 
c1mš
; c1 <ğ
c1max
; c1++) {

343 
hi¡p
 = & 
hi¡og¿m
[
c0
][
c1
][
c2mš
];

344 
c2
 = 
c2mš
; c2 <ğ
c2max
; c2++)

345 ià(*
hi¡p
++ != 0) {

346 
boxp
->
c0max
 = c0max = 
c0
;

347 
have_c0max
;

350 
have_c0max
:

351 ià(
c1max
 > 
c1mš
)

352 
c1
 = 
c1mš
; c1 <ğ
c1max
; c1++)

353 
c0
 = 
c0mš
; c0 <ğ
c0max
; c0++) {

354 
hi¡p
 = & 
hi¡og¿m
[
c0
][
c1
][
c2mš
];

355 
c2
 = 
c2mš
; c2 <ğ
c2max
; c2++)

356 ià(*
hi¡p
++ != 0) {

357 
boxp
->
c1mš
 = c1mš = 
c1
;

358 
have_c1mš
;

361 
have_c1mš
:

362 ià(
c1max
 > 
c1mš
)

363 
c1
 = 
c1max
; c1 >ğ
c1mš
; c1--)

364 
c0
 = 
c0mš
; c0 <ğ
c0max
; c0++) {

365 
hi¡p
 = & 
hi¡og¿m
[
c0
][
c1
][
c2mš
];

366 
c2
 = 
c2mš
; c2 <ğ
c2max
; c2++)

367 ià(*
hi¡p
++ != 0) {

368 
boxp
->
c1max
 = c1max = 
c1
;

369 
have_c1max
;

372 
have_c1max
:

373 ià(
c2max
 > 
c2mš
)

374 
c2
 = 
c2mš
; c2 <ğ
c2max
; c2++)

375 
c0
 = 
c0mš
; c0 <ğ
c0max
; c0++) {

376 
hi¡p
 = & 
hi¡og¿m
[
c0
][
c1mš
][
c2
];

377 
c1
 = 
c1mš
; c1 <ğ
c1max
; c1++, 
hi¡p
 +ğ
HIST_C2_ELEMS
)

378 ià(*
hi¡p
 != 0) {

379 
boxp
->
c2mš
 = c2mš = 
c2
;

380 
have_c2mš
;

383 
have_c2mš
:

384 ià(
c2max
 > 
c2mš
)

385 
c2
 = 
c2max
; c2 >ğ
c2mš
; c2--)

386 
c0
 = 
c0mš
; c0 <ğ
c0max
; c0++) {

387 
hi¡p
 = & 
hi¡og¿m
[
c0
][
c1mš
][
c2
];

388 
c1
 = 
c1mš
; c1 <ğ
c1max
; c1++, 
hi¡p
 +ğ
HIST_C2_ELEMS
)

389 ià(*
hi¡p
 != 0) {

390 
boxp
->
c2max
 = c2max = 
c2
;

391 
have_c2max
;

394 
have_c2max
:

404 
di¡0
 = ((
c0max
 - 
c0mš
è<< 
C0_SHIFT
è* 
C0_SCALE
;

405 
di¡1
 = ((
c1max
 - 
c1mš
è<< 
C1_SHIFT
è* 
C1_SCALE
;

406 
di¡2
 = ((
c2max
 - 
c2mš
è<< 
C2_SHIFT
è* 
C2_SCALE
;

407 
boxp
->
vŞume
 = 
di¡0
*di¡0 + 
di¡1
*di¡1 + 
di¡2
*dist2;

410 
ccouÁ
 = 0;

411 
c0
 = 
c0mš
; c0 <ğ
c0max
; c0++)

412 
c1
 = 
c1mš
; c1 <ğ
c1max
; c1++) {

413 
hi¡p
 = & 
hi¡og¿m
[
c0
][
c1
][
c2mš
];

414 
c2
 = 
c2mš
; c2 <ğ
c2max
; c2++, 
hi¡p
++)

415 ià(*
hi¡p
 != 0) {

416 
ccouÁ
++;

419 
boxp
->
cŞÜcouÁ
 = 
ccouÁ
;

420 
	}
}

423 
	$LOCAL
()

424 
	$medŸn_cut
 (
j_decom´ess_±r
 
cšfo
, 
box±r
 
boxli¡
, 
numboxes
,

425 
desœed_cŞÜs
)

428 
n
,
lb
;

429 
c0
,
c1
,
c2
,
cmax
;

430 
box±r
 
b1
,
b2
;

432 
numboxes
 < 
desœed_cŞÜs
) {

436 ià(
numboxes
*2 <ğ
desœed_cŞÜs
) {

437 
b1
 = 
	`fšd_bigge¡_cŞÜ_pİ
(
boxli¡
, 
numboxes
);

439 
b1
 = 
	`fšd_bigge¡_vŞume
(
boxli¡
, 
numboxes
);

441 ià(
b1
 =ğ
NULL
)

443 
b2
 = &
boxli¡
[
numboxes
];

445 
b2
->
c0max
 = 
b1
->c0max; b2->
c1max
 = b1->c1max; b2->
c2max
 = b1->c2max;

446 
b2
->
c0mš
 = 
b1
->c0mš; b2->
c1mš
 = b1->c1mš; b2->
c2mš
 = b1->c2min;

451 
c0
 = ((
b1
->
c0max
 - b1->
c0mš
è<< 
C0_SHIFT
è* 
C0_SCALE
;

452 
c1
 = ((
b1
->
c1max
 - b1->
c1mš
è<< 
C1_SHIFT
è* 
C1_SCALE
;

453 
c2
 = ((
b1
->
c2max
 - b1->
c2mš
è<< 
C2_SHIFT
è* 
C2_SCALE
;

457 #ià
RGB_RED
 == 0

458 
cmax
 = 
c1
; 
n
 = 1;

459 ià(
c0
 > 
cmax
è{ cmax = c0; 
n
 = 0; }

460 ià(
c2
 > 
cmax
è{ 
n
 = 2; }

462 
cmax
 = 
c1
; 
n
 = 1;

463 ià(
c2
 > 
cmax
è{ cmax = c2; 
n
 = 2; }

464 ià(
c0
 > 
cmax
è{ 
n
 = 0; }

472 
n
) {

474 
lb
 = (
b1
->
c0max
 + b1->
c0mš
) / 2;

475 
b1
->
c0max
 = 
lb
;

476 
b2
->
c0mš
 = 
lb
+1;

479 
lb
 = (
b1
->
c1max
 + b1->
c1mš
) / 2;

480 
b1
->
c1max
 = 
lb
;

481 
b2
->
c1mš
 = 
lb
+1;

484 
lb
 = (
b1
->
c2max
 + b1->
c2mš
) / 2;

485 
b1
->
c2max
 = 
lb
;

486 
b2
->
c2mš
 = 
lb
+1;

490 
	`upd©e_box
(
cšfo
, 
b1
);

491 
	`upd©e_box
(
cšfo
, 
b2
);

492 
numboxes
++;

494  
numboxes
;

495 
	}
}

498 
	$LOCAL
()

499 
	$compu‹_cŞÜ
 (
j_decom´ess_±r
 
cšfo
, 
box±r
 
boxp
, 
icŞÜ
)

504 
my_cquªtize_±r
 
cquªtize
 = (my_cquªtize_±rè
cšfo
->cquantize;

505 
hi¡3d
 
hi¡og¿m
 = 
cquªtize
->histogram;

506 
hi¡±r
 
hi¡p
;

507 
c0
,
c1
,
c2
;

508 
c0mš
,
c0max
,
c1mš
,
c1max
,
c2mš
,
c2max
;

509 
couÁ
;

510 
tÙ®
 = 0;

511 
c0tÙ®
 = 0;

512 
c1tÙ®
 = 0;

513 
c2tÙ®
 = 0;

515 
c0mš
 = 
boxp
->c0mš; 
c0max
 = boxp->c0max;

516 
c1mš
 = 
boxp
->c1mš; 
c1max
 = boxp->c1max;

517 
c2mš
 = 
boxp
->c2mš; 
c2max
 = boxp->c2max;

519 
c0
 = 
c0mš
; c0 <ğ
c0max
; c0++)

520 
c1
 = 
c1mš
; c1 <ğ
c1max
; c1++) {

521 
hi¡p
 = & 
hi¡og¿m
[
c0
][
c1
][
c2mš
];

522 
c2
 = 
c2mš
; c2 <ğ
c2max
; c2++) {

523 ià((
couÁ
 = *
hi¡p
++) != 0) {

524 
tÙ®
 +ğ
couÁ
;

525 
c0tÙ®
 +ğ((
c0
 << 
C0_SHIFT
è+ ((1<<C0_SHIFT)>>1)è* 
couÁ
;

526 
c1tÙ®
 +ğ((
c1
 << 
C1_SHIFT
è+ ((1<<C1_SHIFT)>>1)è* 
couÁ
;

527 
c2tÙ®
 +ğ((
c2
 << 
C2_SHIFT
è+ ((1<<C2_SHIFT)>>1)è* 
couÁ
;

532 
cšfo
->
cŞÜm­
[0][
icŞÜ
] = (
JSAMPLE
è((
c0tÙ®
 + (
tÙ®
>>1)) /otal);

533 
cšfo
->
cŞÜm­
[1][
icŞÜ
] = (
JSAMPLE
è((
c1tÙ®
 + (
tÙ®
>>1)) /otal);

534 
cšfo
->
cŞÜm­
[2][
icŞÜ
] = (
JSAMPLE
è((
c2tÙ®
 + (
tÙ®
>>1)) /otal);

535 
	}
}

538 
	$LOCAL
()

539 
	$£Ëù_cŞÜs
 (
j_decom´ess_±r
 
cšfo
, 
desœed_cŞÜs
)

542 
box±r
 
boxli¡
;

543 
numboxes
;

544 
i
;

547 
boxli¡
 = (
box±r
è(*
cšfo
->
mem
->
®loc_sm®l
)

548 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
, 
desœed_cŞÜs
 * 
	`SIZEOF
(
box
));

550 
numboxes
 = 1;

551 
boxli¡
[0].
c0mš
 = 0;

552 
boxli¡
[0].
c0max
 = 
MAXJSAMPLE
 >> 
C0_SHIFT
;

553 
boxli¡
[0].
c1mš
 = 0;

554 
boxli¡
[0].
c1max
 = 
MAXJSAMPLE
 >> 
C1_SHIFT
;

555 
boxli¡
[0].
c2mš
 = 0;

556 
boxli¡
[0].
c2max
 = 
MAXJSAMPLE
 >> 
C2_SHIFT
;

558 
	`upd©e_box
(
cšfo
, & 
boxli¡
[0]);

560 
numboxes
 = 
	`medŸn_cut
(
cšfo
, 
boxli¡
,‚umboxes, 
desœed_cŞÜs
);

562 
i
 = 0; i < 
numboxes
; i++)

563 
	`compu‹_cŞÜ
(
cšfo
, & 
boxli¡
[
i
], i);

564 
cšfo
->
aùu®_numb”_of_cŞÜs
 = 
numboxes
;

565 
	`TRACEMS1
(
cšfo
, 1, 
JTRC_QUANT_SELECTED
, 
numboxes
);

566 
	}
}

624 
	#BOX_C0_LOG
 (
HIST_C0_BITS
-3)

	)

625 
	#BOX_C1_LOG
 (
HIST_C1_BITS
-3)

	)

626 
	#BOX_C2_LOG
 (
HIST_C2_BITS
-3)

	)

628 
	#BOX_C0_ELEMS
 (1<<
BOX_C0_LOG
è

	)

629 
	#BOX_C1_ELEMS
 (1<<
BOX_C1_LOG
)

	)

630 
	#BOX_C2_ELEMS
 (1<<
BOX_C2_LOG
)

	)

632 
	#BOX_C0_SHIFT
 (
C0_SHIFT
 + 
BOX_C0_LOG
)

	)

633 
	#BOX_C1_SHIFT
 (
C1_SHIFT
 + 
BOX_C1_LOG
)

	)

634 
	#BOX_C2_SHIFT
 (
C2_SHIFT
 + 
BOX_C2_LOG
)

	)

645 
	$LOCAL
()

646 
	$fšd_Ã¬by_cŞÜs
 (
j_decom´ess_±r
 
cšfo
, 
mšc0
, 
mšc1
, 
mšc2
,

647 
JSAMPLE
 
cŞÜli¡
[])

657 
numcŞÜs
 = 
cšfo
->
aùu®_numb”_of_cŞÜs
;

658 
maxc0
, 
maxc1
, 
maxc2
;

659 
ûÁ”c0
, 
ûÁ”c1
, 
ûÁ”c2
;

660 
i
, 
x
, 
ncŞÜs
;

661 
INT32
 
mšmaxdi¡
, 
mš_di¡
, 
max_di¡
, 
tdi¡
;

662 
INT32
 
mšdi¡
[
MAXNUMCOLORS
];

670 
maxc0
 = 
mšc0
 + ((1 << 
BOX_C0_SHIFT
è- (1 << 
C0_SHIFT
));

671 
ûÁ”c0
 = (
mšc0
 + 
maxc0
) >> 1;

672 
maxc1
 = 
mšc1
 + ((1 << 
BOX_C1_SHIFT
è- (1 << 
C1_SHIFT
));

673 
ûÁ”c1
 = (
mšc1
 + 
maxc1
) >> 1;

674 
maxc2
 = 
mšc2
 + ((1 << 
BOX_C2_SHIFT
è- (1 << 
C2_SHIFT
));

675 
ûÁ”c2
 = (
mšc2
 + 
maxc2
) >> 1;

685 
mšmaxdi¡
 = 0x7FFFFFFFL;

687 
i
 = 0; i < 
numcŞÜs
; i++) {

689 
x
 = 
	`GETJSAMPLE
(
cšfo
->
cŞÜm­
[0][
i
]);

690 ià(
x
 < 
mšc0
) {

691 
tdi¡
 = (
x
 - 
mšc0
è* 
C0_SCALE
;

692 
mš_di¡
 = 
tdi¡
*tdist;

693 
tdi¡
 = (
x
 - 
maxc0
è* 
C0_SCALE
;

694 
max_di¡
 = 
tdi¡
*tdist;

695 } ià(
x
 > 
maxc0
) {

696 
tdi¡
 = (
x
 - 
maxc0
è* 
C0_SCALE
;

697 
mš_di¡
 = 
tdi¡
*tdist;

698 
tdi¡
 = (
x
 - 
mšc0
è* 
C0_SCALE
;

699 
max_di¡
 = 
tdi¡
*tdist;

702 
mš_di¡
 = 0;

703 ià(
x
 <ğ
ûÁ”c0
) {

704 
tdi¡
 = (
x
 - 
maxc0
è* 
C0_SCALE
;

705 
max_di¡
 = 
tdi¡
*tdist;

707 
tdi¡
 = (
x
 - 
mšc0
è* 
C0_SCALE
;

708 
max_di¡
 = 
tdi¡
*tdist;

712 
x
 = 
	`GETJSAMPLE
(
cšfo
->
cŞÜm­
[1][
i
]);

713 ià(
x
 < 
mšc1
) {

714 
tdi¡
 = (
x
 - 
mšc1
è* 
C1_SCALE
;

715 
mš_di¡
 +ğ
tdi¡
*tdist;

716 
tdi¡
 = (
x
 - 
maxc1
è* 
C1_SCALE
;

717 
max_di¡
 +ğ
tdi¡
*tdist;

718 } ià(
x
 > 
maxc1
) {

719 
tdi¡
 = (
x
 - 
maxc1
è* 
C1_SCALE
;

720 
mš_di¡
 +ğ
tdi¡
*tdist;

721 
tdi¡
 = (
x
 - 
mšc1
è* 
C1_SCALE
;

722 
max_di¡
 +ğ
tdi¡
*tdist;

725 ià(
x
 <ğ
ûÁ”c1
) {

726 
tdi¡
 = (
x
 - 
maxc1
è* 
C1_SCALE
;

727 
max_di¡
 +ğ
tdi¡
*tdist;

729 
tdi¡
 = (
x
 - 
mšc1
è* 
C1_SCALE
;

730 
max_di¡
 +ğ
tdi¡
*tdist;

734 
x
 = 
	`GETJSAMPLE
(
cšfo
->
cŞÜm­
[2][
i
]);

735 ià(
x
 < 
mšc2
) {

736 
tdi¡
 = (
x
 - 
mšc2
è* 
C2_SCALE
;

737 
mš_di¡
 +ğ
tdi¡
*tdist;

738 
tdi¡
 = (
x
 - 
maxc2
è* 
C2_SCALE
;

739 
max_di¡
 +ğ
tdi¡
*tdist;

740 } ià(
x
 > 
maxc2
) {

741 
tdi¡
 = (
x
 - 
maxc2
è* 
C2_SCALE
;

742 
mš_di¡
 +ğ
tdi¡
*tdist;

743 
tdi¡
 = (
x
 - 
mšc2
è* 
C2_SCALE
;

744 
max_di¡
 +ğ
tdi¡
*tdist;

747 ià(
x
 <ğ
ûÁ”c2
) {

748 
tdi¡
 = (
x
 - 
maxc2
è* 
C2_SCALE
;

749 
max_di¡
 +ğ
tdi¡
*tdist;

751 
tdi¡
 = (
x
 - 
mšc2
è* 
C2_SCALE
;

752 
max_di¡
 +ğ
tdi¡
*tdist;

756 
mšdi¡
[
i
] = 
mš_di¡
;

757 ià(
max_di¡
 < 
mšmaxdi¡
)

758 
mšmaxdi¡
 = 
max_di¡
;

765 
ncŞÜs
 = 0;

766 
i
 = 0; i < 
numcŞÜs
; i++) {

767 ià(
mšdi¡
[
i
] <ğ
mšmaxdi¡
)

768 
cŞÜli¡
[
ncŞÜs
++] = (
JSAMPLE
è
i
;

770  
ncŞÜs
;

771 
	}
}

774 
	$LOCAL
()

775 
	$fšd_be¡_cŞÜs
 (
j_decom´ess_±r
 
cšfo
, 
mšc0
, 
mšc1
, 
mšc2
,

776 
numcŞÜs
, 
JSAMPLE
 
cŞÜli¡
[], JSAMPLE 
be¡cŞÜ
[])

784 
ic0
, 
ic1
, 
ic2
;

785 
i
, 
icŞÜ
;

786 
INT32
 * 
b±r
;

787 
JSAMPLE
 * 
ıŒ
;

788 
INT32
 
di¡0
, 
di¡1
;

789 
INT32
 
di¡2
;

790 
INT32
 
xx0
, 
xx1
;

791 
INT32
 
xx2
;

792 
INT32
 
šc0
, 
šc1
, 
šc2
;

794 
INT32
 
be¡di¡
[
BOX_C0_ELEMS
 * 
BOX_C1_ELEMS
 * 
BOX_C2_ELEMS
];

797 
b±r
 = 
be¡di¡
;

798 
i
 = 
BOX_C0_ELEMS
*
BOX_C1_ELEMS
*
BOX_C2_ELEMS
-1; i >= 0; i--)

799 *
b±r
++ = 0x7FFFFFFFL;

807 
	#STEP_C0
 ((1 << 
C0_SHIFT
è* 
C0_SCALE
)

	)

808 
	#STEP_C1
 ((1 << 
C1_SHIFT
è* 
C1_SCALE
)

	)

809 
	#STEP_C2
 ((1 << 
C2_SHIFT
è* 
C2_SCALE
)

	)

811 
i
 = 0; i < 
numcŞÜs
; i++) {

812 
icŞÜ
 = 
	`GETJSAMPLE
(
cŞÜli¡
[
i
]);

814 
šc0
 = (
mšc0
 - 
	`GETJSAMPLE
(
cšfo
->
cŞÜm­
[0][
icŞÜ
])è* 
C0_SCALE
;

815 
di¡0
 = 
šc0
*inc0;

816 
šc1
 = (
mšc1
 - 
	`GETJSAMPLE
(
cšfo
->
cŞÜm­
[1][
icŞÜ
])è* 
C1_SCALE
;

817 
di¡0
 +ğ
šc1
*inc1;

818 
šc2
 = (
mšc2
 - 
	`GETJSAMPLE
(
cšfo
->
cŞÜm­
[2][
icŞÜ
])è* 
C2_SCALE
;

819 
di¡0
 +ğ
šc2
*inc2;

821 
šc0
 = inc0 * (2 * 
STEP_C0
) + STEP_C0 * STEP_C0;

822 
šc1
 = inc1 * (2 * 
STEP_C1
) + STEP_C1 * STEP_C1;

823 
šc2
 = inc2 * (2 * 
STEP_C2
) + STEP_C2 * STEP_C2;

825 
b±r
 = 
be¡di¡
;

826 
ıŒ
 = 
be¡cŞÜ
;

827 
xx0
 = 
šc0
;

828 
ic0
 = 
BOX_C0_ELEMS
-1; ic0 >= 0; ic0--) {

829 
di¡1
 = 
di¡0
;

830 
xx1
 = 
šc1
;

831 
ic1
 = 
BOX_C1_ELEMS
-1; ic1 >= 0; ic1--) {

832 
di¡2
 = 
di¡1
;

833 
xx2
 = 
šc2
;

834 
ic2
 = 
BOX_C2_ELEMS
-1; ic2 >= 0; ic2--) {

835 ià(
di¡2
 < *
b±r
) {

836 *
b±r
 = 
di¡2
;

837 *
ıŒ
 = (
JSAMPLE
è
icŞÜ
;

839 
di¡2
 +ğ
xx2
;

840 
xx2
 +ğ2 * 
STEP_C2
 * STEP_C2;

841 
b±r
++;

842 
ıŒ
++;

844 
di¡1
 +ğ
xx1
;

845 
xx1
 +ğ2 * 
STEP_C1
 * STEP_C1;

847 
di¡0
 +ğ
xx0
;

848 
xx0
 +ğ2 * 
STEP_C0
 * STEP_C0;

851 
	}
}

854 
	$LOCAL
()

855 
	$fl_šv”£_cm­
 (
j_decom´ess_±r
 
cšfo
, 
c0
, 
c1
, 
c2
)

860 
my_cquªtize_±r
 
cquªtize
 = (my_cquªtize_±rè
cšfo
->cquantize;

861 
hi¡3d
 
hi¡og¿m
 = 
cquªtize
->histogram;

862 
mšc0
, 
mšc1
, 
mšc2
;

863 
ic0
, 
ic1
, 
ic2
;

864 
JSAMPLE
 * 
ıŒ
;

865 
hi¡±r
 
ÿch•
;

867 
JSAMPLE
 
cŞÜli¡
[
MAXNUMCOLORS
];

868 
numcŞÜs
;

870 
JSAMPLE
 
be¡cŞÜ
[
BOX_C0_ELEMS
 * 
BOX_C1_ELEMS
 * 
BOX_C2_ELEMS
];

873 
c0
 >>ğ
BOX_C0_LOG
;

874 
c1
 >>ğ
BOX_C1_LOG
;

875 
c2
 >>ğ
BOX_C2_LOG
;

881 
mšc0
 = (
c0
 << 
BOX_C0_SHIFT
è+ ((1 << 
C0_SHIFT
) >> 1);

882 
mšc1
 = (
c1
 << 
BOX_C1_SHIFT
è+ ((1 << 
C1_SHIFT
) >> 1);

883 
mšc2
 = (
c2
 << 
BOX_C2_SHIFT
è+ ((1 << 
C2_SHIFT
) >> 1);

888 
numcŞÜs
 = 
	`fšd_Ã¬by_cŞÜs
(
cšfo
, 
mšc0
, 
mšc1
, 
mšc2
, 
cŞÜli¡
);

891 
	`fšd_be¡_cŞÜs
(
cšfo
, 
mšc0
, 
mšc1
, 
mšc2
, 
numcŞÜs
, 
cŞÜli¡
,

892 
be¡cŞÜ
);

895 
c0
 <<ğ
BOX_C0_LOG
;

896 
c1
 <<ğ
BOX_C1_LOG
;

897 
c2
 <<ğ
BOX_C2_LOG
;

898 
ıŒ
 = 
be¡cŞÜ
;

899 
ic0
 = 0; ic0 < 
BOX_C0_ELEMS
; ic0++) {

900 
ic1
 = 0; ic1 < 
BOX_C1_ELEMS
; ic1++) {

901 
ÿch•
 = & 
hi¡og¿m
[
c0
+
ic0
][
c1
+
ic1
][
c2
];

902 
ic2
 = 0; ic2 < 
BOX_C2_ELEMS
; ic2++) {

903 *
ÿch•
++ = (
hi¡ûÎ
è(
	`GETJSAMPLE
(*
ıŒ
++) + 1);

907 
	}
}

914 
	$METHODDEF
()

915 
	$·ss2_no_d™h”
 (
j_decom´ess_±r
 
cšfo
,

916 
JSAMPARRAY
 
šput_buf
, JSAMPARRAY 
ouut_buf
, 
num_rows
)

919 
my_cquªtize_±r
 
cquªtize
 = (my_cquªtize_±rè
cšfo
->cquantize;

920 
hi¡3d
 
hi¡og¿m
 = 
cquªtize
->histogram;

921 
JSAMPROW
 
š±r
, 
ouŒ
;

922 
hi¡±r
 
ÿch•
;

923 
c0
, 
c1
, 
c2
;

924 
row
;

925 
JDIMENSION
 
cŞ
;

926 
JDIMENSION
 
width
 = 
cšfo
->
ouut_width
;

928 
row
 = 0;„ow < 
num_rows
;„ow++) {

929 
š±r
 = 
šput_buf
[
row
];

930 
ouŒ
 = 
ouut_buf
[
row
];

931 
cŞ
 = 
width
; col > 0; col--) {

933 
c0
 = 
	`GETJSAMPLE
(*
š±r
++è>> 
C0_SHIFT
;

934 
c1
 = 
	`GETJSAMPLE
(*
š±r
++è>> 
C1_SHIFT
;

935 
c2
 = 
	`GETJSAMPLE
(*
š±r
++è>> 
C2_SHIFT
;

936 
ÿch•
 = & 
hi¡og¿m
[
c0
][
c1
][
c2
];

939 ià(*
ÿch•
 == 0)

940 
	`fl_šv”£_cm­
(
cšfo
, 
c0
,
c1
,
c2
);

942 *
ouŒ
++ = (
JSAMPLE
è(*
ÿch•
 - 1);

945 
	}
}

948 
	$METHODDEF
()

949 
	$·ss2_fs_d™h”
 (
j_decom´ess_±r
 
cšfo
,

950 
JSAMPARRAY
 
šput_buf
, JSAMPARRAY 
ouut_buf
, 
num_rows
)

953 
my_cquªtize_±r
 
cquªtize
 = (my_cquªtize_±rè
cšfo
->cquantize;

954 
hi¡3d
 
hi¡og¿m
 = 
cquªtize
->histogram;

955 
LOCFSERROR
 
cur0
, 
cur1
, 
cur2
;

956 
LOCFSERROR
 
b–ow”r0
, 
b–ow”r1
, 
b–ow”r2
;

957 
LOCFSERROR
 
b´ev”r0
, 
b´ev”r1
, 
b´ev”r2
;

958 
FSERRPTR
 
”rÜ±r
;

959 
JSAMPROW
 
š±r
;

960 
JSAMPROW
 
ouŒ
;

961 
hi¡±r
 
ÿch•
;

962 
dœ
;

963 
dœ3
;

964 
row
;

965 
JDIMENSION
 
cŞ
;

966 
JDIMENSION
 
width
 = 
cšfo
->
ouut_width
;

967 
JSAMPLE
 *
¿nge_lim™
 = 
cšfo
->
§m¶e_¿nge_lim™
;

968 *
”rÜ_lim™
 = 
cquªtize
->
”rÜ_lim™”
;

969 
JSAMPROW
 
cŞÜm­0
 = 
cšfo
->
cŞÜm­
[0];

970 
JSAMPROW
 
cŞÜm­1
 = 
cšfo
->
cŞÜm­
[1];

971 
JSAMPROW
 
cŞÜm­2
 = 
cšfo
->
cŞÜm­
[2];

972 
SHIFT_TEMPS


974 
row
 = 0;„ow < 
num_rows
;„ow++) {

975 
š±r
 = 
šput_buf
[
row
];

976 
ouŒ
 = 
ouut_buf
[
row
];

977 ià(
cquªtize
->
Ú_odd_row
) {

979 
š±r
 +ğ(
width
-1) * 3;

980 
ouŒ
 +ğ
width
-1;

981 
dœ
 = -1;

982 
dœ3
 = -3;

983 
”rÜ±r
 = 
cquªtize
->
f£¼Üs
 + (
width
+1)*3;

984 
cquªtize
->
Ú_odd_row
 = 
FALSE
;

987 
dœ
 = 1;

988 
dœ3
 = 3;

989 
”rÜ±r
 = 
cquªtize
->
f£¼Üs
;

990 
cquªtize
->
Ú_odd_row
 = 
TRUE
;

993 
cur0
 = 
cur1
 = 
cur2
 = 0;

995 
b–ow”r0
 = 
b–ow”r1
 = 
b–ow”r2
 = 0;

996 
b´ev”r0
 = 
b´ev”r1
 = 
b´ev”r2
 = 0;

998 
cŞ
 = 
width
; col > 0; col--) {

1007 
cur0
 = 
	`RIGHT_SHIFT
(cur0 + 
”rÜ±r
[
dœ3
+0] + 8, 4);

1008 
cur1
 = 
	`RIGHT_SHIFT
(cur1 + 
”rÜ±r
[
dœ3
+1] + 8, 4);

1009 
cur2
 = 
	`RIGHT_SHIFT
(cur2 + 
”rÜ±r
[
dœ3
+2] + 8, 4);

1013 
cur0
 = 
”rÜ_lim™
[cur0];

1014 
cur1
 = 
”rÜ_lim™
[cur1];

1015 
cur2
 = 
”rÜ_lim™
[cur2];

1020 
cur0
 +ğ
	`GETJSAMPLE
(
š±r
[0]);

1021 
cur1
 +ğ
	`GETJSAMPLE
(
š±r
[1]);

1022 
cur2
 +ğ
	`GETJSAMPLE
(
š±r
[2]);

1023 
cur0
 = 
	`GETJSAMPLE
(
¿nge_lim™
[cur0]);

1024 
cur1
 = 
	`GETJSAMPLE
(
¿nge_lim™
[cur1]);

1025 
cur2
 = 
	`GETJSAMPLE
(
¿nge_lim™
[cur2]);

1027 
ÿch•
 = & 
hi¡og¿m
[
cur0
>>
C0_SHIFT
][
cur1
>>
C1_SHIFT
][
cur2
>>
C2_SHIFT
];

1030 ià(*
ÿch•
 == 0)

1031 
	`fl_šv”£_cm­
(
cšfo
, 
cur0
>>
C0_SHIFT
,
cur1
>>
C1_SHIFT
,
cur2
>>
C2_SHIFT
);

1033 { 
pixcode
 = *
ÿch•
 - 1;

1034 *
ouŒ
 = (
JSAMPLE
è
pixcode
;

1036 
cur0
 -ğ
	`GETJSAMPLE
(
cŞÜm­0
[
pixcode
]);

1037 
cur1
 -ğ
	`GETJSAMPLE
(
cŞÜm­1
[
pixcode
]);

1038 
cur2
 -ğ
	`GETJSAMPLE
(
cŞÜm­2
[
pixcode
]);

1044 { 
LOCFSERROR
 
bÃx‹¼
, 
d–
;

1046 
bÃx‹¼
 = 
cur0
;

1047 
d–
 = 
cur0
 * 2;

1048 
cur0
 +ğ
d–
;

1049 
”rÜ±r
[0] = (
FSERROR
è(
b´ev”r0
 + 
cur0
);

1050 
cur0
 +ğ
d–
;

1051 
b´ev”r0
 = 
b–ow”r0
 + 
cur0
;

1052 
b–ow”r0
 = 
bÃx‹¼
;

1053 
cur0
 +ğ
d–
;

1054 
bÃx‹¼
 = 
cur1
;

1055 
d–
 = 
cur1
 * 2;

1056 
cur1
 +ğ
d–
;

1057 
”rÜ±r
[1] = (
FSERROR
è(
b´ev”r1
 + 
cur1
);

1058 
cur1
 +ğ
d–
;

1059 
b´ev”r1
 = 
b–ow”r1
 + 
cur1
;

1060 
b–ow”r1
 = 
bÃx‹¼
;

1061 
cur1
 +ğ
d–
;

1062 
bÃx‹¼
 = 
cur2
;

1063 
d–
 = 
cur2
 * 2;

1064 
cur2
 +ğ
d–
;

1065 
”rÜ±r
[2] = (
FSERROR
è(
b´ev”r2
 + 
cur2
);

1066 
cur2
 +ğ
d–
;

1067 
b´ev”r2
 = 
b–ow”r2
 + 
cur2
;

1068 
b–ow”r2
 = 
bÃx‹¼
;

1069 
cur2
 +ğ
d–
;

1075 
š±r
 +ğ
dœ3
;

1076 
ouŒ
 +ğ
dœ
;

1077 
”rÜ±r
 +ğ
dœ3
;

1083 
”rÜ±r
[0] = (
FSERROR
è
b´ev”r0
;

1084 
”rÜ±r
[1] = (
FSERROR
è
b´ev”r1
;

1085 
”rÜ±r
[2] = (
FSERROR
è
b´ev”r2
;

1087 
	}
}

1107 
	$LOCAL
()

1108 
	$š™_”rÜ_lim™
 (
j_decom´ess_±r
 
cšfo
)

1111 
my_cquªtize_±r
 
cquªtize
 = (my_cquªtize_±rè
cšfo
->cquantize;

1112 * 
bË
;

1113 
š
, 
out
;

1115 
bË
 = (*è(*
cšfo
->
mem
->
®loc_sm®l
)

1116 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
, (
MAXJSAMPLE
*2+1è* 
	`SIZEOF
());

1117 
bË
 +ğ
MAXJSAMPLE
;

1118 
cquªtize
->
”rÜ_lim™”
 = 
bË
;

1120 
	#STEPSIZE
 ((
MAXJSAMPLE
+1)/16)

	)

1122 
out
 = 0;

1123 
š
 = 0; iÀ< 
STEPSIZE
; in++, 
out
++) {

1124 
bË
[
š
] = 
out
;able[-in] = -out;

1127 ; 
š
 < 
STEPSIZE
*3; in++, 
out
 += (in&1) ? 0 : 1) {

1128 
bË
[
š
] = 
out
;able[-in] = -out;

1131 ; 
š
 <ğ
MAXJSAMPLE
; in++) {

1132 
bË
[
š
] = 
out
;able[-in] = -out;

1134 #undeà
STEPSIZE


1135 
	}
}

1142 
	$METHODDEF
()

1143 
	$fšish_·ss1
 (
j_decom´ess_±r
 
cšfo
)

1145 
my_cquªtize_±r
 
cquªtize
 = (my_cquªtize_±rè
cšfo
->cquantize;

1148 
cšfo
->
cŞÜm­
 = 
cquªtize
->
sv_cŞÜm­
;

1149 
	`£Ëù_cŞÜs
(
cšfo
, 
cquªtize
->
desœed
);

1151 
cquªtize
->
Ãeds_z”Ûd
 = 
TRUE
;

1152 
	}
}

1155 
	$METHODDEF
()

1156 
	$fšish_·ss2
 (
j_decom´ess_±r
 
cšfo
)

1159 
	}
}

1166 
	$METHODDEF
()

1167 
	$¡¬t_·ss_2_quªt
 (
j_decom´ess_±r
 
cšfo
, 
boŞ—n
 
is_´e_sÿn
)

1169 
my_cquªtize_±r
 
cquªtize
 = (my_cquªtize_±rè
cšfo
->cquantize;

1170 
hi¡3d
 
hi¡og¿m
 = 
cquªtize
->histogram;

1171 
i
;

1175 ià(
cšfo
->
d™h”_mode
 !ğ
JDITHER_NONE
)

1176 
cšfo
->
d™h”_mode
 = 
JDITHER_FS
;

1178 ià(
is_´e_sÿn
) {

1180 
cquªtize
->
pub
.
cŞÜ_quªtize
 = 
´esÿn_quªtize
;

1181 
cquªtize
->
pub
.
fšish_·ss
 = 
fšish_·ss1
;

1182 
cquªtize
->
Ãeds_z”Ûd
 = 
TRUE
;

1185 ià(
cšfo
->
d™h”_mode
 =ğ
JDITHER_FS
)

1186 
cquªtize
->
pub
.
cŞÜ_quªtize
 = 
·ss2_fs_d™h”
;

1188 
cquªtize
->
pub
.
cŞÜ_quªtize
 = 
·ss2_no_d™h”
;

1189 
cquªtize
->
pub
.
fšish_·ss
 = 
fšish_·ss2
;

1192 
i
 = 
cšfo
->
aùu®_numb”_of_cŞÜs
;

1193 ià(
i
 < 1)

1194 
	`ERREXIT1
(
cšfo
, 
JERR_QUANT_FEW_COLORS
, 1);

1195 ià(
i
 > 
MAXNUMCOLORS
)

1196 
	`ERREXIT1
(
cšfo
, 
JERR_QUANT_MANY_COLORS
, 
MAXNUMCOLORS
);

1198 ià(
cšfo
->
d™h”_mode
 =ğ
JDITHER_FS
) {

1199 
size_t
 
¬¿ysize
 = (size_tè((
cšfo
->
ouut_width
 + 2) *

1200 (3 * 
	`SIZEOF
(
FSERROR
)));

1202 ià(
cquªtize
->
f£¼Üs
 =ğ
NULL
)

1203 
cquªtize
->
f£¼Üs
 = (
FSERRPTR
è(*
cšfo
->
mem
->
®loc_Ïrge
)

1204 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
, 
¬¿ysize
);

1206 
	`jz”o_çr
((
FAR
 *è
cquªtize
->
f£¼Üs
, 
¬¿ysize
);

1208 ià(
cquªtize
->
”rÜ_lim™”
 =ğ
NULL
)

1209 
	`š™_”rÜ_lim™
(
cšfo
);

1210 
cquªtize
->
Ú_odd_row
 = 
FALSE
;

1215 ià(
cquªtize
->
Ãeds_z”Ûd
) {

1216 
i
 = 0; i < 
HIST_C0_ELEMS
; i++) {

1217 
	`jz”o_çr
((
FAR
 *è
hi¡og¿m
[
i
],

1218 
HIST_C1_ELEMS
*
HIST_C2_ELEMS
 * 
	`SIZEOF
(
hi¡ûÎ
));

1220 
cquªtize
->
Ãeds_z”Ûd
 = 
FALSE
;

1222 
	}
}

1229 
	$METHODDEF
()

1230 
	$Ãw_cŞÜ_m­_2_quªt
 (
j_decom´ess_±r
 
cšfo
)

1232 
my_cquªtize_±r
 
cquªtize
 = (my_cquªtize_±rè
cšfo
->cquantize;

1235 
cquªtize
->
Ãeds_z”Ûd
 = 
TRUE
;

1236 
	}
}

1243 
	$GLOBAL
()

1244 
	$jš™_2·ss_quªtiz”
 (
j_decom´ess_±r
 
cšfo
)

1246 
my_cquªtize_±r
 
cquªtize
;

1247 
i
;

1249 
cquªtize
 = (
my_cquªtize_±r
)

1250 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

1251 
	`SIZEOF
(
my_cquªtiz”
));

1252 
cšfo
->
cquªtize
 = (
j³g_cŞÜ_quªtiz”
 *) cquantize;

1253 
cquªtize
->
pub
.
¡¬t_·ss
 = 
¡¬t_·ss_2_quªt
;

1254 
cquªtize
->
pub
.
Ãw_cŞÜ_m­
 = 
Ãw_cŞÜ_m­_2_quªt
;

1255 
cquªtize
->
f£¼Üs
 = 
NULL
;

1256 
cquªtize
->
”rÜ_lim™”
 = 
NULL
;

1259 ià(
cšfo
->
out_cŞÜ_compÚ’ts
 != 3)

1260 
	`ERREXIT
(
cšfo
, 
JERR_NOTIMPL
);

1263 
cquªtize
->
hi¡og¿m
 = (
hi¡3d
è(*
cšfo
->
mem
->
®loc_sm®l
)

1264 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
, 
HIST_C0_ELEMS
 * 
	`SIZEOF
(
hi¡2d
));

1265 
i
 = 0; i < 
HIST_C0_ELEMS
; i++) {

1266 
cquªtize
->
hi¡og¿m
[
i
] = (
hi¡2d
è(*
cšfo
->
mem
->
®loc_Ïrge
)

1267 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
,

1268 
HIST_C1_ELEMS
*
HIST_C2_ELEMS
 * 
	`SIZEOF
(
hi¡ûÎ
));

1270 
cquªtize
->
Ãeds_z”Ûd
 = 
TRUE
;

1276 ià(
cšfo
->
’abË_2·ss_quªt
) {

1278 
desœed
 = 
cšfo
->
desœed_numb”_of_cŞÜs
;

1280 ià(
desœed
 < 8)

1281 
	`ERREXIT1
(
cšfo
, 
JERR_QUANT_FEW_COLORS
, 8);

1283 ià(
desœed
 > 
MAXNUMCOLORS
)

1284 
	`ERREXIT1
(
cšfo
, 
JERR_QUANT_MANY_COLORS
, 
MAXNUMCOLORS
);

1285 
cquªtize
->
sv_cŞÜm­
 = (*
cšfo
->
mem
->
®loc_§¼ay
)

1286 ((
j_commÚ_±r
è
cšfo
,
JPOOL_IMAGE
, (
JDIMENSION
è
desœed
, (JDIMENSION) 3);

1287 
cquªtize
->
desœed
 = desired;

1289 
cquªtize
->
sv_cŞÜm­
 = 
NULL
;

1293 ià(
cšfo
->
d™h”_mode
 !ğ
JDITHER_NONE
)

1294 
cšfo
->
d™h”_mode
 = 
JDITHER_FS
;

1301 ià(
cšfo
->
d™h”_mode
 =ğ
JDITHER_FS
) {

1302 
cquªtize
->
f£¼Üs
 = (
FSERRPTR
è(*
cšfo
->
mem
->
®loc_Ïrge
)

1303 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
,

1304 (
size_t
è((
cšfo
->
ouut_width
 + 2è* (3 * 
	`SIZEOF
(
FSERROR
))));

1306 
	`š™_”rÜ_lim™
(
cšfo
);

1308 
	}
}

	@jutils.c

14 
	#JPEG_INTERNALS


	)

15 
	~"jšşude.h
"

16 
	~"j³glib.h
"

26 cÚ¡ 
	gj³g_zigzag_Üd”
[
DCTSIZE2
] = {

53 cÚ¡ 
	gj³g_Çtu¿l_Üd”
[
DCTSIZE2
+16] = {

71 
	$GLOBAL
()

72 
	$jdiv_round_up
 (
a
, 
b
)

76  (
a
 + 
b
 - 1L) / b;

77 
	}
}

80 
	$GLOBAL
()

81 
	$jround_up
 (
a
, 
b
)

85 
a
 +ğ
b
 - 1L;

86  
a
 - (¨% 
b
);

87 
	}
}

99 #iâdeà
NEED_FAR_POINTERS


100 
	#FMEMCOPY
(
de¡
,
¤c
,
size
è
	`MEMCOPY
(de¡,¤c,size)

	)

101 
	#FMEMZERO
(
rg‘
,
size
è
	`MEMZERO
Ñ¬g‘,size)

	)

103 #ifdeà
USE_FMEM


104 
	#FMEMCOPY
(
de¡
,
¤c
,
size
è
	`_fmemıy
((
FAR
 *)(de¡), (cÚ¡ FAR *)(¤c), (
size_t
)(size))

	)

105 
	#FMEMZERO
(
rg‘
,
size
è
	`_fmem£t
((
FAR
 *)Ñ¬g‘), 0, (
size_t
)(size))

	)

110 
	$GLOBAL
()

111 
	$jcİy_§m¶e_rows
 (
JSAMPARRAY
 
šput_¬¿y
, 
sourû_row
,

112 
JSAMPARRAY
 
ouut_¬¿y
, 
de¡_row
,

113 
num_rows
, 
JDIMENSION
 
num_cŞs
)

120 
JSAMPROW
 
š±r
, 
ouŒ
;

121 #ifdeà
FMEMCOPY


122 
size_t
 
couÁ
 = (size_tè(
num_cŞs
 * 
	`SIZEOF
(
JSAMPLE
));

124 
JDIMENSION
 
couÁ
;

126 
row
;

128 
šput_¬¿y
 +ğ
sourû_row
;

129 
ouut_¬¿y
 +ğ
de¡_row
;

131 
row
 = 
num_rows
;„ow > 0;„ow--) {

132 
š±r
 = *
šput_¬¿y
++;

133 
ouŒ
 = *
ouut_¬¿y
++;

134 #ifdeà
FMEMCOPY


135 
	`FMEMCOPY
(
ouŒ
, 
š±r
, 
couÁ
);

137 
couÁ
 = 
num_cŞs
; count > 0; count--)

138 *
ouŒ
++ = *
š±r
++;

141 
	}
}

144 
	$GLOBAL
()

145 
	$jcİy_block_row
 (
JBLOCKROW
 
šput_row
, JBLOCKROW 
ouut_row
,

146 
JDIMENSION
 
num_blocks
)

149 #ifdeà
FMEMCOPY


150 
	`FMEMCOPY
(
ouut_row
, 
šput_row
, 
num_blocks
 * (
DCTSIZE2
 * 
	`SIZEOF
(
JCOEF
)));

152 
JCOEFPTR
 
š±r
, 
ouŒ
;

153 
couÁ
;

155 
š±r
 = (
JCOEFPTR
è
šput_row
;

156 
ouŒ
 = (
JCOEFPTR
è
ouut_row
;

157 
couÁ
 = (è
num_blocks
 * 
DCTSIZE2
; count > 0; count--) {

158 *
ouŒ
++ = *
š±r
++;

161 
	}
}

164 
	$GLOBAL
()

165 
	$jz”o_çr
 (
FAR
 * 
rg‘
, 
size_t
 
by‹¡oz”o
)

169 #ifdeà
FMEMZERO


170 
	`FMEMZERO
(
rg‘
, 
by‹¡oz”o
);

172 
FAR
 * 
±r
 = (FAR *è
rg‘
;

173 
size_t
 
couÁ
;

175 
couÁ
 = 
by‹¡oz”o
; count > 0; count--) {

176 *
±r
++ = 0;

179 
	}
}

	@jversion.h

12 
	#JVERSION
 "6b 27-M¬-1998"

	)

14 
	#JCOPYRIGHT
 "Cİyrighˆ(Cè1998, Thoma G. Lªe"

	)

	@rdbmp.c

24 
	~"cdj³g.h
"

26 #ifdeà
BMP_SUPPORTED


31 #ifdeà
HAVE_UNSIGNED_CHAR


32 
	tU_CHAR
;

33 
	#UCH
(
x
è((è(x))

	)

35 #ifdeà
CHAR_IS_UNSIGNED


36 
	tU_CHAR
;

37 
	#UCH
(
x
è((è(x))

	)

39 
	tU_CHAR
;

40 
	#UCH
(
x
è((è(xè& 0xFF)

	)

45 
	#R—dOK
(
fe
,
bufãr
,
Ën
è(
	`JFREAD
(fe,bufãr,Ënè=ğ((
size_t
èÖ’)))

	)

50 
_bmp_sourû_¡ruù
 * 
	tbmp_sourû_±r
;

52 
	s_bmp_sourû_¡ruù
 {

53 
cj³g_sourû_¡ruù
 
	mpub
;

55 
j_com´ess_±r
 
	mcšfo
;

57 
JSAMPARRAY
 
	mcŞÜm­
;

59 
jvœt_§¼ay_±r
 
	mwhŞe_image
;

60 
JDIMENSION
 
	msourû_row
;

61 
JDIMENSION
 
	mrow_width
;

63 
	mb™s_³r_pix–
;

64 } 
	tbmp_sourû_¡ruù
;

67 
	$LOCAL
()

68 
	$»ad_by‹
 (
bmp_sourû_±r
 
sšfo
)

71 
FILE
 *
šfe
 = 
sšfo
->
pub
.
šput_fe
;

72 
c
;

74 ià((
c
 = 
	`g‘c
(
šfe
)è=ğ
EOF
)

75 
	`ERREXIT
(
sšfo
->
cšfo
, 
JERR_INPUT_EOF
);

76  
c
;

77 
	}
}

80 
	$LOCAL
()

81 
	$»ad_cŞÜm­
 (
bmp_sourû_±r
 
sšfo
, 
cm­Ën
, 
m­’Œysize
)

84 
i
;

86 
m­’Œysize
) {

89 
i
 = 0; i < 
cm­Ën
; i++) {

90 
sšfo
->
cŞÜm­
[2][
i
] = (
JSAMPLE
è
	`»ad_by‹
(sinfo);

91 
sšfo
->
cŞÜm­
[1][
i
] = (
JSAMPLE
è
	`»ad_by‹
(sinfo);

92 
sšfo
->
cŞÜm­
[0][
i
] = (
JSAMPLE
è
	`»ad_by‹
(sinfo);

97 
i
 = 0; i < 
cm­Ën
; i++) {

98 
sšfo
->
cŞÜm­
[2][
i
] = (
JSAMPLE
è
	`»ad_by‹
(sinfo);

99 
sšfo
->
cŞÜm­
[1][
i
] = (
JSAMPLE
è
	`»ad_by‹
(sinfo);

100 
sšfo
->
cŞÜm­
[0][
i
] = (
JSAMPLE
è
	`»ad_by‹
(sinfo);

101 (è
	`»ad_by‹
(
sšfo
);

105 
	`ERREXIT
(
sšfo
->
cšfo
, 
JERR_BMP_BADCMAP
);

108 
	}
}

118 
	$METHODDEF
(
JDIMENSION
)

119 
	$g‘_8b™_row
 (
j_com´ess_±r
 
cšfo
, 
cj³g_sourû_±r
 
sšfo
)

122 
bmp_sourû_±r
 
sourû
 = (bmp_sourû_±rè
sšfo
;

123 
JSAMPARRAY
 
cŞÜm­
 = 
sourû
->colormap;

124 
JSAMPARRAY
 
image_±r
;

125 
t
;

126 
JSAMPROW
 
š±r
, 
ouŒ
;

127 
JDIMENSION
 
cŞ
;

130 
sourû
->
sourû_row
--;

131 
image_±r
 = (*
cšfo
->
mem
->
acûss_vœt_§¼ay
)

132 ((
j_commÚ_±r
è
cšfo
, 
sourû
->
whŞe_image
,

133 
sourû
->
sourû_row
, (
JDIMENSION
è1, 
FALSE
);

136 
š±r
 = 
image_±r
[0];

137 
ouŒ
 = 
sourû
->
pub
.
bufãr
[0];

138 
cŞ
 = 
cšfo
->
image_width
; col > 0; col--) {

139 
t
 = 
	`GETJSAMPLE
(*
š±r
++);

140 *
ouŒ
++ = 
cŞÜm­
[0][
t
];

141 *
ouŒ
++ = 
cŞÜm­
[1][
t
];

142 *
ouŒ
++ = 
cŞÜm­
[2][
t
];

146 
	}
}

149 
	$METHODDEF
(
JDIMENSION
)

150 
	$g‘_24b™_row
 (
j_com´ess_±r
 
cšfo
, 
cj³g_sourû_±r
 
sšfo
)

153 
bmp_sourû_±r
 
sourû
 = (bmp_sourû_±rè
sšfo
;

154 
JSAMPARRAY
 
image_±r
;

155 
JSAMPROW
 
š±r
, 
ouŒ
;

156 
JDIMENSION
 
cŞ
;

159 
sourû
->
sourû_row
--;

160 
image_±r
 = (*
cšfo
->
mem
->
acûss_vœt_§¼ay
)

161 ((
j_commÚ_±r
è
cšfo
, 
sourû
->
whŞe_image
,

162 
sourû
->
sourû_row
, (
JDIMENSION
è1, 
FALSE
);

167 
š±r
 = 
image_±r
[0];

168 
ouŒ
 = 
sourû
->
pub
.
bufãr
[0];

169 
cŞ
 = 
cšfo
->
image_width
; col > 0; col--) {

170 
ouŒ
[2] = *
š±r
++;

171 
ouŒ
[1] = *
š±r
++;

172 
ouŒ
[0] = *
š±r
++;

173 
ouŒ
 += 3;

177 
	}
}

186 
	$METHODDEF
(
JDIMENSION
)

187 
	$´–ßd_image
 (
j_com´ess_±r
 
cšfo
, 
cj³g_sourû_±r
 
sšfo
)

189 
bmp_sourû_±r
 
sourû
 = (bmp_sourû_±rè
sšfo
;

190 
FILE
 *
šfe
 = 
sourû
->
pub
.
šput_fe
;

191 
c
;

192 
JSAMPROW
 
out_±r
;

193 
JSAMPARRAY
 
image_±r
;

194 
JDIMENSION
 
row
, 
cŞ
;

195 
cd_´og»ss_±r
 
´og»ss
 = (cd_´og»ss_±rè
cšfo
->progress;

198 
row
 = 0;„ow < 
cšfo
->
image_height
;„ow++) {

199 ià(
´og»ss
 !ğ
NULL
) {

200 
´og»ss
->
pub
.
·ss_couÁ”
 = (è
row
;

201 
´og»ss
->
pub
.
·ss_lim™
 = (è
cšfo
->
image_height
;

202 (*
´og»ss
->
pub
.
´og»ss_mÚ™Ü
è((
j_commÚ_±r
è
cšfo
);

204 
image_±r
 = (*
cšfo
->
mem
->
acûss_vœt_§¼ay
)

205 ((
j_commÚ_±r
è
cšfo
, 
sourû
->
whŞe_image
,

206 
row
, (
JDIMENSION
è1, 
TRUE
);

207 
out_±r
 = 
image_±r
[0];

208 
cŞ
 = 
sourû
->
row_width
; col > 0; col--) {

210 ià((
c
 = 
	`g‘c
(
šfe
)è=ğ
EOF
)

211 
	`ERREXIT
(
cšfo
, 
JERR_INPUT_EOF
);

212 *
out_±r
++ = (
JSAMPLE
è
c
;

215 ià(
´og»ss
 !ğ
NULL
)

216 
´og»ss
->
com¶‘ed_exŒa_·s£s
++;

219 
sourû
->
b™s_³r_pix–
) {

221 
sourû
->
pub
.
g‘_pix–_rows
 = 
g‘_8b™_row
;

224 
sourû
->
pub
.
g‘_pix–_rows
 = 
g‘_24b™_row
;

227 
	`ERREXIT
(
cšfo
, 
JERR_BMP_BADDEPTH
);

229 
sourû
->
sourû_row
 = 
cšfo
->
image_height
;

232  (*
sourû
->
pub
.
g‘_pix–_rows
è(
cšfo
, 
sšfo
);

233 
	}
}

240 
	$METHODDEF
()

241 
	$¡¬t_šput_bmp
 (
j_com´ess_±r
 
cšfo
, 
cj³g_sourû_±r
 
sšfo
)

243 
bmp_sourû_±r
 
sourû
 = (bmp_sourû_±rè
sšfo
;

244 
U_CHAR
 
bmpfeh—d”
[14];

245 
U_CHAR
 
bmpšfoh—d”
[64];

246 
	#GET_2B
(
¬¿y
,
off£t
è((è
	`UCH
(array[offset]) + \

247 (((è
	`UCH
(
¬¿y
[
off£t
+1])è<< 8))

	)

248 
	#GET_4B
(
¬¿y
,
off£t
è((
INT32
è
	`UCH
(array[offset]) + \

249 (((
INT32
è
	`UCH
(
¬¿y
[
off£t
+1])) << 8) + \

250 (((
INT32
è
	`UCH
(
¬¿y
[
off£t
+2])) << 16) + \

251 (((
INT32
è
	`UCH
(
¬¿y
[
off£t
+3])è<< 24))

	)

252 
INT32
 
bfOffB™s
;

253 
INT32
 
h—d”Size
;

254 
INT32
 
biWidth
 = 0;

255 
INT32
 
biHeight
 = 0;

256 
biPÏÃs
;

257 
INT32
 
biCom´essiÚ
;

258 
INT32
 
biXP–sP”M‘”
,
biYP–sP”M‘”
;

259 
INT32
 
biCÌU£d
 = 0;

260 
m­’Œysize
 = 0;

261 
INT32
 
bPad
;

262 
JDIMENSION
 
row_width
;

265 ià(! 
	`R—dOK
(
sourû
->
pub
.
šput_fe
, 
bmpfeh—d”
, 14))

266 
	`ERREXIT
(
cšfo
, 
JERR_INPUT_EOF
);

267 ià(
	`GET_2B
(
bmpfeh—d”
,0) != 0x4D42)

268 
	`ERREXIT
(
cšfo
, 
JERR_BMP_NOT
);

269 
bfOffB™s
 = (
INT32
è
	`GET_4B
(
bmpfeh—d”
,10);

275 ià(! 
	`R—dOK
(
sourû
->
pub
.
šput_fe
, 
bmpšfoh—d”
, 4))

276 
	`ERREXIT
(
cšfo
, 
JERR_INPUT_EOF
);

277 
h—d”Size
 = (
INT32
è
	`GET_4B
(
bmpšfoh—d”
,0);

278 ià(
h—d”Size
 < 12 || headerSize > 64)

279 
	`ERREXIT
(
cšfo
, 
JERR_BMP_BADHEADER
);

280 ià(! 
	`R—dOK
(
sourû
->
pub
.
šput_fe
, 
bmpšfoh—d”
+4, 
h—d”Size
-4))

281 
	`ERREXIT
(
cšfo
, 
JERR_INPUT_EOF
);

283 (è
h—d”Size
) {

286 
biWidth
 = (
INT32
è
	`GET_2B
(
bmpšfoh—d”
,4);

287 
biHeight
 = (
INT32
è
	`GET_2B
(
bmpšfoh—d”
,6);

288 
biPÏÃs
 = 
	`GET_2B
(
bmpšfoh—d”
,8);

289 
sourû
->
b™s_³r_pix–
 = (è
	`GET_2B
(
bmpšfoh—d”
,10);

291 
sourû
->
b™s_³r_pix–
) {

293 
m­’Œysize
 = 3;

294 
	`TRACEMS2
(
cšfo
, 1, 
JTRC_BMP_OS2_MAPPED
, (è
biWidth
, (è
biHeight
);

297 
	`TRACEMS2
(
cšfo
, 1, 
JTRC_BMP_OS2
, (è
biWidth
, (è
biHeight
);

300 
	`ERREXIT
(
cšfo
, 
JERR_BMP_BADDEPTH
);

303 ià(
biPÏÃs
 != 1)

304 
	`ERREXIT
(
cšfo
, 
JERR_BMP_BADPLANES
);

310 
biWidth
 = 
	`GET_4B
(
bmpšfoh—d”
,4);

311 
biHeight
 = 
	`GET_4B
(
bmpšfoh—d”
,8);

312 
biPÏÃs
 = 
	`GET_2B
(
bmpšfoh—d”
,12);

313 
sourû
->
b™s_³r_pix–
 = (è
	`GET_2B
(
bmpšfoh—d”
,14);

314 
biCom´essiÚ
 = 
	`GET_4B
(
bmpšfoh—d”
,16);

315 
biXP–sP”M‘”
 = 
	`GET_4B
(
bmpšfoh—d”
,24);

316 
biYP–sP”M‘”
 = 
	`GET_4B
(
bmpšfoh—d”
,28);

317 
biCÌU£d
 = 
	`GET_4B
(
bmpšfoh—d”
,32);

320 
sourû
->
b™s_³r_pix–
) {

322 
m­’Œysize
 = 4;

323 
	`TRACEMS2
(
cšfo
, 1, 
JTRC_BMP_MAPPED
, (è
biWidth
, (è
biHeight
);

326 
	`TRACEMS2
(
cšfo
, 1, 
JTRC_BMP
, (è
biWidth
, (è
biHeight
);

329 
	`ERREXIT
(
cšfo
, 
JERR_BMP_BADDEPTH
);

332 ià(
biPÏÃs
 != 1)

333 
	`ERREXIT
(
cšfo
, 
JERR_BMP_BADPLANES
);

334 ià(
biCom´essiÚ
 != 0)

335 
	`ERREXIT
(
cšfo
, 
JERR_BMP_COMPRESSED
);

337 ià(
biXP–sP”M‘”
 > 0 && 
biYP–sP”M‘”
 > 0) {

339 
cšfo
->
X_d’s™y
 = (
UINT16
è(
biXP–sP”M‘”
/100);

340 
cšfo
->
Y_d’s™y
 = (
UINT16
è(
biYP–sP”M‘”
/100);

341 
cšfo
->
d’s™y_un™
 = 2;

345 
	`ERREXIT
(
cšfo
, 
JERR_BMP_BADHEADER
);

350 
bPad
 = 
bfOffB™s
 - (
h—d”Size
 + 14);

353 ià(
m­’Œysize
 > 0) {

354 ià(
biCÌU£d
 <= 0)

355 
biCÌU£d
 = 256;

356 ià(
biCÌU£d
 > 256)

357 
	`ERREXIT
(
cšfo
, 
JERR_BMP_BADCMAP
);

359 
sourû
->
cŞÜm­
 = (*
cšfo
->
mem
->
®loc_§¼ay
)

360 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
,

361 (
JDIMENSION
è
biCÌU£d
, (JDIMENSION) 3);

363 
	`»ad_cŞÜm­
(
sourû
, (è
biCÌU£d
, 
m­’Œysize
);

365 
bPad
 -ğ
biCÌU£d
 * 
m­’Œysize
;

369 ià(
bPad
 < 0)

370 
	`ERREXIT
(
cšfo
, 
JERR_BMP_BADHEADER
);

371 --
bPad
 >= 0) {

372 (è
	`»ad_by‹
(
sourû
);

376 ià(
sourû
->
b™s_³r_pix–
 == 24)

377 
row_width
 = (
JDIMENSION
è(
biWidth
 * 3);

379 
row_width
 = (
JDIMENSION
è
biWidth
;

380 (
row_width
 & 3) != 0)„ow_width++;

381 
sourû
->
row_width
 =„ow_width;

384 
sourû
->
whŞe_image
 = (*
cšfo
->
mem
->
»que¡_vœt_§¼ay
)

385 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
, 
FALSE
,

386 
row_width
, (
JDIMENSION
è
biHeight
, (JDIMENSION) 1);

387 
sourû
->
pub
.
g‘_pix–_rows
 = 
´–ßd_image
;

388 ià(
cšfo
->
´og»ss
 !ğ
NULL
) {

389 
cd_´og»ss_±r
 
´og»ss
 = (cd_´og»ss_±rè
cšfo
->progress;

390 
´og»ss
->
tÙ®_exŒa_·s£s
++;

394 
sourû
->
pub
.
bufãr
 = (*
cšfo
->
mem
->
®loc_§¼ay
)

395 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
,

396 (
JDIMENSION
è(
biWidth
 * 3), (JDIMENSION) 1);

397 
sourû
->
pub
.
bufãr_height
 = 1;

399 
cšfo
->
š_cŞÜ_¥aû
 = 
JCS_RGB
;

400 
cšfo
->
šput_compÚ’ts
 = 3;

401 
cšfo
->
d©a_´ecisiÚ
 = 8;

402 
cšfo
->
image_width
 = (
JDIMENSION
è
biWidth
;

403 
cšfo
->
image_height
 = (
JDIMENSION
è
biHeight
;

404 
	}
}

411 
	$METHODDEF
()

412 
	$fšish_šput_bmp
 (
j_com´ess_±r
 
cšfo
, 
cj³g_sourû_±r
 
sšfo
)

415 
	}
}

422 
	$GLOBAL
(
cj³g_sourû_±r
)

423 
	$jš™_»ad_bmp
 (
j_com´ess_±r
 
cšfo
)

425 
bmp_sourû_±r
 
sourû
;

428 
sourû
 = (
bmp_sourû_±r
)

429 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

430 
	`SIZEOF
(
bmp_sourû_¡ruù
));

431 
sourû
->
cšfo
 = cinfo;

433 
sourû
->
pub
.
¡¬t_šput
 = 
¡¬t_šput_bmp
;

434 
sourû
->
pub
.
fšish_šput
 = 
fšish_šput_bmp
;

436  (
cj³g_sourû_±r
è
sourû
;

437 
	}
}

	@rdcolmap.c

24 
	~"cdj³g.h
"

26 #ifdeà
QUANT_2PASS_SUPPORTED


45 
	$LOCAL
()

46 
	$add_m­_’Œy
 (
j_decom´ess_±r
 
cšfo
, 
R
, 
G
, 
B
)

48 
JSAMPROW
 
cŞÜm­0
 = 
cšfo
->
cŞÜm­
[0];

49 
JSAMPROW
 
cŞÜm­1
 = 
cšfo
->
cŞÜm­
[1];

50 
JSAMPROW
 
cŞÜm­2
 = 
cšfo
->
cŞÜm­
[2];

51 
ncŞÜs
 = 
cšfo
->
aùu®_numb”_of_cŞÜs
;

52 
šdex
;

55 
šdex
 = 0; index < 
ncŞÜs
; index++) {

56 ià(
	`GETJSAMPLE
(
cŞÜm­0
[
šdex
]è=ğ
R
 &&

57 
	`GETJSAMPLE
(
cŞÜm­1
[
šdex
]è=ğ
G
 &&

58 
	`GETJSAMPLE
(
cŞÜm­2
[
šdex
]è=ğ
B
)

63 ià(
ncŞÜs
 >ğ(
MAXJSAMPLE
+1))

64 
	`ERREXIT1
(
cšfo
, 
JERR_QUANT_MANY_COLORS
, (
MAXJSAMPLE
+1));

67 
cŞÜm­0
[
ncŞÜs
] = (
JSAMPLE
è
R
;

68 
cŞÜm­1
[
ncŞÜs
] = (
JSAMPLE
è
G
;

69 
cŞÜm­2
[
ncŞÜs
] = (
JSAMPLE
è
B
;

70 
cšfo
->
aùu®_numb”_of_cŞÜs
++;

71 
	}
}

78 
	$LOCAL
()

79 
	$»ad_gif_m­
 (
j_decom´ess_±r
 
cšfo
, 
FILE
 * 
šfe
)

81 
h—d”
[13];

82 
i
, 
cŞÜm­Ën
;

83 
R
, 
G
, 
B
;

87 
i
 = 1; i < 13; i++) {

88 ià((
h—d”
[
i
] = 
	`g‘c
(
šfe
)è=ğ
EOF
)

89 
	`ERREXIT
(
cšfo
, 
JERR_BAD_CMAP_FILE
);

93 ià(
h—d”
[1] != 'I' || header[2] != 'F')

94 
	`ERREXIT
(
cšfo
, 
JERR_BAD_CMAP_FILE
);

97 ià((
h—d”
[10] & 0x80) == 0)

98 
	`ERREXIT
(
cšfo
, 
JERR_BAD_CMAP_FILE
);

101 
cŞÜm­Ën
 = 2 << (
h—d”
[10] & 0x07);

103 
i
 = 0; i < 
cŞÜm­Ën
; i++) {

104 
R
 = 
	`g‘c
(
šfe
);

105 
G
 = 
	`g‘c
(
šfe
);

106 
B
 = 
	`g‘c
(
šfe
);

107 ià(
R
 =ğ
EOF
 || 
G
 =ğEOF || 
B
 == EOF)

108 
	`ERREXIT
(
cšfo
, 
JERR_BAD_CMAP_FILE
);

109 
	`add_m­_’Œy
(
cšfo
,

110 
R
 << (
BITS_IN_JSAMPLE
-8),

111 
G
 << (
BITS_IN_JSAMPLE
-8),

112 
B
 << (
BITS_IN_JSAMPLE
-8));

114 
	}
}

120 
	$LOCAL
()

121 
	$pbm_g‘c
 (
FILE
 * 
šfe
)

125 
ch
;

127 
ch
 = 
	`g‘c
(
šfe
);

128 ià(
ch
 == '#') {

130 
ch
 = 
	`g‘c
(
šfe
);

131 } 
ch
 !ğ'\n' && ch !ğ
EOF
);

133  
ch
;

134 
	}
}

137 
	$LOCAL
()

138 
	$»ad_pbm_š‹g”
 (
j_decom´ess_±r
 
cšfo
, 
FILE
 * 
šfe
)

144 
ch
;

145 
v®
;

149 
ch
 = 
	`pbm_g‘c
(
šfe
);

150 ià(
ch
 =ğ
EOF
)

151 
	`ERREXIT
(
cšfo
, 
JERR_BAD_CMAP_FILE
);

152 } 
ch
 == ' ' || ch == '\t' || ch == '\n' || ch == '\r');

154 ià(
ch
 < '0' || ch > '9')

155 
	`ERREXIT
(
cšfo
, 
JERR_BAD_CMAP_FILE
);

157 
v®
 = 
ch
 - '0';

158 (
ch
 = 
	`pbm_g‘c
(
šfe
)) >= '0' && ch <= '9') {

159 
v®
 *= 10;

160 
v®
 +ğ
ch
 - '0';

162  
v®
;

163 
	}
}

170 
	$LOCAL
()

171 
	$»ad_µm_m­
 (
j_decom´ess_±r
 
cšfo
, 
FILE
 * 
šfe
)

173 
c
;

174 
w
, 
h
, 
maxv®
, 
row
, 
cŞ
;

175 
R
, 
G
, 
B
;

178 
c
 = 
	`g‘c
(
šfe
);

181 
w
 = 
	`»ad_pbm_š‹g”
(
cšfo
, 
šfe
);

182 
h
 = 
	`»ad_pbm_š‹g”
(
cšfo
, 
šfe
);

183 
maxv®
 = 
	`»ad_pbm_š‹g”
(
cšfo
, 
šfe
);

185 ià(
w
 <ğ0 || 
h
 <ğ0 || 
maxv®
 <= 0)

186 
	`ERREXIT
(
cšfo
, 
JERR_BAD_CMAP_FILE
);

189 ià(
maxv®
 !ğ(è
MAXJSAMPLE
)

190 
	`ERREXIT
(
cšfo
, 
JERR_BAD_CMAP_FILE
);

192 
c
) {

194 
row
 = 0;„ow < 
h
;„ow++) {

195 
cŞ
 = 0; cŞ < 
w
; col++) {

196 
R
 = 
	`»ad_pbm_š‹g”
(
cšfo
, 
šfe
);

197 
G
 = 
	`»ad_pbm_š‹g”
(
cšfo
, 
šfe
);

198 
B
 = 
	`»ad_pbm_š‹g”
(
cšfo
, 
šfe
);

199 
	`add_m­_’Œy
(
cšfo
, 
R
, 
G
, 
B
);

205 
row
 = 0;„ow < 
h
;„ow++) {

206 
cŞ
 = 0; cŞ < 
w
; col++) {

207 
R
 = 
	`g‘c
(
šfe
);

208 
G
 = 
	`g‘c
(
šfe
);

209 
B
 = 
	`g‘c
(
šfe
);

210 ià(
R
 =ğ
EOF
 || 
G
 =ğEOF || 
B
 == EOF)

211 
	`ERREXIT
(
cšfo
, 
JERR_BAD_CMAP_FILE
);

212 
	`add_m­_’Œy
(
cšfo
, 
R
, 
G
, 
B
);

218 
	`ERREXIT
(
cšfo
, 
JERR_BAD_CMAP_FILE
);

221 
	}
}

230 
	$GLOBAL
()

231 
	$»ad_cŞÜ_m­
 (
j_decom´ess_±r
 
cšfo
, 
FILE
 * 
šfe
)

234 
cšfo
->
cŞÜm­
 = (*cšfo->
mem
->
®loc_§¼ay
)

235 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
,

236 (
JDIMENSION
è(
MAXJSAMPLE
+1), (JDIMENSION) 3);

237 
cšfo
->
aùu®_numb”_of_cŞÜs
 = 0;

240 
	`g‘c
(
šfe
)) {

242 
	`»ad_gif_m­
(
cšfo
, 
šfe
);

245 
	`»ad_µm_m­
(
cšfo
, 
šfe
);

248 
	`ERREXIT
(
cšfo
, 
JERR_BAD_CMAP_FILE
);

251 
	}
}

	@rdgif.c

22 
	~"cdj³g.h
"

24 #ifdeà
GIF_SUPPORTED


30 
	$GLOBAL
(
cj³g_sourû_±r
)

31 
	$jš™_»ad_gif
 (
j_com´ess_±r
 
cšfo
)

33 
	`årštf
(
¡d”r
, "GIF input is unsupported for†egal„easons. Sorry.\n");

34 
	`ex™
(
EXIT_FAILURE
);

35  
NULL
;

36 
	}
}

	@rdjpgcom.c

14 
	#JPEG_CJPEG_DJPEG


	)

15 
	~"jšşude.h
"

17 
	~<ùy³.h
>

18 #ifdeà
USE_SETMODE


19 
	~<fú.h
>

21 
	~<io.h
>

24 #ifdeà
USE_CCOMMAND


25 #ifdeà
__MWERKS__


26 
	~<SIOUX.h
>

27 
	~<cÚsŞe.h
>

29 #ifdeà
THINK_C


30 
	~<cÚsŞe.h
>

34 #ifdeà
DONT_USE_B_MODE


35 
	#READ_BINARY
 "r"

	)

37 #ifdeà
VMS


38 
	#READ_BINARY
 "rb", "ùx=¡m"

	)

40 
	#READ_BINARY
 "rb"

	)

44 #iâdeà
EXIT_FAILURE


45 
	#EXIT_FAILURE
 1

	)

47 #iâdeà
EXIT_SUCCESS


48 #ifdeà
VMS


49 
	#EXIT_SUCCESS
 1

	)

51 
	#EXIT_SUCCESS
 0

	)

61 
FILE
 * 
	gšfe
;

64 
	#NEXTBYTE
(è
	`g‘c
(
šfe
)

	)

68 
	#ERREXIT
(
msg
è(
	`årštf
(
¡d”r
, "%s\n", msg), 
	`ex™
(
EXIT_FAILURE
))

	)

73 
	$»ad_1_by‹
 ()

75 
c
;

77 
c
 = 
	`NEXTBYTE
();

78 ià(
c
 =ğ
EOF
)

79 
	`ERREXIT
("Premature EOF in JPEG file");

80  
c
;

81 
	}
}

86 
	$»ad_2_by‹s
 ()

88 
c1
, 
c2
;

90 
c1
 = 
	`NEXTBYTE
();

91 ià(
c1
 =ğ
EOF
)

92 
	`ERREXIT
("Premature EOF in JPEG file");

93 
c2
 = 
	`NEXTBYTE
();

94 ià(
c2
 =ğ
EOF
)

95 
	`ERREXIT
("Premature EOF in JPEG file");

96  (((è
c1
è<< 8è+ ((è
c2
);

97 
	}
}

106 
	#M_SOF0
 0xC0

	)

107 
	#M_SOF1
 0xC1

	)

108 
	#M_SOF2
 0xC2

	)

109 
	#M_SOF3
 0xC3

	)

110 
	#M_SOF5
 0xC5

	)

111 
	#M_SOF6
 0xC6

	)

112 
	#M_SOF7
 0xC7

	)

113 
	#M_SOF9
 0xC9

	)

114 
	#M_SOF10
 0xCA

	)

115 
	#M_SOF11
 0xCB

	)

116 
	#M_SOF13
 0xCD

	)

117 
	#M_SOF14
 0xCE

	)

118 
	#M_SOF15
 0xCF

	)

119 
	#M_SOI
 0xD8

	)

120 
	#M_EOI
 0xD9

	)

121 
	#M_SOS
 0xDA

	)

122 
	#M_APP0
 0xE0

	)

123 
	#M_APP12
 0xEC

	)

124 
	#M_COM
 0xFE

	)

138 
	$Ãxt_m¬k”
 ()

140 
c
;

141 
disÿrded_by‹s
 = 0;

144 
c
 = 
	`»ad_1_by‹
();

145 
c
 != 0xFF) {

146 
disÿrded_by‹s
++;

147 
c
 = 
	`»ad_1_by‹
();

153 
c
 = 
	`»ad_1_by‹
();

154 } 
c
 == 0xFF);

156 ià(
disÿrded_by‹s
 != 0) {

157 
	`årštf
(
¡d”r
, "Warning: garbage data found in JPEG file\n");

160  
c
;

161 
	}
}

173 
	$fœ¡_m¬k”
 ()

175 
c1
, 
c2
;

177 
c1
 = 
	`NEXTBYTE
();

178 
c2
 = 
	`NEXTBYTE
();

179 ià(
c1
 !ğ0xFF || 
c2
 !ğ
M_SOI
)

180 
	`ERREXIT
("Not‡ JPEG file");

181  
c2
;

182 
	}
}

195 
	$sk_v¬ŸbË
 ()

198 
Ëngth
;

201 
Ëngth
 = 
	`»ad_2_by‹s
();

203 ià(
Ëngth
 < 2)

204 
	`ERREXIT
("Erroneous JPEG marker†ength");

205 
Ëngth
 -= 2;

207 
Ëngth
 > 0) {

208 (è
	`»ad_1_by‹
();

209 
Ëngth
--;

211 
	}
}

221 
	$´oûss_COM
 ()

223 
Ëngth
;

224 
ch
;

225 
Ï¡ch
 = 0;

228 
Ëngth
 = 
	`»ad_2_by‹s
();

230 ià(
Ëngth
 < 2)

231 
	`ERREXIT
("Erroneous JPEG marker†ength");

232 
Ëngth
 -= 2;

234 
Ëngth
 > 0) {

235 
ch
 = 
	`»ad_1_by‹
();

241 ià(
ch
 == '\r') {

242 
	`´štf
("\n");

243 } ià(
ch
 == '\n') {

244 ià(
Ï¡ch
 != '\r')

245 
	`´štf
("\n");

246 } ià(
ch
 == '\\') {

247 
	`´štf
("\\\\");

248 } ià(
	`i¥ršt
(
ch
)) {

249 
	`putc
(
ch
, 
¡dout
);

251 
	`´štf
("\\%03o", 
ch
);

253 
Ï¡ch
 = 
ch
;

254 
Ëngth
--;

256 
	`´štf
("\n");

257 
	}
}

266 
	$´oûss_SOFn
 (
m¬k”
)

268 
Ëngth
;

269 
image_height
, 
image_width
;

270 
d©a_´ecisiÚ
, 
num_compÚ’ts
;

271 cÚ¡ * 
´oûss
;

272 
ci
;

274 
Ëngth
 = 
	`»ad_2_by‹s
();

276 
d©a_´ecisiÚ
 = 
	`»ad_1_by‹
();

277 
image_height
 = 
	`»ad_2_by‹s
();

278 
image_width
 = 
	`»ad_2_by‹s
();

279 
num_compÚ’ts
 = 
	`»ad_1_by‹
();

281 
m¬k”
) {

282 
M_SOF0
: 
´oûss
 = "Baseline"; ;

283 
M_SOF1
: 
´oûss
 = "Extended sequential"; ;

284 
M_SOF2
: 
´oûss
 = "Progressive"; ;

285 
M_SOF3
: 
´oûss
 = "Lossless"; ;

286 
M_SOF5
: 
´oûss
 = "Differential sequential"; ;

287 
M_SOF6
: 
´oûss
 = "Differential…rogressive"; ;

288 
M_SOF7
: 
´oûss
 = "Differential†ossless"; ;

289 
M_SOF9
: 
´oûss
 = "Extended sequential,‡rithmetic coding"; ;

290 
M_SOF10
: 
´oûss
 = "Progressive,‡rithmetic coding"; ;

291 
M_SOF11
: 
´oûss
 = "Lossless,‡rithmetic coding"; ;

292 
M_SOF13
: 
´oûss
 = "Differential sequential,‡rithmetic coding"; ;

293 
M_SOF14
: 
´oûss
 = "Differential…rogressive,‡rithmetic coding"; ;

294 
M_SOF15
: 
´oûss
 = "Differential†ossless,‡rithmetic coding"; ;

295 : 
´oûss
 = "Unknown"; ;

298 
	`´štf
("JPEG image is %uw * %uh, %d color components, %d bits…er sample\n",

299 
image_width
, 
image_height
, 
num_compÚ’ts
, 
d©a_´ecisiÚ
);

300 
	`´štf
("JPEG…roûss: %s\n", 
´oûss
);

302 ià(
Ëngth
 !ğ(è(8 + 
num_compÚ’ts
 * 3))

303 
	`ERREXIT
("Bogus SOF marker†ength");

305 
ci
 = 0; c˜< 
num_compÚ’ts
; ci++) {

306 (è
	`»ad_1_by‹
();

307 (è
	`»ad_1_by‹
();

308 (è
	`»ad_1_by‹
();

310 
	}
}

324 
	$sÿn_JPEG_h—d”
 (
v”bo£
)

326 
m¬k”
;

329 ià(
	`fœ¡_m¬k”
(è!ğ
M_SOI
)

330 
	`ERREXIT
("Expected SOI marker first");

334 
m¬k”
 = 
	`Ãxt_m¬k”
();

335 
m¬k”
) {

339 
M_SOF0
:

340 
M_SOF1
:

341 
M_SOF2
:

342 
M_SOF3
:

343 
M_SOF5
:

344 
M_SOF6
:

345 
M_SOF7
:

346 
M_SOF9
:

347 
M_SOF10
:

348 
M_SOF11
:

349 
M_SOF13
:

350 
M_SOF14
:

351 
M_SOF15
:

352 ià(
v”bo£
)

353 
	`´oûss_SOFn
(
m¬k”
);

355 
	`sk_v¬ŸbË
();

358 
M_SOS
:

359  
m¬k”
;

361 
M_EOI
:

362  
m¬k”
;

364 
M_COM
:

365 
	`´oûss_COM
();

368 
M_APP12
:

372 ià(
v”bo£
) {

373 
	`´štf
("APP12 contains:\n");

374 
	`´oûss_COM
();

376 
	`sk_v¬ŸbË
();

380 
	`sk_v¬ŸbË
();

384 
	}
}

389 cÚ¡ * 
	g´ogÇme
;

393 
	$u§ge
 ()

396 
	`årštf
(
¡d”r
, "rdjpgcom displays‡nyextual comments in‡ JPEG file.\n");

398 
	`årštf
(
¡d”r
, "U§ge: % [sw™ches] [šputfe]\n", 
´ogÇme
);

400 
	`årštf
(
¡d”r
, "Switches (names may be‡bbreviated):\n");

401 
	`årštf
(
¡d”r
, " -verbose Also display dimensions of JPEG image\n");

403 
	`ex™
(
EXIT_FAILURE
);

404 
	}
}

408 
	$keym©ch
 (* 
¬g
, cÚ¡ * 
keywÜd
, 
mšch¬s
)

413 
ÿ
, 
ck
;

414 
nm©ched
 = 0;

416 (
ÿ
 = *
¬g
++) != '\0') {

417 ià((
ck
 = *
keywÜd
++) == '\0')

419 ià(
	`isuµ”
(
ÿ
))

420 
ÿ
 = 
	`tŞow”
(ca);

421 ià(
ÿ
 !ğ
ck
)

423 
nm©ched
++;

426 ià(
nm©ched
 < 
mšch¬s
)

429 
	}
}

437 
	$maš
 (
¬gc
, **
¬gv
)

439 
¬gn
;

440 * 
¬g
;

441 
v”bo£
 = 0;

444 #ifdeà
USE_CCOMMAND


445 
¬gc
 = 
	`ccommªd
(&
¬gv
);

448 
´ogÇme
 = 
¬gv
[0];

449 ià(
´ogÇme
 =ğ
NULL
 ||…rogname[0] == 0)

450 
´ogÇme
 = "rdjpgcom";

453 
¬gn
 = 1;‡rgÀ< 
¬gc
;‡rgn++) {

454 
¬g
 = 
¬gv
[
¬gn
];

455 ià(
¬g
[0] != '-')

457 
¬g
++;

458 ià(
	`keym©ch
(
¬g
, "verbose", 1)) {

459 
v”bo£
++;

461 
	`u§ge
();

466 ià(
¬gn
 < 
¬gc
-1) {

467 
	`årštf
(
¡d”r
, "%s: oÆy oÃ iÅuˆfe\n", 
´ogÇme
);

468 
	`u§ge
();

470 ià(
¬gn
 < 
¬gc
) {

471 ià((
šfe
 = 
	`fİ’
(
¬gv
[
¬gn
], 
READ_BINARY
)è=ğ
NULL
) {

472 
	`årštf
(
¡d”r
, "%s: cª'ˆİ’ %s\n", 
´ogÇme
, 
¬gv
[
¬gn
]);

473 
	`ex™
(
EXIT_FAILURE
);

477 #ifdeà
USE_SETMODE


478 
	`£tmode
(
	`f’o
(
¡dš
), 
O_BINARY
);

480 #ifdeà
USE_FDOPEN


481 ià((
šfe
 = 
	`fdİ’
(
	`f’o
(
¡dš
), 
READ_BINARY
)è=ğ
NULL
) {

482 
	`årštf
(
¡d”r
, "%s: cª'ˆİ’ stdš\n", 
´ogÇme
);

483 
	`ex™
(
EXIT_FAILURE
);

486 
šfe
 = 
¡dš
;

491 (è
	`sÿn_JPEG_h—d”
(
v”bo£
);

494 
	`ex™
(
EXIT_SUCCESS
);

496 
	}
}

	@rdppm.c

21 
	~"cdj³g.h
"

23 #ifdeà
PPM_SUPPORTED


41 #ifdeà
HAVE_UNSIGNED_CHAR


42 
	tU_CHAR
;

43 
	#UCH
(
x
è((è(x))

	)

45 #ifdeà
CHAR_IS_UNSIGNED


46 
	tU_CHAR
;

47 
	#UCH
(
x
è((è(x))

	)

49 
	tU_CHAR
;

50 
	#UCH
(
x
è((è(xè& 0xFF)

	)

55 
	#R—dOK
(
fe
,
bufãr
,
Ën
è(
	`JFREAD
(fe,bufãr,Ënè=ğ((
size_t
èÖ’)))

	)

72 
cj³g_sourû_¡ruù
 
	mpub
;

74 
U_CHAR
 *
	miobufãr
;

75 
JSAMPROW
 
	mpixrow
;

76 
size_t
 
	mbufãr_width
;

77 
JSAMPLE
 *
	m»sÿË
;

78 } 
	tµm_sourû_¡ruù
;

80 
µm_sourû_¡ruù
 * 
	tµm_sourû_±r
;

83 
	$LOCAL
()

84 
	$pbm_g‘c
 (
FILE
 * 
šfe
)

88 
ch
;

90 
ch
 = 
	`g‘c
(
šfe
);

91 ià(
ch
 == '#') {

93 
ch
 = 
	`g‘c
(
šfe
);

94 } 
ch
 !ğ'\n' && ch !ğ
EOF
);

96  
ch
;

97 
	}
}

100 
	$LOCAL
()

101 
	$»ad_pbm_š‹g”
 (
j_com´ess_±r
 
cšfo
, 
FILE
 * 
šfe
)

107 
ch
;

108 
v®
;

112 
ch
 = 
	`pbm_g‘c
(
šfe
);

113 ià(
ch
 =ğ
EOF
)

114 
	`ERREXIT
(
cšfo
, 
JERR_INPUT_EOF
);

115 } 
ch
 == ' ' || ch == '\t' || ch == '\n' || ch == '\r');

117 ià(
ch
 < '0' || ch > '9')

118 
	`ERREXIT
(
cšfo
, 
JERR_PPM_NONNUMERIC
);

120 
v®
 = 
ch
 - '0';

121 (
ch
 = 
	`pbm_g‘c
(
šfe
)) >= '0' && ch <= '9') {

122 
v®
 *= 10;

123 
v®
 +ğ
ch
 - '0';

125  
v®
;

126 
	}
}

140 
	$METHODDEF
(
JDIMENSION
)

141 
	$g‘_‹xt_g¿y_row
 (
j_com´ess_±r
 
cšfo
, 
cj³g_sourû_±r
 
sšfo
)

144 
µm_sourû_±r
 
sourû
 = (µm_sourû_±rè
sšfo
;

145 
FILE
 * 
šfe
 = 
sourû
->
pub
.
šput_fe
;

146 
JSAMPROW
 
±r
;

147 
JSAMPLE
 *
»sÿË
 = 
sourû
->rescale;

148 
JDIMENSION
 
cŞ
;

150 
±r
 = 
sourû
->
pub
.
bufãr
[0];

151 
cŞ
 = 
cšfo
->
image_width
; col > 0; col--) {

152 *
±r
++ = 
»sÿË
[
	`»ad_pbm_š‹g”
(
cšfo
, 
šfe
)];

155 
	}
}

158 
	$METHODDEF
(
JDIMENSION
)

159 
	$g‘_‹xt_rgb_row
 (
j_com´ess_±r
 
cšfo
, 
cj³g_sourû_±r
 
sšfo
)

162 
µm_sourû_±r
 
sourû
 = (µm_sourû_±rè
sšfo
;

163 
FILE
 * 
šfe
 = 
sourû
->
pub
.
šput_fe
;

164 
JSAMPROW
 
±r
;

165 
JSAMPLE
 *
»sÿË
 = 
sourû
->rescale;

166 
JDIMENSION
 
cŞ
;

168 
±r
 = 
sourû
->
pub
.
bufãr
[0];

169 
cŞ
 = 
cšfo
->
image_width
; col > 0; col--) {

170 *
±r
++ = 
»sÿË
[
	`»ad_pbm_š‹g”
(
cšfo
, 
šfe
)];

171 *
±r
++ = 
»sÿË
[
	`»ad_pbm_š‹g”
(
cšfo
, 
šfe
)];

172 *
±r
++ = 
»sÿË
[
	`»ad_pbm_š‹g”
(
cšfo
, 
šfe
)];

175 
	}
}

178 
	$METHODDEF
(
JDIMENSION
)

179 
	$g‘_sÿËd_g¿y_row
 (
j_com´ess_±r
 
cšfo
, 
cj³g_sourû_±r
 
sšfo
)

182 
µm_sourû_±r
 
sourû
 = (µm_sourû_±rè
sšfo
;

183 
JSAMPROW
 
±r
;

184 
U_CHAR
 * 
bufã½Œ
;

185 
JSAMPLE
 *
»sÿË
 = 
sourû
->rescale;

186 
JDIMENSION
 
cŞ
;

188 ià(! 
	`R—dOK
(
sourû
->
pub
.
šput_fe
, sourû->
iobufãr
, sourû->
bufãr_width
))

189 
	`ERREXIT
(
cšfo
, 
JERR_INPUT_EOF
);

190 
±r
 = 
sourû
->
pub
.
bufãr
[0];

191 
bufã½Œ
 = 
sourû
->
iobufãr
;

192 
cŞ
 = 
cšfo
->
image_width
; col > 0; col--) {

193 *
±r
++ = 
»sÿË
[
	`UCH
(*
bufã½Œ
++)];

196 
	}
}

199 
	$METHODDEF
(
JDIMENSION
)

200 
	$g‘_sÿËd_rgb_row
 (
j_com´ess_±r
 
cšfo
, 
cj³g_sourû_±r
 
sšfo
)

203 
µm_sourû_±r
 
sourû
 = (µm_sourû_±rè
sšfo
;

204 
JSAMPROW
 
±r
;

205 
U_CHAR
 * 
bufã½Œ
;

206 
JSAMPLE
 *
»sÿË
 = 
sourû
->rescale;

207 
JDIMENSION
 
cŞ
;

209 ià(! 
	`R—dOK
(
sourû
->
pub
.
šput_fe
, sourû->
iobufãr
, sourû->
bufãr_width
))

210 
	`ERREXIT
(
cšfo
, 
JERR_INPUT_EOF
);

211 
±r
 = 
sourû
->
pub
.
bufãr
[0];

212 
bufã½Œ
 = 
sourû
->
iobufãr
;

213 
cŞ
 = 
cšfo
->
image_width
; col > 0; col--) {

214 *
±r
++ = 
»sÿË
[
	`UCH
(*
bufã½Œ
++)];

215 *
±r
++ = 
»sÿË
[
	`UCH
(*
bufã½Œ
++)];

216 *
±r
++ = 
»sÿË
[
	`UCH
(*
bufã½Œ
++)];

219 
	}
}

222 
	$METHODDEF
(
JDIMENSION
)

223 
	$g‘_¿w_row
 (
j_com´ess_±r
 
cšfo
, 
cj³g_sourû_±r
 
sšfo
)

229 
µm_sourû_±r
 
sourû
 = (µm_sourû_±rè
sšfo
;

231 ià(! 
	`R—dOK
(
sourû
->
pub
.
šput_fe
, sourû->
iobufãr
, sourû->
bufãr_width
))

232 
	`ERREXIT
(
cšfo
, 
JERR_INPUT_EOF
);

234 
	}
}

237 
	$METHODDEF
(
JDIMENSION
)

238 
	$g‘_wÜd_g¿y_row
 (
j_com´ess_±r
 
cšfo
, 
cj³g_sourû_±r
 
sšfo
)

241 
µm_sourû_±r
 
sourû
 = (µm_sourû_±rè
sšfo
;

242 
JSAMPROW
 
±r
;

243 
U_CHAR
 * 
bufã½Œ
;

244 
JSAMPLE
 *
»sÿË
 = 
sourû
->rescale;

245 
JDIMENSION
 
cŞ
;

247 ià(! 
	`R—dOK
(
sourû
->
pub
.
šput_fe
, sourû->
iobufãr
, sourû->
bufãr_width
))

248 
	`ERREXIT
(
cšfo
, 
JERR_INPUT_EOF
);

249 
±r
 = 
sourû
->
pub
.
bufãr
[0];

250 
bufã½Œ
 = 
sourû
->
iobufãr
;

251 
cŞ
 = 
cšfo
->
image_width
; col > 0; col--) {

252 
‹mp
;

253 
‹mp
 = 
	`UCH
(*
bufã½Œ
++);

254 
‹mp
 |ğ
	`UCH
(*
bufã½Œ
++) << 8;

255 *
±r
++ = 
»sÿË
[
‹mp
];

258 
	}
}

261 
	$METHODDEF
(
JDIMENSION
)

262 
	$g‘_wÜd_rgb_row
 (
j_com´ess_±r
 
cšfo
, 
cj³g_sourû_±r
 
sšfo
)

265 
µm_sourû_±r
 
sourû
 = (µm_sourû_±rè
sšfo
;

266 
JSAMPROW
 
±r
;

267 
U_CHAR
 * 
bufã½Œ
;

268 
JSAMPLE
 *
»sÿË
 = 
sourû
->rescale;

269 
JDIMENSION
 
cŞ
;

271 ià(! 
	`R—dOK
(
sourû
->
pub
.
šput_fe
, sourû->
iobufãr
, sourû->
bufãr_width
))

272 
	`ERREXIT
(
cšfo
, 
JERR_INPUT_EOF
);

273 
±r
 = 
sourû
->
pub
.
bufãr
[0];

274 
bufã½Œ
 = 
sourû
->
iobufãr
;

275 
cŞ
 = 
cšfo
->
image_width
; col > 0; col--) {

276 
‹mp
;

277 
‹mp
 = 
	`UCH
(*
bufã½Œ
++);

278 
‹mp
 |ğ
	`UCH
(*
bufã½Œ
++) << 8;

279 *
±r
++ = 
»sÿË
[
‹mp
];

280 
‹mp
 = 
	`UCH
(*
bufã½Œ
++);

281 
‹mp
 |ğ
	`UCH
(*
bufã½Œ
++) << 8;

282 *
±r
++ = 
»sÿË
[
‹mp
];

283 
‹mp
 = 
	`UCH
(*
bufã½Œ
++);

284 
‹mp
 |ğ
	`UCH
(*
bufã½Œ
++) << 8;

285 *
±r
++ = 
»sÿË
[
‹mp
];

288 
	}
}

295 
	$METHODDEF
()

296 
	$¡¬t_šput_µm
 (
j_com´ess_±r
 
cšfo
, 
cj³g_sourû_±r
 
sšfo
)

298 
µm_sourû_±r
 
sourû
 = (µm_sourû_±rè
sšfo
;

299 
c
;

300 
w
, 
h
, 
maxv®
;

301 
boŞ—n
 
Ãed_iobufãr
, 
u£_¿w_bufãr
, 
Ãed_»sÿË
;

303 ià(
	`g‘c
(
sourû
->
pub
.
šput_fe
) != 'P')

304 
	`ERREXIT
(
cšfo
, 
JERR_PPM_NOT
);

306 
c
 = 
	`g‘c
(
sourû
->
pub
.
šput_fe
);

309 
c
) {

316 
	`ERREXIT
(
cšfo
, 
JERR_PPM_NOT
);

321 
w
 = 
	`»ad_pbm_š‹g”
(
cšfo
, 
sourû
->
pub
.
šput_fe
);

322 
h
 = 
	`»ad_pbm_š‹g”
(
cšfo
, 
sourû
->
pub
.
šput_fe
);

323 
maxv®
 = 
	`»ad_pbm_š‹g”
(
cšfo
, 
sourû
->
pub
.
šput_fe
);

325 ià(
w
 <ğ0 || 
h
 <ğ0 || 
maxv®
 <= 0)

326 
	`ERREXIT
(
cšfo
, 
JERR_PPM_NOT
);

328 
cšfo
->
d©a_´ecisiÚ
 = 
BITS_IN_JSAMPLE
;

329 
cšfo
->
image_width
 = (
JDIMENSION
è
w
;

330 
cšfo
->
image_height
 = (
JDIMENSION
è
h
;

333 
Ãed_iobufãr
 = 
TRUE
;

334 
u£_¿w_bufãr
 = 
FALSE
;

335 
Ãed_»sÿË
 = 
TRUE
;

337 
c
) {

339 
cšfo
->
šput_compÚ’ts
 = 1;

340 
cšfo
->
š_cŞÜ_¥aû
 = 
JCS_GRAYSCALE
;

341 
	`TRACEMS2
(
cšfo
, 1, 
JTRC_PGM_TEXT
, 
w
, 
h
);

342 
sourû
->
pub
.
g‘_pix–_rows
 = 
g‘_‹xt_g¿y_row
;

343 
Ãed_iobufãr
 = 
FALSE
;

347 
cšfo
->
šput_compÚ’ts
 = 3;

348 
cšfo
->
š_cŞÜ_¥aû
 = 
JCS_RGB
;

349 
	`TRACEMS2
(
cšfo
, 1, 
JTRC_PPM_TEXT
, 
w
, 
h
);

350 
sourû
->
pub
.
g‘_pix–_rows
 = 
g‘_‹xt_rgb_row
;

351 
Ãed_iobufãr
 = 
FALSE
;

355 
cšfo
->
šput_compÚ’ts
 = 1;

356 
cšfo
->
š_cŞÜ_¥aû
 = 
JCS_GRAYSCALE
;

357 
	`TRACEMS2
(
cšfo
, 1, 
JTRC_PGM
, 
w
, 
h
);

358 ià(
maxv®
 > 255) {

359 
sourû
->
pub
.
g‘_pix–_rows
 = 
g‘_wÜd_g¿y_row
;

360 } ià(
maxv®
 =ğ
MAXJSAMPLE
 && 
	`SIZEOF
(
JSAMPLE
è=ğSIZEOF(
U_CHAR
)) {

361 
sourû
->
pub
.
g‘_pix–_rows
 = 
g‘_¿w_row
;

362 
u£_¿w_bufãr
 = 
TRUE
;

363 
Ãed_»sÿË
 = 
FALSE
;

365 
sourû
->
pub
.
g‘_pix–_rows
 = 
g‘_sÿËd_g¿y_row
;

370 
cšfo
->
šput_compÚ’ts
 = 3;

371 
cšfo
->
š_cŞÜ_¥aû
 = 
JCS_RGB
;

372 
	`TRACEMS2
(
cšfo
, 1, 
JTRC_PPM
, 
w
, 
h
);

373 ià(
maxv®
 > 255) {

374 
sourû
->
pub
.
g‘_pix–_rows
 = 
g‘_wÜd_rgb_row
;

375 } ià(
maxv®
 =ğ
MAXJSAMPLE
 && 
	`SIZEOF
(
JSAMPLE
è=ğSIZEOF(
U_CHAR
)) {

376 
sourû
->
pub
.
g‘_pix–_rows
 = 
g‘_¿w_row
;

377 
u£_¿w_bufãr
 = 
TRUE
;

378 
Ãed_»sÿË
 = 
FALSE
;

380 
sourû
->
pub
.
g‘_pix–_rows
 = 
g‘_sÿËd_rgb_row
;

386 ià(
Ãed_iobufãr
) {

387 
sourû
->
bufãr_width
 = (
size_t
è
w
 * 
cšfo
->
šput_compÚ’ts
 *

388 ((
maxv®
<=255è? 
	`SIZEOF
(
U_CHAR
) : (2*SIZEOF(U_CHAR)));

389 
sourû
->
iobufãr
 = (
U_CHAR
 *)

390 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

391 
sourû
->
bufãr_width
);

395 ià(
u£_¿w_bufãr
) {

399 
sourû
->
pixrow
 = (
JSAMPROW
èsourû->
iobufãr
;

400 
sourû
->
pub
.
bufãr
 = & sourû->
pixrow
;

401 
sourû
->
pub
.
bufãr_height
 = 1;

404 
sourû
->
pub
.
bufãr
 = (*
cšfo
->
mem
->
®loc_§¼ay
)

405 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
,

406 (
JDIMENSION
è
w
 * 
cšfo
->
šput_compÚ’ts
, (JDIMENSION) 1);

407 
sourû
->
pub
.
bufãr_height
 = 1;

411 ià(
Ãed_»sÿË
) {

412 
INT32
 
v®
, 
h®f_maxv®
;

415 
sourû
->
»sÿË
 = (
JSAMPLE
 *)

416 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

417 (
size_t
è(((è
maxv®
 + 1Lè* 
	`SIZEOF
(
JSAMPLE
)));

418 
h®f_maxv®
 = 
maxv®
 / 2;

419 
v®
 = 0; v® <ğ(
INT32
è
maxv®
; val++) {

421 
sourû
->
»sÿË
[
v®
] = (
JSAMPLE
è((v®*
MAXJSAMPLE
 + 
h®f_maxv®
)/
maxv®
);

424 
	}
}

431 
	$METHODDEF
()

432 
	$fšish_šput_µm
 (
j_com´ess_±r
 
cšfo
, 
cj³g_sourû_±r
 
sšfo
)

435 
	}
}

442 
	$GLOBAL
(
cj³g_sourû_±r
)

443 
	$jš™_»ad_µm
 (
j_com´ess_±r
 
cšfo
)

445 
µm_sourû_±r
 
sourû
;

448 
sourû
 = (
µm_sourû_±r
)

449 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

450 
	`SIZEOF
(
µm_sourû_¡ruù
));

452 
sourû
->
pub
.
¡¬t_šput
 = 
¡¬t_šput_µm
;

453 
sourû
->
pub
.
fšish_šput
 = 
fšish_šput_µm
;

455  (
cj³g_sourû_±r
è
sourû
;

456 
	}
}

	@rdrle.c

22 
	~"cdj³g.h
"

24 #ifdeà
RLE_SUPPORTED


28 
	~<¾e.h
>

35 #ià
BITS_IN_JSAMPLE
 != 8

36 
	gSÜry
, 
this
 
code
 
Úly
 
cİes
 
	gw™h
 8-
b™
 
	gJSAMPLEs
.

52 { 
	mGRAYSCALE
, 
	mMAPPEDGRAY
, 
	mPSEUDOCOLOR
, 
	mTRUECOLOR
, 
	mDIRECTCOLOR
 } 
	t¾e_kšd
;

62 
_¾e_sourû_¡ruù
 * 
	t¾e_sourû_±r
;

64 
	s_¾e_sourû_¡ruù
 {

65 
cj³g_sourû_¡ruù
 
	mpub
;

67 
¾e_kšd
 
	mvisu®
;

68 
jvœt_§¼ay_±r
 
	mimage
;

69 
JDIMENSION
 
	mrow
;

70 
¾e_hdr
 
	mh—d”
;

71 
¾e_pix–
** 
	m¾e_row
;

73 } 
	t¾e_sourû_¡ruù
;

80 
	$METHODDEF
()

81 
	$¡¬t_šput_¾e
 (
j_com´ess_±r
 
cšfo
, 
cj³g_sourû_±r
 
sšfo
)

83 
¾e_sourû_±r
 
sourû
 = (¾e_sourû_±rè
sšfo
;

84 
JDIMENSION
 
width
, 
height
;

85 #ifdeà
PROGRESS_REPORT


86 
cd_´og»ss_±r
 
´og»ss
 = (cd_´og»ss_±rè
cšfo
->progress;

90 
sourû
->
h—d”
 = *
	`¾e_hdr_š™
(
NULL
);

91 
sourû
->
h—d”
.
¾e_fe
 = sourû->
pub
.
šput_fe
;

92 
	`¾e_g‘_£tup
(&(
sourû
->
h—d”
))) {

93 
RLE_SUCCESS
:

96 
RLE_NOT_RLE
:

97 
	`ERREXIT
(
cšfo
, 
JERR_RLE_NOT
);

99 
RLE_NO_SPACE
:

100 
	`ERREXIT
(
cšfo
, 
JERR_RLE_MEM
);

102 
RLE_EMPTY
:

103 
	`ERREXIT
(
cšfo
, 
JERR_RLE_EMPTY
);

105 
RLE_EOF
:

106 
	`ERREXIT
(
cšfo
, 
JERR_RLE_EOF
);

109 
	`ERREXIT
(
cšfo
, 
JERR_RLE_BADERROR
);

115 
width
 = 
sourû
->
h—d”
.
xmax
 - sourû->h—d”.
xmš
 + 1;

116 
height
 = 
sourû
->
h—d”
.
ymax
 - sourû->h—d”.
ymš
 + 1;

117 
sourû
->
h—d”
.
xmš
 = 0;

118 
sourû
->
h—d”
.
xmax
 = 
width
-1;

120 
cšfo
->
image_width
 = 
width
;

121 
cšfo
->
image_height
 = 
height
;

122 
cšfo
->
d©a_´ecisiÚ
 = 8;

124 ià(
sourû
->
h—d”
.
ncŞÜs
 =ğ1 && sourû->h—d”.
ncm­
 == 0) {

125 
sourû
->
visu®
 = 
GRAYSCALE
;

126 
	`TRACEMS2
(
cšfo
, 1, 
JTRC_RLE_GRAY
, 
width
, 
height
);

127 } ià(
sourû
->
h—d”
.
ncŞÜs
 =ğ1 && sourû->h—d”.
ncm­
 == 1) {

128 
sourû
->
visu®
 = 
MAPPEDGRAY
;

129 
	`TRACEMS3
(
cšfo
, 1, 
JTRC_RLE_MAPGRAY
, 
width
, 
height
,

130 1 << 
sourû
->
h—d”
.
cm­Ën
);

131 } ià(
sourû
->
h—d”
.
ncŞÜs
 =ğ1 && sourû->h—d”.
ncm­
 == 3) {

132 
sourû
->
visu®
 = 
PSEUDOCOLOR
;

133 
	`TRACEMS3
(
cšfo
, 1, 
JTRC_RLE_MAPPED
, 
width
, 
height
,

134 1 << 
sourû
->
h—d”
.
cm­Ën
);

135 } ià(
sourû
->
h—d”
.
ncŞÜs
 =ğ3 && sourû->h—d”.
ncm­
 == 3) {

136 
sourû
->
visu®
 = 
TRUECOLOR
;

137 
	`TRACEMS3
(
cšfo
, 1, 
JTRC_RLE_FULLMAP
, 
width
, 
height
,

138 1 << 
sourû
->
h—d”
.
cm­Ën
);

139 } ià(
sourû
->
h—d”
.
ncŞÜs
 =ğ3 && sourû->h—d”.
ncm­
 == 0) {

140 
sourû
->
visu®
 = 
DIRECTCOLOR
;

141 
	`TRACEMS2
(
cšfo
, 1, 
JTRC_RLE
, 
width
, 
height
);

143 
	`ERREXIT
(
cšfo
, 
JERR_RLE_UNSUPPORTED
);

145 ià(
sourû
->
visu®
 =ğ
GRAYSCALE
 || sourû->visu® =ğ
MAPPEDGRAY
) {

146 
cšfo
->
š_cŞÜ_¥aû
 = 
JCS_GRAYSCALE
;

147 
cšfo
->
šput_compÚ’ts
 = 1;

149 
cšfo
->
š_cŞÜ_¥aû
 = 
JCS_RGB
;

150 
cšfo
->
šput_compÚ’ts
 = 3;

157 ià(
sourû
->
visu®
 !ğ
GRAYSCALE
) {

158 
sourû
->
¾e_row
 = (
¾e_pix–
**è(*
cšfo
->
mem
->
®loc_§¼ay
)

159 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
,

160 (
JDIMENSION
è
width
, (JDIMENSIONè
cšfo
->
šput_compÚ’ts
);

164 
sourû
->
image
 = (*
cšfo
->
mem
->
»que¡_vœt_§¼ay
)

165 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
, 
FALSE
,

166 (
JDIMENSION
è(
width
 * 
sourû
->
h—d”
.
ncŞÜs
),

167 (
JDIMENSION
è
height
, (JDIMENSION) 1);

169 #ifdeà
PROGRESS_REPORT


170 ià(
´og»ss
 !ğ
NULL
) {

172 
´og»ss
->
tÙ®_exŒa_·s£s
++;

176 
sourû
->
pub
.
bufãr_height
 = 1;

177 
	}
}

186 
	$METHODDEF
(
JDIMENSION
)

187 
	$g‘_¾e_row
 (
j_com´ess_±r
 
cšfo
, 
cj³g_sourû_±r
 
sšfo
)

189 
¾e_sourû_±r
 
sourû
 = (¾e_sourû_±rè
sšfo
;

191 
sourû
->
row
--;

192 
sourû
->
pub
.
bufãr
 = (*
cšfo
->
mem
->
acûss_vœt_§¼ay
)

193 ((
j_commÚ_±r
è
cšfo
, 
sourû
->
image
, sourû->
row
, (
JDIMENSION
è1, 
FALSE
);

196 
	}
}

204 
	$METHODDEF
(
JDIMENSION
)

205 
	$g‘_p£udocŞÜ_row
 (
j_com´ess_±r
 
cšfo
, 
cj³g_sourû_±r
 
sšfo
)

207 
¾e_sourû_±r
 
sourû
 = (¾e_sourû_±rè
sšfo
;

208 
JSAMPROW
 
¤c_row
, 
de¡_row
;

209 
JDIMENSION
 
cŞ
;

210 
¾e_m­
 *
cŞÜm­
;

211 
v®
;

213 
cŞÜm­
 = 
sourû
->
h—d”
.
cm­
;

214 
de¡_row
 = 
sourû
->
pub
.
bufãr
[0];

215 
sourû
->
row
--;

216 
¤c_row
 = * (*
cšfo
->
mem
->
acûss_vœt_§¼ay
)

217 ((
j_commÚ_±r
è
cšfo
, 
sourû
->
image
, sourû->
row
, (
JDIMENSION
è1, 
FALSE
);

219 
cŞ
 = 
cšfo
->
image_width
; col > 0; col--) {

220 
v®
 = 
	`GETJSAMPLE
(*
¤c_row
++);

221 *
de¡_row
++ = (
JSAMPLE
è(
cŞÜm­
[
v®
 ] >> 8);

222 *
de¡_row
++ = (
JSAMPLE
è(
cŞÜm­
[
v®
 + 256] >> 8);

223 *
de¡_row
++ = (
JSAMPLE
è(
cŞÜm­
[
v®
 + 512] >> 8);

227 
	}
}

240 
	$METHODDEF
(
JDIMENSION
)

241 
	$lßd_image
 (
j_com´ess_±r
 
cšfo
, 
cj³g_sourû_±r
 
sšfo
)

243 
¾e_sourû_±r
 
sourû
 = (¾e_sourû_±rè
sšfo
;

244 
JDIMENSION
 
row
, 
cŞ
;

245 
JSAMPROW
 
sÿÆše
, 
»d_±r
, 
g»’_±r
, 
blue_±r
;

246 
¾e_pix–
 **
¾e_row
;

247 
¾e_m­
 *
cŞÜm­
;

248 
chªÃl
;

249 #ifdeà
PROGRESS_REPORT


250 
cd_´og»ss_±r
 
´og»ss
 = (cd_´og»ss_±rè
cšfo
->progress;

253 
cŞÜm­
 = 
sourû
->
h—d”
.
cm­
;

254 
¾e_row
 = 
sourû
->rle_row;

260 
	`RLE_CLR_BIT
(
sourû
->
h—d”
, 
RLE_ALPHA
);

262 #ifdeà
PROGRESS_REPORT


263 ià(
´og»ss
 !ğ
NULL
) {

264 
´og»ss
->
pub
.
·ss_lim™
 = 
cšfo
->
image_height
;

265 
´og»ss
->
pub
.
·ss_couÁ”
 = 0;

266 (*
´og»ss
->
pub
.
´og»ss_mÚ™Ü
è((
j_commÚ_±r
è
cšfo
);

270 
sourû
->
visu®
) {

272 
GRAYSCALE
:

273 
PSEUDOCOLOR
:

274 
row
 = 0;„ow < 
cšfo
->
image_height
;„ow++) {

275 
¾e_row
 = (
¾e_pix–
 **è(*
cšfo
->
mem
->
acûss_vœt_§¼ay
)

276 ((
j_commÚ_±r
è
cšfo
, 
sourû
->
image
, 
row
, (
JDIMENSION
è1, 
TRUE
);

277 
	`¾e_g‘row
(&
sourû
->
h—d”
, 
¾e_row
);

278 #ifdeà
PROGRESS_REPORT


279 ià(
´og»ss
 !ğ
NULL
) {

280 
´og»ss
->
pub
.
·ss_couÁ”
++;

281 (*
´og»ss
->
pub
.
´og»ss_mÚ™Ü
è((
j_commÚ_±r
è
cšfo
);

287 
MAPPEDGRAY
:

288 
TRUECOLOR
:

289 
row
 = 0;„ow < 
cšfo
->
image_height
;„ow++) {

290 
sÿÆše
 = * (*
cšfo
->
mem
->
acûss_vœt_§¼ay
)

291 ((
j_commÚ_±r
è
cšfo
, 
sourû
->
image
, 
row
, (
JDIMENSION
è1, 
TRUE
);

292 
¾e_row
 = 
sourû
->rle_row;

293 
	`¾e_g‘row
(&
sourû
->
h—d”
, 
¾e_row
);

295 
cŞ
 = 0; cŞ < 
cšfo
->
image_width
; col++) {

296 
chªÃl
 = 0; chªÃÈ< 
sourû
->
h—d”
.
ncŞÜs
; channel++) {

297 *
sÿÆše
++ = (
JSAMPLE
)

298 (
cŞÜm­
[
	`GETJSAMPLE
(
¾e_row
[
chªÃl
][
cŞ
]) + 256 * channel] >> 8);

302 #ifdeà
PROGRESS_REPORT


303 ià(
´og»ss
 !ğ
NULL
) {

304 
´og»ss
->
pub
.
·ss_couÁ”
++;

305 (*
´og»ss
->
pub
.
´og»ss_mÚ™Ü
è((
j_commÚ_±r
è
cšfo
);

311 
DIRECTCOLOR
:

312 
row
 = 0;„ow < 
cšfo
->
image_height
;„ow++) {

313 
sÿÆše
 = * (*
cšfo
->
mem
->
acûss_vœt_§¼ay
)

314 ((
j_commÚ_±r
è
cšfo
, 
sourû
->
image
, 
row
, (
JDIMENSION
è1, 
TRUE
);

315 
	`¾e_g‘row
(&
sourû
->
h—d”
, 
¾e_row
);

317 
»d_±r
 = 
¾e_row
[0];

318 
g»’_±r
 = 
¾e_row
[1];

319 
blue_±r
 = 
¾e_row
[2];

321 
cŞ
 = 
cšfo
->
image_width
; col > 0; col--) {

322 *
sÿÆše
++ = *
»d_±r
++;

323 *
sÿÆše
++ = *
g»’_±r
++;

324 *
sÿÆše
++ = *
blue_±r
++;

327 #ifdeà
PROGRESS_REPORT


328 ià(
´og»ss
 !ğ
NULL
) {

329 
´og»ss
->
pub
.
·ss_couÁ”
++;

330 (*
´og»ss
->
pub
.
´og»ss_mÚ™Ü
è((
j_commÚ_±r
è
cšfo
);

336 #ifdeà
PROGRESS_REPORT


337 ià(
´og»ss
 !ğ
NULL
)

338 
´og»ss
->
com¶‘ed_exŒa_·s£s
++;

342 ià(
sourû
->
visu®
 =ğ
PSEUDOCOLOR
) {

343 
sourû
->
pub
.
bufãr
 = sourû->
¾e_row
;

344 
sourû
->
pub
.
g‘_pix–_rows
 = 
g‘_p£udocŞÜ_row
;

346 
sourû
->
pub
.
g‘_pix–_rows
 = 
g‘_¾e_row
;

348 
sourû
->
row
 = 
cšfo
->
image_height
;

351  (*
sourû
->
pub
.
g‘_pix–_rows
è(
cšfo
, 
sšfo
);

352 
	}
}

359 
	$METHODDEF
()

360 
	$fšish_šput_¾e
 (
j_com´ess_±r
 
cšfo
, 
cj³g_sourû_±r
 
sšfo
)

363 
	}
}

370 
	$GLOBAL
(
cj³g_sourû_±r
)

371 
	$jš™_»ad_¾e
 (
j_com´ess_±r
 
cšfo
)

373 
¾e_sourû_±r
 
sourû
;

376 
sourû
 = (
¾e_sourû_±r
)

377 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

378 
	`SIZEOF
(
¾e_sourû_¡ruù
));

380 
sourû
->
pub
.
¡¬t_šput
 = 
¡¬t_šput_¾e
;

381 
sourû
->
pub
.
fšish_šput
 = 
fšish_šput_¾e
;

382 
sourû
->
pub
.
g‘_pix–_rows
 = 
lßd_image
;

384  (
cj³g_sourû_±r
è
sourû
;

385 
	}
}

	@rdswitch.c

16 
	~"cdj³g.h
"

17 
	~<ùy³.h
>

20 
	$LOCAL
()

21 
	$‹xt_g‘c
 (
FILE
 * 
fe
)

25 
ch
;

27 
ch
 = 
	`g‘c
(
fe
);

28 ià(
ch
 == '#') {

30 
ch
 = 
	`g‘c
(
fe
);

31 } 
ch
 !ğ'\n' && ch !ğ
EOF
);

33  
ch
;

34 
	}
}

37 
	$LOCAL
(
boŞ—n
)

38 
	$»ad_‹xt_š‹g”
 (
FILE
 * 
fe
, * 
»suÉ
, * 
‹rmch¬
)

42 
ch
;

43 
v®
;

47 
ch
 = 
	`‹xt_g‘c
(
fe
);

48 ià(
ch
 =ğ
EOF
) {

49 *
‹rmch¬
 = 
ch
;

50  
FALSE
;

52 } 
	`is¥aû
(
ch
));

54 ià(! 
	`isdig™
(
ch
)) {

55 *
‹rmch¬
 = 
ch
;

56  
FALSE
;

59 
v®
 = 
ch
 - '0';

60 (
ch
 = 
	`‹xt_g‘c
(
fe
)è!ğ
EOF
) {

61 ià(! 
	`isdig™
(
ch
))

63 
v®
 *= 10;

64 
v®
 +ğ
ch
 - '0';

66 *
»suÉ
 = 
v®
;

67 *
‹rmch¬
 = 
ch
;

68  
TRUE
;

69 
	}
}

72 
	$GLOBAL
(
boŞ—n
)

73 
	$»ad_quªt_bËs
 (
j_com´ess_±r
 
cšfo
, * 
f’ame
,

74 
sÿË_çùÜ
, 
boŞ—n
 
fÜû_ba£lše
)

85 
FILE
 * 
å
;

86 
tbÊo
, 
i
, 
‹rmch¬
;

87 
v®
;

88 
bË
[
DCTSIZE2
];

90 ià((
å
 = 
	`fİ’
(
f’ame
, "r")è=ğ
NULL
) {

91 
	`årštf
(
¡d”r
, "Cª'ˆİ’abË f%s\n", 
f’ame
);

92  
FALSE
;

94 
tbÊo
 = 0;

96 
	`»ad_‹xt_š‹g”
(
å
, &
v®
, &
‹rmch¬
)) {

97 ià(
tbÊo
 >ğ
NUM_QUANT_TBLS
) {

98 
	`årštf
(
¡d”r
, "ToØmªyabË š f%s\n", 
f’ame
);

99 
	`fşo£
(
å
);

100  
FALSE
;

102 
bË
[0] = (è
v®
;

103 
i
 = 1; i < 
DCTSIZE2
; i++) {

104 ià(! 
	`»ad_‹xt_š‹g”
(
å
, &
v®
, &
‹rmch¬
)) {

105 
	`årštf
(
¡d”r
, "Inv®idabË d©¨š f%s\n", 
f’ame
);

106 
	`fşo£
(
å
);

107  
FALSE
;

109 
bË
[
i
] = (è
v®
;

111 
	`j³g_add_quªt_bË
(
cšfo
, 
tbÊo
, 
bË
, 
sÿË_çùÜ
, 
fÜû_ba£lše
);

112 
tbÊo
++;

115 ià(
‹rmch¬
 !ğ
EOF
) {

116 
	`årštf
(
¡d”r
, "NÚ-num”iød©¨š f%s\n", 
f’ame
);

117 
	`fşo£
(
å
);

118  
FALSE
;

121 
	`fşo£
(
å
);

122  
TRUE
;

123 
	}
}

126 #ifdeà
C_MULTISCAN_FILES_SUPPORTED


128 
	$LOCAL
(
boŞ—n
)

129 
	$»ad_sÿn_š‹g”
 (
FILE
 * 
fe
, * 
»suÉ
, * 
‹rmch¬
)

134 
ch
;

136 ià(! 
	`»ad_‹xt_š‹g”
(
fe
, 
»suÉ
, 
‹rmch¬
))

137  
FALSE
;

138 
ch
 = *
‹rmch¬
;

139 
ch
 !ğ
EOF
 && 
	`is¥aû
(ch))

140 
ch
 = 
	`‹xt_g‘c
(
fe
);

141 ià(
	`isdig™
(
ch
)) {

142 ià(
	`ung‘c
(
ch
, 
fe
è=ğ
EOF
)

143  
FALSE
;

144 
ch
 = ' ';

149 ià(
ch
 !ğ
EOF
 && ch != ';' && ch != ':')

150 
ch
 = ' ';

152 *
‹rmch¬
 = 
ch
;

153  
TRUE
;

154 
	}
}

157 
	$GLOBAL
(
boŞ—n
)

158 
	$»ad_sÿn_süt
 (
j_com´ess_±r
 
cšfo
, * 
f’ame
)

175 
FILE
 * 
å
;

176 
sÿÂo
, 
ncomps
, 
‹rmch¬
;

177 
v®
;

178 
j³g_sÿn_šfo
 * 
sÿÅŒ
;

179 
	#MAX_SCANS
 100

	)

180 
j³g_sÿn_šfo
 
sÿns
[
MAX_SCANS
];

182 ià((
å
 = 
	`fİ’
(
f’ame
, "r")è=ğ
NULL
) {

183 
	`årštf
(
¡d”r
, "Cª'ˆİ’ sÿÀdefš™iÚ f%s\n", 
f’ame
);

184  
FALSE
;

186 
sÿÅŒ
 = 
sÿns
;

187 
sÿÂo
 = 0;

189 
	`»ad_sÿn_š‹g”
(
å
, &
v®
, &
‹rmch¬
)) {

190 ià(
sÿÂo
 >ğ
MAX_SCANS
) {

191 
	`årštf
(
¡d”r
, "ToØmªy sÿn defšed iÀf%s\n", 
f’ame
);

192 
	`fşo£
(
å
);

193  
FALSE
;

195 
sÿÅŒ
->
compÚ’t_šdex
[0] = (è
v®
;

196 
ncomps
 = 1;

197 
‹rmch¬
 == ' ') {

198 ià(
ncomps
 >ğ
MAX_COMPS_IN_SCAN
) {

199 
	`årštf
(
¡d”r
, "Too many components in one scan in file %s\n",

200 
f’ame
);

201 
	`fşo£
(
å
);

202  
FALSE
;

204 ià(! 
	`»ad_sÿn_š‹g”
(
å
, &
v®
, &
‹rmch¬
))

205 
bogus
;

206 
sÿÅŒ
->
compÚ’t_šdex
[
ncomps
] = (è
v®
;

207 
ncomps
++;

209 
sÿÅŒ
->
comps_š_sÿn
 = 
ncomps
;

210 ià(
‹rmch¬
 == ':') {

211 ià(! 
	`»ad_sÿn_š‹g”
(
å
, &
v®
, &
‹rmch¬
) ||ermchar != ' ')

212 
bogus
;

213 
sÿÅŒ
->
Ss
 = (è
v®
;

214 ià(! 
	`»ad_sÿn_š‹g”
(
å
, &
v®
, &
‹rmch¬
) ||ermchar != ' ')

215 
bogus
;

216 
sÿÅŒ
->
Se
 = (è
v®
;

217 ià(! 
	`»ad_sÿn_š‹g”
(
å
, &
v®
, &
‹rmch¬
) ||ermchar != ' ')

218 
bogus
;

219 
sÿÅŒ
->
Ah
 = (è
v®
;

220 ià(! 
	`»ad_sÿn_š‹g”
(
å
, &
v®
, &
‹rmch¬
))

221 
bogus
;

222 
sÿÅŒ
->
Al
 = (è
v®
;

225 
sÿÅŒ
->
Ss
 = 0;

226 
sÿÅŒ
->
Se
 = 
DCTSIZE2
-1;

227 
sÿÅŒ
->
Ah
 = 0;

228 
sÿÅŒ
->
Al
 = 0;

230 ià(
‹rmch¬
 !ğ';' &&”mch¬ !ğ
EOF
) {

231 
bogus
:

232 
	`årštf
(
¡d”r
, "Inv®id sÿÀ’Œy fÜm© iÀf%s\n", 
f’ame
);

233 
	`fşo£
(
å
);

234  
FALSE
;

236 
sÿÅŒ
++, 
sÿÂo
++;

239 ià(
‹rmch¬
 !ğ
EOF
) {

240 
	`årštf
(
¡d”r
, "NÚ-num”iød©¨š f%s\n", 
f’ame
);

241 
	`fşo£
(
å
);

242  
FALSE
;

245 ià(
sÿÂo
 > 0) {

250 
sÿÅŒ
 = (
j³g_sÿn_šfo
 *)

251 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

252 
sÿÂo
 * 
	`SIZEOF
(
j³g_sÿn_šfo
));

253 
	`MEMCOPY
(
sÿÅŒ
, 
sÿns
, 
sÿÂo
 * 
	`SIZEOF
(
j³g_sÿn_šfo
));

254 
cšfo
->
sÿn_šfo
 = 
sÿÅŒ
;

255 
cšfo
->
num_sÿns
 = 
sÿÂo
;

258 
	`fşo£
(
å
);

259  
TRUE
;

260 
	}
}

265 
	$GLOBAL
(
boŞ—n
)

266 
	$£t_quªt_¦Ùs
 (
j_com´ess_±r
 
cšfo
, *
¬g
)

272 
v®
 = 0;

273 
ci
;

274 
ch
;

276 
ci
 = 0; c˜< 
MAX_COMPONENTS
; ci++) {

277 ià(*
¬g
) {

278 
ch
 = ',';

279 ià(
	`ssÿnf
(
¬g
, "%d%c", &
v®
, &
ch
) < 1)

280  
FALSE
;

281 ià(
ch
 != ',')

282  
FALSE
;

283 ià(
v®
 < 0 || v® >ğ
NUM_QUANT_TBLS
) {

284 
	`årštf
(
¡d”r
, "JPEG quantizationables‡re‚umbered 0..%d\n",

285 
NUM_QUANT_TBLS
-1);

286  
FALSE
;

288 
cšfo
->
comp_šfo
[
ci
].
quªt_tbl_no
 = 
v®
;

289 *
¬g
 && *arg++ != ',')

293 
cšfo
->
comp_šfo
[
ci
].
quªt_tbl_no
 = 
v®
;

296  
TRUE
;

297 
	}
}

300 
	$GLOBAL
(
boŞ—n
)

301 
	$£t_§m¶e_çùÜs
 (
j_com´ess_±r
 
cšfo
, *
¬g
)

307 
ci
, 
v®1
, 
v®2
;

308 
ch1
, 
ch2
;

310 
ci
 = 0; c˜< 
MAX_COMPONENTS
; ci++) {

311 ià(*
¬g
) {

312 
ch2
 = ',';

313 ià(
	`ssÿnf
(
¬g
, "%d%c%d%c", &
v®1
, &
ch1
, &
v®2
, &
ch2
) < 3)

314  
FALSE
;

315 ià((
ch1
 !ğ'x' && ch1 !ğ'X'è|| 
ch2
 != ',')

316  
FALSE
;

317 ià(
v®1
 <ğ0 || v®1 > 4 || 
v®2
 <= 0 || val2 > 4) {

318 
	`årštf
(
¡d”r
, "JPEG sampling factors must be 1..4\n");

319  
FALSE
;

321 
cšfo
->
comp_šfo
[
ci
].
h_§mp_çùÜ
 = 
v®1
;

322 
cšfo
->
comp_šfo
[
ci
].
v_§mp_çùÜ
 = 
v®2
;

323 *
¬g
 && *arg++ != ',')

327 
cšfo
->
comp_šfo
[
ci
].
h_§mp_çùÜ
 = 1;

328 
cšfo
->
comp_šfo
[
ci
].
v_§mp_çùÜ
 = 1;

331  
TRUE
;

332 
	}
}

	@rdtarga.c

20 
	~"cdj³g.h
"

22 #ifdeà
TARGA_SUPPORTED


27 #ifdeà
HAVE_UNSIGNED_CHAR


28 
	tU_CHAR
;

29 
	#UCH
(
x
è((è(x))

	)

31 #ifdeà
CHAR_IS_UNSIGNED


32 
	tU_CHAR
;

33 
	#UCH
(
x
è((è(x))

	)

35 
	tU_CHAR
;

36 
	#UCH
(
x
è((è(xè& 0xFF)

	)

41 
	#R—dOK
(
fe
,
bufãr
,
Ën
è(
	`JFREAD
(fe,bufãr,Ënè=ğ((
size_t
èÖ’)))

	)

46 
_tga_sourû_¡ruù
 * 
	ttga_sourû_±r
;

48 
	s_tga_sourû_¡ruù
 {

49 
cj³g_sourû_¡ruù
 
	mpub
;

51 
j_com´ess_±r
 
	mcšfo
;

53 
JSAMPARRAY
 
	mcŞÜm­
;

55 
jvœt_§¼ay_±r
 
	mwhŞe_image
;

56 
JDIMENSION
 
	mcu¼’t_row
;

59 
JMETHOD
(, 
»ad_pix–
, (
tga_sourû_±r
 
sšfo
));

62 
U_CHAR
 
	mtga_pix–
[4];

64 
	mpix–_size
;

67 
	mblock_couÁ
;

68 
	mdup_pix–_couÁ
;

71 
JMETHOD
(
JDIMENSION
, 
g‘_pix–_rows
, (
j_com´ess_±r
 
cšfo
,

72 
cj³g_sourû_±r
 
sšfo
));

73 } 
	ttga_sourû_¡ruù
;

78 cÚ¡ 
UINT8
 
	gc5to8b™s
[32] = {

87 
	$LOCAL
()

88 
	$»ad_by‹
 (
tga_sourû_±r
 
sšfo
)

91 
FILE
 *
šfe
 = 
sšfo
->
pub
.
šput_fe
;

92 
c
;

94 ià((
c
 = 
	`g‘c
(
šfe
)è=ğ
EOF
)

95 
	`ERREXIT
(
sšfo
->
cšfo
, 
JERR_INPUT_EOF
);

96  
c
;

97 
	}
}

100 
	$LOCAL
()

101 
	$»ad_cŞÜm­
 (
tga_sourû_±r
 
sšfo
, 
cm­Ën
, 
m­’Œysize
)

104 
i
;

107 ià(
m­’Œysize
 != 24)

108 
	`ERREXIT
(
sšfo
->
cšfo
, 
JERR_TGA_BADCMAP
);

110 
i
 = 0; i < 
cm­Ën
; i++) {

111 
sšfo
->
cŞÜm­
[2][
i
] = (
JSAMPLE
è
	`»ad_by‹
(sinfo);

112 
sšfo
->
cŞÜm­
[1][
i
] = (
JSAMPLE
è
	`»ad_by‹
(sinfo);

113 
sšfo
->
cŞÜm­
[0][
i
] = (
JSAMPLE
è
	`»ad_by‹
(sinfo);

115 
	}
}

122 
	$METHODDEF
()

123 
	$»ad_nÚ_¾e_pix–
 (
tga_sourû_±r
 
sšfo
)

126 
FILE
 *
šfe
 = 
sšfo
->
pub
.
šput_fe
;

127 
i
;

129 
i
 = 0; i < 
sšfo
->
pix–_size
; i++) {

130 
sšfo
->
tga_pix–
[
i
] = (
U_CHAR
è
	`g‘c
(
šfe
);

132 
	}
}

135 
	$METHODDEF
()

136 
	$»ad_¾e_pix–
 (
tga_sourû_±r
 
sšfo
)

139 
FILE
 *
šfe
 = 
sšfo
->
pub
.
šput_fe
;

140 
i
;

143 ià(
sšfo
->
dup_pix–_couÁ
 > 0) {

144 
sšfo
->
dup_pix–_couÁ
--;

149 ià(--
sšfo
->
block_couÁ
 < 0) {

150 
i
 = 
	`»ad_by‹
(
sšfo
);

151 ià(
i
 & 0x80) {

152 
sšfo
->
dup_pix–_couÁ
 = 
i
 & 0x7F;

153 
sšfo
->
block_couÁ
 = 0;

155 
sšfo
->
block_couÁ
 = 
i
 & 0x7F;

160 
i
 = 0; i < 
sšfo
->
pix–_size
; i++) {

161 
sšfo
->
tga_pix–
[
i
] = (
U_CHAR
è
	`g‘c
(
šfe
);

163 
	}
}

173 
	$METHODDEF
(
JDIMENSION
)

174 
	$g‘_8b™_g¿y_row
 (
j_com´ess_±r
 
cšfo
, 
cj³g_sourû_±r
 
sšfo
)

177 
tga_sourû_±r
 
sourû
 = (tga_sourû_±rè
sšfo
;

178 
JSAMPROW
 
±r
;

179 
JDIMENSION
 
cŞ
;

181 
±r
 = 
sourû
->
pub
.
bufãr
[0];

182 
cŞ
 = 
cšfo
->
image_width
; col > 0; col--) {

183 (*
sourû
->
»ad_pix–
) (source);

184 *
±r
++ = (
JSAMPLE
è
	`UCH
(
sourû
->
tga_pix–
[0]);

187 
	}
}

189 
	$METHODDEF
(
JDIMENSION
)

190 
	$g‘_8b™_row
 (
j_com´ess_±r
 
cšfo
, 
cj³g_sourû_±r
 
sšfo
)

193 
tga_sourû_±r
 
sourû
 = (tga_sourû_±rè
sšfo
;

194 
t
;

195 
JSAMPROW
 
±r
;

196 
JDIMENSION
 
cŞ
;

197 
JSAMPARRAY
 
cŞÜm­
 = 
sourû
->colormap;

199 
±r
 = 
sourû
->
pub
.
bufãr
[0];

200 
cŞ
 = 
cšfo
->
image_width
; col > 0; col--) {

201 (*
sourû
->
»ad_pix–
) (source);

202 
t
 = 
	`UCH
(
sourû
->
tga_pix–
[0]);

203 *
±r
++ = 
cŞÜm­
[0][
t
];

204 *
±r
++ = 
cŞÜm­
[1][
t
];

205 *
±r
++ = 
cŞÜm­
[2][
t
];

208 
	}
}

210 
	$METHODDEF
(
JDIMENSION
)

211 
	$g‘_16b™_row
 (
j_com´ess_±r
 
cšfo
, 
cj³g_sourû_±r
 
sšfo
)

214 
tga_sourû_±r
 
sourû
 = (tga_sourû_±rè
sšfo
;

215 
t
;

216 
JSAMPROW
 
±r
;

217 
JDIMENSION
 
cŞ
;

219 
±r
 = 
sourû
->
pub
.
bufãr
[0];

220 
cŞ
 = 
cšfo
->
image_width
; col > 0; col--) {

221 (*
sourû
->
»ad_pix–
) (source);

222 
t
 = 
	`UCH
(
sourû
->
tga_pix–
[0]);

223 
t
 +ğ
	`UCH
(
sourû
->
tga_pix–
[1]) << 8;

228 
±r
[2] = (
JSAMPLE
è
c5to8b™s
[
t
 & 0x1F];

229 
t
 >>= 5;

230 
±r
[1] = (
JSAMPLE
è
c5to8b™s
[
t
 & 0x1F];

231 
t
 >>= 5;

232 
±r
[0] = (
JSAMPLE
è
c5to8b™s
[
t
 & 0x1F];

233 
±r
 += 3;

236 
	}
}

238 
	$METHODDEF
(
JDIMENSION
)

239 
	$g‘_24b™_row
 (
j_com´ess_±r
 
cšfo
, 
cj³g_sourû_±r
 
sšfo
)

242 
tga_sourû_±r
 
sourû
 = (tga_sourû_±rè
sšfo
;

243 
JSAMPROW
 
±r
;

244 
JDIMENSION
 
cŞ
;

246 
±r
 = 
sourû
->
pub
.
bufãr
[0];

247 
cŞ
 = 
cšfo
->
image_width
; col > 0; col--) {

248 (*
sourû
->
»ad_pix–
) (source);

249 *
±r
++ = (
JSAMPLE
è
	`UCH
(
sourû
->
tga_pix–
[2]);

250 *
±r
++ = (
JSAMPLE
è
	`UCH
(
sourû
->
tga_pix–
[1]);

251 *
±r
++ = (
JSAMPLE
è
	`UCH
(
sourû
->
tga_pix–
[0]);

254 
	}
}

263 
	#g‘_32b™_row
 
g‘_24b™_row


	)

272 
	$METHODDEF
(
JDIMENSION
)

273 
	$g‘_memÜy_row
 (
j_com´ess_±r
 
cšfo
, 
cj³g_sourû_±r
 
sšfo
)

275 
tga_sourû_±r
 
sourû
 = (tga_sourû_±rè
sšfo
;

276 
JDIMENSION
 
sourû_row
;

281 
sourû_row
 = 
cšfo
->
image_height
 - 
sourû
->
cu¼’t_row
 - 1;

284 
sourû
->
pub
.
bufãr
 = (*
cšfo
->
mem
->
acûss_vœt_§¼ay
)

285 ((
j_commÚ_±r
è
cšfo
, 
sourû
->
whŞe_image
,

286 
sourû_row
, (
JDIMENSION
è1, 
FALSE
);

288 
sourû
->
cu¼’t_row
++;

290 
	}
}

299 
	$METHODDEF
(
JDIMENSION
)

300 
	$´–ßd_image
 (
j_com´ess_±r
 
cšfo
, 
cj³g_sourû_±r
 
sšfo
)

302 
tga_sourû_±r
 
sourû
 = (tga_sourû_±rè
sšfo
;

303 
JDIMENSION
 
row
;

304 
cd_´og»ss_±r
 
´og»ss
 = (cd_´og»ss_±rè
cšfo
->progress;

307 
row
 = 0;„ow < 
cšfo
->
image_height
;„ow++) {

308 ià(
´og»ss
 !ğ
NULL
) {

309 
´og»ss
->
pub
.
·ss_couÁ”
 = (è
row
;

310 
´og»ss
->
pub
.
·ss_lim™
 = (è
cšfo
->
image_height
;

311 (*
´og»ss
->
pub
.
´og»ss_mÚ™Ü
è((
j_commÚ_±r
è
cšfo
);

313 
sourû
->
pub
.
bufãr
 = (*
cšfo
->
mem
->
acûss_vœt_§¼ay
)

314 ((
j_commÚ_±r
è
cšfo
, 
sourû
->
whŞe_image
, 
row
, (
JDIMENSION
è1, 
TRUE
);

315 (*
sourû
->
g‘_pix–_rows
è(
cšfo
, 
sšfo
);

317 ià(
´og»ss
 !ğ
NULL
)

318 
´og»ss
->
com¶‘ed_exŒa_·s£s
++;

321 
sourû
->
pub
.
g‘_pix–_rows
 = 
g‘_memÜy_row
;

322 
sourû
->
cu¼’t_row
 = 0;

324  
	`g‘_memÜy_row
(
cšfo
, 
sšfo
);

325 
	}
}

332 
	$METHODDEF
()

333 
	$¡¬t_šput_tga
 (
j_com´ess_±r
 
cšfo
, 
cj³g_sourû_±r
 
sšfo
)

335 
tga_sourû_±r
 
sourû
 = (tga_sourû_±rè
sšfo
;

336 
U_CHAR
 
rgah—d”
[18];

337 
idËn
, 
cm­ty³
, 
subty³
, 
æags
, 
š‹¾aû_ty³
, 
compÚ’ts
;

338 
width
, 
height
, 
m­Ën
;

339 
boŞ—n
 
is_bÙtom_up
;

341 
	#GET_2B
(
off£t
è((è
	`UCH
(
rgah—d”
[offset]) + \

342 (((è
	`UCH
(
rgah—d”
[
off£t
+1])è<< 8))

	)

344 ià(! 
	`R—dOK
(
sourû
->
pub
.
šput_fe
, 
rgah—d”
, 18))

345 
	`ERREXIT
(
cšfo
, 
JERR_INPUT_EOF
);

348 ià(
rgah—d”
[16] == 15)

349 
rgah—d”
[16] = 16;

351 
idËn
 = 
	`UCH
(
rgah—d”
[0]);

352 
cm­ty³
 = 
	`UCH
(
rgah—d”
[1]);

353 
subty³
 = 
	`UCH
(
rgah—d”
[2]);

354 
m­Ën
 = 
	`GET_2B
(5);

355 
width
 = 
	`GET_2B
(12);

356 
height
 = 
	`GET_2B
(14);

357 
sourû
->
pix–_size
 = 
	`UCH
(
rgah—d”
[16]) >> 3;

358 
æags
 = 
	`UCH
(
rgah—d”
[17]);

360 
is_bÙtom_up
 = ((
æags
 & 0x20) == 0);

361 
š‹¾aû_ty³
 = 
æags
 >> 6;

363 ià(
cm­ty³
 > 1 ||

364 
sourû
->
pix–_size
 < 1 || source->pixel_size > 4 ||

365 (
	`UCH
(
rgah—d”
[16]) & 7) != 0 ||

366 
š‹¾aû_ty³
 != 0)

367 
	`ERREXIT
(
cšfo
, 
JERR_TGA_BADPARMS
);

369 ià(
subty³
 > 8) {

371 
sourû
->
»ad_pix–
 = 
»ad_¾e_pix–
;

372 
sourû
->
block_couÁ
 = sourû->
dup_pix–_couÁ
 = 0;

373 
subty³
 -= 8;

376 
sourû
->
»ad_pix–
 = 
»ad_nÚ_¾e_pix–
;

380 
compÚ’ts
 = 3;

381 
cšfo
->
š_cŞÜ_¥aû
 = 
JCS_RGB
;

383 
subty³
) {

385 ià(
sourû
->
pix–_size
 =ğ1 && 
cm­ty³
 == 1)

386 
sourû
->
g‘_pix–_rows
 = 
g‘_8b™_row
;

388 
	`ERREXIT
(
cšfo
, 
JERR_TGA_BADPARMS
);

389 
	`TRACEMS2
(
cšfo
, 1, 
JTRC_TGA_MAPPED
, 
width
, 
height
);

392 
sourû
->
pix–_size
) {

394 
sourû
->
g‘_pix–_rows
 = 
g‘_16b™_row
;

397 
sourû
->
g‘_pix–_rows
 = 
g‘_24b™_row
;

400 
sourû
->
g‘_pix–_rows
 = 
g‘_32b™_row
;

403 
	`ERREXIT
(
cšfo
, 
JERR_TGA_BADPARMS
);

406 
	`TRACEMS2
(
cšfo
, 1, 
JTRC_TGA
, 
width
, 
height
);

409 
compÚ’ts
 = 1;

410 
cšfo
->
š_cŞÜ_¥aû
 = 
JCS_GRAYSCALE
;

411 ià(
sourû
->
pix–_size
 == 1)

412 
sourû
->
g‘_pix–_rows
 = 
g‘_8b™_g¿y_row
;

414 
	`ERREXIT
(
cšfo
, 
JERR_TGA_BADPARMS
);

415 
	`TRACEMS2
(
cšfo
, 1, 
JTRC_TGA_GRAY
, 
width
, 
height
);

418 
	`ERREXIT
(
cšfo
, 
JERR_TGA_BADPARMS
);

422 ià(
is_bÙtom_up
) {

424 
sourû
->
whŞe_image
 = (*
cšfo
->
mem
->
»que¡_vœt_§¼ay
)

425 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
, 
FALSE
,

426 (
JDIMENSION
è
width
 * 
compÚ’ts
, (JDIMENSIONè
height
, (JDIMENSION) 1);

427 ià(
cšfo
->
´og»ss
 !ğ
NULL
) {

428 
cd_´og»ss_±r
 
´og»ss
 = (cd_´og»ss_±rè
cšfo
->progress;

429 
´og»ss
->
tÙ®_exŒa_·s£s
++;

432 
sourû
->
pub
.
bufãr_height
 = 1;

433 
sourû
->
pub
.
g‘_pix–_rows
 = 
´–ßd_image
;

436 
sourû
->
whŞe_image
 = 
NULL
;

437 
sourû
->
pub
.
bufãr
 = (*
cšfo
->
mem
->
®loc_§¼ay
)

438 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
,

439 (
JDIMENSION
è
width
 * 
compÚ’ts
, (JDIMENSION) 1);

440 
sourû
->
pub
.
bufãr_height
 = 1;

441 
sourû
->
pub
.
g‘_pix–_rows
 = source->get_pixel_rows;

444 
idËn
--)

445 (è
	`»ad_by‹
(
sourû
);

447 ià(
m­Ën
 > 0) {

448 ià(
m­Ën
 > 256 || 
	`GET_2B
(3) != 0)

449 
	`ERREXIT
(
cšfo
, 
JERR_TGA_BADCMAP
);

451 
sourû
->
cŞÜm­
 = (*
cšfo
->
mem
->
®loc_§¼ay
)

452 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
, (
JDIMENSION
è
m­Ën
, (JDIMENSION) 3);

454 
	`»ad_cŞÜm­
(
sourû
, (è
m­Ën
, 
	`UCH
(
rgah—d”
[7]));

456 ià(
cm­ty³
)

457 
	`ERREXIT
(
cšfo
, 
JERR_TGA_BADPARMS
);

458 
sourû
->
cŞÜm­
 = 
NULL
;

461 
cšfo
->
šput_compÚ’ts
 = 
compÚ’ts
;

462 
cšfo
->
d©a_´ecisiÚ
 = 8;

463 
cšfo
->
image_width
 = 
width
;

464 
cšfo
->
image_height
 = 
height
;

465 
	}
}

472 
	$METHODDEF
()

473 
	$fšish_šput_tga
 (
j_com´ess_±r
 
cšfo
, 
cj³g_sourû_±r
 
sšfo
)

476 
	}
}

483 
	$GLOBAL
(
cj³g_sourû_±r
)

484 
	$jš™_»ad_rga
 (
j_com´ess_±r
 
cšfo
)

486 
tga_sourû_±r
 
sourû
;

489 
sourû
 = (
tga_sourû_±r
)

490 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

491 
	`SIZEOF
(
tga_sourû_¡ruù
));

492 
sourû
->
cšfo
 = cinfo;

494 
sourû
->
pub
.
¡¬t_šput
 = 
¡¬t_šput_tga
;

495 
sourû
->
pub
.
fšish_šput
 = 
fšish_šput_tga
;

497  (
cj³g_sourû_±r
è
sourû
;

498 
	}
}

	@transupp.c

18 
	#JPEG_INTERNALS


	)

20 
	~"jšşude.h
"

21 
	~"j³glib.h
"

22 
	~"Œªsuµ.h
"

25 #ià
TRANSFORMS_SUPPORTED


65 
	$LOCAL
()

66 
	$do_æ_h
 (
j_decom´ess_±r
 
¤cšfo
, 
j_com´ess_±r
 
d¡šfo
,

67 
jvœt_b¬¿y_±r
 *
¤c_cÛf_¬¿ys
)

70 
JDIMENSION
 
MCU_cŞs
, 
comp_width
, 
blk_x
, 
blk_y
;

71 
ci
, 
k
, 
off£t_y
;

72 
JBLOCKARRAY
 
bufãr
;

73 
JCOEFPTR
 
±r1
, 
±r2
;

74 
JCOEF
 
‹mp1
, 
‹mp2
;

75 
j³g_compÚ’t_šfo
 *
comµŒ
;

82 
MCU_cŞs
 = 
d¡šfo
->
image_width
 / (d¡šfo->
max_h_§mp_çùÜ
 * 
DCTSIZE
);

84 
ci
 = 0; c˜< 
d¡šfo
->
num_compÚ’ts
; ci++) {

85 
comµŒ
 = 
d¡šfo
->
comp_šfo
 + 
ci
;

86 
comp_width
 = 
MCU_cŞs
 * 
comµŒ
->
h_§mp_çùÜ
;

87 
blk_y
 = 0; blk_y < 
comµŒ
->
height_š_blocks
;

88 
blk_y
 +ğ
comµŒ
->
v_§mp_çùÜ
) {

89 
bufãr
 = (*
¤cšfo
->
mem
->
acûss_vœt_b¬¿y
)

90 ((
j_commÚ_±r
è
¤cšfo
, 
¤c_cÛf_¬¿ys
[
ci
], 
blk_y
,

91 (
JDIMENSION
è
comµŒ
->
v_§mp_çùÜ
, 
TRUE
);

92 
off£t_y
 = 0; off£t_y < 
comµŒ
->
v_§mp_çùÜ
; offset_y++) {

93 
blk_x
 = 0; blk_x * 2 < 
comp_width
; blk_x++) {

94 
±r1
 = 
bufãr
[
off£t_y
][
blk_x
];

95 
±r2
 = 
bufãr
[
off£t_y
][
comp_width
 - 
blk_x
 - 1];

97 
k
 = 0; k < 
DCTSIZE2
; k += 2) {

98 
‹mp1
 = *
±r1
;

99 
‹mp2
 = *
±r2
;

100 *
±r1
++ = 
‹mp2
;

101 *
±r2
++ = 
‹mp1
;

102 
‹mp1
 = *
±r1
;

103 
‹mp2
 = *
±r2
;

104 *
±r1
++ = -
‹mp2
;

105 *
±r2
++ = -
‹mp1
;

111 
	}
}

114 
	$LOCAL
()

115 
	$do_æ_v
 (
j_decom´ess_±r
 
¤cšfo
, 
j_com´ess_±r
 
d¡šfo
,

116 
jvœt_b¬¿y_±r
 *
¤c_cÛf_¬¿ys
,

117 
jvœt_b¬¿y_±r
 *
d¡_cÛf_¬¿ys
)

120 
JDIMENSION
 
MCU_rows
, 
comp_height
, 
d¡_blk_x
, 
d¡_blk_y
;

121 
ci
, 
i
, 
j
, 
off£t_y
;

122 
JBLOCKARRAY
 
¤c_bufãr
, 
d¡_bufãr
;

123 
JBLOCKROW
 
¤c_row_±r
, 
d¡_row_±r
;

124 
JCOEFPTR
 
¤c_±r
, 
d¡_±r
;

125 
j³g_compÚ’t_šfo
 *
comµŒ
;

134 
MCU_rows
 = 
d¡šfo
->
image_height
 / (d¡šfo->
max_v_§mp_çùÜ
 * 
DCTSIZE
);

136 
ci
 = 0; c˜< 
d¡šfo
->
num_compÚ’ts
; ci++) {

137 
comµŒ
 = 
d¡šfo
->
comp_šfo
 + 
ci
;

138 
comp_height
 = 
MCU_rows
 * 
comµŒ
->
v_§mp_çùÜ
;

139 
d¡_blk_y
 = 0; d¡_blk_y < 
comµŒ
->
height_š_blocks
;

140 
d¡_blk_y
 +ğ
comµŒ
->
v_§mp_çùÜ
) {

141 
d¡_bufãr
 = (*
¤cšfo
->
mem
->
acûss_vœt_b¬¿y
)

142 ((
j_commÚ_±r
è
¤cšfo
, 
d¡_cÛf_¬¿ys
[
ci
], 
d¡_blk_y
,

143 (
JDIMENSION
è
comµŒ
->
v_§mp_çùÜ
, 
TRUE
);

144 ià(
d¡_blk_y
 < 
comp_height
) {

146 
¤c_bufãr
 = (*
¤cšfo
->
mem
->
acûss_vœt_b¬¿y
)

147 ((
j_commÚ_±r
è
¤cšfo
, 
¤c_cÛf_¬¿ys
[
ci
],

148 
comp_height
 - 
d¡_blk_y
 - (
JDIMENSION
è
comµŒ
->
v_§mp_çùÜ
,

149 (
JDIMENSION
è
comµŒ
->
v_§mp_çùÜ
, 
FALSE
);

152 
¤c_bufãr
 = (*
¤cšfo
->
mem
->
acûss_vœt_b¬¿y
)

153 ((
j_commÚ_±r
è
¤cšfo
, 
¤c_cÛf_¬¿ys
[
ci
], 
d¡_blk_y
,

154 (
JDIMENSION
è
comµŒ
->
v_§mp_çùÜ
, 
FALSE
);

156 
off£t_y
 = 0; off£t_y < 
comµŒ
->
v_§mp_çùÜ
; offset_y++) {

157 ià(
d¡_blk_y
 < 
comp_height
) {

159 
d¡_row_±r
 = 
d¡_bufãr
[
off£t_y
];

160 
¤c_row_±r
 = 
¤c_bufãr
[
comµŒ
->
v_§mp_çùÜ
 - 
off£t_y
 - 1];

161 
d¡_blk_x
 = 0; d¡_blk_x < 
comµŒ
->
width_š_blocks
;

162 
d¡_blk_x
++) {

163 
d¡_±r
 = 
d¡_row_±r
[
d¡_blk_x
];

164 
¤c_±r
 = 
¤c_row_±r
[
d¡_blk_x
];

165 
i
 = 0; i < 
DCTSIZE
; i += 2) {

167 
j
 = 0; j < 
DCTSIZE
; j++)

168 *
d¡_±r
++ = *
¤c_±r
++;

170 
j
 = 0; j < 
DCTSIZE
; j++)

171 *
d¡_±r
++ = - *
¤c_±r
++;

176 
	`jcİy_block_row
(
¤c_bufãr
[
off£t_y
], 
d¡_bufãr
[offset_y],

177 
comµŒ
->
width_š_blocks
);

182 
	}
}

185 
	$LOCAL
()

186 
	$do_Œª¥o£
 (
j_decom´ess_±r
 
¤cšfo
, 
j_com´ess_±r
 
d¡šfo
,

187 
jvœt_b¬¿y_±r
 *
¤c_cÛf_¬¿ys
,

188 
jvœt_b¬¿y_±r
 *
d¡_cÛf_¬¿ys
)

191 
JDIMENSION
 
d¡_blk_x
, 
d¡_blk_y
;

192 
ci
, 
i
, 
j
, 
off£t_x
, 
off£t_y
;

193 
JBLOCKARRAY
 
¤c_bufãr
, 
d¡_bufãr
;

194 
JCOEFPTR
 
¤c_±r
, 
d¡_±r
;

195 
j³g_compÚ’t_šfo
 *
comµŒ
;

202 
ci
 = 0; c˜< 
d¡šfo
->
num_compÚ’ts
; ci++) {

203 
comµŒ
 = 
d¡šfo
->
comp_šfo
 + 
ci
;

204 
d¡_blk_y
 = 0; d¡_blk_y < 
comµŒ
->
height_š_blocks
;

205 
d¡_blk_y
 +ğ
comµŒ
->
v_§mp_çùÜ
) {

206 
d¡_bufãr
 = (*
¤cšfo
->
mem
->
acûss_vœt_b¬¿y
)

207 ((
j_commÚ_±r
è
¤cšfo
, 
d¡_cÛf_¬¿ys
[
ci
], 
d¡_blk_y
,

208 (
JDIMENSION
è
comµŒ
->
v_§mp_çùÜ
, 
TRUE
);

209 
off£t_y
 = 0; off£t_y < 
comµŒ
->
v_§mp_çùÜ
; offset_y++) {

210 
d¡_blk_x
 = 0; d¡_blk_x < 
comµŒ
->
width_š_blocks
;

211 
d¡_blk_x
 +ğ
comµŒ
->
h_§mp_çùÜ
) {

212 
¤c_bufãr
 = (*
¤cšfo
->
mem
->
acûss_vœt_b¬¿y
)

213 ((
j_commÚ_±r
è
¤cšfo
, 
¤c_cÛf_¬¿ys
[
ci
], 
d¡_blk_x
,

214 (
JDIMENSION
è
comµŒ
->
h_§mp_çùÜ
, 
FALSE
);

215 
off£t_x
 = 0; off£t_x < 
comµŒ
->
h_§mp_çùÜ
; offset_x++) {

216 
¤c_±r
 = 
¤c_bufãr
[
off£t_x
][
d¡_blk_y
 + 
off£t_y
];

217 
d¡_±r
 = 
d¡_bufãr
[
off£t_y
][
d¡_blk_x
 + 
off£t_x
];

218 
i
 = 0; i < 
DCTSIZE
; i++)

219 
j
 = 0; j < 
DCTSIZE
; j++)

220 
d¡_±r
[
j
*
DCTSIZE
+
i
] = 
¤c_±r
[i*DCTSIZE+j];

226 
	}
}

229 
	$LOCAL
()

230 
	$do_rÙ_90
 (
j_decom´ess_±r
 
¤cšfo
, 
j_com´ess_±r
 
d¡šfo
,

231 
jvœt_b¬¿y_±r
 *
¤c_cÛf_¬¿ys
,

232 
jvœt_b¬¿y_±r
 *
d¡_cÛf_¬¿ys
)

239 
JDIMENSION
 
MCU_cŞs
, 
comp_width
, 
d¡_blk_x
, 
d¡_blk_y
;

240 
ci
, 
i
, 
j
, 
off£t_x
, 
off£t_y
;

241 
JBLOCKARRAY
 
¤c_bufãr
, 
d¡_bufãr
;

242 
JCOEFPTR
 
¤c_±r
, 
d¡_±r
;

243 
j³g_compÚ’t_šfo
 *
comµŒ
;

249 
MCU_cŞs
 = 
d¡šfo
->
image_width
 / (d¡šfo->
max_h_§mp_çùÜ
 * 
DCTSIZE
);

251 
ci
 = 0; c˜< 
d¡šfo
->
num_compÚ’ts
; ci++) {

252 
comµŒ
 = 
d¡šfo
->
comp_šfo
 + 
ci
;

253 
comp_width
 = 
MCU_cŞs
 * 
comµŒ
->
h_§mp_çùÜ
;

254 
d¡_blk_y
 = 0; d¡_blk_y < 
comµŒ
->
height_š_blocks
;

255 
d¡_blk_y
 +ğ
comµŒ
->
v_§mp_çùÜ
) {

256 
d¡_bufãr
 = (*
¤cšfo
->
mem
->
acûss_vœt_b¬¿y
)

257 ((
j_commÚ_±r
è
¤cšfo
, 
d¡_cÛf_¬¿ys
[
ci
], 
d¡_blk_y
,

258 (
JDIMENSION
è
comµŒ
->
v_§mp_çùÜ
, 
TRUE
);

259 
off£t_y
 = 0; off£t_y < 
comµŒ
->
v_§mp_çùÜ
; offset_y++) {

260 
d¡_blk_x
 = 0; d¡_blk_x < 
comµŒ
->
width_š_blocks
;

261 
d¡_blk_x
 +ğ
comµŒ
->
h_§mp_çùÜ
) {

262 
¤c_bufãr
 = (*
¤cšfo
->
mem
->
acûss_vœt_b¬¿y
)

263 ((
j_commÚ_±r
è
¤cšfo
, 
¤c_cÛf_¬¿ys
[
ci
], 
d¡_blk_x
,

264 (
JDIMENSION
è
comµŒ
->
h_§mp_çùÜ
, 
FALSE
);

265 
off£t_x
 = 0; off£t_x < 
comµŒ
->
h_§mp_çùÜ
; offset_x++) {

266 
¤c_±r
 = 
¤c_bufãr
[
off£t_x
][
d¡_blk_y
 + 
off£t_y
];

267 ià(
d¡_blk_x
 < 
comp_width
) {

269 
d¡_±r
 = 
d¡_bufãr
[
off£t_y
]

270 [
comp_width
 - 
d¡_blk_x
 - 
off£t_x
 - 1];

271 
i
 = 0; i < 
DCTSIZE
; i++) {

272 
j
 = 0; j < 
DCTSIZE
; j++)

273 
d¡_±r
[
j
*
DCTSIZE
+
i
] = 
¤c_±r
[i*DCTSIZE+j];

274 
i
++;

275 
j
 = 0; j < 
DCTSIZE
; j++)

276 
d¡_±r
[
j
*
DCTSIZE
+
i
] = -
¤c_±r
[i*DCTSIZE+j];

280 
d¡_±r
 = 
d¡_bufãr
[
off£t_y
][
d¡_blk_x
 + 
off£t_x
];

281 
i
 = 0; i < 
DCTSIZE
; i++)

282 
j
 = 0; j < 
DCTSIZE
; j++)

283 
d¡_±r
[
j
*
DCTSIZE
+
i
] = 
¤c_±r
[i*DCTSIZE+j];

290 
	}
}

293 
	$LOCAL
()

294 
	$do_rÙ_270
 (
j_decom´ess_±r
 
¤cšfo
, 
j_com´ess_±r
 
d¡šfo
,

295 
jvœt_b¬¿y_±r
 *
¤c_cÛf_¬¿ys
,

296 
jvœt_b¬¿y_±r
 *
d¡_cÛf_¬¿ys
)

303 
JDIMENSION
 
MCU_rows
, 
comp_height
, 
d¡_blk_x
, 
d¡_blk_y
;

304 
ci
, 
i
, 
j
, 
off£t_x
, 
off£t_y
;

305 
JBLOCKARRAY
 
¤c_bufãr
, 
d¡_bufãr
;

306 
JCOEFPTR
 
¤c_±r
, 
d¡_±r
;

307 
j³g_compÚ’t_šfo
 *
comµŒ
;

313 
MCU_rows
 = 
d¡šfo
->
image_height
 / (d¡šfo->
max_v_§mp_çùÜ
 * 
DCTSIZE
);

315 
ci
 = 0; c˜< 
d¡šfo
->
num_compÚ’ts
; ci++) {

316 
comµŒ
 = 
d¡šfo
->
comp_šfo
 + 
ci
;

317 
comp_height
 = 
MCU_rows
 * 
comµŒ
->
v_§mp_çùÜ
;

318 
d¡_blk_y
 = 0; d¡_blk_y < 
comµŒ
->
height_š_blocks
;

319 
d¡_blk_y
 +ğ
comµŒ
->
v_§mp_çùÜ
) {

320 
d¡_bufãr
 = (*
¤cšfo
->
mem
->
acûss_vœt_b¬¿y
)

321 ((
j_commÚ_±r
è
¤cšfo
, 
d¡_cÛf_¬¿ys
[
ci
], 
d¡_blk_y
,

322 (
JDIMENSION
è
comµŒ
->
v_§mp_çùÜ
, 
TRUE
);

323 
off£t_y
 = 0; off£t_y < 
comµŒ
->
v_§mp_çùÜ
; offset_y++) {

324 
d¡_blk_x
 = 0; d¡_blk_x < 
comµŒ
->
width_š_blocks
;

325 
d¡_blk_x
 +ğ
comµŒ
->
h_§mp_çùÜ
) {

326 
¤c_bufãr
 = (*
¤cšfo
->
mem
->
acûss_vœt_b¬¿y
)

327 ((
j_commÚ_±r
è
¤cšfo
, 
¤c_cÛf_¬¿ys
[
ci
], 
d¡_blk_x
,

328 (
JDIMENSION
è
comµŒ
->
h_§mp_çùÜ
, 
FALSE
);

329 
off£t_x
 = 0; off£t_x < 
comµŒ
->
h_§mp_çùÜ
; offset_x++) {

330 
d¡_±r
 = 
d¡_bufãr
[
off£t_y
][
d¡_blk_x
 + 
off£t_x
];

331 ià(
d¡_blk_y
 < 
comp_height
) {

333 
¤c_±r
 = 
¤c_bufãr
[
off£t_x
]

334 [
comp_height
 - 
d¡_blk_y
 - 
off£t_y
 - 1];

335 
i
 = 0; i < 
DCTSIZE
; i++) {

336 
j
 = 0; j < 
DCTSIZE
; j++) {

337 
d¡_±r
[
j
*
DCTSIZE
+
i
] = 
¤c_±r
[i*DCTSIZE+j];

338 
j
++;

339 
d¡_±r
[
j
*
DCTSIZE
+
i
] = -
¤c_±r
[i*DCTSIZE+j];

344 
¤c_±r
 = 
¤c_bufãr
[
off£t_x
][
d¡_blk_y
 + 
off£t_y
];

345 
i
 = 0; i < 
DCTSIZE
; i++)

346 
j
 = 0; j < 
DCTSIZE
; j++)

347 
d¡_±r
[
j
*
DCTSIZE
+
i
] = 
¤c_±r
[i*DCTSIZE+j];

354 
	}
}

357 
	$LOCAL
()

358 
	$do_rÙ_180
 (
j_decom´ess_±r
 
¤cšfo
, 
j_com´ess_±r
 
d¡šfo
,

359 
jvœt_b¬¿y_±r
 *
¤c_cÛf_¬¿ys
,

360 
jvœt_b¬¿y_±r
 *
d¡_cÛf_¬¿ys
)

367 
JDIMENSION
 
MCU_cŞs
, 
MCU_rows
, 
comp_width
, 
comp_height
, 
d¡_blk_x
, 
d¡_blk_y
;

368 
ci
, 
i
, 
j
, 
off£t_y
;

369 
JBLOCKARRAY
 
¤c_bufãr
, 
d¡_bufãr
;

370 
JBLOCKROW
 
¤c_row_±r
, 
d¡_row_±r
;

371 
JCOEFPTR
 
¤c_±r
, 
d¡_±r
;

372 
j³g_compÚ’t_šfo
 *
comµŒ
;

374 
MCU_cŞs
 = 
d¡šfo
->
image_width
 / (d¡šfo->
max_h_§mp_çùÜ
 * 
DCTSIZE
);

375 
MCU_rows
 = 
d¡šfo
->
image_height
 / (d¡šfo->
max_v_§mp_çùÜ
 * 
DCTSIZE
);

377 
ci
 = 0; c˜< 
d¡šfo
->
num_compÚ’ts
; ci++) {

378 
comµŒ
 = 
d¡šfo
->
comp_šfo
 + 
ci
;

379 
comp_width
 = 
MCU_cŞs
 * 
comµŒ
->
h_§mp_çùÜ
;

380 
comp_height
 = 
MCU_rows
 * 
comµŒ
->
v_§mp_çùÜ
;

381 
d¡_blk_y
 = 0; d¡_blk_y < 
comµŒ
->
height_š_blocks
;

382 
d¡_blk_y
 +ğ
comµŒ
->
v_§mp_çùÜ
) {

383 
d¡_bufãr
 = (*
¤cšfo
->
mem
->
acûss_vœt_b¬¿y
)

384 ((
j_commÚ_±r
è
¤cšfo
, 
d¡_cÛf_¬¿ys
[
ci
], 
d¡_blk_y
,

385 (
JDIMENSION
è
comµŒ
->
v_§mp_çùÜ
, 
TRUE
);

386 ià(
d¡_blk_y
 < 
comp_height
) {

388 
¤c_bufãr
 = (*
¤cšfo
->
mem
->
acûss_vœt_b¬¿y
)

389 ((
j_commÚ_±r
è
¤cšfo
, 
¤c_cÛf_¬¿ys
[
ci
],

390 
comp_height
 - 
d¡_blk_y
 - (
JDIMENSION
è
comµŒ
->
v_§mp_çùÜ
,

391 (
JDIMENSION
è
comµŒ
->
v_§mp_çùÜ
, 
FALSE
);

394 
¤c_bufãr
 = (*
¤cšfo
->
mem
->
acûss_vœt_b¬¿y
)

395 ((
j_commÚ_±r
è
¤cšfo
, 
¤c_cÛf_¬¿ys
[
ci
], 
d¡_blk_y
,

396 (
JDIMENSION
è
comµŒ
->
v_§mp_çùÜ
, 
FALSE
);

398 
off£t_y
 = 0; off£t_y < 
comµŒ
->
v_§mp_çùÜ
; offset_y++) {

399 ià(
d¡_blk_y
 < 
comp_height
) {

401 
d¡_row_±r
 = 
d¡_bufãr
[
off£t_y
];

402 
¤c_row_±r
 = 
¤c_bufãr
[
comµŒ
->
v_§mp_çùÜ
 - 
off£t_y
 - 1];

404 
d¡_blk_x
 = 0; d¡_blk_x < 
comp_width
; dst_blk_x++) {

405 
d¡_±r
 = 
d¡_row_±r
[
d¡_blk_x
];

406 
¤c_±r
 = 
¤c_row_±r
[
comp_width
 - 
d¡_blk_x
 - 1];

407 
i
 = 0; i < 
DCTSIZE
; i += 2) {

409 
j
 = 0; j < 
DCTSIZE
; j += 2) {

410 *
d¡_±r
++ = *
¤c_±r
++;

411 *
d¡_±r
++ = - *
¤c_±r
++;

414 
j
 = 0; j < 
DCTSIZE
; j += 2) {

415 *
d¡_±r
++ = - *
¤c_±r
++;

416 *
d¡_±r
++ = *
¤c_±r
++;

421 ; 
d¡_blk_x
 < 
comµŒ
->
width_š_blocks
; dst_blk_x++) {

422 
d¡_±r
 = 
d¡_row_±r
[
d¡_blk_x
];

423 
¤c_±r
 = 
¤c_row_±r
[
d¡_blk_x
];

424 
i
 = 0; i < 
DCTSIZE
; i += 2) {

425 
j
 = 0; j < 
DCTSIZE
; j++)

426 *
d¡_±r
++ = *
¤c_±r
++;

427 
j
 = 0; j < 
DCTSIZE
; j++)

428 *
d¡_±r
++ = - *
¤c_±r
++;

433 
d¡_row_±r
 = 
d¡_bufãr
[
off£t_y
];

434 
¤c_row_±r
 = 
¤c_bufãr
[
off£t_y
];

436 
d¡_blk_x
 = 0; d¡_blk_x < 
comp_width
; dst_blk_x++) {

437 
d¡_±r
 = 
d¡_row_±r
[
d¡_blk_x
];

438 
¤c_±r
 = 
¤c_row_±r
[
comp_width
 - 
d¡_blk_x
 - 1];

439 
i
 = 0; i < 
DCTSIZE2
; i += 2) {

440 *
d¡_±r
++ = *
¤c_±r
++;

441 *
d¡_±r
++ = - *
¤c_±r
++;

445 ; 
d¡_blk_x
 < 
comµŒ
->
width_š_blocks
; dst_blk_x++) {

446 
d¡_±r
 = 
d¡_row_±r
[
d¡_blk_x
];

447 
¤c_±r
 = 
¤c_row_±r
[
d¡_blk_x
];

448 
i
 = 0; i < 
DCTSIZE2
; i++)

449 *
d¡_±r
++ = *
¤c_±r
++;

455 
	}
}

458 
	$LOCAL
()

459 
	$do_Œªsv”£
 (
j_decom´ess_±r
 
¤cšfo
, 
j_com´ess_±r
 
d¡šfo
,

460 
jvœt_b¬¿y_±r
 *
¤c_cÛf_¬¿ys
,

461 
jvœt_b¬¿y_±r
 *
d¡_cÛf_¬¿ys
)

472 
JDIMENSION
 
MCU_cŞs
, 
MCU_rows
, 
comp_width
, 
comp_height
, 
d¡_blk_x
, 
d¡_blk_y
;

473 
ci
, 
i
, 
j
, 
off£t_x
, 
off£t_y
;

474 
JBLOCKARRAY
 
¤c_bufãr
, 
d¡_bufãr
;

475 
JCOEFPTR
 
¤c_±r
, 
d¡_±r
;

476 
j³g_compÚ’t_šfo
 *
comµŒ
;

478 
MCU_cŞs
 = 
d¡šfo
->
image_width
 / (d¡šfo->
max_h_§mp_çùÜ
 * 
DCTSIZE
);

479 
MCU_rows
 = 
d¡šfo
->
image_height
 / (d¡šfo->
max_v_§mp_çùÜ
 * 
DCTSIZE
);

481 
ci
 = 0; c˜< 
d¡šfo
->
num_compÚ’ts
; ci++) {

482 
comµŒ
 = 
d¡šfo
->
comp_šfo
 + 
ci
;

483 
comp_width
 = 
MCU_cŞs
 * 
comµŒ
->
h_§mp_çùÜ
;

484 
comp_height
 = 
MCU_rows
 * 
comµŒ
->
v_§mp_çùÜ
;

485 
d¡_blk_y
 = 0; d¡_blk_y < 
comµŒ
->
height_š_blocks
;

486 
d¡_blk_y
 +ğ
comµŒ
->
v_§mp_çùÜ
) {

487 
d¡_bufãr
 = (*
¤cšfo
->
mem
->
acûss_vœt_b¬¿y
)

488 ((
j_commÚ_±r
è
¤cšfo
, 
d¡_cÛf_¬¿ys
[
ci
], 
d¡_blk_y
,

489 (
JDIMENSION
è
comµŒ
->
v_§mp_çùÜ
, 
TRUE
);

490 
off£t_y
 = 0; off£t_y < 
comµŒ
->
v_§mp_çùÜ
; offset_y++) {

491 
d¡_blk_x
 = 0; d¡_blk_x < 
comµŒ
->
width_š_blocks
;

492 
d¡_blk_x
 +ğ
comµŒ
->
h_§mp_çùÜ
) {

493 
¤c_bufãr
 = (*
¤cšfo
->
mem
->
acûss_vœt_b¬¿y
)

494 ((
j_commÚ_±r
è
¤cšfo
, 
¤c_cÛf_¬¿ys
[
ci
], 
d¡_blk_x
,

495 (
JDIMENSION
è
comµŒ
->
h_§mp_çùÜ
, 
FALSE
);

496 
off£t_x
 = 0; off£t_x < 
comµŒ
->
h_§mp_çùÜ
; offset_x++) {

497 ià(
d¡_blk_y
 < 
comp_height
) {

498 
¤c_±r
 = 
¤c_bufãr
[
off£t_x
]

499 [
comp_height
 - 
d¡_blk_y
 - 
off£t_y
 - 1];

500 ià(
d¡_blk_x
 < 
comp_width
) {

502 
d¡_±r
 = 
d¡_bufãr
[
off£t_y
]

503 [
comp_width
 - 
d¡_blk_x
 - 
off£t_x
 - 1];

504 
i
 = 0; i < 
DCTSIZE
; i++) {

505 
j
 = 0; j < 
DCTSIZE
; j++) {

506 
d¡_±r
[
j
*
DCTSIZE
+
i
] = 
¤c_±r
[i*DCTSIZE+j];

507 
j
++;

508 
d¡_±r
[
j
*
DCTSIZE
+
i
] = -
¤c_±r
[i*DCTSIZE+j];

510 
i
++;

511 
j
 = 0; j < 
DCTSIZE
; j++) {

512 
d¡_±r
[
j
*
DCTSIZE
+
i
] = -
¤c_±r
[i*DCTSIZE+j];

513 
j
++;

514 
d¡_±r
[
j
*
DCTSIZE
+
i
] = 
¤c_±r
[i*DCTSIZE+j];

519 
d¡_±r
 = 
d¡_bufãr
[
off£t_y
][
d¡_blk_x
 + 
off£t_x
];

520 
i
 = 0; i < 
DCTSIZE
; i++) {

521 
j
 = 0; j < 
DCTSIZE
; j++) {

522 
d¡_±r
[
j
*
DCTSIZE
+
i
] = 
¤c_±r
[i*DCTSIZE+j];

523 
j
++;

524 
d¡_±r
[
j
*
DCTSIZE
+
i
] = -
¤c_±r
[i*DCTSIZE+j];

529 
¤c_±r
 = 
¤c_bufãr
[
off£t_x
][
d¡_blk_y
 + 
off£t_y
];

530 ià(
d¡_blk_x
 < 
comp_width
) {

532 
d¡_±r
 = 
d¡_bufãr
[
off£t_y
]

533 [
comp_width
 - 
d¡_blk_x
 - 
off£t_x
 - 1];

534 
i
 = 0; i < 
DCTSIZE
; i++) {

535 
j
 = 0; j < 
DCTSIZE
; j++)

536 
d¡_±r
[
j
*
DCTSIZE
+
i
] = 
¤c_±r
[i*DCTSIZE+j];

537 
i
++;

538 
j
 = 0; j < 
DCTSIZE
; j++)

539 
d¡_±r
[
j
*
DCTSIZE
+
i
] = -
¤c_±r
[i*DCTSIZE+j];

543 
d¡_±r
 = 
d¡_bufãr
[
off£t_y
][
d¡_blk_x
 + 
off£t_x
];

544 
i
 = 0; i < 
DCTSIZE
; i++)

545 
j
 = 0; j < 
DCTSIZE
; j++)

546 
d¡_±r
[
j
*
DCTSIZE
+
i
] = 
¤c_±r
[i*DCTSIZE+j];

554 
	}
}

567 
	$GLOBAL
()

568 
	$jŒªsfÜm_»que¡_wÜk¥aû
 (
j_decom´ess_±r
 
¤cšfo
,

569 
j³g_ŒªsfÜm_šfo
 *
šfo
)

571 
jvœt_b¬¿y_±r
 *
cÛf_¬¿ys
 = 
NULL
;

572 
j³g_compÚ’t_šfo
 *
comµŒ
;

573 
ci
;

575 ià(
šfo
->
fÜû_g¿ysÿË
 &&

576 
¤cšfo
->
j³g_cŞÜ_¥aû
 =ğ
JCS_YCbCr
 &&

577 
¤cšfo
->
num_compÚ’ts
 == 3) {

579 
šfo
->
num_compÚ’ts
 = 1;

582 
šfo
->
num_compÚ’ts
 = 
¤cšfo
->num_components;

585 ià(
šfo
->
ŒªsfÜm
 =ğ
JXFORM_NONE
 ||

586 
šfo
->
ŒªsfÜm
 =ğ
JXFORM_FLIP_H
 ||

587 
šfo
->
ŒªsfÜm
 =ğ
JXFORM_FLIP_V
) {

589 
šfo
->
wÜk¥aû_cÛf_¬¿ys
 = 
cÛf_¬¿ys
;

592 ià(
šfo
->
ŒªsfÜm
 =ğ
JXFORM_TRANSVERSE
 ||

593 
šfo
->
ŒªsfÜm
 =ğ
JXFORM_ROT_180
) {

598 
cÛf_¬¿ys
 = (
jvœt_b¬¿y_±r
 *)

599 (*
¤cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
è¤cšfo, 
JPOOL_IMAGE
,

600 
	`SIZEOF
(
jvœt_b¬¿y_±r
è* 
šfo
->
num_compÚ’ts
);

601 
ci
 = 0; c˜< 
šfo
->
num_compÚ’ts
; ci++) {

602 
comµŒ
 = 
¤cšfo
->
comp_šfo
 + 
ci
;

603 
cÛf_¬¿ys
[
ci
] = (*
¤cšfo
->
mem
->
»que¡_vœt_b¬¿y
)

604 ((
j_commÚ_±r
è
¤cšfo
, 
JPOOL_IMAGE
, 
FALSE
,

605 (
JDIMENSION
è
	`jround_up
((è
comµŒ
->
width_š_blocks
,

606 (è
comµŒ
->
h_§mp_çùÜ
),

607 (
JDIMENSION
è
	`jround_up
((è
comµŒ
->
height_š_blocks
,

608 (è
comµŒ
->
v_§mp_çùÜ
),

609 (
JDIMENSION
è
comµŒ
->
v_§mp_çùÜ
);

611 
šfo
->
wÜk¥aû_cÛf_¬¿ys
 = 
cÛf_¬¿ys
;

614 ià(
šfo
->
ŒªsfÜm
 =ğ
JXFORM_TRANSPOSE
 ||

615 
šfo
->
ŒªsfÜm
 =ğ
JXFORM_ROT_90
 ||

616 
šfo
->
ŒªsfÜm
 =ğ
JXFORM_ROT_270
) {

621 
cÛf_¬¿ys
 = (
jvœt_b¬¿y_±r
 *)

622 (*
¤cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
è¤cšfo, 
JPOOL_IMAGE
,

623 
	`SIZEOF
(
jvœt_b¬¿y_±r
è* 
šfo
->
num_compÚ’ts
);

624 
ci
 = 0; c˜< 
šfo
->
num_compÚ’ts
; ci++) {

625 
comµŒ
 = 
¤cšfo
->
comp_šfo
 + 
ci
;

626 
cÛf_¬¿ys
[
ci
] = (*
¤cšfo
->
mem
->
»que¡_vœt_b¬¿y
)

627 ((
j_commÚ_±r
è
¤cšfo
, 
JPOOL_IMAGE
, 
FALSE
,

628 (
JDIMENSION
è
	`jround_up
((è
comµŒ
->
height_š_blocks
,

629 (è
comµŒ
->
v_§mp_çùÜ
),

630 (
JDIMENSION
è
	`jround_up
((è
comµŒ
->
width_š_blocks
,

631 (è
comµŒ
->
h_§mp_çùÜ
),

632 (
JDIMENSION
è
comµŒ
->
h_§mp_çùÜ
);

634 
šfo
->
wÜk¥aû_cÛf_¬¿ys
 = 
cÛf_¬¿ys
;

637 
	}
}

642 
	$LOCAL
()

643 
	$Œª¥o£_ü™iÿl_·¿m‘”s
 (
j_com´ess_±r
 
d¡šfo
)

645 
tbÊo
, 
i
, 
j
, 
ci
, 
™emp
;

646 
j³g_compÚ’t_šfo
 *
comµŒ
;

647 
JQUANT_TBL
 *
qtbÍŒ
;

648 
JDIMENSION
 
d‹mp
;

649 
UINT16
 
q‹mp
;

652 
d‹mp
 = 
d¡šfo
->
image_width
;

653 
d¡šfo
->
image_width
 = d¡šfo->
image_height
;

654 
d¡šfo
->
image_height
 = 
d‹mp
;

657 
ci
 = 0; c˜< 
d¡šfo
->
num_compÚ’ts
; ci++) {

658 
comµŒ
 = 
d¡šfo
->
comp_šfo
 + 
ci
;

659 
™emp
 = 
comµŒ
->
h_§mp_çùÜ
;

660 
comµŒ
->
h_§mp_çùÜ
 = comµŒ->
v_§mp_çùÜ
;

661 
comµŒ
->
v_§mp_çùÜ
 = 
™emp
;

665 
tbÊo
 = 0;bÊØ< 
NUM_QUANT_TBLS
;blno++) {

666 
qtbÍŒ
 = 
d¡šfo
->
quªt_tbl_±rs
[
tbÊo
];

667 ià(
qtbÍŒ
 !ğ
NULL
) {

668 
i
 = 0; i < 
DCTSIZE
; i++) {

669 
j
 = 0; j < 
i
; j++) {

670 
q‹mp
 = 
qtbÍŒ
->
quªtv®
[
i
*
DCTSIZE
+
j
];

671 
qtbÍŒ
->
quªtv®
[
i
*
DCTSIZE
+
j
] = qtblptr->quantval[j*DCTSIZE+i];

672 
qtbÍŒ
->
quªtv®
[
j
*
DCTSIZE
+
i
] = 
q‹mp
;

677 
	}
}

682 
	$LOCAL
()

683 
	$Œim_right_edge
 (
j_com´ess_±r
 
d¡šfo
)

685 
ci
, 
max_h_§mp_çùÜ
;

686 
JDIMENSION
 
MCU_cŞs
;

692 
max_h_§mp_çùÜ
 = 1;

693 
ci
 = 0; c˜< 
d¡šfo
->
num_compÚ’ts
; ci++) {

694 
h_§mp_çùÜ
 = 
d¡šfo
->
comp_šfo
[
ci
].h_samp_factor;

695 
max_h_§mp_çùÜ
 = 
	`MAX
(max_h_§mp_çùÜ, 
h_§mp_çùÜ
);

697 
MCU_cŞs
 = 
d¡šfo
->
image_width
 / (
max_h_§mp_çùÜ
 * 
DCTSIZE
);

698 ià(
MCU_cŞs
 > 0)

699 
d¡šfo
->
image_width
 = 
MCU_cŞs
 * (
max_h_§mp_çùÜ
 * 
DCTSIZE
);

700 
	}
}

702 
	$LOCAL
()

703 
	$Œim_bÙtom_edge
 (
j_com´ess_±r
 
d¡šfo
)

705 
ci
, 
max_v_§mp_çùÜ
;

706 
JDIMENSION
 
MCU_rows
;

712 
max_v_§mp_çùÜ
 = 1;

713 
ci
 = 0; c˜< 
d¡šfo
->
num_compÚ’ts
; ci++) {

714 
v_§mp_çùÜ
 = 
d¡šfo
->
comp_šfo
[
ci
].v_samp_factor;

715 
max_v_§mp_çùÜ
 = 
	`MAX
(max_v_§mp_çùÜ, 
v_§mp_çùÜ
);

717 
MCU_rows
 = 
d¡šfo
->
image_height
 / (
max_v_§mp_çùÜ
 * 
DCTSIZE
);

718 ià(
MCU_rows
 > 0)

719 
d¡šfo
->
image_height
 = 
MCU_rows
 * (
max_v_§mp_çùÜ
 * 
DCTSIZE
);

720 
	}
}

734 
	$GLOBAL
(
jvœt_b¬¿y_±r
 *)

735 
	$jŒªsfÜm_adju¡_·¿m‘”s
 (
j_decom´ess_±r
 
¤cšfo
,

736 
j_com´ess_±r
 
d¡šfo
,

737 
jvœt_b¬¿y_±r
 *
¤c_cÛf_¬¿ys
,

738 
j³g_ŒªsfÜm_šfo
 *
šfo
)

741 ià(
šfo
->
fÜû_g¿ysÿË
) {

749 ià((
d¡šfo
->
j³g_cŞÜ_¥aû
 =ğ
JCS_YCbCr
 &&

750 
d¡šfo
->
num_compÚ’ts
 == 3) ||

751 (
d¡šfo
->
j³g_cŞÜ_¥aû
 =ğ
JCS_GRAYSCALE
 &&

752 
d¡šfo
->
num_compÚ’ts
 == 1)) {

754 
sv_quªt_tbl_no
 = 
d¡šfo
->
comp_šfo
[0].
quªt_tbl_no
;

755 
	`j³g_£t_cŞÜ¥aû
(
d¡šfo
, 
JCS_GRAYSCALE
);

756 
d¡šfo
->
comp_šfo
[0].
quªt_tbl_no
 = 
sv_quªt_tbl_no
;

759 
	`ERREXIT
(
d¡šfo
, 
JERR_CONVERSION_NOTIMPL
);

764 
šfo
->
ŒªsfÜm
) {

765 
JXFORM_NONE
:

768 
JXFORM_FLIP_H
:

769 ià(
šfo
->
Œim
)

770 
	`Œim_right_edge
(
d¡šfo
);

772 
JXFORM_FLIP_V
:

773 ià(
šfo
->
Œim
)

774 
	`Œim_bÙtom_edge
(
d¡šfo
);

776 
JXFORM_TRANSPOSE
:

777 
	`Œª¥o£_ü™iÿl_·¿m‘”s
(
d¡šfo
);

780 
JXFORM_TRANSVERSE
:

781 
	`Œª¥o£_ü™iÿl_·¿m‘”s
(
d¡šfo
);

782 ià(
šfo
->
Œim
) {

783 
	`Œim_right_edge
(
d¡šfo
);

784 
	`Œim_bÙtom_edge
(
d¡šfo
);

787 
JXFORM_ROT_90
:

788 
	`Œª¥o£_ü™iÿl_·¿m‘”s
(
d¡šfo
);

789 ià(
šfo
->
Œim
)

790 
	`Œim_right_edge
(
d¡šfo
);

792 
JXFORM_ROT_180
:

793 ià(
šfo
->
Œim
) {

794 
	`Œim_right_edge
(
d¡šfo
);

795 
	`Œim_bÙtom_edge
(
d¡šfo
);

798 
JXFORM_ROT_270
:

799 
	`Œª¥o£_ü™iÿl_·¿m‘”s
(
d¡šfo
);

800 ià(
šfo
->
Œim
)

801 
	`Œim_bÙtom_edge
(
d¡šfo
);

806 ià(
šfo
->
wÜk¥aû_cÛf_¬¿ys
 !ğ
NULL
)

807  
šfo
->
wÜk¥aû_cÛf_¬¿ys
;

808  
¤c_cÛf_¬¿ys
;

809 
	}
}

821 
	$GLOBAL
()

822 
	$jŒªsfÜm_execu‹_ŒªsfÜm©iÚ
 (
j_decom´ess_±r
 
¤cšfo
,

823 
j_com´ess_±r
 
d¡šfo
,

824 
jvœt_b¬¿y_±r
 *
¤c_cÛf_¬¿ys
,

825 
j³g_ŒªsfÜm_šfo
 *
šfo
)

827 
jvœt_b¬¿y_±r
 *
d¡_cÛf_¬¿ys
 = 
šfo
->
wÜk¥aû_cÛf_¬¿ys
;

829 
šfo
->
ŒªsfÜm
) {

830 
JXFORM_NONE
:

832 
JXFORM_FLIP_H
:

833 
	`do_æ_h
(
¤cšfo
, 
d¡šfo
, 
¤c_cÛf_¬¿ys
);

835 
JXFORM_FLIP_V
:

836 
	`do_æ_v
(
¤cšfo
, 
d¡šfo
, 
¤c_cÛf_¬¿ys
, 
d¡_cÛf_¬¿ys
);

838 
JXFORM_TRANSPOSE
:

839 
	`do_Œª¥o£
(
¤cšfo
, 
d¡šfo
, 
¤c_cÛf_¬¿ys
, 
d¡_cÛf_¬¿ys
);

841 
JXFORM_TRANSVERSE
:

842 
	`do_Œªsv”£
(
¤cšfo
, 
d¡šfo
, 
¤c_cÛf_¬¿ys
, 
d¡_cÛf_¬¿ys
);

844 
JXFORM_ROT_90
:

845 
	`do_rÙ_90
(
¤cšfo
, 
d¡šfo
, 
¤c_cÛf_¬¿ys
, 
d¡_cÛf_¬¿ys
);

847 
JXFORM_ROT_180
:

848 
	`do_rÙ_180
(
¤cšfo
, 
d¡šfo
, 
¤c_cÛf_¬¿ys
, 
d¡_cÛf_¬¿ys
);

850 
JXFORM_ROT_270
:

851 
	`do_rÙ_270
(
¤cšfo
, 
d¡šfo
, 
¤c_cÛf_¬¿ys
, 
d¡_cÛf_¬¿ys
);

854 
	}
}

863 
	$GLOBAL
()

864 
	$jcİy_m¬k”s_£tup
 (
j_decom´ess_±r
 
¤cšfo
, 
JCOPY_OPTION
 
İtiÚ
)

866 #ifdeà
SAVE_MARKERS_SUPPORTED


867 
m
;

870 ià(
İtiÚ
 !ğ
JCOPYOPT_NONE
) {

871 
	`j³g_§ve_m¬k”s
(
¤cšfo
, 
JPEG_COM
, 0xFFFF);

874 ià(
İtiÚ
 =ğ
JCOPYOPT_ALL
) {

875 
m
 = 0; m < 16; m++)

876 
	`j³g_§ve_m¬k”s
(
¤cšfo
, 
JPEG_APP0
 + 
m
, 0xFFFF);

879 
	}
}

888 
	$GLOBAL
()

889 
	$jcİy_m¬k”s_execu‹
 (
j_decom´ess_±r
 
¤cšfo
, 
j_com´ess_±r
 
d¡šfo
,

890 
JCOPY_OPTION
 
İtiÚ
)

892 
j³g_§ved_m¬k”_±r
 
m¬k”
;

899 
m¬k”
 = 
¤cšfo
->
m¬k”_li¡
; m¬k” !ğ
NULL
; m¬k” = m¬k”->
Ãxt
) {

900 ià(
d¡šfo
->
wr™e_JFIF_h—d”
 &&

901 
m¬k”
->m¬k” =ğ
JPEG_APP0
 &&

902 
m¬k”
->
d©a_Ëngth
 >= 5 &&

903 
	`GETJOCTET
(
m¬k”
->
d©a
[0]) == 0x4A &&

904 
	`GETJOCTET
(
m¬k”
->
d©a
[1]) == 0x46 &&

905 
	`GETJOCTET
(
m¬k”
->
d©a
[2]) == 0x49 &&

906 
	`GETJOCTET
(
m¬k”
->
d©a
[3]) == 0x46 &&

907 
	`GETJOCTET
(
m¬k”
->
d©a
[4]) == 0)

909 ià(
d¡šfo
->
wr™e_Adobe_m¬k”
 &&

910 
m¬k”
->m¬k” =ğ
JPEG_APP0
+14 &&

911 
m¬k”
->
d©a_Ëngth
 >= 5 &&

912 
	`GETJOCTET
(
m¬k”
->
d©a
[0]) == 0x41 &&

913 
	`GETJOCTET
(
m¬k”
->
d©a
[1]) == 0x64 &&

914 
	`GETJOCTET
(
m¬k”
->
d©a
[2]) == 0x6F &&

915 
	`GETJOCTET
(
m¬k”
->
d©a
[3]) == 0x62 &&

916 
	`GETJOCTET
(
m¬k”
->
d©a
[4]) == 0x65)

918 #ifdeà
NEED_FAR_POINTERS


921 
i
;

922 
	`j³g_wr™e_m_h—d”
(
d¡šfo
, 
m¬k”
->m¬k”, m¬k”->
d©a_Ëngth
);

923 
i
 = 0; i < 
m¬k”
->
d©a_Ëngth
; i++)

924 
	`j³g_wr™e_m_by‹
(
d¡šfo
, 
m¬k”
->
d©a
[
i
]);

927 
	`j³g_wr™e_m¬k”
(
d¡šfo
, 
m¬k”
->marker,

928 
m¬k”
->
d©a
, m¬k”->
d©a_Ëngth
);

931 
	}
}

	@transupp.h

21 #iâdeà
TRANSFORMS_SUPPORTED


22 
	#TRANSFORMS_SUPPORTED
 1

	)

27 #ifdeà
NEED_SHORT_EXTERNAL_NAMES


28 
	#jŒªsfÜm_»que¡_wÜk¥aû
 
jTrReque¡


	)

29 
	#jŒªsfÜm_adju¡_·¿m‘”s
 
jTrAdju¡


	)

30 
	#jŒªsfÜm_execu‹_ŒªsfÜm©iÚ
 
jTrExec


	)

31 
	#jcİy_m¬k”s_£tup
 
jCMrkS‘up


	)

32 
	#jcİy_m¬k”s_execu‹
 
jCMrkExec


	)

41 
	mJXFORM_NONE
,

42 
	mJXFORM_FLIP_H
,

43 
	mJXFORM_FLIP_V
,

44 
	mJXFORM_TRANSPOSE
,

45 
	mJXFORM_TRANSVERSE
,

46 
	mJXFORM_ROT_90
,

47 
	mJXFORM_ROT_180
,

48 
	mJXFORM_ROT_270


49 } 
	tJXFORM_CODE
;

88 
JXFORM_CODE
 
	mŒªsfÜm
;

89 
boŞ—n
 
	mŒim
;

90 
boŞ—n
 
	mfÜû_g¿ysÿË
;

93 
	mnum_compÚ’ts
;

94 
jvœt_b¬¿y_±r
 * 
	mwÜk¥aû_cÛf_¬¿ys
;

95 } 
	tj³g_ŒªsfÜm_šfo
;

98 #ià
TRANSFORMS_SUPPORTED


101 
	$EXTERN
(è
jŒªsfÜm_»que¡_wÜk¥aû


102 
	`JPP
((
j_decom´ess_±r
 
¤cšfo
, 
j³g_ŒªsfÜm_šfo
 *
šfo
));

104 
	$EXTERN
(
jvœt_b¬¿y_±r
 *è
jŒªsfÜm_adju¡_·¿m‘”s


105 
	`JPP
((
j_decom´ess_±r
 
¤cšfo
, 
j_com´ess_±r
 
d¡šfo
,

106 
jvœt_b¬¿y_±r
 *
¤c_cÛf_¬¿ys
,

107 
j³g_ŒªsfÜm_šfo
 *
šfo
));

109 
	$EXTERN
(è
jŒªsfÜm_execu‹_ŒªsfÜm©iÚ


110 
	`JPP
((
j_decom´ess_±r
 
¤cšfo
, 
j_com´ess_±r
 
d¡šfo
,

111 
jvœt_b¬¿y_±r
 *
¤c_cÛf_¬¿ys
,

112 
j³g_ŒªsfÜm_šfo
 *
šfo
));

122 
JCOPYOPT_NONE
,

123 
JCOPYOPT_COMMENTS
,

124 
JCOPYOPT_ALL


125 } 
	tJCOPY_OPTION
;

127 
	#JCOPYOPT_DEFAULT
 
JCOPYOPT_COMMENTS


	)

130 
	$EXTERN
(è
jcİy_m¬k”s_£tup


131 
	`JPP
((
j_decom´ess_±r
 
¤cšfo
, 
JCOPY_OPTION
 
İtiÚ
));

133 
	$EXTERN
(è
jcİy_m¬k”s_execu‹


134 
	`JPP
((
j_decom´ess_±r
 
¤cšfo
, 
j_com´ess_±r
 
d¡šfo
,

135 
JCOPY_OPTION
 
İtiÚ
));

	@wrbmp.c

20 
	~"cdj³g.h
"

22 #ifdeà
BMP_SUPPORTED


30 #ià
BITS_IN_JSAMPLE
 != 8

31 
	gSÜry
, 
this
 
code
 
Úly
 
cİes
 
	gw™h
 8-
b™
 
	gJSAMPLEs
.

45 
dj³g_de¡_¡ruù
 
	mpub
;

47 
boŞ—n
 
	mis_os2
;

49 
jvœt_§¼ay_±r
 
	mwhŞe_image
;

50 
JDIMENSION
 
	md©a_width
;

51 
JDIMENSION
 
	mrow_width
;

52 
	m·d_by‹s
;

53 
JDIMENSION
 
	mcur_ouut_row
;

54 } 
	tbmp_de¡_¡ruù
;

56 
bmp_de¡_¡ruù
 * 
	tbmp_de¡_±r
;

60 
	$LOCAL
(è
wr™e_cŞÜm­


61 
	`JPP
((
j_decom´ess_±r
 
cšfo
, 
bmp_de¡_±r
 
de¡
,

62 
m­_cŞÜs
, 
m­_’Œy_size
));

70 
	$METHODDEF
()

71 
	$put_pix–_rows
 (
j_decom´ess_±r
 
cšfo
, 
dj³g_de¡_±r
 
dšfo
,

72 
JDIMENSION
 
rows_suµl›d
)

75 
bmp_de¡_±r
 
de¡
 = (bmp_de¡_±rè
dšfo
;

76 
JSAMPARRAY
 
image_±r
;

77 
JSAMPROW
 
š±r
, 
ouŒ
;

78 
JDIMENSION
 
cŞ
;

79 
·d
;

82 
image_±r
 = (*
cšfo
->
mem
->
acûss_vœt_§¼ay
)

83 ((
j_commÚ_±r
è
cšfo
, 
de¡
->
whŞe_image
,

84 
de¡
->
cur_ouut_row
, (
JDIMENSION
è1, 
TRUE
);

85 
de¡
->
cur_ouut_row
++;

90 
š±r
 = 
de¡
->
pub
.
bufãr
[0];

91 
ouŒ
 = 
image_±r
[0];

92 
cŞ
 = 
cšfo
->
ouut_width
; col > 0; col--) {

93 
ouŒ
[2] = *
š±r
++;

94 
ouŒ
[1] = *
š±r
++;

95 
ouŒ
[0] = *
š±r
++;

96 
ouŒ
 += 3;

100 
·d
 = 
de¡
->
·d_by‹s
;

101 --
·d
 >= 0)

102 *
ouŒ
++ = 0;

103 
	}
}

105 
	$METHODDEF
()

106 
	$put_g¿y_rows
 (
j_decom´ess_±r
 
cšfo
, 
dj³g_de¡_±r
 
dšfo
,

107 
JDIMENSION
 
rows_suµl›d
)

110 
bmp_de¡_±r
 
de¡
 = (bmp_de¡_±rè
dšfo
;

111 
JSAMPARRAY
 
image_±r
;

112 
JSAMPROW
 
š±r
, 
ouŒ
;

113 
JDIMENSION
 
cŞ
;

114 
·d
;

117 
image_±r
 = (*
cšfo
->
mem
->
acûss_vœt_§¼ay
)

118 ((
j_commÚ_±r
è
cšfo
, 
de¡
->
whŞe_image
,

119 
de¡
->
cur_ouut_row
, (
JDIMENSION
è1, 
TRUE
);

120 
de¡
->
cur_ouut_row
++;

123 
š±r
 = 
de¡
->
pub
.
bufãr
[0];

124 
ouŒ
 = 
image_±r
[0];

125 
cŞ
 = 
cšfo
->
ouut_width
; col > 0; col--) {

126 *
ouŒ
++ = *
š±r
++;

130 
·d
 = 
de¡
->
·d_by‹s
;

131 --
·d
 >= 0)

132 *
ouŒ
++ = 0;

133 
	}
}

141 
	$METHODDEF
()

142 
	$¡¬t_ouut_bmp
 (
j_decom´ess_±r
 
cšfo
, 
dj³g_de¡_±r
 
dšfo
)

145 
	}
}

156 
	$LOCAL
()

157 
	$wr™e_bmp_h—d”
 (
j_decom´ess_±r
 
cšfo
, 
bmp_de¡_±r
 
de¡
)

160 
bmpfeh—d”
[14];

161 
bmpšfoh—d”
[40];

162 
	#PUT_2B
(
¬¿y
,
off£t
,
v®ue
) \

163 (
¬¿y
[
off£t
] = (è((
v®ue
) & 0xFF), \

164 
¬¿y
[
off£t
+1] = (è(((
v®ue
è>> 8è& 0xFF))

	)

165 
	#PUT_4B
(
¬¿y
,
off£t
,
v®ue
) \

166 (
¬¿y
[
off£t
] = (è((
v®ue
) & 0xFF), \

167 
¬¿y
[
off£t
+1] = (è(((
v®ue
) >> 8) & 0xFF), \

168 
¬¿y
[
off£t
+2] = (è(((
v®ue
) >> 16) & 0xFF), \

169 
¬¿y
[
off£t
+3] = (è(((
v®ue
è>> 24è& 0xFF))

	)

170 
INT32
 
h—d”size
, 
bfSize
;

171 
b™s_³r_pix–
, 
cm­_’Œ›s
;

174 ià(
cšfo
->
out_cŞÜ_¥aû
 =ğ
JCS_RGB
) {

175 ià(
cšfo
->
quªtize_cŞÜs
) {

177 
b™s_³r_pix–
 = 8;

178 
cm­_’Œ›s
 = 256;

181 
b™s_³r_pix–
 = 24;

182 
cm­_’Œ›s
 = 0;

186 
b™s_³r_pix–
 = 8;

187 
cm­_’Œ›s
 = 256;

190 
h—d”size
 = 14 + 40 + 
cm­_’Œ›s
 * 4;

191 
bfSize
 = 
h—d”size
 + (
INT32
è
de¡
->
row_width
 * (INT32è
cšfo
->
ouut_height
;

194 
	`MEMZERO
(
bmpfeh—d”
, 
	`SIZEOF
(bmpfileheader));

195 
	`MEMZERO
(
bmpšfoh—d”
, 
	`SIZEOF
(bmpinfoheader));

198 
bmpfeh—d”
[0] = 0x42;

199 
bmpfeh—d”
[1] = 0x4D;

200 
	`PUT_4B
(
bmpfeh—d”
, 2, 
bfSize
);

202 
	`PUT_4B
(
bmpfeh—d”
, 10, 
h—d”size
);

205 
	`PUT_2B
(
bmpšfoh—d”
, 0, 40);

206 
	`PUT_4B
(
bmpšfoh—d”
, 4, 
cšfo
->
ouut_width
);

207 
	`PUT_4B
(
bmpšfoh—d”
, 8, 
cšfo
->
ouut_height
);

208 
	`PUT_2B
(
bmpšfoh—d”
, 12, 1);

209 
	`PUT_2B
(
bmpšfoh—d”
, 14, 
b™s_³r_pix–
);

212 ià(
cšfo
->
d’s™y_un™
 == 2) {

213 
	`PUT_4B
(
bmpšfoh—d”
, 24, (
INT32
è(
cšfo
->
X_d’s™y
*100));

214 
	`PUT_4B
(
bmpšfoh—d”
, 28, (
INT32
è(
cšfo
->
Y_d’s™y
*100));

216 
	`PUT_2B
(
bmpšfoh—d”
, 32, 
cm­_’Œ›s
);

219 ià(
	`JFWRITE
(
de¡
->
pub
.
ouut_fe
, 
bmpfeh—d”
, 14è!ğ(
size_t
) 14)

220 
	`ERREXIT
(
cšfo
, 
JERR_FILE_WRITE
);

221 ià(
	`JFWRITE
(
de¡
->
pub
.
ouut_fe
, 
bmpšfoh—d”
, 40è!ğ(
size_t
) 40)

222 
	`ERREXIT
(
cšfo
, 
JERR_FILE_WRITE
);

224 ià(
cm­_’Œ›s
 > 0)

225 
	`wr™e_cŞÜm­
(
cšfo
, 
de¡
, 
cm­_’Œ›s
, 4);

226 
	}
}

229 
	$LOCAL
()

230 
	$wr™e_os2_h—d”
 (
j_decom´ess_±r
 
cšfo
, 
bmp_de¡_±r
 
de¡
)

233 
bmpfeh—d”
[14];

234 
bmpcÜeh—d”
[12];

235 
INT32
 
h—d”size
, 
bfSize
;

236 
b™s_³r_pix–
, 
cm­_’Œ›s
;

239 ià(
cšfo
->
out_cŞÜ_¥aû
 =ğ
JCS_RGB
) {

240 ià(
cšfo
->
quªtize_cŞÜs
) {

242 
b™s_³r_pix–
 = 8;

243 
cm­_’Œ›s
 = 256;

246 
b™s_³r_pix–
 = 24;

247 
cm­_’Œ›s
 = 0;

251 
b™s_³r_pix–
 = 8;

252 
cm­_’Œ›s
 = 256;

255 
h—d”size
 = 14 + 12 + 
cm­_’Œ›s
 * 3;

256 
bfSize
 = 
h—d”size
 + (
INT32
è
de¡
->
row_width
 * (INT32è
cšfo
->
ouut_height
;

259 
	`MEMZERO
(
bmpfeh—d”
, 
	`SIZEOF
(bmpfileheader));

260 
	`MEMZERO
(
bmpcÜeh—d”
, 
	`SIZEOF
(bmpcoreheader));

263 
bmpfeh—d”
[0] = 0x42;

264 
bmpfeh—d”
[1] = 0x4D;

265 
	`PUT_4B
(
bmpfeh—d”
, 2, 
bfSize
);

267 
	`PUT_4B
(
bmpfeh—d”
, 10, 
h—d”size
);

270 
	`PUT_2B
(
bmpcÜeh—d”
, 0, 12);

271 
	`PUT_2B
(
bmpcÜeh—d”
, 4, 
cšfo
->
ouut_width
);

272 
	`PUT_2B
(
bmpcÜeh—d”
, 6, 
cšfo
->
ouut_height
);

273 
	`PUT_2B
(
bmpcÜeh—d”
, 8, 1);

274 
	`PUT_2B
(
bmpcÜeh—d”
, 10, 
b™s_³r_pix–
);

276 ià(
	`JFWRITE
(
de¡
->
pub
.
ouut_fe
, 
bmpfeh—d”
, 14è!ğ(
size_t
) 14)

277 
	`ERREXIT
(
cšfo
, 
JERR_FILE_WRITE
);

278 ià(
	`JFWRITE
(
de¡
->
pub
.
ouut_fe
, 
bmpcÜeh—d”
, 12è!ğ(
size_t
) 12)

279 
	`ERREXIT
(
cšfo
, 
JERR_FILE_WRITE
);

281 ià(
cm­_’Œ›s
 > 0)

282 
	`wr™e_cŞÜm­
(
cšfo
, 
de¡
, 
cm­_’Œ›s
, 3);

283 
	}
}

291 
	$LOCAL
()

292 
	$wr™e_cŞÜm­
 (
j_decom´ess_±r
 
cšfo
, 
bmp_de¡_±r
 
de¡
,

293 
m­_cŞÜs
, 
m­_’Œy_size
)

295 
JSAMPARRAY
 
cŞÜm­
 = 
cšfo
->colormap;

296 
num_cŞÜs
 = 
cšfo
->
aùu®_numb”_of_cŞÜs
;

297 
FILE
 * 
outfe
 = 
de¡
->
pub
.
ouut_fe
;

298 
i
;

300 ià(
cŞÜm­
 !ğ
NULL
) {

301 ià(
cšfo
->
out_cŞÜ_compÚ’ts
 == 3) {

303 
i
 = 0; i < 
num_cŞÜs
; i++) {

304 
	`putc
(
	`GETJSAMPLE
(
cŞÜm­
[2][
i
]), 
outfe
);

305 
	`putc
(
	`GETJSAMPLE
(
cŞÜm­
[1][
i
]), 
outfe
);

306 
	`putc
(
	`GETJSAMPLE
(
cŞÜm­
[0][
i
]), 
outfe
);

307 ià(
m­_’Œy_size
 == 4)

308 
	`putc
(0, 
outfe
);

312 
i
 = 0; i < 
num_cŞÜs
; i++) {

313 
	`putc
(
	`GETJSAMPLE
(
cŞÜm­
[0][
i
]), 
outfe
);

314 
	`putc
(
	`GETJSAMPLE
(
cŞÜm­
[0][
i
]), 
outfe
);

315 
	`putc
(
	`GETJSAMPLE
(
cŞÜm­
[0][
i
]), 
outfe
);

316 ià(
m­_’Œy_size
 == 4)

317 
	`putc
(0, 
outfe
);

322 
i
 = 0; i < 256; i++) {

323 
	`putc
(
i
, 
outfe
);

324 
	`putc
(
i
, 
outfe
);

325 
	`putc
(
i
, 
outfe
);

326 ià(
m­_’Œy_size
 == 4)

327 
	`putc
(0, 
outfe
);

331 ià(
i
 > 
m­_cŞÜs
)

332 
	`ERREXIT1
(
cšfo
, 
JERR_TOO_MANY_COLORS
, 
i
);

333 ; 
i
 < 
m­_cŞÜs
; i++) {

334 
	`putc
(0, 
outfe
);

335 
	`putc
(0, 
outfe
);

336 
	`putc
(0, 
outfe
);

337 ià(
m­_’Œy_size
 == 4)

338 
	`putc
(0, 
outfe
);

340 
	}
}

343 
	$METHODDEF
()

344 
	$fšish_ouut_bmp
 (
j_decom´ess_±r
 
cšfo
, 
dj³g_de¡_±r
 
dšfo
)

346 
bmp_de¡_±r
 
de¡
 = (bmp_de¡_±rè
dšfo
;

347 
FILE
 * 
outfe
 = 
de¡
->
pub
.
ouut_fe
;

348 
JSAMPARRAY
 
image_±r
;

349 
JSAMPROW
 
d©a_±r
;

350 
JDIMENSION
 
row
;

351 
JDIMENSION
 
cŞ
;

352 
cd_´og»ss_±r
 
´og»ss
 = (cd_´og»ss_±rè
cšfo
->progress;

355 ià(
de¡
->
is_os2
)

356 
	`wr™e_os2_h—d”
(
cšfo
, 
de¡
);

358 
	`wr™e_bmp_h—d”
(
cšfo
, 
de¡
);

361 
row
 = 
cšfo
->
ouut_height
;„ow > 0;„ow--) {

362 ià(
´og»ss
 !ğ
NULL
) {

363 
´og»ss
->
pub
.
·ss_couÁ”
 = (è(
cšfo
->
ouut_height
 - 
row
);

364 
´og»ss
->
pub
.
·ss_lim™
 = (è
cšfo
->
ouut_height
;

365 (*
´og»ss
->
pub
.
´og»ss_mÚ™Ü
è((
j_commÚ_±r
è
cšfo
);

367 
image_±r
 = (*
cšfo
->
mem
->
acûss_vœt_§¼ay
)

368 ((
j_commÚ_±r
è
cšfo
, 
de¡
->
whŞe_image
, 
row
-1, (
JDIMENSION
è1, 
FALSE
);

369 
d©a_±r
 = 
image_±r
[0];

370 
cŞ
 = 
de¡
->
row_width
; col > 0; col--) {

371 
	`putc
(
	`GETJSAMPLE
(*
d©a_±r
), 
outfe
);

372 
d©a_±r
++;

375 ià(
´og»ss
 !ğ
NULL
)

376 
´og»ss
->
com¶‘ed_exŒa_·s£s
++;

379 
	`fæush
(
outfe
);

380 ià(
	`ã¼Ü
(
outfe
))

381 
	`ERREXIT
(
cšfo
, 
JERR_FILE_WRITE
);

382 
	}
}

389 
	$GLOBAL
(
dj³g_de¡_±r
)

390 
	$jš™_wr™e_bmp
 (
j_decom´ess_±r
 
cšfo
, 
boŞ—n
 
is_os2
)

392 
bmp_de¡_±r
 
de¡
;

393 
JDIMENSION
 
row_width
;

396 
de¡
 = (
bmp_de¡_±r
)

397 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

398 
	`SIZEOF
(
bmp_de¡_¡ruù
));

399 
de¡
->
pub
.
¡¬t_ouut
 = 
¡¬t_ouut_bmp
;

400 
de¡
->
pub
.
fšish_ouut
 = 
fšish_ouut_bmp
;

401 
de¡
->
is_os2
 = is_os2;

403 ià(
cšfo
->
out_cŞÜ_¥aû
 =ğ
JCS_GRAYSCALE
) {

404 
de¡
->
pub
.
put_pix–_rows
 = 
put_g¿y_rows
;

405 } ià(
cšfo
->
out_cŞÜ_¥aû
 =ğ
JCS_RGB
) {

406 ià(
cšfo
->
quªtize_cŞÜs
)

407 
de¡
->
pub
.
put_pix–_rows
 = 
put_g¿y_rows
;

409 
de¡
->
pub
.
put_pix–_rows
 =…ut_pixel_rows;

411 
	`ERREXIT
(
cšfo
, 
JERR_BMP_COLORSPACE
);

415 
	`j³g_ÿlc_ouut_dim’siÚs
(
cšfo
);

418 
row_width
 = 
cšfo
->
ouut_width
 * cšfo->
ouut_compÚ’ts
;

419 
de¡
->
d©a_width
 = 
row_width
;

420 (
row_width
 & 3) != 0)„ow_width++;

421 
de¡
->
row_width
 =„ow_width;

422 
de¡
->
·d_by‹s
 = (è(
row_width
 - de¡->
d©a_width
);

425 
de¡
->
whŞe_image
 = (*
cšfo
->
mem
->
»que¡_vœt_§¼ay
)

426 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
, 
FALSE
,

427 
row_width
, 
cšfo
->
ouut_height
, (
JDIMENSION
) 1);

428 
de¡
->
cur_ouut_row
 = 0;

429 ià(
cšfo
->
´og»ss
 !ğ
NULL
) {

430 
cd_´og»ss_±r
 
´og»ss
 = (cd_´og»ss_±rè
cšfo
->progress;

431 
´og»ss
->
tÙ®_exŒa_·s£s
++;

435 
de¡
->
pub
.
bufãr
 = (*
cšfo
->
mem
->
®loc_§¼ay
)

436 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
, 
row_width
, (
JDIMENSION
) 1);

437 
de¡
->
pub
.
bufãr_height
 = 1;

439  (
dj³g_de¡_±r
è
de¡
;

440 
	}
}

	@wrgif.c

40 
	~"cdj³g.h
"

42 #ifdeà
GIF_SUPPORTED


48 
dj³g_de¡_¡ruù
 
	mpub
;

50 
j_decom´ess_±r
 
	mcšfo
;

53 
	mn_b™s
;

54 
	mmaxcode
;

55 
INT32
 
	mcur_accum
;

56 
	mcur_b™s
;

59 
	mCË¬Code
;

60 
	mEOFCode
;

61 
	mcode_couÁ”
;

64 
	mby‹sšpkt
;

65 
	m·ck‘buf
[256];

67 } 
	tgif_de¡_¡ruù
;

69 
gif_de¡_¡ruù
 * 
	tgif_de¡_±r
;

72 
	#MAXCODE
(
n_b™s
è((1 << (n_b™s)è- 1)

	)

80 
	$LOCAL
()

81 
	$æush_·ck‘
 (
gif_de¡_±r
 
dšfo
)

84 ià(
dšfo
->
by‹sšpkt
 > 0) {

85 
dšfo
->
·ck‘buf
[0] = (èdšfo->
by‹sšpkt
++;

86 ià(
	`JFWRITE
(
dšfo
->
pub
.
ouut_fe
, dšfo->
·ck‘buf
, dšfo->
by‹sšpkt
)

87 !ğ(
size_t
è
dšfo
->
by‹sšpkt
)

88 
	`ERREXIT
(
dšfo
->
cšfo
, 
JERR_FILE_WRITE
);

89 
dšfo
->
by‹sšpkt
 = 0;

91 
	}
}

95 
	#CHAR_OUT
(
dšfo
,
c
) \

96 { (
dšfo
)->
·ck‘buf
[++(dšfo)->
by‹sšpkt
] = (è(
c
); \

97 ià((
dšfo
)->
by‹sšpkt
 >= 255) \

98 
	`æush_·ck‘
(
dšfo
); \

99 }

	)

104 
	$LOCAL
()

105 
	$ouut
 (
gif_de¡_±r
 
dšfo
, 
code
)

109 
dšfo
->
cur_accum
 |ğ((
INT32
è
code
è<< dšfo->
cur_b™s
;

110 
dšfo
->
cur_b™s
 +ğdšfo->
n_b™s
;

112 
dšfo
->
cur_b™s
 >= 8) {

113 
	`CHAR_OUT
(
dšfo
, dšfo->
cur_accum
 & 0xFF);

114 
dšfo
->
cur_accum
 >>= 8;

115 
dšfo
->
cur_b™s
 -= 8;

117 
	}
}

142 
	$LOCAL
()

143 
	$com´ess_š™
 (
gif_de¡_±r
 
dšfo
, 
i_b™s
)

147 
dšfo
->
n_b™s
 = 
i_b™s
;

148 
dšfo
->
maxcode
 = 
	`MAXCODE
(dšfo->
n_b™s
);

149 
dšfo
->
CË¬Code
 = (1 << (
i_b™s
 - 1));

150 
dšfo
->
EOFCode
 = dšfo->
CË¬Code
 + 1;

151 
dšfo
->
code_couÁ”
 = dšfo->
CË¬Code
 + 2;

153 
dšfo
->
by‹sšpkt
 = 0;

154 
dšfo
->
cur_accum
 = 0;

155 
dšfo
->
cur_b™s
 = 0;

157 
	`ouut
(
dšfo
, dšfo->
CË¬Code
);

158 
	}
}

161 
	$LOCAL
()

162 
	$com´ess_pix–
 (
gif_de¡_±r
 
dšfo
, 
c
)

168 
	`ouut
(
dšfo
, 
c
);

172 ià(
dšfo
->
code_couÁ”
 < dšfo->
maxcode
) {

173 
dšfo
->
code_couÁ”
++;

175 
	`ouut
(
dšfo
, dšfo->
CË¬Code
);

176 
dšfo
->
code_couÁ”
 = dšfo->
CË¬Code
 + 2;

178 
	}
}

181 
	$LOCAL
()

182 
	$com´ess_‹rm
 (
gif_de¡_±r
 
dšfo
)

186 
	`ouut
(
dšfo
, dšfo->
EOFCode
);

188 ià(
dšfo
->
cur_b™s
 > 0) {

189 
	`CHAR_OUT
(
dšfo
, dšfo->
cur_accum
 & 0xFF);

192 
	`æush_·ck‘
(
dšfo
);

193 
	}
}

199 
	$LOCAL
()

200 
	$put_wÜd
 (
gif_de¡_±r
 
dšfo
, 
w
)

203 
	`putc
(
w
 & 0xFF, 
dšfo
->
pub
.
ouut_fe
);

204 
	`putc
((
w
 >> 8è& 0xFF, 
dšfo
->
pub
.
ouut_fe
);

205 
	}
}

208 
	$LOCAL
()

209 
	$put_3by‹s
 (
gif_de¡_±r
 
dšfo
, 
v®
)

212 
	`putc
(
v®
, 
dšfo
->
pub
.
ouut_fe
);

213 
	`putc
(
v®
, 
dšfo
->
pub
.
ouut_fe
);

214 
	`putc
(
v®
, 
dšfo
->
pub
.
ouut_fe
);

215 
	}
}

218 
	$LOCAL
()

219 
	$em™_h—d”
 (
gif_de¡_±r
 
dšfo
, 
num_cŞÜs
, 
JSAMPARRAY
 
cŞÜm­
)

223 
B™sP”Pix–
, 
CŞÜM­Size
, 
In™CodeSize
, 
FÏgBy‹
;

224 
cshiá
 = 
dšfo
->
cšfo
->
d©a_´ecisiÚ
 - 8;

225 
i
;

227 ià(
num_cŞÜs
 > 256)

228 
	`ERREXIT1
(
dšfo
->
cšfo
, 
JERR_TOO_MANY_COLORS
, 
num_cŞÜs
);

230 
B™sP”Pix–
 = 1;

231 
num_cŞÜs
 > (1 << 
B™sP”Pix–
))

232 
B™sP”Pix–
++;

233 
CŞÜM­Size
 = 1 << 
B™sP”Pix–
;

234 ià(
B™sP”Pix–
 <= 1)

235 
In™CodeSize
 = 2;

237 
In™CodeSize
 = 
B™sP”Pix–
;

242 
	`putc
('G', 
dšfo
->
pub
.
ouut_fe
);

243 
	`putc
('I', 
dšfo
->
pub
.
ouut_fe
);

244 
	`putc
('F', 
dšfo
->
pub
.
ouut_fe
);

245 
	`putc
('8', 
dšfo
->
pub
.
ouut_fe
);

246 
	`putc
('7', 
dšfo
->
pub
.
ouut_fe
);

247 
	`putc
('a', 
dšfo
->
pub
.
ouut_fe
);

249 
	`put_wÜd
(
dšfo
, (èdšfo->
cšfo
->
ouut_width
);

250 
	`put_wÜd
(
dšfo
, (èdšfo->
cšfo
->
ouut_height
);

251 
FÏgBy‹
 = 0x80;

252 
FÏgBy‹
 |ğ(
B™sP”Pix–
-1) << 4;

253 
FÏgBy‹
 |ğ(
B™sP”Pix–
-1);

254 
	`putc
(
FÏgBy‹
, 
dšfo
->
pub
.
ouut_fe
);

255 
	`putc
(0, 
dšfo
->
pub
.
ouut_fe
);

256 
	`putc
(0, 
dšfo
->
pub
.
ouut_fe
);

260 
i
=0; i < 
CŞÜM­Size
; i++) {

261 ià(
i
 < 
num_cŞÜs
) {

262 ià(
cŞÜm­
 !ğ
NULL
) {

263 ià(
dšfo
->
cšfo
->
out_cŞÜ_¥aû
 =ğ
JCS_RGB
) {

265 
	`putc
(
	`GETJSAMPLE
(
cŞÜm­
[0][
i
]è>> 
cshiá
, 
dšfo
->
pub
.
ouut_fe
);

266 
	`putc
(
	`GETJSAMPLE
(
cŞÜm­
[1][
i
]è>> 
cshiá
, 
dšfo
->
pub
.
ouut_fe
);

267 
	`putc
(
	`GETJSAMPLE
(
cŞÜm­
[2][
i
]è>> 
cshiá
, 
dšfo
->
pub
.
ouut_fe
);

270 
	`put_3by‹s
(
dšfo
, 
	`GETJSAMPLE
(
cŞÜm­
[0][
i
]è>> 
cshiá
);

274 
	`put_3by‹s
(
dšfo
, (
i
 * 255 + (
num_cŞÜs
-1)/2) / (num_colors-1));

278 
	`put_3by‹s
(
dšfo
, 0);

282 
	`putc
(',', 
dšfo
->
pub
.
ouut_fe
);

283 
	`put_wÜd
(
dšfo
, 0);

284 
	`put_wÜd
(
dšfo
, 0);

285 
	`put_wÜd
(
dšfo
, (èdšfo->
cšfo
->
ouut_width
);

286 
	`put_wÜd
(
dšfo
, (èdšfo->
cšfo
->
ouut_height
);

288 
	`putc
(0x00, 
dšfo
->
pub
.
ouut_fe
);

290 
	`putc
(
In™CodeSize
, 
dšfo
->
pub
.
ouut_fe
);

293 
	`com´ess_š™
(
dšfo
, 
In™CodeSize
+1);

294 
	}
}

301 
	$METHODDEF
()

302 
	$¡¬t_ouut_gif
 (
j_decom´ess_±r
 
cšfo
, 
dj³g_de¡_±r
 
dšfo
)

304 
gif_de¡_±r
 
de¡
 = (gif_de¡_±rè
dšfo
;

306 ià(
cšfo
->
quªtize_cŞÜs
)

307 
	`em™_h—d”
(
de¡
, 
cšfo
->
aùu®_numb”_of_cŞÜs
, cšfo->
cŞÜm­
);

309 
	`em™_h—d”
(
de¡
, 256, (
JSAMPARRAY
è
NULL
);

310 
	}
}

318 
	$METHODDEF
()

319 
	$put_pix–_rows
 (
j_decom´ess_±r
 
cšfo
, 
dj³g_de¡_±r
 
dšfo
,

320 
JDIMENSION
 
rows_suµl›d
)

322 
gif_de¡_±r
 
de¡
 = (gif_de¡_±rè
dšfo
;

323 
JSAMPROW
 
±r
;

324 
JDIMENSION
 
cŞ
;

326 
±r
 = 
de¡
->
pub
.
bufãr
[0];

327 
cŞ
 = 
cšfo
->
ouut_width
; col > 0; col--) {

328 
	`com´ess_pix–
(
de¡
, 
	`GETJSAMPLE
(*
±r
++));

330 
	}
}

337 
	$METHODDEF
()

338 
	$fšish_ouut_gif
 (
j_decom´ess_±r
 
cšfo
, 
dj³g_de¡_±r
 
dšfo
)

340 
gif_de¡_±r
 
de¡
 = (gif_de¡_±rè
dšfo
;

343 
	`com´ess_‹rm
(
de¡
);

345 
	`putc
(0, 
de¡
->
pub
.
ouut_fe
);

347 
	`putc
(';', 
de¡
->
pub
.
ouut_fe
);

349 
	`fæush
(
de¡
->
pub
.
ouut_fe
);

350 ià(
	`ã¼Ü
(
de¡
->
pub
.
ouut_fe
))

351 
	`ERREXIT
(
cšfo
, 
JERR_FILE_WRITE
);

352 
	}
}

359 
	$GLOBAL
(
dj³g_de¡_±r
)

360 
	$jš™_wr™e_gif
 (
j_decom´ess_±r
 
cšfo
)

362 
gif_de¡_±r
 
de¡
;

365 
de¡
 = (
gif_de¡_±r
)

366 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

367 
	`SIZEOF
(
gif_de¡_¡ruù
));

368 
de¡
->
cšfo
 = cinfo;

369 
de¡
->
pub
.
¡¬t_ouut
 = 
¡¬t_ouut_gif
;

370 
de¡
->
pub
.
put_pix–_rows
 =…ut_pixel_rows;

371 
de¡
->
pub
.
fšish_ouut
 = 
fšish_ouut_gif
;

373 ià(
cšfo
->
out_cŞÜ_¥aû
 !ğ
JCS_GRAYSCALE
 &&

374 
cšfo
->
out_cŞÜ_¥aû
 !ğ
JCS_RGB
)

375 
	`ERREXIT
(
cšfo
, 
JERR_GIF_COLORSPACE
);

378 ià(
cšfo
->
out_cŞÜ_¥aû
 !ğ
JCS_GRAYSCALE
 || cšfo->
d©a_´ecisiÚ
 > 8) {

380 
cšfo
->
quªtize_cŞÜs
 = 
TRUE
;

381 ià(
cšfo
->
desœed_numb”_of_cŞÜs
 > 256)

382 
cšfo
->
desœed_numb”_of_cŞÜs
 = 256;

386 
	`j³g_ÿlc_ouut_dim’siÚs
(
cšfo
);

388 ià(
cšfo
->
ouut_compÚ’ts
 != 1)

389 
	`ERREXIT
(
cšfo
, 
JERR_GIF_BUG
);

392 
de¡
->
pub
.
bufãr
 = (*
cšfo
->
mem
->
®loc_§¼ay
)

393 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
, cšfo->
ouut_width
, (
JDIMENSION
) 1);

394 
de¡
->
pub
.
bufãr_height
 = 1;

396  (
dj³g_de¡_±r
è
de¡
;

397 
	}
}

	@wrjpgcom.c

14 
	#JPEG_CJPEG_DJPEG


	)

15 
	~"jšşude.h
"

17 #iâdeà
HAVE_STDLIB_H


18 * 
m®loc
 ();

20 
	~<ùy³.h
>

21 #ifdeà
USE_SETMODE


22 
	~<fú.h
>

24 
	~<io.h
>

27 #ifdeà
USE_CCOMMAND


28 #ifdeà
__MWERKS__


29 
	~<SIOUX.h
>

30 
	~<cÚsŞe.h
>

32 #ifdeà
THINK_C


33 
	~<cÚsŞe.h
>

37 #ifdeà
DONT_USE_B_MODE


38 
	#READ_BINARY
 "r"

	)

39 
	#WRITE_BINARY
 "w"

	)

41 #ifdeà
VMS


42 
	#READ_BINARY
 "rb", "ùx=¡m"

	)

43 
	#WRITE_BINARY
 "wb", "ùx=¡m"

	)

45 
	#READ_BINARY
 "rb"

	)

46 
	#WRITE_BINARY
 "wb"

	)

50 #iâdeà
EXIT_FAILURE


51 
	#EXIT_FAILURE
 1

	)

53 #iâdeà
EXIT_SUCCESS


54 #ifdeà
VMS


55 
	#EXIT_SUCCESS
 1

	)

57 
	#EXIT_SUCCESS
 0

	)

65 #iâdeà
MAX_COM_LENGTH


66 
	#MAX_COM_LENGTH
 65000L

	)

75 
FILE
 * 
	gšfe
;

78 
	#NEXTBYTE
(è
	`g‘c
(
šfe
)

	)

80 
FILE
 * 
	goutfe
;

83 
	#PUTBYTE
(
x
è
	`putc
((x), 
outfe
)

	)

87 
	#ERREXIT
(
msg
è(
	`årštf
(
¡d”r
, "%s\n", msg), 
	`ex™
(
EXIT_FAILURE
))

	)

92 
	$»ad_1_by‹
 ()

94 
c
;

96 
c
 = 
	`NEXTBYTE
();

97 ià(
c
 =ğ
EOF
)

98 
	`ERREXIT
("Premature EOF in JPEG file");

99  
c
;

100 
	}
}

105 
	$»ad_2_by‹s
 ()

107 
c1
, 
c2
;

109 
c1
 = 
	`NEXTBYTE
();

110 ià(
c1
 =ğ
EOF
)

111 
	`ERREXIT
("Premature EOF in JPEG file");

112 
c2
 = 
	`NEXTBYTE
();

113 ià(
c2
 =ğ
EOF
)

114 
	`ERREXIT
("Premature EOF in JPEG file");

115  (((è
c1
è<< 8è+ ((è
c2
);

116 
	}
}

122 
	$wr™e_1_by‹
 (
c
)

124 
	`PUTBYTE
(
c
);

125 
	}
}

128 
	$wr™e_2_by‹s
 (
v®
)

130 
	`PUTBYTE
((
v®
 >> 8) & 0xFF);

131 
	`PUTBYTE
(
v®
 & 0xFF);

132 
	}
}

135 
	$wr™e_m¬k”
 (
m¬k”
)

137 
	`PUTBYTE
(0xFF);

138 
	`PUTBYTE
(
m¬k”
);

139 
	}
}

142 
	$cİy_»¡_of_fe
 ()

144 
c
;

146 (
c
 = 
	`NEXTBYTE
()è!ğ
EOF
)

147 
	`PUTBYTE
(
c
);

148 
	}
}

157 
	#M_SOF0
 0xC0

	)

158 
	#M_SOF1
 0xC1

	)

159 
	#M_SOF2
 0xC2

	)

160 
	#M_SOF3
 0xC3

	)

161 
	#M_SOF5
 0xC5

	)

162 
	#M_SOF6
 0xC6

	)

163 
	#M_SOF7
 0xC7

	)

164 
	#M_SOF9
 0xC9

	)

165 
	#M_SOF10
 0xCA

	)

166 
	#M_SOF11
 0xCB

	)

167 
	#M_SOF13
 0xCD

	)

168 
	#M_SOF14
 0xCE

	)

169 
	#M_SOF15
 0xCF

	)

170 
	#M_SOI
 0xD8

	)

171 
	#M_EOI
 0xD9

	)

172 
	#M_SOS
 0xDA

	)

173 
	#M_COM
 0xFE

	)

187 
	$Ãxt_m¬k”
 ()

189 
c
;

190 
disÿrded_by‹s
 = 0;

193 
c
 = 
	`»ad_1_by‹
();

194 
c
 != 0xFF) {

195 
disÿrded_by‹s
++;

196 
c
 = 
	`»ad_1_by‹
();

202 
c
 = 
	`»ad_1_by‹
();

203 } 
c
 == 0xFF);

205 ià(
disÿrded_by‹s
 != 0) {

206 
	`årštf
(
¡d”r
, "Warning: garbage data found in JPEG file\n");

209  
c
;

210 
	}
}

222 
	$fœ¡_m¬k”
 ()

224 
c1
, 
c2
;

226 
c1
 = 
	`NEXTBYTE
();

227 
c2
 = 
	`NEXTBYTE
();

228 ià(
c1
 !ğ0xFF || 
c2
 !ğ
M_SOI
)

229 
	`ERREXIT
("Not‡ JPEG file");

230  
c2
;

231 
	}
}

244 
	$cİy_v¬ŸbË
 ()

247 
Ëngth
;

250 
Ëngth
 = 
	`»ad_2_by‹s
();

251 
	`wr™e_2_by‹s
(
Ëngth
);

253 ià(
Ëngth
 < 2)

254 
	`ERREXIT
("Erroneous JPEG marker†ength");

255 
Ëngth
 -= 2;

257 
Ëngth
 > 0) {

258 
	`wr™e_1_by‹
(
	`»ad_1_by‹
());

259 
Ëngth
--;

261 
	}
}

264 
	$sk_v¬ŸbË
 ()

267 
Ëngth
;

270 
Ëngth
 = 
	`»ad_2_by‹s
();

272 ià(
Ëngth
 < 2)

273 
	`ERREXIT
("Erroneous JPEG marker†ength");

274 
Ëngth
 -= 2;

276 
Ëngth
 > 0) {

277 (è
	`»ad_1_by‹
();

278 
Ëngth
--;

280 
	}
}

289 
	$sÿn_JPEG_h—d”
 (
k“p_COM
)

291 
m¬k”
;

294 ià(
	`fœ¡_m¬k”
(è!ğ
M_SOI
)

295 
	`ERREXIT
("Expected SOI marker first");

296 
	`wr™e_m¬k”
(
M_SOI
);

300 
m¬k”
 = 
	`Ãxt_m¬k”
();

301 
m¬k”
) {

305 
M_SOF0
:

306 
M_SOF1
:

307 
M_SOF2
:

308 
M_SOF3
:

309 
M_SOF5
:

310 
M_SOF6
:

311 
M_SOF7
:

312 
M_SOF9
:

313 
M_SOF10
:

314 
M_SOF11
:

315 
M_SOF13
:

316 
M_SOF14
:

317 
M_SOF15
:

318  
m¬k”
;

320 
M_SOS
:

321 
	`ERREXIT
("SOS without…rior SOFn");

324 
M_EOI
:

325  
m¬k”
;

327 
M_COM
:

328 ià(
k“p_COM
) {

329 
	`wr™e_m¬k”
(
m¬k”
);

330 
	`cİy_v¬ŸbË
();

332 
	`sk_v¬ŸbË
();

337 
	`wr™e_m¬k”
(
m¬k”
);

338 
	`cİy_v¬ŸbË
();

342 
	}
}

347 cÚ¡ * 
	g´ogÇme
;

351 
	$u§ge
 ()

354 
	`årštf
(
¡d”r
, "wrjpgcom inserts‡extual comment in‡ JPEG file.\n");

355 
	`årštf
(
¡d”r
, "You can‡ddo or„eplace‡nyƒxisting comment(s).\n");

357 
	`årštf
(
¡d”r
, "U§ge: % [sw™ches] ", 
´ogÇme
);

358 #ifdeà
TWO_FILE_COMMANDLINE


359 
	`årštf
(
¡d”r
, "inputfile outputfile\n");

361 
	`årštf
(
¡d”r
, "[inputfile]\n");

364 
	`årštf
(
¡d”r
, "Switches (names may be‡bbreviated):\n");

365 
	`årštf
(
¡d”r
, " -replace Delete‡nyƒxisting comments\n");

366 
	`årštf
(
¡d”r
, " -comment \"text\" Insert comment with givenext\n");

367 
	`årštf
(
¡d”r
, " -cfile‚ame Read comment from‚amed file\n");

368 
	`årštf
(
¡d”r
, "Noticehat you must…ut quotes‡roundhe commentext\n");

369 
	`årštf
(
¡d”r
, "when you use -comment.\n");

370 
	`årštf
(
¡d”r
, "If you do‚ot giveƒither -comment or -cfile onhe command†ine,\n");

371 
	`årštf
(
¡d”r
, "thenhe commentext is„ead from standard input.\n");

372 
	`årštf
(
¡d”r
, "It can be multiple†ines, upo %u charactersotal.\n",

373 (è
MAX_COM_LENGTH
);

374 #iâdeà
TWO_FILE_COMMANDLINE


375 
	`årštf
(
¡d”r
, "You must specify‡n input JPEG file‚ame when supplying\n");

376 
	`årštf
(
¡d”r
, "commentext from standard input.\n");

379 
	`ex™
(
EXIT_FAILURE
);

380 
	}
}

384 
	$keym©ch
 (* 
¬g
, cÚ¡ * 
keywÜd
, 
mšch¬s
)

389 
ÿ
, 
ck
;

390 
nm©ched
 = 0;

392 (
ÿ
 = *
¬g
++) != '\0') {

393 ià((
ck
 = *
keywÜd
++) == '\0')

395 ià(
	`isuµ”
(
ÿ
))

396 
ÿ
 = 
	`tŞow”
(ca);

397 ià(
ÿ
 !ğ
ck
)

399 
nm©ched
++;

402 ià(
nm©ched
 < 
mšch¬s
)

405 
	}
}

413 
	$maš
 (
¬gc
, **
¬gv
)

415 
¬gn
;

416 * 
¬g
;

417 
k“p_COM
 = 1;

418 * 
comm’t_¬g
 = 
NULL
;

419 
FILE
 * 
comm’t_fe
 = 
NULL
;

420 
comm’t_Ëngth
 = 0;

421 
m¬k”
;

424 #ifdeà
USE_CCOMMAND


425 
¬gc
 = 
	`ccommªd
(&
¬gv
);

428 
´ogÇme
 = 
¬gv
[0];

429 ià(
´ogÇme
 =ğ
NULL
 ||…rogname[0] == 0)

430 
´ogÇme
 = "wrjpgcom";

433 
¬gn
 = 1;‡rgÀ< 
¬gc
;‡rgn++) {

434 
¬g
 = 
¬gv
[
¬gn
];

435 ià(
¬g
[0] != '-')

437 
¬g
++;

438 ià(
	`keym©ch
(
¬g
, "replace", 1)) {

439 
k“p_COM
 = 0;

440 } ià(
	`keym©ch
(
¬g
, "cfile", 2)) {

441 ià(++
¬gn
 >ğ
¬gc
è
	`u§ge
();

442 ià((
comm’t_fe
 = 
	`fİ’
(
¬gv
[
¬gn
], "r")è=ğ
NULL
) {

443 
	`årštf
(
¡d”r
, "%s: cª'ˆİ’ %s\n", 
´ogÇme
, 
¬gv
[
¬gn
]);

444 
	`ex™
(
EXIT_FAILURE
);

446 } ià(
	`keym©ch
(
¬g
, "comment", 1)) {

447 ià(++
¬gn
 >ğ
¬gc
è
	`u§ge
();

448 
comm’t_¬g
 = 
¬gv
[
¬gn
];

452 ià(
comm’t_¬g
[0] == '"') {

453 
comm’t_¬g
 = (*è
	`m®loc
((
size_t
è
MAX_COM_LENGTH
);

454 ià(
comm’t_¬g
 =ğ
NULL
)

455 
	`ERREXIT
("Insufficient memory");

456 
	`¡rıy
(
comm’t_¬g
, 
¬gv
[
¬gn
]+1);

458 
comm’t_Ëngth
 = (è
	`¡¾’
(
comm’t_¬g
);

459 ià(
comm’t_Ëngth
 > 0 && 
comm’t_¬g
[comment_length-1] == '"') {

460 
comm’t_¬g
[
comm’t_Ëngth
-1] = '\0';

463 ià(++
¬gn
 >ğ
¬gc
)

464 
	`ERREXIT
("Missingƒnding quote mark");

465 
	`¡rÿt
(
comm’t_¬g
, " ");

466 
	`¡rÿt
(
comm’t_¬g
, 
¬gv
[
¬gn
]);

469 
comm’t_Ëngth
 = (è
	`¡¾’
(
comm’t_¬g
);

471 
	`u§ge
();

475 ià(
comm’t_¬g
 !ğ
NULL
 && 
comm’t_fe
 != NULL)

476 
	`u§ge
();

480 ià(
comm’t_¬g
 =ğ
NULL
 && 
comm’t_fe
 =ğNULL && 
¬gn
 >ğ
¬gc
)

481 
	`u§ge
();

484 ià(
¬gn
 < 
¬gc
) {

485 ià((
šfe
 = 
	`fİ’
(
¬gv
[
¬gn
], 
READ_BINARY
)è=ğ
NULL
) {

486 
	`årštf
(
¡d”r
, "%s: cª'ˆİ’ %s\n", 
´ogÇme
, 
¬gv
[
¬gn
]);

487 
	`ex™
(
EXIT_FAILURE
);

491 #ifdeà
USE_SETMODE


492 
	`£tmode
(
	`f’o
(
¡dš
), 
O_BINARY
);

494 #ifdeà
USE_FDOPEN


495 ià((
šfe
 = 
	`fdİ’
(
	`f’o
(
¡dš
), 
READ_BINARY
)è=ğ
NULL
) {

496 
	`årštf
(
¡d”r
, "%s: cª'ˆİ’ stdš\n", 
´ogÇme
);

497 
	`ex™
(
EXIT_FAILURE
);

500 
šfe
 = 
¡dš
;

505 #ifdeà
TWO_FILE_COMMANDLINE


507 ià(
¬gn
 !ğ
¬gc
-2) {

508 
	`årštf
(
¡d”r
, "%s: must‚ame one input‡nd one output file\n",

509 
´ogÇme
);

510 
	`u§ge
();

512 ià((
outfe
 = 
	`fİ’
(
¬gv
[
¬gn
+1], 
WRITE_BINARY
)è=ğ
NULL
) {

513 
	`årštf
(
¡d”r
, "%s: cª'ˆİ’ %s\n", 
´ogÇme
, 
¬gv
[
¬gn
+1]);

514 
	`ex™
(
EXIT_FAILURE
);

518 ià(
¬gn
 < 
¬gc
-1) {

519 
	`årštf
(
¡d”r
, "%s: oÆy oÃ iÅuˆfe\n", 
´ogÇme
);

520 
	`u§ge
();

523 #ifdeà
USE_SETMODE


524 
	`£tmode
(
	`f’o
(
¡dout
), 
O_BINARY
);

526 #ifdeà
USE_FDOPEN


527 ià((
outfe
 = 
	`fdİ’
(
	`f’o
(
¡dout
), 
WRITE_BINARY
)è=ğ
NULL
) {

528 
	`årštf
(
¡d”r
, "%s: cª'ˆİ’ stdout\n", 
´ogÇme
);

529 
	`ex™
(
EXIT_FAILURE
);

532 
outfe
 = 
¡dout
;

537 ià(
comm’t_¬g
 =ğ
NULL
) {

538 
FILE
 * 
¤c_fe
;

539 
c
;

541 
comm’t_¬g
 = (*è
	`m®loc
((
size_t
è
MAX_COM_LENGTH
);

542 ià(
comm’t_¬g
 =ğ
NULL
)

543 
	`ERREXIT
("Insufficient memory");

544 
comm’t_Ëngth
 = 0;

545 
¤c_fe
 = (
comm’t_fe
 !ğ
NULL
 ? comm’t_f: 
¡dš
);

546 (
c
 = 
	`g‘c
(
¤c_fe
)è!ğ
EOF
) {

547 ià(
comm’t_Ëngth
 >ğ(è
MAX_COM_LENGTH
) {

548 
	`årštf
(
¡d”r
, "Commentext may‚otƒxceed %u bytes\n",

549 (è
MAX_COM_LENGTH
);

550 
	`ex™
(
EXIT_FAILURE
);

552 
comm’t_¬g
[
comm’t_Ëngth
++] = (è
c
;

554 ià(
comm’t_fe
 !ğ
NULL
)

555 
	`fşo£
(
comm’t_fe
);

564 
m¬k”
 = 
	`sÿn_JPEG_h—d”
(
k“p_COM
);

566 ià(
comm’t_Ëngth
 > 0) {

567 
	`wr™e_m¬k”
(
M_COM
);

568 
	`wr™e_2_by‹s
(
comm’t_Ëngth
 + 2);

569 
comm’t_Ëngth
 > 0) {

570 
	`wr™e_1_by‹
(*
comm’t_¬g
++);

571 
comm’t_Ëngth
--;

577 
	`wr™e_m¬k”
(
m¬k”
);

578 
	`cİy_»¡_of_fe
();

581 
	`ex™
(
EXIT_SUCCESS
);

583 
	}
}

	@wrppm.c

18 
	~"cdj³g.h
"

20 #ifdeà
PPM_SUPPORTED


33 #ià
BITS_IN_JSAMPLE
 == 8

34 
	#PUTPPMSAMPLE
(
±r
,
v
è*±r++ = (è(v)

	)

35 
	#BYTESPERSAMPLE
 1

	)

36 
	#PPM_MAXVAL
 255

	)

38 #ifdeà
PPM_NORAWWORD


39 
	#PUTPPMSAMPLE
(
±r
,
v
è*±r++ = (è((vè>> (
BITS_IN_JSAMPLE
-8))

	)

40 
	#BYTESPERSAMPLE
 1

	)

41 
	#PPM_MAXVAL
 255

	)

44 
	#PUTPPMSAMPLE
(
±r
,
v
) \

45 { 
v®_
 = 
v
; \

46 *
±r
++ = (è(
v®_
 & 0xFF); \

47 *
±r
++ = (è((
v®_
 >> 8) & 0xFF); \

48 }

	)

49 
	#BYTESPERSAMPLE
 2

	)

50 
	#PPM_MAXVAL
 ((1<<
BITS_IN_JSAMPLE
)-1)

	)

69 
dj³g_de¡_¡ruù
 
	mpub
;

72 *
	miobufãr
;

73 
JSAMPROW
 
	mpixrow
;

74 
size_t
 
	mbufãr_width
;

75 
JDIMENSION
 
	m§m¶es_³r_row
;

76 } 
	tµm_de¡_¡ruù
;

78 
µm_de¡_¡ruù
 * 
	tµm_de¡_±r
;

89 
	$METHODDEF
()

90 
	$put_pix–_rows
 (
j_decom´ess_±r
 
cšfo
, 
dj³g_de¡_±r
 
dšfo
,

91 
JDIMENSION
 
rows_suµl›d
)

93 
µm_de¡_±r
 
de¡
 = (µm_de¡_±rè
dšfo
;

95 (è
	`JFWRITE
(
de¡
->
pub
.
ouut_fe
, de¡->
iobufãr
, de¡->
bufãr_width
);

96 
	}
}

104 
	$METHODDEF
()

105 
	$cİy_pix–_rows
 (
j_decom´ess_±r
 
cšfo
, 
dj³g_de¡_±r
 
dšfo
,

106 
JDIMENSION
 
rows_suµl›d
)

108 
µm_de¡_±r
 
de¡
 = (µm_de¡_±rè
dšfo
;

109 * 
bufã½Œ
;

110 
JSAMPROW
 
±r
;

111 
JDIMENSION
 
cŞ
;

113 
±r
 = 
de¡
->
pub
.
bufãr
[0];

114 
bufã½Œ
 = 
de¡
->
iobufãr
;

115 
cŞ
 = 
de¡
->
§m¶es_³r_row
; col > 0; col--) {

116 
	`PUTPPMSAMPLE
(
bufã½Œ
, 
	`GETJSAMPLE
(*
±r
++));

118 (è
	`JFWRITE
(
de¡
->
pub
.
ouut_fe
, de¡->
iobufãr
, de¡->
bufãr_width
);

119 
	}
}

127 
	$METHODDEF
()

128 
	$put_dem­³d_rgb
 (
j_decom´ess_±r
 
cšfo
, 
dj³g_de¡_±r
 
dšfo
,

129 
JDIMENSION
 
rows_suµl›d
)

131 
µm_de¡_±r
 
de¡
 = (µm_de¡_±rè
dšfo
;

132 * 
bufã½Œ
;

133 
pixv®
;

134 
JSAMPROW
 
±r
;

135 
JSAMPROW
 
cŞÜ_m­0
 = 
cšfo
->
cŞÜm­
[0];

136 
JSAMPROW
 
cŞÜ_m­1
 = 
cšfo
->
cŞÜm­
[1];

137 
JSAMPROW
 
cŞÜ_m­2
 = 
cšfo
->
cŞÜm­
[2];

138 
JDIMENSION
 
cŞ
;

140 
±r
 = 
de¡
->
pub
.
bufãr
[0];

141 
bufã½Œ
 = 
de¡
->
iobufãr
;

142 
cŞ
 = 
cšfo
->
ouut_width
; col > 0; col--) {

143 
pixv®
 = 
	`GETJSAMPLE
(*
±r
++);

144 
	`PUTPPMSAMPLE
(
bufã½Œ
, 
	`GETJSAMPLE
(
cŞÜ_m­0
[
pixv®
]));

145 
	`PUTPPMSAMPLE
(
bufã½Œ
, 
	`GETJSAMPLE
(
cŞÜ_m­1
[
pixv®
]));

146 
	`PUTPPMSAMPLE
(
bufã½Œ
, 
	`GETJSAMPLE
(
cŞÜ_m­2
[
pixv®
]));

148 (è
	`JFWRITE
(
de¡
->
pub
.
ouut_fe
, de¡->
iobufãr
, de¡->
bufãr_width
);

149 
	}
}

152 
	$METHODDEF
()

153 
	$put_dem­³d_g¿y
 (
j_decom´ess_±r
 
cšfo
, 
dj³g_de¡_±r
 
dšfo
,

154 
JDIMENSION
 
rows_suµl›d
)

156 
µm_de¡_±r
 
de¡
 = (µm_de¡_±rè
dšfo
;

157 * 
bufã½Œ
;

158 
JSAMPROW
 
±r
;

159 
JSAMPROW
 
cŞÜ_m­
 = 
cšfo
->
cŞÜm­
[0];

160 
JDIMENSION
 
cŞ
;

162 
±r
 = 
de¡
->
pub
.
bufãr
[0];

163 
bufã½Œ
 = 
de¡
->
iobufãr
;

164 
cŞ
 = 
cšfo
->
ouut_width
; col > 0; col--) {

165 
	`PUTPPMSAMPLE
(
bufã½Œ
, 
	`GETJSAMPLE
(
cŞÜ_m­
[GETJSAMPLE(*
±r
++)]));

167 (è
	`JFWRITE
(
de¡
->
pub
.
ouut_fe
, de¡->
iobufãr
, de¡->
bufãr_width
);

168 
	}
}

175 
	$METHODDEF
()

176 
	$¡¬t_ouut_µm
 (
j_decom´ess_±r
 
cšfo
, 
dj³g_de¡_±r
 
dšfo
)

178 
µm_de¡_±r
 
de¡
 = (µm_de¡_±rè
dšfo
;

181 
cšfo
->
out_cŞÜ_¥aû
) {

182 
JCS_GRAYSCALE
:

184 
	`årštf
(
de¡
->
pub
.
ouut_fe
, "P5\n%ld %ld\n%d\n",

185 (è
cšfo
->
ouut_width
, (ècšfo->
ouut_height
,

186 
PPM_MAXVAL
);

188 
JCS_RGB
:

190 
	`årštf
(
de¡
->
pub
.
ouut_fe
, "P6\n%ld %ld\n%d\n",

191 (è
cšfo
->
ouut_width
, (ècšfo->
ouut_height
,

192 
PPM_MAXVAL
);

195 
	`ERREXIT
(
cšfo
, 
JERR_PPM_COLORSPACE
);

197 
	}
}

204 
	$METHODDEF
()

205 
	$fšish_ouut_µm
 (
j_decom´ess_±r
 
cšfo
, 
dj³g_de¡_±r
 
dšfo
)

208 
	`fæush
(
dšfo
->
ouut_fe
);

209 ià(
	`ã¼Ü
(
dšfo
->
ouut_fe
))

210 
	`ERREXIT
(
cšfo
, 
JERR_FILE_WRITE
);

211 
	}
}

218 
	$GLOBAL
(
dj³g_de¡_±r
)

219 
	$jš™_wr™e_µm
 (
j_decom´ess_±r
 
cšfo
)

221 
µm_de¡_±r
 
de¡
;

224 
de¡
 = (
µm_de¡_±r
)

225 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

226 
	`SIZEOF
(
µm_de¡_¡ruù
));

227 
de¡
->
pub
.
¡¬t_ouut
 = 
¡¬t_ouut_µm
;

228 
de¡
->
pub
.
fšish_ouut
 = 
fšish_ouut_µm
;

231 
	`j³g_ÿlc_ouut_dim’siÚs
(
cšfo
);

234 
de¡
->
§m¶es_³r_row
 = 
cšfo
->
ouut_width
 * cšfo->
out_cŞÜ_compÚ’ts
;

235 
de¡
->
bufãr_width
 = de¡->
§m¶es_³r_row
 * (
BYTESPERSAMPLE
 * 
	`SIZEOF
());

236 
de¡
->
iobufãr
 = (*è(*
cšfo
->
mem
->
®loc_sm®l
)

237 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
, 
de¡
->
bufãr_width
);

239 ià(
cšfo
->
quªtize_cŞÜs
 || 
BITS_IN_JSAMPLE
 != 8 ||

240 
	`SIZEOF
(
JSAMPLE
) != SIZEOF()) {

245 
de¡
->
pub
.
bufãr
 = (*
cšfo
->
mem
->
®loc_§¼ay
)

246 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
,

247 
cšfo
->
ouut_width
 * cšfo->
ouut_compÚ’ts
, (
JDIMENSION
) 1);

248 
de¡
->
pub
.
bufãr_height
 = 1;

249 ià(! 
cšfo
->
quªtize_cŞÜs
)

250 
de¡
->
pub
.
put_pix–_rows
 = 
cİy_pix–_rows
;

251 ià(
cšfo
->
out_cŞÜ_¥aû
 =ğ
JCS_GRAYSCALE
)

252 
de¡
->
pub
.
put_pix–_rows
 = 
put_dem­³d_g¿y
;

254 
de¡
->
pub
.
put_pix–_rows
 = 
put_dem­³d_rgb
;

259 
de¡
->
pixrow
 = (
JSAMPROW
ède¡->
iobufãr
;

260 
de¡
->
pub
.
bufãr
 = & de¡->
pixrow
;

261 
de¡
->
pub
.
bufãr_height
 = 1;

262 
de¡
->
pub
.
put_pix–_rows
 =…ut_pixel_rows;

265  (
dj³g_de¡_±r
è
de¡
;

266 
	}
}

	@wrrle.c

19 
	~"cdj³g.h
"

21 #ifdeà
RLE_SUPPORTED


25 
	~<¾e.h
>

32 #ià
BITS_IN_JSAMPLE
 != 8

33 
	gSÜry
, 
this
 
code
 
Úly
 
cİes
 
	gw™h
 8-
b™
 
	gJSAMPLEs
.

50 
	#CMAPBITS
 8

	)

51 
	#CMAPLENGTH
 (1<<(
CMAPBITS
))

	)

54 
dj³g_de¡_¡ruù
 
	mpub
;

56 
jvœt_§¼ay_±r
 
	mimage
;

57 
¾e_m­
 *
	mcŞÜm­
;

58 
¾e_pix–
 **
	m¾e_row
;

60 } 
	t¾e_de¡_¡ruù
;

62 
¾e_de¡_¡ruù
 * 
	t¾e_de¡_±r
;

65 
	$METHODDEF
(è
¾e_put_pix–_rows


66 
	`JPP
((
j_decom´ess_±r
 
cšfo
, 
dj³g_de¡_±r
 
dšfo
,

67 
JDIMENSION
 
rows_suµl›d
));

76 
	$METHODDEF
()

77 
	$¡¬t_ouut_¾e
 (
j_decom´ess_±r
 
cšfo
, 
dj³g_de¡_±r
 
dšfo
)

79 
¾e_de¡_±r
 
de¡
 = (¾e_de¡_±rè
dšfo
;

80 
size_t
 
cm­size
;

81 
i
, 
ci
;

82 #ifdeà
PROGRESS_REPORT


83 
cd_´og»ss_±r
 
´og»ss
 = (cd_´og»ss_±rè
cšfo
->progress;

99 ià(
cšfo
->
ouut_width
 > 32767 || cšfo->
ouut_height
 > 32767)

100 
	`ERREXIT2
(
cšfo
, 
JERR_RLE_DIMENSIONS
, cšfo->
ouut_width
,

101 
cšfo
->
ouut_height
);

103 ià(
cšfo
->
out_cŞÜ_¥aû
 !ğ
JCS_GRAYSCALE
 &&

104 
cšfo
->
out_cŞÜ_¥aû
 !ğ
JCS_RGB
)

105 
	`ERREXIT
(
cšfo
, 
JERR_RLE_COLORSPACE
);

107 ià(
cšfo
->
ouut_compÚ’ts
 != 1 && cinfo->output_components != 3)

108 
	`ERREXIT1
(
cšfo
, 
JERR_RLE_TOOMANYCHANNELS
, cšfo->
num_compÚ’ts
);

112 
de¡
->
cŞÜm­
 = 
NULL
;

114 ià(
cšfo
->
quªtize_cŞÜs
) {

116 
cm­size
 = 
cšfo
->
out_cŞÜ_compÚ’ts
 * 
CMAPLENGTH
 * 
	`SIZEOF
(
¾e_m­
);

117 
de¡
->
cŞÜm­
 = (
¾e_m­
 *è(*
cšfo
->
mem
->
®loc_sm®l
)

118 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
, 
cm­size
);

119 
	`MEMZERO
(
de¡
->
cŞÜm­
, 
cm­size
);

123 
ci
 = 0; c˜< 
cšfo
->
out_cŞÜ_compÚ’ts
; ci++) {

124 
i
 = 0; i < 
cšfo
->
aùu®_numb”_of_cŞÜs
; i++) {

125 
de¡
->
cŞÜm­
[
ci
 * 
CMAPLENGTH
 + 
i
] =

126 
	`GETJSAMPLE
(
cšfo
->
cŞÜm­
[
ci
][
i
]) << 8;

132 
de¡
->
pub
.
bufãr
 = (*
cšfo
->
mem
->
acûss_vœt_§¼ay
)

133 ((
j_commÚ_±r
è
cšfo
, 
de¡
->
image
, (
JDIMENSION
è0, (JDIMENSIONè1, 
TRUE
);

134 
de¡
->
pub
.
bufãr_height
 = 1;

136 
de¡
->
pub
.
put_pix–_rows
 = 
¾e_put_pix–_rows
;

138 #ifdeà
PROGRESS_REPORT


139 ià(
´og»ss
 !ğ
NULL
) {

140 
´og»ss
->
tÙ®_exŒa_·s£s
++;

143 
	}
}

152 
	$METHODDEF
()

153 
	$¾e_put_pix–_rows
 (
j_decom´ess_±r
 
cšfo
, 
dj³g_de¡_±r
 
dšfo
,

154 
JDIMENSION
 
rows_suµl›d
)

156 
¾e_de¡_±r
 
de¡
 = (¾e_de¡_±rè
dšfo
;

158 ià(
cšfo
->
ouut_sÿÆše
 < cšfo->
ouut_height
) {

159 
de¡
->
pub
.
bufãr
 = (*
cšfo
->
mem
->
acûss_vœt_§¼ay
)

160 ((
j_commÚ_±r
è
cšfo
, 
de¡
->
image
,

161 
cšfo
->
ouut_sÿÆše
, (
JDIMENSION
è1, 
TRUE
);

163 
	}
}

171 
	$METHODDEF
()

172 
	$fšish_ouut_¾e
 (
j_decom´ess_±r
 
cšfo
, 
dj³g_de¡_±r
 
dšfo
)

174 
¾e_de¡_±r
 
de¡
 = (¾e_de¡_±rè
dšfo
;

175 
¾e_hdr
 
h—d”
;

176 
¾e_pix–
 **
¾e_row
, *
»d
, *
g»’
, *
blue
;

177 
JSAMPROW
 
ouut_row
;

178 
cm­comm’t
[80];

179 
row
, 
cŞ
;

180 
ci
;

181 #ifdeà
PROGRESS_REPORT


182 
cd_´og»ss_±r
 
´og»ss
 = (cd_´og»ss_±rè
cšfo
->progress;

186 
h—d”
 = *
	`¾e_hdr_š™
(
NULL
);

187 
h—d”
.
¾e_fe
 = 
de¡
->
pub
.
ouut_fe
;

188 
h—d”
.
xmš
 = 0;

189 
h—d”
.
xmax
 = 
cšfo
->
ouut_width
 - 1;

190 
h—d”
.
ymš
 = 0;

191 
h—d”
.
ymax
 = 
cšfo
->
ouut_height
 - 1;

192 
h—d”
.
®pha
 = 0;

193 
h—d”
.
ncŞÜs
 = 
cšfo
->
ouut_compÚ’ts
;

194 
ci
 = 0; c˜< 
cšfo
->
ouut_compÚ’ts
; ci++) {

195 
	`RLE_SET_BIT
(
h—d”
, 
ci
);

197 ià(
cšfo
->
quªtize_cŞÜs
) {

198 
h—d”
.
ncm­
 = 
cšfo
->
out_cŞÜ_compÚ’ts
;

199 
h—d”
.
cm­Ën
 = 
CMAPBITS
;

200 
h—d”
.
cm­
 = 
de¡
->
cŞÜm­
;

202 
	`¥rštf
(
cm­comm’t
, "cŞÜ_m­_Ëngth=%d", 
cšfo
->
aùu®_numb”_of_cŞÜs
);

203 
	`¾e_putcom
(
cm­comm’t
, &
h—d”
);

207 
	`¾e_put_£tup
(&
h—d”
);

214 #ifdeà
PROGRESS_REPORT


215 ià(
´og»ss
 !ğ
NULL
) {

216 
´og»ss
->
pub
.
·ss_lim™
 = 
cšfo
->
ouut_height
;

217 
´og»ss
->
pub
.
·ss_couÁ”
 = 0;

218 (*
´og»ss
->
pub
.
´og»ss_mÚ™Ü
è((
j_commÚ_±r
è
cšfo
);

222 ià(
cšfo
->
ouut_compÚ’ts
 == 1) {

223 
row
 = 
cšfo
->
ouut_height
-1;„ow >= 0;„ow--) {

224 
¾e_row
 = (
¾e_pix–
 **è(*
cšfo
->
mem
->
acûss_vœt_§¼ay
)

225 ((
j_commÚ_±r
è
cšfo
, 
de¡
->
image
,

226 (
JDIMENSION
è
row
, (JDIMENSIONè1, 
FALSE
);

227 
	`¾e_puŒow
(
¾e_row
, (è
cšfo
->
ouut_width
, &
h—d”
);

228 #ifdeà
PROGRESS_REPORT


229 ià(
´og»ss
 !ğ
NULL
) {

230 
´og»ss
->
pub
.
·ss_couÁ”
++;

231 (*
´og»ss
->
pub
.
´og»ss_mÚ™Ü
è((
j_commÚ_±r
è
cšfo
);

236 
row
 = 
cšfo
->
ouut_height
-1;„ow >= 0;„ow--) {

237 
¾e_row
 = (
¾e_pix–
 **è
de¡
->rle_row;

238 
ouut_row
 = * (*
cšfo
->
mem
->
acûss_vœt_§¼ay
)

239 ((
j_commÚ_±r
è
cšfo
, 
de¡
->
image
,

240 (
JDIMENSION
è
row
, (JDIMENSIONè1, 
FALSE
);

241 
»d
 = 
¾e_row
[0];

242 
g»’
 = 
¾e_row
[1];

243 
blue
 = 
¾e_row
[2];

244 
cŞ
 = 
cšfo
->
ouut_width
; col > 0; col--) {

245 *
»d
++ = 
	`GETJSAMPLE
(*
ouut_row
++);

246 *
g»’
++ = 
	`GETJSAMPLE
(*
ouut_row
++);

247 *
blue
++ = 
	`GETJSAMPLE
(*
ouut_row
++);

249 
	`¾e_puŒow
(
¾e_row
, (è
cšfo
->
ouut_width
, &
h—d”
);

250 #ifdeà
PROGRESS_REPORT


251 ià(
´og»ss
 !ğ
NULL
) {

252 
´og»ss
->
pub
.
·ss_couÁ”
++;

253 (*
´og»ss
->
pub
.
´og»ss_mÚ™Ü
è((
j_commÚ_±r
è
cšfo
);

259 #ifdeà
PROGRESS_REPORT


260 ià(
´og»ss
 !ğ
NULL
)

261 
´og»ss
->
com¶‘ed_exŒa_·s£s
++;

265 
	`¾e_pu‹of
(&
h—d”
);

266 
	`fæush
(
de¡
->
pub
.
ouut_fe
);

267 ià(
	`ã¼Ü
(
de¡
->
pub
.
ouut_fe
))

268 
	`ERREXIT
(
cšfo
, 
JERR_FILE_WRITE
);

269 
	}
}

276 
	$GLOBAL
(
dj³g_de¡_±r
)

277 
	$jš™_wr™e_¾e
 (
j_decom´ess_±r
 
cšfo
)

279 
¾e_de¡_±r
 
de¡
;

282 
de¡
 = (
¾e_de¡_±r
)

283 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

284 
	`SIZEOF
(
¾e_de¡_¡ruù
));

285 
de¡
->
pub
.
¡¬t_ouut
 = 
¡¬t_ouut_¾e
;

286 
de¡
->
pub
.
fšish_ouut
 = 
fšish_ouut_¾e
;

289 
	`j³g_ÿlc_ouut_dim’siÚs
(
cšfo
);

292 
de¡
->
¾e_row
 = (*
cšfo
->
mem
->
®loc_§¼ay
)

293 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
,

294 
cšfo
->
ouut_width
, (
JDIMENSION
ècšfo->
ouut_compÚ’ts
);

297 
de¡
->
image
 = (*
cšfo
->
mem
->
»que¡_vœt_§¼ay
)

298 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
, 
FALSE
,

299 (
JDIMENSION
è(
cšfo
->
ouut_width
 * cšfo->
ouut_compÚ’ts
),

300 
cšfo
->
ouut_height
, (
JDIMENSION
) 1);

302  (
dj³g_de¡_±r
è
de¡
;

303 
	}
}

	@wrtarga.c

17 
	~"cdj³g.h
"

19 #ifdeà
TARGA_SUPPORTED


27 #ià
BITS_IN_JSAMPLE
 != 8

28 
	gSÜry
, 
this
 
code
 
Úly
 
cİes
 
	gw™h
 8-
b™
 
	gJSAMPLEs
.

44 
dj³g_de¡_¡ruù
 
	mpub
;

46 *
	miobufãr
;

47 
JDIMENSION
 
	mbufãr_width
;

48 } 
	ttga_de¡_¡ruù
;

50 
tga_de¡_¡ruù
 * 
	ttga_de¡_±r
;

53 
	$LOCAL
()

54 
	$wr™e_h—d”
 (
j_decom´ess_±r
 
cšfo
, 
dj³g_de¡_±r
 
dšfo
, 
num_cŞÜs
)

57 
rgah—d”
[18];

60 
	`MEMZERO
(
rgah—d”
, 
	`SIZEOF
(targaheader));

62 ià(
num_cŞÜs
 > 0) {

63 
rgah—d”
[1] = 1;

64 
rgah—d”
[5] = (è(
num_cŞÜs
 & 0xFF);

65 
rgah—d”
[6] = (è(
num_cŞÜs
 >> 8);

66 
rgah—d”
[7] = 24;

69 
rgah—d”
[12] = (è(
cšfo
->
ouut_width
 & 0xFF);

70 
rgah—d”
[13] = (è(
cšfo
->
ouut_width
 >> 8);

71 
rgah—d”
[14] = (è(
cšfo
->
ouut_height
 & 0xFF);

72 
rgah—d”
[15] = (è(
cšfo
->
ouut_height
 >> 8);

73 
rgah—d”
[17] = 0x20;

75 ià(
cšfo
->
out_cŞÜ_¥aû
 =ğ
JCS_GRAYSCALE
) {

76 
rgah—d”
[2] = 3;

77 
rgah—d”
[16] = 8;

79 ià(
num_cŞÜs
 > 0) {

80 
rgah—d”
[2] = 1;

81 
rgah—d”
[16] = 8;

83 
rgah—d”
[2] = 2;

84 
rgah—d”
[16] = 24;

88 ià(
	`JFWRITE
(
dšfo
->
ouut_fe
, 
rgah—d”
, 18è!ğ(
size_t
) 18)

89 
	`ERREXIT
(
cšfo
, 
JERR_FILE_WRITE
);

90 
	}
}

98 
	$METHODDEF
()

99 
	$put_pix–_rows
 (
j_decom´ess_±r
 
cšfo
, 
dj³g_de¡_±r
 
dšfo
,

100 
JDIMENSION
 
rows_suµl›d
)

103 
tga_de¡_±r
 
de¡
 = (tga_de¡_±rè
dšfo
;

104 
JSAMPROW
 
š±r
;

105 * 
ouŒ
;

106 
JDIMENSION
 
cŞ
;

108 
š±r
 = 
de¡
->
pub
.
bufãr
[0];

109 
ouŒ
 = 
de¡
->
iobufãr
;

110 
cŞ
 = 
cšfo
->
ouut_width
; col > 0; col--) {

111 
ouŒ
[0] = (è
	`GETJSAMPLE
(
š±r
[2]);

112 
ouŒ
[1] = (è
	`GETJSAMPLE
(
š±r
[1]);

113 
ouŒ
[2] = (è
	`GETJSAMPLE
(
š±r
[0]);

114 
š±r
 +ğ3, 
ouŒ
 += 3;

116 (è
	`JFWRITE
(
de¡
->
pub
.
ouut_fe
, de¡->
iobufãr
, de¡->
bufãr_width
);

117 
	}
}

119 
	$METHODDEF
()

120 
	$put_g¿y_rows
 (
j_decom´ess_±r
 
cšfo
, 
dj³g_de¡_±r
 
dšfo
,

121 
JDIMENSION
 
rows_suµl›d
)

124 
tga_de¡_±r
 
de¡
 = (tga_de¡_±rè
dšfo
;

125 
JSAMPROW
 
š±r
;

126 * 
ouŒ
;

127 
JDIMENSION
 
cŞ
;

129 
š±r
 = 
de¡
->
pub
.
bufãr
[0];

130 
ouŒ
 = 
de¡
->
iobufãr
;

131 
cŞ
 = 
cšfo
->
ouut_width
; col > 0; col--) {

132 *
ouŒ
++ = (è
	`GETJSAMPLE
(*
š±r
++);

134 (è
	`JFWRITE
(
de¡
->
pub
.
ouut_fe
, de¡->
iobufãr
, de¡->
bufãr_width
);

135 
	}
}

143 
	$METHODDEF
()

144 
	$put_dem­³d_g¿y
 (
j_decom´ess_±r
 
cšfo
, 
dj³g_de¡_±r
 
dšfo
,

145 
JDIMENSION
 
rows_suµl›d
)

147 
tga_de¡_±r
 
de¡
 = (tga_de¡_±rè
dšfo
;

148 
JSAMPROW
 
š±r
;

149 * 
ouŒ
;

150 
JSAMPROW
 
cŞÜ_m­0
 = 
cšfo
->
cŞÜm­
[0];

151 
JDIMENSION
 
cŞ
;

153 
š±r
 = 
de¡
->
pub
.
bufãr
[0];

154 
ouŒ
 = 
de¡
->
iobufãr
;

155 
cŞ
 = 
cšfo
->
ouut_width
; col > 0; col--) {

156 *
ouŒ
++ = (è
	`GETJSAMPLE
(
cŞÜ_m­0
[GETJSAMPLE(*
š±r
++)]);

158 (è
	`JFWRITE
(
de¡
->
pub
.
ouut_fe
, de¡->
iobufãr
, de¡->
bufãr_width
);

159 
	}
}

166 
	$METHODDEF
()

167 
	$¡¬t_ouut_tga
 (
j_decom´ess_±r
 
cšfo
, 
dj³g_de¡_±r
 
dšfo
)

169 
tga_de¡_±r
 
de¡
 = (tga_de¡_±rè
dšfo
;

170 
num_cŞÜs
, 
i
;

171 
FILE
 *
outfe
;

173 ià(
cšfo
->
out_cŞÜ_¥aû
 =ğ
JCS_GRAYSCALE
) {

176 
	`wr™e_h—d”
(
cšfo
, 
dšfo
, 0);

177 ià(
cšfo
->
quªtize_cŞÜs
)

178 
de¡
->
pub
.
put_pix–_rows
 = 
put_dem­³d_g¿y
;

180 
de¡
->
pub
.
put_pix–_rows
 = 
put_g¿y_rows
;

181 } ià(
cšfo
->
out_cŞÜ_¥aû
 =ğ
JCS_RGB
) {

182 ià(
cšfo
->
quªtize_cŞÜs
) {

184 
num_cŞÜs
 = 
cšfo
->
aùu®_numb”_of_cŞÜs
;

185 ià(
num_cŞÜs
 > 256)

186 
	`ERREXIT1
(
cšfo
, 
JERR_TOO_MANY_COLORS
, 
num_cŞÜs
);

187 
	`wr™e_h—d”
(
cšfo
, 
dšfo
, 
num_cŞÜs
);

189 
outfe
 = 
de¡
->
pub
.
ouut_fe
;

190 
i
 = 0; i < 
num_cŞÜs
; i++) {

191 
	`putc
(
	`GETJSAMPLE
(
cšfo
->
cŞÜm­
[2][
i
]), 
outfe
);

192 
	`putc
(
	`GETJSAMPLE
(
cšfo
->
cŞÜm­
[1][
i
]), 
outfe
);

193 
	`putc
(
	`GETJSAMPLE
(
cšfo
->
cŞÜm­
[0][
i
]), 
outfe
);

195 
de¡
->
pub
.
put_pix–_rows
 = 
put_g¿y_rows
;

197 
	`wr™e_h—d”
(
cšfo
, 
dšfo
, 0);

198 
de¡
->
pub
.
put_pix–_rows
 =…ut_pixel_rows;

201 
	`ERREXIT
(
cšfo
, 
JERR_TGA_COLORSPACE
);

203 
	}
}

210 
	$METHODDEF
()

211 
	$fšish_ouut_tga
 (
j_decom´ess_±r
 
cšfo
, 
dj³g_de¡_±r
 
dšfo
)

214 
	`fæush
(
dšfo
->
ouut_fe
);

215 ià(
	`ã¼Ü
(
dšfo
->
ouut_fe
))

216 
	`ERREXIT
(
cšfo
, 
JERR_FILE_WRITE
);

217 
	}
}

224 
	$GLOBAL
(
dj³g_de¡_±r
)

225 
	$jš™_wr™e_rga
 (
j_decom´ess_±r
 
cšfo
)

227 
tga_de¡_±r
 
de¡
;

230 
de¡
 = (
tga_de¡_±r
)

231 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

232 
	`SIZEOF
(
tga_de¡_¡ruù
));

233 
de¡
->
pub
.
¡¬t_ouut
 = 
¡¬t_ouut_tga
;

234 
de¡
->
pub
.
fšish_ouut
 = 
fšish_ouut_tga
;

237 
	`j³g_ÿlc_ouut_dim’siÚs
(
cšfo
);

240 
de¡
->
bufãr_width
 = 
cšfo
->
ouut_width
 * cšfo->
ouut_compÚ’ts
;

241 
de¡
->
iobufãr
 = (*)

242 (*
cšfo
->
mem
->
®loc_sm®l
è((
j_commÚ_±r
ècšfo, 
JPOOL_IMAGE
,

243 (
size_t
è(
de¡
->
bufãr_width
 * 
	`SIZEOF
()));

246 
de¡
->
pub
.
bufãr
 = (*
cšfo
->
mem
->
®loc_§¼ay
)

247 ((
j_commÚ_±r
è
cšfo
, 
JPOOL_IMAGE
, 
de¡
->
bufãr_width
, (
JDIMENSION
) 1);

248 
de¡
->
pub
.
bufãr_height
 = 1;

250  (
dj³g_de¡_±r
è
de¡
;

251 
	}
}

	@/usr/include/ctype.h

22 #iâdef 
_CTYPE_H


23 
	#_CTYPE_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	~<b™s/ty³s.h
>

28 
	g__BEGIN_DECLS


30 #iâdeà
_ISb™


39 
	~<’dŸn.h
>

40 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


41 
	#_ISb™
(
b™
è(1 << (b™))

	)

43 
	#_ISb™
(
b™
è((b™è< 8 ? ((1 << (b™)è<< 8è: ((1 << (b™)è>> 8))

	)

48 
	m_ISuµ”
 = 
_ISb™
 (0),

49 
	m_ISlow”
 = 
_ISb™
 (1),

50 
	m_IS®pha
 = 
_ISb™
 (2),

51 
	m_ISdig™
 = 
_ISb™
 (3),

52 
	m_ISxdig™
 = 
_ISb™
 (4),

53 
	m_IS¥aû
 = 
_ISb™
 (5),

54 
	m_IS´št
 = 
_ISb™
 (6),

55 
	m_ISg¿ph
 = 
_ISb™
 (7),

56 
	m_ISbÏnk
 = 
_ISb™
 (8),

57 
	m_ISúŒl
 = 
_ISb™
 (9),

58 
	m_ISpunù
 = 
_ISb™
 (10),

59 
	m_IS®num
 = 
_ISb™
 (11)

79 cÚ¡ **
	$__ùy³_b_loc
 ()

80 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

81 cÚ¡ 
__št32_t
 **
	$__ùy³_tŞow”_loc
 ()

82 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

83 cÚ¡ 
__št32_t
 **
	$__ùy³_touµ”_loc
 ()

84 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

87 #iâdeà
__ılu¥lus


88 
	#__isùy³
(
c
, 
ty³
) \

89 ((*
	`__ùy³_b_loc
 ())[(è(
c
)] & (è
ty³
)

	)

90 #–ià
defšed
 
__USE_EXTERN_INLINES


91 
	#__isùy³_f
(
ty³
) \

92 
__ex‹º_šlše
 \

93 
is
##
	`ty³
 (
__c
è
__THROW
 \

95  (*
	`__ùy³_b_loc
 ())[(è(
__c
)] & (è
_IS
##
ty³
; \

96 
	}

	)
}

99 
	#__i§scii
(
c
è(((cè& ~0x7fè=ğ0è

	)

100 
	#__tßscii
(
c
è((cè& 0x7fè

	)

102 
	#__exùy³
(
Çme
è
	`Çme
 (è
__THROW


	)

104 
__BEGIN_NAMESPACE_STD


110 
__exùy³
 (
i§Êum
);

111 
__exùy³
 (
i§Íha
);

112 
__exùy³
 (
isúŒl
);

113 
__exùy³
 (
isdig™
);

114 
__exùy³
 (
i¦ow”
);

115 
__exùy³
 (
isg¿ph
);

116 
__exùy³
 (
i¥ršt
);

117 
__exùy³
 (
i¥unù
);

118 
__exùy³
 (
is¥aû
);

119 
__exùy³
 (
isuµ”
);

120 
__exùy³
 (
isxdig™
);

124 
	$tŞow”
 (
__c
è
__THROW
;

127 
	$touµ”
 (
__c
è
__THROW
;

129 
__END_NAMESPACE_STD


133 #ifdef 
__USE_ISOC99


134 
__BEGIN_NAMESPACE_C99


136 
	`__exùy³
 (
isbÏnk
);

138 
__END_NAMESPACE_C99


141 #ifdeà
__USE_GNU


143 
	$isùy³
 (
__c
, 
__mask
è
__THROW
;

146 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


150 
	$i§scii
 (
__c
è
__THROW
;

154 
	$tßscii
 (
__c
è
__THROW
;

158 
	`__exùy³
 (
_touµ”
);

159 
	`__exùy³
 (
_tŞow”
);

163 
	#__tobody
(
c
, 
f
, 
a
, 
¬gs
) \

164 (
__ex‹nsiÚ__
 \

165 ({ 
__»s
; \

166 ià( (
c
) > 1) \

168 ià(
	`__butš_cÚ¡ªt_p
 (
c
)) \

170 
__c
 = (
c
); \

171 
__»s
 = 
__c
 < -128 || __ø> 255 ? __ø: (
a
)[__c]; \

174 
__»s
 = 
f
 
¬gs
; \

177 
__»s
 = (
a
)[(è(
c
)]; \

178 
__»s
; 
	}
}))

	)

180 #ià!
defšed
 
__NO_CTYPE


181 #ifdeà
__isùy³_f


182 
	$__isùy³_f
 (
®num
)

183 
	$__isùy³_f
 (
®pha
)

184 
	$__isùy³_f
 (
úŒl
)

185 
	$__isùy³_f
 (
dig™
)

186 
	$__isùy³_f
 (
low”
)

187 
	$__isùy³_f
 (
g¿ph
)

188 
	$__isùy³_f
 (
´št
)

189 
	$__isùy³_f
 (
punù
)

190 
	$__isùy³_f
 (
¥aû
)

191 
	$__isùy³_f
 (
uµ”
)

192 
	$__isùy³_f
 (
xdig™
)

193 #ifdeà
__USE_ISOC99


194 
	$__isùy³_f
 (
bÏnk
)

196 #–ià
defšed
 
__isùy³


197 
	#i§Êum
(
c
è
	`__isùy³
((c), 
_IS®num
)

	)

198 
	#i§Íha
(
c
è
	`__isùy³
((c), 
_IS®pha
)

	)

199 
	#isúŒl
(
c
è
	`__isùy³
((c), 
_ISúŒl
)

	)

200 
	#isdig™
(
c
è
	`__isùy³
((c), 
_ISdig™
)

	)

201 
	#i¦ow”
(
c
è
	`__isùy³
((c), 
_ISlow”
)

	)

202 
	#isg¿ph
(
c
è
	`__isùy³
((c), 
_ISg¿ph
)

	)

203 
	#i¥ršt
(
c
è
	`__isùy³
((c), 
_IS´št
)

	)

204 
	#i¥unù
(
c
è
	`__isùy³
((c), 
_ISpunù
)

	)

205 
	#is¥aû
(
c
è
	`__isùy³
((c), 
_IS¥aû
)

	)

206 
	#isuµ”
(
c
è
	`__isùy³
((c), 
_ISuµ”
)

	)

207 
	#isxdig™
(
c
è
	`__isùy³
((c), 
_ISxdig™
)

	)

208 #ifdeà
__USE_ISOC99


209 
	#isbÏnk
(
c
è
	`__isùy³
((c), 
_ISbÏnk
)

	)

213 #ifdeà
__USE_EXTERN_INLINES


214 
__ex‹º_šlše
 

215 
	`__NTH
 (
	$tŞow”
 (
__c
))

217  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_tŞow”_loc
 ())[__c] : __c;

218 
	}
}

220 
__ex‹º_šlše
 

221 
__NTH
 (
	$touµ”
 (
__c
))

223  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_touµ”_loc
 ())[__c] : __c;

224 
	}
}

227 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


228 
	#tŞow”
(
c
è
	`__tobody
 (c, 
tŞow”
, *
	`__ùy³_tŞow”_loc
 (), (c))

	)

229 
	#touµ”
(
c
è
	`__tobody
 (c, 
touµ”
, *
	`__ùy³_touµ”_loc
 (), (c))

	)

232 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


233 
	#i§scii
(
c
è
	`__i§scii
 (c)

	)

234 
	#tßscii
(
c
è
	`__tßscii
 (c)

	)

236 
	#_tŞow”
(
c
è((è(*
	`__ùy³_tŞow”_loc
 ())[(è(c)])

	)

237 
	#_touµ”
(
c
è((è(*
	`__ùy³_touµ”_loc
 ())[(è(c)])

	)

243 #ifdeà
__USE_XOPEN2K8


257 
	~<xloÿË.h
>

261 
	#__isùy³_l
(
c
, 
ty³
, 
loÿË
) \

262 ((
loÿË
)->
__ùy³_b
[(è(
c
)] & (è
ty³
)

	)

264 
	#__exùy³_l
(
Çme
) \

265 
	`Çme
 (, 
__loÿË_t
è
__THROW


	)

271 
__exùy³_l
 (
i§Êum_l
);

272 
__exùy³_l
 (
i§Íha_l
);

273 
__exùy³_l
 (
isúŒl_l
);

274 
__exùy³_l
 (
isdig™_l
);

275 
__exùy³_l
 (
i¦ow”_l
);

276 
__exùy³_l
 (
isg¿ph_l
);

277 
__exùy³_l
 (
i¥ršt_l
);

278 
__exùy³_l
 (
i¥unù_l
);

279 
__exùy³_l
 (
is¥aû_l
);

280 
__exùy³_l
 (
isuµ”_l
);

281 
__exùy³_l
 (
isxdig™_l
);

283 
__exùy³_l
 (
isbÏnk_l
);

287 
	$__tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

288 
	$tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

291 
	$__touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

292 
	$touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

294 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


295 
	#__tŞow”_l
(
c
, 
loÿË
) \

296 
	`__tobody
 (
c
, 
__tŞow”_l
, (
loÿË
)->
__ùy³_tŞow”
, (c,†oÿË))

	)

297 
	#__touµ”_l
(
c
, 
loÿË
) \

298 
	`__tobody
 (
c
, 
__touµ”_l
, (
loÿË
)->
__ùy³_touµ”
, (c,†oÿË))

	)

299 
	#tŞow”_l
(
c
, 
loÿË
è
	`__tŞow”_l
 ((c), (loÿË))

	)

300 
	#touµ”_l
(
c
, 
loÿË
è
	`__touµ”_l
 ((c), (loÿË))

	)

304 #iâdeà
__NO_CTYPE


305 
	#__i§Êum_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®num
, (l))

	)

306 
	#__i§Íha_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®pha
, (l))

	)

307 
	#__isúŒl_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISúŒl
, (l))

	)

308 
	#__isdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISdig™
, (l))

	)

309 
	#__i¦ow”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISlow”
, (l))

	)

310 
	#__isg¿ph_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISg¿ph
, (l))

	)

311 
	#__i¥ršt_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS´št
, (l))

	)

312 
	#__i¥unù_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISpunù
, (l))

	)

313 
	#__is¥aû_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS¥aû
, (l))

	)

314 
	#__isuµ”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISuµ”
, (l))

	)

315 
	#__isxdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISxdig™
, (l))

	)

317 
	#__isbÏnk_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISbÏnk
, (l))

	)

319 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC


320 
	#__i§scii_l
(
c
,
l
è(Ö), 
	`__i§scii
 (c))

	)

321 
	#__tßscii_l
(
c
,
l
è(Ö), 
	`__tßscii
 (c))

	)

324 
	#i§Êum_l
(
c
,
l
è
	`__i§Êum_l
 ((c), (l))

	)

325 
	#i§Íha_l
(
c
,
l
è
	`__i§Íha_l
 ((c), (l))

	)

326 
	#isúŒl_l
(
c
,
l
è
	`__isúŒl_l
 ((c), (l))

	)

327 
	#isdig™_l
(
c
,
l
è
	`__isdig™_l
 ((c), (l))

	)

328 
	#i¦ow”_l
(
c
,
l
è
	`__i¦ow”_l
 ((c), (l))

	)

329 
	#isg¿ph_l
(
c
,
l
è
	`__isg¿ph_l
 ((c), (l))

	)

330 
	#i¥ršt_l
(
c
,
l
è
	`__i¥ršt_l
 ((c), (l))

	)

331 
	#i¥unù_l
(
c
,
l
è
	`__i¥unù_l
 ((c), (l))

	)

332 
	#is¥aû_l
(
c
,
l
è
	`__is¥aû_l
 ((c), (l))

	)

333 
	#isuµ”_l
(
c
,
l
è
	`__isuµ”_l
 ((c), (l))

	)

334 
	#isxdig™_l
(
c
,
l
è
	`__isxdig™_l
 ((c), (l))

	)

336 
	#isbÏnk_l
(
c
,
l
è
	`__isbÏnk_l
 ((c), (l))

	)

338 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC


339 
	#i§scii_l
(
c
,
l
è
	`__i§scii_l
 ((c), (l))

	)

340 
	#tßscii_l
(
c
,
l
è
	`__tßscii_l
 ((c), (l))

	)

347 
__END_DECLS


	@/usr/include/errno.h

22 #iâdef 
_ERRNO_H


26 #iâdef 
__Ãed_Em©h


27 
	#_ERRNO_H
 1

	)

28 
	~<ã©u»s.h
>

31 
	g__BEGIN_DECLS


35 
	~<b™s/”ºo.h
>

36 #undeà
__Ãed_Em©h


38 #ifdef 
_ERRNO_H


45 #iâdef 
”ºo


46 
”ºo
;

49 #ifdeà
__USE_GNU


54 *
´og¿m_švoÿtiÚ_Çme
, *
´og¿m_švoÿtiÚ_shÜt_Çme
;

58 
	g__END_DECLS


66 #ià
defšed
 
__USE_GNU
 || defšed 
__Ãed_”rÜ_t


67 #iâdeà
__”rÜ_t_defšed


68 
	t”rÜ_t
;

69 
	#__”rÜ_t_defšed
 1

	)

71 #undeà
__Ãed_”rÜ_t


	@/usr/include/fcntl.h

22 #iâdef 
_FCNTL_H


23 
	#_FCNTL_H
 1

	)

25 
	~<ã©u»s.h
>

28 
	g__BEGIN_DECLS


31 
	~<b™s/ty³s.h
>

35 
	~<b™s/fú.h
>

39 #ifdeà
__O_TMPFILE


40 
	#__OPEN_NEEDS_MODE
(
oæag
) \

41 (((
oæag
è& 
O_CREAT
è!ğ0 || ((oæagè& 
__O_TMPFILE
è=ğ__O_TMPFILE)

	)

43 
	#__OPEN_NEEDS_MODE
(
oæag
è(((oæagè& 
O_CREAT
è!ğ0)

	)

49 #iâdeà
__mode_t_defšed


50 
__mode_t
 
	tmode_t
;

51 
	#__mode_t_defšed


	)

54 #iâdeà
__off_t_defšed


55 #iâdeà
__USE_FILE_OFFSET64


56 
__off_t
 
	toff_t
;

58 
__off64_t
 
	toff_t
;

60 
	#__off_t_defšed


	)

63 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


64 
__off64_t
 
	toff64_t
;

65 
	#__off64_t_defšed


	)

68 #iâdeà
__pid_t_defšed


69 
__pid_t
 
	tpid_t
;

70 
	#__pid_t_defšed


	)

74 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


75 
	#__Ãed_time¥ec


	)

76 
	~<time.h
>

77 
	~<b™s/¡©.h
>

79 
	#S_IFMT
 
__S_IFMT


	)

80 
	#S_IFDIR
 
__S_IFDIR


	)

81 
	#S_IFCHR
 
__S_IFCHR


	)

82 
	#S_IFBLK
 
__S_IFBLK


	)

83 
	#S_IFREG
 
__S_IFREG


	)

84 #ifdeà
__S_IFIFO


85 
	#S_IFIFO
 
__S_IFIFO


	)

87 #ifdeà
__S_IFLNK


88 
	#S_IFLNK
 
__S_IFLNK


	)

90 #ià(
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8
è&& defšed 
__S_IFSOCK


91 
	#S_IFSOCK
 
__S_IFSOCK


	)

96 
	#S_ISUID
 
__S_ISUID


	)

97 
	#S_ISGID
 
__S_ISGID


	)

99 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


101 
	#S_ISVTX
 
__S_ISVTX


	)

104 
	#S_IRUSR
 
__S_IREAD


	)

105 
	#S_IWUSR
 
__S_IWRITE


	)

106 
	#S_IXUSR
 
__S_IEXEC


	)

108 
	#S_IRWXU
 (
__S_IREAD
|
__S_IWRITE
|
__S_IEXEC
)

	)

110 
	#S_IRGRP
 (
S_IRUSR
 >> 3è

	)

111 
	#S_IWGRP
 (
S_IWUSR
 >> 3è

	)

112 
	#S_IXGRP
 (
S_IXUSR
 >> 3è

	)

114 
	#S_IRWXG
 (
S_IRWXU
 >> 3)

	)

116 
	#S_IROTH
 (
S_IRGRP
 >> 3è

	)

117 
	#S_IWOTH
 (
S_IWGRP
 >> 3è

	)

118 
	#S_IXOTH
 (
S_IXGRP
 >> 3è

	)

120 
	#S_IRWXO
 (
S_IRWXG
 >> 3)

	)

123 #ifdef 
__USE_MISC


124 #iâdeà
R_OK


127 
	#R_OK
 4

	)

128 
	#W_OK
 2

	)

129 
	#X_OK
 1

	)

130 
	#F_OK
 0

	)

135 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


136 
	#SEEK_SET
 0

	)

137 
	#SEEK_CUR
 1

	)

138 
	#SEEK_END
 2

	)

146 
fú
 (
__fd
, 
__cmd
, ...);

155 #iâdeà
__USE_FILE_OFFSET64


156 
	$İ’
 (cÚ¡ *
__fe
, 
__oæag
, ...è
	`__nÚnuÎ
 ((1));

158 #ifdeà
__REDIRECT


159 
	`__REDIRECT
 (
İ’
, (cÚ¡ *
__fe
, 
__oæag
, ...), 
İ’64
)

160 
	`__nÚnuÎ
 ((1));

162 
	#İ’
 
İ’64


	)

165 #ifdeà
__USE_LARGEFILE64


166 
	$İ’64
 (cÚ¡ *
__fe
, 
__oæag
, ...è
	`__nÚnuÎ
 ((1));

169 #ifdeà
__USE_ATFILE


179 #iâdeà
__USE_FILE_OFFSET64


180 
	$İ’©
 (
__fd
, cÚ¡ *
__fe
, 
__oæag
, ...)

181 
	`__nÚnuÎ
 ((2));

183 #ifdeà
__REDIRECT


184 
	`__REDIRECT
 (
İ’©
, (
__fd
, cÚ¡ *
__fe
, 
__oæag
,

185 ...), 
İ’©64
è
	`__nÚnuÎ
 ((2));

187 
	#İ’©
 
İ’©64


	)

190 #ifdeà
__USE_LARGEFILE64


191 
	$İ’©64
 (
__fd
, cÚ¡ *
__fe
, 
__oæag
, ...)

192 
	`__nÚnuÎ
 ((2));

201 #iâdeà
__USE_FILE_OFFSET64


202 
	$ü—t
 (cÚ¡ *
__fe
, 
mode_t
 
__mode
è
	`__nÚnuÎ
 ((1));

204 #ifdeà
__REDIRECT


205 
	`__REDIRECT
 (
ü—t
, (cÚ¡ *
__fe
, 
mode_t
 
__mode
),

206 
ü—t64
è
	`__nÚnuÎ
 ((1));

208 
	#ü—t
 
ü—t64


	)

211 #ifdeà
__USE_LARGEFILE64


212 
	$ü—t64
 (cÚ¡ *
__fe
, 
mode_t
 
__mode
è
	`__nÚnuÎ
 ((1));

215 #ià!
defšed
 
F_LOCK
 && (defšed 
__USE_MISC
 || (defšed 
__USE_XOPEN_EXTENDED
 \

216 && !
defšed
 
__USE_POSIX
))

225 
	#F_ULOCK
 0

	)

226 
	#F_LOCK
 1

	)

227 
	#F_TLOCK
 2

	)

228 
	#F_TEST
 3

	)

230 #iâdeà
__USE_FILE_OFFSET64


231 
	`lockf
 (
__fd
, 
__cmd
, 
off_t
 
__Ën
);

233 #ifdeà
__REDIRECT


234 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
), 
lockf64
);

236 
	#lockf
 
lockf64


	)

239 #ifdeà
__USE_LARGEFILE64


240 
	`lockf64
 (
__fd
, 
__cmd
, 
off64_t
 
__Ën
);

244 #ifdeà
__USE_XOPEN2K


247 #iâdeà
__USE_FILE_OFFSET64


248 
	$posix_çdvi£
 (
__fd
, 
off_t
 
__off£t
, off_ˆ
__Ën
,

249 
__advi£
è
__THROW
;

251 #ifdeà
__REDIRECT_NTH


252 
	`__REDIRECT_NTH
 (
posix_çdvi£
, (
__fd
, 
__off64_t
 
__off£t
,

253 
__off64_t
 
__Ën
, 
__advi£
),

254 
posix_çdvi£64
);

256 
	#posix_çdvi£
 
posix_çdvi£64


	)

259 #ifdeà
__USE_LARGEFILE64


260 
	$posix_çdvi£64
 (
__fd
, 
off64_t
 
__off£t
, off64_ˆ
__Ën
,

261 
__advi£
è
__THROW
;

269 #iâdeà
__USE_FILE_OFFSET64


270 
	`posix_çÎoÿ‹
 (
__fd
, 
off_t
 
__off£t
, off_ˆ
__Ën
);

272 #ifdeà
__REDIRECT


273 
	`__REDIRECT
 (
posix_çÎoÿ‹
, (
__fd
, 
__off64_t
 
__off£t
,

274 
__off64_t
 
__Ën
),

275 
posix_çÎoÿ‹64
);

277 
	#posix_çÎoÿ‹
 
posix_çÎoÿ‹64


	)

280 #ifdeà
__USE_LARGEFILE64


281 
	`posix_çÎoÿ‹64
 (
__fd
, 
off64_t
 
__off£t
, off64_ˆ
__Ën
);

287 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ
 \

288 && 
defšed
 
__va_¬g_·ck_Ën


289 
	~<b™s/fú2.h
>

292 
__END_DECLS


	@/usr/include/malloc.h

19 #iâdeà
_MALLOC_H


20 
	#_MALLOC_H
 1

	)

22 
	~<ã©u»s.h
>

23 
	~<¡ddef.h
>

24 
	~<¡dio.h
>

26 #ifdeà
_LIBC


27 
	#__MALLOC_HOOK_VOLATILE


	)

28 
	#__MALLOC_DEPRECATED


	)

30 
	#__MALLOC_HOOK_VOLATILE
 vŞ©e

	)

31 
	#__MALLOC_DEPRECATED
 
__©Œibu‹_d•»ÿ‹d__


	)

35 
__BEGIN_DECLS


38 *
	$m®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

41 *
	$ÿÎoc
 (
size_t
 
__nmemb
, size_ˆ
__size
)

42 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

49 *
	$»®loc
 (*
__±r
, 
size_t
 
__size
)

50 
__THROW
 
__©Œibu‹_w¬n_unu£d_»suÉ__
;

53 
	$ä“
 (*
__±r
è
__THROW
;

56 
	$cä“
 (*
__±r
è
__THROW
;

59 *
	$mem®ign
 (
size_t
 
__®ignm’t
, size_ˆ
__size
)

60 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

63 *
	$v®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

67 *
	$pv®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

71 *(*
__mÜecÜe
è(
±rdiff_t
 
__size
);

74 *
	$__deçuÉ_mÜecÜe
 (
±rdiff_t
 
__size
)

75 
__THROW
 
__©Œibu‹_m®loc__
;

79 
	sm®lšfo


81 
¬’a
;

82 
Üdblks
;

83 
smblks
;

84 
hblks
;

85 
hblkhd
;

86 
usmblks
;

87 
fsmblks
;

88 
uÜdblks
;

89 
fÜdblks
;

90 
k“pco¡
;

94 
m®lšfo
 
	$m®lšfo
 (è
__THROW
;

97 #iâdeà
M_MXFAST


98 
	#M_MXFAST
 1

	)

100 #iâdeà
M_NLBLKS


101 
	#M_NLBLKS
 2

	)

103 #iâdeà
M_GRAIN


104 
	#M_GRAIN
 3

	)

106 #iâdeà
M_KEEP


107 
	#M_KEEP
 4

	)

111 
	#M_TRIM_THRESHOLD
 -1

	)

112 
	#M_TOP_PAD
 -2

	)

113 
	#M_MMAP_THRESHOLD
 -3

	)

114 
	#M_MMAP_MAX
 -4

	)

115 
	#M_CHECK_ACTION
 -5

	)

116 
	#M_PERTURB
 -6

	)

117 
	#M_ARENA_TEST
 -7

	)

118 
	#M_ARENA_MAX
 -8

	)

121 
	$m®lİt
 (
__·¿m
, 
__v®
è
__THROW
;

125 
	$m®loc_Œim
 (
size_t
 
__·d
è
__THROW
;

129 
size_t
 
	$m®loc_u§bË_size
 (*
__±r
è
__THROW
;

132 
	$m®loc_¡©s
 (è
__THROW
;

135 
	$m®loc_šfo
 (
__İtiÚs
, 
FILE
 *
__å
è
__THROW
;

138 *
	$m®loc_g‘_¡©e
 (è
__THROW
;

142 
	$m®loc_£t_¡©e
 (*
__±r
è
__THROW
;

147 (*
__MALLOC_HOOK_VOLATILE
 
__m®loc_š™Ÿlize_hook
) ()

148 
__MALLOC_DEPRECATED
;

150 (*
__MALLOC_HOOK_VOLATILE
 
__ä“_hook
è(*
__±r
,

152 
__MALLOC_DEPRECATED
;

153 *(*
__MALLOC_HOOK_VOLATILE
 
__m®loc_hook
)(
size_t
 
__size
,

155 
__MALLOC_DEPRECATED
;

156 *(*
__MALLOC_HOOK_VOLATILE
 
__»®loc_hook
)(*
__±r
,

157 
size_t
 
__size
,

159 
__MALLOC_DEPRECATED
;

160 *(*
__MALLOC_HOOK_VOLATILE
 
__mem®ign_hook
)(
size_t
 
__®ignm’t
,

161 
size_t
 
__size
,

163 
__MALLOC_DEPRECATED
;

164 (*
__MALLOC_HOOK_VOLATILE
 
__aá”_mÜecÜe_hook
) ();

167 
	$__m®loc_check_š™
 (è
__THROW
 
__MALLOC_DEPRECATED
;

170 
__END_DECLS


	@/usr/include/setjmp.h

22 #iâdef 
_SETJMP_H


23 
	#_SETJMP_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


29 
	~<b™s/£tjmp.h
>

30 
	~<b™s/sig£t.h
>

34 
	s__jmp_buf_g


40 
__jmp_buf
 
	m__jmpbuf
;

41 
	m__mask_was_§ved
;

42 
__sig£t_t
 
	m__§ved_mask
;

46 
__BEGIN_NAMESPACE_STD


48 
__jmp_buf_g
 
	tjmp_buf
[1];

52 
	$£tjmp
 (
jmp_buf
 
__’v
è
__THROWNL
;

54 
__END_NAMESPACE_STD


59 
	$__sig£tjmp
 (
__jmp_buf_g
 
__’v
[1], 
__§vemask
è
__THROWNL
;

63 
	$_£tjmp
 (
__jmp_buf_g
 
__’v
[1]è
__THROWNL
;

67 
	#£tjmp
(
’v
è
	`_£tjmp
 (’v)

	)

70 
__BEGIN_NAMESPACE_STD


74 
	$lÚgjmp
 (
__jmp_buf_g
 
__’v
[1], 
__v®
)

75 
__THROWNL
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

77 
__END_NAMESPACE_STD


79 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN


83 
	$_lÚgjmp
 (
__jmp_buf_g
 
__’v
[1], 
__v®
)

84 
__THROWNL
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

88 #ifdef 
__USE_POSIX


92 
__jmp_buf_g
 
	tsigjmp_buf
[1];

96 
	#sig£tjmp
(
’v
, 
§vemask
è
	`__sig£tjmp
 (’v, savemask)

	)

102 
	$siglÚgjmp
 (
sigjmp_buf
 
__’v
, 
__v®
)

103 
__THROWNL
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

108 #ià
__USE_FORTIFY_LEVEL
 > 0

109 
	~<b™s/£tjmp2.h
>

112 
__END_DECLS


	@/usr/include/signal.h

22 #iâdef 
_SIGNAL_H


24 #ià!
defšed
 
__Ãed_sig_©omic_t
 && !defšed 
__Ãed_sig£t_t


25 
	#_SIGNAL_H


	)

28 
	~<ã©u»s.h
>

30 
	g__BEGIN_DECLS


32 
	~<b™s/sig£t.h
>

36 #ià
defšed
 
__Ãed_sig_©omic_t
 || defšed 
_SIGNAL_H


37 #iâdeà
__sig_©omic_t_defšed


38 
	#__sig_©omic_t_defšed


	)

39 
__BEGIN_NAMESPACE_STD


40 
__sig_©omic_t
 
	tsig_©omic_t
;

41 
	g__END_NAMESPACE_STD


43 #undeà
__Ãed_sig_©omic_t


46 #ià
defšed
 
__Ãed_sig£t_t
 || (defšed 
_SIGNAL_H
 && defšed 
__USE_POSIX
)

47 #iâdeà
__sig£t_t_defšed


48 
	#__sig£t_t_defšed


	)

49 
__sig£t_t
 
	tsig£t_t
;

51 #undeà
__Ãed_sig£t_t


54 #ifdeà
_SIGNAL_H


56 
	~<b™s/ty³s.h
>

57 
	~<b™s/signum.h
>

59 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


60 #iâdeà
__pid_t_defšed


61 
__pid_t
 
	tpid_t
;

62 
	#__pid_t_defšed


	)

64 #ifdeà
__USE_XOPEN


66 #iâdeà
__uid_t_defšed


67 
__uid_t
 
	tuid_t
;

68 
	#__uid_t_defšed


	)

72 #ifdeà
__USE_POSIX199309


74 
	#__Ãed_time¥ec


	)

75 
	~<time.h
>

78 #ià
defšed
 
__USE_POSIX199309
 || defšed 
__USE_XOPEN_EXTENDED


80 
	~<b™s/sigšfo.h
>

85 (*
	t__sighªdËr_t
) ();

90 
__sighªdËr_t
 
	$__sysv_sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

91 
__THROW
;

92 #ifdeà
__USE_GNU


93 
__sighªdËr_t
 
	$sysv_sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

94 
__THROW
;

100 
__BEGIN_NAMESPACE_STD


101 #ifdeà
__USE_BSD


102 
__sighªdËr_t
 
	$sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

103 
__THROW
;

106 #ifdeà
__REDIRECT_NTH


107 
__sighªdËr_t
 
	`__REDIRECT_NTH
 (
sigÇl
,

108 (
__sig
, 
__sighªdËr_t
 
__hªdËr
),

109 
__sysv_sigÇl
);

111 
	#sigÇl
 
__sysv_sigÇl


	)

114 
__END_NAMESPACE_STD


116 #ifdeà
__USE_XOPEN


119 
__sighªdËr_t
 
	$bsd_sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

120 
__THROW
;

126 #ifdeà
__USE_POSIX


127 
	$kl
 (
__pid_t
 
__pid
, 
__sig
è
__THROW
;

130 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


134 
	$kÍg
 (
__pid_t
 
__pg½
, 
__sig
è
__THROW
;

137 
__BEGIN_NAMESPACE_STD


139 
	$¿i£
 (
__sig
è
__THROW
;

140 
__END_NAMESPACE_STD


142 #ifdeà
__USE_SVID


144 
__sighªdËr_t
 
	$ssigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

145 
__THROW
;

146 
	$gsigÇl
 (
__sig
è
__THROW
;

149 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN2K


151 
	`psigÇl
 (
__sig
, cÚ¡ *
__s
);

154 #ifdeà
__USE_XOPEN2K


156 
	`psigšfo
 (cÚ¡ 
sigšfo_t
 *
__pšfo
, cÚ¡ *
__s
);

167 
	`__sig·u£
 (
__sig_Ü_mask
, 
__is_sig
);

169 #ifdeà
__USE_XOPEN


170 #ifdeà
__GNUC__


171 
	$sig·u£
 (
__sig
è
	`__asm__
 ("__xpg_sigpause");

174 
	#sig·u£
(
sig
è
	`__sig·u£
 ((sig), 1)

	)

179 #ifdeà
__USE_BSD


186 
	#sigmask
(
sig
è
	`__sigmask
(sig)

	)

189 
	$sigblock
 (
__mask
è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

192 
	$sig£tmask
 (
__mask
è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

195 
	$sigg‘mask
 (è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

199 #ifdeà
__USE_MISC


200 
	#NSIG
 
_NSIG


	)

203 #ifdeà
__USE_GNU


204 
__sighªdËr_t
 
	tsighªdËr_t
;

208 #ifdeà
__USE_BSD


209 
__sighªdËr_t
 
	tsig_t
;

212 #ifdeà
__USE_POSIX


215 
	$sigem±y£t
 (
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

218 
	$sigfl£t
 (
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

221 
	$sigadd£t
 (
sig£t_t
 *
__£t
, 
__signo
è
__THROW
 
	`__nÚnuÎ
 ((1));

224 
	$sigd–£t
 (
sig£t_t
 *
__£t
, 
__signo
è
__THROW
 
	`__nÚnuÎ
 ((1));

227 
	$sigismemb”
 (cÚ¡ 
sig£t_t
 *
__£t
, 
__signo
)

228 
__THROW
 
	`__nÚnuÎ
 ((1));

230 #ifdeà
__USE_GNU


232 
	$sigi£m±y£t
 (cÚ¡ 
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

235 
	$sigªd£t
 (
sig£t_t
 *
__£t
, cÚ¡ sig£t_ˆ*
__Ëá
,

236 cÚ¡ 
sig£t_t
 *
__right
è
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3));

239 
	$sigÜ£t
 (
sig£t_t
 *
__£t
, cÚ¡ sig£t_ˆ*
__Ëá
,

240 cÚ¡ 
sig£t_t
 *
__right
è
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3));

245 
	~<b™s/sigaùiÚ.h
>

248 
	$sig´ocmask
 (
__how
, cÚ¡ 
sig£t_t
 *
__»¡riù
 
__£t
,

249 
sig£t_t
 *
__»¡riù
 
__o£t
è
__THROW
;

256 
	$sigsu¥’d
 (cÚ¡ 
sig£t_t
 *
__£t
è
	`__nÚnuÎ
 ((1));

259 
	$sigaùiÚ
 (
__sig
, cÚ¡ 
sigaùiÚ
 *
__»¡riù
 
__aù
,

260 
sigaùiÚ
 *
__»¡riù
 
__ßù
è
__THROW
;

263 
	$sig³ndšg
 (
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

270 
	$sigwa™
 (cÚ¡ 
sig£t_t
 *
__»¡riù
 
__£t
, *__»¡riù 
__sig
)

271 
	`__nÚnuÎ
 ((1, 2));

273 #ifdeà
__USE_POSIX199309


278 
	$sigwa™šfo
 (cÚ¡ 
sig£t_t
 *
__»¡riù
 
__£t
,

279 
sigšfo_t
 *
__»¡riù
 
__šfo
è
	`__nÚnuÎ
 ((1));

286 
	$sigtimedwa™
 (cÚ¡ 
sig£t_t
 *
__»¡riù
 
__£t
,

287 
sigšfo_t
 *
__»¡riù
 
__šfo
,

288 cÚ¡ 
time¥ec
 *
__»¡riù
 
__timeout
)

289 
	`__nÚnuÎ
 ((1));

293 
	$sigqueue
 (
__pid_t
 
__pid
, 
__sig
, cÚ¡ 
sigv®
 
__v®
)

294 
__THROW
;

299 #ifdeà
__USE_BSD


303 cÚ¡ *cÚ¡ 
_sys_sigli¡
[
_NSIG
];

304 cÚ¡ *cÚ¡ 
sys_sigli¡
[
_NSIG
];

307 
	ssigvec


309 
__sighªdËr_t
 
sv_hªdËr
;

310 
sv_mask
;

312 
sv_æags
;

313 
	#sv_Ú¡ack
 
sv_æags


	)

317 
	#SV_ONSTACK
 (1 << 0)

	)

318 
	#SV_INTERRUPT
 (1 << 1)

	)

319 
	#SV_RESETHAND
 (1 << 2)

	)

327 
	$sigvec
 (
__sig
, cÚ¡ 
sigvec
 *
__vec
,

328 
sigvec
 *
__ovec
è
__THROW
;

332 
	~<b™s/sigcÚ‹xt.h
>

335 
	$sig»tuº
 (
sigcÚ‹xt
 *
__sı
è
__THROW
;

340 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


341 
	#__Ãed_size_t


	)

342 
	~<¡ddef.h
>

347 
	$sigš‹¼u±
 (
__sig
, 
__š‹¼u±
è
__THROW
;

349 
	~<b™s/sig¡ack.h
>

350 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


352 
	~<sys/ucÚ‹xt.h
>

358 
	$sig¡ack
 (
sig¡ack
 *
__ss
, sig¡ack *
__oss
)

359 
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

363 
	$sig®t¡ack
 (cÚ¡ 
sig®t¡ack
 *
__»¡riù
 
__ss
,

364 
sig®t¡ack
 *
__»¡riù
 
__oss
è
__THROW
;

368 #ifdeà
__USE_XOPEN_EXTENDED


372 
	$sighŞd
 (
__sig
è
__THROW
;

375 
	$sig»l£
 (
__sig
è
__THROW
;

378 
	$sigignÜe
 (
__sig
è
__THROW
;

381 
__sighªdËr_t
 
	$sig£t
 (
__sig
, 
__sighªdËr_t
 
__di¥
è
__THROW
;

384 #ià
defšed
 
__USE_POSIX199506
 || defšed 
__USE_UNIX98


387 
	~<b™s/±h»adty³s.h
>

388 
	~<b™s/sigth»ad.h
>

395 
	$__libc_cu¼’t_sig¹mš
 (è
__THROW
;

397 
	$__libc_cu¼’t_sig¹max
 (è
__THROW
;

401 
__END_DECLS


	@/usr/include/stdio.h

23 #iâdeà
_STDIO_H


25 #ià!
defšed
 
__Ãed_FILE
 && !defšed 
__Ãed___FILE


26 
	#_STDIO_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


31 
	#__Ãed_size_t


	)

32 
	#__Ãed_NULL


	)

33 
	~<¡ddef.h
>

35 
	~<b™s/ty³s.h
>

36 
	#__Ãed_FILE


	)

37 
	#__Ãed___FILE


	)

41 #ià!
defšed
 
__FILE_defšed
 && defšed 
__Ãed_FILE


44 
	g_IO_FILE
;

46 
__BEGIN_NAMESPACE_STD


48 
_IO_FILE
 
	tFILE
;

49 
	g__END_NAMESPACE_STD


50 #ià
defšed
 
__USE_LARGEFILE64
 || defšed 
__USE_SVID
 || defšed 
__USE_POSIX
 \

51 || 
defšed
 
	g__USE_BSD
 || defšed 
	g__USE_ISOC99
 || defšed 
	g__USE_XOPEN
 \

52 || 
defšed
 
__USE_POSIX2


53 
	$__USING_NAMESPACE_STD
(
FILE
)

56 
	#__FILE_defšed
 1

	)

58 #undeà
__Ãed_FILE


61 #ià!
defšed
 
____FILE_defšed
 && defšed 
__Ãed___FILE


64 
_IO_FILE
 
	t__FILE
;

66 
	#____FILE_defšed
 1

	)

68 #undeà
__Ãed___FILE


71 #ifdef 
_STDIO_H


72 
	#_STDIO_USES_IOSTREAM


	)

74 
	~<libio.h
>

76 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


77 #ifdeà
__GNUC__


78 #iâdeà
_VA_LIST_DEFINED


79 
_G_va_li¡
 
	tva_li¡
;

80 
	#_VA_LIST_DEFINED


	)

83 
	~<¡d¬g.h
>

87 #ifdeà
__USE_XOPEN2K8


88 #iâdeà
__off_t_defšed


89 #iâdeà
__USE_FILE_OFFSET64


90 
__off_t
 
	toff_t
;

92 
__off64_t
 
	toff_t
;

94 
	#__off_t_defšed


	)

96 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


97 
__off64_t
 
	toff64_t
;

98 
	#__off64_t_defšed


	)

101 #iâdeà
__ssize_t_defšed


102 
__ssize_t
 
	tssize_t
;

103 
	#__ssize_t_defšed


	)

108 
__BEGIN_NAMESPACE_STD


109 #iâdeà
__USE_FILE_OFFSET64


110 
_G_åos_t
 
	tåos_t
;

112 
_G_åos64_t
 
	tåos_t
;

114 
__END_NAMESPACE_STD


115 #ifdeà
__USE_LARGEFILE64


116 
_G_åos64_t
 
	tåos64_t
;

120 
	#_IOFBF
 0

	)

121 
	#_IOLBF
 1

	)

122 
	#_IONBF
 2

	)

126 #iâdeà
BUFSIZ


127 
	#BUFSIZ
 
_IO_BUFSIZ


	)

133 #iâdeà
EOF


134 
	#EOF
 (-1)

	)

140 
	#SEEK_SET
 0

	)

141 
	#SEEK_CUR
 1

	)

142 
	#SEEK_END
 2

	)

143 #ifdeà
__USE_GNU


144 
	#SEEK_DATA
 3

	)

145 
	#SEEK_HOLE
 4

	)

149 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


151 
	#P_tmpdœ
 "/tmp"

	)

164 
	~<b™s/¡dio_lim.h
>

168 
_IO_FILE
 *
¡dš
;

169 
_IO_FILE
 *
¡dout
;

170 
_IO_FILE
 *
¡d”r
;

172 
	#¡dš
 
¡dš


	)

173 
	#¡dout
 
¡dout


	)

174 
	#¡d”r
 
¡d”r


	)

176 
__BEGIN_NAMESPACE_STD


178 
	$»move
 (cÚ¡ *
__f’ame
è
__THROW
;

180 
	$»Çme
 (cÚ¡ *
__Şd
, cÚ¡ *
__Ãw
è
__THROW
;

181 
__END_NAMESPACE_STD


183 #ifdeà
__USE_ATFILE


185 
	$»Çm—t
 (
__Şdfd
, cÚ¡ *
__Şd
, 
__Ãwfd
,

186 cÚ¡ *
__Ãw
è
__THROW
;

189 
__BEGIN_NAMESPACE_STD


194 #iâdeà
__USE_FILE_OFFSET64


195 
FILE
 *
	$tmpfe
 (è
__wur
;

197 #ifdeà
__REDIRECT


198 
FILE
 *
	`__REDIRECT
 (
tmpfe
, (), 
tmpfe64
è
__wur
;

200 
	#tmpfe
 
tmpfe64


	)

204 #ifdeà
__USE_LARGEFILE64


205 
FILE
 *
	$tmpfe64
 (è
__wur
;

209 *
	$tm²am
 (*
__s
è
__THROW
 
__wur
;

210 
__END_NAMESPACE_STD


212 #ifdeà
__USE_MISC


215 *
	$tm²am_r
 (*
__s
è
__THROW
 
__wur
;

219 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


227 *
	$‹m²am
 (cÚ¡ *
__dœ
, cÚ¡ *
__pfx
)

228 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

232 
__BEGIN_NAMESPACE_STD


237 
	`fşo£
 (
FILE
 *
__¡»am
);

242 
	`fæush
 (
FILE
 *
__¡»am
);

243 
__END_NAMESPACE_STD


245 #ifdeà
__USE_MISC


252 
	`fæush_uÆocked
 (
FILE
 *
__¡»am
);

255 #ifdeà
__USE_GNU


262 
	`fşo£®l
 ();

266 
__BEGIN_NAMESPACE_STD


267 #iâdeà
__USE_FILE_OFFSET64


272 
FILE
 *
	$fİ’
 (cÚ¡ *
__»¡riù
 
__f’ame
,

273 cÚ¡ *
__»¡riù
 
__modes
è
__wur
;

278 
FILE
 *
	$äeİ’
 (cÚ¡ *
__»¡riù
 
__f’ame
,

279 cÚ¡ *
__»¡riù
 
__modes
,

280 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

282 #ifdeà
__REDIRECT


283 
FILE
 *
	`__REDIRECT
 (
fİ’
, (cÚ¡ *
__»¡riù
 
__f’ame
,

284 cÚ¡ *
__»¡riù
 
__modes
), 
fİ’64
)

285 
__wur
;

286 
FILE
 *
	`__REDIRECT
 (
äeİ’
, (cÚ¡ *
__»¡riù
 
__f’ame
,

287 cÚ¡ *
__»¡riù
 
__modes
,

288 
FILE
 *
__»¡riù
 
__¡»am
), 
äeİ’64
)

289 
__wur
;

291 
	#fİ’
 
fİ’64


	)

292 
	#äeİ’
 
äeİ’64


	)

295 
__END_NAMESPACE_STD


296 #ifdeà
__USE_LARGEFILE64


297 
FILE
 *
	$fİ’64
 (cÚ¡ *
__»¡riù
 
__f’ame
,

298 cÚ¡ *
__»¡riù
 
__modes
è
__wur
;

299 
FILE
 *
	$äeİ’64
 (cÚ¡ *
__»¡riù
 
__f’ame
,

300 cÚ¡ *
__»¡riù
 
__modes
,

301 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

304 #ifdef 
__USE_POSIX


306 
FILE
 *
	$fdİ’
 (
__fd
, cÚ¡ *
__modes
è
__THROW
 
__wur
;

309 #ifdef 
__USE_GNU


312 
FILE
 *
	$fİ’cook›
 (*
__»¡riù
 
__magic_cook›
,

313 cÚ¡ *
__»¡riù
 
__modes
,

314 
_IO_cook›_io_funùiÚs_t
 
__io_funcs
è
__THROW
 
__wur
;

317 #ifdeà
__USE_XOPEN2K8


319 
FILE
 *
	$fmemİ’
 (*
__s
, 
size_t
 
__Ën
, cÚ¡ *
__modes
)

320 
__THROW
 
__wur
;

325 
FILE
 *
	$İ’_mem¡»am
 (**
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
 
__wur
;

329 
__BEGIN_NAMESPACE_STD


332 
	$£tbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
è
__THROW
;

336 
	$£tvbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

337 
__modes
, 
size_t
 
__n
è
__THROW
;

338 
__END_NAMESPACE_STD


340 #ifdef 
__USE_BSD


343 
	$£tbufãr
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

344 
size_t
 
__size
è
__THROW
;

347 
	$£šebuf
 (
FILE
 *
__¡»am
è
__THROW
;

351 
__BEGIN_NAMESPACE_STD


356 
	`årštf
 (
FILE
 *
__»¡riù
 
__¡»am
,

357 cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

362 
	`´štf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

364 
	$¥rštf
 (*
__»¡riù
 
__s
,

365 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROWNL
;

371 
	`vårštf
 (
FILE
 *
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

372 
_G_va_li¡
 
__¬g
);

377 
	`v´štf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
);

379 
	$v¥rštf
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

380 
_G_va_li¡
 
__¬g
è
__THROWNL
;

381 
__END_NAMESPACE_STD


383 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


384 
__BEGIN_NAMESPACE_C99


386 
	$¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

387 cÚ¡ *
__»¡riù
 
__fÜm©
, ...)

388 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

390 
	$v¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

391 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

392 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

393 
__END_NAMESPACE_C99


396 #ifdeà
__USE_GNU


399 
	$va¥rštf
 (**
__»¡riù
 
__±r
, cÚ¡ *__»¡riù 
__f
,

400 
_G_va_li¡
 
__¬g
)

401 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 0))è
__wur
;

402 
	$__a¥rštf
 (**
__»¡riù
 
__±r
,

403 cÚ¡ *
__»¡riù
 
__fmt
, ...)

404 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

405 
	$a¥rštf
 (**
__»¡riù
 
__±r
,

406 cÚ¡ *
__»¡riù
 
__fmt
, ...)

407 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

410 #ifdeà
__USE_XOPEN2K8


412 
	$vd´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
,

413 
_G_va_li¡
 
__¬g
)

414 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

415 
	$d´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
, ...)

416 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

420 
__BEGIN_NAMESPACE_STD


425 
	$fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

426 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

431 
	$sÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

433 
	$ssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

434 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

436 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

437 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

438 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

439 #ifdeà
__REDIRECT


443 
	`__REDIRECT
 (
fsÿnf
, (
FILE
 *
__»¡riù
 
__¡»am
,

444 cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

445 
__isoc99_fsÿnf
è
__wur
;

446 
	`__REDIRECT
 (
sÿnf
, (cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

447 
__isoc99_sÿnf
è
__wur
;

448 
	`__REDIRECT_NTH
 (
ssÿnf
, (cÚ¡ *
__»¡riù
 
__s
,

449 cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

450 
__isoc99_ssÿnf
);

452 
	$__isoc99_fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

453 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

454 
	$__isoc99_sÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

455 
	$__isoc99_ssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

456 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

457 
	#fsÿnf
 
__isoc99_fsÿnf


	)

458 
	#sÿnf
 
__isoc99_sÿnf


	)

459 
	#ssÿnf
 
__isoc99_ssÿnf


	)

463 
__END_NAMESPACE_STD


465 #ifdef 
__USE_ISOC99


466 
__BEGIN_NAMESPACE_C99


471 
	$vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

472 
_G_va_li¡
 
__¬g
)

473 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

479 
	$vsÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

480 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

483 
	$vssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

484 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

485 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

487 #ià!
defšed
 
__USE_GNU
 \

488 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

489 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

490 #ifdeà
__REDIRECT


494 
	`__REDIRECT
 (
vfsÿnf
,

495 (
FILE
 *
__»¡riù
 
__s
,

496 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
),

497 
__isoc99_vfsÿnf
)

498 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

499 
	`__REDIRECT
 (
vsÿnf
, (cÚ¡ *
__»¡riù
 
__fÜm©
,

500 
_G_va_li¡
 
__¬g
), 
__isoc99_vsÿnf
)

501 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

502 
	`__REDIRECT_NTH
 (
vssÿnf
,

503 (cÚ¡ *
__»¡riù
 
__s
,

504 cÚ¡ *
__»¡riù
 
__fÜm©
,

505 
_G_va_li¡
 
__¬g
), 
__isoc99_vssÿnf
)

506 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

508 
	$__isoc99_vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
,

509 cÚ¡ *
__»¡riù
 
__fÜm©
,

510 
_G_va_li¡
 
__¬g
è
__wur
;

511 
	$__isoc99_vsÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
,

512 
_G_va_li¡
 
__¬g
è
__wur
;

513 
	$__isoc99_vssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

514 cÚ¡ *
__»¡riù
 
__fÜm©
,

515 
_G_va_li¡
 
__¬g
è
__THROW
;

516 
	#vfsÿnf
 
__isoc99_vfsÿnf


	)

517 
	#vsÿnf
 
__isoc99_vsÿnf


	)

518 
	#vssÿnf
 
__isoc99_vssÿnf


	)

522 
__END_NAMESPACE_C99


526 
__BEGIN_NAMESPACE_STD


531 
	`fg‘c
 (
FILE
 *
__¡»am
);

532 
	`g‘c
 (
FILE
 *
__¡»am
);

538 
	`g‘ch¬
 ();

539 
__END_NAMESPACE_STD


543 
	#g‘c
(
_å
è
	`_IO_g‘c
 (_å)

	)

545 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


550 
	`g‘c_uÆocked
 (
FILE
 *
__¡»am
);

551 
	`g‘ch¬_uÆocked
 ();

554 #ifdeà
__USE_MISC


561 
	`fg‘c_uÆocked
 (
FILE
 *
__¡»am
);

565 
__BEGIN_NAMESPACE_STD


573 
	`åutc
 (
__c
, 
FILE
 *
__¡»am
);

574 
	`putc
 (
__c
, 
FILE
 *
__¡»am
);

580 
	`putch¬
 (
__c
);

581 
__END_NAMESPACE_STD


585 
	#putc
(
_ch
, 
_å
è
	`_IO_putc
 (_ch, _å)

	)

587 #ifdeà
__USE_MISC


594 
	`åutc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

597 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


602 
	`putc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

603 
	`putch¬_uÆocked
 (
__c
);

607 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 \

608 || (
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

610 
	`g‘w
 (
FILE
 *
__¡»am
);

613 
	`putw
 (
__w
, 
FILE
 *
__¡»am
);

617 
__BEGIN_NAMESPACE_STD


622 *
	$fg‘s
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

623 
__wur
;

625 #ià!
defšed
 
__USE_ISOC11
 \

626 || (
defšed
 
__ılu¥lus
 && __cplusplus <= 201103L)

638 *
	$g‘s
 (*
__s
è
__wur
 
__©Œibu‹_d•»ÿ‹d__
;

640 
__END_NAMESPACE_STD


642 #ifdeà
__USE_GNU


649 *
	$fg‘s_uÆocked
 (*
__»¡riù
 
__s
, 
__n
,

650 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

654 #ifdef 
__USE_XOPEN2K8


665 
_IO_ssize_t
 
	$__g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

666 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

667 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

668 
_IO_ssize_t
 
	$g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

669 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

670 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

678 
_IO_ssize_t
 
	$g‘lše
 (**
__»¡riù
 
__lš•Œ
,

679 
size_t
 *
__»¡riù
 
__n
,

680 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

684 
__BEGIN_NAMESPACE_STD


689 
	`åuts
 (cÚ¡ *
__»¡riù
 
__s
, 
FILE
 *__»¡riù 
__¡»am
);

695 
	`puts
 (cÚ¡ *
__s
);

702 
	`ung‘c
 (
__c
, 
FILE
 *
__¡»am
);

709 
size_t
 
	$ä—d
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

710 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

715 
size_t
 
	`fwr™e
 (cÚ¡ *
__»¡riù
 
__±r
, size_ˆ
__size
,

716 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__s
);

717 
__END_NAMESPACE_STD


719 #ifdeà
__USE_GNU


726 
	`åuts_uÆocked
 (cÚ¡ *
__»¡riù
 
__s
,

727 
FILE
 *
__»¡riù
 
__¡»am
);

730 #ifdeà
__USE_MISC


737 
size_t
 
	$ä—d_uÆocked
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

738 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

739 
size_t
 
	`fwr™e_uÆocked
 (cÚ¡ *
__»¡riù
 
__±r
, size_ˆ
__size
,

740 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
);

744 
__BEGIN_NAMESPACE_STD


749 
	`f£ek
 (
FILE
 *
__¡»am
, 
__off
, 
__wh’û
);

754 
	$á–l
 (
FILE
 *
__¡»am
è
__wur
;

759 
	`»wšd
 (
FILE
 *
__¡»am
);

760 
__END_NAMESPACE_STD


767 #ià
defšed
 
__USE_LARGEFILE
 || defšed 
__USE_XOPEN2K


768 #iâdeà
__USE_FILE_OFFSET64


773 
	`f£eko
 (
FILE
 *
__¡»am
, 
__off_t
 
__off
, 
__wh’û
);

778 
__off_t
 
	$á–lo
 (
FILE
 *
__¡»am
è
__wur
;

780 #ifdeà
__REDIRECT


781 
	`__REDIRECT
 (
f£eko
,

782 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
),

783 
f£eko64
);

784 
__off64_t
 
	`__REDIRECT
 (
á–lo
, (
FILE
 *
__¡»am
), 
á–lo64
);

786 
	#f£eko
 
f£eko64


	)

787 
	#á–lo
 
á–lo64


	)

792 
__BEGIN_NAMESPACE_STD


793 #iâdeà
__USE_FILE_OFFSET64


798 
	`fg‘pos
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos_t
 *__»¡riù 
__pos
);

803 
	`f£os
 (
FILE
 *
__¡»am
, cÚ¡ 
åos_t
 *
__pos
);

805 #ifdeà
__REDIRECT


806 
	`__REDIRECT
 (
fg‘pos
, (
FILE
 *
__»¡riù
 
__¡»am
,

807 
åos_t
 *
__»¡riù
 
__pos
), 
fg‘pos64
);

808 
	`__REDIRECT
 (
f£os
,

809 (
FILE
 *
__¡»am
, cÚ¡ 
åos_t
 *
__pos
), 
f£os64
);

811 
	#fg‘pos
 
fg‘pos64


	)

812 
	#f£os
 
f£os64


	)

815 
__END_NAMESPACE_STD


817 #ifdeà
__USE_LARGEFILE64


818 
	`f£eko64
 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
);

819 
__off64_t
 
	$á–lo64
 (
FILE
 *
__¡»am
è
__wur
;

820 
	`fg‘pos64
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos64_t
 *__»¡riù 
__pos
);

821 
	`f£os64
 (
FILE
 *
__¡»am
, cÚ¡ 
åos64_t
 *
__pos
);

824 
__BEGIN_NAMESPACE_STD


826 
	$ş—»¼
 (
FILE
 *
__¡»am
è
__THROW
;

828 
	$ãof
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

830 
	$ã¼Ü
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

831 
__END_NAMESPACE_STD


833 #ifdeà
__USE_MISC


835 
	$ş—»¼_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
;

836 
	$ãof_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

837 
	$ã¼Ü_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

841 
__BEGIN_NAMESPACE_STD


846 
	`³¼Ü
 (cÚ¡ *
__s
);

847 
__END_NAMESPACE_STD


853 
	~<b™s/sys_”¾i¡.h
>

856 #ifdef 
__USE_POSIX


858 
	$f’o
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

861 #ifdeà
__USE_MISC


863 
	$f’o_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

867 #ià(
defšed
 
__USE_POSIX2
 || defšed 
__USE_SVID
 || defšed 
__USE_BSD
 || \

868 
defšed
 
__USE_MISC
)

873 
FILE
 *
	$pİ’
 (cÚ¡ *
__commªd
, cÚ¡ *
__modes
è
__wur
;

879 
	`pşo£
 (
FILE
 *
__¡»am
);

883 #ifdef 
__USE_POSIX


885 *
	$ù”mid
 (*
__s
è
__THROW
;

889 #ifdeà
__USE_XOPEN


891 *
	`cu£rid
 (*
__s
);

895 #ifdef 
__USE_GNU


896 
ob¡ack
;

899 
	$ob¡ack_´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

900 cÚ¡ *
__»¡riù
 
__fÜm©
, ...)

901 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

902 
	$ob¡ack_v´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

903 cÚ¡ *
__»¡riù
 
__fÜm©
,

904 
_G_va_li¡
 
__¬gs
)

905 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

909 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


913 
	$æockfe
 (
FILE
 *
__¡»am
è
__THROW
;

917 
	$árylockfe
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

920 
	$fuÆockfe
 (
FILE
 *
__¡»am
è
__THROW
;

923 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


927 
	#__Ãed_g‘İt


	)

928 
	~<g‘İt.h
>

933 #ifdeà
__USE_EXTERN_INLINES


934 
	~<b™s/¡dio.h
>

936 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


937 
	~<b™s/¡dio2.h
>

939 #ifdeà
__LDBL_COMPAT


940 
	~<b™s/¡dio-ldbl.h
>

943 
__END_DECLS


	@/usr/include/stdlib.h

22 #iâdef 
_STDLIB_H


24 
	~<ã©u»s.h
>

27 
	#__Ãed_size_t


	)

28 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


29 
	#__Ãed_wch¬_t


	)

30 
	#__Ãed_NULL


	)

32 
	~<¡ddef.h
>

34 
	g__BEGIN_DECLS


36 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


37 
	#_STDLIB_H
 1

	)

39 #ià(
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8
è&& !defšed 
_SYS_WAIT_H


41 
	~<b™s/wa™æags.h
>

42 
	~<b™s/wa™¡©us.h
>

44 #ifdeà
__USE_BSD


49 #ià
defšed
 
__GNUC__
 && !defšed 
__ılu¥lus


50 
	#__WAIT_INT
(
¡©us
) \

51 (
	`__ex‹nsiÚ__
 (((uniÚ { 
	`__ty³of
(
¡©us
è
__š
; 
__i
; }) \

52 { .
__š
 = (
¡©us
è}).
__i
))

	)

54 
	#__WAIT_INT
(
¡©us
è(*(*è&(¡©us))

	)

62 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2 || defšed 
__ılu¥lus


63 
	#__WAIT_STATUS
 *

	)

64 
	#__WAIT_STATUS_DEFN
 *

	)

69 
wa™
 *
	m__u±r
;

70 *
	m__Œ
;

71 } 
	t__WAIT_STATUS
 
	t__©Œibu‹__
 ((
	t__Œª¥¬’t_uniÚ__
));

72 
	#__WAIT_STATUS_DEFN
 *

	)

77 
	#__WAIT_INT
(
¡©us
è(¡©us)

	)

78 
	#__WAIT_STATUS
 *

	)

79 
	#__WAIT_STATUS_DEFN
 *

	)

84 
	#WEXITSTATUS
(
¡©us
è
	`__WEXITSTATUS
 (
	`__WAIT_INT
 (¡©us))

	)

85 
	#WTERMSIG
(
¡©us
è
	`__WTERMSIG
 (
	`__WAIT_INT
 (¡©us))

	)

86 
	#WSTOPSIG
(
¡©us
è
	`__WSTOPSIG
 (
	`__WAIT_INT
 (¡©us))

	)

87 
	#WIFEXITED
(
¡©us
è
	`__WIFEXITED
 (
	`__WAIT_INT
 (¡©us))

	)

88 
	#WIFSIGNALED
(
¡©us
è
	`__WIFSIGNALED
 (
	`__WAIT_INT
 (¡©us))

	)

89 
	#WIFSTOPPED
(
¡©us
è
	`__WIFSTOPPED
 (
	`__WAIT_INT
 (¡©us))

	)

90 #ifdeà
__WIFCONTINUED


91 
	#WIFCONTINUED
(
¡©us
è
	`__WIFCONTINUED
 (
	`__WAIT_INT
 (¡©us))

	)

95 
__BEGIN_NAMESPACE_STD


99 
	mquÙ
;

100 
	m»m
;

101 } 
	tdiv_t
;

104 #iâdeà
__ldiv_t_defšed


107 
	mquÙ
;

108 
	m»m
;

109 } 
	tldiv_t
;

110 
	#__ldiv_t_defšed
 1

	)

112 
	g__END_NAMESPACE_STD


114 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__Îdiv_t_defšed


115 
__BEGIN_NAMESPACE_C99


117 
__ex‹nsiÚ__
 struct

119 
	mquÙ
;

120 
	m»m
;

121 } 
	tÎdiv_t
;

122 
	#__Îdiv_t_defšed
 1

	)

123 
	g__END_NAMESPACE_C99


128 
	#RAND_MAX
 2147483647

	)

133 
	#EXIT_FAILURE
 1

	)

134 
	#EXIT_SUCCESS
 0

	)

138 
	#MB_CUR_MAX
 (
	`__ùy³_g‘_mb_cur_max
 ())

	)

139 
size_t
 
	$__ùy³_g‘_mb_cur_max
 (è
__THROW
 
__wur
;

142 
__BEGIN_NAMESPACE_STD


144 
	$©of
 (cÚ¡ *
__ÅŒ
)

145 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

147 
	$©oi
 (cÚ¡ *
__ÅŒ
)

148 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

150 
	$©Ş
 (cÚ¡ *
__ÅŒ
)

151 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

152 
__END_NAMESPACE_STD


154 #ià
defšed
 
__USE_ISOC99
 || defšed 
__USE_MISC


155 
__BEGIN_NAMESPACE_C99


157 
__ex‹nsiÚ__
 
	$©Şl
 (cÚ¡ *
__ÅŒ
)

158 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

159 
__END_NAMESPACE_C99


162 
__BEGIN_NAMESPACE_STD


164 
	$¡¹od
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

165 **
__»¡riù
 
__’d±r
)

166 
__THROW
 
	`__nÚnuÎ
 ((1));

167 
__END_NAMESPACE_STD


169 #ifdef 
__USE_ISOC99


170 
__BEGIN_NAMESPACE_C99


172 
	$¡¹of
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

173 **
__»¡riù
 
__’d±r
è
__THROW
 
	`__nÚnuÎ
 ((1));

175 
	$¡¹Şd
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

176 **
__»¡riù
 
__’d±r
)

177 
__THROW
 
	`__nÚnuÎ
 ((1));

178 
__END_NAMESPACE_C99


181 
__BEGIN_NAMESPACE_STD


183 
	$¡¹Ş
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

184 **
__»¡riù
 
__’d±r
, 
__ba£
)

185 
__THROW
 
	`__nÚnuÎ
 ((1));

187 
	$¡¹oul
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

188 **
__»¡riù
 
__’d±r
, 
__ba£
)

189 
__THROW
 
	`__nÚnuÎ
 ((1));

190 
__END_NAMESPACE_STD


192 #ifdeà
__USE_BSD


194 
__ex‹nsiÚ__


195 
	$¡¹oq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

196 **
__»¡riù
 
__’d±r
, 
__ba£
)

197 
__THROW
 
	`__nÚnuÎ
 ((1));

199 
__ex‹nsiÚ__


200 
	$¡¹ouq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

201 **
__»¡riù
 
__’d±r
, 
__ba£
)

202 
__THROW
 
	`__nÚnuÎ
 ((1));

205 #ià
defšed
 
__USE_ISOC99
 || defšed 
__USE_MISC


206 
__BEGIN_NAMESPACE_C99


208 
__ex‹nsiÚ__


209 
	$¡¹Şl
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

210 **
__»¡riù
 
__’d±r
, 
__ba£
)

211 
__THROW
 
	`__nÚnuÎ
 ((1));

213 
__ex‹nsiÚ__


214 
	$¡¹ouÎ
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

215 **
__»¡riù
 
__’d±r
, 
__ba£
)

216 
__THROW
 
	`__nÚnuÎ
 ((1));

217 
__END_NAMESPACE_C99


221 #ifdeà
__USE_GNU


235 
	~<xloÿË.h
>

239 
	$¡¹Ş_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

240 **
__»¡riù
 
__’d±r
, 
__ba£
,

241 
__loÿË_t
 
__loc
è
__THROW
 
	`__nÚnuÎ
 ((1, 4));

243 
	$¡¹oul_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

244 **
__»¡riù
 
__’d±r
,

245 
__ba£
, 
__loÿË_t
 
__loc
)

246 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

248 
__ex‹nsiÚ__


249 
	$¡¹Şl_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

250 **
__»¡riù
 
__’d±r
, 
__ba£
,

251 
__loÿË_t
 
__loc
)

252 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

254 
__ex‹nsiÚ__


255 
	$¡¹ouÎ_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

256 **
__»¡riù
 
__’d±r
,

257 
__ba£
, 
__loÿË_t
 
__loc
)

258 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

260 
	$¡¹od_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

261 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

262 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

264 
	$¡¹of_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

265 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

266 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

268 
	$¡¹Şd_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

269 **
__»¡riù
 
__’d±r
,

270 
__loÿË_t
 
__loc
)

271 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

275 #ifdeà
__USE_EXTERN_INLINES


276 
__BEGIN_NAMESPACE_STD


277 
__ex‹º_šlše
 

278 
	`__NTH
 (
	$©oi
 (cÚ¡ *
__ÅŒ
))

280  (è
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

281 
	}
}

282 
__ex‹º_šlše
 

283 
__NTH
 (
	$©Ş
 (cÚ¡ *
__ÅŒ
))

285  
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

286 
	}
}

287 
	g__END_NAMESPACE_STD


289 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


290 
__BEGIN_NAMESPACE_C99


291 
__ex‹nsiÚ__
 
__ex‹º_šlše
 

292 
__NTH
 (
	$©Şl
 (cÚ¡ *
__ÅŒ
))

294  
	`¡¹Şl
 (
__ÅŒ
, (**è
NULL
, 10);

295 
	}
}

296 
	g__END_NAMESPACE_C99


301 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED


305 *
	$l64a
 (
__n
è
__THROW
 
__wur
;

308 
	$a64l
 (cÚ¡ *
__s
)

309 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

313 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_BSD


314 
	~<sys/ty³s.h
>

321 
	$¿ndom
 (è
__THROW
;

324 
	$¤ªdom
 (
__£ed
è
__THROW
;

330 *
	$š™¡©e
 (
__£ed
, *
__¡©ebuf
,

331 
size_t
 
__¡©–’
è
__THROW
 
	`__nÚnuÎ
 ((2));

335 *
	$£t¡©e
 (*
__¡©ebuf
è
__THROW
 
	`__nÚnuÎ
 ((1));

338 #ifdeà
__USE_MISC


343 
	s¿ndom_d©a


345 
št32_t
 *
åŒ
;

346 
št32_t
 *
½Œ
;

347 
št32_t
 *
¡©e
;

348 
¿nd_ty³
;

349 
¿nd_deg
;

350 
¿nd_£p
;

351 
št32_t
 *
’d_±r
;

354 
	$¿ndom_r
 (
¿ndom_d©a
 *
__»¡riù
 
__buf
,

355 
št32_t
 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

357 
	$¤ªdom_r
 (
__£ed
, 
¿ndom_d©a
 *
__buf
)

358 
__THROW
 
	`__nÚnuÎ
 ((2));

360 
	$š™¡©e_r
 (
__£ed
, *
__»¡riù
 
__¡©ebuf
,

361 
size_t
 
__¡©–’
,

362 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

363 
__THROW
 
	`__nÚnuÎ
 ((2, 4));

365 
	$£t¡©e_r
 (*
__»¡riù
 
__¡©ebuf
,

366 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

367 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

372 
__BEGIN_NAMESPACE_STD


374 
	$¿nd
 (è
__THROW
;

376 
	$¤ªd
 (
__£ed
è
__THROW
;

377 
__END_NAMESPACE_STD


379 #ifdeà
__USE_POSIX


381 
	$¿nd_r
 (*
__£ed
è
__THROW
;

385 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


389 
	$d¿nd48
 (è
__THROW
;

390 
	$”ªd48
 (
__xsubi
[3]è
__THROW
 
	`__nÚnuÎ
 ((1));

393 
	$Ìªd48
 (è
__THROW
;

394 
	$Äªd48
 (
__xsubi
[3])

395 
__THROW
 
	`__nÚnuÎ
 ((1));

398 
	$m¿nd48
 (è
__THROW
;

399 
	$j¿nd48
 (
__xsubi
[3])

400 
__THROW
 
	`__nÚnuÎ
 ((1));

403 
	$¤ªd48
 (
__£edv®
è
__THROW
;

404 *
	$£ed48
 (
__£ed16v
[3])

405 
__THROW
 
	`__nÚnuÎ
 ((1));

406 
	$lcÚg48
 (
__·¿m
[7]è
__THROW
 
	`__nÚnuÎ
 ((1));

408 #ifdeà
__USE_MISC


412 
	sd¿nd48_d©a


414 
__x
[3];

415 
__Şd_x
[3];

416 
__c
;

417 
__š™
;

418 
__ex‹nsiÚ__
 
__a
;

423 
	$d¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

424 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

425 
	$”ªd48_r
 (
__xsubi
[3],

426 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

427 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

430 
	$Ìªd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

431 *
__»¡riù
 
__»suÉ
)

432 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

433 
	$Äªd48_r
 (
__xsubi
[3],

434 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

435 *
__»¡riù
 
__»suÉ
)

436 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

439 
	$m¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

440 *
__»¡riù
 
__»suÉ
)

441 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

442 
	$j¿nd48_r
 (
__xsubi
[3],

443 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

444 *
__»¡riù
 
__»suÉ
)

445 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

448 
	$¤ªd48_r
 (
__£edv®
, 
d¿nd48_d©a
 *
__bufãr
)

449 
__THROW
 
	`__nÚnuÎ
 ((2));

451 
	$£ed48_r
 (
__£ed16v
[3],

452 
d¿nd48_d©a
 *
__bufãr
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

454 
	$lcÚg48_r
 (
__·¿m
[7],

455 
d¿nd48_d©a
 *
__bufãr
)

456 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

462 #iâdeà
__m®loc_ªd_ÿÎoc_defšed


463 
	#__m®loc_ªd_ÿÎoc_defšed


	)

464 
__BEGIN_NAMESPACE_STD


466 *
	$m®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

468 *
	$ÿÎoc
 (
size_t
 
__nmemb
, size_ˆ
__size
)

469 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

470 
__END_NAMESPACE_STD


473 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


474 
__BEGIN_NAMESPACE_STD


480 *
	$»®loc
 (*
__±r
, 
size_t
 
__size
)

481 
__THROW
 
__©Œibu‹_w¬n_unu£d_»suÉ__
;

483 
	$ä“
 (*
__±r
è
__THROW
;

484 
__END_NAMESPACE_STD


486 #ifdef 
__USE_MISC


488 
	$cä“
 (*
__±r
è
__THROW
;

491 #ià
defšed
 
__USE_GNU
 || defšed 
__USE_BSD
 || defšed 
__USE_MISC


492 
	~<®loÿ.h
>

495 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

496 || 
defšed
 
__USE_BSD


498 *
	$v®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

501 #ifdeà
__USE_XOPEN2K


503 
	$posix_mem®ign
 (**
__mem±r
, 
size_t
 
__®ignm’t
, size_ˆ
__size
)

504 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

507 #ifdeà
__USE_ISOC11


509 *
	$®igÃd_®loc
 (
size_t
 
__®ignm’t
, size_ˆ
__size
)

510 
__THROW
 
__©Œibu‹_m®loc__
 
	`__©Œibu‹_®loc_size__
 ((2)è
__wur
;

513 
__BEGIN_NAMESPACE_STD


515 
	$abÜt
 (è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

519 
	`©ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

521 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


523 #ifdeà
__ılu¥lus


524 "C++" 
	`©_quick_ex™
 ((*
__func
) ())

525 
__THROW
 
	`__asm
 ("©_quick_ex™"è
	`__nÚnuÎ
 ((1));

527 
	`©_quick_ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

530 
__END_NAMESPACE_STD


532 #ifdef 
__USE_MISC


535 
	`Ú_ex™
 ((*
__func
è(
__¡©us
, *
__¬g
), *__arg)

536 
__THROW
 
	`__nÚnuÎ
 ((1));

539 
__BEGIN_NAMESPACE_STD


543 
	$ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

545 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


549 
	$quick_ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

551 
__END_NAMESPACE_STD


553 #ifdeà
__USE_ISOC99


554 
__BEGIN_NAMESPACE_C99


557 
	$_Ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

558 
__END_NAMESPACE_C99


562 
__BEGIN_NAMESPACE_STD


564 *
	$g‘’v
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

565 
__END_NAMESPACE_STD


567 #ifdeà
__USE_GNU


570 *
	$£cu»_g‘’v
 (cÚ¡ *
__Çme
)

571 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

574 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


578 
	$pu‹nv
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

581 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


584 
	$£‹nv
 (cÚ¡ *
__Çme
, cÚ¡ *
__v®ue
, 
__»¶aû
)

585 
__THROW
 
	`__nÚnuÎ
 ((2));

588 
	$un£‹nv
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

591 #ifdef 
__USE_MISC


595 
	$ş—»nv
 (è
__THROW
;

599 #ià
defšed
 
__USE_MISC
 \

600 || (
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
)

606 *
	$mk‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1));

609 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 \

610 || 
defšed
 
__USE_XOPEN2K8


619 #iâdeà
__USE_FILE_OFFSET64


620 
	$mk¡emp
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

622 #ifdeà
__REDIRECT


623 
	`__REDIRECT
 (
mk¡emp
, (*
__‹m¶©e
), 
mk¡emp64
)

624 
	`__nÚnuÎ
 ((1)è
__wur
;

626 
	#mk¡emp
 
mk¡emp64


	)

629 #ifdeà
__USE_LARGEFILE64


630 
	$mk¡emp64
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

634 #ifdeà
__USE_MISC


641 #iâdeà
__USE_FILE_OFFSET64


642 
	$mk¡emps
 (*
__‹m¶©e
, 
__suffixËn
è
	`__nÚnuÎ
 ((1)è
__wur
;

644 #ifdeà
__REDIRECT


645 
	`__REDIRECT
 (
mk¡emps
, (*
__‹m¶©e
, 
__suffixËn
),

646 
mk¡emps64
è
	`__nÚnuÎ
 ((1)è
__wur
;

648 
	#mk¡emps
 
mk¡emps64


	)

651 #ifdeà
__USE_LARGEFILE64


652 
	$mk¡emps64
 (*
__‹m¶©e
, 
__suffixËn
)

653 
	`__nÚnuÎ
 ((1)è
__wur
;

657 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K8


663 *
	$mkd‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

666 #ifdeà
__USE_GNU


673 #iâdeà
__USE_FILE_OFFSET64


674 
	$mko¡emp
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

676 #ifdeà
__REDIRECT


677 
	`__REDIRECT
 (
mko¡emp
, (*
__‹m¶©e
, 
__æags
), 
mko¡emp64
)

678 
	`__nÚnuÎ
 ((1)è
__wur
;

680 
	#mko¡emp
 
mko¡emp64


	)

683 #ifdeà
__USE_LARGEFILE64


684 
	$mko¡emp64
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

693 #iâdeà
__USE_FILE_OFFSET64


694 
	$mko¡emps
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

695 
	`__nÚnuÎ
 ((1)è
__wur
;

697 #ifdeà
__REDIRECT


698 
	`__REDIRECT
 (
mko¡emps
, (*
__‹m¶©e
, 
__suffixËn
,

699 
__æags
), 
mko¡emps64
)

700 
	`__nÚnuÎ
 ((1)è
__wur
;

702 
	#mko¡emps
 
mko¡emps64


	)

705 #ifdeà
__USE_LARGEFILE64


706 
	$mko¡emps64
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

707 
	`__nÚnuÎ
 ((1)è
__wur
;

712 
__BEGIN_NAMESPACE_STD


717 
	$sy¡em
 (cÚ¡ *
__commªd
è
__wur
;

718 
__END_NAMESPACE_STD


721 #ifdef 
__USE_GNU


724 *
	$ÿnÚiÿlize_fe_Çme
 (cÚ¡ *
__Çme
)

725 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

728 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


734 *
	$»®·th
 (cÚ¡ *
__»¡riù
 
__Çme
,

735 *
__»¡riù
 
__»sŞved
è
__THROW
 
__wur
;

740 #iâdeà
__COMPAR_FN_T


741 
	#__COMPAR_FN_T


	)

742 (*
	t__com·r_â_t
) (const *, const *);

744 #ifdef 
__USE_GNU


745 
__com·r_â_t
 
	tcom·risÚ_â_t
;

748 #ifdeà
__USE_GNU


749 (*
	t__com·r_d_â_t
) (const *, const *, *);

752 
__BEGIN_NAMESPACE_STD


755 *
	$b£¬ch
 (cÚ¡ *
__key
, cÚ¡ *
__ba£
,

756 
size_t
 
__nmemb
, size_ˆ
__size
, 
__com·r_â_t
 
__com·r
)

757 
	`__nÚnuÎ
 ((1, 2, 5)è
__wur
;

759 #ifdeà
__USE_EXTERN_INLINES


760 
	~<b™s/¡dlib-b£¬ch.h
>

765 
	$qsÜt
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

766 
__com·r_â_t
 
__com·r
è
	`__nÚnuÎ
 ((1, 4));

767 #ifdeà
__USE_GNU


768 
	$qsÜt_r
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

769 
__com·r_d_â_t
 
__com·r
, *
__¬g
)

770 
	`__nÚnuÎ
 ((1, 4));

775 
	$abs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

776 
	$Ïbs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

777 
__END_NAMESPACE_STD


779 #ifdeà
__USE_ISOC99


780 
__ex‹nsiÚ__
 
	$Îabs
 (
__x
)

781 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

785 
__BEGIN_NAMESPACE_STD


789 
div_t
 
	$div
 (
__num”
, 
__d’om
)

790 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

791 
ldiv_t
 
	$ldiv
 (
__num”
, 
__d’om
)

792 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

793 
__END_NAMESPACE_STD


795 #ifdeà
__USE_ISOC99


796 
__BEGIN_NAMESPACE_C99


797 
__ex‹nsiÚ__
 
Îdiv_t
 
	$Îdiv
 (
__num”
,

798 
__d’om
)

799 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

800 
__END_NAMESPACE_C99


804 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

805 || 
defšed
 
__USE_SVID


812 *
	$ecvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

813 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

818 *
	$fcvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

819 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

824 *
	$gcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

825 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

828 #ifdeà
__USE_MISC


830 *
	$qecvt
 (
__v®ue
, 
__ndig™
,

831 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

832 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

833 *
	$qfcvt
 (
__v®ue
, 
__ndig™
,

834 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

835 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

836 *
	$qgcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

837 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

842 
	$ecvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

843 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

844 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

845 
	$fcvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

846 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

847 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

849 
	$qecvt_r
 (
__v®ue
, 
__ndig™
,

850 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

851 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

852 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

853 
	$qfcvt_r
 (
__v®ue
, 
__ndig™
,

854 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

855 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

856 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

860 
__BEGIN_NAMESPACE_STD


863 
	$mbËn
 (cÚ¡ *
__s
, 
size_t
 
__n
è
__THROW
;

866 
	$mbtowc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

867 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

870 
	$wùomb
 (*
__s
, 
wch¬_t
 
__wch¬
è
__THROW
;

874 
size_t
 
	$mb¡owcs
 (
wch¬_t
 *
__»¡riù
 
__pwcs
,

875 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

877 
size_t
 
	$wc¡ombs
 (*
__»¡riù
 
__s
,

878 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__pwcs
, 
size_t
 
__n
)

879 
__THROW
;

880 
__END_NAMESPACE_STD


883 #ifdeà
__USE_SVID


888 
	$½m©ch
 (cÚ¡ *
__»¥Ú£
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

892 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


899 
	$g‘subİt
 (**
__»¡riù
 
__İtiÚp
,

900 *cÚ¡ *
__»¡riù
 
__tok’s
,

901 **
__»¡riù
 
__v®u•
)

902 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3)è
__wur
;

906 #ifdeà
__USE_XOPEN


908 
	$£tkey
 (cÚ¡ *
__key
è
__THROW
 
	`__nÚnuÎ
 ((1));

914 #ifdeà
__USE_XOPEN2KXSI


916 
	$posix_İ’±
 (
__oæag
è
__wur
;

919 #ifdeà
__USE_XOPEN


924 
	$g¿Á±
 (
__fd
è
__THROW
;

928 
	$uÆock±
 (
__fd
è
__THROW
;

933 *
	$±¢ame
 (
__fd
è
__THROW
 
__wur
;

936 #ifdeà
__USE_GNU


940 
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

941 
__THROW
 
	`__nÚnuÎ
 ((2));

944 
	`g‘±
 ();

947 #ifdeà
__USE_BSD


951 
	$g‘lßdavg
 (
__lßdavg
[], 
__ÃËm
)

952 
__THROW
 
	`__nÚnuÎ
 ((1));

955 
	~<b™s/¡dlib-æßt.h
>

958 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


959 
	~<b™s/¡dlib.h
>

961 #ifdeà
__LDBL_COMPAT


962 
	~<b™s/¡dlib-ldbl.h
>

966 #undeà
__Ãed_m®loc_ªd_ÿÎoc


968 
__END_DECLS


	@/usr/include/string.h

22 #iâdef 
_STRING_H


23 
	#_STRING_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


30 
	#__Ãed_size_t


	)

31 
	#__Ãed_NULL


	)

32 
	~<¡ddef.h
>

39 #ià
defšed
 
__ılu¥lus
 && (__ılu¥lu >ğ199711L || 
__GNUC_PREREQ
 (4, 4))

40 
	#__CORRECT_ISO_CPP_STRING_H_PROTO


	)

44 
__BEGIN_NAMESPACE_STD


46 *
	$memıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

47 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

50 *
	$memmove
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

51 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

52 
__END_NAMESPACE_STD


57 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN


58 *
	$memcıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

59 
__c
, 
size_t
 
__n
)

60 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

64 
__BEGIN_NAMESPACE_STD


66 *
	$mem£t
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

69 
	$memcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

70 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

73 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


76 *
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

77 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

78 cÚ¡ *
	`memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

79 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

81 #ifdeà
__OPTIMIZE__


82 
__ex‹º_®ways_šlše
 *

83 
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW


85  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

88 
__ex‹º_®ways_šlše
 const *

89 
	`memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
è
__THROW


91  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

94 
	}
}

96 *
	$memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

97 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

99 
__END_NAMESPACE_STD


101 #ifdeà
__USE_GNU


104 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


105 "C++" *
	$¿wmemchr
 (*
__s
, 
__c
)

106 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

107 "C++" cÚ¡ *
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

108 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

110 *
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

111 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

115 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


116 "C++" *
	$memrchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

117 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

118 "C++" cÚ¡ *
	$memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

119 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

121 *
	$memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

122 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

127 
__BEGIN_NAMESPACE_STD


129 *
	$¡rıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

130 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

132 *
	$¡ºıy
 (*
__»¡riù
 
__de¡
,

133 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

134 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

137 *
	$¡rÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

138 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

140 *
	$¡ºÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

141 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

144 
	$¡rcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

145 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

147 
	$¡ºcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

148 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

151 
	$¡rcŞl
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

152 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

154 
size_t
 
	$¡rxäm
 (*
__»¡riù
 
__de¡
,

155 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

156 
__THROW
 
	`__nÚnuÎ
 ((2));

157 
__END_NAMESPACE_STD


159 #ifdeà
__USE_XOPEN2K8


163 
	~<xloÿË.h
>

166 
	$¡rcŞl_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
__loÿË_t
 
__l
)

167 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

169 
size_t
 
	$¡rxäm_l
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
,

170 
__loÿË_t
 
__l
è
__THROW
 
	`__nÚnuÎ
 ((2, 4));

173 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 \

174 || 
defšed
 
__USE_XOPEN2K8


176 *
	$¡rdup
 (cÚ¡ *
__s
)

177 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

183 #ià
defšed
 
__USE_XOPEN2K8


184 *
	$¡ºdup
 (cÚ¡ *
__¡ršg
, 
size_t
 
__n
)

185 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

188 #ià
defšed
 
__USE_GNU
 && defšed 
__GNUC__


190 
	#¡rdu·
(
s
) \

191 (
__ex‹nsiÚ__
 \

193 cÚ¡ *
__Şd
 = (
s
); \

194 
size_t
 
__Ën
 = 
	`¡¾’
 (
__Şd
) + 1; \

195 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
); \

196 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

197 
	}
}))

	)

200 
	#¡ºdu·
(
s
, 
n
) \

201 (
__ex‹nsiÚ__
 \

203 cÚ¡ *
__Şd
 = (
s
); \

204 
size_t
 
__Ën
 = 
	`¡ºËn
 (
__Şd
, (
n
)); \

205 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
 + 1); \

206 
__Ãw
[
__Ën
] = '\0'; \

207 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

208 }))

	)

211 
	g__BEGIN_NAMESPACE_STD


213 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


216 *
¡rchr
 (*
__s
, 
__c
)

217 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

218 cÚ¡ *
¡rchr
 (cÚ¡ *
__s
, 
__c
)

219 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

221 #ifdeà
__OPTIMIZE__


222 
__ex‹º_®ways_šlše
 *

223 
¡rchr
 (*
__s
, 
__c
è
	g__THROW


225  
__butš_¡rchr
 (
__s
, 
__c
);

228 
__ex‹º_®ways_šlše
 const *

229 
¡rchr
 (cÚ¡ *
__s
, 
__c
è
	g__THROW


231  
__butš_¡rchr
 (
__s
, 
__c
);

236 *
	$¡rchr
 (cÚ¡ *
__s
, 
__c
)

237 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

240 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


243 *
	`¡¼chr
 (*
__s
, 
__c
)

244 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

245 cÚ¡ *
	`¡¼chr
 (cÚ¡ *
__s
, 
__c
)

246 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

248 #ifdeà
__OPTIMIZE__


249 
__ex‹º_®ways_šlše
 *

250 
	`¡¼chr
 (*
__s
, 
__c
è
__THROW


252  
	`__butš_¡¼chr
 (
__s
, 
__c
);

255 
__ex‹º_®ways_šlše
 const *

256 
	`¡¼chr
 (cÚ¡ *
__s
, 
__c
è
__THROW


258  
	`__butš_¡¼chr
 (
__s
, 
__c
);

261 
	}
}

263 *
	$¡¼chr
 (cÚ¡ *
__s
, 
__c
)

264 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

266 
__END_NAMESPACE_STD


268 #ifdeà
__USE_GNU


271 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


272 "C++" *
	$¡rchºul
 (*
__s
, 
__c
)

273 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

274 "C++" cÚ¡ *
	$¡rchºul
 (cÚ¡ *
__s
, 
__c
)

275 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

277 *
	$¡rchºul
 (cÚ¡ *
__s
, 
__c
)

278 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

282 
__BEGIN_NAMESPACE_STD


285 
size_t
 
	$¡rc¥n
 (cÚ¡ *
__s
, cÚ¡ *
__»jeù
)

286 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

289 
size_t
 
	$¡r¥n
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

290 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

292 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


295 *
	`¡½brk
 (*
__s
, cÚ¡ *
__acû±
)

296 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

297 cÚ¡ *
	`¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

298 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

300 #ifdeà
__OPTIMIZE__


301 
__ex‹º_®ways_šlše
 *

302 
	`¡½brk
 (*
__s
, cÚ¡ *
__acû±
è
__THROW


304  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

307 
__ex‹º_®ways_šlše
 const *

308 
	`¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
è
__THROW


310  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

313 
	}
}

315 *
	$¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

316 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

319 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


322 *
	`¡r¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
)

323 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

324 cÚ¡ *
	`¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

325 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

327 #ifdeà
__OPTIMIZE__


328 
__ex‹º_®ways_šlše
 *

329 
	`¡r¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
è
__THROW


331  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

334 
__ex‹º_®ways_šlše
 const *

335 
	`¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
è
__THROW


337  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

340 
	}
}

342 *
	$¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

343 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

348 *
	$¡¹ok
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__d–im
)

349 
__THROW
 
	`__nÚnuÎ
 ((2));

350 
__END_NAMESPACE_STD


354 *
	$__¡¹ok_r
 (*
__»¡riù
 
__s
,

355 cÚ¡ *
__»¡riù
 
__d–im
,

356 **
__»¡riù
 
__§ve_±r
)

357 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

358 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


359 *
	$¡¹ok_r
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__d–im
,

360 **
__»¡riù
 
__§ve_±r
)

361 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

364 #ifdeà
__USE_GNU


366 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


367 "C++" *
	$¡rÿ£¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
)

368 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

369 "C++" cÚ¡ *
	$¡rÿ£¡r
 (cÚ¡ *
__hay¡ack
,

370 cÚ¡ *
__ÃedË
)

371 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

373 *
	$¡rÿ£¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

374 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

378 #ifdeà
__USE_GNU


382 *
	$memmem
 (cÚ¡ *
__hay¡ack
, 
size_t
 
__hay¡ackËn
,

383 cÚ¡ *
__ÃedË
, 
size_t
 
__ÃedËËn
)

384 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 3));

388 *
	$__mempıy
 (*
__»¡riù
 
__de¡
,

389 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

390 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

391 *
	$mempıy
 (*
__»¡riù
 
__de¡
,

392 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

393 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

397 
__BEGIN_NAMESPACE_STD


399 
size_t
 
	$¡¾’
 (cÚ¡ *
__s
)

400 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

401 
__END_NAMESPACE_STD


403 #ifdef 
__USE_XOPEN2K8


406 
size_t
 
	$¡ºËn
 (cÚ¡ *
__¡ršg
, 
size_t
 
__maxËn
)

407 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

411 
__BEGIN_NAMESPACE_STD


413 *
	$¡»¼Ü
 (
__”ºum
è
__THROW
;

414 
__END_NAMESPACE_STD


415 #ià
defšed
 
__USE_XOPEN2K
 || defšed 
__USE_MISC


423 #ià
defšed
 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


426 #ifdeà
__REDIRECT_NTH


427 
	`__REDIRECT_NTH
 (
¡»¼Ü_r
,

428 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
),

429 
__xpg_¡»¼Ü_r
è
	`__nÚnuÎ
 ((2));

431 
	$__xpg_¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

432 
__THROW
 
	`__nÚnuÎ
 ((2));

433 
	#¡»¼Ü_r
 
__xpg_¡»¼Ü_r


	)

438 *
	$¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

439 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

443 #ifdeà
__USE_XOPEN2K8


445 *
	$¡»¼Ü_l
 (
__”ºum
, 
__loÿË_t
 
__l
è
__THROW
;

451 
	$__bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

453 #ifdeà
__USE_BSD


455 
	$bcİy
 (cÚ¡ *
__¤c
, *
__de¡
, 
size_t
 
__n
)

456 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

459 
	$bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

462 
	$bcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

463 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

466 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


469 *
	`šdex
 (*
__s
, 
__c
)

470 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

471 cÚ¡ *
	`šdex
 (cÚ¡ *
__s
, 
__c
)

472 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

474 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


475 
__ex‹º_®ways_šlše
 *

476 
	`šdex
 (*
__s
, 
__c
è
__THROW


478  
	`__butš_šdex
 (
__s
, 
__c
);

481 
__ex‹º_®ways_šlše
 const *

482 
	`šdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


484  
	`__butš_šdex
 (
__s
, 
__c
);

487 
	}
}

489 *
	$šdex
 (cÚ¡ *
__s
, 
__c
)

490 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

494 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


497 *
	`ršdex
 (*
__s
, 
__c
)

498 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

499 cÚ¡ *
	`ršdex
 (cÚ¡ *
__s
, 
__c
)

500 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

502 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


503 
__ex‹º_®ways_šlše
 *

504 
	`ršdex
 (*
__s
, 
__c
è
__THROW


506  
	`__butš_ršdex
 (
__s
, 
__c
);

509 
__ex‹º_®ways_šlše
 const *

510 
	`ršdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


512  
	`__butš_ršdex
 (
__s
, 
__c
);

515 
	}
}

517 *
	$ršdex
 (cÚ¡ *
__s
, 
__c
)

518 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

523 
	$ffs
 (
__i
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

527 #ifdef 
__USE_GNU


528 
	$ff¦
 (
__l
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

529 
__ex‹nsiÚ__
 
	$ff¦l
 (
__Î
)

530 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

534 
	$¡rÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

535 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

538 
	$¡ºÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

539 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

542 #ifdef 
__USE_GNU


545 
	$¡rÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

546 
__loÿË_t
 
__loc
)

547 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

549 
	$¡ºÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

550 
size_t
 
__n
, 
__loÿË_t
 
__loc
)

551 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 4));

554 #ifdef 
__USE_BSD


557 *
	$¡r£p
 (**
__»¡riù
 
__¡ršgp
,

558 cÚ¡ *
__»¡riù
 
__d–im
)

559 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

562 #ifdef 
__USE_XOPEN2K8


564 *
	$¡rsigÇl
 (
__sig
è
__THROW
;

567 *
	$__¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

568 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

569 *
	$¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

570 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

574 *
	$__¡²ıy
 (*
__»¡riù
 
__de¡
,

575 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

576 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

577 *
	$¡²ıy
 (*
__»¡riù
 
__de¡
,

578 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

579 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

582 #ifdef 
__USE_GNU


584 
	$¡rv”scmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

585 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

588 *
	$¡räy
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

591 *
	$memäob
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

593 #iâdeà
ba£Çme


598 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


599 "C++" *
	$ba£Çme
 (*
__f’ame
)

600 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

601 "C++" cÚ¡ *
	$ba£Çme
 (cÚ¡ *
__f’ame
)

602 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

604 *
	$ba£Çme
 (cÚ¡ *
__f’ame
è
__THROW
 
	`__nÚnuÎ
 ((1));

610 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

611 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__OPTIMIZE_SIZE__
 \

612 && !
defšed
 
__NO_INLINE__
 && !defšed 
__ılu¥lus


632 
	~<b™s/¡ršg.h
>

635 
	~<b™s/¡ršg2.h
>

638 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


640 
	~<b™s/¡ršg3.h
>

644 
__END_DECLS


	@/usr/include/strings.h

18 #iâdef 
_STRINGS_H


19 
	#_STRINGS_H
 1

	)

24 #ià!
defšed
 
_STRING_H
 || !defšed 
__USE_BSD


26 
	~<ã©u»s.h
>

27 
	#__Ãed_size_t


	)

28 
	~<¡ddef.h
>

35 #ià
defšed
 
__ılu¥lus
 && (__ılu¥lu >ğ199711L || 
__GNUC_PREREQ
 (4, 4))

36 
	#__CORRECT_ISO_CPP_STRINGS_H_PROTO


	)

39 
	g__BEGIN_DECLS


41 #ià
defšed
 
__USE_MISC
 || !defšed 
__USE_XOPEN2K8


43 
	$bcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

44 
__THROW
 
__©Œibu‹_pu»__
;

47 
	$bcİy
 (cÚ¡ *
__¤c
, *
__de¡
, 
size_t
 
__n
è
__THROW
;

50 
	$bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
;

53 #ifdeà
__CORRECT_ISO_CPP_STRINGS_H_PROTO


56 *
	`šdex
 (*
__s
, 
__c
)

57 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

58 cÚ¡ *
	`šdex
 (cÚ¡ *
__s
, 
__c
)

59 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

61 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRING_H_PROTO


62 
__ex‹º_®ways_šlše
 *

63 
	`šdex
 (*
__s
, 
__c
è
__THROW


65  
	`__butš_šdex
 (
__s
, 
__c
);

68 
__ex‹º_®ways_šlše
 const *

69 
	`šdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


71  
	`__butš_šdex
 (
__s
, 
__c
);

74 
	}
}

76 *
	$šdex
 (cÚ¡ *
__s
, 
__c
)

77 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

81 #ifdeà
__CORRECT_ISO_CPP_STRINGS_H_PROTO


84 *
	`ršdex
 (*
__s
, 
__c
)

85 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

86 cÚ¡ *
	`ršdex
 (cÚ¡ *
__s
, 
__c
)

87 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

89 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRING_H_PROTO


90 
__ex‹º_®ways_šlše
 *

91 
	`ršdex
 (*
__s
, 
__c
è
__THROW


93  
	`__butš_ršdex
 (
__s
, 
__c
);

96 
__ex‹º_®ways_šlše
 const *

97 
	`ršdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


99  
	`__butš_ršdex
 (
__s
, 
__c
);

102 
	}
}

104 *
	$ršdex
 (cÚ¡ *
__s
, 
__c
)

105 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

109 #ià
defšed
 
__USE_MISC
 || !defšed 
__USE_XOPEN2K8
 || defšed 
__USE_XOPEN2K8XSI


112 
	$ffs
 (
__i
è
__THROW
 
	`__©Œibu‹__
 ((const));

116 
	$¡rÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

117 
__THROW
 
__©Œibu‹_pu»__
;

120 
	$¡ºÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

121 
__THROW
 
__©Œibu‹_pu»__
;

123 #ifdef 
__USE_XOPEN2K8


127 
	~<xloÿË.h
>

131 
	$¡rÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
__loÿË_t
 
__loc
)

132 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

134 
	$¡ºÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

135 
size_t
 
__n
, 
__loÿË_t
 
__loc
)

136 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 4));

139 
__END_DECLS


	@/usr/include/sys/types.h

22 #iâdef 
_SYS_TYPES_H


23 
	#_SYS_TYPES_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


29 
	~<b™s/ty³s.h
>

31 #ifdef 
__USE_BSD


32 #iâdeà
__u_ch¬_defšed


33 
__u_ch¬
 
	tu_ch¬
;

34 
__u_shÜt
 
	tu_shÜt
;

35 
__u_št
 
	tu_št
;

36 
__u_lÚg
 
	tu_lÚg
;

37 
__quad_t
 
	tquad_t
;

38 
__u_quad_t
 
	tu_quad_t
;

39 
__fsid_t
 
	tfsid_t
;

40 
	#__u_ch¬_defšed


	)

44 
__loff_t
 
	tloff_t
;

46 #iâdeà
__šo_t_defšed


47 #iâdeà
__USE_FILE_OFFSET64


48 
__šo_t
 
	tšo_t
;

50 
__šo64_t
 
	tšo_t
;

52 
	#__šo_t_defšed


	)

54 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__šo64_t_defšed


55 
__šo64_t
 
	tšo64_t
;

56 
	#__šo64_t_defšed


	)

59 #iâdeà
__dev_t_defšed


60 
__dev_t
 
	tdev_t
;

61 
	#__dev_t_defšed


	)

64 #iâdeà
__gid_t_defšed


65 
__gid_t
 
	tgid_t
;

66 
	#__gid_t_defšed


	)

69 #iâdeà
__mode_t_defšed


70 
__mode_t
 
	tmode_t
;

71 
	#__mode_t_defšed


	)

74 #iâdeà
__Æšk_t_defšed


75 
__Æšk_t
 
	tÆšk_t
;

76 
	#__Æšk_t_defšed


	)

79 #iâdeà
__uid_t_defšed


80 
__uid_t
 
	tuid_t
;

81 
	#__uid_t_defšed


	)

84 #iâdeà
__off_t_defšed


85 #iâdeà
__USE_FILE_OFFSET64


86 
__off_t
 
	toff_t
;

88 
__off64_t
 
	toff_t
;

90 
	#__off_t_defšed


	)

92 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


93 
__off64_t
 
	toff64_t
;

94 
	#__off64_t_defšed


	)

97 #iâdeà
__pid_t_defšed


98 
__pid_t
 
	tpid_t
;

99 
	#__pid_t_defšed


	)

102 #ià(
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8
) \

103 && !
defšed
 
__id_t_defšed


104 
__id_t
 
	tid_t
;

105 
	#__id_t_defšed


	)

108 #iâdeà
__ssize_t_defšed


109 
__ssize_t
 
	tssize_t
;

110 
	#__ssize_t_defšed


	)

113 #ifdef 
__USE_BSD


114 #iâdeà
__daddr_t_defšed


115 
__daddr_t
 
	tdaddr_t
;

116 
__ÿddr_t
 
	tÿddr_t
;

117 
	#__daddr_t_defšed


	)

121 #ià(
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN
è&& !defšed 
__key_t_defšed


122 
__key_t
 
	tkey_t
;

123 
	#__key_t_defšed


	)

126 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


127 
	#__Ãed_şock_t


	)

129 
	#__Ãed_time_t


	)

130 
	#__Ãed_tim”_t


	)

131 
	#__Ãed_şockid_t


	)

132 
	~<time.h
>

134 #ifdeà
__USE_XOPEN


135 #iâdeà
__u£cÚds_t_defšed


136 
__u£cÚds_t
 
	tu£cÚds_t
;

137 
	#__u£cÚds_t_defšed


	)

139 #iâdeà
__su£cÚds_t_defšed


140 
__su£cÚds_t
 
	tsu£cÚds_t
;

141 
	#__su£cÚds_t_defšed


	)

145 
	#__Ãed_size_t


	)

146 
	~<¡ddef.h
>

148 #ifdeà
__USE_MISC


150 
	tulÚg
;

151 
	tushÜt
;

152 
	tušt
;

157 #ià!
__GNUC_PREREQ
 (2, 7)

160 #iâdeà
__št8_t_defšed


161 
	#__št8_t_defšed


	)

162 
	tšt8_t
;

163 
	tšt16_t
;

164 
	tšt32_t
;

165 #ià
__WORDSIZE
 == 64

166 
	tšt64_t
;

168 
__ex‹nsiÚ__
 
	tšt64_t
;

173 
	tu_št8_t
;

174 
	tu_št16_t
;

175 
	tu_št32_t
;

176 #ià
__WORDSIZE
 == 64

177 
	tu_št64_t
;

179 
__ex‹nsiÚ__
 
	tu_št64_t
;

182 
	t»gi¡”_t
;

187 
	#__štN_t
(
N
, 
MODE
) \

188 ##
	tN
##
	t_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	tMODE
)))

	)

189 
	t__u_štN_t
(
	tN
, 
	tMODE
) \

190 
	tu_št
##
	tN
##
	t_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	tMODE
)))

	)

192 #iâdeà
	t__št8_t_defšed


193 
	t__št8_t_defšed


	)

194 
	t__štN_t
 (8, 
	t__QI__
);

195 
__štN_t
 (16, 
__HI__
);

196 
__štN_t
 (32, 
__SI__
);

197 
__štN_t
 (64, 
__DI__
);

200 
__u_štN_t
 (8, 
__QI__
);

201 
__u_štN_t
 (16, 
__HI__
);

202 
__u_štN_t
 (32, 
__SI__
);

203 
__u_štN_t
 (64, 
__DI__
);

205 
	t»gi¡”_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	t__wÜd__
)));

211 
	#__BIT_TYPES_DEFINED__
 1

	)

214 #ifdef 
__USE_BSD


216 
	~<’dŸn.h
>

219 
	~<sys/£Ëù.h
>

222 
	~<sys/sysmaüos.h
>

226 #ià(
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8
) \

227 && !
defšed
 
__blksize_t_defšed


228 
__blksize_t
 
	tblksize_t
;

229 
	#__blksize_t_defšed


	)

233 #iâdeà
__USE_FILE_OFFSET64


234 #iâdeà
__blkút_t_defšed


235 
__blkút_t
 
	tblkút_t
;

236 
	#__blkút_t_defšed


	)

238 #iâdeà
__fsblkút_t_defšed


239 
__fsblkút_t
 
	tfsblkút_t
;

240 
	#__fsblkút_t_defšed


	)

242 #iâdeà
__fsfút_t_defšed


243 
__fsfút_t
 
	tfsfút_t
;

244 
	#__fsfút_t_defšed


	)

247 #iâdeà
__blkút_t_defšed


248 
__blkút64_t
 
	tblkút_t
;

249 
	#__blkút_t_defšed


	)

251 #iâdeà
__fsblkút_t_defšed


252 
__fsblkút64_t
 
	tfsblkút_t
;

253 
	#__fsblkút_t_defšed


	)

255 #iâdeà
__fsfút_t_defšed


256 
__fsfút64_t
 
	tfsfút_t
;

257 
	#__fsfút_t_defšed


	)

261 #ifdeà
__USE_LARGEFILE64


262 
__blkút64_t
 
	tblkút64_t
;

263 
__fsblkút64_t
 
	tfsblkút64_t
;

264 
__fsfút64_t
 
	tfsfút64_t
;

269 #ià
defšed
 
__USE_POSIX199506
 || defšed 
__USE_UNIX98


270 
	~<b™s/±h»adty³s.h
>

273 
	g__END_DECLS


	@/usr/include/alloca.h

18 #iâdef 
_ALLOCA_H


19 
	#_ALLOCA_H
 1

	)

21 
	~<ã©u»s.h
>

23 
	#__Ãed_size_t


	)

24 
	~<¡ddef.h
>

26 
	g__BEGIN_DECLS


29 #undeà
®loÿ


32 *
	$®loÿ
 (
size_t
 
__size
è
__THROW
;

34 #ifdef 
__GNUC__


35 
	#®loÿ
(
size
è
	`__butš_®loÿ
 (size)

	)

38 
__END_DECLS


	@/usr/include/bits/errno.h

19 #ifdeà
_ERRNO_H


21 #undeà
EDOM


22 #undeà
EILSEQ


23 #undeà
ERANGE


24 
	~<lšux/”ºo.h
>

27 
	#ENOTSUP
 
EOPNOTSUPP


	)

30 #iâdeà
ECANCELED


31 
	#ECANCELED
 125

	)

35 #iâdeà
EOWNERDEAD


36 
	#EOWNERDEAD
 130

	)

37 
	#ENOTRECOVERABLE
 131

	)

40 #iâdeà
ERFKILL


41 
	#ERFKILL
 132

	)

44 #iâdeà
EHWPOISON


45 
	#EHWPOISON
 133

	)

48 #iâdeà
__ASSEMBLER__


50 *
	$__”ºo_loÿtiÚ
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

52 #ià!
defšed
 
_LIBC
 || defšed 
_LIBC_REENTRANT


54 
	#”ºo
 (*
	`__”ºo_loÿtiÚ
 ())

	)

59 #ià!
defšed
 
_ERRNO_H
 && defšed 
__Ãed_Em©h


63 
	#EDOM
 33

	)

64 
	#EILSEQ
 84

	)

65 
	#ERANGE
 34

	)

	@/usr/include/bits/fcntl.h

19 #iâdeà
_FCNTL_H


23 #ifdeà
__x86_64__


24 
	#__O_LARGEFILE
 0

	)

27 #ifdeà
__x86_64__


29 
	#F_GETLK64
 5

	)

30 
	#F_SETLK64
 6

	)

31 
	#F_SETLKW64
 7

	)

35 
	sæock


37 
	ml_ty³
;

38 
	ml_wh’û
;

39 #iâdeà
__USE_FILE_OFFSET64


40 
__off_t
 
	ml_¡¬t
;

41 
__off_t
 
	ml_Ën
;

43 
__off64_t
 
	ml_¡¬t
;

44 
__off64_t
 
	ml_Ën
;

46 
__pid_t
 
	ml_pid
;

49 #ifdeà
__USE_LARGEFILE64


50 
	sæock64


52 
	ml_ty³
;

53 
	ml_wh’û
;

54 
__off64_t
 
	ml_¡¬t
;

55 
__off64_t
 
	ml_Ën
;

56 
__pid_t
 
	ml_pid
;

61 
	~<b™s/fú-lšux.h
>

	@/usr/include/bits/fcntl2.h

19 #iâdef 
_FCNTL_H


25 #iâdeà
__USE_FILE_OFFSET64


26 
	$__İ’_2
 (cÚ¡ *
__·th
, 
__oæag
è
	`__nÚnuÎ
 ((1));

27 
	`__REDIRECT
 (
__İ’_®Ÿs
, (cÚ¡ *
__·th
, 
__oæag
, ...),

28 
İ’
è
	`__nÚnuÎ
 ((1));

30 
	`__REDIRECT
 (
__İ’_2
, (cÚ¡ *
__·th
, 
__oæag
),

31 
__İ’64_2
è
	`__nÚnuÎ
 ((1));

32 
	`__REDIRECT
 (
__İ’_®Ÿs
, (cÚ¡ *
__·th
, 
__oæag
, ...),

33 
İ’64
è
	`__nÚnuÎ
 ((1));

35 
	`__”rÜdeş
 (
__İ’_too_mªy_¬gs
,

37 
	`__”rÜdeş
 (
__İ’_missšg_mode
,

40 
__fÜtify_funùiÚ
 

41 
	$İ’
 (cÚ¡ *
__·th
, 
__oæag
, ...)

43 ià(
	`__va_¬g_·ck_Ën
 () > 1)

44 
	`__İ’_too_mªy_¬gs
 ();

46 ià(
	`__butš_cÚ¡ªt_p
 (
__oæag
))

48 ià(
	`__OPEN_NEEDS_MODE
 (
__oæag
è&& 
	`__va_¬g_·ck_Ën
 () < 1)

50 
	`__İ’_missšg_mode
 ();

51  
	`__İ’_2
 (
__·th
, 
__oæag
);

53  
	`__İ’_®Ÿs
 (
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

56 ià(
	`__va_¬g_·ck_Ën
 () < 1)

57  
	`__İ’_2
 (
__·th
, 
__oæag
);

59  
	`__İ’_®Ÿs
 (
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

60 
	}
}

63 #ifdeà
__USE_LARGEFILE64


64 
	$__İ’64_2
 (cÚ¡ *
__·th
, 
__oæag
è
	`__nÚnuÎ
 ((1));

65 
	`__REDIRECT
 (
__İ’64_®Ÿs
, (cÚ¡ *
__·th
, 
__oæag
,

66 ...), 
İ’64
è
	`__nÚnuÎ
 ((1));

67 
	`__”rÜdeş
 (
__İ’64_too_mªy_¬gs
,

69 
	`__”rÜdeş
 (
__İ’64_missšg_mode
,

72 
__fÜtify_funùiÚ
 

73 
	$İ’64
 (cÚ¡ *
__·th
, 
__oæag
, ...)

75 ià(
	`__va_¬g_·ck_Ën
 () > 1)

76 
	`__İ’64_too_mªy_¬gs
 ();

78 ià(
	`__butš_cÚ¡ªt_p
 (
__oæag
))

80 ià(
	`__OPEN_NEEDS_MODE
 (
__oæag
è&& 
	`__va_¬g_·ck_Ën
 () < 1)

82 
	`__İ’64_missšg_mode
 ();

83  
	`__İ’64_2
 (
__·th
, 
__oæag
);

85  
	`__İ’64_®Ÿs
 (
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

88 ià(
	`__va_¬g_·ck_Ën
 () < 1)

89  
	`__İ’64_2
 (
__·th
, 
__oæag
);

91  
	`__İ’64_®Ÿs
 (
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

92 
	}
}

96 #ifdeà
__USE_ATFILE


97 #iâdeà
__USE_FILE_OFFSET64


98 
	$__İ’©_2
 (
__fd
, cÚ¡ *
__·th
, 
__oæag
)

99 
	`__nÚnuÎ
 ((2));

100 
	`__REDIRECT
 (
__İ’©_®Ÿs
, (
__fd
, cÚ¡ *
__·th
,

101 
__oæag
, ...), 
İ’©
)

102 
	`__nÚnuÎ
 ((2));

104 
	`__REDIRECT
 (
__İ’©_2
, (
__fd
, cÚ¡ *
__·th
,

105 
__oæag
), 
__İ’©64_2
)

106 
	`__nÚnuÎ
 ((2));

107 
	`__REDIRECT
 (
__İ’©_®Ÿs
, (
__fd
, cÚ¡ *
__·th
,

108 
__oæag
, ...), 
İ’©64
)

109 
	`__nÚnuÎ
 ((2));

111 
	`__”rÜdeş
 (
__İ’©_too_mªy_¬gs
,

113 
	`__”rÜdeş
 (
__İ’©_missšg_mode
,

116 
__fÜtify_funùiÚ
 

117 
	$İ’©
 (
__fd
, cÚ¡ *
__·th
, 
__oæag
, ...)

119 ià(
	`__va_¬g_·ck_Ën
 () > 1)

120 
	`__İ’©_too_mªy_¬gs
 ();

122 ià(
	`__butš_cÚ¡ªt_p
 (
__oæag
))

124 ià(
	`__OPEN_NEEDS_MODE
 (
__oæag
è&& 
	`__va_¬g_·ck_Ën
 () < 1)

126 
	`__İ’©_missšg_mode
 ();

127  
	`__İ’©_2
 (
__fd
, 
__·th
, 
__oæag
);

129  
	`__İ’©_®Ÿs
 (
__fd
, 
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

132 ià(
	`__va_¬g_·ck_Ën
 () < 1)

133  
	`__İ’©_2
 (
__fd
, 
__·th
, 
__oæag
);

135  
	`__İ’©_®Ÿs
 (
__fd
, 
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

136 
	}
}

139 #ifdeà
__USE_LARGEFILE64


140 
	$__İ’©64_2
 (
__fd
, cÚ¡ *
__·th
, 
__oæag
)

141 
	`__nÚnuÎ
 ((2));

142 
	`__REDIRECT
 (
__İ’©64_®Ÿs
, (
__fd
, cÚ¡ *
__·th
,

143 
__oæag
, ...), 
İ’©64
)

144 
	`__nÚnuÎ
 ((2));

145 
	`__”rÜdeş
 (
__İ’©64_too_mªy_¬gs
,

147 
	`__”rÜdeş
 (
__İ’©64_missšg_mode
,

150 
__fÜtify_funùiÚ
 

151 
	$İ’©64
 (
__fd
, cÚ¡ *
__·th
, 
__oæag
, ...)

153 ià(
	`__va_¬g_·ck_Ën
 () > 1)

154 
	`__İ’©64_too_mªy_¬gs
 ();

156 ià(
	`__butš_cÚ¡ªt_p
 (
__oæag
))

158 ià(
	`__OPEN_NEEDS_MODE
 (
__oæag
è&& 
	`__va_¬g_·ck_Ën
 () < 1)

160 
	`__İ’©64_missšg_mode
 ();

161  
	`__İ’©64_2
 (
__fd
, 
__·th
, 
__oæag
);

163  
	`__İ’©64_®Ÿs
 (
__fd
, 
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

166 ià(
	`__va_¬g_·ck_Ën
 () < 1)

167  
	`__İ’©64_2
 (
__fd
, 
__·th
, 
__oæag
);

169  
	`__İ’©64_®Ÿs
 (
__fd
, 
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

170 
	}
}

	@/usr/include/bits/pthreadtypes.h

18 #iâdeà
_BITS_PTHREADTYPES_H


19 
	#_BITS_PTHREADTYPES_H
 1

	)

21 
	~<b™s/wÜdsize.h
>

23 #ifdeà
__x86_64__


24 #ià
__WORDSIZE
 == 64

25 
	#__SIZEOF_PTHREAD_ATTR_T
 56

	)

26 
	#__SIZEOF_PTHREAD_MUTEX_T
 40

	)

27 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

28 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

29 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

30 
	#__SIZEOF_PTHREAD_RWLOCK_T
 56

	)

31 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

32 
	#__SIZEOF_PTHREAD_BARRIER_T
 32

	)

33 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

35 
	#__SIZEOF_PTHREAD_ATTR_T
 32

	)

36 
	#__SIZEOF_PTHREAD_MUTEX_T
 32

	)

37 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

38 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

39 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

40 
	#__SIZEOF_PTHREAD_RWLOCK_T
 44

	)

41 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

42 
	#__SIZEOF_PTHREAD_BARRIER_T
 20

	)

43 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

46 
	#__SIZEOF_PTHREAD_ATTR_T
 36

	)

47 
	#__SIZEOF_PTHREAD_MUTEX_T
 24

	)

48 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

49 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

50 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

51 
	#__SIZEOF_PTHREAD_RWLOCK_T
 32

	)

52 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

53 
	#__SIZEOF_PTHREAD_BARRIER_T
 20

	)

54 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

60 
	t±h»ad_t
;

63 
	u±h»ad_©Œ_t


65 
	m__size
[
__SIZEOF_PTHREAD_ATTR_T
];

66 
	m__®ign
;

68 #iâdeà
__have_±h»ad_©Œ_t


69 
±h»ad_©Œ_t
 
	t±h»ad_©Œ_t
;

70 
	#__have_±h»ad_©Œ_t
 1

	)

74 #ifdeà
__x86_64__


75 
	s__±h»ad_š‹º®_li¡


77 
__±h»ad_š‹º®_li¡
 *
	m__´ev
;

78 
__±h»ad_š‹º®_li¡
 *
	m__Ãxt
;

79 } 
	t__±h»ad_li¡_t
;

81 
	s__±h»ad_š‹º®_¦i¡


83 
__±h»ad_š‹º®_¦i¡
 *
	m__Ãxt
;

84 } 
	t__±h»ad_¦i¡_t
;

92 
	s__±h»ad_mu‹x_s


94 
	m__lock
;

95 
	m__couÁ
;

96 
	m__owÃr
;

97 #ifdeà
__x86_64__


98 
	m__nu£rs
;

102 
	m__kšd
;

103 #ifdeà
__x86_64__


104 
	m__¥šs
;

105 
	m__–isiÚ
;

106 
__±h»ad_li¡_t
 
	m__li¡
;

107 
	#__PTHREAD_MUTEX_HAVE_PREV
 1

	)

108 
	#__PTHREAD_MUTEX_HAVE_ELISION
 1

	)

110 
	m__nu£rs
;

111 
__ex‹nsiÚ__
 union

115 
	m__e¥šs
;

116 
	m__–isiÚ
;

117 
	#__¥šs
 
d
.
__e¥šs


	)

118 
	#__–isiÚ
 
d
.
__–isiÚ


	)

119 
	#__PTHREAD_MUTEX_HAVE_ELISION
 2

	)

120 } 
	md
;

121 
__±h»ad_¦i¡_t
 
	m__li¡
;

124 } 
	m__d©a
;

125 
	m__size
[
__SIZEOF_PTHREAD_MUTEX_T
];

126 
	m__®ign
;

127 } 
	t±h»ad_mu‹x_t
;

131 
	m__size
[
__SIZEOF_PTHREAD_MUTEXATTR_T
];

132 
	m__®ign
;

133 } 
	t±h»ad_mu‹x©Œ_t
;

142 
	m__lock
;

143 
	m__fu‹x
;

144 
__ex‹nsiÚ__
 
	m__tÙ®_£q
;

145 
__ex‹nsiÚ__
 
	m__wakeup_£q
;

146 
__ex‹nsiÚ__
 
	m__wok’_£q
;

147 *
	m__mu‹x
;

148 
	m__nwa™”s
;

149 
	m__brßdÿ¡_£q
;

150 } 
	m__d©a
;

151 
	m__size
[
__SIZEOF_PTHREAD_COND_T
];

152 
__ex‹nsiÚ__
 
	m__®ign
;

153 } 
	t±h»ad_cÚd_t
;

157 
	m__size
[
__SIZEOF_PTHREAD_CONDATTR_T
];

158 
	m__®ign
;

159 } 
	t±h»ad_cÚd©Œ_t
;

163 
	t±h»ad_key_t
;

167 
	t±h»ad_Úû_t
;

170 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


175 #ifdeà
__x86_64__


178 
	m__lock
;

179 
	m__Ä_»ad”s
;

180 
	m__»ad”s_wakeup
;

181 
	m__wr™”_wakeup
;

182 
	m__Ä_»ad”s_queued
;

183 
	m__Ä_wr™”s_queued
;

184 
	m__wr™”
;

185 
	m__sh¬ed
;

186 
	m__·d1
;

187 
	m__·d2
;

190 
	m__æags
;

191 
	#__PTHREAD_RWLOCK_INT_FLAGS_SHARED
 1

	)

192 } 
	m__d©a
;

196 
	m__lock
;

197 
	m__Ä_»ad”s
;

198 
	m__»ad”s_wakeup
;

199 
	m__wr™”_wakeup
;

200 
	m__Ä_»ad”s_queued
;

201 
	m__Ä_wr™”s_queued
;

204 
	m__æags
;

205 
	m__sh¬ed
;

206 
	m__·d1
;

207 
	m__·d2
;

208 
	m__wr™”
;

209 } 
	m__d©a
;

211 
	m__size
[
__SIZEOF_PTHREAD_RWLOCK_T
];

212 
	m__®ign
;

213 } 
	t±h»ad_rwlock_t
;

217 
	m__size
[
__SIZEOF_PTHREAD_RWLOCKATTR_T
];

218 
	m__®ign
;

219 } 
	t±h»ad_rwlock©Œ_t
;

223 #ifdeà
__USE_XOPEN2K


225 vŞ©
	t±h»ad_¥šlock_t
;

232 
	m__size
[
__SIZEOF_PTHREAD_BARRIER_T
];

233 
	m__®ign
;

234 } 
	t±h»ad_b¬r›r_t
;

238 
	m__size
[
__SIZEOF_PTHREAD_BARRIERATTR_T
];

239 
	m__®ign
;

240 } 
	t±h»ad_b¬r›¿‰r_t
;

244 #iâdeà
__x86_64__


246 
	#__ş—nup_fù_©Œibu‹
 
	`__©Œibu‹__
 ((
	`__»g·rm__
 (1)))

	)

	@/usr/include/bits/setjmp.h

19 #iâdeà
_BITS_SETJMP_H


20 
	#_BITS_SETJMP_H
 1

	)

22 #ià!
defšed
 
_SETJMP_H
 && !defšed 
_PTHREAD_H


26 
	~<b™s/wÜdsize.h
>

28 #iâdeà
_ASM


30 #ià
__WORDSIZE
 == 64

31 
	t__jmp_buf
[8];

32 #–ià
defšed
 
__x86_64__


33 
__ex‹nsiÚ__
 
	t__jmp_buf
[8];

35 
	t__jmp_buf
[6];

	@/usr/include/bits/setjmp2.h

19 #iâdeà
_SETJMP_H


24 #ifdeà
__REDIRECT_NTH


25 
__REDIRECT_NTHNL
 (
lÚgjmp
,

26 (
__jmp_buf_g
 
__’v
[1], 
__v®
),

27 
__lÚgjmp_chk
è
__©Œibu‹__
 ((
__nÜ‘uº__
));

28 
__REDIRECT_NTHNL
 (
_lÚgjmp
,

29 (
__jmp_buf_g
 
__’v
[1], 
__v®
),

30 
__lÚgjmp_chk
è
__©Œibu‹__
 ((
__nÜ‘uº__
));

31 
__REDIRECT_NTHNL
 (
siglÚgjmp
,

32 (
__jmp_buf_g
 
__’v
[1], 
__v®
),

33 
__lÚgjmp_chk
è
__©Œibu‹__
 ((
__nÜ‘uº__
));

35 
__lÚgjmp_chk
 (
__jmp_buf_g
 
__’v
[1], 
__v®
),

36 
__THROWNL
 
__©Œibu‹__
 ((
__nÜ‘uº__
));

37 
	#lÚgjmp
 
__lÚgjmp_chk


	)

38 
	#_lÚgjmp
 
__lÚgjmp_chk


	)

39 
	#siglÚgjmp
 
__lÚgjmp_chk


	)

	@/usr/include/bits/sigaction.h

19 #iâdeà
_SIGNAL_H


24 
	ssigaùiÚ


27 #ifdeà
__USE_POSIX199309


31 
__sighªdËr_t
 
	m§_hªdËr
;

33 (*
	m§_sigaùiÚ
è(, 
	msigšfo_t
 *, *);

35 
	m__sigaùiÚ_hªdËr
;

36 
	#§_hªdËr
 
__sigaùiÚ_hªdËr
.
§_hªdËr


	)

37 
	#§_sigaùiÚ
 
__sigaùiÚ_hªdËr
.
§_sigaùiÚ


	)

39 
__sighªdËr_t
 
	m§_hªdËr
;

43 
__sig£t_t
 
	m§_mask
;

46 
	m§_æags
;

49 (*
	m§_»¡Ü”
) ();

53 
	#SA_NOCLDSTOP
 1

	)

54 
	#SA_NOCLDWAIT
 2

	)

55 
	#SA_SIGINFO
 4

	)

57 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_MISC


58 
	#SA_ONSTACK
 0x08000000

	)

60 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN2K8


61 
	#SA_RESTART
 0x10000000

	)

62 
	#SA_NODEFER
 0x40000000

	)

64 
	#SA_RESETHAND
 0x80000000

	)

66 #ifdeà
__USE_MISC


67 
	#SA_INTERRUPT
 0x20000000

	)

70 
	#SA_NOMASK
 
SA_NODEFER


	)

71 
	#SA_ONESHOT
 
SA_RESETHAND


	)

72 
	#SA_STACK
 
SA_ONSTACK


	)

76 
	#SIG_BLOCK
 0

	)

77 
	#SIG_UNBLOCK
 1

	)

78 
	#SIG_SETMASK
 2

	)

	@/usr/include/bits/sigcontext.h

18 #iâdeà
_BITS_SIGCONTEXT_H


19 
	#_BITS_SIGCONTEXT_H
 1

	)

21 #ià!
defšed
 
_SIGNAL_H
 && !defšed 
_SYS_UCONTEXT_H


25 
	#FP_XSTATE_MAGIC1
 0x46505853U

	)

26 
	#FP_XSTATE_MAGIC2
 0x46505845U

	)

27 
	#FP_XSTATE_MAGIC2_SIZE
 (
FP_XSTATE_MAGIC2
)

	)

29 
	s_åx_sw_by‹s


31 
__ušt32_t
 
	mmagic1
;

32 
__ušt32_t
 
	mex‹nded_size
;

33 
__ušt64_t
 
	mx¡©e_bv
;

34 
__ušt32_t
 
	mx¡©e_size
;

35 
__ušt32_t
 
	m·ddšg
[7];

38 
	s_å»g


40 
	msignifiÿnd
[4];

41 
	mexpÚ’t
;

44 
	s_åx»g


46 
	msignifiÿnd
[4];

47 
	mexpÚ’t
;

48 
	m·ddšg
[3];

51 
	s_xmm»g


53 
__ušt32_t
 
	m–em’t
[4];

58 #iâdeà
__x86_64__


60 
	s_å¡©e


63 
__ušt32_t
 
	mcw
;

64 
__ušt32_t
 
	msw
;

65 
__ušt32_t
 
	mg
;

66 
__ušt32_t
 
	moff
;

67 
__ušt32_t
 
	mcs£l
;

68 
__ušt32_t
 
	md©aoff
;

69 
__ušt32_t
 
	md©a£l
;

70 
_å»g
 
	m_¡
[8];

71 
	m¡©us
;

72 
	mmagic
;

75 
__ušt32_t
 
	m_fx¤_’v
[6];

76 
__ušt32_t
 
	mmxc¤
;

77 
__ušt32_t
 
	m»£rved
;

78 
_åx»g
 
	m_fx¤_¡
[8];

79 
_xmm»g
 
	m_xmm
[8];

80 
__ušt32_t
 
	m·ddšg
[56];

83 #iâdeà
sigcÚ‹xt_¡ruù


88 
	#sigcÚ‹xt_¡ruù
 
sigcÚ‹xt


	)

91 
	#X86_FXSR_MAGIC
 0x0000

	)

93 
	ssigcÚ‹xt


95 
	mgs
, 
	m__gsh
;

96 
	mfs
, 
	m__fsh
;

97 
	mes
, 
	m__esh
;

98 
	mds
, 
	m__dsh
;

99 
	medi
;

100 
	mesi
;

101 
	mebp
;

102 
	me¥
;

103 
	mebx
;

104 
	medx
;

105 
	mecx
;

106 
	m—x
;

107 
	mŒ­no
;

108 
	m”r
;

109 
	me
;

110 
	mcs
, 
	m__csh
;

111 
	meæags
;

112 
	me¥_©_sigÇl
;

113 
	mss
, 
	m__ssh
;

114 
_å¡©e
 * 
	må¡©e
;

115 
	mŞdmask
;

116 
	mü2
;

121 
	s_å¡©e


124 
__ušt16_t
 
	mcwd
;

125 
__ušt16_t
 
	mswd
;

126 
__ušt16_t
 
	máw
;

127 
__ušt16_t
 
	mfİ
;

128 
__ušt64_t
 
	mr
;

129 
__ušt64_t
 
	mrdp
;

130 
__ušt32_t
 
	mmxc¤
;

131 
__ušt32_t
 
	mmxü_mask
;

132 
_åx»g
 
	m_¡
[8];

133 
_xmm»g
 
	m_xmm
[16];

134 
__ušt32_t
 
	m·ddšg
[24];

137 
	ssigcÚ‹xt


139 
__ušt64_t
 
	mr8
;

140 
__ušt64_t
 
	mr9
;

141 
__ušt64_t
 
	mr10
;

142 
__ušt64_t
 
	mr11
;

143 
__ušt64_t
 
	mr12
;

144 
__ušt64_t
 
	mr13
;

145 
__ušt64_t
 
	mr14
;

146 
__ušt64_t
 
	mr15
;

147 
__ušt64_t
 
	mrdi
;

148 
__ušt64_t
 
	mrsi
;

149 
__ušt64_t
 
	mrbp
;

150 
__ušt64_t
 
	mrbx
;

151 
__ušt64_t
 
	mrdx
;

152 
__ušt64_t
 
	m¿x
;

153 
__ušt64_t
 
	mrcx
;

154 
__ušt64_t
 
	mr¥
;

155 
__ušt64_t
 
	mr
;

156 
__ušt64_t
 
	meæags
;

157 
	mcs
;

158 
	mgs
;

159 
	mfs
;

160 
	m__·d0
;

161 
__ušt64_t
 
	m”r
;

162 
__ušt64_t
 
	mŒ­no
;

163 
__ušt64_t
 
	mŞdmask
;

164 
__ušt64_t
 
	mü2
;

165 
__ex‹nsiÚ__
 union

167 
_å¡©e
 * 
	må¡©e
;

168 
__ušt64_t
 
	m__å¡©e_wÜd
;

170 
__ušt64_t
 
	m__»£rved1
 [8];

175 
	s_x§ve_hdr


177 
__ušt64_t
 
	mx¡©e_bv
;

178 
__ušt64_t
 
	m»£rved1
[2];

179 
__ušt64_t
 
	m»£rved2
[5];

182 
	s_ymmh_¡©e


184 
__ušt32_t
 
	mymmh_¥aû
[64];

187 
	s_x¡©e


189 
_å¡©e
 
	må¡©e
;

190 
_x§ve_hdr
 
	mx¡©e_hdr
;

191 
_ymmh_¡©e
 
	mymmh
;

	@/usr/include/bits/siginfo.h

19 #ià!
defšed
 
_SIGNAL_H
 && !defšed 
__Ãed_sigšfo_t
 \

20 && !
defšed
 
	g__Ãed_sigev’t_t


24 
	~<b™s/wÜdsize.h
>

26 #ià(!
defšed
 
__have_sigv®_t
 \

27 && (
defšed
 
	g_SIGNAL_H
 || defšed 
	g__Ãed_sigšfo_t
 \

28 || 
defšed
 
	g__Ãed_sigev’t_t
))

29 
	#__have_sigv®_t
 1

	)

32 
	usigv®


34 
	msiv®_št
;

35 *
	msiv®_±r
;

36 } 
	tsigv®_t
;

39 #ià(!
defšed
 
__have_sigšfo_t
 \

40 && (
defšed
 
	g_SIGNAL_H
 || defšed 
	g__Ãed_sigšfo_t
))

41 
	#__have_sigšfo_t
 1

	)

43 
	#__SI_MAX_SIZE
 128

	)

44 #ià
__WORDSIZE
 == 64

45 
	#__SI_PAD_SIZE
 ((
__SI_MAX_SIZE
 /  ()è- 4)

	)

47 
	#__SI_PAD_SIZE
 ((
__SI_MAX_SIZE
 /  ()è- 3)

	)

50 #ià
defšed
 
__x86_64__
 && 
__WORDSIZE
 == 32

55 
__şock_t
 
	t__©Œibu‹__
 ((
	t__®igÃd__
 (4))è
	t__sigchld_şock_t
;

56 
	#__SI_ALIGNMENT
 
	`__©Œibu‹__
 ((
	`__®igÃd__
 (8)))

	)

58 
__şock_t
 
	t__sigchld_şock_t
;

59 
	#__SI_ALIGNMENT


	)

64 
si_signo
;

65 
si_”ºo
;

67 
si_code
;

71 
_·d
[
__SI_PAD_SIZE
];

76 
__pid_t
 
si_pid
;

77 
__uid_t
 
si_uid
;

78 } 
_kl
;

83 
si_tid
;

84 
si_ov”run
;

85 
sigv®_t
 
si_sigv®
;

86 } 
_tim”
;

91 
__pid_t
 
si_pid
;

92 
__uid_t
 
si_uid
;

93 
sigv®_t
 
si_sigv®
;

94 } 
_¹
;

99 
__pid_t
 
si_pid
;

100 
__uid_t
 
si_uid
;

101 
si_¡©us
;

102 
__sigchld_şock_t
 
si_utime
;

103 
__sigchld_şock_t
 
si_¡ime
;

104 } 
_sigchld
;

109 *
si_addr
;

110 
si_addr_lsb
;

111 } 
_sigçuÉ
;

116 
si_bªd
;

117 
si_fd
;

118 } 
_sigpŞl
;

123 *
_ÿÎ_addr
;

124 
_sysÿÎ
;

125 
_¬ch
;

126 } 
_sigsys
;

127 } 
_sif›lds
;

128 } 
	tsigšfo_t
 
	t__SI_ALIGNMENT
;

132 
	#si_pid
 
_sif›lds
.
_kl
.
si_pid


	)

133 
	#si_uid
 
_sif›lds
.
_kl
.
si_uid


	)

134 
	#si_tim”id
 
_sif›lds
.
_tim”
.
si_tid


	)

135 
	#si_ov”run
 
_sif›lds
.
_tim”
.
si_ov”run


	)

136 
	#si_¡©us
 
_sif›lds
.
_sigchld
.
si_¡©us


	)

137 
	#si_utime
 
_sif›lds
.
_sigchld
.
si_utime


	)

138 
	#si_¡ime
 
_sif›lds
.
_sigchld
.
si_¡ime


	)

139 
	#si_v®ue
 
_sif›lds
.
_¹
.
si_sigv®


	)

140 
	#si_št
 
_sif›lds
.
_¹
.
si_sigv®
.
siv®_št


	)

141 
	#si_±r
 
_sif›lds
.
_¹
.
si_sigv®
.
siv®_±r


	)

142 
	#si_addr
 
_sif›lds
.
_sigçuÉ
.
si_addr


	)

143 
	#si_addr_lsb
 
_sif›lds
.
_sigçuÉ
.
si_addr_lsb


	)

144 
	#si_bªd
 
_sif›lds
.
_sigpŞl
.
si_bªd


	)

145 
	#si_fd
 
_sif›lds
.
_sigpŞl
.
si_fd


	)

146 
	#si_ÿÎ_addr
 
_sif›lds
.
_sigsys
.
_ÿÎ_addr


	)

147 
	#si_sysÿÎ
 
_sif›lds
.
_sigsys
.
_sysÿÎ


	)

148 
	#si_¬ch
 
_sif›lds
.
_sigsys
.
_¬ch


	)

155 
SI_ASYNCNL
 = -60,

156 
	#SI_ASYNCNL
 
SI_ASYNCNL


	)

157 
SI_TKILL
 = -6,

158 
	#SI_TKILL
 
SI_TKILL


	)

159 
SI_SIGIO
,

160 
	#SI_SIGIO
 
SI_SIGIO


	)

161 
SI_ASYNCIO
,

162 
	#SI_ASYNCIO
 
SI_ASYNCIO


	)

163 
SI_MESGQ
,

164 
	#SI_MESGQ
 
SI_MESGQ


	)

165 
SI_TIMER
,

166 
	#SI_TIMER
 
SI_TIMER


	)

167 
SI_QUEUE
,

168 
	#SI_QUEUE
 
SI_QUEUE


	)

169 
SI_USER
,

170 
	#SI_USER
 
SI_USER


	)

171 
SI_KERNEL
 = 0x80

172 
	#SI_KERNEL
 
SI_KERNEL


	)

179 
ILL_ILLOPC
 = 1,

180 
	#ILL_ILLOPC
 
ILL_ILLOPC


	)

181 
ILL_ILLOPN
,

182 
	#ILL_ILLOPN
 
ILL_ILLOPN


	)

183 
ILL_ILLADR
,

184 
	#ILL_ILLADR
 
ILL_ILLADR


	)

185 
ILL_ILLTRP
,

186 
	#ILL_ILLTRP
 
ILL_ILLTRP


	)

187 
ILL_PRVOPC
,

188 
	#ILL_PRVOPC
 
ILL_PRVOPC


	)

189 
ILL_PRVREG
,

190 
	#ILL_PRVREG
 
ILL_PRVREG


	)

191 
ILL_COPROC
,

192 
	#ILL_COPROC
 
ILL_COPROC


	)

193 
ILL_BADSTK


194 
	#ILL_BADSTK
 
ILL_BADSTK


	)

200 
FPE_INTDIV
 = 1,

201 
	#FPE_INTDIV
 
FPE_INTDIV


	)

202 
FPE_INTOVF
,

203 
	#FPE_INTOVF
 
FPE_INTOVF


	)

204 
FPE_FLTDIV
,

205 
	#FPE_FLTDIV
 
FPE_FLTDIV


	)

206 
FPE_FLTOVF
,

207 
	#FPE_FLTOVF
 
FPE_FLTOVF


	)

208 
FPE_FLTUND
,

209 
	#FPE_FLTUND
 
FPE_FLTUND


	)

210 
FPE_FLTRES
,

211 
	#FPE_FLTRES
 
FPE_FLTRES


	)

212 
FPE_FLTINV
,

213 
	#FPE_FLTINV
 
FPE_FLTINV


	)

214 
FPE_FLTSUB


215 
	#FPE_FLTSUB
 
FPE_FLTSUB


	)

221 
SEGV_MAPERR
 = 1,

222 
	#SEGV_MAPERR
 
SEGV_MAPERR


	)

223 
SEGV_ACCERR


224 
	#SEGV_ACCERR
 
SEGV_ACCERR


	)

230 
BUS_ADRALN
 = 1,

231 
	#BUS_ADRALN
 
BUS_ADRALN


	)

232 
BUS_ADRERR
,

233 
	#BUS_ADRERR
 
BUS_ADRERR


	)

234 
BUS_OBJERR
,

235 
	#BUS_OBJERR
 
BUS_OBJERR


	)

236 
BUS_MCEERR_AR
,

237 
	#BUS_MCEERR_AR
 
BUS_MCEERR_AR


	)

238 
BUS_MCEERR_AO


239 
	#BUS_MCEERR_AO
 
BUS_MCEERR_AO


	)

245 
TRAP_BRKPT
 = 1,

246 
	#TRAP_BRKPT
 
TRAP_BRKPT


	)

247 
TRAP_TRACE


248 
	#TRAP_TRACE
 
TRAP_TRACE


	)

254 
CLD_EXITED
 = 1,

255 
	#CLD_EXITED
 
CLD_EXITED


	)

256 
CLD_KILLED
,

257 
	#CLD_KILLED
 
CLD_KILLED


	)

258 
CLD_DUMPED
,

259 
	#CLD_DUMPED
 
CLD_DUMPED


	)

260 
CLD_TRAPPED
,

261 
	#CLD_TRAPPED
 
CLD_TRAPPED


	)

262 
CLD_STOPPED
,

263 
	#CLD_STOPPED
 
CLD_STOPPED


	)

264 
CLD_CONTINUED


265 
	#CLD_CONTINUED
 
CLD_CONTINUED


	)

271 
POLL_IN
 = 1,

272 
	#POLL_IN
 
POLL_IN


	)

273 
POLL_OUT
,

274 
	#POLL_OUT
 
POLL_OUT


	)

275 
POLL_MSG
,

276 
	#POLL_MSG
 
POLL_MSG


	)

277 
POLL_ERR
,

278 
	#POLL_ERR
 
POLL_ERR


	)

279 
POLL_PRI
,

280 
	#POLL_PRI
 
POLL_PRI


	)

281 
POLL_HUP


282 
	#POLL_HUP
 
POLL_HUP


	)

285 #undeà
__Ãed_sigšfo_t


289 #ià(
defšed
 
_SIGNAL_H
 || defšed 
__Ãed_sigev’t_t
) \

290 && !
defšed
 
__have_sigev’t_t


291 
	#__have_sigev’t_t
 1

	)

294 
	#__SIGEV_MAX_SIZE
 64

	)

295 #ià
__WORDSIZE
 == 64

296 
	#__SIGEV_PAD_SIZE
 ((
__SIGEV_MAX_SIZE
 /  ()è- 4)

	)

298 
	#__SIGEV_PAD_SIZE
 ((
__SIGEV_MAX_SIZE
 /  ()è- 3)

	)

302 #iâdeà
__have_±h»ad_©Œ_t


303 
±h»ad_©Œ_t
 
	t±h»ad_©Œ_t
;

304 
	#__have_±h»ad_©Œ_t
 1

	)

307 
	ssigev’t


309 
sigv®_t
 
sigev_v®ue
;

310 
sigev_signo
;

311 
sigev_nÙify
;

315 
_·d
[
__SIGEV_PAD_SIZE
];

319 
__pid_t
 
_tid
;

323 (*
_funùiÚ
è(
sigv®_t
);

324 
±h»ad_©Œ_t
 *
_©Œibu‹
;

325 } 
_sigev_th»ad
;

326 } 
_sigev_un
;

327 } 
	tsigev’t_t
;

330 
	#sigev_nÙify_funùiÚ
 
_sigev_un
.
_sigev_th»ad
.
_funùiÚ


	)

331 
	#sigev_nÙify_©Œibu‹s
 
_sigev_un
.
_sigev_th»ad
.
_©Œibu‹


	)

336 
SIGEV_SIGNAL
 = 0,

337 
	#SIGEV_SIGNAL
 
SIGEV_SIGNAL


	)

338 
SIGEV_NONE
,

339 
	#SIGEV_NONE
 
SIGEV_NONE


	)

340 
SIGEV_THREAD
,

341 
	#SIGEV_THREAD
 
SIGEV_THREAD


	)

343 
SIGEV_THREAD_ID
 = 4

344 
	#SIGEV_THREAD_ID
 
SIGEV_THREAD_ID


	)

	@/usr/include/bits/signum.h

19 #ifdef 
_SIGNAL_H


22 
	#SIG_ERR
 ((
__sighªdËr_t
è-1è

	)

23 
	#SIG_DFL
 ((
__sighªdËr_t
è0è

	)

24 
	#SIG_IGN
 ((
__sighªdËr_t
è1è

	)

26 #ifdeà
__USE_UNIX98


27 
	#SIG_HOLD
 ((
__sighªdËr_t
è2è

	)

32 
	#SIGHUP
 1

	)

33 
	#SIGINT
 2

	)

34 
	#SIGQUIT
 3

	)

35 
	#SIGILL
 4

	)

36 
	#SIGTRAP
 5

	)

37 
	#SIGABRT
 6

	)

38 
	#SIGIOT
 6

	)

39 
	#SIGBUS
 7

	)

40 
	#SIGFPE
 8

	)

41 
	#SIGKILL
 9

	)

42 
	#SIGUSR1
 10

	)

43 
	#SIGSEGV
 11

	)

44 
	#SIGUSR2
 12

	)

45 
	#SIGPIPE
 13

	)

46 
	#SIGALRM
 14

	)

47 
	#SIGTERM
 15

	)

48 
	#SIGSTKFLT
 16

	)

49 
	#SIGCLD
 
SIGCHLD


	)

50 
	#SIGCHLD
 17

	)

51 
	#SIGCONT
 18

	)

52 
	#SIGSTOP
 19

	)

53 
	#SIGTSTP
 20

	)

54 
	#SIGTTIN
 21

	)

55 
	#SIGTTOU
 22

	)

56 
	#SIGURG
 23

	)

57 
	#SIGXCPU
 24

	)

58 
	#SIGXFSZ
 25

	)

59 
	#SIGVTALRM
 26

	)

60 
	#SIGPROF
 27

	)

61 
	#SIGWINCH
 28

	)

62 
	#SIGPOLL
 
SIGIO


	)

63 
	#SIGIO
 29

	)

64 
	#SIGPWR
 30

	)

65 
	#SIGSYS
 31

	)

66 
	#SIGUNUSED
 31

	)

68 
	#_NSIG
 65

	)

71 
	#SIGRTMIN
 (
	`__libc_cu¼’t_sig¹mš
 ())

	)

72 
	#SIGRTMAX
 (
	`__libc_cu¼’t_sig¹max
 ())

	)

76 
	#__SIGRTMIN
 32

	)

77 
	#__SIGRTMAX
 (
_NSIG
 - 1)

	)

	@/usr/include/bits/sigset.h

19 #iâdef 
_SIGSET_H_ty³s


20 
	#_SIGSET_H_ty³s
 1

	)

22 
	t__sig_©omic_t
;

26 
	#_SIGSET_NWORDS
 (1024 / (8 *  ()))

	)

29 
	m__v®
[
_SIGSET_NWORDS
];

30 } 
	t__sig£t_t
;

41 #ià!
defšed
 
_SIGSET_H_âs
 && defšed 
_SIGNAL_H


42 
	#_SIGSET_H_âs
 1

	)

44 #iâdeà
_EXTERN_INLINE


45 
	#_EXTERN_INLINE
 
__ex‹º_šlše


	)

49 
	#__sigmask
(
sig
) \

50 (((è1è<< (((
sig
è- 1è% (8 *  ())))

	)

53 
	#__sigwÜd
(
sig
è(((sigè- 1è/ (8 *  ()))

	)

55 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

56 
	#__sigem±y£t
(
£t
) \

57 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

58 
sig£t_t
 *
__£t
 = (
£t
); \

59 --
__út
 >ğ0è
__£t
->
__v®
[__cnt] = 0; \

60 0; }))

	)

61 
	#__sigfl£t
(
£t
) \

62 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

63 
sig£t_t
 *
__£t
 = (
£t
); \

64 --
__út
 >ğ0è
__£t
->
__v®
[__cnt] = ~0UL; \

65 0; }))

	)

67 #ifdeà
__USE_GNU


71 
	#__sigi£m±y£t
(
£t
) \

72 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

73 cÚ¡ 
sig£t_t
 *
__£t
 = (
£t
); \

74 
__»t
 = 
__£t
->
__v®
[--
__út
]; \

75 !
__»t
 && --
__út
 >= 0) \

76 
__»t
 = 
__£t
->
__v®
[
__út
]; \

77 
__»t
 =ğ0; }))

	)

78 
	#__sigªd£t
(
de¡
, 
Ëá
, 
right
) \

79 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

80 
sig£t_t
 *
__de¡
 = (
de¡
); \

81 cÚ¡ 
sig£t_t
 *
__Ëá
 = (
Ëá
); \

82 cÚ¡ 
sig£t_t
 *
__right
 = (
right
); \

83 --
__út
 >= 0) \

84 
__de¡
->
__v®
[
__út
] = (
__Ëá
->__val[__cnt] \

85 & 
__right
->
__v®
[
__út
]); \

86 0; }))

	)

87 
	#__sigÜ£t
(
de¡
, 
Ëá
, 
right
) \

88 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

89 
sig£t_t
 *
__de¡
 = (
de¡
); \

90 cÚ¡ 
sig£t_t
 *
__Ëá
 = (
Ëá
); \

91 cÚ¡ 
sig£t_t
 *
__right
 = (
right
); \

92 --
__út
 >= 0) \

93 
__de¡
->
__v®
[
__út
] = (
__Ëá
->__val[__cnt] \

94 | 
__right
->
__v®
[
__út
]); \

95 0; }))

	)

102 
__sigismemb”
 (cÚ¡ 
__sig£t_t
 *, );

103 
__sigadd£t
 (
__sig£t_t
 *, );

104 
__sigd–£t
 (
__sig£t_t
 *, );

106 #ifdeà
__USE_EXTERN_INLINES


107 
	#__SIGSETFN
(
NAME
, 
BODY
, 
CONST
) \

108 
_EXTERN_INLINE
 \

109 
	`NAME
 (
CONST
 
__sig£t_t
 *
__£t
, 
__sig
) \

111 
__mask
 = 
	`__sigmask
 (
__sig
); \

112 
__wÜd
 = 
	`__sigwÜd
 (
__sig
); \

113  
BODY
; \

114 }

	)

116 
__SIGSETFN
 (
__sigismemb”
, (
__£t
->
__v®
[
__wÜd
] & 
__mask
) ? 1 : 0, const)

117 
__SIGSETFN
 (
__sigadd£t
, ((
__£t
->
__v®
[
__wÜd
] |ğ
__mask
), 0), )

118 
__SIGSETFN
 (
__sigd–£t
, ((
__£t
->
__v®
[
__wÜd
] &ğ~
__mask
), 0), )

120 #undeà
__SIGSETFN


	@/usr/include/bits/sigstack.h

19 #iâdeà
_SIGNAL_H


25 
	ssig¡ack


27 *
	mss_¥
;

28 
	mss_Ú¡ack
;

35 
	mSS_ONSTACK
 = 1,

36 
	#SS_ONSTACK
 
SS_ONSTACK


	)

37 
	mSS_DISABLE


38 
	#SS_DISABLE
 
SS_DISABLE


	)

42 
	#MINSIGSTKSZ
 2048

	)

45 
	#SIGSTKSZ
 8192

	)

49 
	ssig®t¡ack


51 *
	mss_¥
;

52 
	mss_æags
;

53 
size_t
 
	mss_size
;

54 } 
	t¡ack_t
;

	@/usr/include/bits/sigthread.h

19 #iâdeà
_BITS_SIGTHREAD_H


20 
	#_BITS_SIGTHREAD_H
 1

	)

22 #ià!
defšed
 
_SIGNAL_H
 && !defšed 
_PTHREAD_H


30 
	$±h»ad_sigmask
 (
__how
,

31 cÚ¡ 
__sig£t_t
 *
__»¡riù
 
__Ãwmask
,

32 
__sig£t_t
 *
__»¡riù
 
__Şdmask
)
__THROW
;

35 
	$±h»ad_kl
 (
±h»ad_t
 
__th»adid
, 
__signo
è
__THROW
;

37 #ifdeà
__USE_GNU


39 
	$±h»ad_sigqueue
 (
±h»ad_t
 
__th»adid
, 
__signo
,

40 cÚ¡ 
sigv®
 
__v®ue
è
__THROW
;

	@/usr/include/bits/stat.h

18 #ià!
defšed
 
_SYS_STAT_H
 && !defšed 
_FCNTL_H


22 #iâdeà
_BITS_STAT_H


23 
	#_BITS_STAT_H
 1

	)

26 #iâdeà
__x86_64__


27 
	#_STAT_VER_LINUX_OLD
 1

	)

28 
	#_STAT_VER_KERNEL
 1

	)

29 
	#_STAT_VER_SVR4
 2

	)

30 
	#_STAT_VER_LINUX
 3

	)

33 
	#_MKNOD_VER_LINUX
 1

	)

34 
	#_MKNOD_VER_SVR4
 2

	)

35 
	#_MKNOD_VER
 
_MKNOD_VER_LINUX


	)

37 
	#_STAT_VER_KERNEL
 0

	)

38 
	#_STAT_VER_LINUX
 1

	)

41 
	#_MKNOD_VER_LINUX
 0

	)

44 
	#_STAT_VER
 
_STAT_VER_LINUX


	)

46 
	s¡©


48 
__dev_t
 
	m¡_dev
;

49 #iâdeà
__x86_64__


50 
	m__·d1
;

52 #ià
defšed
 
__x86_64__
 || !defšed 
__USE_FILE_OFFSET64


53 
__šo_t
 
	m¡_šo
;

55 
__šo_t
 
	m__¡_šo
;

57 #iâdeà
__x86_64__


58 
__mode_t
 
	m¡_mode
;

59 
__Æšk_t
 
	m¡_Æšk
;

61 
__Æšk_t
 
	m¡_Æšk
;

62 
__mode_t
 
	m¡_mode
;

64 
__uid_t
 
	m¡_uid
;

65 
__gid_t
 
	m¡_gid
;

66 #ifdeà
__x86_64__


67 
	m__·d0
;

69 
__dev_t
 
	m¡_rdev
;

70 #iâdeà
__x86_64__


71 
	m__·d2
;

73 #ià
defšed
 
__x86_64__
 || !defšed 
__USE_FILE_OFFSET64


74 
__off_t
 
	m¡_size
;

76 
__off64_t
 
	m¡_size
;

78 
__blksize_t
 
	m¡_blksize
;

79 #ià
defšed
 
__x86_64__
 || !defšed 
__USE_FILE_OFFSET64


80 
__blkút_t
 
	m¡_blocks
;

82 
__blkút64_t
 
	m¡_blocks
;

84 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN2K8


91 
time¥ec
 
	m¡_©im
;

92 
time¥ec
 
	m¡_mtim
;

93 
time¥ec
 
	m¡_ùim
;

94 
	#¡_©ime
 
¡_©im
.
tv_£c


	)

95 
	#¡_mtime
 
¡_mtim
.
tv_£c


	)

96 
	#¡_ùime
 
¡_ùim
.
tv_£c


	)

98 
__time_t
 
	m¡_©ime
;

99 
__sysÿÎ_ulÚg_t
 
	m¡_©im’£c
;

100 
__time_t
 
	m¡_mtime
;

101 
__sysÿÎ_ulÚg_t
 
	m¡_mtim’£c
;

102 
__time_t
 
	m¡_ùime
;

103 
__sysÿÎ_ulÚg_t
 
	m¡_ùim’£c
;

105 #ifdeà
__x86_64__


106 
__sysÿÎ_¦Úg_t
 
	m__glibc_»£rved
[3];

108 #iâdeà
__USE_FILE_OFFSET64


109 
	m__glibc_»£rved4
;

110 
	m__glibc_»£rved5
;

112 
__šo64_t
 
	m¡_šo
;

117 #ifdeà
__USE_LARGEFILE64


119 
	s¡©64


121 
__dev_t
 
	m¡_dev
;

122 #ifdeà
__x86_64__


123 
__šo64_t
 
	m¡_šo
;

124 
__Æšk_t
 
	m¡_Æšk
;

125 
__mode_t
 
	m¡_mode
;

127 
	m__·d1
;

128 
__šo_t
 
	m__¡_šo
;

129 
__mode_t
 
	m¡_mode
;

130 
__Æšk_t
 
	m¡_Æšk
;

132 
__uid_t
 
	m¡_uid
;

133 
__gid_t
 
	m¡_gid
;

134 #ifdeà
__x86_64__


135 
	m__·d0
;

136 
__dev_t
 
	m¡_rdev
;

137 
__off_t
 
	m¡_size
;

139 
__dev_t
 
	m¡_rdev
;

140 
	m__·d2
;

141 
__off64_t
 
	m¡_size
;

143 
__blksize_t
 
	m¡_blksize
;

144 
__blkút64_t
 
	m¡_blocks
;

145 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN2K8


152 
time¥ec
 
	m¡_©im
;

153 
time¥ec
 
	m¡_mtim
;

154 
time¥ec
 
	m¡_ùim
;

156 
__time_t
 
	m¡_©ime
;

157 
__sysÿÎ_ulÚg_t
 
	m¡_©im’£c
;

158 
__time_t
 
	m¡_mtime
;

159 
__sysÿÎ_ulÚg_t
 
	m¡_mtim’£c
;

160 
__time_t
 
	m¡_ùime
;

161 
__sysÿÎ_ulÚg_t
 
	m¡_ùim’£c
;

163 #ifdeà
__x86_64__


164 
__sysÿÎ_¦Úg_t
 
	m__glibc_»£rved
[3];

166 
__šo64_t
 
	m¡_šo
;

172 
	#_STATBUF_ST_BLKSIZE


	)

173 
	#_STATBUF_ST_RDEV


	)

175 
	#_STATBUF_ST_NSEC


	)

179 
	#__S_IFMT
 0170000

	)

182 
	#__S_IFDIR
 0040000

	)

183 
	#__S_IFCHR
 0020000

	)

184 
	#__S_IFBLK
 0060000

	)

185 
	#__S_IFREG
 0100000

	)

186 
	#__S_IFIFO
 0010000

	)

187 
	#__S_IFLNK
 0120000

	)

188 
	#__S_IFSOCK
 0140000

	)

192 
	#__S_TYPEISMQ
(
buf
è((buf)->
¡_mode
 - (buf)->¡_mode)

	)

193 
	#__S_TYPEISSEM
(
buf
è((buf)->
¡_mode
 - (buf)->¡_mode)

	)

194 
	#__S_TYPEISSHM
(
buf
è((buf)->
¡_mode
 - (buf)->¡_mode)

	)

198 
	#__S_ISUID
 04000

	)

199 
	#__S_ISGID
 02000

	)

200 
	#__S_ISVTX
 01000

	)

201 
	#__S_IREAD
 0400

	)

202 
	#__S_IWRITE
 0200

	)

203 
	#__S_IEXEC
 0100

	)

205 #ifdeà
__USE_ATFILE


206 
	#UTIME_NOW
 ((1È<< 30è- 1l)

	)

207 
	#UTIME_OMIT
 ((1È<< 30è- 2l)

	)

	@/usr/include/bits/stdio-ldbl.h

19 #iâdeà
_STDIO_H


23 
__BEGIN_NAMESPACE_STD


24 
	$__LDBL_REDIR_DECL
 (
årštf
)

25 
	$__LDBL_REDIR_DECL
 (
´štf
)

26 
	$__LDBL_REDIR_DECL
 (
¥rštf
)

27 
	$__LDBL_REDIR_DECL
 (
vårštf
)

28 
	$__LDBL_REDIR_DECL
 (
v´štf
)

29 
	$__LDBL_REDIR_DECL
 (
v¥rštf
)

30 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

31 && !
defšed
 
__REDIRECT
 \

32 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

33 
	$__LDBL_REDIR1_DECL
 (
fsÿnf
, 
__Ædbl___isoc99_fsÿnf
)

34 
	$__LDBL_REDIR1_DECL
 (
sÿnf
, 
__Ædbl___isoc99_sÿnf
)

35 
	$__LDBL_REDIR1_DECL
 (
ssÿnf
, 
__Ædbl___isoc99_ssÿnf
)

37 
	$__LDBL_REDIR_DECL
 (
fsÿnf
)

38 
	$__LDBL_REDIR_DECL
 (
sÿnf
)

39 
	$__LDBL_REDIR_DECL
 (
ssÿnf
)

41 
__END_NAMESPACE_STD


43 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


44 
__BEGIN_NAMESPACE_C99


45 
	$__LDBL_REDIR_DECL
 (
¢´štf
)

46 
	$__LDBL_REDIR_DECL
 (
v¢´štf
)

47 
__END_NAMESPACE_C99


50 #ifdef 
__USE_ISOC99


51 
__BEGIN_NAMESPACE_C99


52 #ià!
defšed
 
__USE_GNU
 && !defšed 
__REDIRECT
 \

53 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

54 
	$__LDBL_REDIR1_DECL
 (
vfsÿnf
, 
__Ædbl___isoc99_vfsÿnf
)

55 
	$__LDBL_REDIR1_DECL
 (
vsÿnf
, 
__Ædbl___isoc99_vsÿnf
)

56 
	$__LDBL_REDIR1_DECL
 (
vssÿnf
, 
__Ædbl___isoc99_vssÿnf
)

58 
	$__LDBL_REDIR_DECL
 (
vfsÿnf
)

59 
	$__LDBL_REDIR_DECL
 (
vssÿnf
)

60 
	$__LDBL_REDIR_DECL
 (
vsÿnf
)

62 
__END_NAMESPACE_C99


65 #ifdeà
__USE_XOPEN2K8


66 
	$__LDBL_REDIR_DECL
 (
vd´štf
)

67 
	$__LDBL_REDIR_DECL
 (
d´štf
)

70 #ifdeà
__USE_GNU


71 
	$__LDBL_REDIR_DECL
 (
va¥rštf
)

72 
	$__LDBL_REDIR_DECL
 (
__a¥rštf
)

73 
	$__LDBL_REDIR_DECL
 (
a¥rštf
)

74 
	$__LDBL_REDIR_DECL
 (
ob¡ack_´štf
)

75 
	$__LDBL_REDIR_DECL
 (
ob¡ack_v´štf
)

78 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


79 
	$__LDBL_REDIR_DECL
 (
__¥rštf_chk
)

80 
	$__LDBL_REDIR_DECL
 (
__v¥rštf_chk
)

81 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


82 
	$__LDBL_REDIR_DECL
 (
__¢´štf_chk
)

83 
	$__LDBL_REDIR_DECL
 (
__v¢´štf_chk
)

85 #ià
__USE_FORTIFY_LEVEL
 > 1

86 
	$__LDBL_REDIR_DECL
 (
__årštf_chk
)

87 
	$__LDBL_REDIR_DECL
 (
__´štf_chk
)

88 
	$__LDBL_REDIR_DECL
 (
__vårštf_chk
)

89 
	$__LDBL_REDIR_DECL
 (
__v´štf_chk
)

90 #ifdeà
__USE_XOPEN2K8


91 
	$__LDBL_REDIR_DECL
 (
__d´štf_chk
)

92 
	$__LDBL_REDIR_DECL
 (
__vd´štf_chk
)

94 #ifdeà
__USE_GNU


95 
	$__LDBL_REDIR_DECL
 (
__a¥rštf_chk
)

96 
	$__LDBL_REDIR_DECL
 (
__va¥rštf_chk
)

97 
	$__LDBL_REDIR_DECL
 (
__ob¡ack_´štf_chk
)

98 
	$__LDBL_REDIR_DECL
 (
__ob¡ack_v´štf_chk
)

	@/usr/include/bits/stdio.h

19 #iâdeà
_STDIO_H


23 #iâdeà
__ex‹º_šlše


24 
	#__STDIO_INLINE
 
šlše


	)

26 
	#__STDIO_INLINE
 
__ex‹º_šlše


	)

30 #ifdeà
__USE_EXTERN_INLINES


33 #ià!(
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ
)

35 
__STDIO_INLINE
 

36 
	$v´štf
 (cÚ¡ *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__¬g
)

38  
	`vårštf
 (
¡dout
, 
__fmt
, 
__¬g
);

39 
	}
}

43 
__STDIO_INLINE
 

44 
	$g‘ch¬
 ()

46  
	`_IO_g‘c
 (
¡dš
);

47 
	}
}

50 #ifdeà
__USE_MISC


52 
__STDIO_INLINE
 

53 
	$fg‘c_uÆocked
 (
FILE
 *
__å
)

55  
	`_IO_g‘c_uÆocked
 (
__å
);

56 
	}
}

60 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


62 
__STDIO_INLINE
 

63 
	$g‘c_uÆocked
 (
FILE
 *
__å
)

65  
	`_IO_g‘c_uÆocked
 (
__å
);

66 
	}
}

69 
__STDIO_INLINE
 

70 
	$g‘ch¬_uÆocked
 ()

72  
	`_IO_g‘c_uÆocked
 (
¡dš
);

73 
	}
}

78 
__STDIO_INLINE
 

79 
	$putch¬
 (
__c
)

81  
	`_IO_putc
 (
__c
, 
¡dout
);

82 
	}
}

85 #ifdeà
__USE_MISC


87 
__STDIO_INLINE
 

88 
	$åutc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
)

90  
	`_IO_putc_uÆocked
 (
__c
, 
__¡»am
);

91 
	}
}

95 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


97 
__STDIO_INLINE
 

98 
	$putc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
)

100  
	`_IO_putc_uÆocked
 (
__c
, 
__¡»am
);

101 
	}
}

104 
__STDIO_INLINE
 

105 
	$putch¬_uÆocked
 (
__c
)

107  
	`_IO_putc_uÆocked
 (
__c
, 
¡dout
);

108 
	}
}

112 #ifdef 
__USE_GNU


114 
__STDIO_INLINE
 
_IO_ssize_t


115 
	$g‘lše
 (**
__lš•Œ
, 
size_t
 *
__n
, 
FILE
 *
__¡»am
)

117  
	`__g‘d–im
 (
__lš•Œ
, 
__n
, '\n', 
__¡»am
);

118 
	}
}

122 #ifdeà
__USE_MISC


124 
__STDIO_INLINE
 

125 
__NTH
 (
	$ãof_uÆocked
 (
FILE
 *
__¡»am
))

127  
	`_IO_ãof_uÆocked
 (
__¡»am
);

128 
	}
}

131 
__STDIO_INLINE
 

132 
__NTH
 (
	$ã¼Ü_uÆocked
 (
FILE
 *
__¡»am
))

134  
	`_IO_ã¼Ü_uÆocked
 (
__¡»am
);

135 
	}
}

141 #ià
defšed
 
__USE_MISC
 && defšed 
__GNUC__
 && defšed 
__OPTIMIZE__
 \

142 && !
defšed
 
	g__ılu¥lus


144 
	#ä—d_uÆocked
(
±r
, 
size
, 
n
, 
¡»am
) \

145 (
	`__ex‹nsiÚ__
 ((
	`__butš_cÚ¡ªt_p
 (
size
è&& __butš_cÚ¡ªt_°(
n
) \

146 && (
size_t
è(
size
è* (size_tè(
n
) <= 8 \

147 && (
size_t
è(
size
) != 0) \

148 ? ({ *
__±r
 = (*è(
±r
); \

149 
FILE
 *
__¡»am
 = (
¡»am
); \

150 
size_t
 
__út
; \

151 
__út
 = (
size_t
è(
size
è* (size_tè(
n
); \

152 
__út
 > 0; --__cnt) \

154 
__c
 = 
	`_IO_g‘c_uÆocked
 (
__¡»am
); \

155 ià(
__c
 =ğ
EOF
) \

157 *
__±r
++ = 
__c
; \

159 ((
size_t
è(
size
è* (size_tè(
n
è- 
__út
) \

160 / (
size_t
è(
size
); }) \

161 : (((
	`__butš_cÚ¡ªt_p
 (
size
è&& (
size_t
) (size) == 0) \

162 || (
	`__butš_cÚ¡ªt_p
 (
n
è&& (
size_t
) (n) == 0)) \

164 ? ((è(
±r
), (è(
¡»am
), (è(
size
), \

165 (è(
n
), (
size_t
) 0) \

166 : 
	`ä—d_uÆocked
 (
±r
, 
size
, 
n
, 
¡»am
))))

	)

168 
	#fwr™e_uÆocked
(
±r
, 
size
, 
n
, 
¡»am
) \

169 (
	`__ex‹nsiÚ__
 ((
	`__butš_cÚ¡ªt_p
 (
size
è&& __butš_cÚ¡ªt_°(
n
) \

170 && (
size_t
è(
size
è* (size_tè(
n
) <= 8 \

171 && (
size_t
è(
size
) != 0) \

172 ? ({ cÚ¡ *
__±r
 = (cÚ¡ *è(
±r
); \

173 
FILE
 *
__¡»am
 = (
¡»am
); \

174 
size_t
 
__út
; \

175 
__út
 = (
size_t
è(
size
è* (size_tè(
n
); \

176 
__út
 > 0; --__cnt) \

177 ià(
	`_IO_putc_uÆocked
 (*
__±r
++, 
__¡»am
è=ğ
EOF
) \

179 ((
size_t
è(
size
è* (size_tè(
n
è- 
__út
) \

180 / (
size_t
è(
size
); }) \

181 : (((
	`__butš_cÚ¡ªt_p
 (
size
è&& (
size_t
) (size) == 0) \

182 || (
	`__butš_cÚ¡ªt_p
 (
n
è&& (
size_t
) (n) == 0)) \

184 ? ((è(
±r
), (è(
¡»am
), (è(
size
), \

185 (è(
n
), (
size_t
) 0) \

186 : 
	`fwr™e_uÆocked
 (
±r
, 
size
, 
n
, 
¡»am
))))

	)

190 #undeà
__STDIO_INLINE


	@/usr/include/bits/stdio2.h

19 #iâdeà
_STDIO_H


23 
	$__¥rštf_chk
 (*
__»¡riù
 
__s
, 
__æag
, 
size_t
 
__¦’
,

24 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

25 
	$__v¥rštf_chk
 (*
__»¡riù
 
__s
, 
__æag
, 
size_t
 
__¦’
,

26 cÚ¡ *
__»¡riù
 
__fÜm©
,

27 
_G_va_li¡
 
__­
è
__THROW
;

29 #ifdeà
__va_¬g_·ck


30 
__fÜtify_funùiÚ
 

31 
	`__NTH
 (
	$¥rštf
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fmt
, ...))

33  
	`__butš___¥rštf_chk
 (
__s
, 
__USE_FORTIFY_LEVEL
 - 1,

34 
	`__bos
 (
__s
), 
__fmt
, 
	`__va_¬g_·ck
 ());

35 
	}
}

36 #–ià!
defšed
 
__ılu¥lus


37 
	#¥rštf
(
¡r
, ...) \

38 
	`__butš___¥rštf_chk
 (
¡r
, 
__USE_FORTIFY_LEVEL
 - 1, 
	`__bos
 (str), \

39 
__VA_ARGS__
)

	)

42 
__fÜtify_funùiÚ
 

43 
__NTH
 (
	$v¥rštf
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fmt
,

44 
_G_va_li¡
 
__­
))

46  
	`__butš___v¥rštf_chk
 (
__s
, 
__USE_FORTIFY_LEVEL
 - 1,

47 
	`__bos
 (
__s
), 
__fmt
, 
__­
);

48 
	}
}

50 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


52 
	$__¢´štf_chk
 (*
__»¡riù
 
__s
, 
size_t
 
__n
, 
__æag
,

53 
size_t
 
__¦’
, cÚ¡ *
__»¡riù
 
__fÜm©
,

54 ...è
__THROW
;

55 
	$__v¢´štf_chk
 (*
__»¡riù
 
__s
, 
size_t
 
__n
, 
__æag
,

56 
size_t
 
__¦’
, cÚ¡ *
__»¡riù
 
__fÜm©
,

57 
_G_va_li¡
 
__­
è
__THROW
;

59 #ifdeà
__va_¬g_·ck


60 
__fÜtify_funùiÚ
 

61 
	`__NTH
 (
	$¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__n
,

62 cÚ¡ *
__»¡riù
 
__fmt
, ...))

64  
	`__butš___¢´štf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

65 
	`__bos
 (
__s
), 
__fmt
, 
	`__va_¬g_·ck
 ());

66 
	}
}

67 #–ià!
defšed
 
__ılu¥lus


68 
	#¢´štf
(
¡r
, 
Ën
, ...) \

69 
	`__butš___¢´štf_chk
 (
¡r
, 
Ën
, 
__USE_FORTIFY_LEVEL
 - 1, 
	`__bos
 (str), \

70 
__VA_ARGS__
)

	)

73 
__fÜtify_funùiÚ
 

74 
__NTH
 (
	$v¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__n
,

75 cÚ¡ *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__­
))

77  
	`__butš___v¢´štf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

78 
	`__bos
 (
__s
), 
__fmt
, 
__­
);

79 
	}
}

83 #ià
__USE_FORTIFY_LEVEL
 > 1

85 
__årštf_chk
 (
FILE
 *
__»¡riù
 
__¡»am
, 
__æag
,

86 cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

87 
__´štf_chk
 (
__æag
, cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

88 
__vårštf_chk
 (
FILE
 *
__»¡riù
 
__¡»am
, 
__æag
,

89 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__­
);

90 
__v´štf_chk
 (
__æag
, cÚ¡ *
__»¡riù
 
__fÜm©
,

91 
_G_va_li¡
 
__­
);

93 #ifdeà
__va_¬g_·ck


94 
__fÜtify_funùiÚ
 

95 
	$årštf
 (
FILE
 *
__»¡riù
 
__¡»am
, cÚ¡ *__»¡riù 
__fmt
, ...)

97  
	`__årštf_chk
 (
__¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

98 
	`__va_¬g_·ck
 ());

99 
	}
}

101 
__fÜtify_funùiÚ
 

102 
	$´štf
 (cÚ¡ *
__»¡riù
 
__fmt
, ...)

104  
	`__´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
	`__va_¬g_·ck
 ());

105 
	}
}

106 #–ià!
defšed
 
__ılu¥lus


107 
	#´štf
(...) \

108 
	`__´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

109 
	#årštf
(
¡»am
, ...) \

110 
	`__årštf_chk
 (
¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

113 
__fÜtify_funùiÚ
 

114 
	$v´štf
 (cÚ¡ *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__­
)

116 #ifdeà
__USE_EXTERN_INLINES


117  
	`__vårštf_chk
 (
¡dout
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

119  
	`__v´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

121 
	}
}

123 
__fÜtify_funùiÚ
 

124 
	$vårštf
 (
FILE
 *
__»¡riù
 
__¡»am
,

125 cÚ¡ *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__­
)

127  
	`__vårštf_chk
 (
__¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

128 
	}
}

130 #ifdeà
__USE_XOPEN2K8


131 
	$__d´štf_chk
 (
__fd
, 
__æag
, cÚ¡ *
__»¡riù
 
__fmt
,

132 ...è
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

133 
	$__vd´štf_chk
 (
__fd
, 
__æag
,

134 cÚ¡ *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__¬g
)

135 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

137 #ifdeà
__va_¬g_·ck


138 
__fÜtify_funùiÚ
 

139 
	$d´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
, ...)

141  
	`__d´štf_chk
 (
__fd
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

142 
	`__va_¬g_·ck
 ());

143 
	}
}

144 #–ià!
defšed
 
__ılu¥lus


145 
	#d´štf
(
fd
, ...) \

146 
	`__d´štf_chk
 (
fd
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

149 
__fÜtify_funùiÚ
 

150 
	$vd´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__­
)

152  
	`__vd´štf_chk
 (
__fd
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

153 
	}
}

156 #ifdeà
__USE_GNU


158 
	$__a¥rštf_chk
 (**
__»¡riù
 
__±r
, 
__æag
,

159 cÚ¡ *
__»¡riù
 
__fmt
, ...)

160 
__THROW
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 3, 4))è
__wur
;

161 
	$__va¥rštf_chk
 (**
__»¡riù
 
__±r
, 
__æag
,

162 cÚ¡ *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__¬g
)

163 
__THROW
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 3, 0))è
__wur
;

164 
	$__ob¡ack_´štf_chk
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

165 
__æag
, cÚ¡ *
__»¡riù
 
__fÜm©
,

167 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

168 
	$__ob¡ack_v´štf_chk
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

169 
__æag
,

170 cÚ¡ *
__»¡riù
 
__fÜm©
,

171 
_G_va_li¡
 
__¬gs
)

172 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

174 #ifdeà
__va_¬g_·ck


175 
__fÜtify_funùiÚ
 

176 
	`__NTH
 (
	$a¥rštf
 (**
__»¡riù
 
__±r
, cÚ¡ *__»¡riù 
__fmt
, ...))

178  
	`__a¥rštf_chk
 (
__±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

179 
	`__va_¬g_·ck
 ());

180 
	}
}

182 
__fÜtify_funùiÚ
 

183 
__NTH
 (
	$__a¥rštf
 (**
__»¡riù
 
__±r
, cÚ¡ *__»¡riù 
__fmt
,

186  
	`__a¥rštf_chk
 (
__±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

187 
	`__va_¬g_·ck
 ());

188 
	}
}

190 
__fÜtify_funùiÚ
 

191 
__NTH
 (
	$ob¡ack_´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

192 cÚ¡ *
__»¡riù
 
__fmt
, ...))

194  
	`__ob¡ack_´štf_chk
 (
__ob¡ack
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

195 
	`__va_¬g_·ck
 ());

196 
	}
}

197 #–ià!
defšed
 
__ılu¥lus


198 
	#a¥rštf
(
±r
, ...) \

199 
	`__a¥rštf_chk
 (
±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

200 
	#__a¥rštf
(
±r
, ...) \

201 
	`__a¥rštf_chk
 (
±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

202 
	#ob¡ack_´štf
(
ob¡ack
, ...) \

203 
	`__ob¡ack_´štf_chk
 (
ob¡ack
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

206 
__fÜtify_funùiÚ
 

207 
__NTH
 (
	$va¥rštf
 (**
__»¡riù
 
__±r
, cÚ¡ *__»¡riù 
__fmt
,

208 
_G_va_li¡
 
__­
))

210  
	`__va¥rštf_chk
 (
__±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

211 
	}
}

213 
__fÜtify_funùiÚ
 

214 
__NTH
 (
	$ob¡ack_v´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

215 cÚ¡ *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__­
))

217  
	`__ob¡ack_v´štf_chk
 (
__ob¡ack
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

218 
__­
);

219 
	}
}

225 #ià!
defšed
 
__USE_ISOC11
 \

226 || (
defšed
 
	g__ılu¥lus
 && __ılu¥lu <ğ201103L && !defšed 
__USE_GNU
)

227 *
	$__g‘s_chk
 (*
__¡r
, 
size_t
è
__wur
;

228 *
	`__REDIRECT
 (
__g‘s_w¬n
, (*
__¡r
), 
g‘s
)

229 
__wur
 
	`__w¬Ç‰r
 ("please use fgets or getline instead, gets can't "

232 
__fÜtify_funùiÚ
 
__wur
 *

233 
	$g‘s
 (*
__¡r
)

235 ià(
	`__bos
 (
__¡r
è!ğ(
size_t
) -1)

236  
	`__g‘s_chk
 (
__¡r
, 
	`__bos
 (__str));

237  
	`__g‘s_w¬n
 (
__¡r
);

238 
	}
}

241 *
	$__fg‘s_chk
 (*
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

242 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

243 *
	`__REDIRECT
 (
__fg‘s_®Ÿs
,

244 (*
__»¡riù
 
__s
, 
__n
,

245 
FILE
 *
__»¡riù
 
__¡»am
), 
fg‘s
è
__wur
;

246 *
	`__REDIRECT
 (
__fg‘s_chk_w¬n
,

247 (*
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

248 
FILE
 *
__»¡riù
 
__¡»am
), 
__fg‘s_chk
)

249 
__wur
 
	`__w¬Ç‰r
 ("fgets called with bigger sizehan†ength "

252 
__fÜtify_funùiÚ
 
__wur
 *

253 
	$fg‘s
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

255 ià(
	`__bos
 (
__s
è!ğ(
size_t
) -1)

257 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
) || __n <= 0)

258  
	`__fg‘s_chk
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__¡»am
);

260 ià((
size_t
è
__n
 > 
	`__bos
 (
__s
))

261  
	`__fg‘s_chk_w¬n
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__¡»am
);

263  
	`__fg‘s_®Ÿs
 (
__s
, 
__n
, 
__¡»am
);

264 
	}
}

266 
size_t
 
	$__ä—d_chk
 (*
__»¡riù
 
__±r
, 
size_t
 
__±¾’
,

267 
size_t
 
__size
, size_ˆ
__n
,

268 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

269 
size_t
 
	`__REDIRECT
 (
__ä—d_®Ÿs
,

270 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

271 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
),

272 
ä—d
è
__wur
;

273 
size_t
 
	`__REDIRECT
 (
__ä—d_chk_w¬n
,

274 (*
__»¡riù
 
__±r
, 
size_t
 
__±¾’
,

275 
size_t
 
__size
, size_ˆ
__n
,

276 
FILE
 *
__»¡riù
 
__¡»am
),

277 
__ä—d_chk
)

278 
__wur
 
	`__w¬Ç‰r
 ("fread called with bigger size *‚membhan†ength "

281 
__fÜtify_funùiÚ
 
__wur
 
size_t


282 
	$ä—d
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
, size_ˆ
__n
,

283 
FILE
 *
__»¡riù
 
__¡»am
)

285 ià(
	`__bos0
 (
__±r
è!ğ(
size_t
) -1)

287 ià(!
	`__butš_cÚ¡ªt_p
 (
__size
)

288 || !
	`__butš_cÚ¡ªt_p
 (
__n
)

289 || (
__size
 | 
__n
è>ğ(((
size_t
) 1) << (8 *  (size_t) / 2)))

290  
	`__ä—d_chk
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
, 
__¡»am
);

292 ià(
__size
 * 
__n
 > 
	`__bos0
 (
__±r
))

293  
	`__ä—d_chk_w¬n
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
, 
__¡»am
);

295  
	`__ä—d_®Ÿs
 (
__±r
, 
__size
, 
__n
, 
__¡»am
);

296 
	}
}

298 #ifdeà
__USE_GNU


299 *
	$__fg‘s_uÆocked_chk
 (*
__»¡riù
 
__s
, 
size_t
 
__size
,

300 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

301 *
	`__REDIRECT
 (
__fg‘s_uÆocked_®Ÿs
,

302 (*
__»¡riù
 
__s
, 
__n
,

303 
FILE
 *
__»¡riù
 
__¡»am
), 
fg‘s_uÆocked
è
__wur
;

304 *
	`__REDIRECT
 (
__fg‘s_uÆocked_chk_w¬n
,

305 (*
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

306 
FILE
 *
__»¡riù
 
__¡»am
), 
__fg‘s_uÆocked_chk
)

307 
__wur
 
	`__w¬Ç‰r
 ("fgets_unlocked called with bigger sizehan†ength "

310 
__fÜtify_funùiÚ
 
__wur
 *

311 
	$fg‘s_uÆocked
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

313 ià(
	`__bos
 (
__s
è!ğ(
size_t
) -1)

315 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
) || __n <= 0)

316  
	`__fg‘s_uÆocked_chk
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__¡»am
);

318 ià((
size_t
è
__n
 > 
	`__bos
 (
__s
))

319  
	`__fg‘s_uÆocked_chk_w¬n
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__¡»am
);

321  
	`__fg‘s_uÆocked_®Ÿs
 (
__s
, 
__n
, 
__¡»am
);

322 
	}
}

325 #ifdeà
__USE_MISC


326 #undeà
ä—d_uÆocked


327 
size_t
 
	$__ä—d_uÆocked_chk
 (*
__»¡riù
 
__±r
, 
size_t
 
__±¾’
,

328 
size_t
 
__size
, size_ˆ
__n
,

329 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

330 
size_t
 
	`__REDIRECT
 (
__ä—d_uÆocked_®Ÿs
,

331 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

332 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
),

333 
ä—d_uÆocked
è
__wur
;

334 
size_t
 
	`__REDIRECT
 (
__ä—d_uÆocked_chk_w¬n
,

335 (*
__»¡riù
 
__±r
, 
size_t
 
__±¾’
,

336 
size_t
 
__size
, size_ˆ
__n
,

337 
FILE
 *
__»¡riù
 
__¡»am
),

338 
__ä—d_uÆocked_chk
)

339 
__wur
 
	`__w¬Ç‰r
 ("fread_unlocked called with bigger size *‚membhan "

342 
__fÜtify_funùiÚ
 
__wur
 
size_t


343 
	$ä—d_uÆocked
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
, size_ˆ
__n
,

344 
FILE
 *
__»¡riù
 
__¡»am
)

346 ià(
	`__bos0
 (
__±r
è!ğ(
size_t
) -1)

348 ià(!
	`__butš_cÚ¡ªt_p
 (
__size
)

349 || !
	`__butš_cÚ¡ªt_p
 (
__n
)

350 || (
__size
 | 
__n
è>ğ(((
size_t
) 1) << (8 *  (size_t) / 2)))

351  
	`__ä—d_uÆocked_chk
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
,

352 
__¡»am
);

354 ià(
__size
 * 
__n
 > 
	`__bos0
 (
__±r
))

355  
	`__ä—d_uÆocked_chk_w¬n
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
,

356 
__¡»am
);

359 #ifdeà
__USE_EXTERN_INLINES


360 ià(
	`__butš_cÚ¡ªt_p
 (
__size
)

361 && 
	`__butš_cÚ¡ªt_p
 (
__n
)

362 && (
__size
 | 
__n
è< (((
size_t
) 1) << (8 *  (size_t) / 2))

363 && 
__size
 * 
__n
 <= 8)

365 
size_t
 
__út
 = 
__size
 * 
__n
;

366 *
__ıŒ
 = (*è
__±r
;

367 ià(
__út
 == 0)

370 ; 
__út
 > 0; --__cnt)

372 
__c
 = 
	`_IO_g‘c_uÆocked
 (
__¡»am
);

373 ià(
__c
 =ğ
EOF
)

375 *
__ıŒ
++ = 
__c
;

377  (
__ıŒ
 - (*è
__±r
è/ 
__size
;

380  
	`__ä—d_uÆocked_®Ÿs
 (
__±r
, 
__size
, 
__n
, 
__¡»am
);

381 
	}
}

	@/usr/include/bits/stdio_lim.h

18 #ià!
defšed
 
_STDIO_H
 && !defšed 
__Ãed_FOPEN_MAX
 && !defšed 
__Ãed_IOV_MAX


22 #ifdeà
_STDIO_H


23 
	#L_tm²am
 20

	)

24 
	#TMP_MAX
 238328

	)

25 
	#FILENAME_MAX
 4096

	)

27 #ifdeà
__USE_POSIX


28 
	#L_ù”mid
 9

	)

29 #ià!
defšed
 
__USE_XOPEN2K
 || defšed 
__USE_GNU


30 
	#L_cu£rid
 9

	)

35 #ià
defšed
 
__Ãed_FOPEN_MAX
 || defšed 
_STDIO_H


36 #undeà
FOPEN_MAX


37 
	#FOPEN_MAX
 16

	)

40 #ià
defšed
 
__Ãed_IOV_MAX
 && !defšed 
IOV_MAX


41 
	#IOV_MAX
 1024

	)

	@/usr/include/bits/stdlib-bsearch.h

19 
__ex‹º_šlše
 *

20 
	$b£¬ch
 (cÚ¡ *
__key
, cÚ¡ *
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

21 
__com·r_â_t
 
__com·r
)

23 
size_t
 
__l
, 
__u
, 
__idx
;

24 cÚ¡ *
__p
;

25 
__com·risÚ
;

27 
__l
 = 0;

28 
__u
 = 
__nmemb
;

29 
__l
 < 
__u
)

31 
__idx
 = (
__l
 + 
__u
) / 2;

32 
__p
 = (*è(((cÚ¡ *è
__ba£
è+ (
__idx
 * 
__size
));

33 
__com·risÚ
 = (*
__com·r
è(
__key
, 
__p
);

34 ià(
__com·risÚ
 < 0)

35 
__u
 = 
__idx
;

36 ià(
__com·risÚ
 > 0)

37 
__l
 = 
__idx
 + 1;

39  (*è
__p
;

42  
NULL
;

43 
	}
}

	@/usr/include/bits/stdlib-float.h

19 #iâdeà
_STDLIB_H


23 #ifdeà
__USE_EXTERN_INLINES


24 
__BEGIN_NAMESPACE_STD


25 
__ex‹º_šlše
 

26 
__NTH
 (
	$©of
 (cÚ¡ *
__ÅŒ
))

28  
	`¡¹od
 (
__ÅŒ
, (**è
NULL
);

29 
	}
}

30 
	g__END_NAMESPACE_STD


	@/usr/include/bits/stdlib-ldbl.h

19 #iâdeà
_STDLIB_H


23 #ifdef 
__USE_ISOC99


24 
__BEGIN_NAMESPACE_C99


25 
	$__LDBL_REDIR1_DECL
 (
¡¹Şd
, 
¡¹od
)

26 
__END_NAMESPACE_C99


29 #ifdeà
__USE_GNU


30 
	$__LDBL_REDIR1_DECL
 (
¡¹Şd_l
, 
¡¹od_l
)

33 #ifdeà
__USE_MISC


34 
	$__LDBL_REDIR1_DECL
 (
qecvt
, 
ecvt
)

35 
	$__LDBL_REDIR1_DECL
 (
qfcvt
, 
fcvt
)

36 
	$__LDBL_REDIR1_DECL
 (
qgcvt
, 
gcvt
)

37 
	$__LDBL_REDIR1_DECL
 (
qecvt_r
, 
ecvt_r
)

38 
	$__LDBL_REDIR1_DECL
 (
qfcvt_r
, 
fcvt_r
)

	@/usr/include/bits/stdlib.h

19 #iâdeà
_STDLIB_H


23 *
	$__»®·th_chk
 (cÚ¡ *
__»¡riù
 
__Çme
,

24 *
__»¡riù
 
__»sŞved
,

25 
size_t
 
__»sŞvedËn
è
__THROW
 
__wur
;

26 *
	`__REDIRECT_NTH
 (
__»®·th_®Ÿs
,

27 (cÚ¡ *
__»¡riù
 
__Çme
,

28 *
__»¡riù
 
__»sŞved
), 
»®·th
è
__wur
;

29 *
	`__REDIRECT_NTH
 (
__»®·th_chk_w¬n
,

30 (cÚ¡ *
__»¡riù
 
__Çme
,

31 *
__»¡riù
 
__»sŞved
,

32 
size_t
 
__»sŞvedËn
), 
__»®·th_chk
è
__wur


33 
	`__w¬Ç‰r
 ("second‡rgument of„ealpath must beƒither NULL or‡t "

36 
__fÜtify_funùiÚ
 
__wur
 *

37 
	`__NTH
 (
	$»®·th
 (cÚ¡ *
__»¡riù
 
__Çme
, *__»¡riù 
__»sŞved
))

39 ià(
	`__bos
 (
__»sŞved
è!ğ(
size_t
) -1)

41 #ià
defšed
 
_LIBC_LIMITS_H_
 && defšed 
PATH_MAX


42 ià(
	`__bos
 (
__»sŞved
è< 
PATH_MAX
)

43  
	`__»®·th_chk_w¬n
 (
__Çme
, 
__»sŞved
, 
	`__bos
 (__resolved));

45  
	`__»®·th_chk
 (
__Çme
, 
__»sŞved
, 
	`__bos
 (__resolved));

48  
	`__»®·th_®Ÿs
 (
__Çme
, 
__»sŞved
);

49 
	}
}

52 
	$__±¢ame_r_chk
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
,

53 
size_t
 
__Ä—l
è
__THROW
 
	`__nÚnuÎ
 ((2));

54 
	`__REDIRECT_NTH
 (
__±¢ame_r_®Ÿs
, (
__fd
, *
__buf
,

55 
size_t
 
__buæ’
), 
±¢ame_r
)

56 
	`__nÚnuÎ
 ((2));

57 
	`__REDIRECT_NTH
 (
__±¢ame_r_chk_w¬n
,

58 (
__fd
, *
__buf
, 
size_t
 
__buæ’
,

59 
size_t
 
__Ä—l
), 
__±¢ame_r_chk
)

60 
	`__nÚnuÎ
 ((2)è
	`__w¬Ç‰r
 ("ptsname_r called with buflen biggerhan "

63 
__fÜtify_funùiÚ
 

64 
	`__NTH
 (
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
))

66 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

68 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

69  
	`__±¢ame_r_chk
 (
__fd
, 
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

70 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

71  
	`__±¢ame_r_chk_w¬n
 (
__fd
, 
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

73  
	`__±¢ame_r_®Ÿs
 (
__fd
, 
__buf
, 
__buæ’
);

74 
	}
}

77 
	$__wùomb_chk
 (*
__s
, 
wch¬_t
 
__wch¬
, 
size_t
 
__buæ’
)

78 
__THROW
 
__wur
;

79 
	`__REDIRECT_NTH
 (
__wùomb_®Ÿs
, (*
__s
, 
wch¬_t
 
__wch¬
),

80 
wùomb
è
__wur
;

82 
__fÜtify_funùiÚ
 
__wur
 

83 
	`__NTH
 (
	$wùomb
 (*
__s
, 
wch¬_t
 
__wch¬
))

88 
	#__STDLIB_MB_LEN_MAX
 16

	)

89 #ià
defšed
 
MB_LEN_MAX
 && MB_LEN_MAX !ğ
__STDLIB_MB_LEN_MAX


92 ià(
	`__bos
 (
__s
è!ğ(
size_t
è-1 && 
__STDLIB_MB_LEN_MAX
 > __bos (__s))

93  
	`__wùomb_chk
 (
__s
, 
__wch¬
, 
	`__bos
 (__s));

94  
	`__wùomb_®Ÿs
 (
__s
, 
__wch¬
);

95 
	}
}

98 
size_t
 
	$__mb¡owcs_chk
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

99 cÚ¡ *
__»¡riù
 
__¤c
,

100 
size_t
 
__Ën
, size_ˆ
__d¡Ën
è
__THROW
;

101 
size_t
 
	`__REDIRECT_NTH
 (
__mb¡owcs_®Ÿs
,

102 (
wch¬_t
 *
__»¡riù
 
__d¡
,

103 cÚ¡ *
__»¡riù
 
__¤c
,

104 
size_t
 
__Ën
), 
mb¡owcs
);

105 
size_t
 
	`__REDIRECT_NTH
 (
__mb¡owcs_chk_w¬n
,

106 (
wch¬_t
 *
__»¡riù
 
__d¡
,

107 cÚ¡ *
__»¡riù
 
__¤c
,

108 
size_t
 
__Ën
, size_ˆ
__d¡Ën
), 
__mb¡owcs_chk
)

109 
	`__w¬Ç‰r
 ("mbstowcs called with dst buffer smallerhan†en "

112 
__fÜtify_funùiÚ
 
size_t


113 
	`__NTH
 (
	$mb¡owcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
, cÚ¡ *__»¡riù 
__¤c
,

114 
size_t
 
__Ën
))

116 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

118 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

119  
	`__mb¡owcs_chk
 (
__d¡
, 
__¤c
, 
__Ën
,

120 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

122 ià(
__Ën
 > 
	`__bos
 (
__d¡
è/  (
wch¬_t
))

123  
	`__mb¡owcs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__Ën
,

124 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

126  
	`__mb¡owcs_®Ÿs
 (
__d¡
, 
__¤c
, 
__Ën
);

127 
	}
}

130 
size_t
 
	$__wc¡ombs_chk
 (*
__»¡riù
 
__d¡
,

131 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

132 
size_t
 
__Ën
, size_ˆ
__d¡Ën
è
__THROW
;

133 
size_t
 
	`__REDIRECT_NTH
 (
__wc¡ombs_®Ÿs
,

134 (*
__»¡riù
 
__d¡
,

135 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

136 
size_t
 
__Ën
), 
wc¡ombs
);

137 
size_t
 
	`__REDIRECT_NTH
 (
__wc¡ombs_chk_w¬n
,

138 (*
__»¡riù
 
__d¡
,

139 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

140 
size_t
 
__Ën
, size_ˆ
__d¡Ën
), 
__wc¡ombs_chk
)

141 
	`__w¬Ç‰r
 ("wcstombs called with dst buffer smallerhan†en");

143 
__fÜtify_funùiÚ
 
size_t


144 
	`__NTH
 (
	$wc¡ombs
 (*
__»¡riù
 
__d¡
, cÚ¡ 
wch¬_t
 *__»¡riù 
__¤c
,

145 
size_t
 
__Ën
))

147 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

149 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

150  
	`__wc¡ombs_chk
 (
__d¡
, 
__¤c
, 
__Ën
, 
	`__bos
 (__dst));

151 ià(
__Ën
 > 
	`__bos
 (
__d¡
))

152  
	`__wc¡ombs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__Ën
, 
	`__bos
 (__dst));

154  
	`__wc¡ombs_®Ÿs
 (
__d¡
, 
__¤c
, 
__Ën
);

155 
	}
}

	@/usr/include/bits/string.h

19 #iâdeà
_STRING_H


24 
	#_STRING_ARCH_uÇligÃd
 1

	)

28 #ià!
defšed
 
__x86_64__
 && (defšed 
__i486__
 || defšed 
__³Áium__
 \

29 || 
defšed
 
	g__³Áium´o__
 || defšed 
	g__³Áium4__
 \

30 || 
defšed
 
	g__nocÚa__
 || defšed 
	g__©om__
 \

31 || 
defšed
 
	g__cÜe2__
 || defšed 
	g__cÜei7__
 \

32 || 
defšed
 
	g__k6__
 || defšed 
	g__geode__
 \

33 || 
defšed
 
	g__k8__
 || defšed 
	g__©hlÚ__
 \

34 || 
defšed
 
	g__amdçm10__
)

38 #ià!
defšed
 
__NO_STRING_INLINES
 && defšed 
__USE_STRING_INLINES
 \

39 && 
defšed
 
	g__GNUC__
 && __GNUC__ >= 2

41 #iâdeà
__STRING_INLINE


42 #iâdeà
__ex‹º_šlše


43 
	#__STRING_INLINE
 
šlše


	)

45 
	#__STRING_INLINE
 
__ex‹º_šlše


	)

50 
	#__STRING_SMALL_GET16
(
¤c
, 
idx
) \

51 ((((cÚ¡ *è(
¤c
))[
idx
 + 1] << 8) \

52 | ((cÚ¡ *è(
¤c
))[
idx
])

	)

53 
	#__STRING_SMALL_GET32
(
¤c
, 
idx
) \

54 (((((cÚ¡ *è(
¤c
))[
idx
 + 3] << 8 \

55 | ((cÚ¡ *è(
¤c
))[
idx
 + 2]) << 8 \

56 | ((cÚ¡ *è(
¤c
))[
idx
 + 1]) << 8 \

57 | ((cÚ¡ *è(
¤c
))[
idx
])

	)

61 
	#_HAVE_STRING_ARCH_memıy
 1

	)

62 
	#memıy
(
de¡
, 
¤c
, 
n
) \

63 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
n
) \

64 ? 
	`__memıy_c
 ((
de¡
), (
¤c
), (
n
)) \

65 : 
	`__memıy_g
 ((
de¡
), (
¤c
), (
n
))))

	)

66 
	#__memıy_c
(
de¡
, 
¤c
, 
n
) \

67 ((
n
) == 0 \

68 ? (
de¡
) \

69 : (((
n
) % 4 == 0) \

70 ? 
	`__memıy_by4
 (
de¡
, 
¤c
, 
n
) \

71 : (((
n
) % 2 == 0) \

72 ? 
	`__memıy_by2
 (
de¡
, 
¤c
, 
n
) \

73 : 
	`__memıy_g
 (
de¡
, 
¤c
, 
n
))))

	)

75 
__STRING_INLINE
 *
__memıy_by4
 (*
__de¡
, cÚ¡ *
__¤c
,

76 
size_t
 
__n
);

78 
__STRING_INLINE
 *

79 
	$__memıy_by4
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

81 
__d0
, 
__d1
;

82 *
__tmp
 = 
__de¡
;

83 
__asm__
 
__vŞ©e__


91 : "=&r" (
__d0
), "=&r" (
__tmp
), "=&r" (
__¤c
), "=&r" (
__d1
)

92 : "1" (
__tmp
), "2" (
__¤c
), "3" (
__n
 / 4)

94  
__de¡
;

95 
	}
}

97 
__STRING_INLINE
 *
__memıy_by2
 (*
__de¡
, cÚ¡ *
__¤c
,

98 
size_t
 
__n
);

100 
__STRING_INLINE
 *

101 
	$__memıy_by2
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

103 
__d0
, 
__d1
;

104 *
__tmp
 = 
__de¡
;

105 
__asm__
 
__vŞ©e__


118 : "=&q" (
__d0
), "=&r" (
__tmp
), "=&r" (
__¤c
), "=&r" (
__d1
)

119 : "1" (
__tmp
), "2" (
__¤c
), "3" (
__n
 / 2)

121  
__de¡
;

122 
	}
}

124 
__STRING_INLINE
 *
__memıy_g
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
);

126 
__STRING_INLINE
 *

127 
	$__memıy_g
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

129 
__d0
, 
__d1
, 
__d2
;

130 *
__tmp
 = 
__de¡
;

131 
__asm__
 
__vŞ©e__


142 : "=&c" (
__d0
), "=&D" (
__d1
), "=&S" (
__d2
),

143 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__de¡
)

144 : "0" (
__n
), "1" (
__tmp
), "2" (
__¤c
),

145 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__¤c
)

147  
__de¡
;

148 
	}
}

150 
	#_HAVE_STRING_ARCH_memmove
 1

	)

151 #iâdeà
_FORCE_INLINES


154 
	#memmove
(
de¡
, 
¤c
, 
n
è
	`__memmove_g
 (de¡, src,‚)

	)

156 
__STRING_INLINE
 *
	$__memmove_g
 (*, cÚ¡ *, 
size_t
)

157 
	`__asm__
 ("memmove");

159 
__STRING_INLINE
 *

160 
	$__memmove_g
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

162 
__d0
, 
__d1
, 
__d2
;

163 *
__tmp
 = 
__de¡
;

164 ià(
__de¡
 < 
__¤c
)

165 
__asm__
 
__vŞ©e__


168 : "=&c" (
__d0
), "=&S" (
__d1
), "=&D" (
__d2
),

169 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__de¡
)

170 : "0" (
__n
), "1" (
__¤c
), "2" (
__tmp
),

171 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__¤c
));

173 
__asm__
 
__vŞ©e__


177 : "=&c" (
__d0
), "=&S" (
__d1
), "=&D" (
__d2
),

178 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__de¡
)

179 : "0" (
__n
), "1" (__À- 1 + (cÚ¡ *è
__¤c
),

180 "2" (
__n
 - 1 + (*è
__tmp
),

181 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__¤c
));

182  
__de¡
;

183 
	}
}

187 
	#_HAVE_STRING_ARCH_memcmp
 1

	)

188 #iâdeà
_FORCE_INLINES


189 #iâdeà
__PIC__


191 
__STRING_INLINE
 

192 
	$memcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

194 
__d0
, 
__d1
, 
__d2
;

195 
__»s
;

196 
__asm__
 
__vŞ©e__


204 : "=&a" (
__»s
), "=&S" (
__d0
), "=&D" (
__d1
), "=&c" (
__d2
)

205 : "0" (0), "1" (
__s1
), "2" (
__s2
), "3" (
__n
),

206 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s1
),

207 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s2
)

209  
__»s
;

210 
	}
}

215 
	#_HAVE_STRING_ARCH_mem£t
 1

	)

216 
	#_USE_STRING_ARCH_mem£t
 1

	)

217 
	#mem£t
(
s
, 
c
, 
n
) \

218 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
n
) && (n) <= 16 \

219 ? ((
n
) == 1 \

220 ? 
	`__mem£t_c1
 ((
s
), (
c
)) \

221 : 
	`__mem£t_gc
 ((
s
), (
c
), (
n
))) \

222 : (
	`__butš_cÚ¡ªt_p
 (
c
) \

223 ? (
	`__butš_cÚ¡ªt_p
 (
n
) \

224 ? 
	`__mem£t_cú
 ((
s
), (
c
), (
n
)) \

225 : 
	`mem£t
 ((
s
), (
c
), (
n
))) \

226 : (
	`__butš_cÚ¡ªt_p
 (
n
) \

227 ? 
	`__mem£t_gú
 ((
s
), (
c
), (
n
)) \

228 : 
	`mem£t
 ((
s
), (
c
), (
n
))))))

	)

230 
	#__mem£t_c1
(
s
, 
c
è({ *
__s
 = (s); \

231 *((*è
__s
èğ(è(
c
); \

232 
__s
; })

	)

234 
	#__mem£t_gc
(
s
, 
c
, 
n
) \

235 ({ *
__s
 = (
s
); \

237 
__ui
; \

238 
__usi
; \

239 
__uc
; \

240 } *
__u
 = 
__s
; \

241 
__c
 = ((è((è(
c
))) * 0x01010101; \

247 ià((
n
) == 3 || (n) >= 5) \

248 
__asm__
 
	`__vŞ©e__
 ("" : "ô" (
__c
) : "0" (__c)); \

251 
n
) \

254 
__u
->
__ui
 = 
__c
; \

255 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

257 
__u
->
__ui
 = 
__c
; \

258 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

260 
__u
->
__ui
 = 
__c
; \

261 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

263 
__u
->
__usi
 = (è
__c
; \

264 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2); \

265 
__u
->
__uc
 = (è
__c
; \

269 
__u
->
__ui
 = 
__c
; \

270 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

272 
__u
->
__ui
 = 
__c
; \

273 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

275 
__u
->
__ui
 = 
__c
; \

276 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

278 
__u
->
__usi
 = (è
__c
; \

282 
__u
->
__ui
 = 
__c
; \

283 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

285 
__u
->
__ui
 = 
__c
; \

286 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

288 
__u
->
__ui
 = 
__c
; \

289 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

291 
__u
->
__uc
 = (è
__c
; \

295 
__u
->
__ui
 = 
__c
; \

296 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

298 
__u
->
__ui
 = 
__c
; \

299 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

301 
__u
->
__ui
 = 
__c
; \

302 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

304 
__u
->
__ui
 = 
__c
; \

309 
__s
; })

	)

311 
	#__mem£t_cú
(
s
, 
c
, 
n
) \

312 (((
n
) % 4 == 0) \

313 ? 
	`__mem£t_cú_by4
 (
s
, ((è((è(
c
))) * 0x01010101,\

314 
n
) \

315 : (((
n
) % 2 == 0) \

316 ? 
	`__mem£t_cú_by2
 (
s
, \

317 ((è((è(
c
))) * 0x01010101,\

318 
n
) \

319 : 
	`mem£t
 (
s
, 
c
, 
n
)))

	)

321 
__STRING_INLINE
 *
__mem£t_cú_by4
 (*
__s
, 
__c
,

322 
size_t
 
__n
);

324 
__STRING_INLINE
 *

325 
	$__mem£t_cú_by4
 (*
__s
, 
__c
, 
size_t
 
__n
)

327 *
__tmp
 = 
__s
;

328 
__d0
;

329 #ifdeà
__i686__


330 
__asm__
 
__vŞ©e__


333 : "=&a" (
__c
), "=&D" (
__tmp
), "=&c" (
__d0
),

334 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

335 : "0" ((è
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

338 
__asm__
 
__vŞ©e__


344 : "=&r" (
__c
), "=&r" (
__tmp
), "=&r" (
__d0
),

345 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

346 : "0" ((è
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

349  
__s
;

350 
	}
}

352 
__STRING_INLINE
 *
__mem£t_cú_by2
 (*
__s
, 
__c
,

353 
size_t
 
__n
);

355 
__STRING_INLINE
 *

356 
	$__mem£t_cú_by2
 (*
__s
, 
__c
, 
size_t
 
__n
)

358 
__d0
, 
__d1
;

359 *
__tmp
 = 
__s
;

360 #ifdeà
__i686__


361 
__asm__
 
__vŞ©e__


365 : "=&a" (
__d0
), "=&D" (
__tmp
), "=&c" (
__d1
),

366 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

367 : "0" ((è
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

370 
__asm__
 
__vŞ©e__


376 : "=&q" (
__d0
), "=&r" (
__tmp
), "=&r" (
__d1
),

377 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

378 : "0" ((è
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

381  
__s
;

382 
	}
}

384 
	#__mem£t_gú
(
s
, 
c
, 
n
) \

385 (((
n
) % 4 == 0) \

386 ? 
	`__mem£t_gú_by4
 (
s
, 
c
, 
n
) \

387 : (((
n
) % 2 == 0) \

388 ? 
	`__mem£t_gú_by2
 (
s
, 
c
, 
n
) \

389 : 
	`mem£t
 (
s
, 
c
, 
n
)))

	)

391 
__STRING_INLINE
 *
__mem£t_gú_by4
 (*
__s
, 
__c
, 
size_t
 
__n
);

393 
__STRING_INLINE
 *

394 
	$__mem£t_gú_by4
 (*
__s
, 
__c
, 
size_t
 
__n
)

396 *
__tmp
 = 
__s
;

397 
__d0
;

398 
__asm__
 
__vŞ©e__


408 : "=&q" (
__c
), "=&r" (
__tmp
), "=&r" (
__d0
),

409 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

410 : "0" ((è
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

412  
__s
;

413 
	}
}

415 
__STRING_INLINE
 *
__mem£t_gú_by2
 (*
__s
, 
__c
, 
size_t
 
__n
);

417 
__STRING_INLINE
 *

418 
	$__mem£t_gú_by2
 (*
__s
, 
__c
, 
size_t
 
__n
)

420 
__d0
, 
__d1
;

421 *
__tmp
 = 
__s
;

422 
__asm__
 
__vŞ©e__


433 : "=&q" (
__d0
), "=&r" (
__tmp
), "=&r" (
__d1
),

434 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

435 : "0" ((è
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

437  
__s
;

438 
	}
}

442 
	#_HAVE_STRING_ARCH_memchr
 1

	)

443 #iâdeà
_FORCE_INLINES


444 
__STRING_INLINE
 *

445 
	$memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

447 
__d0
;

448 #ifdeà
__i686__


449 
__d1
;

451 *
__»s
;

452 ià(
__n
 == 0)

453  
NULL
;

454 #ifdeà
__i686__


455 
__asm__
 
__vŞ©e__


459 : "=D" (
__»s
), "=&c" (
__d0
), "=&r" (
__d1
)

460 : "a" (
__c
), "0" (
__s
), "1" (
__n
), "2" (1),

461 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

464 
__asm__
 
__vŞ©e__


470 : "=D" (
__»s
), "=&c" (
__d0
)

471 : "a" (
__c
), "0" (
__s
), "1" (
__n
),

472 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

475  
__»s
 - 1;

476 
	}
}

479 
	#_HAVE_STRING_ARCH_memrchr
 1

	)

480 #iâdeà
_FORCE_INLINES


481 
__STRING_INLINE
 *
__memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
);

483 
__STRING_INLINE
 *

484 
	$__memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

486 
__d0
;

487 #ifdeà
__i686__


488 
__d1
;

490 *
__»s
;

491 ià(
__n
 == 0)

492  
NULL
;

493 #ifdeà
__i686__


494 
__asm__
 
__vŞ©e__


500 : "=D" (
__»s
), "=&c" (
__d0
), "=&r" (
__d1
)

501 : "a" (
__c
), "0" (
__s
 + 
__n
 - 1), "1" (__n), "2" (-1),

502 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

505 
__asm__
 
__vŞ©e__


512 : "=D" (
__»s
), "=&c" (
__d0
)

513 : "a" (
__c
), "0" (
__s
 + 
__n
 - 1), "1" (__n),

514 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

517  
__»s
;

518 
	}
}

519 #ifdeà
__USE_GNU


520 
	#memrchr
(
s
, 
c
, 
n
è
	`__memrchr
 ((s), (c), (n))

	)

525 
	#_HAVE_STRING_ARCH_¿wmemchr
 1

	)

526 
__STRING_INLINE
 *
__¿wmemchr
 (cÚ¡ *
__s
, 
__c
);

528 #iâdeà
_FORCE_INLINES


529 
__STRING_INLINE
 *

530 
	$__¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

532 
__d0
;

533 *
__»s
;

534 
__asm__
 
__vŞ©e__


537 : "=D" (
__»s
), "=&c" (
__d0
)

538 : "a" (
__c
), "0" (
__s
), "1" (0xffffffff),

539 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

541  
__»s
 - 1;

542 
	}
}

543 #ifdeà
__USE_GNU


544 
__STRING_INLINE
 *

545 
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

547  
	`__¿wmemchr
 (
__s
, 
__c
);

548 
	}
}

554 
	#_HAVE_STRING_ARCH_¡¾’
 1

	)

555 
	#¡¾’
(
¡r
) \

556 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¡r
) \

557 ? 
	`__butš_¡¾’
 (
¡r
) \

558 : 
	`__¡¾’_g
 (
¡r
)))

	)

559 
__STRING_INLINE
 
size_t
 
__¡¾’_g
 (cÚ¡ *
__¡r
);

561 
__STRING_INLINE
 
size_t


562 
	$__¡¾’_g
 (cÚ¡ *
__¡r
)

564 
__dummy
;

565 cÚ¡ *
__tmp
 = 
__¡r
;

566 
__asm__
 
__vŞ©e__


572 : "ô" (
__tmp
), "=&q" (
__dummy
)

573 : "0" (
__¡r
),

574 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__¡r
)

576  
__tmp
 - 
__¡r
 - 1;

577 
	}
}

581 
	#_HAVE_STRING_ARCH_¡rıy
 1

	)

582 
	#¡rıy
(
de¡
, 
¤c
) \

583 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
) \

584 ? ( ((
¤c
)[0]è=ğ1 && 
	`¡¾’
 (src) + 1 <= 8 \

585 ? 
	`__¡rıy_a_sm®l
 ((
de¡
), (
¤c
), 
	`¡¾’
 (src) + 1) \

586 : (*è
	`memıy
 ((*è(
de¡
), \

587 (cÚ¡ *è(
¤c
), \

588 
	`¡¾’
 (
¤c
) + 1)) \

589 : 
	`__¡rıy_g
 ((
de¡
), (
¤c
))))

	)

591 
	#__¡rıy_a_sm®l
(
de¡
, 
¤c
, 
¤ş’
) \

592 (
	`__ex‹nsiÚ__
 ({ *
__de¡
 = (
de¡
); \

594 
__ui
; \

595 
__usi
; \

596 
__uc
; \

597 
__c
; \

598 } *
__u
 = (*è
__de¡
; \

599 
¤ş’
) \

602 
__u
->
__uc
 = '\0'; \

605 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
¤c
, 0); \

608 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
¤c
, 0); \

609 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2); \

610 
__u
->
__uc
 = '\0'; \

613 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

616 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

617 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

618 
__u
->
__uc
 = '\0'; \

621 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

622 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

623 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
¤c
, 4); \

626 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

627 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

628 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
¤c
, 4); \

629 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2); \

630 
__u
->
__uc
 = '\0'; \

633 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

634 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

635 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 4); \

638 (*è
__de¡
; }))

	)

640 
__STRING_INLINE
 *
__¡rıy_g
 (*
__de¡
, cÚ¡ *
__¤c
);

642 
__STRING_INLINE
 *

643 
	$__¡rıy_g
 (*
__de¡
, cÚ¡ *
__¤c
)

645 *
__tmp
 = 
__de¡
;

646 
__dummy
;

647 
__asm__
 
__vŞ©e__


656 : "=&r" (
__¤c
), "=&r" (
__tmp
), "=&q" (
__dummy
),

657 "=m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__de¡
)

658 : "0" (
__¤c
), "1" (
__tmp
),

659 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__¤c
)

661  
__de¡
;

662 
	}
}

665 #ifdeà
__USE_GNU


666 
	#_HAVE_STRING_ARCH_¡pıy
 1

	)

668 
	#__¡pıy
(
de¡
, 
¤c
) \

669 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
) \

670 ? (
	`¡¾’
 (
¤c
) + 1 <= 8 \

671 ? 
	`__¡pıy_a_sm®l
 ((
de¡
), (
¤c
), 
	`¡¾’
 (src) + 1) \

672 : 
	`__¡pıy_c
 ((
de¡
), (
¤c
), 
	`¡¾’
 (src) + 1)) \

673 : 
	`__¡pıy_g
 ((
de¡
), (
¤c
))))

	)

674 
	#__¡pıy_c
(
de¡
, 
¤c
, 
¤ş’
) \

675 ((
¤ş’
) % 4 == 0 \

676 ? 
	`__mempıy_by4
 (
de¡
, 
¤c
, 
¤ş’
) - 1 \

677 : ((
¤ş’
) % 2 == 0 \

678 ? 
	`__mempıy_by2
 (
de¡
, 
¤c
, 
¤ş’
) - 1 \

679 : 
	`__mempıy_byn
 (
de¡
, 
¤c
, 
¤ş’
è- 1))

	)

682 
	#¡pıy
(
de¡
, 
¤c
è
	`__¡pıy
 ((de¡), (¤c))

	)

684 
	#__¡pıy_a_sm®l
(
de¡
, 
¤c
, 
¤ş’
) \

685 (
	`__ex‹nsiÚ__
 ({ union { \

686 
__ui
; \

687 
__usi
; \

688 
__uc
; \

689 
__c
; \

690 } *
__u
 = (*è(
de¡
); \

691 
¤ş’
) \

694 
__u
->
__uc
 = '\0'; \

697 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
¤c
, 0); \

698 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1); \

701 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
¤c
, 0); \

702 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2); \

703 
__u
->
__uc
 = '\0'; \

706 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

707 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 3); \

710 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

711 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

712 
__u
->
__uc
 = '\0'; \

715 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

716 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

717 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
¤c
, 4); \

718 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1); \

721 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

722 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

723 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
¤c
, 4); \

724 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2); \

725 
__u
->
__uc
 = '\0'; \

728 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

729 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

730 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 4); \

731 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 3); \

734 (*è
__u
; }))

	)

736 
__STRING_INLINE
 *
__mempıy_by4
 (*
__de¡
, cÚ¡ *
__¤c
,

737 
size_t
 
__¤ş’
);

739 
__STRING_INLINE
 *

740 
	$__mempıy_by4
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__¤ş’
)

742 *
__tmp
 = 
__de¡
;

743 
__d0
, 
__d1
;

744 
__asm__
 
__vŞ©e__


752 : "=&r" (
__d0
), "ô" (
__tmp
), "=&r" (
__¤c
), "=&r" (
__d1
)

753 : "1" (
__tmp
), "2" (
__¤c
), "3" (
__¤ş’
 / 4)

755  
__tmp
;

756 
	}
}

758 
__STRING_INLINE
 *
__mempıy_by2
 (*
__de¡
, cÚ¡ *
__¤c
,

759 
size_t
 
__¤ş’
);

761 
__STRING_INLINE
 *

762 
	$__mempıy_by2
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__¤ş’
)

764 *
__tmp
 = 
__de¡
;

765 
__d0
, 
__d1
;

766 
__asm__
 
__vŞ©e__


779 : "=&q" (
__d0
), "ô" (
__tmp
), "=&r" (
__¤c
), "=&r" (
__d1
),

780 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__de¡
)

781 : "1" (
__tmp
), "2" (
__¤c
), "3" (
__¤ş’
 / 2),

782 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__¤c
)

784  
__tmp
 + 2;

785 
	}
}

787 
__STRING_INLINE
 *
__mempıy_byn
 (*
__de¡
, cÚ¡ *
__¤c
,

788 
size_t
 
__¤ş’
);

790 
__STRING_INLINE
 *

791 
	$__mempıy_byn
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__¤ş’
)

793 
__d0
, 
__d1
;

794 *
__tmp
 = 
__de¡
;

795 
__asm__
 
__vŞ©e__


806 : "=D" (
__tmp
), "=&c" (
__d0
), "=&S" (
__d1
),

807 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__de¡
)

808 : "0" (
__tmp
), "1" (
__¤ş’
), "2" (
__¤c
),

809 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__¤c
)

811  
__tmp
;

812 
	}
}

814 
__STRING_INLINE
 *
__¡pıy_g
 (*
__de¡
, cÚ¡ *
__¤c
);

816 
__STRING_INLINE
 *

817 
	$__¡pıy_g
 (*
__de¡
, cÚ¡ *
__¤c
)

819 *
__tmp
 = 
__de¡
;

820 
__dummy
;

821 
__asm__
 
__vŞ©e__


830 : "=&r" (
__¤c
), "ô" (
__tmp
), "=&q" (
__dummy
),

831 "=m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__de¡
)

832 : "0" (
__¤c
), "1" (
__tmp
),

833 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__¤c
)

835  
__tmp
 - 1;

836 
	}
}

841 
	#_HAVE_STRING_ARCH_¡ºıy
 1

	)

842 
	#¡ºıy
(
de¡
, 
¤c
, 
n
) \

843 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
) \

844 ? ((
	`¡¾’
 (
¤c
è+ 1 >ğ((
size_t
è(
n
)) \

845 ? (*è
	`memıy
 ((*è(
de¡
), \

846 (cÚ¡ *è(
¤c
), 
n
) \

847 : 
	`__¡ºıy_cg
 ((
de¡
), (
¤c
), 
	`¡¾’
 (¤cè+ 1, 
n
))) \

848 : 
	`__¡ºıy_gg
 ((
de¡
), (
¤c
), 
n
)))

	)

849 
	#__¡ºıy_cg
(
de¡
, 
¤c
, 
¤ş’
, 
n
) \

850 (((
¤ş’
) % 4 == 0) \

851 ? 
	`__¡ºıy_by4
 (
de¡
, 
¤c
, 
¤ş’
, 
n
) \

852 : (((
¤ş’
) % 2 == 0) \

853 ? 
	`__¡ºıy_by2
 (
de¡
, 
¤c
, 
¤ş’
, 
n
) \

854 : 
	`__¡ºıy_byn
 (
de¡
, 
¤c
, 
¤ş’
, 
n
)))

	)

856 
__STRING_INLINE
 *
__¡ºıy_by4
 (*
__de¡
, cÚ¡ 
__¤c
[],

857 
size_t
 
__¤ş’
, size_ˆ
__n
);

859 
__STRING_INLINE
 *

860 
	$__¡ºıy_by4
 (*
__de¡
, cÚ¡ 
__¤c
[], 
size_t
 
__¤ş’
, size_ˆ
__n
)

862 *
__tmp
 = 
__de¡
;

863 
__dummy1
, 
__dummy2
;

864 
__asm__
 
__vŞ©e__


872 : "=&r" (
__dummy1
), "ô" (
__tmp
), "=&r" (
__¤c
), "=&r" (
__dummy2
),

873 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__de¡
)

874 : "1" (
__tmp
), "2" (
__¤c
), "3" (
__¤ş’
 / 4),

875 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__¤c
)

877 (è
	`mem£t
 (
__tmp
, '\0', 
__n
 - 
__¤ş’
);

878  
__de¡
;

879 
	}
}

881 
__STRING_INLINE
 *
__¡ºıy_by2
 (*
__de¡
, cÚ¡ 
__¤c
[],

882 
size_t
 
__¤ş’
, size_ˆ
__n
);

884 
__STRING_INLINE
 *

885 
	$__¡ºıy_by2
 (*
__de¡
, cÚ¡ 
__¤c
[], 
size_t
 
__¤ş’
, size_ˆ
__n
)

887 *
__tmp
 = 
__de¡
;

888 
__dummy1
, 
__dummy2
;

889 
__asm__
 
__vŞ©e__


902 : "=&q" (
__dummy1
), "ô" (
__tmp
), "=&r" (
__¤c
), "=&r" (
__dummy2
),

903 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__de¡
)

904 : "1" (
__tmp
), "2" (
__¤c
), "3" (
__¤ş’
 / 2),

905 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__¤c
)

907 (è
	`mem£t
 (
__tmp
 + 2, '\0', 
__n
 - 
__¤ş’
);

908  
__de¡
;

909 
	}
}

911 
__STRING_INLINE
 *
__¡ºıy_byn
 (*
__de¡
, cÚ¡ 
__¤c
[],

912 
size_t
 
__¤ş’
, size_ˆ
__n
);

914 
__STRING_INLINE
 *

915 
	$__¡ºıy_byn
 (*
__de¡
, cÚ¡ 
__¤c
[], 
size_t
 
__¤ş’
, size_ˆ
__n
)

917 
__d0
, 
__d1
;

918 *
__tmp
 = 
__de¡
;

919 
__asm__
 
__vŞ©e__


930 : "=D" (
__tmp
), "=&c" (
__d0
), "=&S" (
__d1
),

931 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__de¡
)

932 : "1" (
__¤ş’
), "0" (
__tmp
),"2" (
__¤c
),

933 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__¤c
)

935 (è
	`mem£t
 (
__tmp
, '\0', 
__n
 - 
__¤ş’
);

936  
__de¡
;

937 
	}
}

939 
__STRING_INLINE
 *
__¡ºıy_gg
 (*
__de¡
, cÚ¡ *
__¤c
,

940 
size_t
 
__n
);

942 
__STRING_INLINE
 *

943 
	$__¡ºıy_gg
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

945 *
__tmp
 = 
__de¡
;

946 
__dummy
;

947 ià(
__n
 > 0)

948 
__asm__
 
__vŞ©e__


964 : "=&r" (
__¤c
), "=&r" (
__tmp
), "=&q" (
__dummy
), "=&r" (
__n
)

965 : "0" (
__¤c
), "1" (
__tmp
), "3" (
__n
)

968  
__de¡
;

969 
	}
}

973 
	#_HAVE_STRING_ARCH_¡rÿt
 1

	)

974 
	#¡rÿt
(
de¡
, 
¤c
) \

975 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
) \

976 ? 
	`__¡rÿt_c
 ((
de¡
), (
¤c
), 
	`¡¾’
 (src) + 1) \

977 : 
	`__¡rÿt_g
 ((
de¡
), (
¤c
))))

	)

979 
__STRING_INLINE
 *
__¡rÿt_c
 (*
__de¡
, cÚ¡ 
__¤c
[],

980 
size_t
 
__¤ş’
);

982 
__STRING_INLINE
 *

983 
	$__¡rÿt_c
 (*
__de¡
, cÚ¡ 
__¤c
[], 
size_t
 
__¤ş’
)

985 #ifdeà
__i686__


986 
__d0
;

987 *
__tmp
;

988 
__asm__
 
__vŞ©e__


990 : "=D" (
__tmp
), "=&c" (
__d0
),

991 "=m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__de¡
)

992 : "0" (
__de¡
), "1" (0xffffffff), "a" (0),

993 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__¤c
)

995 --
__tmp
;

997 *
__tmp
 = 
__de¡
 - 1;

998 
__asm__
 
__vŞ©e__


1003 : "ô" (
__tmp
),

1004 "=m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__de¡
)

1005 : "0" (
__tmp
),

1006 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__¤c
)

1009 (è
	`memıy
 (
__tmp
, 
__¤c
, 
__¤ş’
);

1010  
__de¡
;

1011 
	}
}

1013 
__STRING_INLINE
 *
__¡rÿt_g
 (*
__de¡
, cÚ¡ *
__¤c
);

1015 
__STRING_INLINE
 *

1016 
	$__¡rÿt_g
 (*
__de¡
, cÚ¡ *
__¤c
)

1018 *
__tmp
 = 
__de¡
 - 1;

1019 
__dummy
;

1020 
__asm__
 
__vŞ©e__


1032 : "=&q" (
__dummy
), "=&r" (
__tmp
), "=&r" (
__¤c
),

1033 "=m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__de¡
)

1034 : "1" (
__tmp
), "2" (
__¤c
),

1035 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__¤c
)

1037  
__de¡
;

1038 
	}
}

1042 
	#_HAVE_STRING_ARCH_¡ºÿt
 1

	)

1043 
	#¡ºÿt
(
de¡
, 
¤c
, 
n
) \

1044 (
	`__ex‹nsiÚ__
 ({ *
__de¡
 = (
de¡
); \

1045 
	`__butš_cÚ¡ªt_p
 (
¤c
è&& __butš_cÚ¡ªt_°(
n
) \

1046 ? (
	`¡¾’
 (
¤c
è< ((
size_t
è(
n
)) \

1047 ? 
	`¡rÿt
 (
__de¡
, (
¤c
)) \

1048 : (*(*)
	`__mempıy
 (
	`¡rchr
 (
__de¡
, '\0'), \

1049 (cÚ¡ *è(
¤c
), \

1050 (
n
)èğ0, 
__de¡
)) \

1051 : 
	`__¡ºÿt_g
 (
__de¡
, (
¤c
), (
n
)); }))

	)

1053 
__STRING_INLINE
 *
__¡ºÿt_g
 (*
__de¡
, cÚ¡ 
__¤c
[],

1054 
size_t
 
__n
);

1056 
__STRING_INLINE
 *

1057 
	$__¡ºÿt_g
 (*
__de¡
, cÚ¡ 
__¤c
[], 
size_t
 
__n
)

1059 *
__tmp
 = 
__de¡
;

1060 
__dummy
;

1061 #ifdeà
__i686__


1062 
__asm__
 
__vŞ©e__


1076 : "=&a" (
__dummy
), "=&D" (
__tmp
), "=&S" (
__¤c
), "=&c" (
__n
)

1077 : "g" (
__n
), "0" (0), "1" (
__tmp
), "2" (
__¤c
), "3" (0xffffffff)

1080 --
__tmp
;

1081 
__asm__
 
__vŞ©e__


1098 : "=&q" (
__dummy
), "=&r" (
__tmp
), "=&r" (
__¤c
), "=&r" (
__n
)

1099 : "1" (
__tmp
), "2" (
__¤c
), "3" (
__n
)

1102  
__de¡
;

1103 
	}
}

1107 
	#_HAVE_STRING_ARCH_¡rcmp
 1

	)

1108 
	#¡rcmp
(
s1
, 
s2
) \

1109 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
s1
è&& __butš_cÚ¡ªt_°(
s2
) \

1110 && ( ((
s1
)[0]è!ğ1 || 
	`¡¾’
 (s1) >= 4) \

1111 && ( ((
s2
)[0]è!ğ1 || 
	`¡¾’
 (s2) >= 4) \

1112 ? 
	`memcmp
 ((cÚ¡ *è(
s1
), (cÚ¡ *è(
s2
), \

1113 (
	`¡¾’
 (
s1
è< sŒËÀ(
s2
) \

1114 ? 
	`¡¾’
 (
s1
è: sŒËÀ(
s2
)) + 1) \

1115 : (
	`__butš_cÚ¡ªt_p
 (
s1
) &&  ((s1)[0]) == 1 \

1116 &&  ((
s2
)[0]è=ğ1 && 
	`¡¾’
 (
s1
) < 4 \

1117 ? (
	`__butš_cÚ¡ªt_p
 (
s2
) &&  ((s2)[0]) == 1 \

1118 ? 
	`__¡rcmp_cc
 ((cÚ¡ *è(
s1
), \

1119 (cÚ¡ *è(
s2
), \

1120 
	`¡¾’
 (
s1
)) \

1121 : 
	`__¡rcmp_cg
 ((cÚ¡ *è(
s1
), \

1122 (cÚ¡ *è(
s2
), \

1123 
	`¡¾’
 (
s1
))) \

1124 : (
	`__butš_cÚ¡ªt_p
 (
s2
è&&  ((
s1
)[0]) == 1 \

1125 &&  ((
s2
)[0]è=ğ1 && 
	`¡¾’
 (s2) < 4 \

1126 ? (
	`__butš_cÚ¡ªt_p
 (
s1
) \

1127 ? 
	`__¡rcmp_cc
 ((cÚ¡ *è(
s1
), \

1128 (cÚ¡ *è(
s2
), \

1129 
	`¡¾’
 (
s2
)) \

1130 : 
	`__¡rcmp_gc
 ((cÚ¡ *è(
s1
), \

1131 (cÚ¡ *è(
s2
), \

1132 
	`¡¾’
 (
s2
))) \

1133 : 
	`__¡rcmp_gg
 ((
s1
), (
s2
))))))

	)

1135 
	#__¡rcmp_cc
(
s1
, 
s2
, 
l
) \

1136 (
	`__ex‹nsiÚ__
 ({ 
__»suÉ
 = (
s1
)[0] - (
s2
)[0]; \

1137 ià(
l
 > 0 && 
__»suÉ
 == 0) \

1139 
__»suÉ
 = (
s1
)[1] - (
s2
)[1]; \

1140 ià(
l
 > 1 && 
__»suÉ
 == 0) \

1142 
__»suÉ
 = (
s1
)[2] - (
s2
)[2]; \

1143 ià(
l
 > 2 && 
__»suÉ
 == 0) \

1144 
__»suÉ
 = (
s1
)[3] - (
s2
)[3]; \

1147 
__»suÉ
; }))

	)

1149 
	#__¡rcmp_cg
(
s1
, 
s2
, 
l1
) \

1150 (
	`__ex‹nsiÚ__
 ({ cÚ¡ *
__s2
 = (
s2
); \

1151 
__»suÉ
 = (
s1
)[0] - 
__s2
[0]; \

1152 ià(
l1
 > 0 && 
__»suÉ
 == 0) \

1154 
__»suÉ
 = (
s1
)[1] - 
__s2
[1]; \

1155 ià(
l1
 > 1 && 
__»suÉ
 == 0) \

1157 
__»suÉ
 = (
s1
)[2] - 
__s2
[2]; \

1158 ià(
l1
 > 2 && 
__»suÉ
 == 0) \

1159 
__»suÉ
 = (
s1
)[3] - 
__s2
[3]; \

1162 
__»suÉ
; }))

	)

1164 
	#__¡rcmp_gc
(
s1
, 
s2
, 
l2
) \

1165 (
	`__ex‹nsiÚ__
 ({ cÚ¡ *
__s1
 = (
s1
); \

1166 
__»suÉ
 = 
__s1
[0] - (
s2
)[0]; \

1167 ià(
l2
 > 0 && 
__»suÉ
 == 0) \

1169 
__»suÉ
 = 
__s1
[1] - (
s2
)[1]; \

1170 ià(
l2
 > 1 && 
__»suÉ
 == 0) \

1172 
__»suÉ
 = 
__s1
[2] - (
s2
)[2]; \

1173 ià(
l2
 > 2 && 
__»suÉ
 == 0) \

1174 
__»suÉ
 = 
__s1
[3] - (
s2
)[3]; \

1177 
__»suÉ
; }))

	)

1179 
__STRING_INLINE
 
__¡rcmp_gg
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
);

1181 
__STRING_INLINE
 

1182 
	$__¡rcmp_gg
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

1184 
__»s
;

1185 
__asm__
 
__vŞ©e__


1201 : "=q" (
__»s
), "=&r" (
__s1
), "=&r" (
__s2
)

1202 : "1" (
__s1
), "2" (
__s2
),

1203 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s1
),

1204 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s2
)

1206  
__»s
;

1207 
	}
}

1211 
	#_HAVE_STRING_ARCH_¡ºcmp
 1

	)

1212 
	#¡ºcmp
(
s1
, 
s2
, 
n
) \

1213 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
s1
è&& 
	`¡¾’
 (s1è< ((
size_t
è(
n
)) \

1214 ? 
	`¡rcmp
 ((
s1
), (
s2
)) \

1215 : (
	`__butš_cÚ¡ªt_p
 (
s2
è&& 
	`¡¾’
 (s2è< ((
size_t
è(
n
))\

1216 ? 
	`¡rcmp
 ((
s1
), (
s2
)) \

1217 : 
	`__¡ºcmp_g
 ((
s1
), (
s2
), (
n
)))))

	)

1219 
__STRING_INLINE
 
__¡ºcmp_g
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

1220 
size_t
 
__n
);

1222 
__STRING_INLINE
 

1223 
	$__¡ºcmp_g
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

1225 
__»s
;

1226 
__asm__
 
__vŞ©e__


1245 : "=q" (
__»s
), "=&r" (
__s1
), "=&r" (
__s2
), "=&r" (
__n
)

1246 : "1" (
__s1
), "2" (
__s2
), "3" (
__n
),

1247 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s1
),

1248 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s2
)

1250  
__»s
;

1251 
	}
}

1255 
	#_HAVE_STRING_ARCH_¡rchr
 1

	)

1256 
	#_USE_STRING_ARCH_¡rchr
 1

	)

1257 
	#¡rchr
(
s
, 
c
) \

1258 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
c
) \

1259 ? ((
c
) == '\0' \

1260 ? (*è
	`__¿wmemchr
 ((
s
), (
c
)) \

1261 : 
	`__¡rchr_c
 ((
s
), ((
c
) & 0xff) << 8)) \

1262 : 
	`__¡rchr_g
 ((
s
), (
c
))))

	)

1264 
__STRING_INLINE
 *
__¡rchr_c
 (cÚ¡ *
__s
, 
__c
);

1266 
__STRING_INLINE
 *

1267 
	$__¡rchr_c
 (cÚ¡ *
__s
, 
__c
)

1269 
__d0
;

1270 *
__»s
;

1271 
__asm__
 
__vŞ©e__


1281 : "ô" (
__»s
), "=&a" (
__d0
)

1282 : "0" (
__s
), "1" (
__c
),

1283 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1285  
__»s
;

1286 
	}
}

1288 
__STRING_INLINE
 *
__¡rchr_g
 (cÚ¡ *
__s
, 
__c
);

1290 
__STRING_INLINE
 *

1291 
	$__¡rchr_g
 (cÚ¡ *
__s
, 
__c
)

1293 
__d0
;

1294 *
__»s
;

1295 
__asm__
 
__vŞ©e__


1306 : "ô" (
__»s
), "=&a" (
__d0
)

1307 : "0" (
__s
), "1" (
__c
),

1308 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1310  
__»s
;

1311 
	}
}

1315 
	#_HAVE_STRING_ARCH_¡rchºul
 1

	)

1316 
	#__¡rchºul
(
s
, 
c
) \

1317 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
c
) \

1318 ? ((
c
) == '\0' \

1319 ? (*è
	`__¿wmemchr
 ((
s
), 
c
) \

1320 : 
	`__¡rchºul_c
 ((
s
), ((
c
) & 0xff) << 8)) \

1321 : 
	`__¡rchºul_g
 ((
s
), 
c
)))

	)

1323 
__STRING_INLINE
 *
__¡rchºul_c
 (cÚ¡ *
__s
, 
__c
);

1325 
__STRING_INLINE
 *

1326 
	$__¡rchºul_c
 (cÚ¡ *
__s
, 
__c
)

1328 
__d0
;

1329 *
__»s
;

1330 
__asm__
 
__vŞ©e__


1340 : "ô" (
__»s
), "=&a" (
__d0
)

1341 : "0" (
__s
), "1" (
__c
),

1342 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1344  
__»s
;

1345 
	}
}

1347 
__STRING_INLINE
 *
__¡rchºul_g
 (cÚ¡ *
__s
, 
__c
);

1349 
__STRING_INLINE
 *

1350 
	$__¡rchºul_g
 (cÚ¡ *
__s
, 
__c
)

1352 
__d0
;

1353 *
__»s
;

1354 
__asm__
 
__vŞ©e__


1365 : "ô" (
__»s
), "=&a" (
__d0
)

1366 : "0" (
__s
), "1" (
__c
),

1367 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1369  
__»s
;

1370 
	}
}

1371 #ifdeà
__USE_GNU


1372 
	#¡rchºul
(
s
, 
c
è
	`__¡rchºul
 ((s), (c))

	)

1376 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


1378 
	#_HAVE_STRING_ARCH_šdex
 1

	)

1379 
	#šdex
(
s
, 
c
) \

1380 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
c
) \

1381 ? 
	`__¡rchr_c
 ((
s
), ((
c
) & 0xff) << 8) \

1382 : 
	`__¡rchr_g
 ((
s
), (
c
))))

	)

1387 
	#_HAVE_STRING_ARCH_¡¼chr
 1

	)

1388 
	#¡¼chr
(
s
, 
c
) \

1389 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
c
) \

1390 ? 
	`__¡¼chr_c
 ((
s
), ((
c
) & 0xff) << 8) \

1391 : 
	`__¡¼chr_g
 ((
s
), (
c
))))

	)

1393 #ifdeà
__i686__


1394 
__STRING_INLINE
 *
__¡¼chr_c
 (cÚ¡ *
__s
, 
__c
);

1396 
__STRING_INLINE
 *

1397 
	$__¡¼chr_c
 (cÚ¡ *
__s
, 
__c
)

1399 
__d0
, 
__d1
;

1400 *
__»s
;

1401 
__asm__
 
__vŞ©e__


1409 : "=d" (
__»s
), "=&S" (
__d0
), "=&a" (
__d1
)

1410 : "0" (1), "1" (
__s
), "2" (
__c
),

1411 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1413  
__»s
 - 1;

1414 
	}
}

1416 
__STRING_INLINE
 *
__¡¼chr_g
 (cÚ¡ *
__s
, 
__c
);

1418 
__STRING_INLINE
 *

1419 
	$__¡¼chr_g
 (cÚ¡ *
__s
, 
__c
)

1421 
__d0
, 
__d1
;

1422 *
__»s
;

1423 
__asm__
 
__vŞ©e__


1432 : "=d" (
__»s
), "=&S" (
__d0
), "=&a" (
__d1
)

1433 : "0" (1), "1" (
__s
), "2" (
__c
),

1434 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1436  
__»s
 - 1;

1437 
	}
}

1439 
__STRING_INLINE
 *
__¡¼chr_c
 (cÚ¡ *
__s
, 
__c
);

1441 
__STRING_INLINE
 *

1442 
	$__¡¼chr_c
 (cÚ¡ *
__s
, 
__c
)

1444 
__d0
, 
__d1
;

1445 *
__»s
;

1446 
__asm__
 
__vŞ©e__


1456 : "=d" (
__»s
), "=&S" (
__d0
), "=&a" (
__d1
)

1457 : "0" (0), "1" (
__s
), "2" (
__c
),

1458 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1460  
__»s
;

1461 
	}
}

1463 
__STRING_INLINE
 *
__¡¼chr_g
 (cÚ¡ *
__s
, 
__c
);

1465 
__STRING_INLINE
 *

1466 
	$__¡¼chr_g
 (cÚ¡ *
__s
, 
__c
)

1468 
__d0
, 
__d1
;

1469 *
__»s
;

1470 
__asm__
 
__vŞ©e__


1481 : "ô" (
__»s
), "=&S" (
__d0
), "=&a" (
__d1
)

1482 : "0" (0), "1" (
__s
), "2" (
__c
),

1483 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1485  
__»s
;

1486 
	}
}

1490 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


1492 
	#_HAVE_STRING_ARCH_ršdex
 1

	)

1493 
	#ršdex
(
s
, 
c
) \

1494 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
c
) \

1495 ? 
	`__¡¼chr_c
 ((
s
), ((
c
) & 0xff) << 8) \

1496 : 
	`__¡¼chr_g
 ((
s
), (
c
))))

	)

1502 
	#_HAVE_STRING_ARCH_¡rc¥n
 1

	)

1503 
	#¡rc¥n
(
s
, 
»jeù
) \

1504 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
»jeù
) &&  ((reject)[0]) == 1 \

1505 ? ((
»jeù
)[0] == '\0' \

1506 ? 
	`¡¾’
 (
s
) \

1507 : ((
»jeù
)[1] == '\0' \

1508 ? 
	`__¡rc¥n_c1
 ((
s
), (((
»jeù
)[0] << 8) & 0xff00)) \

1509 : 
	`__¡rc¥n_cg
 ((
s
), (
»jeù
), 
	`¡¾’
 (reject)))) \

1510 : 
	`__¡rc¥n_g
 ((
s
), (
»jeù
))))

	)

1512 
__STRING_INLINE
 
size_t
 
__¡rc¥n_c1
 (cÚ¡ *
__s
, 
__»jeù
);

1514 #iâdeà
_FORCE_INLINES


1515 
__STRING_INLINE
 
size_t


1516 
	$__¡rc¥n_c1
 (cÚ¡ *
__s
, 
__»jeù
)

1518 
__d0
;

1519 *
__»s
;

1520 
__asm__
 
__vŞ©e__


1529 : "ô" (
__»s
), "=&a" (
__d0
)

1530 : "0" (
__s
), "1" (
__»jeù
),

1531 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1533  (
__»s
 - 1è- 
__s
;

1534 
	}
}

1537 
__STRING_INLINE
 
size_t
 
__¡rc¥n_cg
 (cÚ¡ *
__s
, cÚ¡ 
__»jeù
[],

1538 
size_t
 
__»jeù_Ën
);

1540 
__STRING_INLINE
 
size_t


1541 
	$__¡rc¥n_cg
 (cÚ¡ *
__s
, cÚ¡ 
__»jeù
[], 
size_t
 
__»jeù_Ën
)

1543 
__d0
, 
__d1
, 
__d2
;

1544 cÚ¡ *
__»s
;

1545 
__asm__
 
__vŞ©e__


1556 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1557 : "0" (
__s
), "d" (
__»jeù
), "g" (
__»jeù_Ën
)

1559  (
__»s
 - 1è- 
__s
;

1560 
	}
}

1562 
__STRING_INLINE
 
size_t
 
__¡rc¥n_g
 (cÚ¡ *
__s
, cÚ¡ *
__»jeù
);

1563 #ifdeà
__PIC__


1565 
__STRING_INLINE
 
size_t


1566 
	$__¡rc¥n_g
 (cÚ¡ *
__s
, cÚ¡ *
__»jeù
)

1568 
__d0
, 
__d1
, 
__d2
;

1569 cÚ¡ *
__»s
;

1570 
__asm__
 
__vŞ©e__


1587 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1588 : "r" (
__»jeù
), "0" (
__s
), "1" (0), "2" (0xffffffff)

1590  (
__»s
 - 1è- 
__s
;

1591 
	}
}

1593 
__STRING_INLINE
 
size_t


1594 
	$__¡rc¥n_g
 (cÚ¡ *
__s
, cÚ¡ *
__»jeù
)

1596 
__d0
, 
__d1
, 
__d2
, 
__d3
;

1597 cÚ¡ *
__»s
;

1598 
__asm__
 
__vŞ©e__


1612 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
), "=&d" (
__d3
)

1613 : "0" (
__s
), "1" (0), "2" (0xffffffff), "3" (
__»jeù
), "b" (__reject)

1616  (
__»s
 - 1è- 
__s
;

1617 
	}
}

1623 
	#_HAVE_STRING_ARCH_¡r¥n
 1

	)

1624 
	#¡r¥n
(
s
, 
acû±
) \

1625 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
acû±
) &&  ((accept)[0]) == 1 \

1626 ? ((
acû±
)[0] == '\0' \

1627 ? ((è(
s
), 0) \

1628 : ((
acû±
)[1] == '\0' \

1629 ? 
	`__¡r¥n_c1
 ((
s
), (((
acû±
)[0] << 8 ) & 0xff00)) \

1630 : 
	`__¡r¥n_cg
 ((
s
), (
acû±
), 
	`¡¾’
 (accept)))) \

1631 : 
	`__¡r¥n_g
 ((
s
), (
acû±
))))

	)

1633 #iâdeà
_FORCE_INLINES


1634 
__STRING_INLINE
 
size_t
 
__¡r¥n_c1
 (cÚ¡ *
__s
, 
__acû±
);

1636 
__STRING_INLINE
 
size_t


1637 
	$__¡r¥n_c1
 (cÚ¡ *
__s
, 
__acû±
)

1639 
__d0
;

1640 *
__»s
;

1642 
__asm__
 
__vŞ©e__


1648 : "ô" (
__»s
), "=&q" (
__d0
)

1649 : "0" (
__s
), "1" (
__acû±
),

1650 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1652  (
__»s
 - 1è- 
__s
;

1653 
	}
}

1656 
__STRING_INLINE
 
size_t
 
__¡r¥n_cg
 (cÚ¡ *
__s
, cÚ¡ 
__acû±
[],

1657 
size_t
 
__acû±_Ën
);

1659 
__STRING_INLINE
 
size_t


1660 
	$__¡r¥n_cg
 (cÚ¡ *
__s
, cÚ¡ 
__acû±
[], 
size_t
 
__acû±_Ën
)

1662 
__d0
, 
__d1
, 
__d2
;

1663 cÚ¡ *
__»s
;

1664 
__asm__
 
__vŞ©e__


1675 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1676 : "0" (
__s
), "g" (
__acû±
), "g" (
__acû±_Ën
),

1679 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
),

1680 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__acû±_Ën
]; } *)
__acû±
)

1682  (
__»s
 - 1è- 
__s
;

1683 
	}
}

1685 
__STRING_INLINE
 
size_t
 
__¡r¥n_g
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
);

1686 #ifdeà
__PIC__


1688 
__STRING_INLINE
 
size_t


1689 
	$__¡r¥n_g
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

1691 
__d0
, 
__d1
, 
__d2
;

1692 cÚ¡ *
__»s
;

1693 
__asm__
 
__vŞ©e__


1709 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1710 : "d" (
__acû±
), "0" (
__s
), "1" (0), "2" (0xffffffff), "3" (__accept)

1712  (
__»s
 - 1è- 
__s
;

1713 
	}
}

1715 
__STRING_INLINE
 
size_t


1716 
	$__¡r¥n_g
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

1718 
__d0
, 
__d1
, 
__d2
, 
__d3
;

1719 cÚ¡ *
__»s
;

1720 
__asm__
 
__vŞ©e__


1734 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
), "=&d" (
__d3
)

1735 : "0" (
__s
), "1" (0), "2" (0xffffffff), "3" (
__acû±
), "b" (__accept)

1737  (
__»s
 - 1è- 
__s
;

1738 
	}
}

1743 
	#_HAVE_STRING_ARCH_¡½brk
 1

	)

1744 
	#¡½brk
(
s
, 
acû±
) \

1745 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
acû±
) &&  ((accept)[0]) == 1 \

1746 ? ((
acû±
)[0] == '\0' \

1747 ? ((è(
s
), (*) 0) \

1748 : ((
acû±
)[1] == '\0' \

1749 ? 
	`¡rchr
 ((
s
), (
acû±
)[0]) \

1750 : 
	`__¡½brk_cg
 ((
s
), (
acû±
), 
	`¡¾’
 (accept)))) \

1751 : 
	`__¡½brk_g
 ((
s
), (
acû±
))))

	)

1753 
__STRING_INLINE
 *
__¡½brk_cg
 (cÚ¡ *
__s
, cÚ¡ 
__acû±
[],

1754 
size_t
 
__acû±_Ën
);

1756 
__STRING_INLINE
 *

1757 
	$__¡½brk_cg
 (cÚ¡ *
__s
, cÚ¡ 
__acû±
[], 
size_t
 
__acû±_Ën
)

1759 
__d0
, 
__d1
, 
__d2
;

1760 *
__»s
;

1761 
__asm__
 
__vŞ©e__


1776 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1777 : "0" (
__s
), "d" (
__acû±
), "g" (
__acû±_Ën
)

1779  
__»s
;

1780 
	}
}

1782 
__STRING_INLINE
 *
__¡½brk_g
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
);

1783 #ifdeà
__PIC__


1785 
__STRING_INLINE
 *

1786 
	$__¡½brk_g
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

1788 
__d0
, 
__d1
, 
__d2
;

1789 *
__»s
;

1790 
__asm__
 
__vŞ©e__


1811 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1812 : "d" (
__acû±
), "0" (
__s
), "1" (0), "2" (0xffffffff)

1814  
__»s
;

1815 
	}
}

1817 
__STRING_INLINE
 *

1818 
	$__¡½brk_g
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

1820 
__d0
, 
__d1
, 
__d2
, 
__d3
;

1821 *
__»s
;

1822 
__asm__
 
__vŞ©e__


1841 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&d" (
__d2
), "=&D" (
__d3
)

1842 : "0" (
__s
), "1" (0), "2" (0xffffffff), "b" (
__acû±
)

1844  
__»s
;

1845 
	}
}

1850 
	#_HAVE_STRING_ARCH_¡r¡r
 1

	)

1851 
	#¡r¡r
(
hay¡ack
, 
ÃedË
) \

1852 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
ÃedË
) &&  ((needle)[0]) == 1 \

1853 ? ((
ÃedË
)[0] == '\0' \

1854 ? (
hay¡ack
) \

1855 : ((
ÃedË
)[1] == '\0' \

1856 ? 
	`¡rchr
 ((
hay¡ack
), (
ÃedË
)[0]) \

1857 : 
	`__¡r¡r_cg
 ((
hay¡ack
), (
ÃedË
), \

1858 
	`¡¾’
 (
ÃedË
)))) \

1859 : 
	`__¡r¡r_g
 ((
hay¡ack
), (
ÃedË
))))

	)

1863 
__STRING_INLINE
 *
__¡r¡r_cg
 (cÚ¡ *
__hay¡ack
,

1864 cÚ¡ 
__ÃedË
[],

1865 
size_t
 
__ÃedË_Ën
);

1867 
__STRING_INLINE
 *

1868 
	$__¡r¡r_cg
 (cÚ¡ *
__hay¡ack
, cÚ¡ 
__ÃedË
[],

1869 
size_t
 
__ÃedË_Ën
)

1871 
__d0
, 
__d1
, 
__d2
;

1872 *
__»s
;

1873 
__asm__
 
__vŞ©e__


1886 : "=&a" (
__»s
), "=&S" (
__d0
), "=&D" (
__d1
), "=&c" (
__d2
)

1887 : "g" (
__ÃedË_Ën
), "1" (
__hay¡ack
), "d" (
__ÃedË
)

1889  
__»s
;

1890 
	}
}

1892 
__STRING_INLINE
 *
__¡r¡r_g
 (cÚ¡ *
__hay¡ack
,

1893 cÚ¡ *
__ÃedË
);

1894 #ifdeà
__PIC__


1896 
__STRING_INLINE
 *

1897 
	$__¡r¡r_g
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

1899 
__d0
, 
__d1
, 
__d2
;

1900 *
__»s
;

1901 
__asm__
 
__vŞ©e__


1920 : "=&a" (
__»s
), "=&c" (
__d0
), "=&S" (
__d1
), "=&D" (
__d2
)

1921 : "0" (0), "1" (0xffffffff), "2" (
__hay¡ack
), "3" (
__ÃedË
),

1922 "d" (
__ÃedË
)

1924  
__»s
;

1925 
	}
}

1927 
__STRING_INLINE
 *

1928 
	$__¡r¡r_g
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

1930 
__d0
, 
__d1
, 
__d2
, 
__d3
;

1931 *
__»s
;

1932 
__asm__
 
__vŞ©e__


1949 : "=&a" (
__»s
), "=&c" (
__d0
), "=&S" (
__d1
), "=&D" (
__d2
), "=&d" (
__d3
)

1950 : "0" (0), "1" (0xffffffff), "2" (
__hay¡ack
), "3" (
__ÃedË
),

1951 "b" (
__ÃedË
)

1953  
__»s
;

1954 
	}
}

1960 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


1961 #ifdeà
__i686__


1962 
	#_HAVE_STRING_ARCH_ffs
 1

	)

1963 
	#ffs
(
wÜd
è(
	`__butš_cÚ¡ªt_p
 (word) \

1964 ? 
	`__butš_ffs
 (
wÜd
) \

1965 : ({ 
__út
, 
__tmp
; \

1966 
__asm__
 
__vŞ©e__
 \

1969 : "=&r" (
__út
), "ô" (
__tmp
) \

1970 : "rm" (
wÜd
), "1" (-1)); \

1971 
__út
 + 1; }))

	)

1973 #iâdeà
ff¦


1974 
	#ff¦
(
wÜd
è
	`ffs
(wÜd)

	)

1979 #iâdeà
_FORCE_INLINES


1980 #undeà
__STRING_INLINE


	@/usr/include/bits/string2.h

20 #iâdeà
_STRING_H


24 #iâdeà
__NO_STRING_INLINES


41 #iâdeà
__STRING_INLINE


42 #ifdeà
__ılu¥lus


43 
	#__STRING_INLINE
 
šlše


	)

45 
	#__STRING_INLINE
 
__ex‹º_šlše


	)

49 #ià
_STRING_ARCH_uÇligÃd


51 
	~<’dŸn.h
>

52 
	~<b™s/ty³s.h
>

54 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


55 
	#__STRING2_SMALL_GET16
(
¤c
, 
idx
) \

56 (((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
 + 1] << 8 \

57 | ((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
])

	)

58 
	#__STRING2_SMALL_GET32
(
¤c
, 
idx
) \

59 (((((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
 + 3] << 8 \

60 | ((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
 + 2]) << 8 \

61 | ((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
 + 1]) << 8 \

62 | ((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
])

	)

64 
	#__STRING2_SMALL_GET16
(
¤c
, 
idx
) \

65 (((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
] << 8 \

66 | ((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
 + 1])

	)

67 
	#__STRING2_SMALL_GET32
(
¤c
, 
idx
) \

68 (((((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
] << 8 \

69 | ((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
 + 1]) << 8 \

70 | ((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
 + 2]) << 8 \

71 | ((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
 + 3])

	)

76 
	#__STRING2_COPY_TYPE
(
N
) \

77 ¡ruù { 
__¬r
[
N
]; } \

78 
	t__©Œibu‹__
 ((
	t__·cked__
)è
	t__STRING2_COPY_ARR
##
	tN


	)

79 
	t__STRING2_COPY_TYPE
 (2);

80 
__STRING2_COPY_TYPE
 (3);

81 
__STRING2_COPY_TYPE
 (4);

82 
__STRING2_COPY_TYPE
 (5);

83 
__STRING2_COPY_TYPE
 (6);

84 
__STRING2_COPY_TYPE
 (7);

85 
__STRING2_COPY_TYPE
 (8);

86 #undeà
__STRING2_COPY_TYPE


92 
	#__¡ršg2_1b±r_p
(
__x
) \

93 ((
size_t
)(cÚ¡ *)((
__x
è+ 1è- (size_t)(cÚ¡ *)(__xè=ğ1)

	)

96 #ià!
defšed
 
_HAVE_STRING_ARCH_mem£t


97 #ià!
__GNUC_PREREQ
 (3, 0)

98 #ià
_STRING_ARCH_uÇligÃd


99 
	#mem£t
(
s
, 
c
, 
n
) \

100 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
n
) && (n) <= 16 \

101 ? ((
n
) == 1 \

102 ? 
	`__mem£t_1
 (
s
, 
c
) \

103 : 
	`__mem£t_gc
 (
s
, 
c
, 
n
)) \

104 : (
	`__butš_cÚ¡ªt_p
 (
c
) && (c) == '\0' \

105 ? ({ *
__s
 = (
s
); 
	`__bz”o
 (__s, 
n
); __s; }) \

106 : 
	`mem£t
 (
s
, 
c
, 
n
))))

	)

108 
	#__mem£t_1
(
s
, 
c
è({ *
__s
 = (s); \

109 *((
__ušt8_t
 *è
__s
èğ(__ušt8_tè
c
; __s; })

	)

111 
	#__mem£t_gc
(
s
, 
c
, 
n
) \

112 ({ *
__s
 = (
s
); \

114 
__ui
; \

115 
__usi
; \

116 
__uc
; \

117 } *
__u
 = 
__s
; \

118 
__ušt8_t
 
__c
 = (__ušt8_tè(
c
); \

121 (è(
n
)) \

124 
__u
->
__ui
 = 
__c
 * 0x01010101; \

125 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

127 
__u
->
__ui
 = 
__c
 * 0x01010101; \

128 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

130 
__u
->
__ui
 = 
__c
 * 0x01010101; \

131 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

133 
__u
->
__usi
 = (è
__c
 * 0x0101; \

134 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2); \

135 
__u
->
__uc
 = (è
__c
; \

139 
__u
->
__ui
 = 
__c
 * 0x01010101; \

140 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

142 
__u
->
__ui
 = 
__c
 * 0x01010101; \

143 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

145 
__u
->
__ui
 = 
__c
 * 0x01010101; \

146 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

148 
__u
->
__usi
 = (è
__c
 * 0x0101; \

152 
__u
->
__ui
 = 
__c
 * 0x01010101; \

153 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

155 
__u
->
__ui
 = 
__c
 * 0x01010101; \

156 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

158 
__u
->
__ui
 = 
__c
 * 0x01010101; \

159 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

161 
__u
->
__uc
 = (è
__c
; \

165 
__u
->
__ui
 = 
__c
 * 0x01010101; \

166 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

168 
__u
->
__ui
 = 
__c
 * 0x01010101; \

169 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

171 
__u
->
__ui
 = 
__c
 * 0x01010101; \

172 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

174 
__u
->
__ui
 = 
__c
 * 0x01010101; \

179 
__s
; })

	)

181 
	#mem£t
(
s
, 
c
, 
n
) \

182 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
c
) && (c) == '\0' \

183 ? ({ *
__s
 = (
s
); 
	`__bz”o
 (__s, 
n
); __s; }) \

184 : 
	`mem£t
 (
s
, 
c
, 
n
)))

	)

193 #ià
__GNUC_PREREQ
 (2, 91)

194 
	#__bz”o
(
s
, 
n
è
	`__butš_mem£t
 (s, '\0',‚)

	)

202 #ifdeà
__USE_GNU


203 #ià!
defšed
 
_HAVE_STRING_ARCH_mempıy
 || defšed 
_FORCE_INLINES


204 #iâdeà
_HAVE_STRING_ARCH_mempıy


205 #ià
__GNUC_PREREQ
 (3, 4)

206 
	#__mempıy
(
de¡
, 
¤c
, 
n
è
	`__butš_mempıy
 (de¡, src,‚)

	)

207 #–ià
__GNUC_PREREQ
 (3, 0)

208 
	#__mempıy
(
de¡
, 
¤c
, 
n
) \

209 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
è&& __butš_cÚ¡ªt_°(
n
) \

210 && 
	`__¡ršg2_1b±r_p
 (
¤c
è&& 
n
 <= 8 \

211 ? 
	`__butš_memıy
 (
de¡
, 
¤c
, 
n
) + (n) \

212 : 
	`__mempıy
 (
de¡
, 
¤c
, 
n
)))

	)

214 
	#__mempıy
(
de¡
, 
¤c
, 
n
) \

215 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
è&& __butš_cÚ¡ªt_°(
n
) \

216 && 
	`__¡ršg2_1b±r_p
 (
¤c
è&& 
n
 <= 8 \

217 ? 
	`__mempıy_sm®l
 (
de¡
, 
	`__mempıy_¬gs
 (
¤c
), 
n
) \

218 : 
	`__mempıy
 (
de¡
, 
¤c
, 
n
)))

	)

222 
	#mempıy
(
de¡
, 
¤c
, 
n
è
	`__mempıy
 (de¡, src,‚)

	)

225 #ià!
__GNUC_PREREQ
 (3, 0è|| 
defšed
 
_FORCE_INLINES


226 #ià
_STRING_ARCH_uÇligÃd


227 #iâdeà
_FORCE_INLINES


228 
	#__mempıy_¬gs
(
¤c
) \

229 ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[2], \

230 ((cÚ¡ *è(
¤c
))[4], ((const *) (src))[6], \

231 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 0), \

232 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 4), \

233 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 0), \

234 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 4)

	)

236 
__STRING_INLINE
 *
__mempıy_sm®l
 (*, , , , ,

237 
__ušt16_t
, __ušt16_t, 
__ušt32_t
,

238 
__ušt32_t
, 
size_t
);

239 
__STRING_INLINE
 *

240 
	$__mempıy_sm®l
 (*
__de¡1
,

241 
__¤c0_1
, 
__¤c2_1
, 
__¤c4_1
, 
__¤c6_1
,

242 
__ušt16_t
 
__¤c0_2
, __ušt16_ˆ
__¤c4_2
,

243 
__ušt32_t
 
__¤c0_4
, __ušt32_ˆ
__¤c4_4
,

244 
size_t
 
__¤ş’
)

247 
__ušt32_t
 
__ui
;

248 
__ušt16_t
 
__usi
;

249 
__uc
;

250 
__c
;

251 } *
__u
 = 
__de¡1
;

252 (è
__¤ş’
)

255 
__u
->
__c
 = 
__¤c0_1
;

256 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

259 
__u
->
__usi
 = 
__¤c0_2
;

260 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

263 
__u
->
__usi
 = 
__¤c0_2
;

264 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

265 
__u
->
__c
 = 
__¤c2_1
;

266 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

269 
__u
->
__ui
 = 
__¤c0_4
;

270 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

273 
__u
->
__ui
 = 
__¤c0_4
;

274 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

275 
__u
->
__c
 = 
__¤c4_1
;

276 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

279 
__u
->
__ui
 = 
__¤c0_4
;

280 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

281 
__u
->
__usi
 = 
__¤c4_2
;

282 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

285 
__u
->
__ui
 = 
__¤c0_4
;

286 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

287 
__u
->
__usi
 = 
__¤c4_2
;

288 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

289 
__u
->
__c
 = 
__¤c6_1
;

290 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

293 
__u
->
__ui
 = 
__¤c0_4
;

294 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

295 
__u
->
__ui
 = 
__¤c4_4
;

296 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

299  (*è
__u
;

300 
	}
}

302 #iâdeà
_FORCE_INLINES


303 
	#__mempıy_¬gs
(
¤c
) \

304 ((cÚ¡ *è(
¤c
))[0], \

305 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR2
) \

306 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1] } }), \

307 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR3
) \

308 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

309 ((cÚ¡ *è(
¤c
))[2] } }), \

310 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR4
) \

311 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

312 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3] } }), \

313 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR5
) \

314 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

315 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

316 ((cÚ¡ *è(
¤c
))[4] } }), \

317 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR6
) \

318 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

319 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

320 ((cÚ¡ *è(
¤c
))[4], ((const *) (src))[5] } }), \

321 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR7
) \

322 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

323 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

324 ((cÚ¡ *è(
¤c
))[4], ((const *) (src))[5], \

325 ((cÚ¡ *è(
¤c
))[6] } }), \

326 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR8
) \

327 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

328 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

329 ((cÚ¡ *è(
¤c
))[4], ((const *) (src))[5], \

330 ((cÚ¡ *è(
¤c
))[6], ((cÚ¡ *è(¤c))[7] } })

	)

332 
__STRING_INLINE
 *
__mempıy_sm®l
 (*, , 
__STRING2_COPY_ARR2
,

333 
__STRING2_COPY_ARR3
,

334 
__STRING2_COPY_ARR4
,

335 
__STRING2_COPY_ARR5
,

336 
__STRING2_COPY_ARR6
,

337 
__STRING2_COPY_ARR7
,

338 
__STRING2_COPY_ARR8
, 
size_t
);

339 
__STRING_INLINE
 *

340 
	$__mempıy_sm®l
 (*
__de¡
, 
__¤c1
,

341 
__STRING2_COPY_ARR2
 
__¤c2
, 
__STRING2_COPY_ARR3
 
__¤c3
,

342 
__STRING2_COPY_ARR4
 
__¤c4
, 
__STRING2_COPY_ARR5
 
__¤c5
,

343 
__STRING2_COPY_ARR6
 
__¤c6
, 
__STRING2_COPY_ARR7
 
__¤c7
,

344 
__STRING2_COPY_ARR8
 
__¤c8
, 
size_t
 
__¤ş’
)

347 
__c
;

348 
__STRING2_COPY_ARR2
 
__sÿ2
;

349 
__STRING2_COPY_ARR3
 
__sÿ3
;

350 
__STRING2_COPY_ARR4
 
__sÿ4
;

351 
__STRING2_COPY_ARR5
 
__sÿ5
;

352 
__STRING2_COPY_ARR6
 
__sÿ6
;

353 
__STRING2_COPY_ARR7
 
__sÿ7
;

354 
__STRING2_COPY_ARR8
 
__sÿ8
;

355 } *
__u
 = 
__de¡
;

356 (è
__¤ş’
)

359 
__u
->
__c
 = 
__¤c1
;

362 
__ex‹nsiÚ__
 
__u
->
__sÿ2
 = 
__¤c2
;

365 
__ex‹nsiÚ__
 
__u
->
__sÿ3
 = 
__¤c3
;

368 
__ex‹nsiÚ__
 
__u
->
__sÿ4
 = 
__¤c4
;

371 
__ex‹nsiÚ__
 
__u
->
__sÿ5
 = 
__¤c5
;

374 
__ex‹nsiÚ__
 
__u
->
__sÿ6
 = 
__¤c6
;

377 
__ex‹nsiÚ__
 
__u
->
__sÿ7
 = 
__¤c7
;

380 
__ex‹nsiÚ__
 
__u
->
__sÿ8
 = 
__¤c8
;

383  
	`__ex‹nsiÚ__
 ((*è
__u
 + 
__¤ş’
);

384 
	}
}

392 #iâdeà
_HAVE_STRING_ARCH_¡rchr


393 *
__¿wmemchr
 (cÚ¡ *
__s
, 
__c
);

394 #ià
__GNUC_PREREQ
 (3, 2)

395 
	#¡rchr
(
s
, 
c
) \

396 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
c
è&& !__butš_cÚ¡ªt_°(
s
) \

397 && (
c
) == '\0' \

398 ? (*è
	`__¿wmemchr
 (
s
, 
c
) \

399 : 
	`__butš_¡rchr
 (
s
, 
c
)))

	)

401 
	#¡rchr
(
s
, 
c
) \

402 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
c
) && (c) == '\0' \

403 ? (*è
	`__¿wmemchr
 (
s
, 
c
) \

404 : 
	`¡rchr
 (
s
, 
c
)))

	)

410 #ià(!
defšed
 
_HAVE_STRING_ARCH_¡rıy
 && !
__GNUC_PREREQ
 (3, 0)) \

411 || 
defšed
 
	g_FORCE_INLINES


412 #ià!
defšed
 
_HAVE_STRING_ARCH_¡rıy
 && !
__GNUC_PREREQ
 (3, 0)

413 
	#¡rıy
(
de¡
, 
¤c
) \

414 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
) \

415 ? (
	`__¡ršg2_1b±r_p
 (
¤c
è&& 
	`¡¾’
 (src) + 1 <= 8 \

416 ? 
	`__¡rıy_sm®l
 (
de¡
, 
	`__¡rıy_¬gs
 (
¤c
), \

417 
	`¡¾’
 (
¤c
) + 1) \

418 : (*è
	`memıy
 (
de¡
, 
¤c
, 
	`¡¾’
 (src) + 1)) \

419 : 
	`¡rıy
 (
de¡
, 
¤c
)))

	)

422 #ià
_STRING_ARCH_uÇligÃd


423 #iâdeà
_FORCE_INLINES


424 
	#__¡rıy_¬gs
(
¤c
) \

425 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 0), \

426 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 4), \

427 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 0), \

428 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 4)

	)

430 
__STRING_INLINE
 *
__¡rıy_sm®l
 (*, 
__ušt16_t
, __uint16_t,

431 
__ušt32_t
, __ušt32_t, 
size_t
);

432 
__STRING_INLINE
 *

433 
	$__¡rıy_sm®l
 (*
__de¡
,

434 
__ušt16_t
 
__¤c0_2
, __ušt16_ˆ
__¤c4_2
,

435 
__ušt32_t
 
__¤c0_4
, __ušt32_ˆ
__¤c4_4
,

436 
size_t
 
__¤ş’
)

439 
__ušt32_t
 
__ui
;

440 
__ušt16_t
 
__usi
;

441 
__uc
;

442 } *
__u
 = (*è
__de¡
;

443 (è
__¤ş’
)

446 
__u
->
__uc
 = '\0';

449 
__u
->
__usi
 = 
__¤c0_2
;

452 
__u
->
__usi
 = 
__¤c0_2
;

453 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

454 
__u
->
__uc
 = '\0';

457 
__u
->
__ui
 = 
__¤c0_4
;

460 
__u
->
__ui
 = 
__¤c0_4
;

461 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

462 
__u
->
__uc
 = '\0';

465 
__u
->
__ui
 = 
__¤c0_4
;

466 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

467 
__u
->
__usi
 = 
__¤c4_2
;

470 
__u
->
__ui
 = 
__¤c0_4
;

471 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

472 
__u
->
__usi
 = 
__¤c4_2
;

473 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

474 
__u
->
__uc
 = '\0';

477 
__u
->
__ui
 = 
__¤c0_4
;

478 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

479 
__u
->
__ui
 = 
__¤c4_4
;

482  
__de¡
;

483 
	}
}

485 #iâdeà
_FORCE_INLINES


486 
	#__¡rıy_¬gs
(
¤c
) \

487 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR2
) \

488 { { ((cÚ¡ *è(
¤c
))[0], '\0' } }), \

489 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR3
) \

490 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

492 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR4
) \

493 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

494 ((cÚ¡ *è(
¤c
))[2], '\0' } }), \

495 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR5
) \

496 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

497 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

499 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR6
) \

500 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

501 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

502 ((cÚ¡ *è(
¤c
))[4], '\0' } }), \

503 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR7
) \

504 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

505 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

506 ((cÚ¡ *è(
¤c
))[4], ((const *) (src))[5], \

508 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR8
) \

509 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

510 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

511 ((cÚ¡ *è(
¤c
))[4], ((const *) (src))[5], \

512 ((cÚ¡ *è(
¤c
))[6], '\0' } })

	)

514 
__STRING_INLINE
 *
__¡rıy_sm®l
 (*, 
__STRING2_COPY_ARR2
,

515 
__STRING2_COPY_ARR3
,

516 
__STRING2_COPY_ARR4
,

517 
__STRING2_COPY_ARR5
,

518 
__STRING2_COPY_ARR6
,

519 
__STRING2_COPY_ARR7
,

520 
__STRING2_COPY_ARR8
, 
size_t
);

521 
__STRING_INLINE
 *

522 
	$__¡rıy_sm®l
 (*
__de¡
,

523 
__STRING2_COPY_ARR2
 
__¤c2
, 
__STRING2_COPY_ARR3
 
__¤c3
,

524 
__STRING2_COPY_ARR4
 
__¤c4
, 
__STRING2_COPY_ARR5
 
__¤c5
,

525 
__STRING2_COPY_ARR6
 
__¤c6
, 
__STRING2_COPY_ARR7
 
__¤c7
,

526 
__STRING2_COPY_ARR8
 
__¤c8
, 
size_t
 
__¤ş’
)

529 
__c
;

530 
__STRING2_COPY_ARR2
 
__sÿ2
;

531 
__STRING2_COPY_ARR3
 
__sÿ3
;

532 
__STRING2_COPY_ARR4
 
__sÿ4
;

533 
__STRING2_COPY_ARR5
 
__sÿ5
;

534 
__STRING2_COPY_ARR6
 
__sÿ6
;

535 
__STRING2_COPY_ARR7
 
__sÿ7
;

536 
__STRING2_COPY_ARR8
 
__sÿ8
;

537 } *
__u
 = (*è
__de¡
;

538 (è
__¤ş’
)

541 
__u
->
__c
 = '\0';

544 
__ex‹nsiÚ__
 
__u
->
__sÿ2
 = 
__¤c2
;

547 
__ex‹nsiÚ__
 
__u
->
__sÿ3
 = 
__¤c3
;

550 
__ex‹nsiÚ__
 
__u
->
__sÿ4
 = 
__¤c4
;

553 
__ex‹nsiÚ__
 
__u
->
__sÿ5
 = 
__¤c5
;

556 
__ex‹nsiÚ__
 
__u
->
__sÿ6
 = 
__¤c6
;

559 
__ex‹nsiÚ__
 
__u
->
__sÿ7
 = 
__¤c7
;

562 
__ex‹nsiÚ__
 
__u
->
__sÿ8
 = 
__¤c8
;

565  
__de¡
;

566 
	}
}

572 #ifdeà
__USE_GNU


573 #ià!
defšed
 
_HAVE_STRING_ARCH_¡pıy
 || defšed 
_FORCE_INLINES


574 #iâdeà
_HAVE_STRING_ARCH_¡pıy


575 #ià
__GNUC_PREREQ
 (3, 4)

576 
	#__¡pıy
(
de¡
, 
¤c
è
	`__butš_¡pıy
 (de¡, src)

	)

577 #–ià
__GNUC_PREREQ
 (3, 0)

578 
	#__¡pıy
(
de¡
, 
¤c
) \

579 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
) \

580 ? (
	`__¡ršg2_1b±r_p
 (
¤c
è&& 
	`¡¾’
 (src) + 1 <= 8 \

581 ? 
	`__butš_¡rıy
 (
de¡
, 
¤c
è+ 
	`¡¾’
 (src) \

582 : ((*è(
__mempıy
è(
de¡
, 
¤c
, 
	`¡¾’
 (src) + 1) \

584 : 
	`__¡pıy
 (
de¡
, 
¤c
)))

	)

586 
	#__¡pıy
(
de¡
, 
¤c
) \

587 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
) \

588 ? (
	`__¡ršg2_1b±r_p
 (
¤c
è&& 
	`¡¾’
 (src) + 1 <= 8 \

589 ? 
	`__¡pıy_sm®l
 (
de¡
, 
	`__¡pıy_¬gs
 (
¤c
), \

590 
	`¡¾’
 (
¤c
) + 1) \

591 : ((*è(
__mempıy
è(
de¡
, 
¤c
, 
	`¡¾’
 (src) + 1) \

593 : 
	`__¡pıy
 (
de¡
, 
¤c
)))

	)

597 
	#¡pıy
(
de¡
, 
¤c
è
	`__¡pıy
 (de¡, src)

	)

600 #ià!
__GNUC_PREREQ
 (3, 0è|| 
defšed
 
_FORCE_INLINES


601 #ià
_STRING_ARCH_uÇligÃd


602 #iâdeà
_FORCE_INLINES


603 
	#__¡pıy_¬gs
(
¤c
) \

604 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 0), \

605 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 4), \

606 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 0), \

607 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 4)

	)

609 
__STRING_INLINE
 *
__¡pıy_sm®l
 (*, 
__ušt16_t
, __uint16_t,

610 
__ušt32_t
, __ušt32_t, 
size_t
);

611 
__STRING_INLINE
 *

612 
	$__¡pıy_sm®l
 (*
__de¡
,

613 
__ušt16_t
 
__¤c0_2
, __ušt16_ˆ
__¤c4_2
,

614 
__ušt32_t
 
__¤c0_4
, __ušt32_ˆ
__¤c4_4
,

615 
size_t
 
__¤ş’
)

618 
__ui
;

619 
__usi
;

620 
__uc
;

621 
__c
;

622 } *
__u
 = (*è
__de¡
;

623 (è
__¤ş’
)

626 
__u
->
__uc
 = '\0';

629 
__u
->
__usi
 = 
__¤c0_2
;

630 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

633 
__u
->
__usi
 = 
__¤c0_2
;

634 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

635 
__u
->
__uc
 = '\0';

638 
__u
->
__ui
 = 
__¤c0_4
;

639 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 3);

642 
__u
->
__ui
 = 
__¤c0_4
;

643 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

644 
__u
->
__uc
 = '\0';

647 
__u
->
__ui
 = 
__¤c0_4
;

648 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

649 
__u
->
__usi
 = 
__¤c4_2
;

650 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

653 
__u
->
__ui
 = 
__¤c0_4
;

654 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

655 
__u
->
__usi
 = 
__¤c4_2
;

656 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

657 
__u
->
__uc
 = '\0';

660 
__u
->
__ui
 = 
__¤c0_4
;

661 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

662 
__u
->
__ui
 = 
__¤c4_4
;

663 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 3);

666  &
__u
->
__c
;

667 
	}
}

669 #iâdeà
_FORCE_INLINES


670 
	#__¡pıy_¬gs
(
¤c
) \

671 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR2
) \

672 { { ((cÚ¡ *è(
¤c
))[0], '\0' } }), \

673 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR3
) \

674 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

676 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR4
) \

677 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

678 ((cÚ¡ *è(
¤c
))[2], '\0' } }), \

679 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR5
) \

680 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

681 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

683 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR6
) \

684 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

685 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

686 ((cÚ¡ *è(
¤c
))[4], '\0' } }), \

687 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR7
) \

688 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

689 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

690 ((cÚ¡ *è(
¤c
))[4], ((const *) (src))[5], \

692 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR8
) \

693 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

694 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

695 ((cÚ¡ *è(
¤c
))[4], ((const *) (src))[5], \

696 ((cÚ¡ *è(
¤c
))[6], '\0' } })

	)

698 
__STRING_INLINE
 *
__¡pıy_sm®l
 (*, 
__STRING2_COPY_ARR2
,

699 
__STRING2_COPY_ARR3
,

700 
__STRING2_COPY_ARR4
,

701 
__STRING2_COPY_ARR5
,

702 
__STRING2_COPY_ARR6
,

703 
__STRING2_COPY_ARR7
,

704 
__STRING2_COPY_ARR8
, 
size_t
);

705 
__STRING_INLINE
 *

706 
	$__¡pıy_sm®l
 (*
__de¡
,

707 
__STRING2_COPY_ARR2
 
__¤c2
, 
__STRING2_COPY_ARR3
 
__¤c3
,

708 
__STRING2_COPY_ARR4
 
__¤c4
, 
__STRING2_COPY_ARR5
 
__¤c5
,

709 
__STRING2_COPY_ARR6
 
__¤c6
, 
__STRING2_COPY_ARR7
 
__¤c7
,

710 
__STRING2_COPY_ARR8
 
__¤c8
, 
size_t
 
__¤ş’
)

713 
__c
;

714 
__STRING2_COPY_ARR2
 
__sÿ2
;

715 
__STRING2_COPY_ARR3
 
__sÿ3
;

716 
__STRING2_COPY_ARR4
 
__sÿ4
;

717 
__STRING2_COPY_ARR5
 
__sÿ5
;

718 
__STRING2_COPY_ARR6
 
__sÿ6
;

719 
__STRING2_COPY_ARR7
 
__sÿ7
;

720 
__STRING2_COPY_ARR8
 
__sÿ8
;

721 } *
__u
 = (*è
__de¡
;

722 (è
__¤ş’
)

725 
__u
->
__c
 = '\0';

728 
__ex‹nsiÚ__
 
__u
->
__sÿ2
 = 
__¤c2
;

731 
__ex‹nsiÚ__
 
__u
->
__sÿ3
 = 
__¤c3
;

734 
__ex‹nsiÚ__
 
__u
->
__sÿ4
 = 
__¤c4
;

737 
__ex‹nsiÚ__
 
__u
->
__sÿ5
 = 
__¤c5
;

740 
__ex‹nsiÚ__
 
__u
->
__sÿ6
 = 
__¤c6
;

743 
__ex‹nsiÚ__
 
__u
->
__sÿ7
 = 
__¤c7
;

746 
__ex‹nsiÚ__
 
__u
->
__sÿ8
 = 
__¤c8
;

749  
__de¡
 + 
__¤ş’
 - 1;

750 
	}
}

758 #iâdeà
_HAVE_STRING_ARCH_¡ºıy


759 #ià
__GNUC_PREREQ
 (3, 2)

760 
	#¡ºıy
(
de¡
, 
¤c
, 
n
è
	`__butš_¡ºıy
 (de¡, src,‚)

	)

762 
	#¡ºıy
(
de¡
, 
¤c
, 
n
) \

763 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
è&& __butš_cÚ¡ªt_°(
n
) \

764 ? (
	`¡¾’
 (
¤c
è+ 1 >ğ((
size_t
è(
n
)) \

765 ? (*è
	`memıy
 (
de¡
, 
¤c
, 
n
) \

766 : 
	`¡ºıy
 (
de¡
, 
¤c
, 
n
)) \

767 : 
	`¡ºıy
 (
de¡
, 
¤c
, 
n
)))

	)

773 #iâdeà
_HAVE_STRING_ARCH_¡ºÿt


774 #ifdeà
_USE_STRING_ARCH_¡rchr


775 
	#¡ºÿt
(
de¡
, 
¤c
, 
n
) \

776 (
	`__ex‹nsiÚ__
 ({ *
__de¡
 = (
de¡
); \

777 
	`__butš_cÚ¡ªt_p
 (
¤c
è&& __butš_cÚ¡ªt_°(
n
) \

778 ? (
	`¡¾’
 (
¤c
è< ((
size_t
è(
n
)) \

779 ? 
	`¡rÿt
 (
__de¡
, 
¤c
) \

780 : (*((*è
	`__mempıy
 (
	`¡rchr
 (
__de¡
, '\0'), \

781 
¤c
, 
n
)èğ'\0', 
__de¡
)) \

782 : 
	`¡ºÿt
 (
de¡
, 
¤c
, 
n
); }))

	)

783 #–ià
__GNUC_PREREQ
 (3, 2)

784 
	#¡ºÿt
(
de¡
, 
¤c
, 
n
è
	`__butš_¡ºÿt
 (de¡, src,‚)

	)

786 
	#¡ºÿt
(
de¡
, 
¤c
, 
n
) \

787 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
è&& __butš_cÚ¡ªt_°(
n
) \

788 ? (
	`¡¾’
 (
¤c
è< ((
size_t
è(
n
)) \

789 ? 
	`¡rÿt
 (
de¡
, 
¤c
) \

790 : 
	`¡ºÿt
 (
de¡
, 
¤c
, 
n
)) \

791 : 
	`¡ºÿt
 (
de¡
, 
¤c
, 
n
)))

	)

797 #iâdeà
_HAVE_STRING_ARCH_¡rcmp


798 #ià
__GNUC_PREREQ
 (3, 2)

799 
	#¡rcmp
(
s1
, 
s2
) \

800 
__ex‹nsiÚ__
 \

801 ({ 
size_t
 
__s1_Ën
, 
__s2_Ën
; \

802 (
	`__butš_cÚ¡ªt_p
 (
s1
è&& __butš_cÚ¡ªt_°(
s2
) \

803 && (
__s1_Ën
 = 
	`__butš_¡¾’
 (
s1
), 
__s2_Ën
 = __butš_¡¾’ (
s2
), \

804 (!
	`__¡ršg2_1b±r_p
 (
s1
è|| 
__s1_Ën
 >= 4) \

805 && (!
	`__¡ršg2_1b±r_p
 (
s2
è|| 
__s2_Ën
 >= 4)) \

806 ? 
	`__butš_¡rcmp
 (
s1
, 
s2
) \

807 : (
	`__butš_cÚ¡ªt_p
 (
s1
è&& 
	`__¡ršg2_1b±r_p
 (s1) \

808 && (
__s1_Ën
 = 
	`__butš_¡¾’
 (
s1
), __s1_len < 4) \

809 ? (
	`__butš_cÚ¡ªt_p
 (
s2
è&& 
	`__¡ršg2_1b±r_p
 (s2) \

810 ? 
	`__butš_¡rcmp
 (
s1
, 
s2
) \

811 : 
	`__¡rcmp_cg
 (
s1
, 
s2
, 
__s1_Ën
)) \

812 : (
	`__butš_cÚ¡ªt_p
 (
s2
è&& 
	`__¡ršg2_1b±r_p
 (s2) \

813 && (
__s2_Ën
 = 
	`__butš_¡¾’
 (
s2
), __s2_len < 4) \

814 ? (
	`__butš_cÚ¡ªt_p
 (
s1
è&& 
	`__¡ršg2_1b±r_p
 (s1) \

815 ? 
	`__butš_¡rcmp
 (
s1
, 
s2
) \

816 : 
	`__¡rcmp_gc
 (
s1
, 
s2
, 
__s2_Ën
)) \

817 : 
	`__butš_¡rcmp
 (
s1
, 
s2
)))); })

	)

819 
	#¡rcmp
(
s1
, 
s2
) \

820 
__ex‹nsiÚ__
 \

821 ({ 
size_t
 
__s1_Ën
, 
__s2_Ën
; \

822 (
	`__butš_cÚ¡ªt_p
 (
s1
è&& __butš_cÚ¡ªt_°(
s2
) \

823 && (
__s1_Ën
 = 
	`¡¾’
 (
s1
), 
__s2_Ën
 = sŒËÀ(
s2
), \

824 (!
	`__¡ršg2_1b±r_p
 (
s1
è|| 
__s1_Ën
 >= 4) \

825 && (!
	`__¡ršg2_1b±r_p
 (
s2
è|| 
__s2_Ën
 >= 4)) \

826 ? 
	`memcmp
 ((cÚ¡ *è(
s1
), (cÚ¡ *è(
s2
), \

827 (
__s1_Ën
 < 
__s2_Ën
 ? __s1_len : __s2_len) + 1) \

828 : (
	`__butš_cÚ¡ªt_p
 (
s1
è&& 
	`__¡ršg2_1b±r_p
 (s1) \

829 && (
__s1_Ën
 = 
	`¡¾’
 (
s1
), __s1_len < 4) \

830 ? (
	`__butš_cÚ¡ªt_p
 (
s2
è&& 
	`__¡ršg2_1b±r_p
 (s2) \

831 ? 
	`__¡rcmp_cc
 (
s1
, 
s2
, 
__s1_Ën
) \

832 : 
	`__¡rcmp_cg
 (
s1
, 
s2
, 
__s1_Ën
)) \

833 : (
	`__butš_cÚ¡ªt_p
 (
s2
è&& 
	`__¡ršg2_1b±r_p
 (s2) \

834 && (
__s2_Ën
 = 
	`¡¾’
 (
s2
), __s2_len < 4) \

835 ? (
	`__butš_cÚ¡ªt_p
 (
s1
è&& 
	`__¡ršg2_1b±r_p
 (s1) \

836 ? 
	`__¡rcmp_cc
 (
s1
, 
s2
, 
__s2_Ën
) \

837 : 
	`__¡rcmp_gc
 (
s1
, 
s2
, 
__s2_Ën
)) \

838 : 
	`¡rcmp
 (
s1
, 
s2
)))); })

	)

841 
	#__¡rcmp_cc
(
s1
, 
s2
, 
l
) \

842 (
	`__ex‹nsiÚ__
 ({ 
__»suÉ
 = \

843 (((cÚ¡ *è(cÚ¡ *è(
s1
))[0] \

844 - ((cÚ¡ *è(cÚ¡ *)(
s2
))[0]); \

845 ià(
l
 > 0 && 
__»suÉ
 == 0) \

847 
__»suÉ
 = (((const *) \

848 (cÚ¡ *è(
s1
))[1] \

850 (cÚ¡ *è(
s2
))[1]); \

851 ià(
l
 > 1 && 
__»suÉ
 == 0) \

853 
__»suÉ
 = \

855 (cÚ¡ *è(
s1
))[2] \

857 (cÚ¡ *è(
s2
))[2]); \

858 ià(
l
 > 2 && 
__»suÉ
 == 0) \

859 
__»suÉ
 = \

861 (cÚ¡ *è(
s1
))[3] \

863 (cÚ¡ *è(
s2
))[3]); \

866 
__»suÉ
; }))

	)

868 
	#__¡rcmp_cg
(
s1
, 
s2
, 
l1
) \

869 (
	`__ex‹nsiÚ__
 ({ cÚ¡ *
__s2
 = \

870 (cÚ¡ *è(cÚ¡ *è(
s2
); \

871 
__»suÉ
 = \

872 (((cÚ¡ *è(cÚ¡ *è(
s1
))[0] \

873 - 
__s2
[0]); \

874 ià(
l1
 > 0 && 
__»suÉ
 == 0) \

876 
__»suÉ
 = (((const *) \

877 (cÚ¡ *è(
s1
))[1] - 
__s2
[1]); \

878 ià(
l1
 > 1 && 
__»suÉ
 == 0) \

880 
__»suÉ
 = (((const *) \

881 (cÚ¡ *è(
s1
))[2] - 
__s2
[2]); \

882 ià(
l1
 > 2 && 
__»suÉ
 == 0) \

883 
__»suÉ
 = (((const *) \

884 (cÚ¡ *è(
s1
))[3] \

885 - 
__s2
[3]); \

888 
__»suÉ
; }))

	)

890 
	#__¡rcmp_gc
(
s1
, 
s2
, 
l2
è(- 
	`__¡rcmp_cg
 (s2, s1,†2))

	)

895 #iâdeà
_HAVE_STRING_ARCH_¡ºcmp


896 
	#¡ºcmp
(
s1
, 
s2
, 
n
) \

897 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
n
) \

898 && ((
	`__butš_cÚ¡ªt_p
 (
s1
) \

899 && 
	`¡¾’
 (
s1
è< ((
size_t
è(
n
))) \

900 || (
	`__butš_cÚ¡ªt_p
 (
s2
) \

901 && 
	`¡¾’
 (
s2
è< ((
size_t
è(
n
)))) \

902 ? 
	`¡rcmp
 (
s1
, 
s2
è: 
	`¡ºcmp
 (s1, s2, 
n
)))

	)

908 #ià!
defšed
 
_HAVE_STRING_ARCH_¡rc¥n
 || defšed 
_FORCE_INLINES


909 #iâdeà
_HAVE_STRING_ARCH_¡rc¥n


910 #ià
__GNUC_PREREQ
 (3, 2)

911 
	#¡rc¥n
(
s
, 
»jeù
) \

912 
__ex‹nsiÚ__
 \

913 ({ 
__r0
, 
__r1
, 
__r2
; \

914 (
	`__butš_cÚ¡ªt_p
 (
»jeù
è&& 
	`__¡ršg2_1b±r_p
 (reject) \

915 ? ((
	`__butš_cÚ¡ªt_p
 (
s
è&& 
	`__¡ršg2_1b±r_p
 (s)) \

916 ? 
	`__butš_¡rc¥n
 (
s
, 
»jeù
) \

917 : ((
__r0
 = ((cÚ¡ *è(
»jeù
))[0], __r0 == '\0') \

918 ? 
	`¡¾’
 (
s
) \

919 : ((
__r1
 = ((cÚ¡ *è(
»jeù
))[1], __r1 == '\0') \

920 ? 
	`__¡rc¥n_c1
 (
s
, 
__r0
) \

921 : ((
__r2
 = ((cÚ¡ *è(
»jeù
))[2], __r2 == '\0') \

922 ? 
	`__¡rc¥n_c2
 (
s
, 
__r0
, 
__r1
) \

923 : (((cÚ¡ *è(
»jeù
))[3] == '\0' \

924 ? 
	`__¡rc¥n_c3
 (
s
, 
__r0
, 
__r1
, 
__r2
) \

925 : 
	`__butš_¡rc¥n
 (
s
, 
»jeù
)))))) \

926 : 
	`__butš_¡rc¥n
 (
s
, 
»jeù
)); })

	)

928 
	#¡rc¥n
(
s
, 
»jeù
) \

929 
__ex‹nsiÚ__
 \

930 ({ 
__r0
, 
__r1
, 
__r2
; \

931 (
	`__butš_cÚ¡ªt_p
 (
»jeù
è&& 
	`__¡ršg2_1b±r_p
 (reject) \

932 ? ((
__r0
 = ((cÚ¡ *è(
»jeù
))[0], __r0 == '\0') \

933 ? 
	`¡¾’
 (
s
) \

934 : ((
__r1
 = ((cÚ¡ *è(
»jeù
))[1], __r1 == '\0') \

935 ? 
	`__¡rc¥n_c1
 (
s
, 
__r0
) \

936 : ((
__r2
 = ((cÚ¡ *è(
»jeù
))[2], __r2 == '\0') \

937 ? 
	`__¡rc¥n_c2
 (
s
, 
__r0
, 
__r1
) \

938 : (((cÚ¡ *è(
»jeù
))[3] == '\0' \

939 ? 
	`__¡rc¥n_c3
 (
s
, 
__r0
, 
__r1
, 
__r2
) \

940 : 
	`¡rc¥n
 (
s
, 
»jeù
))))) \

941 : 
	`¡rc¥n
 (
s
, 
»jeù
)); })

	)

945 
__STRING_INLINE
 
size_t
 
__¡rc¥n_c1
 (cÚ¡ *
__s
, 
__»jeù
);

946 
__STRING_INLINE
 
size_t


947 
	$__¡rc¥n_c1
 (cÚ¡ *
__s
, 
__»jeù
)

949 
size_t
 
__»suÉ
 = 0;

950 
__s
[
__»suÉ
] !ğ'\0' && __s[__»suÉ] !ğ
__»jeù
)

951 ++
__»suÉ
;

952  
__»suÉ
;

953 
	}
}

955 
__STRING_INLINE
 
size_t
 
__¡rc¥n_c2
 (cÚ¡ *
__s
, 
__»jeù1
,

956 
__»jeù2
);

957 
__STRING_INLINE
 
size_t


958 
	$__¡rc¥n_c2
 (cÚ¡ *
__s
, 
__»jeù1
, 
__»jeù2
)

960 
size_t
 
__»suÉ
 = 0;

961 
__s
[
__»suÉ
] !ğ'\0' && __s[__»suÉ] !ğ
__»jeù1


962 && 
__s
[
__»suÉ
] !ğ
__»jeù2
)

963 ++
__»suÉ
;

964  
__»suÉ
;

965 
	}
}

967 
__STRING_INLINE
 
size_t
 
__¡rc¥n_c3
 (cÚ¡ *
__s
, 
__»jeù1
,

968 
__»jeù2
, 
__»jeù3
);

969 
__STRING_INLINE
 
size_t


970 
	$__¡rc¥n_c3
 (cÚ¡ *
__s
, 
__»jeù1
, 
__»jeù2
,

971 
__»jeù3
)

973 
size_t
 
__»suÉ
 = 0;

974 
__s
[
__»suÉ
] !ğ'\0' && __s[__»suÉ] !ğ
__»jeù1


975 && 
__s
[
__»suÉ
] !ğ
__»jeù2
 && __s[__»suÉ] !ğ
__»jeù3
)

976 ++
__»suÉ
;

977  
__»suÉ
;

978 
	}
}

984 #ià!
defšed
 
_HAVE_STRING_ARCH_¡r¥n
 || defšed 
_FORCE_INLINES


985 #iâdeà
_HAVE_STRING_ARCH_¡r¥n


986 #ià
__GNUC_PREREQ
 (3, 2)

987 
	#¡r¥n
(
s
, 
acû±
) \

988 
__ex‹nsiÚ__
 \

989 ({ 
__a0
, 
__a1
, 
__a2
; \

990 (
	`__butš_cÚ¡ªt_p
 (
acû±
è&& 
	`__¡ršg2_1b±r_p
 (accept) \

991 ? ((
	`__butš_cÚ¡ªt_p
 (
s
è&& 
	`__¡ršg2_1b±r_p
 (s)) \

992 ? 
	`__butš_¡r¥n
 (
s
, 
acû±
) \

993 : ((
__a0
 = ((cÚ¡ *è(
acû±
))[0], __a0 == '\0') \

994 ? ((è(
s
), (
size_t
) 0) \

995 : ((
__a1
 = ((cÚ¡ *è(
acû±
))[1], __a1 == '\0') \

996 ? 
	`__¡r¥n_c1
 (
s
, 
__a0
) \

997 : ((
__a2
 = ((cÚ¡ *è(
acû±
))[2], __a2 == '\0') \

998 ? 
	`__¡r¥n_c2
 (
s
, 
__a0
, 
__a1
) \

999 : (((cÚ¡ *è(
acû±
))[3] == '\0' \

1000 ? 
	`__¡r¥n_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1001 : 
	`__butš_¡r¥n
 (
s
, 
acû±
)))))) \

1002 : 
	`__butš_¡r¥n
 (
s
, 
acû±
)); })

	)

1004 
	#¡r¥n
(
s
, 
acû±
) \

1005 
__ex‹nsiÚ__
 \

1006 ({ 
__a0
, 
__a1
, 
__a2
; \

1007 (
	`__butš_cÚ¡ªt_p
 (
acû±
è&& 
	`__¡ršg2_1b±r_p
 (accept) \

1008 ? ((
__a0
 = ((cÚ¡ *è(
acû±
))[0], __a0 == '\0') \

1009 ? ((è(
s
), (
size_t
) 0) \

1010 : ((
__a1
 = ((cÚ¡ *è(
acû±
))[1], __a1 == '\0') \

1011 ? 
	`__¡r¥n_c1
 (
s
, 
__a0
) \

1012 : ((
__a2
 = ((cÚ¡ *è(
acû±
))[2], __a2 == '\0') \

1013 ? 
	`__¡r¥n_c2
 (
s
, 
__a0
, 
__a1
) \

1014 : (((cÚ¡ *è(
acû±
))[3] == '\0' \

1015 ? 
	`__¡r¥n_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1016 : 
	`¡r¥n
 (
s
, 
acû±
))))) \

1017 : 
	`¡r¥n
 (
s
, 
acû±
)); })

	)

1021 
__STRING_INLINE
 
size_t
 
__¡r¥n_c1
 (cÚ¡ *
__s
, 
__acû±
);

1022 
__STRING_INLINE
 
size_t


1023 
	$__¡r¥n_c1
 (cÚ¡ *
__s
, 
__acû±
)

1025 
size_t
 
__»suÉ
 = 0;

1027 
__s
[
__»suÉ
] =ğ
__acû±
)

1028 ++
__»suÉ
;

1029  
__»suÉ
;

1030 
	}
}

1032 
__STRING_INLINE
 
size_t
 
__¡r¥n_c2
 (cÚ¡ *
__s
, 
__acû±1
,

1033 
__acû±2
);

1034 
__STRING_INLINE
 
size_t


1035 
	$__¡r¥n_c2
 (cÚ¡ *
__s
, 
__acû±1
, 
__acû±2
)

1037 
size_t
 
__»suÉ
 = 0;

1039 
__s
[
__»suÉ
] =ğ
__acû±1
 || __s[__»suÉ] =ğ
__acû±2
)

1040 ++
__»suÉ
;

1041  
__»suÉ
;

1042 
	}
}

1044 
__STRING_INLINE
 
size_t
 
__¡r¥n_c3
 (cÚ¡ *
__s
, 
__acû±1
,

1045 
__acû±2
, 
__acû±3
);

1046 
__STRING_INLINE
 
size_t


1047 
	$__¡r¥n_c3
 (cÚ¡ *
__s
, 
__acû±1
, 
__acû±2
, 
__acû±3
)

1049 
size_t
 
__»suÉ
 = 0;

1051 
__s
[
__»suÉ
] =ğ
__acû±1
 || __s[__»suÉ] =ğ
__acû±2


1052 || 
__s
[
__»suÉ
] =ğ
__acû±3
)

1053 ++
__»suÉ
;

1054  
__»suÉ
;

1055 
	}
}

1060 #ià!
defšed
 
_HAVE_STRING_ARCH_¡½brk
 || defšed 
_FORCE_INLINES


1061 #iâdeà
_HAVE_STRING_ARCH_¡½brk


1062 #ià
__GNUC_PREREQ
 (3, 2)

1063 
	#¡½brk
(
s
, 
acû±
) \

1064 
__ex‹nsiÚ__
 \

1065 ({ 
__a0
, 
__a1
, 
__a2
; \

1066 (
	`__butš_cÚ¡ªt_p
 (
acû±
è&& 
	`__¡ršg2_1b±r_p
 (accept) \

1067 ? ((
	`__butš_cÚ¡ªt_p
 (
s
è&& 
	`__¡ršg2_1b±r_p
 (s)) \

1068 ? 
	`__butš_¡½brk
 (
s
, 
acû±
) \

1069 : ((
__a0
 = ((cÚ¡ *è(
acû±
))[0], __a0 == '\0') \

1070 ? ((è(
s
), (*è
NULL
) \

1071 : ((
__a1
 = ((cÚ¡ *è(
acû±
))[1], __a1 == '\0') \

1072 ? 
	`__butš_¡rchr
 (
s
, 
__a0
) \

1073 : ((
__a2
 = ((cÚ¡ *è(
acû±
))[2], __a2 == '\0') \

1074 ? 
	`__¡½brk_c2
 (
s
, 
__a0
, 
__a1
) \

1075 : (((cÚ¡ *è(
acû±
))[3] == '\0' \

1076 ? 
	`__¡½brk_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1077 : 
	`__butš_¡½brk
 (
s
, 
acû±
)))))) \

1078 : 
	`__butš_¡½brk
 (
s
, 
acû±
)); })

	)

1080 
	#¡½brk
(
s
, 
acû±
) \

1081 
__ex‹nsiÚ__
 \

1082 ({ 
__a0
, 
__a1
, 
__a2
; \

1083 (
	`__butš_cÚ¡ªt_p
 (
acû±
è&& 
	`__¡ršg2_1b±r_p
 (accept) \

1084 ? ((
__a0
 = ((cÚ¡ *è(
acû±
))[0], __a0 == '\0') \

1085 ? ((è(
s
), (*è
NULL
) \

1086 : ((
__a1
 = ((cÚ¡ *è(
acû±
))[1], __a1 == '\0') \

1087 ? 
	`¡rchr
 (
s
, 
__a0
) \

1088 : ((
__a2
 = ((cÚ¡ *è(
acû±
))[2], __a2 == '\0') \

1089 ? 
	`__¡½brk_c2
 (
s
, 
__a0
, 
__a1
) \

1090 : (((cÚ¡ *è(
acû±
))[3] == '\0' \

1091 ? 
	`__¡½brk_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1092 : 
	`¡½brk
 (
s
, 
acû±
))))) \

1093 : 
	`¡½brk
 (
s
, 
acû±
)); })

	)

1097 
__STRING_INLINE
 *
__¡½brk_c2
 (cÚ¡ *
__s
, 
__acû±1
,

1098 
__acû±2
);

1099 
__STRING_INLINE
 *

1100 
	$__¡½brk_c2
 (cÚ¡ *
__s
, 
__acû±1
, 
__acû±2
)

1103 *
__s
 !ğ'\0' && *__ !ğ
__acû±1
 && *__ !ğ
__acû±2
)

1104 ++
__s
;

1105  *
__s
 =ğ'\0' ? 
NULL
 : (*è(
size_t
) __s;

1106 
	}
}

1108 
__STRING_INLINE
 *
__¡½brk_c3
 (cÚ¡ *
__s
, 
__acû±1
,

1109 
__acû±2
, 
__acû±3
);

1110 
__STRING_INLINE
 *

1111 
	$__¡½brk_c3
 (cÚ¡ *
__s
, 
__acû±1
, 
__acû±2
, 
__acû±3
)

1114 *
__s
 !ğ'\0' && *__ !ğ
__acû±1
 && *__ !ğ
__acû±2


1115 && *
__s
 !ğ
__acû±3
)

1116 ++
__s
;

1117  *
__s
 =ğ'\0' ? 
NULL
 : (*è(
size_t
) __s;

1118 
	}
}

1124 #ià!
defšed
 
_HAVE_STRING_ARCH_¡r¡r
 && !
__GNUC_PREREQ
 (2, 97)

1125 
	#¡r¡r
(
hay¡ack
, 
ÃedË
) \

1126 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
ÃedË
è&& 
	`__¡ršg2_1b±r_p
 (needle) \

1127 ? (((cÚ¡ *è(
ÃedË
))[0] == '\0' \

1128 ? (*è(
size_t
è(
hay¡ack
) \

1129 : (((cÚ¡ *è(
ÃedË
))[1] == '\0' \

1130 ? 
	`¡rchr
 (
hay¡ack
, \

1131 ((cÚ¡ *è(
ÃedË
))[0]) \

1132 : 
	`¡r¡r
 (
hay¡ack
, 
ÃedË
))) \

1133 : 
	`¡r¡r
 (
hay¡ack
, 
ÃedË
)))

	)

1137 #ià!
defšed
 
_HAVE_STRING_ARCH_¡¹ok_r
 || defšed 
_FORCE_INLINES


1138 #iâdeà
_HAVE_STRING_ARCH_¡¹ok_r


1139 
	#__¡¹ok_r
(
s
, 
£p
, 
Ãx
) \

1140 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
£p
è&& 
	`__¡ršg2_1b±r_p
 (sep) \

1141 && ((cÚ¡ *è(
£p
))[0] != '\0' \

1142 && ((cÚ¡ *è(
£p
))[1] == '\0' \

1143 ? 
	`__¡¹ok_r_1c
 (
s
, ((cÚ¡ *è(
£p
))[0], 
Ãx
) \

1144 : 
	`__¡¹ok_r
 (
s
, 
£p
, 
Ãx
)))

	)

1147 
__STRING_INLINE
 *
__¡¹ok_r_1c
 (*
__s
, 
__£p
, **
__Ãx
);

1148 
__STRING_INLINE
 *

1149 
	$__¡¹ok_r_1c
 (*
__s
, 
__£p
, **
__Ãx
)

1151 *
__»suÉ
;

1152 ià(
__s
 =ğ
NULL
)

1153 
__s
 = *
__Ãx
;

1154 *
__s
 =ğ
__£p
)

1155 ++
__s
;

1156 
__»suÉ
 = 
NULL
;

1157 ià(*
__s
 != '\0')

1159 
__»suÉ
 = 
__s
++;

1160 *
__s
 != '\0')

1161 ià(*
__s
++ =ğ
__£p
)

1163 
__s
[-1] = '\0';

1167 *
__Ãx
 = 
__s
;

1168  
__»suÉ
;

1169 
	}
}

1170 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


1171 
	#¡¹ok_r
(
s
, 
£p
, 
Ãx
è
	`__¡¹ok_r
 (s, s•,‚ex)

	)

1176 #ià!
defšed
 
_HAVE_STRING_ARCH_¡r£p
 || defšed 
_FORCE_INLINES


1177 #iâdeà
_HAVE_STRING_ARCH_¡r£p


1179 *
__¡r£p_g
 (**
__¡ršgp
, cÚ¡ *
__d–im
);

1180 
	#__¡r£p
(
s
, 
»jeù
) \

1181 
__ex‹nsiÚ__
 \

1182 ({ 
__r0
, 
__r1
, 
__r2
; \

1183 (
	`__butš_cÚ¡ªt_p
 (
»jeù
è&& 
	`__¡ršg2_1b±r_p
 (reject) \

1184 && (
__r0
 = ((cÚ¡ *è(
»jeù
))[0], \

1185 ((cÚ¡ *è(
»jeù
))[0] != '\0') \

1186 ? ((
__r1
 = ((cÚ¡ *è(
»jeù
))[1], \

1187 ((cÚ¡ *è(
»jeù
))[1] == '\0') \

1188 ? 
	`__¡r£p_1c
 (
s
, 
__r0
) \

1189 : ((
__r2
 = ((cÚ¡ *è(
»jeù
))[2], __r2 == '\0') \

1190 ? 
	`__¡r£p_2c
 (
s
, 
__r0
, 
__r1
) \

1191 : (((cÚ¡ *è(
»jeù
))[3] == '\0' \

1192 ? 
	`__¡r£p_3c
 (
s
, 
__r0
, 
__r1
, 
__r2
) \

1193 : 
	`__¡r£p_g
 (
s
, 
»jeù
)))) \

1194 : 
	`__¡r£p_g
 (
s
, 
»jeù
)); })

	)

1197 
__STRING_INLINE
 *
__¡r£p_1c
 (**
__s
, 
__»jeù
);

1198 
__STRING_INLINE
 *

1199 
	$__¡r£p_1c
 (**
__s
, 
__»jeù
)

1201 *
__»tv®
 = *
__s
;

1202 ià(
__»tv®
 !ğ
NULL
 && (*
__s
 = 
	`¡rchr
 (__»tv®, 
__»jeù
)) != NULL)

1203 *(*
__s
)++ = '\0';

1204  
__»tv®
;

1205 
	}
}

1207 
__STRING_INLINE
 *
__¡r£p_2c
 (**
__s
, 
__»jeù1
, 
__»jeù2
);

1208 
__STRING_INLINE
 *

1209 
	$__¡r£p_2c
 (**
__s
, 
__»jeù1
, 
__»jeù2
)

1211 *
__»tv®
 = *
__s
;

1212 ià(
__»tv®
 !ğ
NULL
)

1214 *
__ı
 = 
__»tv®
;

1217 ià(*
__ı
 == '\0')

1219 
__ı
 = 
NULL
;

1222 ià(*
__ı
 =ğ
__»jeù1
 || *__ı =ğ
__»jeù2
)

1224 *
__ı
++ = '\0';

1227 ++
__ı
;

1229 *
__s
 = 
__ı
;

1231  
__»tv®
;

1232 
	}
}

1234 
__STRING_INLINE
 *
__¡r£p_3c
 (**
__s
, 
__»jeù1
, 
__»jeù2
,

1235 
__»jeù3
);

1236 
__STRING_INLINE
 *

1237 
	$__¡r£p_3c
 (**
__s
, 
__»jeù1
, 
__»jeù2
, 
__»jeù3
)

1239 *
__»tv®
 = *
__s
;

1240 ià(
__»tv®
 !ğ
NULL
)

1242 *
__ı
 = 
__»tv®
;

1245 ià(*
__ı
 == '\0')

1247 
__ı
 = 
NULL
;

1250 ià(*
__ı
 =ğ
__»jeù1
 || *__ı =ğ
__»jeù2
 || *__ı =ğ
__»jeù3
)

1252 *
__ı
++ = '\0';

1255 ++
__ı
;

1257 *
__s
 = 
__ı
;

1259  
__»tv®
;

1260 
	}
}

1261 #ifdeà
__USE_BSD


1262 
	#¡r£p
(
s
, 
»jeù
è
	`__¡r£p
 (s,„ejeù)

	)

1269 #ifdeà
__USE_MISC


1271 #ià!
defšed
 
_HAVE_STRING_ARCH_¡rdup
 || !defšed 
_HAVE_STRING_ARCH_¡ºdup


1272 
	#__Ãed_m®loc_ªd_ÿÎoc


	)

1273 
	~<¡dlib.h
>

1276 #iâdeà
_HAVE_STRING_ARCH_¡rdup


1278 *
	$__¡rdup
 (cÚ¡ *
__¡ršg
è
__THROW
 
__©Œibu‹_m®loc__
;

1279 
	#__¡rdup
(
s
) \

1280 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
s
è&& 
	`__¡ršg2_1b±r_p
 (s) \

1281 ? (((cÚ¡ *è(
s
))[0] == '\0' \

1282 ? (*è
	`ÿÎoc
 ((
size_t
) 1, (size_t) 1) \

1283 : ({ 
size_t
 
__Ën
 = 
	`¡¾’
 (
s
) + 1; \

1284 *
__»tv®
 = (*è
	`m®loc
 (
__Ën
); \

1285 ià(
__»tv®
 !ğ
NULL
) \

1286 
__»tv®
 = (*è
	`memıy
 (__»tv®, 
s
, 
__Ën
); \

1287 
__»tv®
; 
	}
})) \

1288 : 
	`__¡rdup
 (
s
)))

	)

1290 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


1291 
	#¡rdup
(
s
è
	`__¡rdup
 (s)

	)

1295 #iâdeà
_HAVE_STRING_ARCH_¡ºdup


1297 *
	$__¡ºdup
 (cÚ¡ *
__¡ršg
, 
size_t
 
__n
)

1298 
__THROW
 
__©Œibu‹_m®loc__
;

1299 
	#__¡ºdup
(
s
, 
n
) \

1300 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
s
è&& 
	`__¡ršg2_1b±r_p
 (s) \

1301 ? (((cÚ¡ *è(
s
))[0] == '\0' \

1302 ? (*è
	`ÿÎoc
 ((
size_t
) 1, (size_t) 1) \

1303 : ({ 
size_t
 
__Ën
 = 
	`¡¾’
 (
s
) + 1; \

1304 
size_t
 
__n
 = (
n
); \

1305 *
__»tv®
; \

1306 ià(
__n
 < 
__Ën
) \

1307 
__Ën
 = 
__n
 + 1; \

1308 
__»tv®
 = (*è
	`m®loc
 (
__Ën
); \

1309 ià(
__»tv®
 !ğ
NULL
) \

1311 
__»tv®
[
__Ën
 - 1] = '\0'; \

1312 
__»tv®
 = (*è
	`memıy
 (__»tv®, 
s
, \

1313 
__Ën
 - 1); \

1315 
__»tv®
; 
	}
})) \

1316 : 
	`__¡ºdup
 (
s
, 
n
)))

	)

1318 #ifdeà
__USE_GNU


1319 
	#¡ºdup
(
s
, 
n
è
	`__¡ºdup
 (s,‚)

	)

1325 #iâdeà
_FORCE_INLINES


1326 #undeà
__STRING_INLINE


	@/usr/include/bits/string3.h

18 #iâdeà
_STRING_H


22 
__w¬ndeş
 (
__w¬n_mem£t_z”o_Ën
,

25 #iâdeà
__ılu¥lus


29 #undeà
memıy


30 #undeà
memmove


31 #undeà
mem£t


32 #undeà
¡rÿt


33 #undeà
¡rıy


34 #undeà
¡ºÿt


35 #undeà
¡ºıy


36 #ifdeà
__USE_GNU


37 #undeà
mempıy


38 #undeà
¡pıy


40 #ifdeà
__USE_BSD


41 #undeà
bcİy


42 #undeà
bz”o


47 
__fÜtify_funùiÚ
 *

48 
__NTH
 (
	$memıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

49 
size_t
 
__Ën
))

51  
	`__butš___memıy_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos0
 (__dest));

52 
	}
}

54 
__fÜtify_funùiÚ
 *

55 
__NTH
 (
	$memmove
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__Ën
))

57  
	`__butš___memmove_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos0
 (__dest));

58 
	}
}

60 #ifdeà
__USE_GNU


61 
__fÜtify_funùiÚ
 *

62 
__NTH
 (
	$mempıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

63 
size_t
 
__Ën
))

65  
	`__butš___mempıy_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos0
 (__dest));

66 
	}
}

75 
__fÜtify_funùiÚ
 *

76 
__NTH
 (
	$mem£t
 (*
__de¡
, 
__ch
, 
size_t
 
__Ën
))

78 ià(
	`__butš_cÚ¡ªt_p
 (
__Ën
) && __len == 0

79 && (!
	`__butš_cÚ¡ªt_p
 (
__ch
) || __ch != 0))

81 
	`__w¬n_mem£t_z”o_Ën
 ();

82  
__de¡
;

84  
	`__butš___mem£t_chk
 (
__de¡
, 
__ch
, 
__Ën
, 
	`__bos0
 (__dest));

85 
	}
}

87 #ifdeà
__USE_BSD


88 
__fÜtify_funùiÚ
 

89 
__NTH
 (
	$bcİy
 (cÚ¡ *
__¤c
, *
__de¡
, 
size_t
 
__Ën
))

91 (è
	`__butš___memmove_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos0
 (__dest));

92 
	}
}

94 
__fÜtify_funùiÚ
 

95 
__NTH
 (
	$bz”o
 (*
__de¡
, 
size_t
 
__Ën
))

97 (è
	`__butš___mem£t_chk
 (
__de¡
, '\0', 
__Ën
, 
	`__bos0
 (__dest));

98 
	}
}

101 
__fÜtify_funùiÚ
 *

102 
__NTH
 (
	$¡rıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
))

104  
	`__butš___¡rıy_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__dest));

105 
	}
}

107 #ifdeà
__USE_GNU


108 
__fÜtify_funùiÚ
 *

109 
__NTH
 (
	$¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
))

111  
	`__butš___¡pıy_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__dest));

112 
	}
}

116 
__fÜtify_funùiÚ
 *

117 
__NTH
 (
	$¡ºıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

118 
size_t
 
__Ën
))

120  
	`__butš___¡ºıy_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos
 (__dest));

121 
	}
}

124 *
	$__¡²ıy_chk
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
,

125 
size_t
 
__de¡Ën
è
__THROW
;

126 *
	`__REDIRECT_NTH
 (
__¡²ıy_®Ÿs
, (*
__de¡
, cÚ¡ *
__¤c
,

127 
size_t
 
__n
), 
¡²ıy
);

129 
__fÜtify_funùiÚ
 *

130 
	`__NTH
 (
	$¡²ıy
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
))

132 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1

133 && (!
	`__butš_cÚ¡ªt_p
 (
__n
è|| __À<ğ
	`__bos
 (
__de¡
)))

134  
	`__¡²ıy_chk
 (
__de¡
, 
__¤c
, 
__n
, 
	`__bos
 (__dest));

135  
	`__¡²ıy_®Ÿs
 (
__de¡
, 
__¤c
, 
__n
);

136 
	}
}

139 
__fÜtify_funùiÚ
 *

140 
__NTH
 (
	$¡rÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
))

142  
	`__butš___¡rÿt_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__dest));

143 
	}
}

146 
__fÜtify_funùiÚ
 *

147 
__NTH
 (
	$¡ºÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

148 
size_t
 
__Ën
))

150  
	`__butš___¡ºÿt_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos
 (__dest));

151 
	}
}

	@/usr/include/bits/sys_errlist.h

19 #iâdeà
_STDIO_H


25 #ifdeà 
__USE_BSD


26 
sys_Ã¼
;

27 cÚ¡ *cÚ¡ 
sys_”¾i¡
[];

29 #ifdeà 
__USE_GNU


30 
_sys_Ã¼
;

31 cÚ¡ *cÚ¡ 
_sys_”¾i¡
[];

	@/usr/include/bits/types.h

23 #iâdef 
_BITS_TYPES_H


24 
	#_BITS_TYPES_H
 1

	)

26 
	~<ã©u»s.h
>

27 
	~<b™s/wÜdsize.h
>

30 
	t__u_ch¬
;

31 
	t__u_shÜt
;

32 
	t__u_št
;

33 
	t__u_lÚg
;

36 sigÃd 
	t__št8_t
;

37 
	t__ušt8_t
;

38 sigÃd 
	t__št16_t
;

39 
	t__ušt16_t
;

40 sigÃd 
	t__št32_t
;

41 
	t__ušt32_t
;

42 #ià
__WORDSIZE
 == 64

43 sigÃd 
	t__št64_t
;

44 
	t__ušt64_t
;

46 
__ex‹nsiÚ__
 sigÃd 
	t__št64_t
;

47 
__ex‹nsiÚ__
 
	t__ušt64_t
;

51 #ià
__WORDSIZE
 == 64

52 
	t__quad_t
;

53 
	t__u_quad_t
;

55 
__ex‹nsiÚ__
 
	t__quad_t
;

56 
__ex‹nsiÚ__
 
	t__u_quad_t
;

89 
	#__S16_TYPE
 

	)

90 
	#__U16_TYPE
 

	)

91 
	#__S32_TYPE
 

	)

92 
	#__U32_TYPE
 

	)

93 
	#__SLONGWORD_TYPE
 

	)

94 
	#__ULONGWORD_TYPE
 

	)

95 #ià
__WORDSIZE
 == 32

96 
	#__SQUAD_TYPE
 
__quad_t


	)

97 
	#__UQUAD_TYPE
 
__u_quad_t


	)

98 
	#__SWORD_TYPE
 

	)

99 
	#__UWORD_TYPE
 

	)

100 
	#__SLONG32_TYPE
 

	)

101 
	#__ULONG32_TYPE
 

	)

102 
	#__S64_TYPE
 
__quad_t


	)

103 
	#__U64_TYPE
 
__u_quad_t


	)

106 
	#__STD_TYPE
 
__ex‹nsiÚ__
 

	)

107 #–ià
__WORDSIZE
 == 64

108 
	t__SQUAD_TYPE
 

	)

109 
	t__UQUAD_TYPE
 

	)

110 
	t__SWORD_TYPE
 

	)

111 
	t__UWORD_TYPE
 

	)

112 
	t__SLONG32_TYPE
 

	)

113 
	t__ULONG32_TYPE
 

	)

114 
	t__S64_TYPE
 

	)

115 
	t__U64_TYPE
 

	)

117 
	t__STD_TYPE
 

	)

121 
	~<b™s/ty³sizes.h
>

124 
__STD_TYPE
 
	t__DEV_T_TYPE
 
	t__dev_t
;

125 
__STD_TYPE
 
__UID_T_TYPE
 
	g__uid_t
;

126 
__STD_TYPE
 
__GID_T_TYPE
 
	g__gid_t
;

127 
__STD_TYPE
 
__INO_T_TYPE
 
	g__šo_t
;

128 
__STD_TYPE
 
__INO64_T_TYPE
 
	g__šo64_t
;

129 
__STD_TYPE
 
__MODE_T_TYPE
 
	g__mode_t
;

130 
__STD_TYPE
 
__NLINK_T_TYPE
 
	g__Æšk_t
;

131 
__STD_TYPE
 
__OFF_T_TYPE
 
	g__off_t
;

132 
__STD_TYPE
 
__OFF64_T_TYPE
 
	g__off64_t
;

133 
__STD_TYPE
 
__PID_T_TYPE
 
	g__pid_t
;

134 
__STD_TYPE
 
__FSID_T_TYPE
 
	g__fsid_t
;

135 
__STD_TYPE
 
__CLOCK_T_TYPE
 
	g__şock_t
;

136 
__STD_TYPE
 
__RLIM_T_TYPE
 
	g__¾im_t
;

137 
__STD_TYPE
 
__RLIM64_T_TYPE
 
	g__¾im64_t
;

138 
__STD_TYPE
 
__ID_T_TYPE
 
	g__id_t
;

139 
__STD_TYPE
 
__TIME_T_TYPE
 
	g__time_t
;

140 
__STD_TYPE
 
__USECONDS_T_TYPE
 
	g__u£cÚds_t
;

141 
__STD_TYPE
 
__SUSECONDS_T_TYPE
 
	g__su£cÚds_t
;

143 
__STD_TYPE
 
__DADDR_T_TYPE
 
	g__daddr_t
;

144 
__STD_TYPE
 
__KEY_T_TYPE
 
	g__key_t
;

147 
__STD_TYPE
 
__CLOCKID_T_TYPE
 
	g__şockid_t
;

150 
__STD_TYPE
 
__TIMER_T_TYPE
 
	g__tim”_t
;

153 
__STD_TYPE
 
__BLKSIZE_T_TYPE
 
	g__blksize_t
;

158 
__STD_TYPE
 
__BLKCNT_T_TYPE
 
	g__blkút_t
;

159 
__STD_TYPE
 
__BLKCNT64_T_TYPE
 
	g__blkút64_t
;

162 
__STD_TYPE
 
__FSBLKCNT_T_TYPE
 
	g__fsblkút_t
;

163 
__STD_TYPE
 
__FSBLKCNT64_T_TYPE
 
	g__fsblkút64_t
;

166 
__STD_TYPE
 
__FSFILCNT_T_TYPE
 
	g__fsfút_t
;

167 
__STD_TYPE
 
__FSFILCNT64_T_TYPE
 
	g__fsfút64_t
;

170 
__STD_TYPE
 
__FSWORD_T_TYPE
 
	g__fswÜd_t
;

172 
__STD_TYPE
 
__SSIZE_T_TYPE
 
	g__ssize_t
;

175 
__STD_TYPE
 
__SYSCALL_SLONG_TYPE
 
	g__sysÿÎ_¦Úg_t
;

177 
__STD_TYPE
 
__SYSCALL_ULONG_TYPE
 
	g__sysÿÎ_ulÚg_t
;

181 
__off64_t
 
	t__loff_t
;

182 
__quad_t
 *
	t__qaddr_t
;

183 *
	t__ÿddr_t
;

186 
__STD_TYPE
 
__SWORD_TYPE
 
	g__šŒ_t
;

189 
__STD_TYPE
 
__U32_TYPE
 
	g__sockËn_t
;

192 #undeà
__STD_TYPE


	@/usr/include/bits/waitflags.h

19 #ià!
defšed
 
_SYS_WAIT_H
 && !defšed 
_STDLIB_H


25 
	#WNOHANG
 1

	)

26 
	#WUNTRACED
 2

	)

29 
	#WSTOPPED
 2

	)

30 
	#WEXITED
 4

	)

31 
	#WCONTINUED
 8

	)

32 
	#WNOWAIT
 0x01000000

	)

34 
	#__WNOTHREAD
 0x20000000

	)

36 
	#__WALL
 0x40000000

	)

37 
	#__WCLONE
 0x80000000

	)

40 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


41 #iâdeà
__ENUM_IDTYPE_T


42 
	#__ENUM_IDTYPE_T
 1

	)

46 #undeà
P_ALL


47 #undeà
P_PID


48 #undeà
P_PGID


52 
	mP_ALL
,

53 
	mP_PID
,

54 
	mP_PGID


55 } 
	tidty³_t
;

	@/usr/include/bits/waitstatus.h

19 #ià!
defšed
 
_SYS_WAIT_H
 && !defšed 
_STDLIB_H


28 
	#__WEXITSTATUS
(
¡©us
è(((¡©usè& 0xff00è>> 8)

	)

31 
	#__WTERMSIG
(
¡©us
è((¡©usè& 0x7f)

	)

34 
	#__WSTOPSIG
(
¡©us
è
	`__WEXITSTATUS
(¡©us)

	)

37 
	#__WIFEXITED
(
¡©us
è(
	`__WTERMSIG
(¡©usè=ğ0)

	)

40 
	#__WIFSIGNALED
(
¡©us
) \

41 (((sigÃd è(((
¡©us
è& 0x7fè+ 1è>> 1è> 0)

	)

44 
	#__WIFSTOPPED
(
¡©us
è(((¡©usè& 0xffè=ğ0x7f)

	)

48 #ifdeà
WCONTINUED


49 
	#__WIFCONTINUED
(
¡©us
è((¡©usè=ğ
__W_CONTINUED
)

	)

53 
	#__WCOREDUMP
(
¡©us
è((¡©usè& 
__WCOREFLAG
)

	)

56 
	#__W_EXITCODE
(
»t
, 
sig
è(Ô‘è<< 8 | (sig))

	)

57 
	#__W_STOPCODE
(
sig
è((sigè<< 8 | 0x7f)

	)

58 
	#__W_CONTINUED
 0xffff

	)

59 
	#__WCOREFLAG
 0x80

	)

62 #ifdef 
__USE_BSD


64 
	~<’dŸn.h
>

66 
	uwa™


68 
	mw_¡©us
;

71 #if 
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


72 
	m__w_‹rmsig
:7;

73 
	m__w_cÜedump
:1;

74 
	m__w_»tcode
:8;

77 #if 
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


79 
	m__w_»tcode
:8;

80 
	m__w_cÜedump
:1;

81 
	m__w_‹rmsig
:7;

83 } 
	m__wa™_‹rmš©ed
;

86 #if 
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


87 
	m__w_¡İv®
:8;

88 
	m__w_¡İsig
:8;

91 #if 
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


93 
	m__w_¡İsig
:8;

94 
	m__w_¡İv®
:8;

96 } 
	m__wa™_¡İ³d
;

99 
	#w_‹rmsig
 
__wa™_‹rmš©ed
.
__w_‹rmsig


	)

100 
	#w_cÜedump
 
__wa™_‹rmš©ed
.
__w_cÜedump


	)

101 
	#w_»tcode
 
__wa™_‹rmš©ed
.
__w_»tcode


	)

102 
	#w_¡İsig
 
__wa™_¡İ³d
.
__w_¡İsig


	)

103 
	#w_¡İv®
 
__wa™_¡İ³d
.
__w_¡İv®


	)

	@/usr/include/endian.h

18 #iâdef 
_ENDIAN_H


19 
	#_ENDIAN_H
 1

	)

21 
	~<ã©u»s.h
>

31 
	#__LITTLE_ENDIAN
 1234

	)

32 
	#__BIG_ENDIAN
 4321

	)

33 
	#__PDP_ENDIAN
 3412

	)

36 
	~<b™s/’dŸn.h
>

40 #iâdeà
__FLOAT_WORD_ORDER


41 
	#__FLOAT_WORD_ORDER
 
__BYTE_ORDER


	)

44 #ifdef 
__USE_BSD


45 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

46 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

47 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

48 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

51 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


52 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èLO, 
	)
HI

53 #–ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


54 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èHI, 
	)
LO

58 #ià
defšed
 
__USE_BSD
 && !defšed 
__ASSEMBLER__


60 
	~<b™s/by‹sw­.h
>

62 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


63 
	#htobe16
(
x
è
	`__bsw­_16
 (x)

	)

64 
	#htŞe16
(
x
è(x)

	)

65 
	#be16toh
(
x
è
	`__bsw­_16
 (x)

	)

66 
	#Ë16toh
(
x
è(x)

	)

68 
	#htobe32
(
x
è
	`__bsw­_32
 (x)

	)

69 
	#htŞe32
(
x
è(x)

	)

70 
	#be32toh
(
x
è
	`__bsw­_32
 (x)

	)

71 
	#Ë32toh
(
x
è(x)

	)

73 
	#htobe64
(
x
è
	`__bsw­_64
 (x)

	)

74 
	#htŞe64
(
x
è(x)

	)

75 
	#be64toh
(
x
è
	`__bsw­_64
 (x)

	)

76 
	#Ë64toh
(
x
è(x)

	)

79 
	#htobe16
(
x
è(x)

	)

80 
	#htŞe16
(
x
è
	`__bsw­_16
 (x)

	)

81 
	#be16toh
(
x
è(x)

	)

82 
	#Ë16toh
(
x
è
	`__bsw­_16
 (x)

	)

84 
	#htobe32
(
x
è(x)

	)

85 
	#htŞe32
(
x
è
	`__bsw­_32
 (x)

	)

86 
	#be32toh
(
x
è(x)

	)

87 
	#Ë32toh
(
x
è
	`__bsw­_32
 (x)

	)

89 
	#htobe64
(
x
è(x)

	)

90 
	#htŞe64
(
x
è
	`__bsw­_64
 (x)

	)

91 
	#be64toh
(
x
è(x)

	)

92 
	#Ë64toh
(
x
è
	`__bsw­_64
 (x)

	)

	@/usr/include/features.h

18 #iâdef 
_FEATURES_H


19 
	#_FEATURES_H
 1

	)

101 #undeà
__USE_ISOC11


102 #undeà
__USE_ISOC99


103 #undeà
__USE_ISOC95


104 #undeà
__USE_ISOCXX11


105 #undeà
__USE_POSIX


106 #undeà
__USE_POSIX2


107 #undeà
__USE_POSIX199309


108 #undeà
__USE_POSIX199506


109 #undeà
__USE_XOPEN


110 #undeà
__USE_XOPEN_EXTENDED


111 #undeà
__USE_UNIX98


112 #undeà
__USE_XOPEN2K


113 #undeà
__USE_XOPEN2KXSI


114 #undeà
__USE_XOPEN2K8


115 #undeà
__USE_XOPEN2K8XSI


116 #undeà
__USE_LARGEFILE


117 #undeà
__USE_LARGEFILE64


118 #undeà
__USE_FILE_OFFSET64


119 #undeà
__USE_BSD


120 #undeà
__USE_SVID


121 #undeà
__USE_MISC


122 #undeà
__USE_ATFILE


123 #undeà
__USE_GNU


124 #undeà
__USE_REENTRANT


125 #undeà
__USE_FORTIFY_LEVEL


126 #undeà
__KERNEL_STRICT_NAMES


130 #iâdeà
_LOOSE_KERNEL_NAMES


131 
	#__KERNEL_STRICT_NAMES


	)

141 #ià
defšed
 
__GNUC__
 && defšed 
__GNUC_MINOR__


142 
	#__GNUC_PREREQ
(
maj
, 
mš
) \

143 ((
__GNUC__
 << 16è+ 
__GNUC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

145 
	#__GNUC_PREREQ
(
maj
, 
mš
è0

	)

150 #ifdeà
_GNU_SOURCE


151 #undeà
_ISOC95_SOURCE


152 
	#_ISOC95_SOURCE
 1

	)

153 #undeà
_ISOC99_SOURCE


154 
	#_ISOC99_SOURCE
 1

	)

155 #undeà
_ISOC11_SOURCE


156 
	#_ISOC11_SOURCE
 1

	)

157 #undeà
_POSIX_SOURCE


158 
	#_POSIX_SOURCE
 1

	)

159 #undeà
_POSIX_C_SOURCE


160 
	#_POSIX_C_SOURCE
 200809L

	)

161 #undeà
_XOPEN_SOURCE


162 
	#_XOPEN_SOURCE
 700

	)

163 #undeà
_XOPEN_SOURCE_EXTENDED


164 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

165 #undeà
_LARGEFILE64_SOURCE


166 
	#_LARGEFILE64_SOURCE
 1

	)

167 #undeà
_DEFAULT_SOURCE


168 
	#_DEFAULT_SOURCE
 1

	)

169 #undeà
_BSD_SOURCE


170 
	#_BSD_SOURCE
 1

	)

171 #undeà
_SVID_SOURCE


172 
	#_SVID_SOURCE
 1

	)

173 #undeà
_ATFILE_SOURCE


174 
	#_ATFILE_SOURCE
 1

	)

179 #ià(
defšed
 
_DEFAULT_SOURCE
 \

180 || (!
defšed
 
	g__STRICT_ANSI__
 \

181 && !
defšed
 
	g_ISOC99_SOURCE
 \

182 && !
defšed
 
	g_POSIX_SOURCE
 && !defšed 
	g_POSIX_C_SOURCE
 \

183 && !
defšed
 
	g_XOPEN_SOURCE
 \

184 && !
defšed
 
	g_BSD_SOURCE
 && !defšed 
	g_SVID_SOURCE
))

185 #undeà
_DEFAULT_SOURCE


186 
	#_DEFAULT_SOURCE
 1

	)

187 #undeà
_BSD_SOURCE


188 
	#_BSD_SOURCE
 1

	)

189 #undeà
_SVID_SOURCE


190 
	#_SVID_SOURCE
 1

	)

194 #ià(
defšed
 
_ISOC11_SOURCE
 \

195 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 201112L))

196 
	#__USE_ISOC11
 1

	)

200 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

201 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

202 
	#__USE_ISOC99
 1

	)

206 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

207 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

208 
	#__USE_ISOC95
 1

	)

215 #ià((
defšed
 
__ılu¥lus
 && __cplusplus >= 201103L) \

216 || 
defšed
 
__GXX_EXPERIMENTAL_CXX0X__
)

217 
	#__USE_ISOCXX11
 1

	)

223 #ifdeà
_DEFAULT_SOURCE


224 #ià!
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE


225 
	#__USE_POSIX_IMPLICITLY
 1

	)

227 #undeà
_POSIX_SOURCE


228 
	#_POSIX_SOURCE
 1

	)

229 #undeà
_POSIX_C_SOURCE


230 
	#_POSIX_C_SOURCE
 200809L

	)

232 #ià((!
defšed
 
__STRICT_ANSI__
 || (
_XOPEN_SOURCE
 - 0) >= 500) && \

233 !
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE
)

234 
	#_POSIX_SOURCE
 1

	)

235 #ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

236 
	#_POSIX_C_SOURCE
 2

	)

237 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

238 
	#_POSIX_C_SOURCE
 199506L

	)

239 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

240 
	#_POSIX_C_SOURCE
 200112L

	)

242 
	#_POSIX_C_SOURCE
 200809L

	)

244 
	#__USE_POSIX_IMPLICITLY
 1

	)

247 #ià
defšed
 
_POSIX_SOURCE
 || 
_POSIX_C_SOURCE
 >ğ1 || defšed 
_XOPEN_SOURCE


248 
	#__USE_POSIX
 1

	)

251 #ià
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >ğ2 || defšed 
_XOPEN_SOURCE


252 
	#__USE_POSIX2
 1

	)

255 #ià(
_POSIX_C_SOURCE
 - 0) >= 199309L

256 
	#__USE_POSIX199309
 1

	)

259 #ià(
_POSIX_C_SOURCE
 - 0) >= 199506L

260 
	#__USE_POSIX199506
 1

	)

263 #ià(
_POSIX_C_SOURCE
 - 0) >= 200112L

264 
	#__USE_XOPEN2K
 1

	)

265 #undeà
__USE_ISOC95


266 
	#__USE_ISOC95
 1

	)

267 #undeà
__USE_ISOC99


268 
	#__USE_ISOC99
 1

	)

271 #ià(
_POSIX_C_SOURCE
 - 0) >= 200809L

272 
	#__USE_XOPEN2K8
 1

	)

273 #undeà
_ATFILE_SOURCE


274 
	#_ATFILE_SOURCE
 1

	)

277 #ifdef 
_XOPEN_SOURCE


278 
	#__USE_XOPEN
 1

	)

279 #ià(
_XOPEN_SOURCE
 - 0) >= 500

280 
	#__USE_XOPEN_EXTENDED
 1

	)

281 
	#__USE_UNIX98
 1

	)

282 #undeà
_LARGEFILE_SOURCE


283 
	#_LARGEFILE_SOURCE
 1

	)

284 #ià(
_XOPEN_SOURCE
 - 0) >= 600

285 #ià(
_XOPEN_SOURCE
 - 0) >= 700

286 
	#__USE_XOPEN2K8
 1

	)

287 
	#__USE_XOPEN2K8XSI
 1

	)

289 
	#__USE_XOPEN2K
 1

	)

290 
	#__USE_XOPEN2KXSI
 1

	)

291 #undeà
__USE_ISOC95


292 
	#__USE_ISOC95
 1

	)

293 #undeà
__USE_ISOC99


294 
	#__USE_ISOC99
 1

	)

297 #ifdeà
_XOPEN_SOURCE_EXTENDED


298 
	#__USE_XOPEN_EXTENDED
 1

	)

303 #ifdeà
_LARGEFILE_SOURCE


304 
	#__USE_LARGEFILE
 1

	)

307 #ifdeà
_LARGEFILE64_SOURCE


308 
	#__USE_LARGEFILE64
 1

	)

311 #ià
defšed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

312 
	#__USE_FILE_OFFSET64
 1

	)

315 #ià
defšed
 
_BSD_SOURCE
 || defšed 
_SVID_SOURCE


316 
	#__USE_MISC
 1

	)

319 #ifdef 
_BSD_SOURCE


320 
	#__USE_BSD
 1

	)

323 #ifdef 
_SVID_SOURCE


324 
	#__USE_SVID
 1

	)

327 #ifdef 
_ATFILE_SOURCE


328 
	#__USE_ATFILE
 1

	)

331 #ifdef 
_GNU_SOURCE


332 
	#__USE_GNU
 1

	)

335 #ià
defšed
 
_REENTRANT
 || defšed 
_THREAD_SAFE


336 
	#__USE_REENTRANT
 1

	)

339 #ià
defšed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0 \

340 && 
__GNUC_PREREQ
 (4, 1è&& 
defšed
 
	g__OPTIMIZE__
 && __OPTIMIZE__ > 0

341 #ià
_FORTIFY_SOURCE
 > 1

342 
	#__USE_FORTIFY_LEVEL
 2

	)

344 
	#__USE_FORTIFY_LEVEL
 1

	)

347 
	#__USE_FORTIFY_LEVEL
 0

	)

352 
	~<¡dc-´edef.h
>

360 #undeà
__GNU_LIBRARY__


361 
	#__GNU_LIBRARY__
 6

	)

365 
	#__GLIBC__
 2

	)

366 
	#__GLIBC_MINOR__
 19

	)

368 
	#__GLIBC_PREREQ
(
maj
, 
mš
) \

369 ((
__GLIBC__
 << 16è+ 
__GLIBC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

372 #iâdeà
__ASSEMBLER__


373 #iâdeà
_SYS_CDEFS_H


374 
	~<sys/cdefs.h
>

379 #ià
defšed
 
__USE_FILE_OFFSET64
 && !defšed 
__REDIRECT


380 
	#__USE_LARGEFILE
 1

	)

381 
	#__USE_LARGEFILE64
 1

	)

387 #ià
__GNUC_PREREQ
 (2, 7è&& 
defšed
 
__OPTIMIZE__
 \

388 && !
defšed
 
	g__OPTIMIZE_SIZE__
 && !defšed 
	g__NO_INLINE__
 \

389 && 
defšed
 
	g__ex‹º_šlše


390 
	#__USE_EXTERN_INLINES
 1

	)

398 
	~<gnu/¡ubs.h
>

	@/usr/include/getopt.h

19 #iâdeà
_GETOPT_H


21 #iâdeà
__Ãed_g‘İt


22 
	#_GETOPT_H
 1

	)

32 #ià!
defšed
 
__GNU_LIBRARY__


33 
	~<ùy³.h
>

36 #iâdeà
__THROW


37 #iâdeà
__GNUC_PREREQ


38 
	#__GNUC_PREREQ
(
maj
, 
mš
è(0)

	)

40 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,8)

41 
	#__THROW
 
	`throw
 ()

	)

43 
	#__THROW


	)

47 #ifdef 
__ılu¥lus


57 *
İrg
;

71 
İtšd
;

76 
İ‹¼
;

80 
İtİt
;

82 #iâdeà
__Ãed_g‘İt


104 
	sİtiÚ


106 cÚ¡ *
	gÇme
;

109 
	ghas_¬g
;

110 *
	gæag
;

111 
	gv®
;

116 
	#no_¬gum’t
 0

	)

117 
	#»quœed_¬gum’t
 1

	)

118 
	#İtiÚ®_¬gum’t
 2

	)

146 #ifdeà
__GNU_LIBRARY__


150 
g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
, cÚ¡ *
__shÜtİts
)

151 
__THROW
;

153 #ià
defšed
 
__Ãed_g‘İt
 && defšed 
__USE_POSIX2
 \

154 && !
defšed
 
	g__USE_POSIX_IMPLICITLY
 && !defšed 
	g__USE_GNU


158 #ifdeà
__REDIRECT


159 
__REDIRECT_NTH
 (
g‘İt
, (
___¬gc
, *cÚ¡ *
___¬gv
,

160 cÚ¡ *
__shÜtİts
),

161 
__posix_g‘İt
);

163 
__posix_g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
,

164 cÚ¡ *
__shÜtİts
è
__THROW
;

165 
	#g‘İt
 
__posix_g‘İt


	)

169 
g‘İt
 ();

172 #iâdeà
__Ãed_g‘İt


173 
g‘İt_lÚg
 (
___¬gc
, *cÚ¡ *
___¬gv
,

174 cÚ¡ *
__shÜtİts
,

175 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

176 
__THROW
;

177 
g‘İt_lÚg_Úly
 (
___¬gc
, *cÚ¡ *
___¬gv
,

178 cÚ¡ *
__shÜtİts
,

179 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

180 
__THROW
;

184 #ifdef 
__ılu¥lus


189 #undeà
__Ãed_g‘İt


	@/usr/include/libio.h

28 #iâdeà
_IO_STDIO_H


29 
	#_IO_STDIO_H


	)

31 
	~<_G_cÚfig.h
>

33 
	#_IO_åos_t
 
_G_åos_t


	)

34 
	#_IO_åos64_t
 
_G_åos64_t


	)

35 
	#_IO_size_t
 
size_t


	)

36 
	#_IO_ssize_t
 
__ssize_t


	)

37 
	#_IO_off_t
 
__off_t


	)

38 
	#_IO_off64_t
 
__off64_t


	)

39 
	#_IO_pid_t
 
__pid_t


	)

40 
	#_IO_uid_t
 
__uid_t


	)

41 
	#_IO_icÚv_t
 
_G_icÚv_t


	)

42 
	#_IO_HAVE_ST_BLKSIZE
 
_G_HAVE_ST_BLKSIZE


	)

43 
	#_IO_BUFSIZ
 
_G_BUFSIZ


	)

44 
	#_IO_va_li¡
 
_G_va_li¡


	)

45 
	#_IO_wšt_t
 
wšt_t


	)

48 
	#__Ãed___va_li¡


	)

49 
	~<¡d¬g.h
>

50 #ifdeà
__GNUC_VA_LIST


51 #undeà
_IO_va_li¡


52 
	#_IO_va_li¡
 
__gnuc_va_li¡


	)

55 #iâdeà
__P


56 
	~<sys/cdefs.h
>

59 
	#_IO_UNIFIED_JUMPTABLES
 1

	)

61 #iâdeà
EOF


62 
	#EOF
 (-1)

	)

64 #iâdeà
NULL


65 #ià
defšed
 
__GNUG__
 && \

66 (
	g__GNUC__
 > 2 || (__GNUC__ =ğ2 && 
__GNUC_MINOR__
 >= 8))

67 
	#NULL
 (
__nuÎ
)

	)

69 #ià!
defšed
(
__ılu¥lus
)

70 
	#NULL
 ((*)0)

	)

72 
	#NULL
 (0)

	)

77 
	#_IOS_INPUT
 1

	)

78 
	#_IOS_OUTPUT
 2

	)

79 
	#_IOS_ATEND
 4

	)

80 
	#_IOS_APPEND
 8

	)

81 
	#_IOS_TRUNC
 16

	)

82 
	#_IOS_NOCREATE
 32

	)

83 
	#_IOS_NOREPLACE
 64

	)

84 
	#_IOS_BIN
 128

	)

92 
	#_IO_MAGIC
 0xFBAD0000

	)

93 
	#_OLD_STDIO_MAGIC
 0xFABC0000

	)

94 
	#_IO_MAGIC_MASK
 0xFFFF0000

	)

95 
	#_IO_USER_BUF
 1

	)

96 
	#_IO_UNBUFFERED
 2

	)

97 
	#_IO_NO_READS
 4

	)

98 
	#_IO_NO_WRITES
 8

	)

99 
	#_IO_EOF_SEEN
 0x10

	)

100 
	#_IO_ERR_SEEN
 0x20

	)

101 
	#_IO_DELETE_DONT_CLOSE
 0x40

	)

102 
	#_IO_LINKED
 0x80

	)

103 
	#_IO_IN_BACKUP
 0x100

	)

104 
	#_IO_LINE_BUF
 0x200

	)

105 
	#_IO_TIED_PUT_GET
 0x400

	)

106 
	#_IO_CURRENTLY_PUTTING
 0x800

	)

107 
	#_IO_IS_APPENDING
 0x1000

	)

108 
	#_IO_IS_FILEBUF
 0x2000

	)

109 
	#_IO_BAD_SEEN
 0x4000

	)

110 
	#_IO_USER_LOCK
 0x8000

	)

112 
	#_IO_FLAGS2_MMAP
 1

	)

113 
	#_IO_FLAGS2_NOTCANCEL
 2

	)

114 #ifdeà
_LIBC


115 
	#_IO_FLAGS2_FORTIFY
 4

	)

117 
	#_IO_FLAGS2_USER_WBUF
 8

	)

118 #ifdeà
_LIBC


119 
	#_IO_FLAGS2_SCANF_STD
 16

	)

120 
	#_IO_FLAGS2_NOCLOSE
 32

	)

121 
	#_IO_FLAGS2_CLOEXEC
 64

	)

125 
	#_IO_SKIPWS
 01

	)

126 
	#_IO_LEFT
 02

	)

127 
	#_IO_RIGHT
 04

	)

128 
	#_IO_INTERNAL
 010

	)

129 
	#_IO_DEC
 020

	)

130 
	#_IO_OCT
 040

	)

131 
	#_IO_HEX
 0100

	)

132 
	#_IO_SHOWBASE
 0200

	)

133 
	#_IO_SHOWPOINT
 0400

	)

134 
	#_IO_UPPERCASE
 01000

	)

135 
	#_IO_SHOWPOS
 02000

	)

136 
	#_IO_SCIENTIFIC
 04000

	)

137 
	#_IO_FIXED
 010000

	)

138 
	#_IO_UNITBUF
 020000

	)

139 
	#_IO_STDIO
 040000

	)

140 
	#_IO_DONT_CLOSE
 0100000

	)

141 
	#_IO_BOOLALPHA
 0200000

	)

144 
_IO_jump_t
; 
	g_IO_FILE
;

147 #ifdeà
_IO_MTSAFE_IO


148 #ià
defšed
 
__GLIBC__
 && __GLIBC__ >= 2

149 
	~<b™s/¡dio-lock.h
>

154 
	t_IO_lock_t
;

160 
	s_IO_m¬k”
 {

161 
_IO_m¬k”
 *
	m_Ãxt
;

162 
_IO_FILE
 *
	m_sbuf
;

166 
	m_pos
;

168 
£t_¡»ampos
(
¡»ampos
 
¥
è{ 
	m_¥os
 = sp; }

169 
£t_off£t
(
off£t
è{ 
	m_pos
 = off£t; 
	m_¥os
 = (
¡»ampos
)(-2); }

170 
	mpublic
:

171 
¡»amm¬k”
(
¡»ambuf
 *
sb
);

172 ~
¡»amm¬k”
();

173 
§všg
(è{  
	m_¥os
 == -2; }

174 
d–
(
¡»amm¬k”
&);

175 
d–
();

180 
	e__codecvt_»suÉ


182 
	m__codecvt_ok
,

183 
	m__codecvt_·¹Ÿl
,

184 
	m__codecvt_”rÜ
,

185 
	m__codecvt_nocÚv


188 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


191 
	s_IO_codecvt


193 (*
	m__codecvt_de¡r
è(
	m_IO_codecvt
 *);

194 
__codecvt_»suÉ
 (*
__codecvt_do_out
è(
	m_IO_codecvt
 *,

195 
	m__mb¡©e_t
 *,

196 cÚ¡ 
	mwch¬_t
 *,

197 cÚ¡ 
	mwch¬_t
 *,

198 cÚ¡ 
	mwch¬_t
 **, *,

200 
__codecvt_»suÉ
 (*
__codecvt_do_unshiá
è(
	m_IO_codecvt
 *,

201 
	m__mb¡©e_t
 *, *,

203 
__codecvt_»suÉ
 (*
__codecvt_do_š
è(
	m_IO_codecvt
 *,

204 
	m__mb¡©e_t
 *,

206 cÚ¡ **, 
	mwch¬_t
 *,

207 
	mwch¬_t
 *, wchar_t **);

208 (*
	m__codecvt_do_’codšg
è(
	m_IO_codecvt
 *);

209 (*
	m__codecvt_do_®ways_nocÚv
è(
	m_IO_codecvt
 *);

210 (*
	m__codecvt_do_Ëngth
è(
	m_IO_codecvt
 *, 
	m__mb¡©e_t
 *,

211 cÚ¡ *, cÚ¡ *, 
	m_IO_size_t
);

212 (*
	m__codecvt_do_max_Ëngth
è(
	m_IO_codecvt
 *);

214 
_IO_icÚv_t
 
	m__cd_š
;

215 
_IO_icÚv_t
 
	m__cd_out
;

219 
	s_IO_wide_d©a


221 
wch¬_t
 *
	m_IO_»ad_±r
;

222 
wch¬_t
 *
	m_IO_»ad_’d
;

223 
wch¬_t
 *
	m_IO_»ad_ba£
;

224 
wch¬_t
 *
	m_IO_wr™e_ba£
;

225 
wch¬_t
 *
	m_IO_wr™e_±r
;

226 
wch¬_t
 *
	m_IO_wr™e_’d
;

227 
wch¬_t
 *
	m_IO_buf_ba£
;

228 
wch¬_t
 *
	m_IO_buf_’d
;

230 
wch¬_t
 *
	m_IO_§ve_ba£
;

231 
wch¬_t
 *
	m_IO_backup_ba£
;

233 
wch¬_t
 *
	m_IO_§ve_’d
;

235 
__mb¡©e_t
 
	m_IO_¡©e
;

236 
__mb¡©e_t
 
	m_IO_Ï¡_¡©e
;

237 
_IO_codecvt
 
	m_codecvt
;

239 
wch¬_t
 
	m_shÜtbuf
[1];

241 cÚ¡ 
_IO_jump_t
 *
	m_wide_vbË
;

245 
	s_IO_FILE
 {

246 
	m_æags
;

247 
	#_IO_fe_æags
 
_æags


	)

251 * 
	m_IO_»ad_±r
;

252 * 
	m_IO_»ad_’d
;

253 * 
	m_IO_»ad_ba£
;

254 * 
	m_IO_wr™e_ba£
;

255 * 
	m_IO_wr™e_±r
;

256 * 
	m_IO_wr™e_’d
;

257 * 
	m_IO_buf_ba£
;

258 * 
	m_IO_buf_’d
;

260 *
	m_IO_§ve_ba£
;

261 *
	m_IO_backup_ba£
;

262 *
	m_IO_§ve_’d
;

264 
_IO_m¬k”
 *
	m_m¬k”s
;

266 
_IO_FILE
 *
	m_chaš
;

268 
	m_f’o
;

270 
	m_blksize
;

272 
	m_æags2
;

274 
_IO_off_t
 
	m_Şd_off£t
;

276 
	#__HAVE_COLUMN


	)

278 
	m_cur_cŞumn
;

279 sigÃd 
	m_vbË_off£t
;

280 
	m_shÜtbuf
[1];

284 
_IO_lock_t
 *
	m_lock
;

285 #ifdeà
_IO_USE_OLD_IO_FILE


288 
	s_IO_FILE_com¶‘e


290 
_IO_FILE
 
	m_fe
;

292 #ià
defšed
 
_G_IO_IO_FILE_VERSION
 && _G_IO_IO_FILE_VERSION == 0x20001

293 
_IO_off64_t
 
	m_off£t
;

294 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


296 
_IO_codecvt
 *
	m_codecvt
;

297 
_IO_wide_d©a
 *
	m_wide_d©a
;

298 
_IO_FILE
 *
	m_ä“»s_li¡
;

299 *
	m_ä“»s_buf
;

300 
size_t
 
	m_ä“»s_size
;

302 *
	m__·d1
;

303 *
	m__·d2
;

304 *
	m__·d3
;

305 *
	m__·d4
;

306 
size_t
 
	m__·d5
;

308 
	m_mode
;

310 
	m_unu£d2
[15 *  (è- 4 *  (*è-  (
size_t
)];

314 #iâdeà
__ılu¥lus


315 
_IO_FILE
 
	t_IO_FILE
;

318 
	g_IO_FILE_¶us
;

320 
_IO_FILE_¶us
 
_IO_2_1_¡dš_
;

321 
_IO_FILE_¶us
 
_IO_2_1_¡dout_
;

322 
_IO_FILE_¶us
 
_IO_2_1_¡d”r_
;

323 #iâdeà
_LIBC


324 
	#_IO_¡dš
 ((
_IO_FILE
*)(&
_IO_2_1_¡dš_
))

	)

325 
	#_IO_¡dout
 ((
_IO_FILE
*)(&
_IO_2_1_¡dout_
))

	)

326 
	#_IO_¡d”r
 ((
_IO_FILE
*)(&
_IO_2_1_¡d”r_
))

	)

328 
_IO_FILE
 *
_IO_¡dš
 
©Œibu‹_hidd’
;

329 
_IO_FILE
 *
_IO_¡dout
 
©Œibu‹_hidd’
;

330 
_IO_FILE
 *
_IO_¡d”r
 
©Œibu‹_hidd’
;

338 
__ssize_t
 
	t__io_»ad_â
 (*
	t__cook›
, *
	t__buf
, 
	tsize_t
 
	t__nby‹s
);

346 
__ssize_t
 
	t__io_wr™e_â
 (*
	t__cook›
, cÚ¡ *
	t__buf
,

347 
	tsize_t
 
	t__n
);

355 
	t__io_£ek_â
 (*
	t__cook›
, 
	t_IO_off64_t
 *
	t__pos
, 
	t__w
);

358 
	t__io_şo£_â
 (*
	t__cook›
);

361 #ifdeà
_GNU_SOURCE


363 
__io_»ad_â
 
	tcook›_»ad_funùiÚ_t
;

364 
__io_wr™e_â
 
	tcook›_wr™e_funùiÚ_t
;

365 
__io_£ek_â
 
	tcook›_£ek_funùiÚ_t
;

366 
__io_şo£_â
 
	tcook›_şo£_funùiÚ_t
;

371 
__io_»ad_â
 *
	m»ad
;

372 
__io_wr™e_â
 *
	mwr™e
;

373 
__io_£ek_â
 *
	m£ek
;

374 
__io_şo£_â
 *
	mşo£
;

375 } 
	t_IO_cook›_io_funùiÚs_t
;

376 
_IO_cook›_io_funùiÚs_t
 
	tcook›_io_funùiÚs_t
;

378 
	g_IO_cook›_fe
;

381 
_IO_cook›_š™
 (
_IO_cook›_fe
 *
__cfe
, 
__»ad_wr™e
,

382 *
__cook›
, 
_IO_cook›_io_funùiÚs_t
 
__âs
);

386 #ifdeà
__ılu¥lus


390 
__und”æow
 (
_IO_FILE
 *);

391 
__uæow
 (
_IO_FILE
 *);

392 
__ov”æow
 (
_IO_FILE
 *, );

393 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


394 
_IO_wšt_t
 
__wund”æow
 (
_IO_FILE
 *);

395 
_IO_wšt_t
 
__wuæow
 (
_IO_FILE
 *);

396 
_IO_wšt_t
 
__wov”æow
 (
_IO_FILE
 *, _IO_wint_t);

399 #ià 
__GNUC__
 >= 3

400 
	#_IO_BE
(
ex´
, 
»s
è
	`__butš_ex³ù
 (Óx´),„es)

	)

402 
	#_IO_BE
(
ex´
, 
»s
èÓx´)

	)

405 
	#_IO_g‘c_uÆocked
(
_å
) \

406 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ğ(_å)->
_IO_»ad_’d
, 0) \

407 ? 
	`__uæow
 (
_å
è: *(*è(_å)->
_IO_»ad_±r
++)

	)

408 
	#_IO_³ekc_uÆocked
(
_å
) \

409 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ğ(_å)->
_IO_»ad_’d
, 0) \

410 && 
	`__und”æow
 (
_å
è=ğ
EOF
 ? EOF \

411 : *(*è(
_å
)->
_IO_»ad_±r
)

	)

412 
	#_IO_putc_uÆocked
(
_ch
, 
_å
) \

413 (
	`_IO_BE
 ((
_å
)->
_IO_wr™e_±r
 >ğ(_å)->
_IO_wr™e_’d
, 0) \

414 ? 
	`__ov”æow
 (
_å
, (è(
_ch
)) \

415 : (è(*(
_å
)->
_IO_wr™e_±r
++ = (
_ch
)))

	)

417 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


418 
	#_IO_g‘wc_uÆocked
(
_å
) \

419 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ğ
NULL
 \

420 || ((
_å
)->
_wide_d©a
->
_IO_»ad_±r
 \

421 >ğ(
_å
)->
_wide_d©a
->
_IO_»ad_’d
), 0) \

422 ? 
	`__wuæow
 (
_å
è: (
_IO_wšt_t
è*(_å)->
_wide_d©a
->
_IO_»ad_±r
++)

	)

423 
	#_IO_putwc_uÆocked
(
_wch
, 
_å
) \

424 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ğ
NULL
 \

425 || ((
_å
)->
_wide_d©a
->
_IO_wr™e_±r
 \

426 >ğ(
_å
)->
_wide_d©a
->
_IO_wr™e_’d
), 0) \

427 ? 
	`__wov”æow
 (
_å
, 
_wch
) \

428 : (
_IO_wšt_t
è(*(
_å
)->
_wide_d©a
->
_IO_wr™e_±r
++ = (
_wch
)))

	)

431 
	#_IO_ãof_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_EOF_SEEN
è!ğ0)

	)

432 
	#_IO_ã¼Ü_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_ERR_SEEN
è!ğ0)

	)

434 
_IO_g‘c
 (
_IO_FILE
 *
__å
);

435 
_IO_putc
 (
__c
, 
_IO_FILE
 *
__å
);

436 
_IO_ãof
 (
_IO_FILE
 *
__å
è
__THROW
;

437 
_IO_ã¼Ü
 (
_IO_FILE
 *
__å
è
__THROW
;

439 
_IO_³ekc_locked
 (
_IO_FILE
 *
__å
);

442 
	#_IO_PENDING_OUTPUT_COUNT
(
_å
) \

443 ((
_å
)->
_IO_wr™e_±r
 - (_å)->
_IO_wr™e_ba£
)

	)

445 
_IO_æockfe
 (
_IO_FILE
 *è
__THROW
;

446 
_IO_fuÆockfe
 (
_IO_FILE
 *è
__THROW
;

447 
_IO_árylockfe
 (
_IO_FILE
 *è
__THROW
;

449 #ifdeà
_IO_MTSAFE_IO


450 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_locked
 (_å)

	)

451 
	#_IO_æockfe
(
_å
) \

452 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0è
	`_IO_æockfe
 (_å)

	)

453 
	#_IO_fuÆockfe
(
_å
) \

454 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0è
	`_IO_fuÆockfe
 (_å)

	)

456 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_uÆocked
 (_å)

	)

457 
	#_IO_æockfe
(
_å
è

	)

458 
	#_IO_fuÆockfe
(
_å
è

	)

459 
	#_IO_árylockfe
(
_å
è

	)

460 
	#_IO_ş—nup_»giÚ_¡¬t
(
_fù
, 
_å
è

	)

461 
	#_IO_ş—nup_»giÚ_’d
(
_Do™
è

	)

464 
_IO_vfsÿnf
 (
_IO_FILE
 * 
__»¡riù
, const * __restrict,

465 
_IO_va_li¡
, *
__»¡riù
);

466 
_IO_vårštf
 (
_IO_FILE
 *
__»¡riù
, const *__restrict,

467 
_IO_va_li¡
);

468 
_IO_ssize_t
 
_IO_·dn
 (
_IO_FILE
 *, , _IO_ssize_t);

469 
_IO_size_t
 
_IO_sg‘n
 (
_IO_FILE
 *, *, _IO_size_t);

471 
_IO_off64_t
 
_IO_£ekoff
 (
_IO_FILE
 *, _IO_off64_t, , );

472 
_IO_off64_t
 
_IO_£ekpos
 (
_IO_FILE
 *, _IO_off64_t, );

474 
_IO_ä“_backup_¬—
 (
_IO_FILE
 *è
__THROW
;

476 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


477 
_IO_wšt_t
 
_IO_g‘wc
 (
_IO_FILE
 *
__å
);

478 
_IO_wšt_t
 
_IO_putwc
 (
wch¬_t
 
__wc
, 
_IO_FILE
 *
__å
);

479 
_IO_fwide
 (
_IO_FILE
 *
__å
, 
__mode
è
__THROW
;

480 #ià
__GNUC__
 >= 2

483 #ià
defšed
 
_LIBC
 && defšed 
SHARED


484 
	~<shlib-com·t.h
>

485 #ià
SHLIB_COMPAT
 (
libc
, 
GLIBC_2_0
, 
GLIBC_2_1
)

486 
	#_IO_fwide_maybe_šcom·tibË
 \

487 (
	`__butš_ex³ù
 (&
_IO_¡dš_u£d
 =ğ
NULL
, 0))

	)

488 cÚ¡ 
_IO_¡dš_u£d
;

489 
w—k_ex‹º
 (
_IO_¡dš_u£d
);

492 #iâdeà
_IO_fwide_maybe_šcom·tibË


493 
	#_IO_fwide_maybe_šcom·tibË
 (0)

	)

497 
	#_IO_fwide
(
__å
, 
__mode
) \

498 ({ 
__»suÉ
 = (
__mode
); \

499 ià(
__»suÉ
 < 0 && ! 
_IO_fwide_maybe_šcom·tibË
) \

501 ià((
__å
)->
_mode
 == 0) \

503 (
__å
)->
_mode
 = -1; \

504 
__»suÉ
 = (
__å
)->
_mode
; \

506 ià(
	`__butš_cÚ¡ªt_p
 (
__mode
) && (__mode) == 0) \

507 
__»suÉ
 = 
_IO_fwide_maybe_šcom·tibË
 ? -1 : (
__å
)->
_mode
; \

509 
__»suÉ
 = 
	`_IO_fwide
 (
__å
, __result); \

510 
__»suÉ
; })

	)

513 
_IO_vfwsÿnf
 (
_IO_FILE
 * 
__»¡riù
, cÚ¡ 
wch¬_t
 * __restrict,

514 
_IO_va_li¡
, *
__»¡riù
);

515 
_IO_vfw´štf
 (
_IO_FILE
 *
__»¡riù
, cÚ¡ 
wch¬_t
 *__restrict,

516 
_IO_va_li¡
);

517 
_IO_ssize_t
 
_IO_w·dn
 (
_IO_FILE
 *, 
wšt_t
, _IO_ssize_t);

518 
_IO_ä“_wbackup_¬—
 (
_IO_FILE
 *è
__THROW
;

521 #ifdeà
__LDBL_COMPAT


522 
	~<b™s/libio-ldbl.h
>

525 #ifdeà
__ılu¥lus


	@/usr/include/sys/select.h

21 #iâdeà
_SYS_SELECT_H


22 
	#_SYS_SELECT_H
 1

	)

24 
	~<ã©u»s.h
>

27 
	~<b™s/ty³s.h
>

30 
	~<b™s/£Ëù.h
>

33 
	~<b™s/sig£t.h
>

35 #iâdeà
__sig£t_t_defšed


36 
	#__sig£t_t_defšed


	)

37 
__sig£t_t
 
	tsig£t_t
;

41 
	#__Ãed_time_t


	)

42 
	#__Ãed_time¥ec


	)

43 
	~<time.h
>

44 
	#__Ãed_timev®


	)

45 
	~<b™s/time.h
>

47 #iâdeà
__su£cÚds_t_defšed


48 
__su£cÚds_t
 
	tsu£cÚds_t
;

49 
	#__su£cÚds_t_defšed


	)

54 
	t__fd_mask
;

57 #undeà
__NFDBITS


59 
	#__NFDBITS
 (8 * (è (
__fd_mask
))

	)

60 
	#__FD_ELT
(
d
è((dè/ 
__NFDBITS
)

	)

61 
	#__FD_MASK
(
d
è((
__fd_mask
è1 << ((dè% 
__NFDBITS
))

	)

68 #ifdeà
__USE_XOPEN


69 
__fd_mask
 
	mfds_b™s
[
__FD_SETSIZE
 / 
__NFDBITS
];

70 
	#__FDS_BITS
(
£t
è((£t)->
fds_b™s
)

	)

72 
__fd_mask
 
	m__fds_b™s
[
__FD_SETSIZE
 / 
__NFDBITS
];

73 
	#__FDS_BITS
(
£t
è((£t)->
__fds_b™s
)

	)

75 } 
	tfd_£t
;

78 
	#FD_SETSIZE
 
__FD_SETSIZE


	)

80 #ifdeà
__USE_MISC


82 
__fd_mask
 
	tfd_mask
;

85 
	#NFDBITS
 
__NFDBITS


	)

90 
	#FD_SET
(
fd
, 
fd£
è
	`__FD_SET
 (fd, fd£)

	)

91 
	#FD_CLR
(
fd
, 
fd£
è
	`__FD_CLR
 (fd, fd£)

	)

92 
	#FD_ISSET
(
fd
, 
fd£
è
	`__FD_ISSET
 (fd, fd£)

	)

93 
	#FD_ZERO
(
fd£
è
	`__FD_ZERO
 (fd£)

	)

96 
__BEGIN_DECLS


106 
£Ëù
 (
__nfds
, 
fd_£t
 *
__»¡riù
 
__»adfds
,

107 
fd_£t
 *
__»¡riù
 
__wr™efds
,

108 
fd_£t
 *
__»¡riù
 
__exû±fds
,

109 
timev®
 *
__»¡riù
 
__timeout
);

111 #ifdeà
__USE_XOPEN2K


118 
p£Ëù
 (
__nfds
, 
fd_£t
 *
__»¡riù
 
__»adfds
,

119 
fd_£t
 *
__»¡riù
 
__wr™efds
,

120 
fd_£t
 *
__»¡riù
 
__exû±fds
,

121 cÚ¡ 
time¥ec
 *
__»¡riù
 
__timeout
,

122 cÚ¡ 
__sig£t_t
 *
__»¡riù
 
__sigmask
);

127 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__GNUC__


128 
	~<b™s/£Ëù2.h
>

131 
	g__END_DECLS


	@/usr/include/sys/sysmacros.h

19 #iâdeà
_SYS_SYSMACROS_H


20 
	#_SYS_SYSMACROS_H
 1

	)

22 
	~<ã©u»s.h
>

24 
__BEGIN_DECLS


26 
__ex‹nsiÚ__


27 
	$gnu_dev_majÜ
 (
__dev
)

28 
__THROW
 
__©Œibu‹_cÚ¡__
;

29 
__ex‹nsiÚ__


30 
	$gnu_dev_mšÜ
 (
__dev
)

31 
__THROW
 
__©Œibu‹_cÚ¡__
;

32 
__ex‹nsiÚ__


33 
	$gnu_dev_makedev
 (
__majÜ
,

34 
__mšÜ
)

35 
__THROW
 
__©Œibu‹_cÚ¡__
;

37 #ifdeà
__USE_EXTERN_INLINES


38 
__ex‹nsiÚ__
 
__ex‹º_šlše
 
__©Œibu‹_cÚ¡__
 

39 
	`__NTH
 (
	$gnu_dev_majÜ
 (
__dev
))

41  ((
__dev
 >> 8) & 0xfff) | (() (__dev >> 32) & ~0xfff);

42 
	}
}

44 
__ex‹nsiÚ__
 
__ex‹º_šlše
 
__©Œibu‹_cÚ¡__
 

45 
__NTH
 (
	$gnu_dev_mšÜ
 (
__dev
))

47  (
__dev
 & 0xff) | (() (__dev >> 12) & ~0xff);

48 
	}
}

50 
__ex‹nsiÚ__
 
__ex‹º_šlše
 
__©Œibu‹_cÚ¡__
 

51 
__NTH
 (
	$gnu_dev_makedev
 (
__majÜ
, 
__mšÜ
))

53  ((
__mšÜ
 & 0xffè| ((
__majÜ
 & 0xfff) << 8)

54 | (((è(
__mšÜ
 & ~0xff)) << 12)

55 | (((è(
__majÜ
 & ~0xfff)) << 32));

56 
	}
}

58 
	g__END_DECLS


61 
	#majÜ
(
dev
è
	`gnu_dev_majÜ
 (dev)

	)

62 
	#mšÜ
(
dev
è
	`gnu_dev_mšÜ
 (dev)

	)

63 
	#makedev
(
maj
, 
mš
è
	`gnu_dev_makedev
 (maj, mš)

	)

	@/usr/include/sys/ucontext.h

18 #iâdeà
_SYS_UCONTEXT_H


19 
	#_SYS_UCONTEXT_H
 1

	)

21 
	~<ã©u»s.h
>

22 
	~<sigÇl.h
>

26 
	~<b™s/sigcÚ‹xt.h
>

28 #ifdeà
__x86_64__


31 
__ex‹nsiÚ__
 
	tg»g_t
;

34 
	#NGREG
 23

	)

37 
g»g_t
 
	tg»g£t_t
[
NGREG
];

39 #ifdeà
__USE_GNU


43 
	mREG_R8
 = 0,

44 
	#REG_R8
 
REG_R8


	)

45 
	mREG_R9
,

46 
	#REG_R9
 
REG_R9


	)

47 
	mREG_R10
,

48 
	#REG_R10
 
REG_R10


	)

49 
	mREG_R11
,

50 
	#REG_R11
 
REG_R11


	)

51 
	mREG_R12
,

52 
	#REG_R12
 
REG_R12


	)

53 
	mREG_R13
,

54 
	#REG_R13
 
REG_R13


	)

55 
	mREG_R14
,

56 
	#REG_R14
 
REG_R14


	)

57 
	mREG_R15
,

58 
	#REG_R15
 
REG_R15


	)

59 
	mREG_RDI
,

60 
	#REG_RDI
 
REG_RDI


	)

61 
	mREG_RSI
,

62 
	#REG_RSI
 
REG_RSI


	)

63 
	mREG_RBP
,

64 
	#REG_RBP
 
REG_RBP


	)

65 
	mREG_RBX
,

66 
	#REG_RBX
 
REG_RBX


	)

67 
	mREG_RDX
,

68 
	#REG_RDX
 
REG_RDX


	)

69 
	mREG_RAX
,

70 
	#REG_RAX
 
REG_RAX


	)

71 
	mREG_RCX
,

72 
	#REG_RCX
 
REG_RCX


	)

73 
	mREG_RSP
,

74 
	#REG_RSP
 
REG_RSP


	)

75 
	mREG_RIP
,

76 
	#REG_RIP
 
REG_RIP


	)

77 
	mREG_EFL
,

78 
	#REG_EFL
 
REG_EFL


	)

79 
	mREG_CSGSFS
,

80 
	#REG_CSGSFS
 
REG_CSGSFS


	)

81 
	mREG_ERR
,

82 
	#REG_ERR
 
REG_ERR


	)

83 
	mREG_TRAPNO
,

84 
	#REG_TRAPNO
 
REG_TRAPNO


	)

85 
	mREG_OLDMASK
,

86 
	#REG_OLDMASK
 
REG_OLDMASK


	)

87 
	mREG_CR2


88 
	#REG_CR2
 
REG_CR2


	)

92 
	s_libc_åx»g


94 
	msignifiÿnd
[4];

95 
	mexpÚ’t
;

96 
	m·ddšg
[3];

99 
	s_libc_xmm»g


101 
__ušt32_t
 
	m–em’t
[4];

104 
	s_libc_å¡©e


107 
__ušt16_t
 
	mcwd
;

108 
__ušt16_t
 
	mswd
;

109 
__ušt16_t
 
	máw
;

110 
__ušt16_t
 
	mfİ
;

111 
__ušt64_t
 
	mr
;

112 
__ušt64_t
 
	mrdp
;

113 
__ušt32_t
 
	mmxc¤
;

114 
__ušt32_t
 
	mmxü_mask
;

115 
_libc_åx»g
 
	m_¡
[8];

116 
_libc_xmm»g
 
	m_xmm
[16];

117 
__ušt32_t
 
	m·ddšg
[24];

121 
_libc_å¡©e
 *
	tå»g£t_t
;

126 
g»g£t_t
 
	mg»gs
;

128 
å»g£t_t
 
	må»gs
;

129 
__ex‹nsiÚ__
 
	m__»£rved1
 [8];

130 } 
	tmcÚ‹xt_t
;

133 
	sucÚ‹xt


135 
	muc_æags
;

136 
ucÚ‹xt
 *
	muc_lšk
;

137 
¡ack_t
 
	muc_¡ack
;

138 
mcÚ‹xt_t
 
	muc_mcÚ‹xt
;

139 
__sig£t_t
 
	muc_sigmask
;

140 
_libc_å¡©e
 
	m__å»gs_mem
;

141 } 
	tucÚ‹xt_t
;

146 
	tg»g_t
;

149 
	#NGREG
 19

	)

152 
g»g_t
 
	tg»g£t_t
[
NGREG
];

154 #ifdeà
__USE_GNU


158 
	mREG_GS
 = 0,

159 
	#REG_GS
 
REG_GS


	)

160 
	mREG_FS
,

161 
	#REG_FS
 
REG_FS


	)

162 
	mREG_ES
,

163 
	#REG_ES
 
REG_ES


	)

164 
	mREG_DS
,

165 
	#REG_DS
 
REG_DS


	)

166 
	mREG_EDI
,

167 
	#REG_EDI
 
REG_EDI


	)

168 
	mREG_ESI
,

169 
	#REG_ESI
 
REG_ESI


	)

170 
	mREG_EBP
,

171 
	#REG_EBP
 
REG_EBP


	)

172 
	mREG_ESP
,

173 
	#REG_ESP
 
REG_ESP


	)

174 
	mREG_EBX
,

175 
	#REG_EBX
 
REG_EBX


	)

176 
	mREG_EDX
,

177 
	#REG_EDX
 
REG_EDX


	)

178 
	mREG_ECX
,

179 
	#REG_ECX
 
REG_ECX


	)

180 
	mREG_EAX
,

181 
	#REG_EAX
 
REG_EAX


	)

182 
	mREG_TRAPNO
,

183 
	#REG_TRAPNO
 
REG_TRAPNO


	)

184 
	mREG_ERR
,

185 
	#REG_ERR
 
REG_ERR


	)

186 
	mREG_EIP
,

187 
	#REG_EIP
 
REG_EIP


	)

188 
	mREG_CS
,

189 
	#REG_CS
 
REG_CS


	)

190 
	mREG_EFL
,

191 
	#REG_EFL
 
REG_EFL


	)

192 
	mREG_UESP
,

193 
	#REG_UESP
 
REG_UESP


	)

194 
	mREG_SS


195 
	#REG_SS
 
REG_SS


	)

200 
	s_libc_å»g


202 
	msignifiÿnd
[4];

203 
	mexpÚ’t
;

206 
	s_libc_å¡©e


208 
	mcw
;

209 
	msw
;

210 
	mg
;

211 
	moff
;

212 
	mcs£l
;

213 
	md©aoff
;

214 
	md©a£l
;

215 
_libc_å»g
 
	m_¡
[8];

216 
	m¡©us
;

220 
_libc_å¡©e
 *
	tå»g£t_t
;

225 
g»g£t_t
 
	mg»gs
;

228 
å»g£t_t
 
	må»gs
;

229 
	mŞdmask
;

230 
	mü2
;

231 } 
	tmcÚ‹xt_t
;

234 
	sucÚ‹xt


236 
	muc_æags
;

237 
ucÚ‹xt
 *
	muc_lšk
;

238 
¡ack_t
 
	muc_¡ack
;

239 
mcÚ‹xt_t
 
	muc_mcÚ‹xt
;

240 
__sig£t_t
 
	muc_sigmask
;

241 
_libc_å¡©e
 
	m__å»gs_mem
;

242 } 
	tucÚ‹xt_t
;

	@/usr/include/time.h

22 #iâdef 
_TIME_H


24 #ià(! 
defšed
 
__Ãed_time_t
 && !defšed 
__Ãed_şock_t
 && \

25 ! 
defšed
 
	g__Ãed_time¥ec
)

26 
	#_TIME_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


33 #ifdef 
_TIME_H


35 
	#__Ãed_size_t


	)

36 
	#__Ãed_NULL


	)

37 
	~<¡ddef.h
>

41 
	~<b™s/time.h
>

44 #ià!
defšed
 
__STRICT_ANSI__
 && !defšed 
__USE_XOPEN2K


45 #iâdeà
CLK_TCK


46 
	#CLK_TCK
 
CLOCKS_PER_SEC


	)

52 #ià!
defšed
 
__şock_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_şock_t
)

53 
	#__şock_t_defšed
 1

	)

55 
	~<b™s/ty³s.h
>

57 
__BEGIN_NAMESPACE_STD


59 
__şock_t
 
	tşock_t
;

60 
	g__END_NAMESPACE_STD


61 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX
 || defšed 
__USE_MISC


62 
	$__USING_NAMESPACE_STD
(
şock_t
)

66 #undeà
__Ãed_şock_t


68 #ià!
defšed
 
__time_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_time_t
)

69 
	#__time_t_defšed
 1

	)

71 
	~<b™s/ty³s.h
>

73 
__BEGIN_NAMESPACE_STD


75 
__time_t
 
	ttime_t
;

76 
__END_NAMESPACE_STD


77 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC
 || defšed 
__USE_SVID


78 
	$__USING_NAMESPACE_STD
(
time_t
)

82 #undeà
__Ãed_time_t


84 #ià!
defšed
 
__şockid_t_defšed
 && \

85 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_şockid_t
)

86 
	#__şockid_t_defšed
 1

	)

88 
	~<b™s/ty³s.h
>

91 
__şockid_t
 
	tşockid_t
;

94 #undeà
__şockid_time_t


96 #ià!
defšed
 
__tim”_t_defšed
 && \

97 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_tim”_t
)

98 
	#__tim”_t_defšed
 1

	)

100 
	~<b™s/ty³s.h
>

103 
__tim”_t
 
	ttim”_t
;

106 #undeà
__Ãed_tim”_t


109 #ià(!
defšed
 
__time¥ec_defšed
 \

110 && ((
defšed
 
_TIME_H
 \

111 && (
defšed
 
__USE_POSIX199309
 || defšed 
__USE_MISC
 \

112 || 
defšed
 
__USE_ISOC11
)) \

113 || 
defšed
 
__Ãed_time¥ec
))

114 
	#__time¥ec_defšed
 1

	)

116 
	~<b™s/ty³s.h
>

120 
	stime¥ec


122 
__time_t
 
tv_£c
;

123 
__sysÿÎ_¦Úg_t
 
tv_n£c
;

127 #undeà
__Ãed_time¥ec


130 #ifdef 
_TIME_H


131 
__BEGIN_NAMESPACE_STD


133 
	stm


135 
tm_£c
;

136 
tm_mš
;

137 
tm_hour
;

138 
tm_mday
;

139 
tm_mÚ
;

140 
tm_y—r
;

141 
tm_wday
;

142 
tm_yday
;

143 
tm_isd¡
;

145 #ifdef 
__USE_BSD


146 
tm_gmtoff
;

147 cÚ¡ *
tm_zÚe
;

149 
__tm_gmtoff
;

150 cÚ¡ *
__tm_zÚe
;

153 
__END_NAMESPACE_STD


154 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX
 || defšed 
__USE_MISC


155 
	$__USING_NAMESPACE_STD
(
tm
)

159 #ifdeà
__USE_POSIX199309


161 
	s™im”¥ec


163 
time¥ec
 
™_š‹rv®
;

164 
time¥ec
 
™_v®ue
;

168 
sigev’t
;

172 #ifdeà
__USE_XOPEN2K


173 #iâdeà
__pid_t_defšed


174 
__pid_t
 
	tpid_t
;

175 
	#__pid_t_defšed


	)

180 #ifdeà
__USE_ISOC11


182 
	#TIME_UTC
 1

	)

186 
__BEGIN_NAMESPACE_STD


189 
şock_t
 
	$şock
 (è
__THROW
;

192 
time_t
 
	$time
 (
time_t
 *
__tim”
è
__THROW
;

195 
	$difáime
 (
time_t
 
__time1
,ime_ˆ
__time0
)

196 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

199 
time_t
 
	$mktime
 (
tm
 *
__
è
__THROW
;

205 
size_t
 
	$¡ráime
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

206 cÚ¡ *
__»¡riù
 
__fÜm©
,

207 cÚ¡ 
tm
 *
__»¡riù
 
__
è
__THROW
;

208 
__END_NAMESPACE_STD


210 #ifdeà
__USE_XOPEN


213 *
	$¡½time
 (cÚ¡ *
__»¡riù
 
__s
,

214 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
)

215 
__THROW
;

218 #ifdeà
__USE_XOPEN2K8


221 
	~<xloÿË.h
>

223 
size_t
 
	$¡ráime_l
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

224 cÚ¡ *
__»¡riù
 
__fÜm©
,

225 cÚ¡ 
tm
 *
__»¡riù
 
__
,

226 
__loÿË_t
 
__loc
è
__THROW
;

229 #ifdeà
__USE_GNU


230 *
	$¡½time_l
 (cÚ¡ *
__»¡riù
 
__s
,

231 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
,

232 
__loÿË_t
 
__loc
è
__THROW
;

236 
__BEGIN_NAMESPACE_STD


239 
tm
 *
	$gmtime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

243 
tm
 *
	$loÿÉime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

244 
__END_NAMESPACE_STD


246 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


249 
tm
 *
	$gmtime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

250 
tm
 *
__»¡riù
 
__
è
__THROW
;

254 
tm
 *
	$loÿÉime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

255 
tm
 *
__»¡riù
 
__
è
__THROW
;

258 
__BEGIN_NAMESPACE_STD


261 *
	$asùime
 (cÚ¡ 
tm
 *
__
è
__THROW
;

264 *
	$ùime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

265 
__END_NAMESPACE_STD


267 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


272 *
	$asùime_r
 (cÚ¡ 
tm
 *
__»¡riù
 
__
,

273 *
__»¡riù
 
__buf
è
__THROW
;

276 *
	$ùime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

277 *
__»¡riù
 
__buf
è
__THROW
;

282 *
__tzÇme
[2];

283 
__daylight
;

284 
__timezÚe
;

287 #ifdef 
__USE_POSIX


289 *
tzÇme
[2];

293 
	$tz£t
 (è
__THROW
;

296 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


297 
daylight
;

298 
timezÚe
;

301 #ifdeà
__USE_SVID


304 
	$¡ime
 (cÚ¡ 
time_t
 *
__wh’
è
__THROW
;

310 
	#__i¦—p
(
y—r
) \

311 ((
y—r
è% 4 =ğ0 && ((y—rè% 100 !ğ0 || (y—rè% 400 =ğ0))

	)

314 #ifdeà
__USE_MISC


319 
time_t
 
	$timegm
 (
tm
 *
__
è
__THROW
;

322 
time_t
 
	$tim–oÿl
 (
tm
 *
__
è
__THROW
;

325 
	$dysize
 (
__y—r
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

329 #ifdeà
__USE_POSIX199309


334 
	`Çno¦“p
 (cÚ¡ 
time¥ec
 *
__»que¡ed_time
,

335 
time¥ec
 *
__»maššg
);

339 
	$şock_g‘»s
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__»s
è
__THROW
;

342 
	$şock_g‘time
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__
è
__THROW
;

345 
	$şock_£‰ime
 (
şockid_t
 
__şock_id
, cÚ¡ 
time¥ec
 *
__
)

346 
__THROW
;

348 #ifdeà
__USE_XOPEN2K


353 
	`şock_Çno¦“p
 (
şockid_t
 
__şock_id
, 
__æags
,

354 cÚ¡ 
time¥ec
 *
__»q
,

355 
time¥ec
 *
__»m
);

358 
	$şock_g‘ıuşockid
 (
pid_t
 
__pid
, 
şockid_t
 *
__şock_id
è
__THROW
;

363 
	$tim”_ü—‹
 (
şockid_t
 
__şock_id
,

364 
sigev’t
 *
__»¡riù
 
__evp
,

365 
tim”_t
 *
__»¡riù
 
__tim”id
è
__THROW
;

368 
	$tim”_d–‘e
 (
tim”_t
 
__tim”id
è
__THROW
;

371 
	$tim”_£‰ime
 (
tim”_t
 
__tim”id
, 
__æags
,

372 cÚ¡ 
™im”¥ec
 *
__»¡riù
 
__v®ue
,

373 
™im”¥ec
 *
__»¡riù
 
__ov®ue
è
__THROW
;

376 
	$tim”_g‘time
 (
tim”_t
 
__tim”id
, 
™im”¥ec
 *
__v®ue
)

377 
__THROW
;

380 
	$tim”_g‘ov”run
 (
tim”_t
 
__tim”id
è
__THROW
;

384 #ifdeà
__USE_ISOC11


386 
	$time¥ec_g‘
 (
time¥ec
 *
__ts
, 
__ba£
)

387 
__THROW
 
	`__nÚnuÎ
 ((1));

391 #ifdeà
__USE_XOPEN_EXTENDED


403 
g‘d©e_”r
;

412 
tm
 *
	`g‘d©e
 (cÚ¡ *
__¡ršg
);

415 #ifdeà
__USE_GNU


426 
	`g‘d©e_r
 (cÚ¡ *
__»¡riù
 
__¡ršg
,

427 
tm
 *
__»¡riù
 
__»sbuå
);

430 
__END_DECLS


	@/usr/include/xlocale.h

20 #iâdeà
_XLOCALE_H


21 
	#_XLOCALE_H
 1

	)

27 
	s__loÿË_¡ruù


30 
__loÿË_d©a
 *
	m__loÿËs
[13];

33 cÚ¡ *
	m__ùy³_b
;

34 cÚ¡ *
	m__ùy³_tŞow”
;

35 cÚ¡ *
	m__ùy³_touµ”
;

38 cÚ¡ *
	m__Çmes
[13];

39 } *
	t__loÿË_t
;

42 
__loÿË_t
 
	tloÿË_t
;

	@/usr/include/_G_config.h

4 #iâdeà
_G_cÚfig_h


5 
	#_G_cÚfig_h
 1

	)

9 
	~<b™s/ty³s.h
>

10 
	#__Ãed_size_t


	)

11 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


12 
	#__Ãed_wch¬_t


	)

14 
	#__Ãed_NULL


	)

15 
	~<¡ddef.h
>

16 
	#__Ãed_mb¡©e_t


	)

17 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


18 
	#__Ãed_wšt_t


	)

20 
	~<wch¬.h
>

23 
__off_t
 
	m__pos
;

24 
__mb¡©e_t
 
	m__¡©e
;

25 } 
	t_G_åos_t
;

28 
__off64_t
 
	m__pos
;

29 
__mb¡©e_t
 
	m__¡©e
;

30 } 
	t_G_åos64_t
;

31 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


32 
	~<gcÚv.h
>

35 
__gcÚv_šfo
 
	m__cd
;

38 
__gcÚv_šfo
 
	m__cd
;

39 
__gcÚv_¡•_d©a
 
	m__d©a
;

40 } 
	m__combšed
;

41 } 
	t_G_icÚv_t
;

46 
	#_G_va_li¡
 
__gnuc_va_li¡


	)

48 
	#_G_HAVE_MMAP
 1

	)

49 
	#_G_HAVE_MREMAP
 1

	)

51 
	#_G_IO_IO_FILE_VERSION
 0x20001

	)

54 
	#_G_HAVE_ST_BLKSIZE
 
	`defšed
 (
_STATBUF_ST_BLKSIZE
)

	)

56 
	#_G_BUFSIZ
 8192

	)

	@/usr/include/bits/byteswap.h

19 #ià!
defšed
 
_BYTESWAP_H
 && !defšed 
_NETINET_IN_H
 && !defšed 
_ENDIAN_H


23 #iâdeà
_BITS_BYTESWAP_H


24 
	#_BITS_BYTESWAP_H
 1

	)

26 
	~<ã©u»s.h
>

27 
	~<b™s/ty³s.h
>

28 
	~<b™s/wÜdsize.h
>

31 
	#__bsw­_cÚ¡ªt_16
(
x
) \

32 ((è((((
x
è>> 8è& 0xffè| (((xè& 0xffè<< 8)))

	)

35 
	~<b™s/by‹sw­-16.h
>

38 
	#__bsw­_cÚ¡ªt_32
(
x
) \

39 ((((
x
) & 0xff000000) >> 24) | (((x) & 0x00ff0000) >> 8) | \

40 (((
x
è& 0x0000ff00è<< 8è| (((xè& 0x000000ffè<< 24))

	)

42 #ifdeà
__GNUC__


43 #ià
__GNUC_PREREQ
 (4, 3)

44 
__šlše
 

45 
	$__bsw­_32
 (
__bsx
)

47  
	`__butš_bsw­32
 (
__bsx
);

48 
	}
}

49 #–ià
__GNUC__
 >= 2

50 #ià
__WORDSIZE
 =ğ64 || (
defšed
 
__i486__
 || defšed 
__³Áium__
 \

51 || 
defšed
 
	g__³Áium´o__
 || defšed 
	g__³Áium4__
 \

52 || 
defšed
 
	g__k8__
 || defšed 
	g__©hlÚ__
 \

53 || 
defšed
 
	g__k6__
 || defšed 
	g__nocÚa__
 \

54 || 
defšed
 
	g__cÜe2__
 || defšed 
	g__geode__
 \

55 || 
defšed
 
	g__amdçm10__
)

58 
	#__bsw­_32
(
x
) \

59 (
__ex‹nsiÚ__
 \

60 ({ 
__v
, 
__x
 = (
x
); \

61 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

62 
__v
 = 
	`__bsw­_cÚ¡ªt_32
 (
__x
); \

64 
	`__asm__
 ("bsw­ %0" : "ô" (
__v
è: "0" (
__x
)); \

65 
__v
; }))

	)

67 
	#__bsw­_32
(
x
) \

68 (
__ex‹nsiÚ__
 \

69 ({ 
__v
, 
__x
 = (
x
); \

70 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

71 
__v
 = 
	`__bsw­_cÚ¡ªt_32
 (
__x
); \

73 
	`__asm__
 ("rorw $8, %w0;" \

76 : "ô" (
__v
) \

77 : "0" (
__x
) \

79 
__v
; }))

	)

82 
	#__bsw­_32
(
x
) \

83 (
__ex‹nsiÚ__
 \

84 ({ 
__x
 = (
x
); 
	`__bsw­_cÚ¡ªt_32
 (__x); }))

	)

87 
__šlše
 

88 
	$__bsw­_32
 (
__bsx
)

90  
	`__bsw­_cÚ¡ªt_32
 (
__bsx
);

91 
	}
}

95 #ià
__GNUC_PREREQ
 (2, 0)

97 
	#__bsw­_cÚ¡ªt_64
(
x
) \

98 (
	`__ex‹nsiÚ__
 ((((
x
) & 0xff00000000000000ull) >> 56) \

99 | (((
x
) & 0x00ff000000000000ull) >> 40) \

100 | (((
x
) & 0x0000ff0000000000ull) >> 24) \

101 | (((
x
) & 0x000000ff00000000ull) >> 8) \

102 | (((
x
) & 0x00000000ff000000ull) << 8) \

103 | (((
x
) & 0x0000000000ff0000ull) << 24) \

104 | (((
x
) & 0x000000000000ff00ull) << 40) \

105 | (((
x
è& 0x00000000000000ffuÎè<< 56)))

	)

107 #ià
__GNUC_PREREQ
 (4, 3)

108 
__šlše
 
__ušt64_t


109 
	$__bsw­_64
 (
__ušt64_t
 
__bsx
)

111  
	`__butš_bsw­64
 (
__bsx
);

112 
	}
}

113 #–ià
__WORDSIZE
 == 64

114 
	#__bsw­_64
(
x
) \

115 (
__ex‹nsiÚ__
 \

116 ({ 
__ušt64_t
 
__v
, 
__x
 = (
x
); \

117 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

118 
__v
 = 
	`__bsw­_cÚ¡ªt_64
 (
__x
); \

120 
	`__asm__
 ("bsw­ %q0" : "ô" (
__v
è: "0" (
__x
)); \

121 
__v
; }))

	)

123 
	#__bsw­_64
(
x
) \

124 (
__ex‹nsiÚ__
 \

125 ({ uniÚ { 
__ex‹nsiÚ__
 
__ušt64_t
 
__Î
; \

126 
__l
[2]; } 
__w
, 
__r
; \

127 ià(
	`__butš_cÚ¡ªt_p
 (
x
)) \

128 
__r
.
__Î
 = 
	`__bsw­_cÚ¡ªt_64
 (
x
); \

131 
__w
.
__Î
 = (
x
); \

132 
__r
.
__l
[0] = 
	`__bsw­_32
 (
__w
.__l[1]); \

133 
__r
.
__l
[1] = 
	`__bsw­_32
 (
__w
.__l[0]); \

135 
__r
.
__Î
; }))

	)

138 
	#__bsw­_cÚ¡ªt_64
(
x
) \

139 ((((
x
) & 0xff00000000000000ull) >> 56) \

140 | (((
x
) & 0x00ff000000000000ull) >> 40) \

141 | (((
x
) & 0x0000ff0000000000ull) >> 24) \

142 | (((
x
) & 0x000000ff00000000ull) >> 8) \

143 | (((
x
) & 0x00000000ff000000ull) << 8) \

144 | (((
x
) & 0x0000000000ff0000ull) << 24) \

145 | (((
x
) & 0x000000000000ff00ull) << 40) \

146 | (((
x
è& 0x00000000000000ffuÎè<< 56))

	)

148 
__šlše
 
__ušt64_t


149 
	$__bsw­_64
 (
__ušt64_t
 
__bsx
)

151  
	`__bsw­_cÚ¡ªt_64
 (
__bsx
);

152 
	}
}

	@/usr/include/bits/endian.h

3 #iâdeà
_ENDIAN_H


7 
	#__BYTE_ORDER
 
__LITTLE_ENDIAN


	)

	@/usr/include/bits/fcntl-linux.h

19 #iâdef 
_FCNTL_H


37 #ifdeà
__USE_GNU


38 
	~<b™s/uio.h
>

42 
	#O_ACCMODE
 0003

	)

43 
	#O_RDONLY
 00

	)

44 
	#O_WRONLY
 01

	)

45 
	#O_RDWR
 02

	)

46 #iâdeà
O_CREAT


47 
	#O_CREAT
 0100

	)

49 #iâdeà
O_EXCL


50 
	#O_EXCL
 0200

	)

52 #iâdeà
O_NOCTTY


53 
	#O_NOCTTY
 0400

	)

55 #iâdeà
O_TRUNC


56 
	#O_TRUNC
 01000

	)

58 #iâdeà
O_APPEND


59 
	#O_APPEND
 02000

	)

61 #iâdeà
O_NONBLOCK


62 
	#O_NONBLOCK
 04000

	)

64 #iâdeà
O_NDELAY


65 
	#O_NDELAY
 
O_NONBLOCK


	)

67 #iâdeà
O_SYNC


68 
	#O_SYNC
 04010000

	)

70 
	#O_FSYNC
 
O_SYNC


	)

71 #iâdeà
O_ASYNC


72 
	#O_ASYNC
 020000

	)

74 #iâdeà
__O_LARGEFILE


75 
	#__O_LARGEFILE
 0100000

	)

78 #iâdeà
__O_DIRECTORY


79 
	#__O_DIRECTORY
 0200000

	)

81 #iâdeà
__O_NOFOLLOW


82 
	#__O_NOFOLLOW
 0400000

	)

84 #iâdeà
__O_CLOEXEC


85 
	#__O_CLOEXEC
 02000000

	)

87 #iâdeà
__O_DIRECT


88 
	#__O_DIRECT
 040000

	)

90 #iâdeà
__O_NOATIME


91 
	#__O_NOATIME
 01000000

	)

93 #iâdeà
__O_PATH


94 
	#__O_PATH
 010000000

	)

96 #iâdeà
__O_DSYNC


97 
	#__O_DSYNC
 010000

	)

99 #iâdeà
__O_TMPFILE


100 
	#__O_TMPFILE
 020200000

	)

103 #iâdeà
F_GETLK


104 #iâdeà
__USE_FILE_OFFSET64


105 
	#F_GETLK
 5

	)

106 
	#F_SETLK
 6

	)

107 
	#F_SETLKW
 7

	)

109 
	#F_GETLK
 
F_GETLK64


	)

110 
	#F_SETLK
 
F_SETLK64


	)

111 
	#F_SETLKW
 
F_SETLKW64


	)

114 #iâdeà
F_GETLK64


115 
	#F_GETLK64
 12

	)

116 
	#F_SETLK64
 13

	)

117 
	#F_SETLKW64
 14

	)

120 #ifdeà
__USE_LARGEFILE64


121 
	#O_LARGEFILE
 
__O_LARGEFILE


	)

124 #ifdeà
__USE_XOPEN2K8


125 
	#O_DIRECTORY
 
__O_DIRECTORY


	)

126 
	#O_NOFOLLOW
 
__O_NOFOLLOW


	)

127 
	#O_CLOEXEC
 
__O_CLOEXEC


	)

130 #ifdeà
__USE_GNU


131 
	#O_DIRECT
 
__O_DIRECT


	)

132 
	#O_NOATIME
 
__O_NOATIME


	)

133 
	#O_PATH
 
__O_PATH


	)

134 
	#O_TMPFILE
 
__O_TMPFILE


	)

140 #ià
defšed
 
__USE_POSIX199309
 || defšed 
__USE_UNIX98


141 
	#O_DSYNC
 
__O_DSYNC


	)

142 #ià
defšed
 
__O_RSYNC


143 
	#O_RSYNC
 
__O_RSYNC


	)

145 
	#O_RSYNC
 
O_SYNC


	)

150 
	#F_DUPFD
 0

	)

151 
	#F_GETFD
 1

	)

152 
	#F_SETFD
 2

	)

153 
	#F_GETFL
 3

	)

154 
	#F_SETFL
 4

	)

156 #iâdeà
__F_SETOWN


157 
	#__F_SETOWN
 8

	)

158 
	#__F_GETOWN
 9

	)

161 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


162 
	#F_SETOWN
 
__F_SETOWN


	)

163 
	#F_GETOWN
 
__F_GETOWN


	)

166 #iâdeà
__F_SETSIG


167 
	#__F_SETSIG
 10

	)

168 
	#__F_GETSIG
 11

	)

170 #iâdeà
__F_SETOWN_EX


171 
	#__F_SETOWN_EX
 15

	)

172 
	#__F_GETOWN_EX
 16

	)

175 #ifdeà
__USE_GNU


176 
	#F_SETSIG
 
__F_SETSIG


	)

177 
	#F_GETSIG
 
__F_GETSIG


	)

178 
	#F_SETOWN_EX
 
__F_SETOWN_EX


	)

179 
	#F_GETOWN_EX
 
__F_GETOWN_EX


	)

182 #ifdeà
__USE_GNU


183 
	#F_SETLEASE
 1024

	)

184 
	#F_GETLEASE
 1025

	)

185 
	#F_NOTIFY
 1026

	)

186 
	#F_SETPIPE_SZ
 1031

	)

187 
	#F_GETPIPE_SZ
 1032

	)

189 #ifdeà
__USE_XOPEN2K8


190 
	#F_DUPFD_CLOEXEC
 1030

	)

195 
	#FD_CLOEXEC
 1

	)

197 #iâdeà
F_RDLCK


199 
	#F_RDLCK
 0

	)

200 
	#F_WRLCK
 1

	)

201 
	#F_UNLCK
 2

	)

206 #iâdeà
F_EXLCK


207 
	#F_EXLCK
 4

	)

208 
	#F_SHLCK
 8

	)

211 #ifdeà
__USE_BSD


213 
	#LOCK_SH
 1

	)

214 
	#LOCK_EX
 2

	)

215 
	#LOCK_NB
 4

	)

217 
	#LOCK_UN
 8

	)

220 #ifdeà
__USE_GNU


221 
	#LOCK_MAND
 32

	)

222 
	#LOCK_READ
 64

	)

223 
	#LOCK_WRITE
 128

	)

224 
	#LOCK_RW
 192

	)

227 #ifdeà
__USE_GNU


229 
	#DN_ACCESS
 0x00000001

	)

230 
	#DN_MODIFY
 0x00000002

	)

231 
	#DN_CREATE
 0x00000004

	)

232 
	#DN_DELETE
 0x00000008

	)

233 
	#DN_RENAME
 0x00000010

	)

234 
	#DN_ATTRIB
 0x00000020

	)

235 
	#DN_MULTISHOT
 0x80000000

	)

239 #ifdeà
__USE_GNU


241 
	e__pid_ty³


243 
	mF_OWNER_TID
 = 0,

244 
	mF_OWNER_PID
,

245 
	mF_OWNER_PGRP
,

246 
	mF_OWNER_GID
 = 
F_OWNER_PGRP


250 
	sf_owÃr_ex


252 
__pid_ty³
 
	mty³
;

253 
__pid_t
 
	mpid
;

259 #ifdef 
__USE_BSD


260 
	#FAPPEND
 
O_APPEND


	)

261 
	#FFSYNC
 
O_FSYNC


	)

262 
	#FASYNC
 
O_ASYNC


	)

263 
	#FNONBLOCK
 
O_NONBLOCK


	)

264 
	#FNDELAY
 
O_NDELAY


	)

267 #iâdeà
__POSIX_FADV_DONTNEED


268 
	#__POSIX_FADV_DONTNEED
 4

	)

269 
	#__POSIX_FADV_NOREUSE
 5

	)

272 #ifdeà
__USE_XOPEN2K


273 
	#POSIX_FADV_NORMAL
 0

	)

274 
	#POSIX_FADV_RANDOM
 1

	)

275 
	#POSIX_FADV_SEQUENTIAL
 2

	)

276 
	#POSIX_FADV_WILLNEED
 3

	)

277 
	#POSIX_FADV_DONTNEED
 
__POSIX_FADV_DONTNEED


	)

278 
	#POSIX_FADV_NOREUSE
 
__POSIX_FADV_NOREUSE


	)

282 #ifdeà
__USE_GNU


284 
	#SYNC_FILE_RANGE_WAIT_BEFORE
 1

	)

287 
	#SYNC_FILE_RANGE_WRITE
 2

	)

290 
	#SYNC_FILE_RANGE_WAIT_AFTER
 4

	)

295 
	#SPLICE_F_MOVE
 1

	)

296 
	#SPLICE_F_NONBLOCK
 2

	)

299 
	#SPLICE_F_MORE
 4

	)

300 
	#SPLICE_F_GIFT
 8

	)

304 
	#FALLOC_FL_KEEP_SIZE
 1

	)

307 
	#FALLOC_FL_PUNCH_HOLE
 2

	)

311 
	sfe_hªdË


313 
	mhªdË_by‹s
;

314 
	mhªdË_ty³
;

316 
	mf_hªdË
[0];

320 
	#MAX_HANDLE_SZ
 128

	)

324 #ifdeà
__USE_ATFILE


325 
	#AT_FDCWD
 -100

	)

328 
	#AT_SYMLINK_NOFOLLOW
 0x100

	)

329 
	#AT_REMOVEDIR
 0x200

	)

331 
	#AT_SYMLINK_FOLLOW
 0x400

	)

332 #ifdeà
__USE_GNU


333 
	#AT_NO_AUTOMOUNT
 0x800

	)

335 
	#AT_EMPTY_PATH
 0x1000

	)

337 
	#AT_EACCESS
 0x200

	)

341 
	g__BEGIN_DECLS


343 #ifdeà
__USE_GNU


346 
ssize_t
 
	$»adah—d
 (
__fd
, 
__off64_t
 
__off£t
, 
size_t
 
__couÁ
)

347 
__THROW
;

354 
	`sync_fe_¿nge
 (
__fd
, 
__off64_t
 
__off£t
, __off64_ˆ
__couÁ
,

355 
__æags
);

362 
ssize_t
 
	`vm¥liû
 (
__fdout
, cÚ¡ 
iovec
 *
__iov
,

363 
size_t
 
__couÁ
, 
__æags
);

369 
ssize_t
 
	`¥liû
 (
__fdš
, 
__off64_t
 *
__offš
, 
__fdout
,

370 
__off64_t
 *
__offout
, 
size_t
 
__Ën
,

371 
__æags
);

377 
ssize_t
 
	`‹e
 (
__fdš
, 
__fdout
, 
size_t
 
__Ën
,

378 
__æags
);

384 #iâdeà
__USE_FILE_OFFSET64


385 
	`çÎoÿ‹
 (
__fd
, 
__mode
, 
__off_t
 
__off£t
, __off_ˆ
__Ën
);

387 #ifdeà
__REDIRECT


388 
	`__REDIRECT
 (
çÎoÿ‹
, (
__fd
, 
__mode
, 
__off64_t
 
__off£t
,

389 
__off64_t
 
__Ën
),

390 
çÎoÿ‹64
);

392 
	#çÎoÿ‹
 
çÎoÿ‹64


	)

395 #ifdeà
__USE_LARGEFILE64


396 
	`çÎoÿ‹64
 (
__fd
, 
__mode
, 
__off64_t
 
__off£t
,

397 
__off64_t
 
__Ën
);

402 
	$Çme_to_hªdË_©
 (
__dfd
, cÚ¡ *
__Çme
,

403 
fe_hªdË
 *
__hªdË
, *
__mÁ_id
,

404 
__æags
è
__THROW
;

410 
	`İ’_by_hªdË_©
 (
__mouÁdœfd
, 
fe_hªdË
 *
__hªdË
,

411 
__æags
);

415 
__END_DECLS


	@/usr/include/bits/libio-ldbl.h

19 #iâdeà
_IO_STDIO_H


23 
	$__LDBL_REDIR_DECL
 (
_IO_vfsÿnf
)

24 
	`__LDBL_REDIR_DECL
 (
_IO_vårštf
)

	@/usr/include/bits/select.h

18 #iâdeà
_SYS_SELECT_H


22 
	~<b™s/wÜdsize.h
>

25 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

27 #ià
__WORDSIZE
 == 64

28 
	#__FD_ZERO_STOS
 "¡osq"

	)

30 
	#__FD_ZERO_STOS
 "¡o¦"

	)

33 
	#__FD_ZERO
(
fd¥
) \

35 
__d0
, 
__d1
; \

36 
__asm__
 
	`__vŞ©e__
 ("şd;„•; " 
__FD_ZERO_STOS
 \

37 : "=c" (
__d0
), "=D" (
__d1
) \

38 : "a" (0), "0" ( (
fd_£t
) \

39 /  (
__fd_mask
)), \

40 "1" (&
	`__FDS_BITS
 (
fd¥
)[0]) \

42 } 0)

	)

48 
	#__FD_ZERO
(
£t
) \

50 
__i
; \

51 
fd_£t
 *
__¬r
 = (
£t
); \

52 
__i
 = 0; __˜<  (
fd_£t
è/  (
__fd_mask
); ++__i) \

53 
	`__FDS_BITS
 (
__¬r
)[
__i
] = 0; \

54 } 0)

	)

58 
	#__FD_SET
(
d
, 
£t
) \

59 ((è(
	`__FDS_BITS
 (
£t
)[
	`__FD_ELT
 (
d
)] |ğ
	`__FD_MASK
 (d)))

	)

60 
	#__FD_CLR
(
d
, 
£t
) \

61 ((è(
	`__FDS_BITS
 (
£t
)[
	`__FD_ELT
 (
d
)] &ğ~
	`__FD_MASK
 (d)))

	)

62 
	#__FD_ISSET
(
d
, 
£t
) \

63 ((
	`__FDS_BITS
 (
£t
)[
	`__FD_ELT
 (
d
)] & 
	`__FD_MASK
 (d)è!ğ0)

	)

	@/usr/include/bits/select2.h

19 #iâdeà
_SYS_SELECT_H


24 
__fd–t_chk
 (
__d
);

25 
	$__fd–t_w¬n
 (
__d
)

26 
	`__w¬Ç‰r
 ("bit outside of fd_set selected");

27 #undeà
__FD_ELT


28 
	#__FD_ELT
(
d
) \

29 
__ex‹nsiÚ__
 \

30 ({ 
__d
 = (
d
); \

31 (
	`__butš_cÚ¡ªt_p
 (
__d
) \

32 ? (0 <ğ
__d
 && __d < 
__FD_SETSIZE
 \

33 ? (
__d
 / 
__NFDBITS
) \

34 : 
	`__fd–t_w¬n
 (
__d
)) \

35 : 
	`__fd–t_chk
 (
__d
)); 
	}
})

	)

	@/usr/include/bits/stdio-lock.h

19 #iâdeà
_BITS_STDIO_LOCK_H


20 
	#_BITS_STDIO_LOCK_H
 1

	)

22 
	~<b™s/libc-lock.h
>

23 
	~<lowËv–lock.h
>

27 
	#_IO_lock_šex³nsive
 1

	)

29 ¡ruù { 
	mlock
; 
	mút
; *
	mowÃr
; } 
	t_IO_lock_t
;

31 
	#_IO_lock_š™Ÿliz”
 { 
LLL_LOCK_INITIALIZER
, 0, 
NULL
 }

	)

33 
	#_IO_lock_š™
(
_Çme
) \

34 ((
_Çme
èğ(
_IO_lock_t
è
_IO_lock_š™Ÿliz”
 , 0)

	)

36 
	#_IO_lock_fši
(
_Çme
) \

37 ((è0)

	)

39 
	#_IO_lock_lock
(
_Çme
) \

41 *
__£lf
 = 
THREAD_SELF
; \

42 ià((
_Çme
).
owÃr
 !ğ
__£lf
) \

44 
	`Îl_lock
 ((
_Çme
).
lock
, 
LLL_PRIVATE
); \

45 (
_Çme
).
owÃr
 = 
__£lf
; \

47 ++(
_Çme
).
út
; \

48 } 0)

	)

50 
	#_IO_lock_Œylock
(
_Çme
) \

52 
__»suÉ
 = 0; \

53 *
__£lf
 = 
THREAD_SELF
; \

54 ià((
_Çme
).
owÃr
 !ğ
__£lf
) \

56 ià(
	`Îl_Œylock
 ((
_Çme
).
lock
) == 0) \

58 (
_Çme
).
owÃr
 = 
__£lf
; \

59 (
_Çme
).
út
 = 1; \

62 
__»suÉ
 = 
EBUSY
; \

65 ++(
_Çme
).
út
; \

66 
__»suÉ
; \

67 })

	)

69 
	#_IO_lock_uÆock
(
_Çme
) \

71 ià(--(
_Çme
).
út
 == 0) \

73 (
_Çme
).
owÃr
 = 
NULL
; \

74 
	`Îl_uÆock
 ((
_Çme
).
lock
, 
LLL_PRIVATE
); \

76 } 0)

	)

80 
	#_IO_ş—nup_»giÚ_¡¬t
(
_fù
, 
_å
) \

81 
	`__libc_ş—nup_»giÚ_¡¬t
 (((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0, 
_fù
, _å)

	)

82 
	#_IO_ş—nup_»giÚ_¡¬t_nßrg
(
_fù
) \

83 
	`__libc_ş—nup_»giÚ_¡¬t
 (1, 
_fù
, 
NULL
)

	)

84 
	#_IO_ş—nup_»giÚ_’d
(
_do™
) \

85 
	`__libc_ş—nup_»giÚ_’d
 (
_do™
)

	)

87 #ià
defšed
 
_LIBC
 && !defšed 
NOT_IN_libc


89 #ifdeà
__EXCEPTIONS


90 
	#_IO_acquœe_lock
(
_å
) \

92 
_IO_FILE
 *
_IO_acquœe_lock_fe
 \

93 
	`__©Œibu‹__
((
	`ş—nup
 (
_IO_acquœe_lock_fù
))) \

94 ğ(
_å
); \

95 
	`_IO_æockfe
 (
_IO_acquœe_lock_fe
);

	)

96 
	#_IO_acquœe_lock_ş—r_æags2
(
_å
) \

98 
_IO_FILE
 *
_IO_acquœe_lock_fe
 \

99 
	`__©Œibu‹__
((
	`ş—nup
 (
_IO_acquœe_lock_ş—r_æags2_fù
))) \

100 ğ(
_å
); \

101 
	`_IO_æockfe
 (
_IO_acquœe_lock_fe
);

	)

103 
	#_IO_acquœe_lock
(
_å
è
_IO_acquœe_lock_Ãeds_exû±iÚs_’abËd


	)

104 
	#_IO_acquœe_lock_ş—r_æags2
(
_å
è
	`_IO_acquœe_lock
 (_å)

	)

106 
	#_IO_»Ëa£_lock
(
_å
è; } 0)

	)

	@/usr/include/bits/time.h

23 #ià
defšed
 
__Ãed_timev®
 || defšed 
__USE_GNU


24 #iâdeà
_STRUCT_TIMEVAL


25 
	#_STRUCT_TIMEVAL
 1

	)

26 
	~<b™s/ty³s.h
>

30 
	stimev®


32 
__time_t
 
	mtv_£c
;

33 
__su£cÚds_t
 
	mtv_u£c
;

38 #iâdeà
__Ãed_timev®


39 #iâdeà
_BITS_TIME_H


40 
	#_BITS_TIME_H
 1

	)

48 
	#CLOCKS_PER_SEC
 1000000l

	)

50 #ià(!
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_POSIX
) \

51 && !
defšed
 
	g__USE_XOPEN2K


54 
	~<b™s/ty³s.h
>

55 
__syscÚf
 ();

56 
	#CLK_TCK
 ((
__şock_t
è
	`__syscÚf
 (2)è

	)

59 #ifdeà
__USE_POSIX199309


61 
	#CLOCK_REALTIME
 0

	)

63 
	#CLOCK_MONOTONIC
 1

	)

65 
	#CLOCK_PROCESS_CPUTIME_ID
 2

	)

67 
	#CLOCK_THREAD_CPUTIME_ID
 3

	)

69 
	#CLOCK_MONOTONIC_RAW
 4

	)

71 
	#CLOCK_REALTIME_COARSE
 5

	)

73 
	#CLOCK_MONOTONIC_COARSE
 6

	)

75 
	#CLOCK_BOOTTIME
 7

	)

77 
	#CLOCK_REALTIME_ALARM
 8

	)

79 
	#CLOCK_BOOTTIME_ALARM
 9

	)

82 
	#TIMER_ABSTIME
 1

	)

85 #ifdeà
__USE_GNU


86 
	~<b™s/timex.h
>

88 
__BEGIN_DECLS


91 
	$şock_adjtime
 (
__şockid_t
 
__şock_id
, 
timex
 *
__utx
è
__THROW
;

93 
__END_DECLS


99 #undeà
__Ãed_timev®


	@/usr/include/bits/typesizes.h

19 #iâdeà
_BITS_TYPES_H


23 #iâdef 
_BITS_TYPESIZES_H


24 
	#_BITS_TYPESIZES_H
 1

	)

30 #ià
defšed
 
__x86_64__
 && defšed 
__ILP32__


31 
	#__SYSCALL_SLONG_TYPE
 
__SQUAD_TYPE


	)

32 
	#__SYSCALL_ULONG_TYPE
 
__UQUAD_TYPE


	)

34 
	#__SYSCALL_SLONG_TYPE
 
__SLONGWORD_TYPE


	)

35 
	#__SYSCALL_ULONG_TYPE
 
__ULONGWORD_TYPE


	)

38 
	#__DEV_T_TYPE
 
__UQUAD_TYPE


	)

39 
	#__UID_T_TYPE
 
__U32_TYPE


	)

40 
	#__GID_T_TYPE
 
__U32_TYPE


	)

41 
	#__INO_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

42 
	#__INO64_T_TYPE
 
__UQUAD_TYPE


	)

43 
	#__MODE_T_TYPE
 
__U32_TYPE


	)

44 #ifdeà
__x86_64__


45 
	#__NLINK_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

46 
	#__FSWORD_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

48 
	#__NLINK_T_TYPE
 
__UWORD_TYPE


	)

49 
	#__FSWORD_T_TYPE
 
__SWORD_TYPE


	)

51 
	#__OFF_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

52 
	#__OFF64_T_TYPE
 
__SQUAD_TYPE


	)

53 
	#__PID_T_TYPE
 
__S32_TYPE


	)

54 
	#__RLIM_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

55 
	#__RLIM64_T_TYPE
 
__UQUAD_TYPE


	)

56 
	#__BLKCNT_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

57 
	#__BLKCNT64_T_TYPE
 
__SQUAD_TYPE


	)

58 
	#__FSBLKCNT_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

59 
	#__FSBLKCNT64_T_TYPE
 
__UQUAD_TYPE


	)

60 
	#__FSFILCNT_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

61 
	#__FSFILCNT64_T_TYPE
 
__UQUAD_TYPE


	)

62 
	#__ID_T_TYPE
 
__U32_TYPE


	)

63 
	#__CLOCK_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

64 
	#__TIME_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

65 
	#__USECONDS_T_TYPE
 
__U32_TYPE


	)

66 
	#__SUSECONDS_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

67 
	#__DADDR_T_TYPE
 
__S32_TYPE


	)

68 
	#__KEY_T_TYPE
 
__S32_TYPE


	)

69 
	#__CLOCKID_T_TYPE
 
__S32_TYPE


	)

70 
	#__TIMER_T_TYPE
 *

	)

71 
	#__BLKSIZE_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

72 
	#__FSID_T_TYPE
 sŒuù { 
__v®
[2]; }

	)

73 
	#__SSIZE_T_TYPE
 
__SWORD_TYPE


	)

75 #ifdeà
__x86_64__


79 
	#__OFF_T_MATCHES_OFF64_T
 1

	)

82 
	#__INO_T_MATCHES_INO64_T
 1

	)

86 
	#__FD_SETSIZE
 1024

	)

	@/usr/include/bits/wordsize.h

3 #ià
defšed
 
__x86_64__
 && !defšed 
__ILP32__


4 
	#__WORDSIZE
 64

	)

6 
	#__WORDSIZE
 32

	)

9 #ifdeà
__x86_64__


10 
	#__WORDSIZE_TIME64_COMPAT32
 1

	)

12 
	#__SYSCALL_WORDSIZE
 64

	)

	@/usr/include/gnu/stubs.h

6 #ià!
defšed
 
__x86_64__


7 
	~<gnu/¡ubs-32.h
>

9 #ià
defšed
 
__x86_64__
 && defšed 
__LP64__


10 
	~<gnu/¡ubs-64.h
>

12 #ià
defšed
 
__x86_64__
 && defšed 
__ILP32__


13 
	~<gnu/¡ubs-x32.h
>

	@/usr/include/linux/errno.h

1 
	~<asm/”ºo.h
>

	@/usr/include/stdc-predef.h

18 #iâdef 
_STDC_PREDEF_H


19 
	#_STDC_PREDEF_H
 1

	)

36 #ifdeà
__GCC_IEC_559


37 #ià
__GCC_IEC_559
 > 0

38 
	#__STDC_IEC_559__
 1

	)

41 
	#__STDC_IEC_559__
 1

	)

44 #ifdeà
__GCC_IEC_559_COMPLEX


45 #ià
__GCC_IEC_559_COMPLEX
 > 0

46 
	#__STDC_IEC_559_COMPLEX__
 1

	)

49 
	#__STDC_IEC_559_COMPLEX__
 1

	)

54 
	#__STDC_ISO_10646__
 201103L

	)

57 
	#__STDC_NO_THREADS__
 1

	)

	@/usr/include/sys/cdefs.h

18 #iâdef 
_SYS_CDEFS_H


19 
	#_SYS_CDEFS_H
 1

	)

22 #iâdeà
_FEATURES_H


23 
	~<ã©u»s.h
>

29 #ià
defšed
 
__GNUC__
 && !defšed 
__STDC__


34 #undeà
__P


35 #undeà
__PMT


37 #ifdeà
__GNUC__


41 #ià
__GNUC_PREREQ
 (4, 6è&& !
defšed
 
_LIBC


42 
	#__LEAF
 , 
__Ëaf__


	)

43 
	#__LEAF_ATTR
 
	`__©Œibu‹__
 ((
__Ëaf__
))

	)

45 
	#__LEAF


	)

46 
	#__LEAF_ATTR


	)

54 #ià!
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (3, 3)

55 
	#__THROW
 
	`__©Œibu‹__
 ((
__nÙhrow__
 
__LEAF
))

	)

56 
	#__THROWNL
 
	`__©Œibu‹__
 ((
__nÙhrow__
))

	)

57 
	#__NTH
(
fù
è
	`__©Œibu‹__
 ((
__nÙhrow__
 
__LEAF
)è
	)
fct

59 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,8)

60 
	#__THROW
 
	`throw
 ()

	)

61 
	#__THROWNL
 
	`throw
 ()

	)

62 
	#__NTH
(
fù
è
__LEAF_ATTR
 fù 
	`throw
 ()

	)

64 
	#__THROW


	)

65 
	#__THROWNL


	)

66 
	#__NTH
(
fù
è
	)
fct

72 
	#__šlše


	)

74 
	#__THROW


	)

75 
	#__THROWNL


	)

76 
	#__NTH
(
fù
è
	)
fct

82 
	#__P
(
¬gs
è
	)
args

83 
	#__PMT
(
¬gs
è
	)
args

88 
	#__CONCAT
(
x
,
y
èx ## 
	)
y

89 
	#__STRING
(
x
è#x

	)

92 
	#__±r_t
 *

	)

93 
	#__lÚg_doubË_t
 

	)

97 #ifdef 
__ılu¥lus


98 
	#__BEGIN_DECLS
 "C" {

	)

99 
	#__END_DECLS
 }

	)

101 
	#__BEGIN_DECLS


	)

102 
	#__END_DECLS


	)

111 #ià
defšed
 
__ılu¥lus
 && defšed 
_GLIBCPP_USE_NAMESPACES


112 
	#__BEGIN_NAMESPACE_STD
 
Çme¥aû
 
¡d
 {

	)

113 
	#__END_NAMESPACE_STD
 }

	)

114 
	#__USING_NAMESPACE_STD
(
Çme
è
usšg
 
¡d
::Çme;

	)

115 
	#__BEGIN_NAMESPACE_C99
 
Çme¥aû
 
__c99
 {

	)

116 
	#__END_NAMESPACE_C99
 }

	)

117 
	#__USING_NAMESPACE_C99
(
Çme
è
usšg
 
__c99
::Çme;

	)

122 
	#__BEGIN_NAMESPACE_STD


	)

123 
	#__END_NAMESPACE_STD


	)

124 
	#__USING_NAMESPACE_STD
(
Çme
)

	)

125 
	#__BEGIN_NAMESPACE_C99


	)

126 
	#__END_NAMESPACE_C99


	)

127 
	#__USING_NAMESPACE_C99
(
Çme
)

	)

132 
	#__bos
(
±r
è
	`__butš_objeù_size
 (±r, 
__USE_FORTIFY_LEVEL
 > 1)

	)

133 
	#__bos0
(
±r
è
	`__butš_objeù_size
 (±r, 0)

	)

134 
	#__fÜtify_funùiÚ
 
__ex‹º_®ways_šlše
 
__©Œibu‹_¬tificŸl__


	)

136 #ià
__GNUC_PREREQ
 (4,3)

137 
	#__w¬ndeş
(
Çme
, 
msg
) \

138 
	`Çme
 (è
	`__©Œibu‹__
((
	`__w¬nšg__
 (
msg
)))

	)

139 
	#__w¬Ç‰r
(
msg
è
	`__©Œibu‹__
((
	`__w¬nšg__
 (msg)))

	)

140 
	#__”rÜdeş
(
Çme
, 
msg
) \

141 
	`Çme
 (è
	`__©Œibu‹__
((
	`__”rÜ__
 (
msg
)))

	)

143 
	#__w¬ndeş
(
Çme
, 
msg
è
	`Çme
 ()

	)

144 
	#__w¬Ç‰r
(
msg
)

	)

145 
	#__”rÜdeş
(
Çme
, 
msg
è
	`Çme
 ()

	)

149 #ià
__GNUC_PREREQ
 (2,97)

151 
	#__æex¬r
 []

	)

153 #ifdeà
__GNUC__


154 
	#__æex¬r
 [0]

	)

156 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

157 
	#__æex¬r
 []

	)

160 
	#__æex¬r
 [1]

	)

176 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

178 
	#__REDIRECT
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm´ÙØ
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs))

	)

179 #ifdeà
__ılu¥lus


180 
	#__REDIRECT_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
) \

181 
Çme
 
´Ùo
 
__THROW
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs))

	)

182 
	#__REDIRECT_NTHNL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

183 
Çme
 
´Ùo
 
__THROWNL
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs))

	)

185 
	#__REDIRECT_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
) \

186 
Çme
 
´Ùo
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs)è
__THROW


	)

187 
	#__REDIRECT_NTHNL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

188 
Çme
 
´Ùo
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs)è
__THROWNL


	)

190 
	#__ASMNAME
(
úame
è
	`__ASMNAME2
 (
__USER_LABEL_PREFIX__
, cÇme)

	)

191 
	#__ASMNAME2
(
´efix
, 
úame
è
	`__STRING
 (´efixè
	)
cname

204 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2

205 
	#__©Œibu‹__
(
xyz
è

	)

211 #ià
__GNUC_PREREQ
 (2,96)

212 
	#__©Œibu‹_m®loc__
 
	`__©Œibu‹__
 ((
__m®loc__
))

	)

214 
	#__©Œibu‹_m®loc__


	)

219 #ià
__GNUC_PREREQ
 (4, 3)

220 
	#__©Œibu‹_®loc_size__
(
·¿ms
) \

221 
	`__©Œibu‹__
 ((
__®loc_size__
 
·¿ms
))

	)

223 
	#__©Œibu‹_®loc_size__
(
·¿ms
è

	)

229 #ià
__GNUC_PREREQ
 (2,96)

230 
	#__©Œibu‹_pu»__
 
	`__©Œibu‹__
 ((
__pu»__
))

	)

232 
	#__©Œibu‹_pu»__


	)

236 #ià
__GNUC_PREREQ
 (2,5)

237 
	#__©Œibu‹_cÚ¡__
 
	`__©Œibu‹__
 ((
__cÚ¡__
))

	)

239 
	#__©Œibu‹_cÚ¡__


	)

245 #ià
__GNUC_PREREQ
 (3,1)

246 
	#__©Œibu‹_u£d__
 
	`__©Œibu‹__
 ((
__u£d__
))

	)

247 
	#__©Œibu‹_nošlše__
 
	`__©Œibu‹__
 ((
__nošlše__
))

	)

249 
	#__©Œibu‹_u£d__
 
	`__©Œibu‹__
 ((
__unu£d__
))

	)

250 
	#__©Œibu‹_nošlše__


	)

254 #ià
__GNUC_PREREQ
 (3,2)

255 
	#__©Œibu‹_d•»ÿ‹d__
 
	`__©Œibu‹__
 ((
__d•»ÿ‹d__
))

	)

257 
	#__©Œibu‹_d•»ÿ‹d__


	)

266 #ià
__GNUC_PREREQ
 (2,8)

267 
	#__©Œibu‹_fÜm©_¬g__
(
x
è
	`__©Œibu‹__
 ((
	`__fÜm©_¬g__
 (x)))

	)

269 
	#__©Œibu‹_fÜm©_¬g__
(
x
è

	)

276 #ià
__GNUC_PREREQ
 (2,97)

277 
	#__©Œibu‹_fÜm©_¡rfmÚ__
(
a
,
b
) \

278 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__¡rfmÚ__
, 
a
, 
b
)))

	)

280 
	#__©Œibu‹_fÜm©_¡rfmÚ__
(
a
,
b
è

	)

285 #ià
__GNUC_PREREQ
 (3,3)

286 
	#__nÚnuÎ
(
·¿ms
è
	`__©Œibu‹__
 ((
__nÚnuÎ__
…¬ams))

	)

288 
	#__nÚnuÎ
(
·¿ms
)

	)

293 #ià
__GNUC_PREREQ
 (3,4)

294 
	#__©Œibu‹_w¬n_unu£d_»suÉ__
 \

295 
	`__©Œibu‹__
 ((
__w¬n_unu£d_»suÉ__
))

	)

296 #ià
__USE_FORTIFY_LEVEL
 > 0

297 
	#__wur
 
__©Œibu‹_w¬n_unu£d_»suÉ__


	)

300 
	#__©Œibu‹_w¬n_unu£d_»suÉ__


	)

302 #iâdeà
__wur


303 
	#__wur


	)

307 #ià
__GNUC_PREREQ
 (3,2)

308 
	#__®ways_šlše
 
__šlše
 
	`__©Œibu‹__
 ((
__®ways_šlše__
))

	)

310 
	#__®ways_šlše
 
__šlše


	)

315 #ià
__GNUC_PREREQ
 (4,3)

316 
	#__©Œibu‹_¬tificŸl__
 
	`__©Œibu‹__
 ((
__¬tificŸl__
))

	)

318 
	#__©Œibu‹_¬tificŸl__


	)

321 #ifdeà
__GNUC__


326 #ià
defšed
 
__GNUC_STDC_INLINE__
 || defšed 
__GNUC_GNU_INLINE__


327 
	#__ex‹º_šlše
 
__šlše
 
	`__©Œibu‹__
 ((
__gnu_šlše__
))

	)

328 
	#__ex‹º_®ways_šlše
 \

329 
__®ways_šlše
 
	`__©Œibu‹__
 ((
__gnu_šlše__
))

	)

331 
	#__ex‹º_šlše
 
__šlše


	)

332 
	#__ex‹º_®ways_šlše
 
__®ways_šlše


	)

335 
	#__ex‹º_šlše


	)

336 
	#__ex‹º_®ways_šlše


	)

341 #ià
__GNUC_PREREQ
 (4,3)

342 
	#__va_¬g_·ck
(è
	`__butš_va_¬g_·ck
 ()

	)

343 
	#__va_¬g_·ck_Ën
(è
	`__butš_va_¬g_·ck_Ën
 ()

	)

350 #ià!
__GNUC_PREREQ
 (2,8)

351 
	#__ex‹nsiÚ__


	)

355 #ià!
__GNUC_PREREQ
 (2,92)

356 
	#__»¡riù


	)

362 #ià
__GNUC_PREREQ
 (3,1è&& !
defšed
 
__GNUG__


363 
	#__»¡riù_¬r
 
__»¡riù


	)

365 #ifdeà
__GNUC__


366 
	#__»¡riù_¬r


	)

368 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

369 
	#__»¡riù_¬r
 
»¡riù


	)

372 
	#__»¡riù_¬r


	)

377 #ià
__GNUC__
 >= 3

378 
	#__glibc_uÆik–y
(
cÚd
è
	`__butš_ex³ù
 ((cÚd), 0)

	)

379 
	#__glibc_lik–y
(
cÚd
è
	`__butš_ex³ù
 ((cÚd), 1)

	)

381 
	#__glibc_uÆik–y
(
cÚd
è(cÚd)

	)

382 
	#__glibc_lik–y
(
cÚd
è(cÚd)

	)

385 
	~<b™s/wÜdsize.h
>

387 #ià
defšed
 
__LONG_DOUBLE_MATH_OPTIONAL
 && defšed 
__NO_LONG_DOUBLE_MATH


388 
	#__LDBL_COMPAT
 1

	)

389 #ifdeà
__REDIRECT


390 
	#__LDBL_REDIR1
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT
 (Çme,…rÙo,‡lŸs)

	)

391 
	#__LDBL_REDIR
(
Çme
, 
´Ùo
) \

392 
	`__LDBL_REDIR1
 (
Çme
, 
´Ùo
, 
__Ædbl_
##Çme)

	)

393 
	#__LDBL_REDIR1_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT_NTH
 (Çme,…rÙo,‡lŸs)

	)

394 
	#__LDBL_REDIR_NTH
(
Çme
, 
´Ùo
) \

395 
	`__LDBL_REDIR1_NTH
 (
Çme
, 
´Ùo
, 
__Ædbl_
##Çme)

	)

396 
	#__LDBL_REDIR1_DECL
(
Çme
, 
®Ÿs
) \

397 
	`__ty³of
 (
Çme
èÇm
	`__asm
 (
	`__ASMNAME
 (#®Ÿs));

	)

398 
	#__LDBL_REDIR_DECL
(
Çme
) \

399 
	`__ty³of
 (
Çme
èÇm
	`__asm
 (
	`__ASMNAME
 ("__Ædbl_" #Çme));

	)

400 
	#__REDIRECT_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

401 
	`__LDBL_REDIR1
 (
Çme
, 
´Ùo
, 
__Ædbl_
##
®Ÿs
)

	)

402 
	#__REDIRECT_NTH_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

403 
	`__LDBL_REDIR1_NTH
 (
Çme
, 
´Ùo
, 
__Ædbl_
##
®Ÿs
)

	)

406 #ià!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT


407 
	#__LDBL_REDIR1
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm
	)
proto

408 
	#__LDBL_REDIR
(
Çme
, 
´Ùo
èÇm
	)
proto

409 
	#__LDBL_REDIR1_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm´ÙØ
__THROW


	)

410 
	#__LDBL_REDIR_NTH
(
Çme
, 
´Ùo
èÇm´ÙØ
__THROW


	)

411 
	#__LDBL_REDIR_DECL
(
Çme
)

	)

412 #ifdeà
__REDIRECT


413 
	#__REDIRECT_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT
 (Çme,…rÙo,‡lŸs)

	)

414 
	#__REDIRECT_NTH_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

415 
	`__REDIRECT_NTH
 (
Çme
, 
´Ùo
, 
®Ÿs
)

	)

	@/usr/include/asm/errno.h

1 
	~<asm-g’”ic/”ºo.h
>

	@/usr/include/bits/byteswap-16.h

19 #iâdeà
_BITS_BYTESWAP_H


23 #ifdeà
__GNUC__


24 #ià
__GNUC__
 >= 2

25 
	#__bsw­_16
(
x
) \

26 (
__ex‹nsiÚ__
 \

27 ({ 
__v
, 
__x
 = (è(
x
); \

28 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

29 
__v
 = 
	`__bsw­_cÚ¡ªt_16
 (
__x
); \

31 
	`__asm__
 ("rorw $8, %w0" \

32 : "ô" (
__v
) \

33 : "0" (
__x
) \

35 
__v
; }))

	)

38 
	#__bsw­_16
(
x
) \

39 (
__ex‹nsiÚ__
 \

40 ({ 
__x
 = (è(
x
); \

41 
	`__bsw­_cÚ¡ªt_16
 (
__x
); }))

	)

44 
__šlše
 

45 
	$__bsw­_16
 (
__bsx
)

47  
	`__bsw­_cÚ¡ªt_16
 (
__bsx
);

48 
	}
}

	@/usr/include/bits/libc-lock.h

19 #iâdeà
_BITS_LIBC_LOCK_H


20 
	#_BITS_LIBC_LOCK_H
 1

	)

22 
	~<±h»ad.h
>

23 
	#__Ãed_NULL


	)

24 
	~<¡ddef.h
>

28 #ià
defšed
 
_LIBC
 || defšed 
_IO_MTSAFE_IO


29 #ià(
defšed
 
NOT_IN_libc
 && !defšed 
IS_IN_lib±h»ad
è|| !defšed 
_LIBC


30 ¡ruù { 
±h»ad_mu‹x_t
 
	mmu‹x
; } 
	t__libc_lock_»cursive_t
;

32 ¡ruù { 
	mlock
; 
	mút
; *
	mowÃr
; } 
	t__libc_lock_»cursive_t
;

35 
__libc_lock_»cursive_İaque__
 
	t__libc_lock_»cursive_t
;

45 
	#__libc_lock_defše_»cursive
(
CLASS
,
NAME
) \

46 
CLASS
 
__libc_lock_»cursive_t
 
NAME
;

	)

50 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

51 #ià
LLL_LOCK_INITIALIZER
 == 0

52 
	#__libc_lock_defše_š™Ÿlized_»cursive
(
CLASS
,
NAME
) \

53 
CLASS
 
__libc_lock_»cursive_t
 
NAME
;

	)

55 
	#__libc_lock_defše_š™Ÿlized_»cursive
(
CLASS
,
NAME
) \

56 
CLASS
 
__libc_lock_»cursive_t
 
NAME
 = 
_LIBC_LOCK_RECURSIVE_INITIALIZER
;

	)

58 
	#_LIBC_LOCK_RECURSIVE_INITIALIZER
 \

59 { 
LLL_LOCK_INITIALIZER
, 0, 
NULL
 }

	)

61 
	#__libc_lock_defše_š™Ÿlized_»cursive
(
CLASS
,
NAME
) \

62 
CLASS
 
__libc_lock_»cursive_t
 
NAME
 = 
_LIBC_LOCK_RECURSIVE_INITIALIZER
;

	)

63 
	#_LIBC_LOCK_RECURSIVE_INITIALIZER
 \

64 {
PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
}

	)

68 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

69 
	#__libc_lock_š™_»cursive
(
NAME
) \

70 ((
NAME
èğ(
__libc_lock_»cursive_t
è
_LIBC_LOCK_RECURSIVE_INITIALIZER
, 0)

	)

72 
	#__libc_lock_š™_»cursive
(
NAME
) \

74 ià(
__±h»ad_mu‹x_š™
 !ğ
NULL
) \

76 
±h»ad_mu‹x©Œ_t
 
__©Œ
; \

77 
	`__±h»ad_mu‹x©Œ_š™
 (&
__©Œ
); \

78 
	`__±h»ad_mu‹x©Œ_£‰y³
 (&
__©Œ
, 
PTHREAD_MUTEX_RECURSIVE_NP
); \

79 
	`__±h»ad_mu‹x_š™
 (&(
NAME
).
mu‹x
, &
__©Œ
); \

80 
	`__±h»ad_mu‹x©Œ_de¡roy
 (&
__©Œ
); \

82 } 0)

	)

86 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

87 
	#__libc_lock_fši_»cursive
(
NAME
è((è0)

	)

89 
	#__libc_lock_fši_»cursive
(
NAME
) \

90 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_de¡roy
, (&(
NAME
).
mu‹x
), 0)

	)

94 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

95 
	#__libc_lock_lock_»cursive
(
NAME
) \

97 *
£lf
 = 
THREAD_SELF
; \

98 ià((
NAME
).
owÃr
 !ğ
£lf
) \

100 
	`Îl_lock
 ((
NAME
).
lock
, 
LLL_PRIVATE
); \

101 (
NAME
).
owÃr
 = 
£lf
; \

103 ++(
NAME
).
út
; \

104 } 0)

	)

106 
	#__libc_lock_lock_»cursive
(
NAME
) \

107 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_lock
, (&(
NAME
).
mu‹x
), 0)

	)

111 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

112 
	#__libc_lock_Œylock_»cursive
(
NAME
) \

114 
»suÉ
 = 0; \

115 *
£lf
 = 
THREAD_SELF
; \

116 ià((
NAME
).
owÃr
 !ğ
£lf
) \

118 ià(
	`Îl_Œylock
 ((
NAME
).
lock
) == 0) \

120 (
NAME
).
owÃr
 = 
£lf
; \

121 (
NAME
).
út
 = 1; \

124 
»suÉ
 = 
EBUSY
; \

127 ++(
NAME
).
út
; \

128 
»suÉ
; \

129 })

	)

131 
	#__libc_lock_Œylock_»cursive
(
NAME
) \

132 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_Œylock
, (&(
NAME
).
mu‹x
), 0)

	)

136 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

138 
	#__libc_lock_uÆock_»cursive
(
NAME
) \

140 ià(--(
NAME
).
út
 == 0) \

142 (
NAME
).
owÃr
 = 
NULL
; \

143 
	`Îl_uÆock
 ((
NAME
).
lock
, 
LLL_PRIVATE
); \

145 } 0)

	)

147 
	#__libc_lock_uÆock_»cursive
(
NAME
) \

148 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_uÆock
, (&(
NAME
).
mu‹x
), 0)

	)

155 
_±h»ad_ş—nup_push_deãr
 (
_±h»ad_ş—nup_bufãr
 *
bufãr
,

156 (*
routše
è(*), *
¬g
);

157 
	`_±h»ad_ş—nup_pİ_»¡Üe
 (
_±h»ad_ş—nup_bufãr
 *
bufãr
,

158 
execu‹
);

161 
	#__libc_ş—nup_»giÚ_¡¬t
(
DOIT
, 
FCT
, 
ARG
) \

162 { 
_±h»ad_ş—nup_bufãr
 
_bufãr
; \

163 
_ava
; \

164 ià(
DOIT
) { \

165 
_ava
 = 
	`PTFAVAIL
 (
_±h»ad_ş—nup_push_deãr
); \

166 ià(
_ava
) { \

167 
	`__libc_±f_ÿÎ_®ways
 (
_±h»ad_ş—nup_push_deãr
, (&
_bufãr
, 
FCT
, \

168 
ARG
)); \

170 
_bufãr
.
__routše
 = (
FCT
); \

171 
_bufãr
.
__¬g
 = (
ARG
); \

174 
_ava
 = 0; \

175 }

	)

178 
	#__libc_ş—nup_»giÚ_’d
(
DOIT
) \

179 ià(
_ava
) { \

180 
	`__libc_±f_ÿÎ_®ways
 (
_±h»ad_ş—nup_pİ_»¡Üe
, (&
_bufãr
, 
DOIT
));\

181 } ià(
DOIT
) \

182 
_bufãr
.
	`__routše
 (_bufãr.
__¬g
); \

183 
	}

	)
}

188 #ifdeà
_LIBC


189 
	~"libc-lockP.h
"

	@/usr/include/bits/timex.h

18 #iâdef 
_BITS_TIMEX_H


19 
	#_BITS_TIMEX_H
 1

	)

21 
	~<b™s/ty³s.h
>

25 
	stimex


27 
	mmodes
;

28 
__sysÿÎ_¦Úg_t
 
	moff£t
;

29 
__sysÿÎ_¦Úg_t
 
	mäeq
;

30 
__sysÿÎ_¦Úg_t
 
	mmax”rÜ
;

31 
__sysÿÎ_¦Úg_t
 
	me¡”rÜ
;

32 
	m¡©us
;

33 
__sysÿÎ_¦Úg_t
 
	mcÚ¡ªt
;

34 
__sysÿÎ_¦Úg_t
 
	m´ecisiÚ
;

35 
__sysÿÎ_¦Úg_t
 
	mtŞ”ªû
;

36 
timev®
 
	mtime
;

37 
__sysÿÎ_¦Úg_t
 
	mtick
;

38 
__sysÿÎ_¦Úg_t
 
	mµsäeq
;

39 
__sysÿÎ_¦Úg_t
 
	mj™‹r
;

40 
	mshiá
;

41 
__sysÿÎ_¦Úg_t
 
	m¡ab
;

42 
__sysÿÎ_¦Úg_t
 
	mj™út
;

43 
__sysÿÎ_¦Úg_t
 
	mÿlút
;

44 
__sysÿÎ_¦Úg_t
 
	m”rút
;

45 
__sysÿÎ_¦Úg_t
 
	m¡bút
;

47 
	mi
;

56 
	#ADJ_OFFSET
 0x0001

	)

57 
	#ADJ_FREQUENCY
 0x0002

	)

58 
	#ADJ_MAXERROR
 0x0004

	)

59 
	#ADJ_ESTERROR
 0x0008

	)

60 
	#ADJ_STATUS
 0x0010

	)

61 
	#ADJ_TIMECONST
 0x0020

	)

62 
	#ADJ_TAI
 0x0080

	)

63 
	#ADJ_MICRO
 0x1000

	)

64 
	#ADJ_NANO
 0x2000

	)

65 
	#ADJ_TICK
 0x4000

	)

66 
	#ADJ_OFFSET_SINGLESHOT
 0x8001

	)

67 
	#ADJ_OFFSET_SS_READ
 0xa001

	)

70 
	#MOD_OFFSET
 
ADJ_OFFSET


	)

71 
	#MOD_FREQUENCY
 
ADJ_FREQUENCY


	)

72 
	#MOD_MAXERROR
 
ADJ_MAXERROR


	)

73 
	#MOD_ESTERROR
 
ADJ_ESTERROR


	)

74 
	#MOD_STATUS
 
ADJ_STATUS


	)

75 
	#MOD_TIMECONST
 
ADJ_TIMECONST


	)

76 
	#MOD_CLKB
 
ADJ_TICK


	)

77 
	#MOD_CLKA
 
ADJ_OFFSET_SINGLESHOT


	)

78 
	#MOD_TAI
 
ADJ_TAI


	)

79 
	#MOD_MICRO
 
ADJ_MICRO


	)

80 
	#MOD_NANO
 
ADJ_NANO


	)

84 
	#STA_PLL
 0x0001

	)

85 
	#STA_PPSFREQ
 0x0002

	)

86 
	#STA_PPSTIME
 0x0004

	)

87 
	#STA_FLL
 0x0008

	)

89 
	#STA_INS
 0x0010

	)

90 
	#STA_DEL
 0x0020

	)

91 
	#STA_UNSYNC
 0x0040

	)

92 
	#STA_FREQHOLD
 0x0080

	)

94 
	#STA_PPSSIGNAL
 0x0100

	)

95 
	#STA_PPSJITTER
 0x0200

	)

96 
	#STA_PPSWANDER
 0x0400

	)

97 
	#STA_PPSERROR
 0x0800

	)

99 
	#STA_CLOCKERR
 0x1000

	)

100 
	#STA_NANO
 0x2000

	)

101 
	#STA_MODE
 0x4000

	)

102 
	#STA_CLK
 0x8000

	)

105 
	#STA_RONLY
 (
STA_PPSSIGNAL
 | 
STA_PPSJITTER
 | 
STA_PPSWANDER
 | \

106 
STA_PPSERROR
 | 
STA_CLOCKERR
 | 
STA_NANO
 | 
STA_MODE
 | 
STA_CLK
)

	)

	@/usr/include/bits/uio.h

18 #ià!
defšed
 
_SYS_UIO_H
 && !defšed 
_FCNTL_H


22 #iâdeà
_BITS_UIO_H


23 
	#_BITS_UIO_H
 1

	)

25 
	~<sys/ty³s.h
>

39 
	#UIO_MAXIOV
 1024

	)

43 
	siovec


45 *
	miov_ba£
;

46 
size_t
 
	miov_Ën
;

52 #ifdeà
__USE_GNU


53 #ià
defšed
 
_SYS_UIO_H
 && !defšed 
_BITS_UIO_H_FOR_SYS_UIO_H


54 
	#_BITS_UIO_H_FOR_SYS_UIO_H
 1

	)

56 
__BEGIN_DECLS


59 
ssize_t
 
	$´oûss_vm_»adv
 (
pid_t
 
__pid
, cÚ¡ 
iovec
 *
__lvec
,

60 
__liovút
,

61 cÚ¡ 
iovec
 *
__rvec
,

62 
__riovút
,

63 
__æags
)

64 
__THROW
;

67 
ssize_t
 
	$´oûss_vm_wr™ev
 (
pid_t
 
__pid
, cÚ¡ 
iovec
 *
__lvec
,

68 
__liovút
,

69 cÚ¡ 
iovec
 *
__rvec
,

70 
__riovút
,

71 
__æags
)

72 
__THROW
;

74 
__END_DECLS


	@/usr/include/gconv.h

22 #iâdeà
_GCONV_H


23 
	#_GCONV_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	#__Ãed_mb¡©e_t


	)

27 
	#__Ãed_wšt_t


	)

28 
	~<wch¬.h
>

29 
	#__Ãed_size_t


	)

30 
	#__Ãed_wch¬_t


	)

31 
	~<¡ddef.h
>

34 
	#__UNKNOWN_10646_CHAR
 ((
wch¬_t
è0xfffd)

	)

39 
	m__GCONV_OK
 = 0,

40 
	m__GCONV_NOCONV
,

41 
	m__GCONV_NODB
,

42 
	m__GCONV_NOMEM
,

44 
	m__GCONV_EMPTY_INPUT
,

45 
	m__GCONV_FULL_OUTPUT
,

46 
	m__GCONV_ILLEGAL_INPUT
,

47 
	m__GCONV_INCOMPLETE_INPUT
,

49 
	m__GCONV_ILLEGAL_DESCRIPTOR
,

50 
	m__GCONV_INTERNAL_ERROR


57 
	m__GCONV_IS_LAST
 = 0x0001,

58 
	m__GCONV_IGNORE_ERRORS
 = 0x0002,

59 
	m__GCONV_SWAP
 = 0x0004

64 
	g__gcÚv_¡•
;

65 
	g__gcÚv_¡•_d©a
;

66 
	g__gcÚv_lßded_objeù
;

67 
	g__gcÚv_Œªs_d©a
;

71 (*
	t__gcÚv_fù
è(
	t__gcÚv_¡•
 *, 
	t__gcÚv_¡•_d©a
 *,

73 **, 
	tsize_t
 *, , );

76 
	$wšt_t
 (*
	t__gcÚv_btowc_fù
è(
	t__gcÚv_¡•
 *, );

79 (*
	t__gcÚv_š™_fù
è(
	t__gcÚv_¡•
 *);

80 (*
	t__gcÚv_’d_fù
è(
	t__gcÚv_¡•
 *);

84 (*
	t__gcÚv_Œªs_fù
è(
	t__gcÚv_¡•
 *,

85 
	t__gcÚv_¡•_d©a
 *, *,

89 
	tsize_t
 *);

92 (*
	t__gcÚv_Œªs_cÚ‹xt_fù
) (*, const *,

97 (*
	t__gcÚv_Œªs_qu”y_fù
) (const *, const ***,

98 
	tsize_t
 *);

101 (*
	t__gcÚv_Œªs_š™_fù
) (**, const *);

102 (*
	t__gcÚv_Œªs_’d_fù
) (*);

104 
	s__gcÚv_Œªs_d©a


107 
__gcÚv_Œªs_fù
 
__Œªs_fù
;

108 
__gcÚv_Œªs_cÚ‹xt_fù
 
__Œªs_cÚ‹xt_fù
;

109 
__gcÚv_Œªs_’d_fù
 
__Œªs_’d_fù
;

110 *
__d©a
;

111 
__gcÚv_Œªs_d©a
 *
__Ãxt
;

116 
	s__gcÚv_¡•


118 
__gcÚv_lßded_objeù
 *
__shlib_hªdË
;

119 cÚ¡ *
__modÇme
;

121 
__couÁ”
;

123 *
__äom_Çme
;

124 *
__to_Çme
;

126 
__gcÚv_fù
 
__fù
;

127 
__gcÚv_btowc_fù
 
__btowc_fù
;

128 
__gcÚv_š™_fù
 
__š™_fù
;

129 
__gcÚv_’d_fù
 
__’d_fù
;

133 
__mš_Ãeded_äom
;

134 
__max_Ãeded_äom
;

135 
__mš_Ãeded_to
;

136 
__max_Ãeded_to
;

139 
__¡©eful
;

141 *
__d©a
;

146 
	s__gcÚv_¡•_d©a


148 *
__outbuf
;

149 *
__outbuãnd
;

153 
__æags
;

157 
__švoÿtiÚ_couÁ”
;

161 
__š‹º®_u£
;

163 
__mb¡©e_t
 *
__¡©•
;

164 
__mb¡©e_t
 
__¡©e
;

168 
__gcÚv_Œªs_d©a
 *
__Œªs
;

173 
	s__gcÚv_šfo


175 
size_t
 
__n¡•s
;

176 
__gcÚv_¡•
 *
__¡•s
;

177 
__ex‹nsiÚ__
 
__gcÚv_¡•_d©a
 
__d©a
 
__æex¬r
;

178 } *
	t__gcÚv_t
;

	@/usr/include/gnu/stubs-32.h

6 #ifdeà
_LIBC


7 #”rÜ 
AµliÿtiÚs
 
may
 
nÙ
 
defše
 
the
 
maüo
 
_LIBC


10 
	#__¡ub_chæags


	)

11 
	#__¡ub_ç‰ach


	)

12 
	#__¡ub_fchæags


	)

13 
	#__¡ub_fd‘ach


	)

14 
	#__¡ub_g‰y


	)

15 
	#__¡ub_lchmod


	)

16 
	#__¡ub_»voke


	)

17 
	#__¡ub_£ogš


	)

18 
	#__¡ub_sig»tuº


	)

19 
	#__¡ub_s¡k


	)

20 
	#__¡ub_¡ty


	)

	@/usr/include/gnu/stubs-64.h

6 #ifdeà
_LIBC


7 #”rÜ 
AµliÿtiÚs
 
may
 
nÙ
 
defše
 
the
 
maüo
 
_LIBC


10 
	#__¡ub_bdæush


	)

11 
	#__¡ub_chæags


	)

12 
	#__¡ub_ç‰ach


	)

13 
	#__¡ub_fchæags


	)

14 
	#__¡ub_fd‘ach


	)

15 
	#__¡ub_g‘msg


	)

16 
	#__¡ub_g‰y


	)

17 
	#__¡ub_lchmod


	)

18 
	#__¡ub_putmsg


	)

19 
	#__¡ub_»voke


	)

20 
	#__¡ub_£ogš


	)

21 
	#__¡ub_sig»tuº


	)

22 
	#__¡ub_s¡k


	)

23 
	#__¡ub_¡ty


	)

	@/usr/include/gnu/stubs-x32.h

6 #ifdeà
_LIBC


7 #”rÜ 
AµliÿtiÚs
 
may
 
nÙ
 
defše
 
the
 
maüo
 
_LIBC


10 
	#__¡ub_bdæush


	)

11 
	#__¡ub_chæags


	)

12 
	#__¡ub_ü—‹_moduË


	)

13 
	#__¡ub_ç‰ach


	)

14 
	#__¡ub_fchæags


	)

15 
	#__¡ub_fd‘ach


	)

16 
	#__¡ub_g‘_k”Ãl_syms


	)

17 
	#__¡ub_g‘msg


	)

18 
	#__¡ub_g‰y


	)

19 
	#__¡ub_lchmod


	)

20 
	#__¡ub_nfs£rvùl


	)

21 
	#__¡ub_putmsg


	)

22 
	#__¡ub_qu”y_moduË


	)

23 
	#__¡ub_»voke


	)

24 
	#__¡ub_£ogš


	)

25 
	#__¡ub_sig»tuº


	)

26 
	#__¡ub_s¡k


	)

27 
	#__¡ub_¡ty


	)

28 
	#__¡ub_u£lib


	)

	@/usr/include/wchar.h

23 #iâdeà
_WCHAR_H


25 #ià!
defšed
 
__Ãed_mb¡©e_t
 && !defšed 
__Ãed_wšt_t


26 
	#_WCHAR_H
 1

	)

27 
	~<ã©u»s.h
>

30 #ifdeà
_WCHAR_H


32 
	#__Ãed___FILE


	)

33 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


34 
	#__Ãed_FILE


	)

36 
	~<¡dio.h
>

38 
	#__Ãed___va_li¡


	)

39 
	~<¡d¬g.h
>

41 
	~<b™s/wch¬.h
>

44 
	#__Ãed_size_t


	)

45 
	#__Ãed_wch¬_t


	)

46 
	#__Ãed_NULL


	)

48 #ià
defšed
 
_WCHAR_H
 || defšed 
__Ãed_wšt_t
 || !defšed 
__WINT_TYPE__


49 #undeà
__Ãed_wšt_t


50 
	#__Ãed_wšt_t


	)

51 
	~<¡ddef.h
>

55 #iâdeà
_WINT_T


60 
	#_WINT_T


	)

61 
	twšt_t
;

65 #ià
defšed
 
__ılu¥lus
 && defšed 
_GLIBCPP_USE_NAMESPACES
 \

66 && 
defšed
 
__WINT_TYPE__


67 
__BEGIN_NAMESPACE_STD


68 
__WINT_TYPE__
 
	twšt_t
;

69 
	g__END_NAMESPACE_STD


74 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (4, 4)

75 
	#__CORRECT_ISO_CPP_WCHAR_H_PROTO


	)

79 #ià(
defšed
 
_WCHAR_H
 || defšed 
__Ãed_mb¡©e_t
è&& !defšed 
____mb¡©e_t_defšed


80 
	#____mb¡©e_t_defšed
 1

	)

84 
	m__couÁ
;

87 #ifdeà
__WINT_TYPE__


88 
__WINT_TYPE__
 
	m__wch
;

90 
wšt_t
 
	m__wch
;

92 
	m__wchb
[4];

93 } 
	m__v®ue
;

94 } 
	t__mb¡©e_t
;

96 #undeà
__Ãed_mb¡©e_t


101 #ifdeà
_WCHAR_H


103 #iâdeà
__mb¡©e_t_defšed


104 
__BEGIN_NAMESPACE_C99


106 
__mb¡©e_t
 
	tmb¡©e_t
;

107 
	g__END_NAMESPACE_C99


108 
	#__mb¡©e_t_defšed
 1

	)

111 #ifdeà
__USE_GNU


112 
	$__USING_NAMESPACE_C99
(
mb¡©e_t
)

115 #iâdeà
WCHAR_MIN


117 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

118 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

121 #iâdeà
WEOF


122 
	#WEOF
 (0xffffffffu)

	)

127 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_UNIX98


128 
	~<wùy³.h
>

132 
__BEGIN_DECLS


134 
__BEGIN_NAMESPACE_STD


137 
tm
;

138 
__END_NAMESPACE_STD


142 
	$__USING_NAMESPACE_STD
(
tm
)

145 
__BEGIN_NAMESPACE_STD


147 
wch¬_t
 *
	$wcsıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

148 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

150 
wch¬_t
 *
	$wc¢ıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

151 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

152 
__THROW
;

155 
wch¬_t
 *
	$wcsÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

156 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

158 
wch¬_t
 *
	$wc¢ÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

159 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

160 
__THROW
;

163 
	$wcscmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
)

164 
__THROW
 
__©Œibu‹_pu»__
;

166 
	$wc¢cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

167 
__THROW
 
__©Œibu‹_pu»__
;

168 
__END_NAMESPACE_STD


170 #ifdeà
__USE_XOPEN2K8


172 
	$wcsÿ£cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

175 
	$wc¢ÿ£cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

176 
size_t
 
__n
è
__THROW
;

180 
	~<xloÿË.h
>

182 
	$wcsÿ£cmp_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

183 
__loÿË_t
 
__loc
è
__THROW
;

185 
	$wc¢ÿ£cmp_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

186 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

189 
__BEGIN_NAMESPACE_STD


192 
	$wcscŞl
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

196 
size_t
 
	$wcsxäm
 (
wch¬_t
 *
__»¡riù
 
__s1
,

197 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

198 
__END_NAMESPACE_STD


200 #ifdeà
__USE_XOPEN2K8


206 
	$wcscŞl_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

207 
__loÿË_t
 
__loc
è
__THROW
;

212 
size_t
 
	$wcsxäm_l
 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

213 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

216 
wch¬_t
 *
	$wcsdup
 (cÚ¡ 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_m®loc__
;

219 
__BEGIN_NAMESPACE_STD


221 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


222 "C++" 
wch¬_t
 *
	$wcschr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

223 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

224 "C++" cÚ¡ 
wch¬_t
 *
	$wcschr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

225 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

227 
wch¬_t
 *
	$wcschr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

228 
__THROW
 
__©Œibu‹_pu»__
;

231 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


232 "C++" 
wch¬_t
 *
	$wc¤chr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

233 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

234 "C++" cÚ¡ 
wch¬_t
 *
	$wc¤chr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

235 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

237 
wch¬_t
 *
	$wc¤chr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

238 
__THROW
 
__©Œibu‹_pu»__
;

240 
__END_NAMESPACE_STD


242 #ifdeà
__USE_GNU


245 
wch¬_t
 *
	$wcschºul
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__wc
)

246 
__THROW
 
__©Œibu‹_pu»__
;

249 
__BEGIN_NAMESPACE_STD


252 
size_t
 
	$wcsc¥n
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__»jeù
)

253 
__THROW
 
__©Œibu‹_pu»__
;

256 
size_t
 
	$wcs¥n
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

257 
__THROW
 
__©Œibu‹_pu»__
;

259 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


260 "C++" 
wch¬_t
 *
	$wc¥brk
 (
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

261 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

262 "C++" cÚ¡ 
wch¬_t
 *
	$wc¥brk
 (cÚ¡ 
wch¬_t
 *
__wcs
,

263 cÚ¡ 
wch¬_t
 *
__acû±
)

264 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

266 
wch¬_t
 *
	$wc¥brk
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

267 
__THROW
 
__©Œibu‹_pu»__
;

270 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


271 "C++" 
wch¬_t
 *
	$wcs¡r
 (
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

272 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

273 "C++" cÚ¡ 
wch¬_t
 *
	$wcs¡r
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
,

274 cÚ¡ 
wch¬_t
 *
__ÃedË
)

275 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

277 
wch¬_t
 *
	$wcs¡r
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

278 
__THROW
 
__©Œibu‹_pu»__
;

282 
wch¬_t
 *
	$wc¡ok
 (
wch¬_t
 *
__»¡riù
 
__s
,

283 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__d–im
,

284 
wch¬_t
 **
__»¡riù
 
__±r
è
__THROW
;

287 
size_t
 
	$wc¦’
 (cÚ¡ 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_pu»__
;

288 
__END_NAMESPACE_STD


290 #ifdeà
__USE_XOPEN


292 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


293 "C++" 
wch¬_t
 *
	$wcswcs
 (
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

294 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

295 "C++" cÚ¡ 
wch¬_t
 *
	$wcswcs
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
,

296 cÚ¡ 
wch¬_t
 *
__ÃedË
)

297 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

299 
wch¬_t
 *
	$wcswcs
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

300 
__THROW
 
__©Œibu‹_pu»__
;

304 #ifdeà
__USE_XOPEN2K8


306 
size_t
 
	$wc¢Ën
 (cÚ¡ 
wch¬_t
 *
__s
, 
size_t
 
__maxËn
)

307 
__THROW
 
__©Œibu‹_pu»__
;

311 
__BEGIN_NAMESPACE_STD


313 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


314 "C++" 
wch¬_t
 *
	$wmemchr
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

315 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

316 "C++" cÚ¡ 
wch¬_t
 *
	$wmemchr
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__c
,

317 
size_t
 
__n
)

318 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

320 
wch¬_t
 *
	$wmemchr
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

321 
__THROW
 
__©Œibu‹_pu»__
;

325 
	$wmemcmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

326 
__THROW
 
__©Œibu‹_pu»__
;

329 
wch¬_t
 *
	$wmemıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

330 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

334 
wch¬_t
 *
	$wmemmove
 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

335 
__THROW
;

338 
wch¬_t
 *
	$wmem£t
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
è
__THROW
;

339 
__END_NAMESPACE_STD


341 #ifdeà
__USE_GNU


344 
wch¬_t
 *
	$wmempıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

345 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
)

346 
__THROW
;

350 
__BEGIN_NAMESPACE_STD


353 
wšt_t
 
	$btowc
 (
__c
è
__THROW
;

357 
	$wùob
 (
wšt_t
 
__c
è
__THROW
;

361 
	$mbsš™
 (cÚ¡ 
mb¡©e_t
 *
__ps
è
__THROW
 
__©Œibu‹_pu»__
;

365 
size_t
 
	$mb¹owc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

366 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

367 
mb¡©e_t
 *
__»¡riù
 
__p
è
__THROW
;

370 
size_t
 
	$wütomb
 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wc
,

371 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

374 
size_t
 
	$__mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

375 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

376 
size_t
 
	$mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

377 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

378 
__END_NAMESPACE_STD


380 #ifdeà
__USE_EXTERN_INLINES


386 
wšt_t
 
	$__btowc_®Ÿs
 (
__c
è
	`__asm
 ("btowc");

387 
__ex‹º_šlše
 
wšt_t


388 
	`__NTH
 (
	$btowc
 (
__c
))

389 {  (
	`__butš_cÚ¡ªt_p
 (
__c
) && __c >= '\0' && __c <= '\x7f'

390 ? (
wšt_t
è
__c
 : 
	`__btowc_®Ÿs
 (__c)); 
	}
}

392 
	$__wùob_®Ÿs
 (
wšt_t
 
__c
è
	`__asm
 ("wctob");

393 
__ex‹º_šlše
 

394 
	`__NTH
 (
	$wùob
 (
wšt_t
 
__wc
))

395 {  (
	`__butš_cÚ¡ªt_p
 (
__wc
è&& __wø>ğ
L
'\0' && __wc <= L'\x7f'

396 ? (è
__wc
 : 
	`__wùob_®Ÿs
 (__wc)); 
	}
}

398 
__ex‹º_šlše
 
size_t


399 
__NTH
 (
	$mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

400 
mb¡©e_t
 *
__»¡riù
 
__ps
))

401 {  (
__ps
 !ğ
NULL


402 ? 
	`mb¹owc
 (
NULL
, 
__s
, 
__n
, 
__ps
è: 
	`__mb¾’
 (__s, __n, NULL)); 
	}
}

405 
__BEGIN_NAMESPACE_STD


408 
size_t
 
	$mb¤towcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

409 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

410 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

414 
size_t
 
	$wc¤tombs
 (*
__»¡riù
 
__d¡
,

415 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

416 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

417 
__END_NAMESPACE_STD


420 #ifdef 
__USE_XOPEN2K8


423 
size_t
 
	$mb¢¹owcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

424 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

425 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

429 
size_t
 
	$wc¢¹ombs
 (*
__»¡riù
 
__d¡
,

430 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
,

431 
size_t
 
__nwc
, size_ˆ
__Ën
,

432 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

437 #ifdeà
__USE_XOPEN


439 
	$wcwidth
 (
wch¬_t
 
__c
è
__THROW
;

443 
	$wcswidth
 (cÚ¡ 
wch¬_t
 *
__s
, 
size_t
 
__n
è
__THROW
;

447 
__BEGIN_NAMESPACE_STD


450 
	$wc¡od
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

451 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

452 
__END_NAMESPACE_STD


454 #ifdeà
__USE_ISOC99


455 
__BEGIN_NAMESPACE_C99


457 
	$wc¡of
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

458 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

459 
	$wc¡Şd
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

460 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

461 
__END_NAMESPACE_C99


465 
__BEGIN_NAMESPACE_STD


468 
	$wc¡Ş
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

469 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
è
__THROW
;

473 
	$wc¡oul
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

474 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

475 
__THROW
;

476 
__END_NAMESPACE_STD


478 #ifdeà
__USE_ISOC99


479 
__BEGIN_NAMESPACE_C99


482 
__ex‹nsiÚ__


483 
	$wc¡Şl
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

484 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

485 
__THROW
;

489 
__ex‹nsiÚ__


490 
	$wc¡ouÎ
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

491 
wch¬_t
 **
__»¡riù
 
__’d±r
,

492 
__ba£
è
__THROW
;

493 
__END_NAMESPACE_C99


496 #ifdeà
__USE_GNU


499 
__ex‹nsiÚ__


500 
	$wc¡oq
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

501 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

502 
__THROW
;

506 
__ex‹nsiÚ__


507 
	$wc¡ouq
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

508 
wch¬_t
 **
__»¡riù
 
__’d±r
,

509 
__ba£
è
__THROW
;

512 #ifdeà
__USE_GNU


526 
	~<xloÿË.h
>

530 
	$wc¡Ş_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

531 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
,

532 
__loÿË_t
 
__loc
è
__THROW
;

534 
	$wc¡oul_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

535 
wch¬_t
 **
__»¡riù
 
__’d±r
,

536 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

538 
__ex‹nsiÚ__


539 
	$wc¡Şl_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

540 
wch¬_t
 **
__»¡riù
 
__’d±r
,

541 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

543 
__ex‹nsiÚ__


544 
	$wc¡ouÎ_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

545 
wch¬_t
 **
__»¡riù
 
__’d±r
,

546 
__ba£
, 
__loÿË_t
 
__loc
)

547 
__THROW
;

549 
	$wc¡od_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

550 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

551 
__THROW
;

553 
	$wc¡of_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

554 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

555 
__THROW
;

557 
	$wc¡Şd_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

558 
wch¬_t
 **
__»¡riù
 
__’d±r
,

559 
__loÿË_t
 
__loc
è
__THROW
;

563 #ifdeà
__USE_XOPEN2K8


566 
wch¬_t
 *
	$wııy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

567 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

571 
wch¬_t
 *
	$wınıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

572 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

573 
__THROW
;

580 
__FILE
 *
	$İ’_wmem¡»am
 (
wch¬_t
 **
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
;

583 #ià
defšed
 
__USE_ISOC95
 || defšed 
__USE_UNIX98


584 
__BEGIN_NAMESPACE_STD


587 
	$fwide
 (
__FILE
 *
__å
, 
__mode
è
__THROW
;

594 
	`fw´štf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

595 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

601 
	`w´štf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

604 
	$sw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

605 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

606 
__THROW
 ;

612 
	`vfw´štf
 (
__FILE
 *
__»¡riù
 
__s
,

613 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

614 
__gnuc_va_li¡
 
__¬g
)

620 
	`vw´štf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

621 
__gnuc_va_li¡
 
__¬g
)

625 
	$vsw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

626 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

627 
__gnuc_va_li¡
 
__¬g
)

628 
__THROW
 ;

635 
	`fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

636 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

642 
	`wsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

645 
	$swsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

646 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

647 
__THROW
 ;

649 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

650 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

651 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

652 #ifdeà
__REDIRECT


656 
	`__REDIRECT
 (
fwsÿnf
, (
__FILE
 *
__»¡riù
 
__¡»am
,

657 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

658 
__isoc99_fwsÿnf
)

660 
	`__REDIRECT
 (
wsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

661 
__isoc99_wsÿnf
)

663 
	`__REDIRECT_NTH
 (
swsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

664 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

665 ...), 
__isoc99_swsÿnf
)

668 
	`__isoc99_fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

669 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

670 
	`__isoc99_wsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

671 
	$__isoc99_swsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

672 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

673 
__THROW
;

674 
	#fwsÿnf
 
__isoc99_fwsÿnf


	)

675 
	#wsÿnf
 
__isoc99_wsÿnf


	)

676 
	#swsÿnf
 
__isoc99_swsÿnf


	)

680 
__END_NAMESPACE_STD


683 #ifdeà
__USE_ISOC99


684 
__BEGIN_NAMESPACE_C99


689 
	`vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

690 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

691 
__gnuc_va_li¡
 
__¬g
)

697 
	`vwsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

698 
__gnuc_va_li¡
 
__¬g
)

701 
	$vswsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

702 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

703 
__gnuc_va_li¡
 
__¬g
)

704 
__THROW
 ;

706 #ià!
defšed
 
__USE_GNU
 \

707 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

708 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

709 #ifdeà
__REDIRECT


710 
	`__REDIRECT
 (
vfwsÿnf
, (
__FILE
 *
__»¡riù
 
__s
,

711 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

712 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vfwsÿnf
)

714 
	`__REDIRECT
 (
vwsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

715 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vwsÿnf
)

717 
	`__REDIRECT_NTH
 (
vswsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

718 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

719 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vswsÿnf
)

722 
	`__isoc99_vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

723 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

724 
__gnuc_va_li¡
 
__¬g
);

725 
	`__isoc99_vwsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

726 
__gnuc_va_li¡
 
__¬g
);

727 
	$__isoc99_vswsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

728 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

729 
__gnuc_va_li¡
 
__¬g
è
__THROW
;

730 
	#vfwsÿnf
 
__isoc99_vfwsÿnf


	)

731 
	#vwsÿnf
 
__isoc99_vwsÿnf


	)

732 
	#vswsÿnf
 
__isoc99_vswsÿnf


	)

736 
__END_NAMESPACE_C99


740 
__BEGIN_NAMESPACE_STD


745 
wšt_t
 
	`fg‘wc
 (
__FILE
 *
__¡»am
);

746 
wšt_t
 
	`g‘wc
 (
__FILE
 *
__¡»am
);

752 
wšt_t
 
	`g‘wch¬
 ();

759 
wšt_t
 
	`åutwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

760 
wšt_t
 
	`putwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

766 
wšt_t
 
	`putwch¬
 (
wch¬_t
 
__wc
);

774 
wch¬_t
 *
	`fg‘ws
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

775 
__FILE
 *
__»¡riù
 
__¡»am
);

781 
	`åutws
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ws
,

782 
__FILE
 *
__»¡riù
 
__¡»am
);

789 
wšt_t
 
	`ung‘wc
 (wšt_ˆ
__wc
, 
__FILE
 *
__¡»am
);

790 
__END_NAMESPACE_STD


793 #ifdeà
__USE_GNU


801 
wšt_t
 
	`g‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

802 
wšt_t
 
	`g‘wch¬_uÆocked
 ();

810 
wšt_t
 
	`fg‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

818 
wšt_t
 
	`åutwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

827 
wšt_t
 
	`putwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

828 
wšt_t
 
	`putwch¬_uÆocked
 (
wch¬_t
 
__wc
);

837 
wch¬_t
 *
	`fg‘ws_uÆocked
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

838 
__FILE
 *
__»¡riù
 
__¡»am
);

846 
	`åutws_uÆocked
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ws
,

847 
__FILE
 *
__»¡riù
 
__¡»am
);

851 
__BEGIN_NAMESPACE_C99


855 
size_t
 
	$wcsáime
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

856 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

857 cÚ¡ 
tm
 *
__»¡riù
 
__
è
__THROW
;

858 
__END_NAMESPACE_C99


860 #ifdeà
__USE_GNU


861 
	~<xloÿË.h
>

865 
size_t
 
	$wcsáime_l
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

866 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

867 cÚ¡ 
tm
 *
__»¡riù
 
__
,

868 
__loÿË_t
 
__loc
è
__THROW
;

877 #ià
defšed
 
__USE_UNIX98
 && !defšed 
__USE_GNU


878 
	#__Ãed_iswxxx


	)

879 
	~<wùy³.h
>

883 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


884 
	~<b™s/wch¬2.h
>

887 #ifdeà
__LDBL_COMPAT


888 
	~<b™s/wch¬-ldbl.h
>

891 
__END_DECLS


899 #undeà
__Ãed_mb¡©e_t


900 #undeà
__Ãed_wšt_t


	@/usr/include/asm-generic/errno.h

1 #iâdeà
_ASM_GENERIC_ERRNO_H


2 
	#_ASM_GENERIC_ERRNO_H


	)

4 
	~<asm-g’”ic/”ºo-ba£.h
>

6 
	#EDEADLK
 35

	)

7 
	#ENAMETOOLONG
 36

	)

8 
	#ENOLCK
 37

	)

9 
	#ENOSYS
 38

	)

10 
	#ENOTEMPTY
 39

	)

11 
	#ELOOP
 40

	)

12 
	#EWOULDBLOCK
 
EAGAIN


	)

13 
	#ENOMSG
 42

	)

14 
	#EIDRM
 43

	)

15 
	#ECHRNG
 44

	)

16 
	#EL2NSYNC
 45

	)

17 
	#EL3HLT
 46

	)

18 
	#EL3RST
 47

	)

19 
	#ELNRNG
 48

	)

20 
	#EUNATCH
 49

	)

21 
	#ENOCSI
 50

	)

22 
	#EL2HLT
 51

	)

23 
	#EBADE
 52

	)

24 
	#EBADR
 53

	)

25 
	#EXFULL
 54

	)

26 
	#ENOANO
 55

	)

27 
	#EBADRQC
 56

	)

28 
	#EBADSLT
 57

	)

30 
	#EDEADLOCK
 
EDEADLK


	)

32 
	#EBFONT
 59

	)

33 
	#ENOSTR
 60

	)

34 
	#ENODATA
 61

	)

35 
	#ETIME
 62

	)

36 
	#ENOSR
 63

	)

37 
	#ENONET
 64

	)

38 
	#ENOPKG
 65

	)

39 
	#EREMOTE
 66

	)

40 
	#ENOLINK
 67

	)

41 
	#EADV
 68

	)

42 
	#ESRMNT
 69

	)

43 
	#ECOMM
 70

	)

44 
	#EPROTO
 71

	)

45 
	#EMULTIHOP
 72

	)

46 
	#EDOTDOT
 73

	)

47 
	#EBADMSG
 74

	)

48 
	#EOVERFLOW
 75

	)

49 
	#ENOTUNIQ
 76

	)

50 
	#EBADFD
 77

	)

51 
	#EREMCHG
 78

	)

52 
	#ELIBACC
 79

	)

53 
	#ELIBBAD
 80

	)

54 
	#ELIBSCN
 81

	)

55 
	#ELIBMAX
 82

	)

56 
	#ELIBEXEC
 83

	)

57 
	#EILSEQ
 84

	)

58 
	#ERESTART
 85

	)

59 
	#ESTRPIPE
 86

	)

60 
	#EUSERS
 87

	)

61 
	#ENOTSOCK
 88

	)

62 
	#EDESTADDRREQ
 89

	)

63 
	#EMSGSIZE
 90

	)

64 
	#EPROTOTYPE
 91

	)

65 
	#ENOPROTOOPT
 92

	)

66 
	#EPROTONOSUPPORT
 93

	)

67 
	#ESOCKTNOSUPPORT
 94

	)

68 
	#EOPNOTSUPP
 95

	)

69 
	#EPFNOSUPPORT
 96

	)

70 
	#EAFNOSUPPORT
 97

	)

71 
	#EADDRINUSE
 98

	)

72 
	#EADDRNOTAVAIL
 99

	)

73 
	#ENETDOWN
 100

	)

74 
	#ENETUNREACH
 101

	)

75 
	#ENETRESET
 102

	)

76 
	#ECONNABORTED
 103

	)

77 
	#ECONNRESET
 104

	)

78 
	#ENOBUFS
 105

	)

79 
	#EISCONN
 106

	)

80 
	#ENOTCONN
 107

	)

81 
	#ESHUTDOWN
 108

	)

82 
	#ETOOMANYREFS
 109

	)

83 
	#ETIMEDOUT
 110

	)

84 
	#ECONNREFUSED
 111

	)

85 
	#EHOSTDOWN
 112

	)

86 
	#EHOSTUNREACH
 113

	)

87 
	#EALREADY
 114

	)

88 
	#EINPROGRESS
 115

	)

89 
	#ESTALE
 116

	)

90 
	#EUCLEAN
 117

	)

91 
	#ENOTNAM
 118

	)

92 
	#ENAVAIL
 119

	)

93 
	#EISNAM
 120

	)

94 
	#EREMOTEIO
 121

	)

95 
	#EDQUOT
 122

	)

97 
	#ENOMEDIUM
 123

	)

98 
	#EMEDIUMTYPE
 124

	)

99 
	#ECANCELED
 125

	)

100 
	#ENOKEY
 126

	)

101 
	#EKEYEXPIRED
 127

	)

102 
	#EKEYREVOKED
 128

	)

103 
	#EKEYREJECTED
 129

	)

106 
	#EOWNERDEAD
 130

	)

107 
	#ENOTRECOVERABLE
 131

	)

109 
	#ERFKILL
 132

	)

111 
	#EHWPOISON
 133

	)

	@/usr/include/bits/wchar-ldbl.h

19 #iâdeà
_WCHAR_H


23 #ià
defšed
 
__USE_ISOC95
 || defšed 
__USE_UNIX98


24 
__BEGIN_NAMESPACE_C99


25 
__LDBL_REDIR_DECL
 (
fw´štf
);

26 
__LDBL_REDIR_DECL
 (
w´štf
);

27 
__LDBL_REDIR_DECL
 (
sw´štf
);

28 
__LDBL_REDIR_DECL
 (
vfw´štf
);

29 
__LDBL_REDIR_DECL
 (
vw´štf
);

30 
__LDBL_REDIR_DECL
 (
vsw´štf
);

31 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

32 && !
defšed
 
	g__REDIRECT
 \

33 && (
defšed
 
	g__STRICT_ANSI__
 || defšed 
	g__USE_XOPEN2K
)

34 
	$__LDBL_REDIR1_DECL
 (
fwsÿnf
, 
__Ædbl___isoc99_fwsÿnf
)

35 
	$__LDBL_REDIR1_DECL
 (
wsÿnf
, 
__Ædbl___isoc99_wsÿnf
)

36 
	$__LDBL_REDIR1_DECL
 (
swsÿnf
, 
__Ædbl___isoc99_swsÿnf
)

38 
	`__LDBL_REDIR_DECL
 (
fwsÿnf
);

39 
	`__LDBL_REDIR_DECL
 (
wsÿnf
);

40 
	`__LDBL_REDIR_DECL
 (
swsÿnf
);

42 
__END_NAMESPACE_C99


45 #ifdeà
__USE_ISOC99


46 
__BEGIN_NAMESPACE_C99


47 
	`__LDBL_REDIR1_DECL
 (
wc¡Şd
, 
wc¡od
);

48 #ià!
defšed
 
__USE_GNU
 && !defšed 
__REDIRECT
 \

49 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

50 
	$__LDBL_REDIR1_DECL
 (
vfwsÿnf
, 
__Ædbl___isoc99_vfwsÿnf
)

51 
	$__LDBL_REDIR1_DECL
 (
vwsÿnf
, 
__Ædbl___isoc99_vwsÿnf
)

52 
	$__LDBL_REDIR1_DECL
 (
vswsÿnf
, 
__Ædbl___isoc99_vswsÿnf
)

54 
	`__LDBL_REDIR_DECL
 (
vfwsÿnf
);

55 
	`__LDBL_REDIR_DECL
 (
vwsÿnf
);

56 
	`__LDBL_REDIR_DECL
 (
vswsÿnf
);

58 
__END_NAMESPACE_C99


61 #ifdeà
__USE_GNU


62 
	`__LDBL_REDIR1_DECL
 (
wc¡Şd_l
, 
wc¡od_l
);

65 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


66 
	$__LDBL_REDIR_DECL
 (
__sw´štf_chk
)

67 
	$__LDBL_REDIR_DECL
 (
__vsw´štf_chk
)

68 #ià
__USE_FORTIFY_LEVEL
 > 1

69 
	$__LDBL_REDIR_DECL
 (
__fw´štf_chk
)

70 
	$__LDBL_REDIR_DECL
 (
__w´štf_chk
)

71 
	$__LDBL_REDIR_DECL
 (
__vfw´štf_chk
)

72 
	$__LDBL_REDIR_DECL
 (
__vw´štf_chk
)

	@/usr/include/bits/wchar.h

19 #iâdeà
_BITS_WCHAR_H


20 
	#_BITS_WCHAR_H
 1

	)

33 #ifdeà
__WCHAR_MAX__


34 
	#__WCHAR_MAX
 
__WCHAR_MAX__


	)

35 #–ià
L
'\0' - 1 > 0

36 
	#__WCHAR_MAX
 (0xffffffffu + 
L
'\0')

	)

38 
	#__WCHAR_MAX
 (0x7ffffffà+ 
L
'\0')

	)

41 #ifdeà
__WCHAR_MIN__


42 
	#__WCHAR_MIN
 
__WCHAR_MIN__


	)

43 #–ià
L
'\0' - 1 > 0

44 
	#__WCHAR_MIN
 (
L
'\0' + 0)

	)

46 
	#__WCHAR_MIN
 (-
__WCHAR_MAX
 - 1)

	)

	@/usr/include/bits/wchar2.h

19 #iâdeà
_WCHAR_H


24 
wch¬_t
 *
	$__wmemıy_chk
 (
wch¬_t
 *
__»¡riù
 
__s1
,

25 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
,

26 
size_t
 
__ns1
è
__THROW
;

27 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmemıy_®Ÿs
,

28 (
wch¬_t
 *
__»¡riù
 
__s1
,

29 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
),

30 
wmemıy
);

31 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmemıy_chk_w¬n
,

32 (
wch¬_t
 *
__»¡riù
 
__s1
,

33 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
,

34 
size_t
 
__ns1
), 
__wmemıy_chk
)

35 
	`__w¬Ç‰r
 ("wmemcpy called with†ength biggerhan size of destination "

38 
__fÜtify_funùiÚ
 
wch¬_t
 *

39 
	`__NTH
 (
	$wmemıy
 (
wch¬_t
 *
__»¡riù
 
__s1
, cÚ¡ wch¬_ˆ*__»¡riù 
__s2
,

40 
size_t
 
__n
))

42 ià(
	`__bos0
 (
__s1
è!ğ(
size_t
) -1)

44 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

45  
	`__wmemıy_chk
 (
__s1
, 
__s2
, 
__n
,

46 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

48 ià(
__n
 > 
	`__bos0
 (
__s1
è/  (
wch¬_t
))

49  
	`__wmemıy_chk_w¬n
 (
__s1
, 
__s2
, 
__n
,

50 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

52  
	`__wmemıy_®Ÿs
 (
__s1
, 
__s2
, 
__n
);

53 
	}
}

56 
wch¬_t
 *
	$__wmemmove_chk
 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

57 
size_t
 
__n
, size_ˆ
__ns1
è
__THROW
;

58 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmemmove_®Ÿs
, (wch¬_ˆ*
__s1
,

59 cÚ¡ 
wch¬_t
 *
__s2
,

60 
size_t
 
__n
), 
wmemmove
);

61 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmemmove_chk_w¬n
,

62 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

63 
size_t
 
__n
, size_ˆ
__ns1
), 
__wmemmove_chk
)

64 
	`__w¬Ç‰r
 ("wmemmove called with†ength biggerhan size of destination "

67 
__fÜtify_funùiÚ
 
wch¬_t
 *

68 
	`__NTH
 (
	$wmemmove
 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
))

70 ià(
	`__bos0
 (
__s1
è!ğ(
size_t
) -1)

72 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

73  
	`__wmemmove_chk
 (
__s1
, 
__s2
, 
__n
,

74 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

76 ià(
__n
 > 
	`__bos0
 (
__s1
è/  (
wch¬_t
))

77  
	`__wmemmove_chk_w¬n
 (
__s1
, 
__s2
, 
__n
,

78 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

80  
	`__wmemmove_®Ÿs
 (
__s1
, 
__s2
, 
__n
);

81 
	}
}

84 #ifdeà
__USE_GNU


85 
wch¬_t
 *
	$__wmempıy_chk
 (
wch¬_t
 *
__»¡riù
 
__s1
,

86 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
,

87 
size_t
 
__ns1
è
__THROW
;

88 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmempıy_®Ÿs
,

89 (
wch¬_t
 *
__»¡riù
 
__s1
,

90 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
,

91 
size_t
 
__n
), 
wmempıy
);

92 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmempıy_chk_w¬n
,

93 (
wch¬_t
 *
__»¡riù
 
__s1
,

94 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
,

95 
size_t
 
__ns1
), 
__wmempıy_chk
)

96 
	`__w¬Ç‰r
 ("wmempcpy called with†ength biggerhan size of destination "

99 
__fÜtify_funùiÚ
 
wch¬_t
 *

100 
	`__NTH
 (
	$wmempıy
 (
wch¬_t
 *
__»¡riù
 
__s1
, cÚ¡ wch¬_ˆ*__»¡riù 
__s2
,

101 
size_t
 
__n
))

103 ià(
	`__bos0
 (
__s1
è!ğ(
size_t
) -1)

105 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

106  
	`__wmempıy_chk
 (
__s1
, 
__s2
, 
__n
,

107 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

109 ià(
__n
 > 
	`__bos0
 (
__s1
è/  (
wch¬_t
))

110  
	`__wmempıy_chk_w¬n
 (
__s1
, 
__s2
, 
__n
,

111 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

113  
	`__wmempıy_®Ÿs
 (
__s1
, 
__s2
, 
__n
);

114 
	}
}

118 
wch¬_t
 *
	$__wmem£t_chk
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
,

119 
size_t
 
__ns
è
__THROW
;

120 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmem£t_®Ÿs
, (wch¬_ˆ*
__s
, wch¬_ˆ
__c
,

121 
size_t
 
__n
), 
wmem£t
);

122 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmem£t_chk_w¬n
,

123 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
,

124 
size_t
 
__ns
), 
__wmem£t_chk
)

125 
	`__w¬Ç‰r
 ("wmemset called with†ength biggerhan size of destination "

128 
__fÜtify_funùiÚ
 
wch¬_t
 *

129 
	`__NTH
 (
	$wmem£t
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
))

131 ià(
	`__bos0
 (
__s
è!ğ(
size_t
) -1)

133 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

134  
	`__wmem£t_chk
 (
__s
, 
__c
, 
__n
, 
	`__bos0
 (__sè/  (
wch¬_t
));

136 ià(
__n
 > 
	`__bos0
 (
__s
è/  (
wch¬_t
))

137  
	`__wmem£t_chk_w¬n
 (
__s
, 
__c
, 
__n
,

138 
	`__bos0
 (
__s
è/  (
wch¬_t
));

140  
	`__wmem£t_®Ÿs
 (
__s
, 
__c
, 
__n
);

141 
	}
}

144 
wch¬_t
 *
	$__wcsıy_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

145 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

146 
size_t
 
__n
è
__THROW
;

147 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wcsıy_®Ÿs
,

148 (
wch¬_t
 *
__»¡riù
 
__de¡
,

149 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
), 
wcsıy
);

151 
__fÜtify_funùiÚ
 
wch¬_t
 *

152 
	`__NTH
 (
	$wcsıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
, cÚ¡ wch¬_ˆ*__»¡riù 
__¤c
))

154 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

155  
	`__wcsıy_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__de¡è/  (
wch¬_t
));

156  
	`__wcsıy_®Ÿs
 (
__de¡
, 
__¤c
);

157 
	}
}

160 
wch¬_t
 *
	$__wııy_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

161 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

162 
size_t
 
__de¡Ën
è
__THROW
;

163 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wııy_®Ÿs
,

164 (
wch¬_t
 *
__»¡riù
 
__de¡
,

165 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
), 
wııy
);

167 
__fÜtify_funùiÚ
 
wch¬_t
 *

168 
	`__NTH
 (
	$wııy
 (
wch¬_t
 *
__»¡riù
 
__de¡
, cÚ¡ wch¬_ˆ*__»¡riù 
__¤c
))

170 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

171  
	`__wııy_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__de¡è/  (
wch¬_t
));

172  
	`__wııy_®Ÿs
 (
__de¡
, 
__¤c
);

173 
	}
}

176 
wch¬_t
 *
	$__wc¢ıy_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

177 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
,

178 
size_t
 
__de¡Ën
è
__THROW
;

179 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wc¢ıy_®Ÿs
,

180 (
wch¬_t
 *
__»¡riù
 
__de¡
,

181 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

182 
size_t
 
__n
), 
wc¢ıy
);

183 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wc¢ıy_chk_w¬n
,

184 (
wch¬_t
 *
__»¡riù
 
__de¡
,

185 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

186 
size_t
 
__n
, size_ˆ
__de¡Ën
), 
__wc¢ıy_chk
)

187 
	`__w¬Ç‰r
 ("wcsncpy called with†ength biggerhan size of destination "

190 
__fÜtify_funùiÚ
 
wch¬_t
 *

191 
	`__NTH
 (
	$wc¢ıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
, cÚ¡ wch¬_ˆ*__»¡riù 
__¤c
,

192 
size_t
 
__n
))

194 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

196 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

197  
	`__wc¢ıy_chk
 (
__de¡
, 
__¤c
, 
__n
,

198 
	`__bos
 (
__de¡
è/  (
wch¬_t
));

199 ià(
__n
 > 
	`__bos
 (
__de¡
è/  (
wch¬_t
))

200  
	`__wc¢ıy_chk_w¬n
 (
__de¡
, 
__¤c
, 
__n
,

201 
	`__bos
 (
__de¡
è/  (
wch¬_t
));

203  
	`__wc¢ıy_®Ÿs
 (
__de¡
, 
__¤c
, 
__n
);

204 
	}
}

207 
wch¬_t
 *
	$__wınıy_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

208 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
,

209 
size_t
 
__de¡Ën
è
__THROW
;

210 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wınıy_®Ÿs
,

211 (
wch¬_t
 *
__»¡riù
 
__de¡
,

212 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

213 
size_t
 
__n
), 
wınıy
);

214 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wınıy_chk_w¬n
,

215 (
wch¬_t
 *
__»¡riù
 
__de¡
,

216 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

217 
size_t
 
__n
, size_ˆ
__de¡Ën
), 
__wınıy_chk
)

218 
	`__w¬Ç‰r
 ("wcpncpy called with†ength biggerhan size of destination "

221 
__fÜtify_funùiÚ
 
wch¬_t
 *

222 
	`__NTH
 (
	$wınıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
, cÚ¡ wch¬_ˆ*__»¡riù 
__¤c
,

223 
size_t
 
__n
))

225 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

227 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

228  
	`__wınıy_chk
 (
__de¡
, 
__¤c
, 
__n
,

229 
	`__bos
 (
__de¡
è/  (
wch¬_t
));

230 ià(
__n
 > 
	`__bos
 (
__de¡
è/  (
wch¬_t
))

231  
	`__wınıy_chk_w¬n
 (
__de¡
, 
__¤c
, 
__n
,

232 
	`__bos
 (
__de¡
è/  (
wch¬_t
));

234  
	`__wınıy_®Ÿs
 (
__de¡
, 
__¤c
, 
__n
);

235 
	}
}

238 
wch¬_t
 *
	$__wcsÿt_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

239 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

240 
size_t
 
__de¡Ën
è
__THROW
;

241 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wcsÿt_®Ÿs
,

242 (
wch¬_t
 *
__»¡riù
 
__de¡
,

243 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
), 
wcsÿt
);

245 
__fÜtify_funùiÚ
 
wch¬_t
 *

246 
	`__NTH
 (
	$wcsÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
, cÚ¡ wch¬_ˆ*__»¡riù 
__¤c
))

248 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

249  
	`__wcsÿt_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__de¡è/  (
wch¬_t
));

250  
	`__wcsÿt_®Ÿs
 (
__de¡
, 
__¤c
);

251 
	}
}

254 
wch¬_t
 *
	$__wc¢ÿt_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

255 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

256 
size_t
 
__n
, size_ˆ
__de¡Ën
è
__THROW
;

257 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wc¢ÿt_®Ÿs
,

258 (
wch¬_t
 *
__»¡riù
 
__de¡
,

259 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

260 
size_t
 
__n
), 
wc¢ÿt
);

262 
__fÜtify_funùiÚ
 
wch¬_t
 *

263 
	`__NTH
 (
	$wc¢ÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
, cÚ¡ wch¬_ˆ*__»¡riù 
__¤c
,

264 
size_t
 
__n
))

266 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

267  
	`__wc¢ÿt_chk
 (
__de¡
, 
__¤c
, 
__n
,

268 
	`__bos
 (
__de¡
è/  (
wch¬_t
));

269  
	`__wc¢ÿt_®Ÿs
 (
__de¡
, 
__¤c
, 
__n
);

270 
	}
}

273 
	$__sw´štf_chk
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

274 
__æag
, 
size_t
 
__s_Ën
,

275 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

276 
__THROW
 ;

278 
	`__REDIRECT_NTH_LDBL
 (
__sw´štf_®Ÿs
,

279 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

280 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fmt
, ...),

281 
sw´štf
);

283 #ifdeà
__va_¬g_·ck


284 
__fÜtify_funùiÚ
 

285 
	`__NTH
 (
	$sw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

286 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fmt
, ...))

288 ià(
	`__bos
 (
__s
è!ğ(
size_t
è-1 || 
__USE_FORTIFY_LEVEL
 > 1)

289  
	`__sw´štf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

290 
	`__bos
 (
__s
è/  (
wch¬_t
),

291 
__fmt
, 
	`__va_¬g_·ck
 ());

292  
	`__sw´štf_®Ÿs
 (
__s
, 
__n
, 
__fmt
, 
	`__va_¬g_·ck
 ());

293 
	}
}

294 #–ià!
defšed
 
__ılu¥lus


296 
	#sw´štf
(
s
, 
n
, ...) \

297 (
	`__bos
 (
s
è!ğ(
size_t
è-1 || 
__USE_FORTIFY_LEVEL
 > 1 \

298 ? 
	`__sw´štf_chk
 (
s
, 
n
, 
__USE_FORTIFY_LEVEL
 - 1, \

299 
	`__bos
 (
s
è/  (
wch¬_t
), 
__VA_ARGS__
) \

300 : 
	`sw´štf
 (
s
, 
n
, 
__VA_ARGS__
))

	)

303 
	$__vsw´štf_chk
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

304 
__æag
, 
size_t
 
__s_Ën
,

305 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

306 
__gnuc_va_li¡
 
__¬g
)

307 
__THROW
 ;

309 
	`__REDIRECT_NTH_LDBL
 (
__vsw´štf_®Ÿs
,

310 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

311 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fmt
,

312 
__gnuc_va_li¡
 
__­
), 
vsw´štf
);

314 
__fÜtify_funùiÚ
 

315 
	`__NTH
 (
	$vsw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

316 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fmt
, 
__gnuc_va_li¡
 
__­
))

318 ià(
	`__bos
 (
__s
è!ğ(
size_t
è-1 || 
__USE_FORTIFY_LEVEL
 > 1)

319  
	`__vsw´štf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

320 
	`__bos
 (
__s
è/  (
wch¬_t
), 
__fmt
, 
__­
);

321  
	`__vsw´štf_®Ÿs
 (
__s
, 
__n
, 
__fmt
, 
__­
);

322 
	}
}

325 #ià
__USE_FORTIFY_LEVEL
 > 1

327 
__fw´štf_chk
 (
__FILE
 *
__»¡riù
 
__¡»am
, 
__æag
,

328 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

329 
__w´štf_chk
 (
__æag
, cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

331 
__vfw´štf_chk
 (
__FILE
 *
__»¡riù
 
__¡»am
, 
__æag
,

332 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

333 
__gnuc_va_li¡
 
__­
);

334 
__vw´štf_chk
 (
__æag
, cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

335 
__gnuc_va_li¡
 
__­
);

337 #ifdeà
__va_¬g_·ck


338 
__fÜtify_funùiÚ
 

339 
	$w´štf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fmt
, ...)

341  
	`__w´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
	`__va_¬g_·ck
 ());

342 
	}
}

344 
__fÜtify_funùiÚ
 

345 
	$fw´štf
 (
__FILE
 *
__»¡riù
 
__¡»am
, cÚ¡ 
wch¬_t
 *__»¡riù 
__fmt
, ...)

347  
	`__fw´štf_chk
 (
__¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

348 
	`__va_¬g_·ck
 ());

349 
	}
}

350 #–ià!
defšed
 
__ılu¥lus


351 
	#w´štf
(...) \

352 
	`__w´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

353 
	#fw´štf
(
¡»am
, ...) \

354 
	`__fw´štf_chk
 (
¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

357 
__fÜtify_funùiÚ
 

358 
	$vw´štf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fmt
, 
__gnuc_va_li¡
 
__­
)

360  
	`__vw´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

361 
	}
}

363 
__fÜtify_funùiÚ
 

364 
	$vfw´štf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

365 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fmt
, 
__gnuc_va_li¡
 
__­
)

367  
	`__vfw´štf_chk
 (
__¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

368 
	}
}

372 
wch¬_t
 *
	$__fg‘ws_chk
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

373 
__FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

374 
wch¬_t
 *
	`__REDIRECT
 (
__fg‘ws_®Ÿs
,

375 (
wch¬_t
 *
__»¡riù
 
__s
, 
__n
,

376 
__FILE
 *
__»¡riù
 
__¡»am
), 
fg‘ws
è
__wur
;

377 
wch¬_t
 *
	`__REDIRECT
 (
__fg‘ws_chk_w¬n
,

378 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

379 
__FILE
 *
__»¡riù
 
__¡»am
), 
__fg‘ws_chk
)

380 
__wur
 
	`__w¬Ç‰r
 ("fgetws called with bigger sizehan†ength "

383 
__fÜtify_funùiÚ
 
__wur
 
wch¬_t
 *

384 
	$fg‘ws
 (
wch¬_t
 *
__»¡riù
 
__s
, 
__n
, 
__FILE
 *__»¡riù 
__¡»am
)

386 ià(
	`__bos
 (
__s
è!ğ(
size_t
) -1)

388 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
) || __n <= 0)

389  
	`__fg‘ws_chk
 (
__s
, 
	`__bos
 (__sè/  (
wch¬_t
),

390 
__n
, 
__¡»am
);

392 ià((
size_t
è
__n
 > 
	`__bos
 (
__s
è/  (
wch¬_t
))

393  
	`__fg‘ws_chk_w¬n
 (
__s
, 
	`__bos
 (__sè/  (
wch¬_t
),

394 
__n
, 
__¡»am
);

396  
	`__fg‘ws_®Ÿs
 (
__s
, 
__n
, 
__¡»am
);

397 
	}
}

399 #ifdeà
__USE_GNU


400 
wch¬_t
 *
	$__fg‘ws_uÆocked_chk
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__size
,

401 
__n
, 
__FILE
 *
__»¡riù
 
__¡»am
)

402 
__wur
;

403 
wch¬_t
 *
	`__REDIRECT
 (
__fg‘ws_uÆocked_®Ÿs
,

404 (
wch¬_t
 *
__»¡riù
 
__s
, 
__n
,

405 
__FILE
 *
__»¡riù
 
__¡»am
), 
fg‘ws_uÆocked
)

406 
__wur
;

407 
wch¬_t
 *
	`__REDIRECT
 (
__fg‘ws_uÆocked_chk_w¬n
,

408 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

409 
__FILE
 *
__»¡riù
 
__¡»am
),

410 
__fg‘ws_uÆocked_chk
)

411 
__wur
 
	`__w¬Ç‰r
 ("fgetws_unlocked called with bigger sizehan†ength "

414 
__fÜtify_funùiÚ
 
__wur
 
wch¬_t
 *

415 
	$fg‘ws_uÆocked
 (
wch¬_t
 *
__»¡riù
 
__s
, 
__n
, 
__FILE
 *__»¡riù 
__¡»am
)

417 ià(
	`__bos
 (
__s
è!ğ(
size_t
) -1)

419 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
) || __n <= 0)

420  
	`__fg‘ws_uÆocked_chk
 (
__s
, 
	`__bos
 (__sè/  (
wch¬_t
),

421 
__n
, 
__¡»am
);

423 ià((
size_t
è
__n
 > 
	`__bos
 (
__s
è/  (
wch¬_t
))

424  
	`__fg‘ws_uÆocked_chk_w¬n
 (
__s
, 
	`__bos
 (__sè/  (
wch¬_t
),

425 
__n
, 
__¡»am
);

427  
	`__fg‘ws_uÆocked_®Ÿs
 (
__s
, 
__n
, 
__¡»am
);

428 
	}
}

432 
size_t
 
	$__wütomb_chk
 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wch¬
,

433 
mb¡©e_t
 *
__»¡riù
 
__p
,

434 
size_t
 
__buæ’
è
__THROW
 
__wur
;

435 
size_t
 
	`__REDIRECT_NTH
 (
__wütomb_®Ÿs
,

436 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wch¬
,

437 
mb¡©e_t
 *
__»¡riù
 
__ps
), 
wütomb
è
__wur
;

439 
__fÜtify_funùiÚ
 
__wur
 
size_t


440 
	`__NTH
 (
	$wütomb
 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wch¬
,

441 
mb¡©e_t
 *
__»¡riù
 
__ps
))

446 
	#__WCHAR_MB_LEN_MAX
 16

	)

447 #ià
defšed
 
MB_LEN_MAX
 && MB_LEN_MAX !ğ
__WCHAR_MB_LEN_MAX


450 ià(
	`__bos
 (
__s
è!ğ(
size_t
è-1 && 
__WCHAR_MB_LEN_MAX
 > __bos (__s))

451  
	`__wütomb_chk
 (
__s
, 
__wch¬
, 
__ps
, 
	`__bos
 (__s));

452  
	`__wütomb_®Ÿs
 (
__s
, 
__wch¬
, 
__ps
);

453 
	}
}

456 
size_t
 
	$__mb¤towcs_chk
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

457 cÚ¡ **
__»¡riù
 
__¤c
,

458 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

459 
size_t
 
__d¡Ën
è
__THROW
;

460 
size_t
 
	`__REDIRECT_NTH
 (
__mb¤towcs_®Ÿs
,

461 (
wch¬_t
 *
__»¡riù
 
__d¡
,

462 cÚ¡ **
__»¡riù
 
__¤c
,

463 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
),

464 
mb¤towcs
);

465 
size_t
 
	`__REDIRECT_NTH
 (
__mb¤towcs_chk_w¬n
,

466 (
wch¬_t
 *
__»¡riù
 
__d¡
,

467 cÚ¡ **
__»¡riù
 
__¤c
,

468 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

469 
size_t
 
__d¡Ën
), 
__mb¤towcs_chk
)

470 
	`__w¬Ç‰r
 ("mbsrtowcs called with dst buffer smallerhan†en "

473 
__fÜtify_funùiÚ
 
size_t


474 
	`__NTH
 (
	$mb¤towcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
, cÚ¡ **__»¡riù 
__¤c
,

475 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
))

477 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

479 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

480  
	`__mb¤towcs_chk
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
,

481 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

483 ià(
__Ën
 > 
	`__bos
 (
__d¡
è/  (
wch¬_t
))

484  
	`__mb¤towcs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
,

485 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

487  
	`__mb¤towcs_®Ÿs
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
);

488 
	}
}

491 
size_t
 
	$__wc¤tombs_chk
 (*
__»¡riù
 
__d¡
,

492 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
,

493 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

494 
size_t
 
__d¡Ën
è
__THROW
;

495 
size_t
 
	`__REDIRECT_NTH
 (
__wc¤tombs_®Ÿs
,

496 (*
__»¡riù
 
__d¡
,

497 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
,

498 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
),

499 
wc¤tombs
);

500 
size_t
 
	`__REDIRECT_NTH
 (
__wc¤tombs_chk_w¬n
,

501 (*
__»¡riù
 
__d¡
,

502 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
,

503 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

504 
size_t
 
__d¡Ën
), 
__wc¤tombs_chk
)

505 
	`__w¬Ç‰r
 ("wcsrtombs called with dst buffer smallerhan†en");

507 
__fÜtify_funùiÚ
 
size_t


508 
	`__NTH
 (
	$wc¤tombs
 (*
__»¡riù
 
__d¡
, cÚ¡ 
wch¬_t
 **__»¡riù 
__¤c
,

509 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
))

511 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

513 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

514  
	`__wc¤tombs_chk
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
, 
	`__bos
 (__dst));

516 ià(
__Ën
 > 
	`__bos
 (
__d¡
))

517  
	`__wc¤tombs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
, 
	`__bos
 (__dst));

519  
	`__wc¤tombs_®Ÿs
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
);

520 
	}
}

523 #ifdeà
__USE_GNU


524 
size_t
 
	$__mb¢¹owcs_chk
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

525 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

526 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

527 
size_t
 
__d¡Ën
è
__THROW
;

528 
size_t
 
	`__REDIRECT_NTH
 (
__mb¢¹owcs_®Ÿs
,

529 (
wch¬_t
 *
__»¡riù
 
__d¡
,

530 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

531 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
),

532 
mb¢¹owcs
);

533 
size_t
 
	`__REDIRECT_NTH
 (
__mb¢¹owcs_chk_w¬n
,

534 (
wch¬_t
 *
__»¡riù
 
__d¡
,

535 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

536 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

537 
size_t
 
__d¡Ën
), 
__mb¢¹owcs_chk
)

538 
	`__w¬Ç‰r
 ("mbsnrtowcs called with dst buffer smallerhan†en "

541 
__fÜtify_funùiÚ
 
size_t


542 
	`__NTH
 (
	$mb¢¹owcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
, cÚ¡ **__»¡riù 
__¤c
,

543 
size_t
 
__nmc
, size_ˆ
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
))

545 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

547 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

548  
	`__mb¢¹owcs_chk
 (
__d¡
, 
__¤c
, 
__nmc
, 
__Ën
, 
__ps
,

549 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

551 ià(
__Ën
 > 
	`__bos
 (
__d¡
è/  (
wch¬_t
))

552  
	`__mb¢¹owcs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__nmc
, 
__Ën
, 
__ps
,

553 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

555  
	`__mb¢¹owcs_®Ÿs
 (
__d¡
, 
__¤c
, 
__nmc
, 
__Ën
, 
__ps
);

556 
	}
}

559 
size_t
 
	$__wc¢¹ombs_chk
 (*
__»¡riù
 
__d¡
,

560 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
,

561 
size_t
 
__nwc
, size_ˆ
__Ën
,

562 
mb¡©e_t
 *
__»¡riù
 
__ps
, 
size_t
 
__d¡Ën
)

563 
__THROW
;

564 
size_t
 
	`__REDIRECT_NTH
 (
__wc¢¹ombs_®Ÿs
,

565 (*
__»¡riù
 
__d¡
,

566 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
,

567 
size_t
 
__nwc
, size_ˆ
__Ën
,

568 
mb¡©e_t
 *
__»¡riù
 
__ps
), 
wc¢¹ombs
);

569 
size_t
 
	`__REDIRECT_NTH
 (
__wc¢¹ombs_chk_w¬n
,

570 (*
__»¡riù
 
__d¡
,

571 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
,

572 
size_t
 
__nwc
, size_ˆ
__Ën
,

573 
mb¡©e_t
 *
__»¡riù
 
__ps
,

574 
size_t
 
__d¡Ën
), 
__wc¢¹ombs_chk
)

575 
	`__w¬Ç‰r
 ("wcsnrtombs called with dst buffer smallerhan†en");

577 
__fÜtify_funùiÚ
 
size_t


578 
	`__NTH
 (
	$wc¢¹ombs
 (*
__»¡riù
 
__d¡
, cÚ¡ 
wch¬_t
 **__»¡riù 
__¤c
,

579 
size_t
 
__nwc
, size_ˆ
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
))

581 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

583 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

584  
	`__wc¢¹ombs_chk
 (
__d¡
, 
__¤c
, 
__nwc
, 
__Ën
, 
__ps
,

585 
	`__bos
 (
__d¡
));

587 ià(
__Ën
 > 
	`__bos
 (
__d¡
))

588  
	`__wc¢¹ombs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__nwc
, 
__Ën
, 
__ps
,

589 
	`__bos
 (
__d¡
));

591  
	`__wc¢¹ombs_®Ÿs
 (
__d¡
, 
__¤c
, 
__nwc
, 
__Ën
, 
__ps
);

592 
	}
}

	@/usr/include/pthread.h

18 #iâdeà
_PTHREAD_H


19 
	#_PTHREAD_H
 1

	)

21 
	~<ã©u»s.h
>

22 
	~<’dŸn.h
>

23 
	~<sched.h
>

24 
	~<time.h
>

26 
	~<b™s/±h»adty³s.h
>

27 
	~<b™s/£tjmp.h
>

28 
	~<b™s/wÜdsize.h
>

34 
	mPTHREAD_CREATE_JOINABLE
,

35 
	#PTHREAD_CREATE_JOINABLE
 
PTHREAD_CREATE_JOINABLE


	)

36 
	mPTHREAD_CREATE_DETACHED


37 
	#PTHREAD_CREATE_DETACHED
 
PTHREAD_CREATE_DETACHED


	)

44 
	mPTHREAD_MUTEX_TIMED_NP
,

45 
	mPTHREAD_MUTEX_RECURSIVE_NP
,

46 
	mPTHREAD_MUTEX_ERRORCHECK_NP
,

47 
	mPTHREAD_MUTEX_ADAPTIVE_NP


48 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


50 
	mPTHREAD_MUTEX_NORMAL
 = 
PTHREAD_MUTEX_TIMED_NP
,

51 
	mPTHREAD_MUTEX_RECURSIVE
 = 
PTHREAD_MUTEX_RECURSIVE_NP
,

52 
	mPTHREAD_MUTEX_ERRORCHECK
 = 
PTHREAD_MUTEX_ERRORCHECK_NP
,

53 
	mPTHREAD_MUTEX_DEFAULT
 = 
PTHREAD_MUTEX_NORMAL


55 #ifdeà
__USE_GNU


57 , 
	mPTHREAD_MUTEX_FAST_NP
 = 
PTHREAD_MUTEX_TIMED_NP


62 #ifdeà
__USE_XOPEN2K


66 
	mPTHREAD_MUTEX_STALLED
,

67 
	mPTHREAD_MUTEX_STALLED_NP
 = 
PTHREAD_MUTEX_STALLED
,

68 
	mPTHREAD_MUTEX_ROBUST
,

69 
	mPTHREAD_MUTEX_ROBUST_NP
 = 
PTHREAD_MUTEX_ROBUST


74 #ià
defšed
 
__USE_POSIX199506
 || defšed 
__USE_UNIX98


78 
	mPTHREAD_PRIO_NONE
,

79 
	mPTHREAD_PRIO_INHERIT
,

80 
	mPTHREAD_PRIO_PROTECT


86 #ià
__PTHREAD_MUTEX_HAVE_ELISION
 == 1

87 
	#__PTHREAD_SPINS
 0, 0

	)

88 #–ià
__PTHREAD_MUTEX_HAVE_ELISION
 == 2

89 
	#__PTHREAD_SPINS
 { 0, 0 }

	)

91 
	#__PTHREAD_SPINS
 0

	)

94 #ifdeà
__PTHREAD_MUTEX_HAVE_PREV


95 
	#PTHREAD_MUTEX_INITIALIZER
 \

96 { { 0, 0, 0, 0, 0, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

97 #ifdeà
__USE_GNU


98 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

99 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

100 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

101 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

102 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

103 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

104 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

105 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

109 
	#PTHREAD_MUTEX_INITIALIZER
 \

110 { { 0, 0, 0, 0, 0, { 
__PTHREAD_SPINS
 } } }

	)

111 #ifdeà
__USE_GNU


112 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

113 { { 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 0, { 
__PTHREAD_SPINS
 } } }

	)

114 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

115 { { 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 0, { 
__PTHREAD_SPINS
 } } }

	)

116 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

117 { { 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 0, { 
__PTHREAD_SPINS
 } } }

	)

124 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


127 
	mPTHREAD_RWLOCK_PREFER_READER_NP
,

128 
	mPTHREAD_RWLOCK_PREFER_WRITER_NP
,

129 
	mPTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,

130 
	mPTHREAD_RWLOCK_DEFAULT_NP
 = 
PTHREAD_RWLOCK_PREFER_READER_NP


136 #iâdeà
__PTHREAD_RWLOCK_INT_FLAGS_SHARED


137 #ià
__WORDSIZE
 == 64

138 
	#__PTHREAD_RWLOCK_INT_FLAGS_SHARED
 1

	)

143 
	#PTHREAD_RWLOCK_INITIALIZER
 \

144 { { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 } }

	)

145 #ifdeà
__USE_GNU


146 #ifdeà
__PTHREAD_RWLOCK_INT_FLAGS_SHARED


147 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

149 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
 } }

	)

151 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


152 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

153 { { 0, 0, 0, 0, 0, 0, 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
, \

154 0, 0, 0, 0 } }

	)

156 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

157 { { 0, 0, 0, 0, 0, 0, 0, 0, 0, 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,\

158 0 } }

	)

168 
	mPTHREAD_INHERIT_SCHED
,

169 
	#PTHREAD_INHERIT_SCHED
 
PTHREAD_INHERIT_SCHED


	)

170 
	mPTHREAD_EXPLICIT_SCHED


171 
	#PTHREAD_EXPLICIT_SCHED
 
PTHREAD_EXPLICIT_SCHED


	)

178 
	mPTHREAD_SCOPE_SYSTEM
,

179 
	#PTHREAD_SCOPE_SYSTEM
 
PTHREAD_SCOPE_SYSTEM


	)

180 
	mPTHREAD_SCOPE_PROCESS


181 
	#PTHREAD_SCOPE_PROCESS
 
PTHREAD_SCOPE_PROCESS


	)

188 
	mPTHREAD_PROCESS_PRIVATE
,

189 
	#PTHREAD_PROCESS_PRIVATE
 
PTHREAD_PROCESS_PRIVATE


	)

190 
	mPTHREAD_PROCESS_SHARED


191 
	#PTHREAD_PROCESS_SHARED
 
PTHREAD_PROCESS_SHARED


	)

197 
	#PTHREAD_COND_INITIALIZER
 { { 0, 0, 0, 0, 0, (*è0, 0, 0 } }

	)

201 
	s_±h»ad_ş—nup_bufãr


203 (*
	m__routše
) (*);

204 *
	m__¬g
;

205 
	m__ÿnûÉy³
;

206 
_±h»ad_ş—nup_bufãr
 *
	m__´ev
;

212 
	mPTHREAD_CANCEL_ENABLE
,

213 
	#PTHREAD_CANCEL_ENABLE
 
PTHREAD_CANCEL_ENABLE


	)

214 
	mPTHREAD_CANCEL_DISABLE


215 
	#PTHREAD_CANCEL_DISABLE
 
PTHREAD_CANCEL_DISABLE


	)

219 
	mPTHREAD_CANCEL_DEFERRED
,

220 
	#PTHREAD_CANCEL_DEFERRED
 
PTHREAD_CANCEL_DEFERRED


	)

221 
	mPTHREAD_CANCEL_ASYNCHRONOUS


222 
	#PTHREAD_CANCEL_ASYNCHRONOUS
 
PTHREAD_CANCEL_ASYNCHRONOUS


	)

224 
	#PTHREAD_CANCELED
 ((*è-1)

	)

228 
	#PTHREAD_ONCE_INIT
 0

	)

231 #ifdeà
__USE_XOPEN2K


235 
	#PTHREAD_BARRIER_SERIAL_THREAD
 -1

	)

239 
__BEGIN_DECLS


244 
±h»ad_ü—‹
 (
±h»ad_t
 *
__»¡riù
 
__Ãwth»ad
,

245 cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

246 *(*
__¡¬t_routše
) (*),

247 *
__»¡riù
 
__¬g
è
__THROWNL
 
__nÚnuÎ
 ((1, 3));

253 
	$±h»ad_ex™
 (*
__»tv®
è
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

261 
	`±h»ad_još
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
);

263 #ifdeà
__USE_GNU


266 
	$±h»ad_Œyjoš_Å
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
è
__THROW
;

274 
	`±h»ad_timedjoš_Å
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
,

275 cÚ¡ 
time¥ec
 *
__ab¡ime
);

282 
	$±h»ad_d‘ach
 (
±h»ad_t
 
__th
è
__THROW
;

286 
±h»ad_t
 
	$±h»ad_£lf
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

289 
	$±h»ad_equ®
 (
±h»ad_t
 
__th»ad1
,…th»ad_ˆ
__th»ad2
)

290 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

298 
	$±h»ad_©Œ_š™
 (
±h»ad_©Œ_t
 *
__©Œ
è
__THROW
 
	`__nÚnuÎ
 ((1));

301 
	$±h»ad_©Œ_de¡roy
 (
±h»ad_©Œ_t
 *
__©Œ
)

302 
__THROW
 
	`__nÚnuÎ
 ((1));

305 
	$±h»ad_©Œ_g‘d‘ach¡©e
 (cÚ¡ 
±h»ad_©Œ_t
 *
__©Œ
,

306 *
__d‘ach¡©e
)

307 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

310 
	$±h»ad_©Œ_£td‘ach¡©e
 (
±h»ad_©Œ_t
 *
__©Œ
,

311 
__d‘ach¡©e
)

312 
__THROW
 
	`__nÚnuÎ
 ((1));

316 
	$±h»ad_©Œ_g‘gu¬dsize
 (cÚ¡ 
±h»ad_©Œ_t
 *
__©Œ
,

317 
size_t
 *
__gu¬dsize
)

318 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

321 
	$±h»ad_©Œ_£tgu¬dsize
 (
±h»ad_©Œ_t
 *
__©Œ
,

322 
size_t
 
__gu¬dsize
)

323 
__THROW
 
	`__nÚnuÎ
 ((1));

327 
	$±h»ad_©Œ_g‘sched·¿m
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

328 
sched_·¿m
 *
__»¡riù
 
__·¿m
)

329 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

332 
	$±h»ad_©Œ_£tsched·¿m
 (
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

333 cÚ¡ 
sched_·¿m
 *
__»¡riù


334 
__·¿m
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

337 
	$±h»ad_©Œ_g‘schedpŞicy
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù


338 
__©Œ
, *
__»¡riù
 
__pŞicy
)

339 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

342 
	$±h»ad_©Œ_£tschedpŞicy
 (
±h»ad_©Œ_t
 *
__©Œ
, 
__pŞicy
)

343 
__THROW
 
	`__nÚnuÎ
 ((1));

346 
	$±h»ad_©Œ_g‘šh”™sched
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù


347 
__©Œ
, *
__»¡riù
 
__šh”™
)

348 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

351 
	$±h»ad_©Œ_£tšh”™sched
 (
±h»ad_©Œ_t
 *
__©Œ
,

352 
__šh”™
)

353 
__THROW
 
	`__nÚnuÎ
 ((1));

357 
	$±h»ad_©Œ_g‘scİe
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

358 *
__»¡riù
 
__scİe
)

359 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

362 
	$±h»ad_©Œ_£tscİe
 (
±h»ad_©Œ_t
 *
__©Œ
, 
__scİe
)

363 
__THROW
 
	`__nÚnuÎ
 ((1));

366 
	$±h»ad_©Œ_g‘¡ackaddr
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù


367 
__©Œ
, **
__»¡riù
 
__¡ackaddr
)

368 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__©Œibu‹_d•»ÿ‹d__
;

374 
	$±h»ad_©Œ_£t¡ackaddr
 (
±h»ad_©Œ_t
 *
__©Œ
,

375 *
__¡ackaddr
)

376 
__THROW
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_d•»ÿ‹d__
;

379 
	$±h»ad_©Œ_g‘¡acksize
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù


380 
__©Œ
, 
size_t
 *
__»¡riù
 
__¡acksize
)

381 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

386 
	$±h»ad_©Œ_£t¡acksize
 (
±h»ad_©Œ_t
 *
__©Œ
,

387 
size_t
 
__¡acksize
)

388 
__THROW
 
	`__nÚnuÎ
 ((1));

390 #ifdeà
__USE_XOPEN2K


392 
	$±h»ad_©Œ_g‘¡ack
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

393 **
__»¡riù
 
__¡ackaddr
,

394 
size_t
 *
__»¡riù
 
__¡acksize
)

395 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3));

400 
	$±h»ad_©Œ_£t¡ack
 (
±h»ad_©Œ_t
 *
__©Œ
, *
__¡ackaddr
,

401 
size_t
 
__¡acksize
è
__THROW
 
	`__nÚnuÎ
 ((1));

404 #ifdeà
__USE_GNU


407 
	$±h»ad_©Œ_£ffš™y_Å
 (
±h»ad_©Œ_t
 *
__©Œ
,

408 
size_t
 
__ıu£tsize
,

409 cÚ¡ 
ıu_£t_t
 *
__ıu£t
)

410 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

414 
	$±h»ad_©Œ_g‘affš™y_Å
 (cÚ¡ 
±h»ad_©Œ_t
 *
__©Œ
,

415 
size_t
 
__ıu£tsize
,

416 
ıu_£t_t
 *
__ıu£t
)

417 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

420 
	$±h»ad_g‘©Œ_deçuÉ_Å
 (
±h»ad_©Œ_t
 *
__©Œ
)

421 
__THROW
 
	`__nÚnuÎ
 ((1));

425 
	$±h»ad_£‰r_deçuÉ_Å
 (cÚ¡ 
±h»ad_©Œ_t
 *
__©Œ
)

426 
__THROW
 
	`__nÚnuÎ
 ((1));

431 
	$±h»ad_g‘©Œ_Å
 (
±h»ad_t
 
__th
, 
±h»ad_©Œ_t
 *
__©Œ
)

432 
__THROW
 
	`__nÚnuÎ
 ((2));

440 
	$±h»ad_£tsched·¿m
 (
±h»ad_t
 
__rg‘_th»ad
, 
__pŞicy
,

441 cÚ¡ 
sched_·¿m
 *
__·¿m
)

442 
__THROW
 
	`__nÚnuÎ
 ((3));

445 
	$±h»ad_g‘sched·¿m
 (
±h»ad_t
 
__rg‘_th»ad
,

446 *
__»¡riù
 
__pŞicy
,

447 
sched_·¿m
 *
__»¡riù
 
__·¿m
)

448 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

451 
	$±h»ad_£tsched´io
 (
±h»ad_t
 
__rg‘_th»ad
, 
__´io
)

452 
__THROW
;

455 #ifdeà
__USE_GNU


457 
	$±h»ad_g‘Çme_Å
 (
±h»ad_t
 
__rg‘_th»ad
, *
__buf
,

458 
size_t
 
__buæ’
)

459 
__THROW
 
	`__nÚnuÎ
 ((2));

462 
	$±h»ad_£Šame_Å
 (
±h»ad_t
 
__rg‘_th»ad
, cÚ¡ *
__Çme
)

463 
__THROW
 
	`__nÚnuÎ
 ((2));

467 #ifdeà
__USE_UNIX98


469 
	$±h»ad_g‘cÚcu¼’cy
 (è
__THROW
;

472 
	$±h»ad_£tcÚcu¼’cy
 (
__Ëv–
è
__THROW
;

475 #ifdeà
__USE_GNU


480 
	$±h»ad_y›ld
 (è
__THROW
;

485 
	$±h»ad_£ffš™y_Å
 (
±h»ad_t
 
__th
, 
size_t
 
__ıu£tsize
,

486 cÚ¡ 
ıu_£t_t
 *
__ıu£t
)

487 
__THROW
 
	`__nÚnuÎ
 ((3));

490 
	$±h»ad_g‘affš™y_Å
 (
±h»ad_t
 
__th
, 
size_t
 
__ıu£tsize
,

491 
ıu_£t_t
 *
__ıu£t
)

492 
__THROW
 
	`__nÚnuÎ
 ((3));

505 
	`±h»ad_Úû
 (
±h»ad_Úû_t
 *
__Úû_cÚŒŞ
,

506 (*
__š™_routše
è()è
	`__nÚnuÎ
 ((1, 2));

517 
	`±h»ad_£tÿnûl¡©e
 (
__¡©e
, *
__Şd¡©e
);

521 
	`±h»ad_£tÿnûÉy³
 (
__ty³
, *
__Şdty³
);

524 
	`±h»ad_ÿnûl
 (
±h»ad_t
 
__th
);

529 
	`±h»ad_‹¡ÿnûl
 ();

538 
__jmp_buf
 
__ÿnûl_jmp_buf
;

539 
__mask_was_§ved
;

540 } 
__ÿnûl_jmp_buf
[1];

541 *
__·d
[4];

542 } 
	t__±h»ad_unwšd_buf_t
 
	t__©Œibu‹__
 ((
	t__®igÃd__
));

545 #iâdeà
__ş—nup_fù_©Œibu‹


546 
	#__ş—nup_fù_©Œibu‹


	)

551 
	s__±h»ad_ş—nup_äame


553 (*
__ÿnûl_routše
) (*);

554 *
__ÿnûl_¬g
;

555 
__do_™
;

556 
__ÿnûl_ty³
;

559 #ià
defšed
 
__GNUC__
 && defšed 
__EXCEPTIONS


560 #ifdeà
__ılu¥lus


562 şas 
	c__±h»ad_ş—nup_şass


564 (*
__ÿnûl_routše
) (*);

565 *
__ÿnûl_¬g
;

566 
__do_™
;

567 
__ÿnûl_ty³
;

569 
public
:

570 
	`__±h»ad_ş—nup_şass
 ((*
__fù
è(*), *
__¬g
)

571 : 
	`__ÿnûl_routše
 (
__fù
), 
	`__ÿnûl_¬g
 (
__¬g
), 
	$__do_™
 (1) { }

572 ~
	$__±h»ad_ş—nup_şass
 (è{ ià(
__do_™
è
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); 
	}
}

573 
	$__£tdo™
 (
__Ãwv®
è{ 
__do_™
 = __Ãwv®; 
	}
}

574 
	$__deãr
 (è{ 
	`±h»ad_£tÿnûÉy³
 (
PTHREAD_CANCEL_DEFERRED
,

575 &
__ÿnûl_ty³
); 
	}
}

576 
	$__»¡Üe
 (ècÚ¡ { 
	`±h»ad_£tÿnûÉy³
 (
__ÿnûl_ty³
, 0); 
	}
}

586 
	#±h»ad_ş—nup_push
(
routše
, 
¬g
) \

588 
__±h»ad_ş—nup_şass
 
	`__şäame
 (
routše
, 
¬g
)

	)

592 
	#±h»ad_ş—nup_pİ
(
execu‹
) \

593 
__şäame
.
	`__£tdo™
 (
execu‹
); \

594 } 0)

	)

596 #ifdeà
__USE_GNU


600 
	#±h»ad_ş—nup_push_deãr_Å
(
routše
, 
¬g
) \

602 
__±h»ad_ş—nup_şass
 
	`__şäame
 (
routše
, 
¬g
); \

603 
__şäame
.
	`__deãr
 ()

	)

608 
	#±h»ad_ş—nup_pİ_»¡Üe_Å
(
execu‹
) \

609 
__şäame
.
	`__»¡Üe
 (); \

610 
__şäame
.
	`__£tdo™
 (
execu‹
); \

611 } 0)

	)

618 
__ex‹º_šlše
 

619 
	$__±h»ad_ş—nup_routše
 (
__±h»ad_ş—nup_äame
 *
__äame
)

621 ià(
__äame
->
__do_™
)

622 
__äame
->
	`__ÿnûl_routše
 (__äame->
__ÿnûl_¬g
);

623 
	}
}

632 
	#±h»ad_ş—nup_push
(
routše
, 
¬g
) \

634 
__±h»ad_ş—nup_äame
 
__şäame
 \

635 
	`__©Œibu‹__
 ((
	`__ş—nup__
 (
__±h»ad_ş—nup_routše
))) \

636 ğ{ .
__ÿnûl_routše
 = (
routše
), .
__ÿnûl_¬g
 = (
¬g
), \

637 .
__do_™
 = 1 };

	)

641 
	#±h»ad_ş—nup_pİ
(
execu‹
) \

642 
__şäame
.
__do_™
 = (
execu‹
); \

643 } 0)

	)

645 #ifdeà
__USE_GNU


649 
	#±h»ad_ş—nup_push_deãr_Å
(
routše
, 
¬g
) \

651 
__±h»ad_ş—nup_äame
 
__şäame
 \

652 
	`__©Œibu‹__
 ((
	`__ş—nup__
 (
__±h»ad_ş—nup_routše
))) \

653 ğ{ .
__ÿnûl_routše
 = (
routše
), .
__ÿnûl_¬g
 = (
¬g
), \

654 .
__do_™
 = 1 }; \

655 (è
	`±h»ad_£tÿnûÉy³
 (
PTHREAD_CANCEL_DEFERRED
, \

656 &
__şäame
.
__ÿnûl_ty³
)

	)

661 
	#±h»ad_ş—nup_pİ_»¡Üe_Å
(
execu‹
) \

662 (è
	`±h»ad_£tÿnûÉy³
 (
__şäame
.
__ÿnûl_ty³
, 
NULL
); \

663 
__şäame
.
__do_™
 = (
execu‹
); \

664 } 0)

	)

675 
	#±h»ad_ş—nup_push
(
routše
, 
¬g
) \

677 
__±h»ad_unwšd_buf_t
 
__ÿnûl_buf
; \

678 (*
__ÿnûl_routše
è(*èğ(
routše
); \

679 *
__ÿnûl_¬g
 = (
¬g
); \

680 
__nÙ_fœ¡_ÿÎ
 = 
	`__sig£tjmp
 ((
__jmp_buf_g
 *) (*) \

681 
__ÿnûl_buf
.
__ÿnûl_jmp_buf
, 0); \

682 ià(
	`__glibc_uÆik–y
 (
__nÙ_fœ¡_ÿÎ
)) \

684 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

685 
	`__±h»ad_unwšd_Ãxt
 (&
__ÿnûl_buf
); \

689 
	`__±h»ad_»gi¡”_ÿnûl
 (&
__ÿnûl_buf
); \

690 dØ{

	)

691 
__±h»ad_»gi¡”_ÿnûl
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

692 
__ş—nup_fù_©Œibu‹
;

696 
	#±h»ad_ş—nup_pİ
(
execu‹
) \

699 
	`__±h»ad_uÄegi¡”_ÿnûl
 (&
__ÿnûl_buf
); \

700 ià(
execu‹
) \

701 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

702 } 0)

	)

703 
	$__±h»ad_uÄegi¡”_ÿnûl
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

704 
__ş—nup_fù_©Œibu‹
;

706 #ifdeà
__USE_GNU


710 
	#±h»ad_ş—nup_push_deãr_Å
(
routše
, 
¬g
) \

712 
__±h»ad_unwšd_buf_t
 
__ÿnûl_buf
; \

713 (*
__ÿnûl_routše
è(*èğ(
routše
); \

714 *
__ÿnûl_¬g
 = (
¬g
); \

715 
__nÙ_fœ¡_ÿÎ
 = 
	`__sig£tjmp
 ((
__jmp_buf_g
 *) (*) \

716 
__ÿnûl_buf
.
__ÿnûl_jmp_buf
, 0); \

717 ià(
	`__glibc_uÆik–y
 (
__nÙ_fœ¡_ÿÎ
)) \

719 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

720 
	`__±h»ad_unwšd_Ãxt
 (&
__ÿnûl_buf
); \

724 
	`__±h»ad_»gi¡”_ÿnûl_deãr
 (&
__ÿnûl_buf
); \

725 dØ{

	)

726 
	`__±h»ad_»gi¡”_ÿnûl_deãr
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

727 
__ş—nup_fù_©Œibu‹
;

732 
	#±h»ad_ş—nup_pİ_»¡Üe_Å
(
execu‹
) \

735 
	`__±h»ad_uÄegi¡”_ÿnûl_»¡Üe
 (&
__ÿnûl_buf
); \

736 ià(
execu‹
) \

737 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

738 
	}
} 0)

	)

739 
	$__±h»ad_uÄegi¡”_ÿnûl_»¡Üe
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

740 
__ş—nup_fù_©Œibu‹
;

744 
	$__±h»ad_unwšd_Ãxt
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

745 
__ş—nup_fù_©Œibu‹
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
))

746 #iâdeà
SHARED


747 
	`__©Œibu‹__
 ((
__w—k__
))

753 
__jmp_buf_g
;

754 
	$__sig£tjmp
 (
__jmp_buf_g
 *
__’v
, 
__§vemask
è
__THROWNL
;

760 
	$±h»ad_mu‹x_š™
 (
±h»ad_mu‹x_t
 *
__mu‹x
,

761 cÚ¡ 
±h»ad_mu‹x©Œ_t
 *
__mu‹x©Œ
)

762 
__THROW
 
	`__nÚnuÎ
 ((1));

765 
	$±h»ad_mu‹x_de¡roy
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

766 
__THROW
 
	`__nÚnuÎ
 ((1));

769 
	$±h»ad_mu‹x_Œylock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

770 
__THROWNL
 
	`__nÚnuÎ
 ((1));

773 
	$±h»ad_mu‹x_lock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

774 
__THROWNL
 
	`__nÚnuÎ
 ((1));

776 #ifdeà
__USE_XOPEN2K


778 
	$±h»ad_mu‹x_timedlock
 (
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

779 cÚ¡ 
time¥ec
 *
__»¡riù


780 
__ab¡ime
è
__THROWNL
 
	`__nÚnuÎ
 ((1, 2));

784 
	$±h»ad_mu‹x_uÆock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

785 
__THROWNL
 
	`__nÚnuÎ
 ((1));

789 
	$±h»ad_mu‹x_g‘´ioûšg
 (cÚ¡ 
±h»ad_mu‹x_t
 *

790 
__»¡riù
 
__mu‹x
,

791 *
__»¡riù
 
__´ioûšg
)

792 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

796 
	$±h»ad_mu‹x_£rioûšg
 (
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

797 
__´ioûšg
,

798 *
__»¡riù
 
__Şd_ûšg
)

799 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

802 #ifdeà
__USE_XOPEN2K8


804 
	$±h»ad_mu‹x_cÚsi¡’t
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

805 
__THROW
 
	`__nÚnuÎ
 ((1));

806 #ifdeà
__USE_GNU


807 
	$±h»ad_mu‹x_cÚsi¡’t_Å
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

808 
__THROW
 
	`__nÚnuÎ
 ((1));

817 
	$±h»ad_mu‹x©Œ_š™
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
)

818 
__THROW
 
	`__nÚnuÎ
 ((1));

821 
	$±h»ad_mu‹x©Œ_de¡roy
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
)

822 
__THROW
 
	`__nÚnuÎ
 ((1));

825 
	$±h»ad_mu‹x©Œ_g‘psh¬ed
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *

826 
__»¡riù
 
__©Œ
,

827 *
__»¡riù
 
__psh¬ed
)

828 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

831 
	$±h»ad_mu‹x©Œ_£sh¬ed
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

832 
__psh¬ed
)

833 
__THROW
 
	`__nÚnuÎ
 ((1));

835 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


837 
	$±h»ad_mu‹x©Œ_g‘ty³
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *
__»¡riù


838 
__©Œ
, *
__»¡riù
 
__kšd
)

839 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

844 
	$±h»ad_mu‹x©Œ_£‰y³
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
, 
__kšd
)

845 
__THROW
 
	`__nÚnuÎ
 ((1));

849 
	$±h»ad_mu‹x©Œ_g‘´ÙocŞ
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *

850 
__»¡riù
 
__©Œ
,

851 *
__»¡riù
 
__´ÙocŞ
)

852 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

856 
	$±h»ad_mu‹x©Œ_£rÙocŞ
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

857 
__´ÙocŞ
)

858 
__THROW
 
	`__nÚnuÎ
 ((1));

861 
	$±h»ad_mu‹x©Œ_g‘´ioûšg
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *

862 
__»¡riù
 
__©Œ
,

863 *
__»¡riù
 
__´ioûšg
)

864 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

867 
	$±h»ad_mu‹x©Œ_£rioûšg
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

868 
__´ioûšg
)

869 
__THROW
 
	`__nÚnuÎ
 ((1));

871 #ifdeà
__USE_XOPEN2K


873 
	$±h»ad_mu‹x©Œ_g‘robu¡
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

874 *
__robu¡Ãss
)

875 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

876 #ifdeà
__USE_GNU


877 
	$±h»ad_mu‹x©Œ_g‘robu¡_Å
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

878 *
__robu¡Ãss
)

879 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

883 
	$±h»ad_mu‹x©Œ_£Œobu¡
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

884 
__robu¡Ãss
)

885 
__THROW
 
	`__nÚnuÎ
 ((1));

886 #ifdeà
__USE_GNU


887 
	$±h»ad_mu‹x©Œ_£Œobu¡_Å
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

888 
__robu¡Ãss
)

889 
__THROW
 
	`__nÚnuÎ
 ((1));

894 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


899 
	$±h»ad_rwlock_š™
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

900 cÚ¡ 
±h»ad_rwlock©Œ_t
 *
__»¡riù


901 
__©Œ
è
__THROW
 
	`__nÚnuÎ
 ((1));

904 
	$±h»ad_rwlock_de¡roy
 (
±h»ad_rwlock_t
 *
__rwlock
)

905 
__THROW
 
	`__nÚnuÎ
 ((1));

908 
	$±h»ad_rwlock_rdlock
 (
±h»ad_rwlock_t
 *
__rwlock
)

909 
__THROWNL
 
	`__nÚnuÎ
 ((1));

912 
	$±h»ad_rwlock_Œyrdlock
 (
±h»ad_rwlock_t
 *
__rwlock
)

913 
__THROWNL
 
	`__nÚnuÎ
 ((1));

915 #ifdeà
__USE_XOPEN2K


917 
	$±h»ad_rwlock_timedrdlock
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

918 cÚ¡ 
time¥ec
 *
__»¡riù


919 
__ab¡ime
è
__THROWNL
 
	`__nÚnuÎ
 ((1, 2));

923 
	$±h»ad_rwlock_w¾ock
 (
±h»ad_rwlock_t
 *
__rwlock
)

924 
__THROWNL
 
	`__nÚnuÎ
 ((1));

927 
	$±h»ad_rwlock_Œyw¾ock
 (
±h»ad_rwlock_t
 *
__rwlock
)

928 
__THROWNL
 
	`__nÚnuÎ
 ((1));

930 #ifdeà
__USE_XOPEN2K


932 
	$±h»ad_rwlock_timedw¾ock
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

933 cÚ¡ 
time¥ec
 *
__»¡riù


934 
__ab¡ime
è
__THROWNL
 
	`__nÚnuÎ
 ((1, 2));

938 
	$±h»ad_rwlock_uÆock
 (
±h»ad_rwlock_t
 *
__rwlock
)

939 
__THROWNL
 
	`__nÚnuÎ
 ((1));

945 
	$±h»ad_rwlock©Œ_š™
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
)

946 
__THROW
 
	`__nÚnuÎ
 ((1));

949 
	$±h»ad_rwlock©Œ_de¡roy
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
)

950 
__THROW
 
	`__nÚnuÎ
 ((1));

953 
	$±h»ad_rwlock©Œ_g‘psh¬ed
 (cÚ¡ 
±h»ad_rwlock©Œ_t
 *

954 
__»¡riù
 
__©Œ
,

955 *
__»¡riù
 
__psh¬ed
)

956 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

959 
	$±h»ad_rwlock©Œ_£sh¬ed
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
,

960 
__psh¬ed
)

961 
__THROW
 
	`__nÚnuÎ
 ((1));

964 
	$±h»ad_rwlock©Œ_g‘kšd_Å
 (cÚ¡ 
±h»ad_rwlock©Œ_t
 *

965 
__»¡riù
 
__©Œ
,

966 *
__»¡riù
 
__´ef
)

967 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

970 
	$±h»ad_rwlock©Œ_£tkšd_Å
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
,

971 
__´ef
è
__THROW
 
	`__nÚnuÎ
 ((1));

979 
	$±h»ad_cÚd_š™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

980 cÚ¡ 
±h»ad_cÚd©Œ_t
 *
__»¡riù
 
__cÚd_©Œ
)

981 
__THROW
 
	`__nÚnuÎ
 ((1));

984 
	$±h»ad_cÚd_de¡roy
 (
±h»ad_cÚd_t
 *
__cÚd
)

985 
__THROW
 
	`__nÚnuÎ
 ((1));

988 
	$±h»ad_cÚd_sigÇl
 (
±h»ad_cÚd_t
 *
__cÚd
)

989 
__THROWNL
 
	`__nÚnuÎ
 ((1));

992 
	$±h»ad_cÚd_brßdÿ¡
 (
±h»ad_cÚd_t
 *
__cÚd
)

993 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1000 
	$±h»ad_cÚd_wa™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

1001 
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
)

1002 
	`__nÚnuÎ
 ((1, 2));

1011 
	$±h»ad_cÚd_timedwa™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

1012 
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

1013 cÚ¡ 
time¥ec
 *
__»¡riù
 
__ab¡ime
)

1014 
	`__nÚnuÎ
 ((1, 2, 3));

1019 
	$±h»ad_cÚd©Œ_š™
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
)

1020 
__THROW
 
	`__nÚnuÎ
 ((1));

1023 
	$±h»ad_cÚd©Œ_de¡roy
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
)

1024 
__THROW
 
	`__nÚnuÎ
 ((1));

1027 
	$±h»ad_cÚd©Œ_g‘psh¬ed
 (cÚ¡ 
±h»ad_cÚd©Œ_t
 *

1028 
__»¡riù
 
__©Œ
,

1029 *
__»¡riù
 
__psh¬ed
)

1030 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1033 
	$±h»ad_cÚd©Œ_£sh¬ed
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
,

1034 
__psh¬ed
è
__THROW
 
	`__nÚnuÎ
 ((1));

1036 #ifdeà
__USE_XOPEN2K


1038 
	$±h»ad_cÚd©Œ_g‘şock
 (cÚ¡ 
±h»ad_cÚd©Œ_t
 *

1039 
__»¡riù
 
__©Œ
,

1040 
__şockid_t
 *
__»¡riù
 
__şock_id
)

1041 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1044 
	$±h»ad_cÚd©Œ_£tşock
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
,

1045 
__şockid_t
 
__şock_id
)

1046 
__THROW
 
	`__nÚnuÎ
 ((1));

1050 #ifdeà
__USE_XOPEN2K


1055 
	$±h»ad_¥š_š™
 (
±h»ad_¥šlock_t
 *
__lock
, 
__psh¬ed
)

1056 
__THROW
 
	`__nÚnuÎ
 ((1));

1059 
	$±h»ad_¥š_de¡roy
 (
±h»ad_¥šlock_t
 *
__lock
)

1060 
__THROW
 
	`__nÚnuÎ
 ((1));

1063 
	$±h»ad_¥š_lock
 (
±h»ad_¥šlock_t
 *
__lock
)

1064 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1067 
	$±h»ad_¥š_Œylock
 (
±h»ad_¥šlock_t
 *
__lock
)

1068 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1071 
	$±h»ad_¥š_uÆock
 (
±h»ad_¥šlock_t
 *
__lock
)

1072 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1079 
	$±h»ad_b¬r›r_š™
 (
±h»ad_b¬r›r_t
 *
__»¡riù
 
__b¬r›r
,

1080 cÚ¡ 
±h»ad_b¬r›¿‰r_t
 *
__»¡riù


1081 
__©Œ
, 
__couÁ
)

1082 
__THROW
 
	`__nÚnuÎ
 ((1));

1085 
	$±h»ad_b¬r›r_de¡roy
 (
±h»ad_b¬r›r_t
 *
__b¬r›r
)

1086 
__THROW
 
	`__nÚnuÎ
 ((1));

1089 
	$±h»ad_b¬r›r_wa™
 (
±h»ad_b¬r›r_t
 *
__b¬r›r
)

1090 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1094 
	$±h»ad_b¬r›¿‰r_š™
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
)

1095 
__THROW
 
	`__nÚnuÎ
 ((1));

1098 
	$±h»ad_b¬r›¿‰r_de¡roy
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
)

1099 
__THROW
 
	`__nÚnuÎ
 ((1));

1102 
	$±h»ad_b¬r›¿‰r_g‘psh¬ed
 (cÚ¡ 
±h»ad_b¬r›¿‰r_t
 *

1103 
__»¡riù
 
__©Œ
,

1104 *
__»¡riù
 
__psh¬ed
)

1105 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1108 
	$±h»ad_b¬r›¿‰r_£sh¬ed
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
,

1109 
__psh¬ed
)

1110 
__THROW
 
	`__nÚnuÎ
 ((1));

1122 
	`±h»ad_key_ü—‹
 (
±h»ad_key_t
 *
__key
,

1123 (*
__de¡r_funùiÚ
) (*))

1124 
__THROW
 
	`__nÚnuÎ
 ((1));

1127 
	$±h»ad_key_d–‘e
 (
±h»ad_key_t
 
__key
è
__THROW
;

1130 *
	$±h»ad_g‘¥ecific
 (
±h»ad_key_t
 
__key
è
__THROW
;

1133 
	$±h»ad_£t¥ecific
 (
±h»ad_key_t
 
__key
,

1134 cÚ¡ *
__poš‹r
è
__THROW
 ;

1137 #ifdeà
__USE_XOPEN2K


1139 
	$±h»ad_g‘ıuşockid
 (
±h»ad_t
 
__th»ad_id
,

1140 
__şockid_t
 *
__şock_id
)

1141 
__THROW
 
	`__nÚnuÎ
 ((2));

1156 
	`±h»ad_©fÜk
 ((*
__´•¬e
) (),

1157 (*
__·»Á
) (),

1158 (*
__chd
è()è
__THROW
;

1161 #ifdeà
__USE_EXTERN_INLINES


1163 
__ex‹º_šlše
 

1164 
	`__NTH
 (
	$±h»ad_equ®
 (
±h»ad_t
 
__th»ad1
,…th»ad_ˆ
__th»ad2
))

1166  
__th»ad1
 =ğ
__th»ad2
;

1167 
	}
}

1170 
	g__END_DECLS


	@/usr/include/wctype.h

23 #iâdeà
_WCTYPE_H


25 
	~<ã©u»s.h
>

26 
	~<b™s/ty³s.h
>

28 #iâdeà
__Ãed_iswxxx


29 
	#_WCTYPE_H
 1

	)

32 
	#__Ãed_wšt_t


	)

33 
	~<wch¬.h
>

37 #iâdeà
WEOF


38 
	#WEOF
 (0xffffffffu)

	)

41 #undeà
__Ãed_iswxxx


46 #iâdeà
__iswxxx_defšed


47 
	#__iswxxx_defšed
 1

	)

49 
__BEGIN_NAMESPACE_C99


52 
	twùy³_t
;

53 
	g__END_NAMESPACE_C99


55 #iâdeà
_ISwb™


60 
	~<’dŸn.h
>

61 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


62 
	#_ISwb™
(
b™
è(1 << (b™))

	)

64 
	#_ISwb™
(
b™
) \

65 ((
b™
) < 8 ? () ((1UL << (bit)) << 24) \

66 : ((
b™
) < 16 ? () ((1UL << (bit)) << 8) \

67 : ((
b™
) < 24 ? () ((1UL << (bit)) >> 8) \

68 : (è((1UL << (
b™
)è>> 24))))

	)

73 
	m__ISwuµ”
 = 0,

74 
	m__ISwlow”
 = 1,

75 
	m__ISw®pha
 = 2,

76 
	m__ISwdig™
 = 3,

77 
	m__ISwxdig™
 = 4,

78 
	m__ISw¥aû
 = 5,

79 
	m__ISw´št
 = 6,

80 
	m__ISwg¿ph
 = 7,

81 
	m__ISwbÏnk
 = 8,

82 
	m__ISwúŒl
 = 9,

83 
	m__ISwpunù
 = 10,

84 
	m__ISw®num
 = 11,

86 
	m_ISwuµ”
 = 
_ISwb™
 (
__ISwuµ”
),

87 
	m_ISwlow”
 = 
_ISwb™
 (
__ISwlow”
),

88 
	m_ISw®pha
 = 
_ISwb™
 (
__ISw®pha
),

89 
	m_ISwdig™
 = 
_ISwb™
 (
__ISwdig™
),

90 
	m_ISwxdig™
 = 
_ISwb™
 (
__ISwxdig™
),

91 
	m_ISw¥aû
 = 
_ISwb™
 (
__ISw¥aû
),

92 
	m_ISw´št
 = 
_ISwb™
 (
__ISw´št
),

93 
	m_ISwg¿ph
 = 
_ISwb™
 (
__ISwg¿ph
),

94 
	m_ISwbÏnk
 = 
_ISwb™
 (
__ISwbÏnk
),

95 
	m_ISwúŒl
 = 
_ISwb™
 (
__ISwúŒl
),

96 
	m_ISwpunù
 = 
_ISwb™
 (
__ISwpunù
),

97 
	m_ISw®num
 = 
_ISwb™
 (
__ISw®num
)

102 
__BEGIN_DECLS


104 
__BEGIN_NAMESPACE_C99


111 
	$isw®num
 (
wšt_t
 
__wc
è
__THROW
;

117 
	$isw®pha
 (
wšt_t
 
__wc
è
__THROW
;

120 
	$iswúŒl
 (
wšt_t
 
__wc
è
__THROW
;

124 
	$iswdig™
 (
wšt_t
 
__wc
è
__THROW
;

128 
	$iswg¿ph
 (
wšt_t
 
__wc
è
__THROW
;

133 
	$iswlow”
 (
wšt_t
 
__wc
è
__THROW
;

136 
	$isw´št
 (
wšt_t
 
__wc
è
__THROW
;

141 
	$iswpunù
 (
wšt_t
 
__wc
è
__THROW
;

146 
	$isw¥aû
 (
wšt_t
 
__wc
è
__THROW
;

151 
	$iswuµ”
 (
wšt_t
 
__wc
è
__THROW
;

156 
	$iswxdig™
 (
wšt_t
 
__wc
è
__THROW
;

161 #ifdeà
__USE_ISOC99


162 
	$iswbÏnk
 (
wšt_t
 
__wc
è
__THROW
;

171 
wùy³_t
 
	$wùy³
 (cÚ¡ *
__´İ”ty
è
__THROW
;

175 
	$iswùy³
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
è
__THROW
;

176 
__END_NAMESPACE_C99


183 
__BEGIN_NAMESPACE_C99


186 cÚ¡ 
	t__št32_t
 *
	twù¿ns_t
;

187 
__END_NAMESPACE_C99


188 #ifdeà
__USE_GNU


189 
	$__USING_NAMESPACE_C99
(
wù¿ns_t
)

192 
__BEGIN_NAMESPACE_C99


194 
wšt_t
 
	$towlow”
 (
wšt_t
 
__wc
è
__THROW
;

197 
wšt_t
 
	$towuµ”
 (
wšt_t
 
__wc
è
__THROW
;

198 
__END_NAMESPACE_C99


200 
__END_DECLS


207 #ifdeà
_WCTYPE_H


213 
__BEGIN_DECLS


215 
__BEGIN_NAMESPACE_C99


218 
wù¿ns_t
 
	$wù¿ns
 (cÚ¡ *
__´İ”ty
è
__THROW
;

221 
wšt_t
 
	$towù¿ns
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
è
__THROW
;

222 
__END_NAMESPACE_C99


224 #ifdeà
__USE_XOPEN2K8


226 
	~<xloÿË.h
>

230 
	$isw®num_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

236 
	$isw®pha_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

239 
	$iswúŒl_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

243 
	$iswdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

247 
	$iswg¿ph_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

252 
	$iswlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

255 
	$isw´št_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

260 
	$iswpunù_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

265 
	$isw¥aû_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

270 
	$iswuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

275 
	$iswxdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

280 
	$iswbÏnk_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

284 
wùy³_t
 
	$wùy³_l
 (cÚ¡ *
__´İ”ty
, 
__loÿË_t
 
__loÿË
)

285 
__THROW
;

289 
	$iswùy³_l
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
, 
__loÿË_t
 
__loÿË
)

290 
__THROW
;

298 
wšt_t
 
	$towlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

301 
wšt_t
 
	$towuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

305 
wù¿ns_t
 
	$wù¿ns_l
 (cÚ¡ *
__´İ”ty
, 
__loÿË_t
 
__loÿË
)

306 
__THROW
;

309 
wšt_t
 
	$towù¿ns_l
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
,

310 
__loÿË_t
 
__loÿË
è
__THROW
;

314 
__END_DECLS


	@/usr/include/asm-generic/errno-base.h

1 #iâdeà
_ASM_GENERIC_ERRNO_BASE_H


2 
	#_ASM_GENERIC_ERRNO_BASE_H


	)

4 
	#EPERM
 1

	)

5 
	#ENOENT
 2

	)

6 
	#ESRCH
 3

	)

7 
	#EINTR
 4

	)

8 
	#EIO
 5

	)

9 
	#ENXIO
 6

	)

10 
	#E2BIG
 7

	)

11 
	#ENOEXEC
 8

	)

12 
	#EBADF
 9

	)

13 
	#ECHILD
 10

	)

14 
	#EAGAIN
 11

	)

15 
	#ENOMEM
 12

	)

16 
	#EACCES
 13

	)

17 
	#EFAULT
 14

	)

18 
	#ENOTBLK
 15

	)

19 
	#EBUSY
 16

	)

20 
	#EEXIST
 17

	)

21 
	#EXDEV
 18

	)

22 
	#ENODEV
 19

	)

23 
	#ENOTDIR
 20

	)

24 
	#EISDIR
 21

	)

25 
	#EINVAL
 22

	)

26 
	#ENFILE
 23

	)

27 
	#EMFILE
 24

	)

28 
	#ENOTTY
 25

	)

29 
	#ETXTBSY
 26

	)

30 
	#EFBIG
 27

	)

31 
	#ENOSPC
 28

	)

32 
	#ESPIPE
 29

	)

33 
	#EROFS
 30

	)

34 
	#EMLINK
 31

	)

35 
	#EPIPE
 32

	)

36 
	#EDOM
 33

	)

37 
	#ERANGE
 34

	)

	@/usr/include/sched.h

19 #iâdef 
_SCHED_H


20 
	#_SCHED_H
 1

	)

22 
	~<ã©u»s.h
>

25 
	~<b™s/ty³s.h
>

27 
	#__Ãed_size_t


	)

28 
	~<¡ddef.h
>

30 
	#__Ãed_time_t


	)

31 
	#__Ãed_time¥ec


	)

32 
	~<time.h
>

34 #iâdeà
__pid_t_defšed


35 
__pid_t
 
	tpid_t
;

36 
	#__pid_t_defšed


	)

41 
	~<b™s/sched.h
>

43 
	#sched_´iÜ™y
 
__sched_´iÜ™y


	)

46 
__BEGIN_DECLS


49 
	$sched_£¬am
 (
__pid_t
 
__pid
, cÚ¡ 
sched_·¿m
 *
__·¿m
)

50 
__THROW
;

53 
	$sched_g‘·¿m
 (
__pid_t
 
__pid
, 
sched_·¿m
 *
__·¿m
è
__THROW
;

56 
	$sched_£tscheduËr
 (
__pid_t
 
__pid
, 
__pŞicy
,

57 cÚ¡ 
sched_·¿m
 *
__·¿m
è
__THROW
;

60 
	$sched_g‘scheduËr
 (
__pid_t
 
__pid
è
__THROW
;

63 
	$sched_y›ld
 (è
__THROW
;

66 
	$sched_g‘_´iÜ™y_max
 (
__®gÜ™hm
è
__THROW
;

69 
	$sched_g‘_´iÜ™y_mš
 (
__®gÜ™hm
è
__THROW
;

72 
	$sched_¼_g‘_š‹rv®
 (
__pid_t
 
__pid
, 
time¥ec
 *
__t
è
__THROW
;

75 #ifdeà
__USE_GNU


77 
	#CPU_SETSIZE
 
__CPU_SETSIZE


	)

78 
	#CPU_SET
(
ıu
, 
ıu£
è
	`__CPU_SET_S
 (ıu,  (
ıu_£t_t
), cpu£)

	)

79 
	#CPU_CLR
(
ıu
, 
ıu£
è
	`__CPU_CLR_S
 (ıu,  (
ıu_£t_t
), cpu£)

	)

80 
	#CPU_ISSET
(
ıu
, 
ıu£
è
	`__CPU_ISSET_S
 (ıu,  (
ıu_£t_t
), \

81 
ıu£
)

	)

82 
	#CPU_ZERO
(
ıu£
è
	`__CPU_ZERO_S
 ( (
ıu_£t_t
), cpu£)

	)

83 
	#CPU_COUNT
(
ıu£
è
	`__CPU_COUNT_S
 ( (
ıu_£t_t
), cpu£)

	)

85 
	#CPU_SET_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_SET_S
 (ıu, s‘size, cpu£)

	)

86 
	#CPU_CLR_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_CLR_S
 (ıu, s‘size, cpu£)

	)

87 
	#CPU_ISSET_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_ISSET_S
 (cpu, setsize, \

88 
ıu£
)

	)

89 
	#CPU_ZERO_S
(
£tsize
, 
ıu£
è
	`__CPU_ZERO_S
 (£tsize, cpu£)

	)

90 
	#CPU_COUNT_S
(
£tsize
, 
ıu£
è
	`__CPU_COUNT_S
 (£tsize, cpu£)

	)

92 
	#CPU_EQUAL
(
ıu£1
, 
ıu£2
) \

93 
	`__CPU_EQUAL_S
 ( (
ıu_£t_t
), 
ıu£1
, 
ıu£2
)

	)

94 
	#CPU_EQUAL_S
(
£tsize
, 
ıu£1
, 
ıu£2
) \

95 
	`__CPU_EQUAL_S
 (
£tsize
, 
ıu£1
, 
ıu£2
)

	)

97 
	#CPU_AND
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

98 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, &)

	)

99 
	#CPU_OR
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

100 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, |)

	)

101 
	#CPU_XOR
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

102 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, ^)

	)

103 
	#CPU_AND_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

104 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, &)

	)

105 
	#CPU_OR_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

106 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, |)

	)

107 
	#CPU_XOR_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

108 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, ^)

	)

110 
	#CPU_ALLOC_SIZE
(
couÁ
è
	`__CPU_ALLOC_SIZE
 (couÁ)

	)

111 
	#CPU_ALLOC
(
couÁ
è
	`__CPU_ALLOC
 (couÁ)

	)

112 
	#CPU_FREE
(
ıu£t
è
	`__CPU_FREE
 (ıu£t)

	)

116 
	$sched_£ffš™y
 (
__pid_t
 
__pid
, 
size_t
 
__ıu£tsize
,

117 cÚ¡ 
ıu_£t_t
 *
__ıu£t
è
__THROW
;

120 
	$sched_g‘affš™y
 (
__pid_t
 
__pid
, 
size_t
 
__ıu£tsize
,

121 
ıu_£t_t
 *
__ıu£t
è
__THROW
;

124 
__END_DECLS


	@/usr/include/bits/sched.h

20 #iâdeà
__Ãed_sched·¿m


22 #iâdeà
_SCHED_H


28 
	#SCHED_OTHER
 0

	)

29 
	#SCHED_FIFO
 1

	)

30 
	#SCHED_RR
 2

	)

31 #ifdeà
__USE_GNU


32 
	#SCHED_BATCH
 3

	)

33 
	#SCHED_IDLE
 5

	)

35 
	#SCHED_RESET_ON_FORK
 0x40000000

	)

38 #ifdeà
__USE_GNU


40 
	#CSIGNAL
 0x000000fà

	)

41 
	#CLONE_VM
 0x00000100

	)

42 
	#CLONE_FS
 0x00000200

	)

43 
	#CLONE_FILES
 0x00000400

	)

44 
	#CLONE_SIGHAND
 0x00000800

	)

45 
	#CLONE_PTRACE
 0x00002000

	)

46 
	#CLONE_VFORK
 0x00004000

	)

48 
	#CLONE_PARENT
 0x00008000

	)

50 
	#CLONE_THREAD
 0x00010000

	)

51 
	#CLONE_NEWNS
 0x00020000

	)

52 
	#CLONE_SYSVSEM
 0x00040000

	)

53 
	#CLONE_SETTLS
 0x00080000

	)

54 
	#CLONE_PARENT_SETTID
 0x00100000

	)

56 
	#CLONE_CHILD_CLEARTID
 0x00200000

	)

58 
	#CLONE_DETACHED
 0x00400000

	)

59 
	#CLONE_UNTRACED
 0x00800000

	)

61 
	#CLONE_CHILD_SETTID
 0x01000000

	)

63 
	#CLONE_NEWUTS
 0x04000000

	)

64 
	#CLONE_NEWIPC
 0x08000000

	)

65 
	#CLONE_NEWUSER
 0x10000000

	)

66 
	#CLONE_NEWPID
 0x20000000

	)

67 
	#CLONE_NEWNET
 0x40000000

	)

68 
	#CLONE_IO
 0x80000000

	)

72 
	ssched_·¿m


74 
	m__sched_´iÜ™y
;

77 
	g__BEGIN_DECLS


79 #ifdeà
__USE_GNU


81 
şÚe
 ((*
__â
è(*
__¬g
), *
__chd_¡ack
,

82 
__æags
, *
__¬g
, ...è
__THROW
;

85 
	$unsh¬e
 (
__æags
è
__THROW
;

88 
	$sched_g‘ıu
 (è
__THROW
;

91 
	$£Šs
 (
__fd
, 
__n¡y³
è
__THROW
;

95 
__END_DECLS


99 #ià!
defšed
 
__defšed_sched·¿m
 \

100 && (
defšed
 
__Ãed_sched·¿m
 || defšed 
_SCHED_H
)

101 
	#__defšed_sched·¿m
 1

	)

103 
	s__sched_·¿m


105 
__sched_´iÜ™y
;

107 #undeà
__Ãed_sched·¿m


111 #ià
defšed
 
_SCHED_H
 && !defšed 
__ıu_£t_t_defšed


112 
	#__ıu_£t_t_defšed


	)

114 
	#__CPU_SETSIZE
 1024

	)

115 
	#__NCPUBITS
 (8 *  (
__ıu_mask
))

	)

118 
	t__ıu_mask
;

121 
	#__CPUELT
(
ıu
è((ıuè/ 
__NCPUBITS
)

	)

122 
	#__CPUMASK
(
ıu
è((
__ıu_mask
è1 << ((ıuè% 
__NCPUBITS
))

	)

127 
__ıu_mask
 
__b™s
[
__CPU_SETSIZE
 / 
__NCPUBITS
];

128 } 
	tıu_£t_t
;

131 #ià
	`__GNUC_PREREQ
 (2, 91)

132 
	#__CPU_ZERO_S
(
£tsize
, 
ıu£
) \

133 dØ
	`__butš_mem£t
 (
ıu£
, '\0', 
£tsize
); 0)

	)

135 
	#__CPU_ZERO_S
(
£tsize
, 
ıu£
) \

137 
size_t
 
__i
; \

138 
size_t
 
__imax
 = (
£tsize
è/  (
__ıu_mask
); \

139 
__ıu_mask
 *
__b™s
 = (
ıu£
)->__bits; \

140 
__i
 = 0; __˜< 
__imax
; ++__i) \

141 
__b™s
[
__i
] = 0; \

142 
	}
} 0)

	)

144 
	#__CPU_SET_S
(
ıu
, 
£tsize
, 
ıu£
) \

145 (
__ex‹nsiÚ__
 \

146 ({ 
size_t
 
__ıu
 = (
ıu
); \

147 
__ıu
 / 8 < (
£tsize
) \

148 ? (((
__ıu_mask
 *è((
ıu£
)->
__b™s
))[
	`__CPUELT
 (
__ıu
)] \

149 |ğ
	`__CPUMASK
 (
__ıu
)) \

150 : 0; }))

	)

151 
	#__CPU_CLR_S
(
ıu
, 
£tsize
, 
ıu£
) \

152 (
__ex‹nsiÚ__
 \

153 ({ 
size_t
 
__ıu
 = (
ıu
); \

154 
__ıu
 / 8 < (
£tsize
) \

155 ? (((
__ıu_mask
 *è((
ıu£
)->
__b™s
))[
	`__CPUELT
 (
__ıu
)] \

156 &ğ~
	`__CPUMASK
 (
__ıu
)) \

157 : 0; }))

	)

158 
	#__CPU_ISSET_S
(
ıu
, 
£tsize
, 
ıu£
) \

159 (
__ex‹nsiÚ__
 \

160 ({ 
size_t
 
__ıu
 = (
ıu
); \

161 
__ıu
 / 8 < (
£tsize
) \

162 ? ((((cÚ¡ 
__ıu_mask
 *è((
ıu£
)->
__b™s
))[
	`__CPUELT
 (
__ıu
)] \

163 & 
	`__CPUMASK
 (
__ıu
))) != 0 \

164 : 0; }))

	)

166 
	#__CPU_COUNT_S
(
£tsize
, 
ıu£
) \

167 
	`__sched_ıucouÁ
 (
£tsize
, 
ıu£
)

	)

169 #ià
__GNUC_PREREQ
 (2, 91)

170 
	#__CPU_EQUAL_S
(
£tsize
, 
ıu£1
, 
ıu£2
) \

171 (
	`__butš_memcmp
 (
ıu£1
, 
ıu£2
, 
£tsize
è=ğ0)

	)

173 
	#__CPU_EQUAL_S
(
£tsize
, 
ıu£1
, 
ıu£2
) \

174 (
__ex‹nsiÚ__
 \

175 ({ cÚ¡ 
__ıu_mask
 *
__¬r1
 = (
ıu£1
)->
__b™s
; \

176 cÚ¡ 
__ıu_mask
 *
__¬r2
 = (
ıu£2
)->
__b™s
; \

177 
size_t
 
__imax
 = (
£tsize
è/  (
__ıu_mask
); \

178 
size_t
 
__i
; \

179 
__i
 = 0; __˜< 
__imax
; ++__i) \

180 ià(
__¬r1
[
__i
] !ğ
__¬r2
[__i]) \

182 
__i
 =ğ
__imax
; }))

	)

185 
	#__CPU_OP_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, 
İ
) \

186 (
__ex‹nsiÚ__
 \

187 ({ 
ıu_£t_t
 *
__de¡
 = (
de¡£t
); \

188 cÚ¡ 
__ıu_mask
 *
__¬r1
 = (
¤c£t1
)->
__b™s
; \

189 cÚ¡ 
__ıu_mask
 *
__¬r2
 = (
¤c£t2
)->
__b™s
; \

190 
size_t
 
__imax
 = (
£tsize
è/  (
__ıu_mask
); \

191 
size_t
 
__i
; \

192 
__i
 = 0; __˜< 
__imax
; ++__i) \

193 ((
__ıu_mask
 *è
__de¡
->
__b™s
)[
__i
] = 
__¬r1
[__i] 
İ
 
__¬r2
[__i]; \

194 
__de¡
; }))

	)

196 
	#__CPU_ALLOC_SIZE
(
couÁ
) \

197 ((((
couÁ
è+ 
__NCPUBITS
 - 1è/ __NCPUBITSè*  (
__ıu_mask
))

	)

198 
	#__CPU_ALLOC
(
couÁ
è
	`__sched_ıu®loc
 (couÁ)

	)

199 
	#__CPU_FREE
(
ıu£t
è
	`__sched_ıuä“
 (ıu£t)

	)

201 
__BEGIN_DECLS


203 
	$__sched_ıucouÁ
 (
size_t
 
__£tsize
, cÚ¡ 
ıu_£t_t
 *
__£
)

204 
__THROW
;

205 
ıu_£t_t
 *
	$__sched_ıu®loc
 (
size_t
 
__couÁ
è
__THROW
 
__wur
;

206 
	$__sched_ıuä“
 (
ıu_£t_t
 *
__£t
è
__THROW
;

208 
__END_DECLS


	@
1
.
1
/usr/include
170
3114
ansi2knr.c
cderror.h
cdjpeg.c
cdjpeg.h
cjpeg.c
ckconfig.c
djpeg.c
example.c
jcapimin.c
jcapistd.c
jccoefct.c
jccolor.c
jcdctmgr.c
jchuff.c
jchuff.h
jcinit.c
jcmainct.c
jcmarker.c
jcmaster.c
jcomapi.c
jconfig.h
jcparam.c
jcphuff.c
jcprepct.c
jcsample.c
jctrans.c
jdapimin.c
jdapistd.c
jdatadst.c
jdatasrc.c
jdcoefct.c
jdcolor.c
jdct.h
jddctmgr.c
jdhuff.c
jdhuff.h
jdinput.c
jdmainct.c
jdmarker.c
jdmaster.c
jdmerge.c
jdphuff.c
jdpostct.c
jdsample.c
jdtrans.c
jerror.c
jerror.h
jfdctflt.c
jfdctfst.c
jfdctint.c
jidctflt.c
jidctfst.c
jidctint.c
jidctred.c
jinclude.h
jmemansi.c
jmemdos.c
jmemmac.c
jmemmgr.c
jmemname.c
jmemnobs.c
jmemsys.h
jmorecfg.h
jpegint.h
jpeglib.h
jpegtran.c
jquant1.c
jquant2.c
jutils.c
jversion.h
rdbmp.c
rdcolmap.c
rdgif.c
rdjpgcom.c
rdppm.c
rdrle.c
rdswitch.c
rdtarga.c
transupp.c
transupp.h
wrbmp.c
wrgif.c
wrjpgcom.c
wrppm.c
wrrle.c
wrtarga.c
/usr/include/ctype.h
/usr/include/errno.h
/usr/include/fcntl.h
/usr/include/malloc.h
/usr/include/setjmp.h
/usr/include/signal.h
/usr/include/stdio.h
/usr/include/stdlib.h
/usr/include/string.h
/usr/include/strings.h
/usr/include/sys/types.h
/usr/include/alloca.h
/usr/include/bits/errno.h
/usr/include/bits/fcntl.h
/usr/include/bits/fcntl2.h
/usr/include/bits/pthreadtypes.h
/usr/include/bits/setjmp.h
/usr/include/bits/setjmp2.h
/usr/include/bits/sigaction.h
/usr/include/bits/sigcontext.h
/usr/include/bits/siginfo.h
/usr/include/bits/signum.h
/usr/include/bits/sigset.h
/usr/include/bits/sigstack.h
/usr/include/bits/sigthread.h
/usr/include/bits/stat.h
/usr/include/bits/stdio-ldbl.h
/usr/include/bits/stdio.h
/usr/include/bits/stdio2.h
/usr/include/bits/stdio_lim.h
/usr/include/bits/stdlib-bsearch.h
/usr/include/bits/stdlib-float.h
/usr/include/bits/stdlib-ldbl.h
/usr/include/bits/stdlib.h
/usr/include/bits/string.h
/usr/include/bits/string2.h
/usr/include/bits/string3.h
/usr/include/bits/sys_errlist.h
/usr/include/bits/types.h
/usr/include/bits/waitflags.h
/usr/include/bits/waitstatus.h
/usr/include/endian.h
/usr/include/features.h
/usr/include/getopt.h
/usr/include/libio.h
/usr/include/sys/select.h
/usr/include/sys/sysmacros.h
/usr/include/sys/ucontext.h
/usr/include/time.h
/usr/include/xlocale.h
/usr/include/_G_config.h
/usr/include/bits/byteswap.h
/usr/include/bits/endian.h
/usr/include/bits/fcntl-linux.h
/usr/include/bits/libio-ldbl.h
/usr/include/bits/select.h
/usr/include/bits/select2.h
/usr/include/bits/stdio-lock.h
/usr/include/bits/time.h
/usr/include/bits/typesizes.h
/usr/include/bits/wordsize.h
/usr/include/gnu/stubs.h
/usr/include/linux/errno.h
/usr/include/stdc-predef.h
/usr/include/sys/cdefs.h
/usr/include/asm/errno.h
/usr/include/bits/byteswap-16.h
/usr/include/bits/libc-lock.h
/usr/include/bits/timex.h
/usr/include/bits/uio.h
/usr/include/gconv.h
/usr/include/gnu/stubs-32.h
/usr/include/gnu/stubs-64.h
/usr/include/gnu/stubs-x32.h
/usr/include/wchar.h
/usr/include/asm-generic/errno.h
/usr/include/bits/wchar-ldbl.h
/usr/include/bits/wchar.h
/usr/include/bits/wchar2.h
/usr/include/pthread.h
/usr/include/wctype.h
/usr/include/asm-generic/errno-base.h
/usr/include/sched.h
/usr/include/bits/sched.h
